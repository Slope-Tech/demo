/*! For license information please see tricorder.js.LICENSE.txt */
(()=>{var e={3379:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAggregator=void 0;var n=function(){function e(e){var t=this;this.filterFunction=e,this.aggregatedMetrics={},window.addEventListener("katal.metrics.publish",(function(e){t.aggregateMetric(e)}))}return e.prototype.aggregateMetric=function(e){var t=e.detail,n=t.metric,r=t.context,i=r.serviceName,o=r.methodName;this.filterFunction&&!this.filterFunction(n,r)||(this.aggregatedMetrics[i]=this.aggregatedMetrics[i]||{},this.aggregatedMetrics[i][o]=this.aggregatedMetrics[i][o]||{},this.aggregatedMetrics[i][o][n.name]=this.aggregatedMetrics[i][o][n.name]||[],this.aggregatedMetrics[i][o][n.name].push(n.value))},e}();t.MetricsAggregator=n},3207:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Level=void 0;var s,a=o(n(5246)),u=o(n(8139)),c=n(5252),l=n(3379);!function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e.FATAL="fatal"}(s=t.Level||(t.Level={}));var d=[s.DEBUG,s.INFO,s.WARN,s.ERROR,s.FATAL],f={logThreshold:s.DEBUG,maxLogLineSize:1e4,batchTimeoutDuration:5e3,decodeStackTrace:!1,recordMetrics:!0,context:{},headers:{},logToConsole:!1,maxLogsPerBatch:25,useXMLHttpRequest:!1},h=["bubbles","cancelBubble","cancelable","composed","currentTarget","deepPath","defaultPrevented","eventPhase","explicitOriginalTarget","originalTarget","returnValue","srcElement","target","timeStamp","type","isTrusted"],p=i(h,["message"]),v=function(){function e(e){var t=this;this.resourceTimingLogged=!1,this.sendLogsToBackend=function(){var e=t.logLineQueue;if(0!==e.length){t.logLineQueue=[],t.currentLogBatchSize=0;var n={logs:e};t.sendLogToBackend(t.toJSON(n)),t.queueTimerId=void 0}};var n=r(r({},f),e);if(this.url=n.url,this.logThreshold=n.logThreshold,this.maxLogLineSize=n.maxLogLineSize,this.context=n.context,this.logToConsole=n.logToConsole,this.headers=n.headers,this.recordMetrics=n.recordMetrics,this.batchTimeoutDuration=n.batchTimeoutDuration,this.decodeStackTrace=n.decodeStackTrace,this.maxLogsPerBatch=n.maxLogsPerBatch,this.maxLogBatchSize=e.maxLogBatchSize||this.maxLogLineSize*(this.maxLogsPerBatch||1),this.currentLogBatchSize=0,this.xhrWithCredentials=n.xhrWithCredentials,this.useXMLHttpRequest=n.useXMLHttpRequest,this.logLineQueue=[],this.unregisterFns=[],this.unloaded=!1,this.logThresholdIndex=Math.max(d.indexOf(s.DEBUG),d.indexOf(this.logThreshold)),this.maxLogBatchSize<this.maxLogLineSize)throw new Error("maxLogBatchSize("+this.maxLogBatchSize+") must be greater than maxLogLineSize("+this.maxLogLineSize+")");n.sendToBackendOverride&&"function"==typeof n.sendToBackendOverride&&(this.sendLogToBackend=n.sendToBackendOverride),this.recordMetrics&&(this.metricsPublisher=c.createMetricsPublisher("KatalLogger:Loaded"),this.metricsPublisher.publishCounterMonitor("KatalLogger:construct",1)),this.registerUnloadAction((function(){t.unloaded=!0,t.sendLogsToBackend()})),this.registerBackToPageAction((function(){t.unloaded=!1}))}return e.prototype.registerUnloadAction=function(e){this.registerEvent("pagehide",e),this.registerEvent("beforeunload",e),this.registerEvent("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},e.prototype.registerBackToPageAction=function(e){this.registerEvent("pageshow",e),this.registerEvent("visibilitychange",(function(){"visible"===document.visibilityState&&e()}))},e.prototype.addMetricsListener=function(e){var t=this,n=new l.MetricsAggregator(e),r=!1;this.registerUnloadAction((function(){r||(r=!0,t.info("Katal Metrics",n.aggregatedMetrics))}))},e.prototype.addPerformanceListener=function(){var e=this;this.registerUnloadAction((function(){e.logResourceTiming()}))},e.prototype.logResourceTiming=function(){var e,t;if(!this.resourceTimingLogged){this.resourceTimingLogged=!0;var n=window.performance.getEntriesByType("resource").reduce((function(e,t){var n,r=t,i=r.name,o=r.initiatorType,s=r.duration,a=i.split("/").pop();return e[o]=null!==(n=e[o])&&void 0!==n?n:{},e[o][a]=Math.round(s),e}),{}),r=window.performance.getEntriesByType("paint").reduce((function(e,t){var n=t.name,r=t.startTime;return e[n]=Math.round(r),e}),{}),i=Object.entries(null!==(t=null===(e=window.performance.getEntriesByType("navigation")[0])||void 0===e?void 0:e.toJSON())&&void 0!==t?t:{}).reduce((function(e,t){var n=t[0],r=t[1];return e[n]="number"==typeof r?Math.round(r):r,e}),{});this.info("Performance Timing",{resource:n,paint:r,navigation:i})}},e.prototype.addErrorListener=function(e){var t=this;["error","unhandledrejection"].map((function(n){t.registerEvent(n,(function(n){return t.eventListener(n,e)}),!0)}))},e.prototype.removeErrorListener=function(){this.unregisterFns.forEach((function(e){return e()}))},e.prototype.registerEvent=function(e,t,n){window.addEventListener(e,t,n),this.unregisterFns.push((function(){window.removeEventListener(e,t,n)}))},e.prototype.eventListener=function(e,t){var n,r;if(e.error?(n=e.error.message,r=e.error):e.reason?g(e.reason)?(n=e.reason.message,r=e.reason):n=e.reason:g(e)?(n=e.message,r=e):(n="An unknown error occurred: "+this.toStringObject(e),r=new Error("Unknown error")),"KatalLogger error"!==n&&(!t||t(r)))try{return this.error(n,r)}catch(i){}},e.prototype.createJsonStringifyReplacer=function(){var e=new Map;return function(t,n){if(n instanceof Node)return n.nodeName+" - "+(n instanceof Element?Array.from(n.attributes,(function(e){return e.name+": "+e.value})).join(", "):"");if("object"==typeof n&&null!=n){if(e.has(n))return"reference-loop, also referenced from '"+e.get(n)+"'";e.set(n,t)}return n}},e.prototype.toStringObject=function(e){var t=e.constructor.name;if(e instanceof Event){var n=h,r={};e instanceof ErrorEvent&&(n=p);for(var i=0,o=n;i<o.length;i++){var s=o[i];e[s]!==window&&(r[s]=e[s])}e=r}return t+":"+this.toJSON(e)},e.prototype.toJSON=function(e){var t;try{t=JSON.stringify(e,this.createJsonStringifyReplacer())}catch(n){t='{ "KatalLogger": "Failed to serialize!", "data": "'+e+'", "error": "'+n+'" }'}return t},e.prototype.debug=function(e,t,n){var r=this;return this.extractArgs(s.DEBUG,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.info=function(e,t,n){var r=this;return this.extractArgs(s.INFO,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.warn=function(e,t,n){var r=this;return this.extractArgs(s.WARN,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.error=function(e,t,n){var r=this;return this.extractArgs(s.ERROR,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.fatal=function(e,t,n){var r=this;return this.extractArgs(s.FATAL,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.extractArgs=function(e,t,n,i){var o=g(n)?{errorMessage:n.message,errorName:n.name,errorStackTrace:""}:void 0,s={level:e,message:t,error:o,context:r(r(r({},this.context),o?i:n),{logTime:Date.now()})};return s.error?this.getStackTraceFromError(n).then((function(e){return s.error.errorStackTrace=e,s})):a.default.resolve(s)},e.prototype.getStackTraceFromError=function(e){return this.decodeStackTrace?a.default.resolve(u.default.fromError(e).then((function(e){return e.map((function(e){return e.toString()})).join("\n")})).catch((function(t){return String(e.stack)+"\n\nFailed to decode stacktrace:\n"+String(t)}))):a.default.resolve(String(e.stack))},e.prototype.sendRequest=function(e){this.queueLogLine(e),this.logToConsole&&this.sendLogToConsole(e)},e.prototype.sendLogToConsole=function(e){var t=e.level;d.includes(e.level)&&e.level!==s.FATAL||(t=s.ERROR),console[t](e)},e.prototype.queueLogLine=function(e){if(this.payloadIsValid(e)){var t=this.getPayloadSize(e);this.currentLogBatchSize+t>this.maxLogBatchSize&&this.sendLogsToBackend(),this.appendToQueue(e),this.currentLogBatchSize+=t,this.unloaded||this.logLineQueue.length>=this.maxLogsPerBatch?this.sendLogsToBackend():this.queueTimerId||(this.queueTimerId=window.setTimeout(this.sendLogsToBackend,this.batchTimeoutDuration))}},e.prototype.appendToQueue=function(e){this.logLineQueue.push(e)},e.prototype.doCallBeacon=function(){return(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)&&!(Object.keys(this.headers).length||this.useXMLHttpRequest)},e.prototype.sendLogToBackend=function(e){if(this.url)if(this.doCallBeacon())navigator.sendBeacon(this.url,e);else{var t=new XMLHttpRequest;t.open("POST",this.url,!0),this.xhrWithCredentials&&(t.withCredentials=this.xhrWithCredentials),Object.entries(this.headers).forEach((function(e){var n=e[0],r=e[1];t.setRequestHeader(n,r)})),t.send(e)}},e.prototype.payloadIsValid=function(e){if(d.indexOf(e.level)>=this.logThresholdIndex&&this.getPayloadSize(e)<=this.maxLogLineSize)return!0;return!1},e.prototype.getPayloadSize=function(e){return this.toJSON(e).length},e}();function g(e){return(null==e?void 0:e.name)&&e.message&&(e.stack||!!e.constructor)}t.default=v},5252:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMetricsPublisher=void 0;var r=n(5393);t.createMetricsPublisher=function(e){return r.MetricsPublisherSingleton.getInstance().newChildActionPublisherForMethod(e)}},5393:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsPublisherSingleton=void 0;var a=o(n(6339)),u=s(n(9532)),c=function(){function e(){}return e.getInstance=function(){if(!e.instance){var t=function(e){console.error(e)},n=this.getMetricsDriver(t),r=this.getMetricsContext();e.instance=new a.Publisher(n,t,r)}return e.instance},e.getMetricsContext=function(){var e=/([^?]+)/.exec(window.location.href),t=new a.Metric.String("url",e?e[1]:window.location.href);return t.truncate=!0,(new a.Context.Builder).withSite("KatalLoggerInternalMetrics").withServiceName("KatalLogger").addRelatedMetrics(t).build()},e.getMetricsDriver=function(e){return(new u.default.Builder).withDomainRealm("prod","USAmazon").withErrorHandler(e).build()},e}();t.MetricsPublisherSingleton=c},3010:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.KatalMetricsDriverSushi=void 0;var i=r(n(2475)),o=r(n(9511)),s=r(n(8452)),a=r(n(3072)),u=r(n(7383)),c=r(n(4579)),l=r(n(3693)),d=r(n(652)),f=r(n(858)),h=r(n(6700));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.default)(e);if(t){var i=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var _={test:"com.amazon.eel.katal.metrics.core.nexus.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus"},m=function(){function e(){(0,u.default)(this,e),(0,l.default)(this,"context",{})}return(0,c.default)(e,[{key:"withSushiClient",value:function(e){return console.log("withSushi client..."),this.context.sushiClient=e,this}},{key:"withDomainRealm",value:function(e,t){return this.context.domain=e,this.context.realm=t,this}},{key:"withCustomProducer",value:function(e){return this.context.sushiProducer=e,this}},{key:"withCustomSourceGroup",value:function(e){return this.context.sourceGroupId=e,this}},{key:"withErrorHandler",value:function(e){return this.context.errorHandler=e,this}},{key:"withSushiClientOptions",value:function(e){return this.context.sushiClientOptions=e,this}},{key:"withSushiClientTransportOverride",value:function(e){return this.context.sushiClientTransportOverride=e,this}},{key:"build",value:function(){return new y(this.context)}}]),e}(),y=function(e){(0,o.default)(n,e);var t=g(n);function n(e){var r;(0,u.default)(this,n),r=t.call(this),(0,l.default)((0,i.default)(r),"sushi",void 0),(0,l.default)((0,i.default)(r),"producerId",void 0),(0,l.default)((0,i.default)(r),"sourceGroupId",void 0),(0,l.default)((0,i.default)(r),"errorHandler",void 0),(0,l.default)((0,i.default)(r),"combinedErrorHandler",(function(e){if(r.errorHandler)try{return void r.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t)}r.defaultErrorHandler(e)}));var o=e.domain,s=e.realm,a=e.errorHandler,c=e.sushiClient,d=e.sushiProducer,f=void 0===d?"katal":d,h=e.sushiClientOptions,p=e.sushiClientTransportOverride,v=e.sourceGroupId||_[o]||_.test;return r.sushi=c||r.buildSushiClient(o,s,v,h,p),r.errorHandler=a,r.producerId=f,r.sourceGroupId=v,r}return(0,c.default)(n,[{key:"beforeUnload",value:function(e){this.sushi.onSushiUnload(e)}},{key:"defaultErrorHandler",value:function(e){console.error("Error publishing metrics:"),console.error(e)}},{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"buildSushiClient",value:function(e,t,r,i,o){if(!e||!t)throw new Error("KatalMetricsDriverSushi requires a domain and realm to build a sushi client.");return new h.default(n.getRealmName(t),r,this.combinedErrorHandler,i,o)}},{key:"publish",value:function(e,t,n){var r=this,i=arguments.length<3?arguments[1]:arguments[2];this.withErrorHandling((function(){if(f.default.List!==e.type){var t=r.mapObjectTypeToNexusSchema(e.type),n=v(v({},i.context),{},{metricKey:e.name,value:e.value});e.isMonitor&&(n.isMonitor=!0),n.cloudWatchDimensions&&delete n.cloudWatchDimensions,r.sushi.reset(),r.sushi.event(n,r.producerId,t,{ssd:1})}else e.metricList.forEach((function(e){r.publish(e,i)}))}))}},{key:"mapObjectTypeToNexusSchema",value:function(e){switch(e){case f.default.String:return"katal.client.metrics.String.2";case f.default.Counter:return"katal.client.metrics.Counter.3";case f.default.Timer:return"katal.client.metrics.Timer.2";default:throw new Error("Unknown type ".concat(e," when publishing metric object."))}}}],[{key:"getRealmName",value:function(e){switch(e){case"NAAmazon":case"USAmazon":return h.default.REGIONS.NA;case"EUAmazon":return h.default.REGIONS.EU;case"FEAmazon":case"JPAmazon":return h.default.REGIONS.FE;case"CNAmazon":return h.default.REGIONS.CN;default:return e}}}]),n}(d.default);t.KatalMetricsDriverSushi=y,(0,l.default)(y,"Builder",m)},9532:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(1236);var r=n(3010).KatalMetricsDriverSushi;t.default=r},3382:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=r(n(3693)),a=r(n(595)),u=r(n(9253)),c=r(n(3222)),l=n(7211),d=n(5361);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=["site","serviceName","methodName"],v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.context=h({},t)}return(0,o.default)(e,[{key:"merge",value:function(t){if(!t)return this;if(t instanceof e.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");var n=t instanceof e?t.context:t;return new e(h(h(h({},this.context),n),{},{relatedMetrics:(0,l.mergeLists)(this.context.relatedMetrics,n.relatedMetrics),relatedMetricsSingleAction:(0,l.mergeLists)(this.context.relatedMetricsSingleAction,n.relatedMetricsSingleAction),cloudWatchDimensions:(0,l.mergeLists)(this.context.cloudWatchDimensions,n.cloudWatchDimensions)}))}},{key:"withoutRelatedMetricsSingleAction",value:function(){return new e(h(h({},this.context),{},{relatedMetricsSingleAction:void 0}))}},{key:"driverContext",value:function(){var t=h({},this.context);return delete t.relatedMetrics,delete t.relatedMetricsSingleAction,delete t.requestId,this.context.requestId&&(t.actionId=(0,d.embedRequestId)(t.actionId,this.context.requestId)),new e(t)}},{key:"getFields",value:function(){return h({},this.context)}},{key:"validationError",value:function(){var e=this;return(0,c.default)(p,(function(t){if(null==e.context[t])return new Error("Field ".concat(t," is required, but it is ").concat(e.context[t]))}))||(0,c.default)(Object.keys(this.context),(function(t){return e.validateField(t)}))}},{key:"validateField",value:function(e){var t=this.context[e],n="field ".concat(e);switch(e){case"site":case"serviceName":if(t.indexOf("/")>-1)return new Error("Expected ".concat(n," to contain only valid characters, but it was ").concat(t,".  It cannot contain a slash."));case"methodName":case"actionId":return(0,a.default)(t,n);case"cloudWatchDimensions":return(0,u.default)(t||[])}}}]),e}();t.default=v,(0,s.default)(v,"Builder",function(){function e(){(0,i.default)(this,e),(0,s.default)(this,"context",{})}return(0,o.default)(e,[{key:"withSite",value:function(e){return this.context.site=e,this}},{key:"withServiceName",value:function(e){return this.context.serviceName=e,this}},{key:"withMethodName",value:function(e){return this.context.methodName=e,this}},{key:"withActionId",value:function(e){return this.context.actionId=e,this}},{key:"withRequestId",value:function(e){return this.context.requestId=e,this}},{key:"withCloudWatchDimensions",value:function(e){return this.context.cloudWatchDimensions=e,this}},{key:"withRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=t,this}},{key:"addRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=(0,l.mergeLists)(this.context.relatedMetrics,t),this}},{key:"withRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=t,this}},{key:"addRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=(0,l.mergeLists)(this.context.relatedMetricsSingleAction,t),this}},{key:"build",value:function(){return new v(this.context)}}]),e}())},8461:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=r(n(3693)),a=r(n(2550)),u=r(n(3382)),c=n(1871),l=n(7211),d=n(6532),f=n(5361),h=function(e){console.error("Error publishing metrics:"),console.error(e)},p=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new u.default;if((0,i.default)(this,e),(0,s.default)(this,"combinedErrorHandler",(function(e){try{n.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t),h(e)}})),o instanceof u.default.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");this.driver=t,this.errorHandler=r,this.context=o instanceof u.default?o:new u.default(o)}return(0,o.default)(e,[{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"getAdditionalRelatedMetrics",value:function(e){var t=e instanceof u.default?e.context:e,n=this.getBaseRelatedMetrics();return(0,l.mergeLists)(n,t.relatedMetrics)}},{key:"getBaseRelatedMetrics",value:function(){return(0,l.mergeLists)(this.context.context.relatedMetrics,this.context.context.relatedMetricsSingleAction)}},{key:"publish",value:function(e){var t=this;this.withErrorHandling((function(){if(!e)throw new Error("Cannot publish undefined/null metric object");if(c.Object.Types.List===e.type)e.metricList.forEach((function(e){t.publish(e)}));else{var n=t.context.driverContext(),r=n.validationError();if(r)throw r;var i=e.validationError();if(i)throw i;(0,d.dispatchMetricEvent)(e,n),t.driver.publish(e,n)}}))}},{key:"newChildPublisher",value:function(t){return new e(this.driver,this.errorHandler,this.context.merge(t))}},{key:"newChildActionPublisher",value:function(t){var n=this._generateActionid(t),r=this.context.withoutRelatedMetricsSingleAction().merge({actionId:n}).merge(t),i=new e(this.driver,this.errorHandler,r),o=!t||t instanceof u.default.Builder?this.getBaseRelatedMetrics():this.getAdditionalRelatedMetrics(t);return o&&o.forEach((function(e){i.publish(e)})),i}},{key:"newChildActionPublisherChained",value:function(e){var t=this._generateActionid(e),n=(0,f.embedRequestId)(t,this.context.context.requestId),r=[new c.String("parentActionId",n)],i=new u.default({actionId:t,relatedMetricsSingleAction:r}).merge(e);return this.newChildActionPublisher(i)}},{key:"newChildActionPublisherChainedForMethod",value:function(e,t){return this.newChildActionPublisherChained(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForMethod",value:function(e,t){return this.newChildActionPublisher(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForInitialization",value:function(e){return this.newChildActionPublisherForMethod("Initialization",e)}},{key:"publishString",value:function(e,t){this.publish(new c.String(e,t))}},{key:"publishStringTruncate",value:function(e,t){var n=new c.String(e,t);n.truncate=!0,this.publish(n)}},{key:"publishCounter",value:function(e,t){this.publish(new c.Counter(e,t))}},{key:"publishTimer",value:function(e,t){this.publish(new c.Timer(e,t))}},{key:"publishCounterMonitor",value:function(e,t){this.publish(new c.Counter(e,t).withMonitor())}},{key:"publishTimerMonitor",value:function(e,t){this.publish(new c.Timer(e,t).withMonitor())}},{key:"_generateActionid",value:function(e){if(e){var t=function(e){return e.context?e.context:e}(e);if(t.actionId)return t.actionId}return(0,a.default)()}}]),e}();t.default=p},870:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR_HANDLER=void 0;t.DEFAULT_ERROR_HANDLER=function(e){throw e}},652:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"publish",value:function(e,t){throw new Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead")}}]),e}();t.default=s},3222:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=void 0;return e.some((function(e){return null!=(n=t(e))})),n}},3242:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Object.values?Object.values:function(e){return Object.keys(e).map((function(t){return e[t]}))};t.default=n},149:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("number"!=typeof e)return new Error("Expected ".concat(t," to have type 'number', but it was type '").concat((0,i.default)(e),"'"));if(e<0)return new Error("Expected ".concat(t," to be positive, but it was ").concat(e));if(!o(e))return new Error("Expected ".concat(t," to be an integer, but it was ").concat(e))};var i=r(n(3738)),o=function(e){return isFinite(e)&&Math.floor(e)===e}},595:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"!=typeof e)return new Error("Expected ".concat(t," to be a string, but it was a ").concat((0,i.default)(e)));if(e.length>s)return new Error("Expected ".concat(t," to be less than ").concat(s," characters, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected ".concat(t," to be non-blank"));if(!o.test(e))return new Error("Expected ".concat(t," to contain only valid characters, but it was ").concat(e,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};var i=r(n(3738)),o=/^[A-Za-z0-9.:@_/-]+$/,s=127},5361:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embedRequestId=function(e,t){if(t)return[t,e].join("::");return e}},7211:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLists=function(e,t){return e||t?[].concat((0,i.default)(e||[]),(0,i.default)(t||[])):void 0};var i=r(n(1132))},6532:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchMetricEvent=function(e,t){if("undefined"==typeof window)return;(function(e,t){if("function"!=typeof CustomEvent)return;var n=new CustomEvent("katal.metrics.publish",{detail:{metric:e,context:t.getFields()}});window.dispatchEvent(n)})(e,t),function(e,t){var n=window.__KATAL_METRICS_EXTENSION__;n&&n.publish(e,t.getFields())}(e,t)}},9253:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e,(function(e){return function(e,t){if(e.length>a)return new Error("Expected Dimension name for value ".concat(t," to be ").concat(a," characters or less, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected Dimension name for value ".concat(t," to be non-blank"));if(!o.test(e))return new Error("Expected Dimension name for value ".concat(t," to contain only ASCII characters, but it was ").concat(e));if(!s.test(e))return new Error("Expected Dimension name for value ".concat(t," to contain at least one non whitespace character, but it was ").concat(e));if(e.startsWith(":"))return new Error("Expected Dimension name for value ".concat(t,' to not start with a colon (":"), but it was ').concat(e));if(t.length>u)return new Error("Expected Dimension value for name ".concat(e," to be ").concat(u," characters or less, but it was ").concat(t.length," characters"));if(t.length<1)return new Error("Expected Dimension value for name ".concat(e," to be non-blank"));if(!o.test(t))return new Error("Expected Dimension value for name ".concat(e," to contain only ASCII characters, but it was ").concat(t));if(!s.test(t))return new Error("Expected Dimension value for name ".concat(e," to contain at least one non whitespace character, but it was ").concat(t,"}"))}(e.name,e.value)}))};var i=r(n(3222)),o=/^[\x20-\x7E]+$/,s=/^.*\S+.*$/,a=255,u=1024},6339:(e,t,n)=>{"use strict";var r=n(4994),i=n(3738);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CloudWatchDimensions",{enumerable:!0,get:function(){return l.CloudWatchDimensions}}),Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ErrorHandler",{enumerable:!0,get:function(){return c.ErrorHandler}}),t.Metric=void 0,Object.defineProperty(t,"MetricsDriver",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return s.default}});var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(1871));t.Metric=o;var s=r(n(8461)),a=r(n(3382)),u=r(n(652)),c=n(870),l=n(1044);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}},3620:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=r(n(2395)),a=r(n(9511)),u=r(n(8452)),c=r(n(3072)),l=r(n(3801)),d=r(n(149));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,a.default)(n,e);var t=f(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,i.default)(this,n),(r=t.call(this,e)).value=o,r}return(0,o.default)(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=Math.round(e)}},{key:"type",get:function(){return l.default.Types.Counter}},{key:"add",value:function(e){this.value+=e}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var e=(0,s.default)((0,c.default)(n.prototype),"validationError",this).call(this);return e||(0,d.default)(this.value,"field value in Counter metrics object '".concat(this.name,"'"))}}]),n}(l.default);t.default=h},3681:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=r(n(9511)),a=r(n(8452)),u=r(n(3072)),c=r(n(3693)),l=r(n(1118)),d=r(n(5683));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=f(n);function n(e){return(0,i.default)(this,n),t.call(this,"".concat(n.HTTP_REQUEST_PREFIX,".").concat(e))}return(0,o.default)(n,[{key:"url",get:function(){return this.getNamedMetricValue(n.URL_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.URL_SUFFIX,d.default,e)}},{key:"urlMetric",get:function(){return this.getNamedMetric(n.URL_SUFFIX)}},{key:"statusCode",get:function(){return this.getNamedMetricValue(n.STATUS_CODE_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.STATUS_CODE_SUFFIX,d.default,e)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(n.STATUS_CODE_SUFFIX)}},{key:"statusText",get:function(){return this.getNamedMetricValue(n.STATUS_TEXT_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.STATUS_TEXT_SUFFIX,d.default,e)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(n.STATUS_TEXT_SUFFIX)}}]),n}(l.default);t.default=h,(0,c.default)(h,"HTTP_REQUEST_PREFIX","HTTPRequest"),(0,c.default)(h,"URL_SUFFIX","URL"),(0,c.default)(h,"STATUS_CODE_SUFFIX","StatusCode"),(0,c.default)(h,"STATUS_TEXT_SUFFIX","StatusText")},2910:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(9511)),s=r(n(8452)),a=r(n(3072)),u=r(n(3693));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.default)(e);if(t){var i=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(e){(0,o.default)(n,e);var t=c(n);function n(){return(0,i.default)(this,n),t.call(this,n.INITIALIZE_METRIC_NAME)}return n}(r(n(1118)).default);t.default=l,(0,u.default)(l,"INITIALIZE_METRIC_NAME","Initialization")},6662:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=r(n(9511)),a=r(n(8452)),u=r(n(3072)),c=r(n(6813)),l=r(n(3242));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).namedMetrics={},r}return(0,o.default)(n,[{key:"metricList",get:function(){return(0,l.default)(this.namedMetrics)}},{key:"setNamedMetric",value:function(e,t){var n=t(this.getNameForSubMetric(e));n.canMonitor&&(n.isMonitor=this.isMonitor),this.namedMetrics[e]=n}},{key:"setOrDeleteNamedMetricValue",value:function(e,t,n){null==n?this.deleteNamedMetric(e):this.getOrCreateNamedMetric(e,(function(e){return new t(e,n)})).value=n}},{key:"getOrCreateNamedMetric",value:function(e,t){return this.namedMetrics[e]||this.setNamedMetric(e,t),this.namedMetrics[e]}},{key:"getNamedMetric",value:function(e){return this.namedMetrics[e]}},{key:"deleteNamedMetric",value:function(e){delete this.namedMetrics[e]}},{key:"getNamedMetricValue",value:function(e){var t=this.getNamedMetric(e);if(t)return t.value}},{key:"getNameForSubMetric",value:function(e){return"".concat(this.name,".").concat(e)}}]),n}(c.default);t.default=f},3801:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3738)),o=r(n(7383)),s=r(n(4579)),a=r(n(3693)),u=r(n(595)),c=r(n(858)),l=function(){function e(t){(0,o.default)(this,e),this._name=t,this._isMonitor=!1}return(0,s.default)(e,[{key:"name",get:function(){return this._name}},{key:"metricKey",get:function(){return this._name}},{key:"withMonitor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isMonitor=e,this}},{key:"isMonitor",get:function(){return this._isMonitor},set:function(e){this._isMonitor=!!e}},{key:"canMonitor",get:function(){throw new Error("Subclass of KatalMetricObject must implement canMonitor")}},{key:"type",get:function(){throw new Error("Subclass of KatalMetricObject must implement type getter")}},{key:"validationError",value:function(){return void 0!==this.isMonitor&&"boolean"!=typeof this.isMonitor?new Error("Field isMonitor should be a boolean, but it was a ".concat((0,i.default)(this.isMonitor))):(0,u.default)(this.name,"field name")}}]),e}();t.default=l,(0,a.default)(l,"Types",c.default)},6813:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=r(n(2395)),a=r(n(703)),u=r(n(9511)),c=r(n(8452)),l=r(n(3072)),d=r(n(3801)),f=r(n(3222));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var p=function(e){(0,u.default)(n,e);var t=h(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"metricList",get:function(){throw new Error("Subclass of KatalMetricObjectList must implement metricList getter")}},{key:"isMonitor",get:function(){return(0,s.default)((0,l.default)(n.prototype),"isMonitor",this)},set:function(e){(0,a.default)((0,l.default)(n.prototype),"isMonitor",e,this,!0),this.metricList.forEach((function(t){t.canMonitor&&(t.isMonitor=e)}))}},{key:"canMonitor",get:function(){return!0}},{key:"type",get:function(){return d.default.Types.List}},{key:"validationError",value:function(){return(0,f.default)(this.metricList,(function(e){return e.validationError()}))}}]),n}(d.default);t.default=p},5683:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3738)),o=r(n(7383)),s=r(n(4579)),a=r(n(2475)),u=r(n(2395)),c=r(n(9511)),l=r(n(8452)),d=r(n(3072)),f=r(n(3693)),h=r(n(3801));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var v=function(e){(0,c.default)(n,e);var t=p(n);function n(e,r){var i;return(0,o.default)(this,n),i=t.call(this,e),(0,f.default)((0,a.default)(i),"truncate",!1),i.value=r,i}return(0,s.default)(n,[{key:"value",get:function(){return this._value},set:function(e){"number"!=typeof e&&"boolean"!=typeof e||(e=e.toString()),this._value=e}},{key:"type",get:function(){return h.default.Types.String}},{key:"canMonitor",get:function(){return!1}},{key:"validationError",value:function(){var e=(0,u.default)((0,d.default)(n.prototype),"validationError",this).call(this);if(e)return e;if("string"!=typeof this.value)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be type string, but it was ").concat((0,i.default)(this.value)));if(this.value.length>n.MAX_SIZE){if(!this.truncate)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(n.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."));this.value=this.value.substring(0,n.MAX_SIZE)}}}]),n}(h.default);t.default=v,(0,f.default)(v,"MAX_SIZE",256)},1118:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=r(n(9511)),a=r(n(8452)),u=r(n(3072)),c=r(n(3693)),l=r(n(6662)),d=r(n(8198)),f=r(n(3620));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).setNamedMetric(n.LATENCY_SUFFIX,(function(e){return new d.default(e)})),r.setNamedMetric(n.FAILURE_SUFFIX,(function(e){return new f.default(e,1)})),r}return(0,o.default)(n,[{key:"setFailure",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?1:0;this.failureMetric.value=e}},{key:"setSuccess",value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(e){this.latencyMetric.value=e}},{key:"latencyMetric",get:function(){return this.getNamedMetric(n.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(n.FAILURE_SUFFIX)}}]),n}(l.default);t.default=p,(0,c.default)(p,"LATENCY_SUFFIX","Latency"),(0,c.default)(p,"FAILURE_SUFFIX","Failure")},4177:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=r(n(2395)),a=r(n(9511)),u=r(n(8452)),c=r(n(3072)),l=r(n(3801)),d=r(n(149));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,a.default)(n,e);var t=f(n);function n(e,r){var o;return(0,i.default)(this,n),(o=t.call(this,e)).value=r,o}return(0,o.default)(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=null!=e?Math.round(e):e}},{key:"type",get:function(){return l.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var e=(0,s.default)((0,c.default)(n.prototype),"validationError",this).call(this);return e||(0,d.default)(this.value,"field value in Timer metrics object '".concat(this.name,"'"))}}]),n}(l.default);t.default=h},8198:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7383)),o=r(n(4579)),s=r(n(703)),a=r(n(2395)),u=r(n(9511)),c=r(n(8452)),l=r(n(3072));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var f=function(e){(0,u.default)(n,e);var t=d(n);function n(e,r){var o;return(0,i.default)(this,n),(o=t.call(this,e,void 0)).start(r),o._value=void 0,o}return(0,o.default)(n,[{key:"start",value:function(e){this._startTime=e||this.now()}},{key:"stop",value:function(e){return this._stopTime=e||this.now()}},{key:"isStopped",get:function(){return void 0!==this._stopTime}},{key:"value",get:function(){return void 0===(0,a.default)((0,l.default)(n.prototype),"value",this)&&(this.isStopped||this.stop(),(0,s.default)((0,l.default)(n.prototype),"value",this.stopTime-this.startTime,this,!0)),(0,a.default)((0,l.default)(n.prototype),"value",this)},set:function(e){(0,s.default)((0,l.default)(n.prototype),"value",e,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}},{key:"now",value:function(){return performance.now()}}]),n}(r(n(4177)).default);t.default=f},858:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e){e.String="String",e.Counter="Counter",e.Timer="Timer",e.List="List"}(n||(n={}));var r=n;t.default=r},1871:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Counter",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"HttpRequest",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Initialization",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Object",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"String",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"TimedAttempt",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"TimerStopwatch",{enumerable:!0,get:function(){return u.default}});var i=r(n(3801)),o=r(n(5683)),s=r(n(3620)),a=r(n(4177)),u=r(n(8198)),c=r(n(1118)),l=r(n(2910)),d=r(n(3681))},1044:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6700:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3693)),o=r(n(7383)),s=r(n(4579));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.REGIONS.NA,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;(0,o.default)(this,e);var a=e.createSushiUrl(t,n),u=e.createCsmUserContext(a,i);this.ue_csm=this.setupMockCSMObject(u),this.encapsulatedWindow=this.setupMockWindow(this.ue_csm),this.transportationClientCode(this.ue_csm,window),s&&(this.ue_csm.ue._sBcn={isSupported:!0,send:function(e,t){return s(e,t),!0}}),this.clientCode(this.ue_csm,this.encapsulatedWindow),this.errorHandler=r}return(0,s.default)(e,null,[{key:"createSushiUrl",value:function(t,n){if(!n)throw new Error("Sushi Driver was not provided with a source group.");var r;switch(t){case e.REGIONS.NA:r="unagi-na";break;case e.REGIONS.EU:r="unagi-eu";break;case e.REGIONS.FE:r="unagi-fe";break;case e.REGIONS.CN:r="unagi-cn";break;default:throw new Error("Unrecognized region '".concat(t,"' provided to SushiClient."))}return"https://".concat(r,".amazon.com/1/events/").concat(n)}},{key:"createCsmUserContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({hiPriFlushInterval:1e3,lowPriFlushInterval:1e4,requestId:"1",errorChannel:"jserr",sessionStorageWrapper:void 0,errorHandlerFunction:console.log,sushiUrl:e},t)}},{key:"REGIONS",get:function(){return{NA:"NA",EU:"EU",FE:"FE",CN:"CN"}}}]),(0,s.default)(e,[{key:"event",value:function(e,t,n,r){return arguments.length>4&&void 0!==arguments[4]&&arguments[4]&&console.log("SushiClient wrapper publishing the following:",{data:e,producerId:t,schemaId:n,options:r}),this.ue_csm.ue.event(e,t,n,r)}},{key:"reset",value:function(){this.ue_csm.ue.event.reset()}},{key:"onSushiFlush",value:function(e){this.ue_csm.ue.onSushiFlush(e)}},{key:"onSushiUnload",value:function(e){this.ue_csm.ue.onSushiUnload(e)}},{key:"setupMockCSMObject",value:function(e){var t=this;return{ue_hpsi:e.hiPriFlushInterval,ue_lpsi:e.lowPriFlushInterval,ue:{ssw:e.sessionStorageWrapper,log:function(e,n){t.errorHandler?t.errorHandler(e):console.log("An error has occurred in SushiClient channel "+n,e)},exec:function(e,t){return e},event:function(e,t,n){console.warn("SushiClient CSM stub called in unsupported manner: event()")},attach:function(e,t,n){n=n||window,window.EventTarget&&window.EventTarget.prototype&&window.EventTarget.prototype.addEventListener?window.EventTarget.prototype.addEventListener.call(n,e,t,!!window.ue_clf):n.addEventListener?n.addEventListener(e,t,!!window.ue_clf):n.attachEvent&&n.attachEvent("on"+e,t)}},ueLogError:e.errorHandlerFunction,ue_surl:e.sushiUrl,ue_id:e.requestId,ue_err_chan:e.errorChannel}}},{key:"setupMockWindow",value:function(e){return{ue_csm:e,ueLogError:e.ueLogError,ue:e.ue,setTimeout:function(e,t){return window.setTimeout(e,t)}}}},{key:"clientCode",value:function(e,t){e.ue.exec((function(e,t){function n(){for(var e=0;e<arguments.length;e++){var n=arguments[e];try{if(!n.isSupported)throw dummyException;var r=T.buildPayload(k,b);return n.send(m,r)}catch(h){}}p({m:"All supported clients failed",attribution:"CSMSushiClient_TRANSPORTATION_FAIL",f:"sushi-client.js",logLevel:"ERROR"},t.ue_err_chan||"jserr")}function r(){if(b.length){for(var e=0;e<R.length;e++)R[e]();n(h._sBcn||{},h._ajx||{}),b=[],w={},k={},g=_=S=E=0}}function i(e){try{return JSON.stringify(e)}catch(t){}return null}function o(n,o,s,a){var u,f=!1;return a=a||{},++x==c&&p({m:"Max number of Sushi Logs exceeded",f:"sushi-client.js",logLevel:"ERROR",attribution:"CSMSushiClient_MAX_CALLS"},t.ue_err_chan||"jserr"),(u=!(x>=c))&&((u=n&&-1<n.constructor.toString().indexOf("Object")&&o&&-1<o.constructor.toString().indexOf("String")&&s&&-1<s.constructor.toString().indexOf("String"))||0),u&&(h.count&&h.count("Event:"+s,1),n.producerId=n.producerId||o,n.schemaId=n.schemaId||s,n.timestamp=function(){var e=new Date,t=function(e){return 10>e?"0"+e:e};return Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}(),o=Date.now?Date.now():+new Date,s=Math.random().toString().substring(2,12),n.messageId=e.ue_id+"-"+o+"-"+s,a&&!a.ssd&&(n.sessionId=n.sessionId||e.ue_sid,n.requestId=n.requestId||e.ue_id,n.obfuscatedMarketplaceId=n.obfuscatedMarketplaceId||e.ue_mid),(o=i(n))?(o=o.length,(b.length==l||S+o>d)&&r(),S+=o,n={data:T.compressEvent(n)},b.push(n),(a||{}).n?0===C?r():g||(g=t.setTimeout(r,C)):_||(_=t.setTimeout(r,P)),f=!0):f=!1),!f&&e.ue_int&&console.error("Invalid JS Nexus API call"),f}function s(){if(!M){for(var t=0;t<O.length;t++)O[t]();for(t=0;t<R.length;t++)R[t]();b.length&&(e.ue_sbuimp&&e.ue&&e.ue.ssw&&(t=i({dct:k,evt:b}),e.ue.ssw("eeldata",t),e.ue.ssw("eelsts","unk")),n(h._sBcn||{})),M=!0}}function a(e){O.push(e)}function u(e){R.push(e)}var c=1e3,l=499,d=524288,f=function(){},h=e.ue||{},p=h.log||f,v=e.uex||f;(e.uet||f)("bb","ue_sushi_v1",{wb:1});var g,_,m=e.ue_surl||"https://unagi-na.amazon.com/1/events/com.amazon.csm.nexusclient.gamma",y=["messageId","timestamp"],b=[],w={},k={},S=0,E=0,x=0,O=[],R=[],M=!1,C=void 0===e.ue_hpsi?1e3:e.ue_hpsi,P=void 0===e.ue_lpsi?1e4:e.ue_lpsi,T=function(){function e(e){return w[e]="#"+E++,k[w[e]]=e,w[e]}return{compressEvent:function t(n){if(!(n instanceof Function)){if(n instanceof Array){for(var r=[],i=n.length,o=0;o<i;o++)r[o]=t(n[o]);return r}if(n instanceof Object){for(i in r={},n)n.hasOwnProperty(i)&&(r[w[i]?w[i]:e(i)]=-1===y.indexOf(i)?t(n[i]):n[i]);return r}return"string"==typeof n&&(n.length>("#"+E).length||"#"===n.charAt(0))?w[n]?w[n]:e(n):n}},buildPayload:function(){return i({cs:{dct:k},events:b})}}}();!function(){if(h.event&&h.event.isStub){if(e.ue_sbuimp&&e.ue&&e.ue.ssw){var t=e.ue.ssw("eelsts").val;if(t&&"unk"===t&&(t=e.ue.ssw("eeldata").val)){var n;e:{try{n=JSON.parse(t);break e}catch(w){}n=null}n&&n.evt instanceof Array&&n.dct instanceof Object&&(b=n.evt,k=n.dct,b&&k&&(r(),e.ue.ssw("eeldata","{}"),e.ue.ssw("eelsts","scs")))}}h.event.replay((function(e){e[3]=e[3]||{},e[3].n=1,o.apply(this,e)})),h.onSushiUnload.replay((function(e){a(e[0])})),h.onSushiFlush.replay((function(e){u(e[0])}))}}(),h.attach("beforeunload",s),h.attach("pagehide",s),h._cmps=T,h.event=o,h.event.reset=function(){x=0},h.onSushiUnload=a,h.onSushiFlush=u;try{t.P&&t.P.register&&t.P.register("sushi-client",f)}catch(I){e.ueLogError(I,{logLevel:"WARN"})}v("ld","ue_sushi_v1",{wb:1})}),"Nxs-JS-Client")(e,t)}},{key:"transportationClientCode",value:function(e,t){e.ue.exec((function(e,t){var n=function(){},r={send:function(e,r){if(r&&e){var i;if(t.XDomainRequest)(i=new XDomainRequest).onerror=n,i.ontimeout=n,i.onprogress=n,i.onload=n,i.timeout=0;else if(t.XMLHttpRequest){if(!("withCredentials"in(i=new XMLHttpRequest)))throw""}else i=void 0;if(!i)throw"";i.open("POST",e,!0),i.setRequestHeader&&i.setRequestHeader("Content-type","text/plain"),i.send(r)}},isSupported:!0},i={send:function(t,n){if(t&&n){if(!navigator.sendBeacon(t,n))throw"";e.ue_sbuimp&&e.ue&&e.ue.ssw&&e.ue.ssw("eelsts","scs")}},isSupported:!(!navigator.sendBeacon||t.cordova&&t.cordova.platformId&&"ios"==t.cordova.platformId)};e.ue._ajx=r,e.ue._sBcn=i}),"Transportation-clients")(e,t)}}]),e}();t.default=u},4263:function(e,t,n){var r,i,o;!function(){"use strict";i=[n(343)],void 0===(o="function"==typeof(r=function(e){var t=/(^|@)\S+:\d+/,n=/^\s*at .*(\S+:\d+|\(native\))/m,r=/^(eval@)?(\[native code])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(n)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],""):n;var i=this.extractLocation(r?r[1]:n),o=r&&n||void 0,s=["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0];return new e({functionName:o,fileName:s,lineNumber:i[1],columnNumber:i[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(r)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),i=r&&r[1]?r[1]:void 0,o=this.extractLocation(t.replace(n,""));return new e({functionName:i,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],o=2,s=r.length;o<s;o+=2){var a=n.exec(r[o]);a&&i.push(new e({fileName:a[2],lineNumber:a[1],source:r[o]}))}return i},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],o=0,s=r.length;o<s;o+=2){var a=n.exec(r[o]);a&&i.push(new e({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:r[o]}))}return i},parseOpera11:function(n){return n.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var n,r=t.split("@"),i=this.extractLocation(r.pop()),o=r.shift()||"",s=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;o.match(/\(([^)]*)\)/)&&(n=o.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var a=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:s,args:a,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)}}})?r.apply(t,i):r)||(e.exports=o)}()},5246:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var r=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},i=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function s(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function u(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void l(t.promise,i)}c(t.promise,r)}else(1===e._state?c:l)(t.promise,e._value)}))):e._deferreds.push(t)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(o){l(e,o)}var r,i}function l(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)u(e,e._deferreds[t]);e._deferreds=null}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e((function(e){n||(n=!0,c(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(r){if(n)return;n=!0,l(t,r)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(s);return u(this,new f(e,t,n)),n},a.prototype.finally=r,a.all=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function s(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(t){s(e,t)}),n)}r[e]=o,0==--i&&t(r)}catch(u){n(u)}}for(var a=0;a<r.length;a++)s(a,r[a])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)a.resolve(e[r]).then(t,n)}))},a._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){i(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var p=a},8887:function(e,t,n){var r,i,o;!function(){"use strict";i=[n(343)],r=function(e){return{backtrace:function(t){var n=[],r=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(r=t.maxStackSize);for(var i=arguments.callee;i&&n.length<r&&i.arguments;){for(var o=new Array(i.arguments.length),s=0;s<o.length;++s)o[s]=i.arguments[s];/function(?:\s+([\w$]+))+\s*\(/.test(i.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:o})):n.push(new e({args:o}));try{i=i.caller}catch(a){break}}return n}}},void 0===(o="function"==typeof r?r.apply(t,i):r)||(e.exports=o)}()},343:function(e,t){var n,r,i;!function(){"use strict";r=[],void 0===(i="function"==typeof(n=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}var r=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],o=["fileName","functionName","source"],s=["args"],a=["evalOrigin"],u=r.concat(i,o,s,a);function c(e){if(e)for(var n=0;n<u.length;n++)void 0!==e[u[n]]&&this["set"+t(u[n])](e[u[n]])}c.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof c)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new c(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+n+")":"[eval]:"+t+":"+n:r?r+" ("+e+":"+t+":"+n+")":e+":"+t+":"+n}},c.fromString=function(e){var t=e.indexOf("("),n=e.lastIndexOf(")"),r=e.substring(0,t),i=e.substring(t+1,n).split(","),o=e.substring(n+1);if(0===o.indexOf("@"))var s=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o,""),a=s[1],u=s[2],l=s[3];return new c({functionName:r,args:i||void 0,fileName:a,lineNumber:u||void 0,columnNumber:l||void 0})};for(var l=0;l<r.length;l++)c.prototype["get"+t(r[l])]=n(r[l]),c.prototype["set"+t(r[l])]=function(e){return function(t){this[e]=Boolean(t)}}(r[l]);for(var d=0;d<i.length;d++)c.prototype["get"+t(i[d])]=n(i[d]),c.prototype["set"+t(i[d])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(i[d]);for(var f=0;f<o.length;f++)c.prototype["get"+t(o[f])]=n(o[f]),c.prototype["set"+t(o[f])]=function(e){return function(t){this[e]=String(t)}}(o[f]);return c})?n.apply(t,r):n)||(e.exports=i)}()},671:(e,t,n)=>{var r=n(3835),i=Object.prototype.hasOwnProperty;function o(){this._array=[],this._set=Object.create(null)}o.fromArray=function(e,t){for(var n=new o,r=0,i=e.length;r<i;r++)n.add(e[r],t);return n},o.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},o.prototype.add=function(e,t){var n=r.toSetString(e),o=i.call(this._set,n),s=this._array.length;o&&!t||this._array.push(e),o||(this._set[n]=s)},o.prototype.has=function(e){var t=r.toSetString(e);return i.call(this._set,t)},o.prototype.indexOf=function(e){var t=r.toSetString(e);if(i.call(this._set,t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},o.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},o.prototype.toArray=function(){return this._array.slice()},t.C=o},1860:(e,t,n)=>{var r=n(9900);t.encode=function(e){var t,n="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&i,(i>>>=5)>0&&(t|=32),n+=r.encode(t)}while(i>0);return n},t.decode=function(e,t,n){var i,o,s,a,u=e.length,c=0,l=0;do{if(t>=u)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=r.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(32&o),c+=(o&=31)<<l,l+=5}while(i);n.value=(a=(s=c)>>1,1&~s?a:-a),n.rest=t}},9900:(e,t)=>{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},5035:(e,t)=>{function n(e,r,i,o,s,a){var u=Math.floor((r-e)/2)+e,c=s(i,o[u],!0);return 0===c?u:c>0?r-u>1?n(u,r,i,o,s,a):a==t.LEAST_UPPER_BOUND?r<o.length?r:-1:u:u-e>1?n(e,u,i,o,s,a):a==t.LEAST_UPPER_BOUND?u:e<0?-1:e}t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,r,i,o){if(0===r.length)return-1;var s=n(-1,r.length,e,r,i,o||t.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===i(r[s],r[s-1],!0);)--s;return s}},7238:(e,t,n)=>{var r=n(3835);function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},i.prototype.add=function(e){var t,n,i,o,s,a;t=this._last,n=e,i=t.generatedLine,o=n.generatedLine,s=t.generatedColumn,a=n.generatedColumn,o>i||o==i&&a>=s||r.compareByGeneratedPositionsInflated(t,n)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t.P=i},1737:(e,t)=>{function n(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function r(e,t,i,o){if(i<o){var s=i-1;n(e,(l=i,d=o,Math.round(l+Math.random()*(d-l))),o);for(var a=e[o],u=i;u<o;u++)t(e[u],a)<=0&&n(e,s+=1,u);n(e,s+1,u);var c=s+1;r(e,t,i,c-1),r(e,t,c+1,o)}var l,d}t.g=function(e,t){r(e,t,0,e.length-1)}},1606:(e,t,n)=>{var r=n(3835),i=n(5035),o=n(671).C,s=n(1860),a=n(1737).g;function u(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new d(t):new c(t)}function c(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sources"),s=r.getArg(t,"names",[]),a=r.getArg(t,"sourceRoot",null),u=r.getArg(t,"sourcesContent",null),c=r.getArg(t,"mappings"),l=r.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);i=i.map(String).map(r.normalize).map((function(e){return a&&r.isAbsolute(a)&&r.isAbsolute(e)?r.relative(a,e):e})),this._names=o.fromArray(s.map(String),!0),this._sources=o.fromArray(i,!0),this.sourceRoot=a,this.sourcesContent=u,this._mappings=c,this.file=l}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function d(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new o,this._names=new o;var s={line:-1,column:0};this._sections=i.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=r.getArg(e,"offset"),n=r.getArg(t,"line"),i=r.getArg(t,"column");if(n<s.line||n===s.line&&i<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new u(r.getArg(e,"map"))}}))}u.fromSourceMap=function(e){return c.fromSourceMap(e)},u.prototype._version=3,u.prototype.__generatedMappings=null,Object.defineProperty(u.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),u.prototype.__originalMappings=null,Object.defineProperty(u.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),u.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},u.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},u.GENERATED_ORDER=1,u.ORIGINAL_ORDER=2,u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,u.prototype.eachMapping=function(e,t,n){var i,o=t||null;switch(n||u.GENERATED_ORDER){case u.GENERATED_ORDER:i=this._generatedMappings;break;case u.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=s&&(t=r.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,o)},u.prototype.allGeneratedPositionsFor=function(e){var t=r.getArg(e,"line"),n={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(null!=this.sourceRoot&&(n.source=r.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var o=[],s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===e.column)for(var u=a.originalLine;a&&a.originalLine===u;)o.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var c=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==c;)o.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return o},t.SourceMapConsumer=u,c.prototype=Object.create(u.prototype),c.prototype.consumer=u,c.fromSourceMap=function(e){var t=Object.create(c.prototype),n=t._names=o.fromArray(e._names.toArray(),!0),i=t._sources=o.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),u=t.__generatedMappings=[],d=t.__originalMappings=[],f=0,h=s.length;f<h;f++){var p=s[f],v=new l;v.generatedLine=p.generatedLine,v.generatedColumn=p.generatedColumn,p.source&&(v.source=i.indexOf(p.source),v.originalLine=p.originalLine,v.originalColumn=p.originalColumn,p.name&&(v.name=n.indexOf(p.name)),d.push(v)),u.push(v)}return a(t.__originalMappings,r.compareByOriginalPositions),t},c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){return this._sources.toArray().map((function(e){return null!=this.sourceRoot?r.join(this.sourceRoot,e):e}),this)}}),c.prototype._parseMappings=function(e,t){for(var n,i,o,u,c,d=1,f=0,h=0,p=0,v=0,g=0,_=e.length,m=0,y={},b={},w=[],k=[];m<_;)if(";"===e.charAt(m))d++,m++,f=0;else if(","===e.charAt(m))m++;else{for((n=new l).generatedLine=d,u=m;u<_&&!this._charIsMappingSeparator(e,u);u++);if(o=y[i=e.slice(m,u)])m+=i.length;else{for(o=[];m<u;)s.decode(e,m,b),c=b.value,m=b.rest,o.push(c);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");y[i]=o}n.generatedColumn=f+o[0],f=n.generatedColumn,o.length>1&&(n.source=v+o[1],v+=o[1],n.originalLine=h+o[2],h=n.originalLine,n.originalLine+=1,n.originalColumn=p+o[3],p=n.originalColumn,o.length>4&&(n.name=g+o[4],g+=o[4])),k.push(n),"number"==typeof n.originalLine&&w.push(n)}a(k,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=k,a(w,r.compareByOriginalPositions),this.__originalMappings=w},c.prototype._findMapping=function(e,t,n,r,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return i.search(e,t,o,s)},c.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},c.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(e,"bias",u.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===t.generatedLine){var o=r.getArg(i,"source",null);null!==o&&(o=this._sources.at(o),null!=this.sourceRoot&&(o=r.join(this.sourceRoot,o)));var s=r.getArg(i,"name",null);return null!==s&&(s=this._names.at(s)),{source:o,line:r.getArg(i,"originalLine",null),column:r.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e})))},c.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=r.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var n;if(null!=this.sourceRoot&&(n=r.urlParse(this.sourceRoot))){var i=e.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!n.path||"/"==n.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(e){var t=r.getArg(e,"source");if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var n={source:t=this._sources.indexOf(t),originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(e,"bias",u.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:r.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},d.prototype=Object.create(u.prototype),d.prototype.constructor=u,d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),d.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=i.search(t,this._sections,(function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn})),o=this._sections[n];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},d.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer.sources.indexOf(r.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},d.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var u=o[s],c=i.consumer._sources.at(u.source);null!==i.consumer.sourceRoot&&(c=r.join(i.consumer.sourceRoot,c)),this._sources.add(c),c=this._sources.indexOf(c);var l=i.consumer._names.at(u.name);this._names.add(l),l=this._names.indexOf(l);var d={source:c,generatedLine:u.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(i.generatedOffset.generatedLine===u.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:l};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}a(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),a(this.__originalMappings,r.compareByOriginalPositions)}},1945:(e,t,n)=>{var r=n(1860),i=n(3835),o=n(671).C,s=n(7238).P;function a(e){e||(e={}),this._file=i.getArg(e,"file",null),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._skipValidation=i.getArg(e,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,n=new a({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=i.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)})),e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&n.setSourceContent(t,r)})),n},a.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),n=i.getArg(e,"original",null),r=i.getArg(e,"source",null),o=i.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,o),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:o})},a.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=i.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[i.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var s=this._sourceRoot;null!=s&&(r=i.relative(s,r));var a=new o,u=new o;this._mappings.unsortedForEach((function(t){if(t.source===r&&null!=t.originalLine){var o=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=o.source&&(t.source=o.source,null!=n&&(t.source=i.join(n,t.source)),null!=s&&(t.source=i.relative(s,t.source)),t.originalLine=o.line,t.originalColumn=o.column,null!=o.name&&(t.name=o.name))}var c=t.source;null==c||a.has(c)||a.add(c);var l=t.name;null==l||u.has(l)||u.add(l)}),this),this._sources=a,this._names=u,e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=i.join(n,t)),null!=s&&(t=i.relative(s,t)),this.setSourceContent(t,r))}),this)},a.prototype._validateMapping=function(e,t,n,r){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},a.prototype._serializeMappings=function(){for(var e,t,n,o,s=0,a=1,u=0,c=0,l=0,d=0,f="",h=this._mappings.toArray(),p=0,v=h.length;p<v;p++){if(e="",(t=h[p]).generatedLine!==a)for(s=0;t.generatedLine!==a;)e+=";",a++;else if(p>0){if(!i.compareByGeneratedPositionsInflated(t,h[p-1]))continue;e+=","}e+=r.encode(t.generatedColumn-s),s=t.generatedColumn,null!=t.source&&(o=this._sources.indexOf(t.source),e+=r.encode(o-d),d=o,e+=r.encode(t.originalLine-1-c),c=t.originalLine-1,e+=r.encode(t.originalColumn-u),u=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=r.encode(n-l),l=n)),f+=e}return f},a.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=i.relative(t,e));var n=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null}),this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},t.SourceMapGenerator=a},1171:(e,t,n)=>{var r=n(1945).SourceMapGenerator,i=n(3835),o=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[s]=!0,null!=r&&this.add(r)}a.fromStringWithSourceMap=function(e,t,n){var r=new a,s=e.split(o),u=function(){return s.shift()+(s.shift()||"")},c=1,l=0,d=null;return t.eachMapping((function(e){if(null!==d){if(!(c<e.generatedLine)){var t=(n=s[0]).substr(0,e.generatedColumn-l);return s[0]=n.substr(e.generatedColumn-l),l=e.generatedColumn,f(d,t),void(d=e)}f(d,u()),c++,l=0}for(;c<e.generatedLine;)r.add(u()),c++;if(l<e.generatedColumn){var n=s[0];r.add(n.substr(0,e.generatedColumn)),s[0]=n.substr(e.generatedColumn),l=e.generatedColumn}d=e}),this),s.length>0&&(d&&f(d,u()),r.add(s.join(""))),t.sources.forEach((function(e){var o=t.sourceContentFor(e);null!=o&&(null!=n&&(e=i.join(n,e)),r.setSourceContent(e,o))})),r;function f(e,t){if(null===e||void 0===e.source)r.add(t);else{var o=n?i.join(n,e.source):e.source;r.add(new a(e.originalLine,e.originalColumn,o,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,n=r.length;t<n;t++)e(i.fromSetString(r[t]),this.sourceContents[r[t]])},a.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new r(e),i=!1,o=null,s=null,a=null,u=null;return this.walk((function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(o===r.source&&s===r.line&&a===r.column&&u===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),o=r.source,s=r.line,a=r.column,u=r.name,i=!0):i&&(n.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var c=0,l=e.length;c<l;c++)10===e.charCodeAt(c)?(t.line++,t.column=0,c+1===l?(o=null,i=!1):i&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++})),this.walkSourceContents((function(e,t){n.setSourceContent(e,t)})),{code:t.code,map:n}},t.SourceNode=a},3835:(e,t)=>{t.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,r=/^data:.+\,.+$/;function i(e){var t=e.match(n);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var n=e,r=i(e);if(r){if(!r.path)return e;n=r.path}for(var s,a=t.isAbsolute(n),u=n.split(/\/+/),c=0,l=u.length-1;l>=0;l--)"."===(s=u[l])?u.splice(l,1):".."===s?c++:c>0&&(""===s?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return""===(n=u.join("/"))&&(n=a?"/":"."),r?(r.path=n,o(r)):n}t.urlParse=i,t.urlGenerate=o,t.normalize=s,t.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var n=i(t),a=i(e);if(a&&(e=a.path||"/"),n&&!n.scheme)return a&&(n.scheme=a.scheme),o(n);if(n||t.match(r))return t;if(a&&!a.host&&!a.path)return a.host=t,o(a);var u="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=u,o(a)):u},t.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(n)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var a=!("__proto__"in Object.create(null));function u(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function l(e,t){return e===t?0:e>t?1:-1}t.toSetString=a?u:function(e){return c(e)?"$"+e:e},t.fromSetString=a?u:function(e){return c(e)?e.slice(1):e},t.compareByOriginalPositions=function(e,t,n){var r=e.source-t.source;return 0!==r||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)||n||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=e.generatedLine-t.generatedLine)?r:e.name-t.name},t.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||n||0!==(r=e.source-t.source)||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:e.name-t.name},t.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=l(e.source,t.source))||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:l(e.name,t.name)}},65:(e,t,n)=>{t.SourceMapGenerator=n(1945).SourceMapGenerator,t.SourceMapConsumer=n(1606).SourceMapConsumer,t.SourceNode=n(1171).SourceNode},7885:function(e,t,n){var r,i,o;!function(){"use strict";i=[n(65),n(343)],void 0===(o="function"==typeof(r=function(e,t){function n(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("get",e),r.onerror=n,r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||"file://"===e.substr(0,7)&&r.responseText?t(r.responseText):n(new Error("HTTP status: "+r.status+" retrieving "+e)))},r.send()}))}function r(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function i(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function o(e,t){for(var n=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],r=e.split("\n"),i="",o=Math.min(t,20),s=0;s<o;++s){var a=r[t-s-1],u=a.indexOf("//");if(u>=0&&(a=a.substr(0,u)),a){i=a+i;for(var c=n.length,l=0;l<c;l++){var d=n[l].exec(i);if(d&&d[1])return d[1]}}}}function s(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function a(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function u(e){for(var t,n,r=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm;n=r.exec(e);)t=n[1];if(t)return t;throw new Error("sourceMappingURL not found")}function c(e,n,r){return new Promise((function(i,o){var s=n.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(s.source){var a=n.sourceContentFor(s.source);a&&(r[s.source]=a),i(new t({functionName:s.name||e.functionName,args:e.args,fileName:s.source,lineNumber:s.line,columnNumber:s.column}))}else o(new Error("Could not get original source for given stackframe and source map"))}))}return function l(d){if(!(this instanceof l))return new l(d);d=d||{},this.sourceCache=d.sourceCache||{},this.sourceMapConsumerCache=d.sourceMapConsumerCache||{},this.ajax=d.ajax||n,this._atob=d.atob||r,this._get=function(e){return new Promise(function(t,n){var r="data:"===e.substr(0,5);if(this.sourceCache[e])t(this.sourceCache[e]);else if(d.offline&&!r)n(new Error("Cannot make network requests in offline mode"));else if(r){var i=/^data:application\/json;([\w=:"-]+;)*base64,/,o=e.match(i);if(o){var s=o[0].length,a=e.substr(s),u=this._atob(a);this.sourceCache[e]=u,t(u)}else n(new Error("The encoding of the inline sourcemap is not supported"))}else{var c=this.ajax(e,{method:"get"});this.sourceCache[e]=c,c.then(t,n)}}.bind(this))},this._getSourceMapConsumer=function(t,n){return new Promise(function(r){if(this.sourceMapConsumerCache[t])r(this.sourceMapConsumerCache[t]);else{var o=new Promise(function(r,o){return this._get(t).then((function(t){"string"==typeof t&&(t=i(t.replace(/^\)\]\}'/,""))),void 0===t.sourceRoot&&(t.sourceRoot=n),r(new e.SourceMapConsumer(t))})).catch(o)}.bind(this));this.sourceMapConsumerCache[t]=o,r(o)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(t,n){this.getMappedLocation(e).then(function(e){function n(){t(e)}this.findFunctionName(e).then(t,n).catch(n)}.bind(this),n)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(n,r){a(e),this._get(e.fileName).then((function(r){var i=e.lineNumber,s=e.columnNumber,a=o(r,i,s);n(a?new t({functionName:a,args:e.args,fileName:e.fileName,lineNumber:i,columnNumber:s}):e)}),r).catch(r)}.bind(this))},this.getMappedLocation=function(e){return new Promise(function(t,n){s(),a(e);var r=this.sourceCache,i=e.fileName;this._get(i).then(function(n){var o=u(n),s="data:"===o.substr(0,5),a=i.substring(0,i.lastIndexOf("/")+1);return"/"===o[0]||s||/^https?:\/\/|^\/\//i.test(o)||(o=a+o),this._getSourceMapConsumer(o,a).then((function(n){return c(e,n,r).then(t).catch((function(){t(e)}))}))}.bind(this),n).catch(n)}.bind(this))}}})?r.apply(t,i):r)||(e.exports=o)}()},8139:function(e,t,n){var r,i,o;!function(){"use strict";i=[n(4263),n(8887),n(7885)],r=function(e,t,n){var r={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},i=function(){try{throw new Error}catch(e){return e}};function o(e,t){var n={};return[e,t].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n})),n}function s(e){return e.stack||e["opera#sourceloc"]}function a(e,t){return"function"==typeof t?e.filter(t):e}return{get:function(e){var t=i();return s(t)?this.fromError(t,e):this.generateArtificially(e)},getSync:function(n){n=o(r,n);var u=i();return a(s(u)?e.parse(u):t.backtrace(n),n.filter)},fromError:function(t,i){i=o(r,i);var s=new n(i);return new Promise(function(n){var r=a(e.parse(t),i.filter);n(Promise.all(r.map((function(e){return new Promise((function(t){function n(){t(e)}s.pinpoint(e).then(t,n).catch(n)}))}))))}.bind(this))},generateArtificially:function(e){e=o(r,e);var n=t.backtrace(e);return"function"==typeof e.filter&&(n=n.filter(e.filter)),Promise.resolve(n)},instrument:function(e,t,n,r){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(t,n).catch(n),e.apply(r||this,arguments)}catch(i){throw s(i)&&this.fromError(i).then(t,n).catch(n),i}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,t,n,r){return new Promise((function(i,o){var s=new XMLHttpRequest;if(s.onerror=o,s.onreadystatechange=function(){4===s.readyState&&(s.status>=200&&s.status<400?i(s.responseText):o(new Error("POST to "+t+" failed with status: "+s.status)))},s.open("post",t),s.setRequestHeader("Content-Type","application/json"),r&&"object"==typeof r.headers){var a=r.headers;for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.setRequestHeader(u,a[u])}var c={stack:e};null!=n&&(c.message=n),s.send(JSON.stringify(c))}))}}},void 0===(o="function"==typeof r?r.apply(t,i):r)||(e.exports=o)}()},471:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},5814:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)3&t||(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},2550:(e,t,n)=>{var r=n(5814),i=n(471);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},1236:()=>{},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5901:(e,t,n)=>{var r=n(79);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},2475:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},4579:(e,t,n)=>{var r=n(7736);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},2395:(e,t,n)=>{var r=n(9552);function i(){return e.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports,i.apply(null,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3072:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9511:(e,t,n)=>{var r=n(5636);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},9291:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},1869:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8452:(e,t,n)=>{var r=n(3738).default,i=n(2475);e.exports=function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},703:(e,t,n)=>{var r=n(9552),i=n(3693);function o(e,t,n,s){return o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var s,a=r(e,t);if(a){if((s=Object.getOwnPropertyDescriptor(a,t)).set)return s.set.call(o,n),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(o,t)){if(!s.writable)return!1;s.value=n,Object.defineProperty(o,t,s)}else i(o,t,n);return!0},o(e,t,n,s)}e.exports=function(e,t,n,r,i){if(!o(e,t,n,r||e)&&i)throw new TypeError("failed to set property");return n},e.exports.__esModule=!0,e.exports.default=e.exports},5636:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9552:(e,t,n)=>{var r=n(3072);e.exports=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1132:(e,t,n)=>{var r=n(5901),i=n(9291),o=n(7122),s=n(1869);e.exports=function(e){return r(e)||i(e)||o(e)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7736:(e,t,n)=>{var r=n(3738).default,i=n(9045);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7122:(e,t,n)=>{var r=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){t=function(){return r};var n,r={},i=Object.prototype,o=i.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(n){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new I(r||[]);return s(o,"_invoke",{value:M(e,n,a)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var p="suspendedStart",v="suspendedYield",g="executing",_="completed",m={};function y(){}function b(){}function w(){}var k={};d(k,u,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(F([])));E&&E!==i&&o.call(E,u)&&(k=E);var x=w.prototype=y.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function R(t,n){function r(i,s,a,u){var c=h(t[i],t,s);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==e(d)&&o.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):n.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,u)}))}u(c.arg)}var i;s(this,"_invoke",{value:function(e,t){function o(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(o,o):o()}})}function M(e,t,r){var i=p;return function(o,s){if(i===g)throw Error("Generator is already running");if(i===_){if("throw"===o)throw s;return{value:n,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var u=C(a,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var c=h(e,t,r);if("normal"===c.type){if(i=r.done?_:v,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=_,r.method="throw",r.arg=c.arg)}}}function C(e,t){var r=t.method,i=e.iterator[r];if(i===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,C(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=h(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,m;var s=o.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function F(t){if(t||""===t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function e(){for(;++i<t.length;)if(o.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return s.next=s}}throw new TypeError(e(t)+" is not iterable")}return b.prototype=w,s(x,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},r.awrap=function(e){return{__await:e}},O(R.prototype),d(R.prototype,c,(function(){return this})),r.AsyncIterator=R,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var s=new R(f(e,t,n,i),o);return r.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},O(x),d(x,l,"Generator"),d(x,u,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=F,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:F(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}},r}function r(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,u,"next",e)}function u(e){r(s,i,o,a,u,"throw",e)}a(void 0)}))}}var o=n(3207),s=n.n(o),a={url:"https://mttev78qfk.execute-api.us-east-1.amazonaws.com/prod/v1/log",logThreshold:o.Level.INFO,maxLogLineSize:1e4,logToConsole:!1};function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}new(s())(a).addErrorListener();var b={DEBUG:!1,LIB_VERSION:"1.155.0"},w=Array.isArray,k=Object.prototype,S=k.hasOwnProperty,E=k.toString,x=w||function(e){return"[object Array]"===E.call(e)},O=function(e){return"function"==typeof e},R=function(e){return e===Object(e)&&!x(e)},M=function(e){if(R(e)){for(var t in e)if(S.call(e,t))return!1;return!0}return!1},C=function(e){return void 0===e},P=function(e){return"[object String]"==E.call(e)},T=function(e){return P(e)&&0===e.trim().length},I=function(e){return null===e},F=function(e){return C(e)||I(e)},A=function(e){return"[object Number]"==E.call(e)},L=function(e){return"[object Boolean]"===E.call(e)},N="undefined"!=typeof window?window:void 0,j="undefined"!=typeof globalThis?globalThis:N,D=Array.prototype,$=D.forEach,B=D.indexOf,q=null==j?void 0:j.navigator,U=null==j?void 0:j.document,H=null==j?void 0:j.location,G=null==j?void 0:j.fetch,z=null!=j&&j.XMLHttpRequest&&"withCredentials"in new j.XMLHttpRequest?j.XMLHttpRequest:void 0,W=null==j?void 0:j.AbortController,V=null==q?void 0:q.userAgent,X=null!=N?N:{},J="[PostHog.js]",K={_log:function(e){if(N&&(b.DEBUG||X.POSTHOG_DEBUG)&&!C(N.console)&&N.console){for(var t=("__rrweb_original__"in N.console[e]?N.console[e].__rrweb_original__:N.console[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.apply(void 0,[J].concat(r))}},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];K._log.apply(K,["log"].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];K._log.apply(K,["warn"].concat(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];K._log.apply(K,["error"].concat(t))},critical:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,[J].concat(n))},uninitializedWarning:function(e){K.error("You must initialize PostHog before calling ".concat(e))}},Q={},Y=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Z(e,t,n){if(x(e))if($&&e.forEach===$)e.forEach(t,n);else if("length"in e&&e.length===+e.length)for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===Q)return}function ee(e,t,n){if(!F(e)){if(x(e))return Z(e,t,n);if(function(e){return e instanceof FormData}(e)){var r,i=y(e.entries());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t.call(n,o[1],o[0])===Q)return}}catch(e){i.e(e)}finally{i.f()}}else for(var s in e)if(S.call(e,s)&&t.call(n,e[s],s)===Q)return}}var te=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z(n,(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e};function ne(e,t){return-1!==e.indexOf(t)}function re(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var ie=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},oe=function(e){try{return e()}catch(e){return}},se=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(e){K.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),K.critical(e)}}},ae=function(e){var t={};return ee(e,(function(e,n){P(e)&&e.length>0&&(t[n]=e)})),t},ue=function(e){return e.replace(/^\$/,"")};var ce,le=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,n,r,i,o){if(t)if(t.addEventListener&&!i)t.addEventListener(n,r,!!o);else{var s="on"+n,a=t[s];t[s]=function(t,n,r){return function(i){if(i=i||e(null==N?void 0:N.event)){var o,s=!0;O(r)&&(o=r(i));var a=n.call(t,i);return!1!==o&&!1!==a||(s=!1),s}}}(t,r,a)}else K.error("No valid element provided to register_event")}}();function de(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}!function(e){e.GZipJS="gzip-js",e.Base64="base64"}(ce||(ce={}));var fe="$people_distinct_id",he="__alias",pe="__timers",ve="$autocapture_disabled_server_side",ge="$heatmaps_enabled_server_side",_e="$exception_capture_enabled_server_side",me="$exception_capture_endpoint",ye="$web_vitals_enabled_server_side",be="$session_recording_enabled_server_side",we="$console_log_recording_enabled_server_side",ke="$session_recording_network_payload_capture",Se="$session_recording_canvas_recording",Ee="$replay_sample_rate",xe="$replay_minimum_duration",Oe="$sesid",Re="$session_is_sampled",Me="$enabled_feature_flags",Ce="$early_access_features",Pe="$stored_person_properties",Te="$stored_group_properties",Ie="$surveys",Fe="$surveys_activated",Ae="$flag_call_reported",Le="$user_state",Ne="$client_session_props",je="$capture_rate_limit",De="$initial_campaign_params",$e="$initial_referrer_info",Be="$initial_person_info",qe="$epp",Ue="__POSTHOG_TOOLBAR__",He=[fe,he,"__cmpns",pe,be,ge,Oe,Me,Le,Ce,Te,Pe,Ie,Ae,Ne,je,De,$e,qe],Ge="$active_feature_flags",ze="$override_feature_flags",We="$feature_flag_payloads",Ve=function(e){var t,n={},r=y(re(e||{}));try{for(r.s();!(t=r.n()).done;){var i=v(t.value,2),o=i[0],s=i[1];s&&(n[o]=s)}}catch(e){r.e(e)}finally{r.f()}return n},Xe=function(){function e(t){d(this,e),this.instance=t,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return h(e,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(Me),t=this.instance.get_property(ze);if(!t)return e||{};for(var n=te({},e),r=Object.keys(t),i=0;i<r.length;i++)n[r[i]]=t[r[i]];return this._override_warning||(K.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this._override_warning=!0),n}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(We)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout((function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())}),5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var t=this.instance.config.token,n=this.instance.get_property(Pe),r=this.instance.get_property(Te),i={token:t,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:r,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:i,compression:this.instance.config.disable_compression?void 0:ce.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(t){var n;e.setReloadingPaused(!1);var r=!0;200===t.statusCode&&(e.$anon_distinct_id=void 0,r=!1),e.receivedFeatureFlags(null!==(n=t.json)&&void 0!==n?n:{},r),e._startReloadTimer()}})}}},{key:"getFeatureFlag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var n,r=this.getFlagVariants()[e],i="".concat(r),o=this.instance.get_property(Ae)||{};return!t.send_event&&"send_event"in t||e in o&&o[e].includes(i)||(x(o[e])?o[e].push(i):o[e]=[i],null===(n=this.instance.persistence)||void 0===n||n.register(p({},Ae,o)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:r})),r}K.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);K.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((function(t){return t!==e}))}},{key:"receivedFeatureFlags",value:function(e,t){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads();!function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.featureFlags,s=e.featureFlagPayloads;if(o)if(x(o)){var a,u={};if(o)for(var l=0;l<o.length;l++)u[o[l]]=!0;t&&t.register((p(a={},Ge,o),p(a,Me,u),a))}else{var d=o,f=s;e.errorsWhileComputingFlags&&(d=c(c({},r),d),f=c(c({},i),f)),t&&t.register((p(n={},Ge,Object.keys(Ve(d))),p(n,Me,d||{}),p(n,We,f||{}),n))}}(e,this.instance.persistence,n,r),this._fireFeatureFlagsCallbacks(t)}}},{key:"override",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return K.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=t,!1===e)this.instance.persistence.unregister(ze);else if(x(e)){for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;this.instance.persistence.register(p({},ze,n))}else this.instance.persistence.register(p({},ze,e))}},{key:"onFeatureFlags",value:function(e){var t=this;if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var n=this._prepareFeatureFlagsForCallbacks(),r=n.flags,i=n.flagVariants;e(r,i)}return function(){return t.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){var n,r,i=p({},"$feature_enrollment/".concat(e),t);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:t,$set:i}),this.setPersonPropertiesForFlags(i,!1);var o=c(c({},this.getFlagVariants()),{},p({},e,t));null===(n=this.instance.persistence)||void 0===n||n.register((p(r={},Ge,Object.keys(Ve(o))),p(r,Me,o),r)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.instance.get_property(Ce);if(r&&!n)return e(r);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:function(n){var r;if(n.json){var i=n.json.earlyAccessFeatures;return null===(r=t.instance.persistence)||void 0===r||r.register(p({},Ce,i)),e(i)}}})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((function(e){return t[e]})),flagVariants:Object.keys(t).filter((function(e){return t[e]})).reduce((function(e,n){return e[n]=t[n],e}),{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(e){var t=this._prepareFeatureFlagsForCallbacks(),n=t.flags,r=t.flagVariants;this.featureFlagEventHandlers.forEach((function(t){return t(n,r,{errorsLoading:e})}))}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(Pe)||{};this.instance.register(p({},Pe,c(c({},n),e))),t&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(Pe)}},{key:"setGroupPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(Te)||{};0!==Object.keys(n).length&&Object.keys(n).forEach((function(t){n[t]=c(c({},n[t]),e[t]),delete e[t]})),this.instance.register(p({},Te,c(c({},n),e))),t&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var t=this.instance.get_property(Te)||{};this.instance.register(p({},Te,c(c({},t),{},p({},e,{}))))}else this.instance.unregister(Te)}}]),e}();Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return A(e)&&isFinite(e)&&Math.floor(e)===e});var Je="0123456789abcdef",Ke=function(){function e(t){if(d(this,e),this.bytes=t,16!==t.length)throw new TypeError("not 128-bit length")}return h(e,[{key:"toString",value:function(){for(var e="",t=0;t<this.bytes.length;t++)e=e+Je.charAt(this.bytes[t]>>>4)+Je.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}},{key:"clone",value:function(){return new e(this.bytes.slice(0))}},{key:"equals",value:function(e){return 0===this.compareTo(e)}},{key:"compareTo",value:function(e){for(var t=0;t<16;t++){var n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0}}],[{key:"fromFieldsV7",value:function(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var o=new Uint8Array(16);return o[0]=t/Math.pow(2,40),o[1]=t/Math.pow(2,32),o[2]=t/Math.pow(2,24),o[3]=t/Math.pow(2,16),o[4]=t/Math.pow(2,8),o[5]=t,o[6]=112|n>>>8,o[7]=n,o[8]=128|r>>>24,o[9]=r>>>16,o[10]=r>>>8,o[11]=r,o[12]=i>>>24,o[13]=i>>>16,o[14]=i>>>8,o[15]=i,new e(o)}}]),e}(),Qe=function(){function e(){d(this,e),p(this,"timestamp",0),p(this,"counter",0),p(this,"random",new et)}return h(e,[{key:"generate",value:function(){var e=this.generateOrAbort();if(C(e)){this.timestamp=0;var t=this.generateOrAbort();if(C(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return Ke.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),e}(),Ye=function(e){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};N&&!C(N.crypto)&&crypto.getRandomValues&&(Ye=function(e){return crypto.getRandomValues(e)});var Ze,et=function(){function e(){d(this,e),p(this,"buffer",new Uint32Array(8)),p(this,"cursor",1/0)}return h(e,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(Ye(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),e}(),tt=function(){return nt().toString()},nt=function(){return(Ze||(Ze=new Qe)).generate()},rt="",it=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var ot,st={is_supported:function(){return!!U},error:function(e){K.error("cookieStore error: "+e)},get:function(e){if(U){try{for(var t=e+"=",n=U.cookie.split(";").filter((function(e){return e.length})),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch(e){}return null}},parse:function(e){var t;try{t=JSON.parse(st.get(e))||{}}catch(e){}return t},set:function(e,t,n,r,i){if(U)try{var o="",s="",a=function(e,t){if(t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;if(rt)return rt;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var n=e.split("."),r=Math.min(n.length,8),i="dmn_chk_"+tt(),o=new RegExp("(^|;)\\s*"+i+"=1");!rt&&r--;){var s=n.slice(r).join("."),a=i+"=1;domain=."+s;t.cookie=a,o.test(t.cookie)&&(t.cookie=a+";expires=Thu, 01 Jan 1970 00:00:00 GMT",rt=s)}return rt}(e);if(!n){var r=function(e){var t=e.match(it);return t?t[0]:""}(e);r!==n&&K.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}(U.location.hostname,r);if(n){var u=new Date;u.setTime(u.getTime()+24*n*60*60*1e3),o="; expires="+u.toUTCString()}i&&(s="; secure");var c=e+"="+encodeURIComponent(JSON.stringify(t))+o+"; SameSite=Lax; path=/"+a+s;return c.length>3686.4&&K.warn("cookieStore warning: large cookie, len="+c.length),U.cookie=c,c}catch(e){return}},remove:function(e,t){try{st.set(e,"",-1,t)}catch(e){return}}},at=null,ut={is_supported:function(){if(!I(at))return at;var e=!0;if(C(N))e=!1;else try{var t="__mplssupport__";ut.set(t,"xyz"),'"xyz"'!==ut.get(t)&&(e=!1),ut.remove(t)}catch(t){e=!1}return e||K.error("localStorage unsupported; falling back to cookie store"),at=e,e},error:function(e){K.error("localStorage error: "+e)},get:function(e){try{return null==N?void 0:N.localStorage.getItem(e)}catch(e){ut.error(e)}return null},parse:function(e){try{return JSON.parse(ut.get(e))||{}}catch(e){}return null},set:function(e,t){try{null==N||N.localStorage.setItem(e,JSON.stringify(t))}catch(e){ut.error(e)}},remove:function(e){try{null==N||N.localStorage.removeItem(e)}catch(e){ut.error(e)}}},ct=["distinct_id",Oe,Re,qe],lt=c(c({},ut),{},{parse:function(e){try{var t={};try{t=st.parse(e)||{}}catch(e){}var n=te(t,JSON.parse(ut.get(e)||"{}"));return ut.set(e,n),n}catch(e){}return null},set:function(e,t,n,r,i,o){try{ut.set(e,t,void 0,void 0,o);var s={};ct.forEach((function(e){t[e]&&(s[e]=t[e])})),Object.keys(s).length&&st.set(e,s,n,r,i,o)}catch(e){ut.error(e)}},remove:function(e,t){try{null==N||N.localStorage.removeItem(e),st.remove(e,t)}catch(e){ut.error(e)}}}),dt={},ft={is_supported:function(){return!0},error:function(e){K.error("memoryStorage error: "+e)},get:function(e){return dt[e]||null},parse:function(e){return dt[e]||null},set:function(e,t){dt[e]=t},remove:function(e){delete dt[e]}},ht=null,pt={is_supported:function(){if(!I(ht))return ht;if(ht=!0,C(N))ht=!1;else try{var e="__support__";pt.set(e,"xyz"),'"xyz"'!==pt.get(e)&&(ht=!1),pt.remove(e)}catch(e){ht=!1}return ht},error:function(e){K.error("sessionStorage error: ",e)},get:function(e){try{return null==N?void 0:N.sessionStorage.getItem(e)}catch(e){pt.error(e)}return null},parse:function(e){try{return JSON.parse(pt.get(e))||null}catch(e){}return null},set:function(e,t){try{null==N||N.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){pt.error(e)}},remove:function(e){try{null==N||N.sessionStorage.removeItem(e)}catch(e){pt.error(e)}}},vt=["localhost","127.0.0.1"],gt=function(e){var t=null==U?void 0:U.createElement("a");return C(t)?null:(t.href=e,t)},_t=function(e,t){return!!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t)&&new RegExp(t).test(e)},mt=function(e,t){for(var n,r=((e.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===t){n=o;break}}if(!x(n)||n.length<2)return"";var s=n[1];try{s=decodeURIComponent(s)}catch(e){K.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},yt=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},bt="Mobile",wt="iOS",kt="Android",St="Tablet",Et=kt+" "+St,xt="iPad",Ot="Apple",Rt=Ot+" Watch",Mt="Safari",Ct="BlackBerry",Pt="Samsung",Tt=Pt+"Browser",It=Pt+" Internet",Ft="Chrome",At=Ft+" OS",Lt=Ft+" "+wt,Nt="Internet Explorer",jt=Nt+" "+bt,Dt="Opera",$t=Dt+" Mini",Bt="Edge",qt="Microsoft "+Bt,Ut="Firefox",Ht=Ut+" "+wt,Gt="Nintendo",zt="PlayStation",Wt="Xbox",Vt=kt+" "+bt,Xt=bt+" "+Mt,Jt="Windows",Kt=Jt+" Phone",Qt="Nokia",Yt="Ouya",Zt="Generic",en=Zt+" "+bt.toLowerCase(),tn=Zt+" "+St.toLowerCase(),nn="Konqueror",rn="(\\d+(\\.\\d+)?)",on=new RegExp("Version/"+rn),sn=new RegExp(Wt,"i"),an=new RegExp(zt+" \\w+","i"),un=new RegExp(Gt+" \\w+","i"),cn=new RegExp(Ct+"|PlayBook|BB10","i"),ln={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},dn=function(e,t){return t=t||"",ne(e," OPR/")&&ne(e,"Mini")?$t:ne(e," OPR/")?Dt:cn.test(e)?Ct:ne(e,"IE"+bt)||ne(e,"WPDesktop")?jt:ne(e,Tt)?It:ne(e,Bt)||ne(e,"Edg/")?qt:ne(e,"FBIOS")?"Facebook "+bt:ne(e,"UCWEB")||ne(e,"UCBrowser")?"UC Browser":ne(e,"CriOS")?Lt:ne(e,"CrMo")?Ft:ne(e,kt)&&ne(e,Mt)?Vt:ne(e,Ft)?Ft:ne(e,"FxiOS")?Ht:ne(e.toLowerCase(),nn.toLowerCase())?nn:function(e,t){return t&&ne(t,Ot)||function(e){return ne(e,Mt)&&!ne(e,Ft)&&!ne(e,kt)}(e)}(e,t)?ne(e,bt)?Xt:Mt:ne(e,Ut)?Ut:ne(e,"MSIE")||ne(e,"Trident/")?Nt:ne(e,"Gecko")?Ut:""},fn=(p(ot={},jt,[new RegExp("rv:"+rn)]),p(ot,qt,[new RegExp(Bt+"?\\/"+rn)]),p(ot,Ft,[new RegExp("("+Ft+"|CrMo)\\/"+rn)]),p(ot,Lt,[new RegExp("CriOS\\/"+rn)]),p(ot,"UC Browser",[new RegExp("(UCBrowser|UCWEB)\\/"+rn)]),p(ot,Mt,[on]),p(ot,Xt,[on]),p(ot,Dt,[new RegExp("(Opera|OPR)\\/"+rn)]),p(ot,Ut,[new RegExp(Ut+"\\/"+rn)]),p(ot,Ht,[new RegExp("FxiOS\\/"+rn)]),p(ot,nn,[new RegExp("Konqueror[:/]?"+rn,"i")]),p(ot,Ct,[new RegExp(Ct+" "+rn),on]),p(ot,Vt,[new RegExp("android\\s"+rn,"i")]),p(ot,It,[new RegExp(Tt+"\\/"+rn)]),p(ot,Nt,[new RegExp("(rv:|MSIE )"+rn)]),p(ot,"Mozilla",[new RegExp("rv:"+rn)]),ot),hn=[[new RegExp(Wt+"; "+Wt+" (.*?)[);]","i"),function(e){return[Wt,e&&e[1]||""]}],[new RegExp(Gt,"i"),[Gt,""]],[new RegExp(zt,"i"),[zt,""]],[cn,[Ct,""]],[new RegExp(Jt,"i"),function(e,t){if(/Phone/.test(t)||/WPDesktop/.test(t))return[Kt,""];if(new RegExp(bt).test(t)&&!/IEMobile\b/.test(t))return[Jt+" "+bt,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=ln[r]||"";return/arm/i.test(t)&&(i="RT"),[Jt,i]}return[Jt,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,function(e){if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[wt,t.join(".")]}return[wt,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,function(e){var t="";return e&&e.length>=3&&(t=C(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+kt+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+kt+")","i"),function(e){if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[kt,t.join(".")]}return[kt,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,function(e){var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[At,""]],[/Linux|debian/i,["Linux",""]]],pn=function(e){return un.test(e)?Gt:an.test(e)?zt:sn.test(e)?Wt:new RegExp(Yt,"i").test(e)?Yt:new RegExp("("+Kt+"|WPDesktop)","i").test(e)?Kt:/iPad/.test(e)?xt:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?Rt:cn.test(e)?Ct:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(Qt,"i").test(e)?Qt:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(bt).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?kt:Et:kt:new RegExp("(pda|"+bt+")","i").test(e)?en:new RegExp(St,"i").test(e)&&!new RegExp(St+" pc","i").test(e)?tn:""},vn="https?://(.*)",gn=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],_n={campaignParams:function(e){return U?this._campaignParamsFromUrl(U.URL,e):{}},_campaignParamsFromUrl:function(e,t){var n=gn.concat(t||[]),r={};return ee(n,(function(t){var n=mt(e,t);n&&(r[t]=n)})),r},_searchEngine:function(e){return e?0===e.search(vn+"google.([^/?]*)")?"google":0===e.search(vn+"bing.com")?"bing":0===e.search(vn+"yahoo.com")?"yahoo":0===e.search(vn+"duckduckgo.com")?"duckduckgo":null:null},_searchInfoFromReferrer:function(e){var t=_n._searchEngine(e),n="yahoo"!=t?"q":"p",r={};if(!I(t)){r.$search_engine=t;var i=U?mt(U.referrer,n):"";i.length&&(r.ph_keyword=i)}return r},searchInfo:function(){var e=null==U?void 0:U.referrer;return e?this._searchInfoFromReferrer(e):{}},browser:dn,browserVersion:function(e,t){var n=dn(e,t),r=fn[n];if(C(r))return null;for(var i=0;i<r.length;i++){var o=r[i],s=e.match(o);if(s)return parseFloat(s[s.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(e){for(var t=0;t<hn.length;t++){var n=v(hn[t],2),r=n[0],i=n[1],o=r.exec(e),s=o&&(O(i)?i(o,e):i);if(s)return s}return["",""]},device:pn,deviceType:function(e){var t=pn(e);return t===xt||t===Et||"Kobo"===t||"Kindle Fire"===t||t===tn?St:t===Gt||t===Wt||t===zt||t===Yt?"Console":t===Rt?"Wearable":t?bt:"Desktop"},referrer:function(){return(null==U?void 0:U.referrer)||"$direct"},referringDomain:function(){var e;return null!=U&&U.referrer&&(null===(e=gt(U.referrer))||void 0===e?void 0:e.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer(),u:null==H?void 0:H.href}},initialPersonPropsFromInfo:function(e){var t,n=e.r,r=e.u,i={$initial_referrer:n,$initial_referring_domain:null==n?void 0:"$direct"==n?"$direct":null===(t=gt(n))||void 0===t?void 0:t.host};if(r){i.$initial_current_url=r;var o=gt(r);i.$initial_host=null==o?void 0:o.host,i.$initial_pathname=null==o?void 0:o.pathname,ee(this._campaignParamsFromUrl(r),(function(e,t){i["$initial_"+ue(t)]=e}))}return n&&ee(this._searchInfoFromReferrer(n),(function(e,t){i["$initial_"+ue(t)]=e})),i},properties:function(){if(!V)return{};var e=v(_n.os(V),2),t=e[0],n=e[1];return te(ae({$os:t,$os_version:n,$browser:_n.browser(V,navigator.vendor),$device:_n.device(V),$device_type:_n.deviceType(V)}),{$current_url:null==H?void 0:H.href,$host:null==H?void 0:H.host,$pathname:null==H?void 0:H.pathname,$raw_user_agent:V.length>1e3?V.substring(0,997)+"...":V,$browser_version:_n.browserVersion(V,navigator.vendor),$browser_language:_n.browserLanguage(),$screen_height:null==N?void 0:N.screen.height,$screen_width:null==N?void 0:N.screen.width,$viewport_height:null==N?void 0:N.innerHeight,$viewport_width:null==N?void 0:N.innerWidth,$lib:"web",$lib_version:b.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:ie()/1e3})},people_properties:function(){if(!V)return{};var e=v(_n.os(V),2),t=e[0],n=e[1];return te(ae({$os:t,$os_version:n,$browser:_n.browser(V,navigator.vendor)}),{$browser_version:_n.browserVersion(V,navigator.vendor)})}},mn=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],yn=function(){function e(t){d(this,e),this.config=t,this.props={},this.campaign_params_saved=!1,this.name=function(e){var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"}(t),this.storage=this.buildStorage(t),this.load(),t.debug&&K.info("Persistence loaded",t.persistence,c({},this.props)),this.update_config(t,t),this.save()}return h(e,[{key:"buildStorage",value:function(e){-1===mn.indexOf(e.persistence.toLowerCase())&&(K.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&ut.is_supported()?ut:"localstorage+cookie"===t&&lt.is_supported()?lt:"sessionstorage"===t&&pt.is_supported()?pt:"memory"===t?ft:"cookie"===t?st:lt.is_supported()?lt:st}},{key:"properties",value:function(){var e={};return ee(this.props,(function(t,n){if(n===Me&&R(t))for(var r=Object.keys(t),i=0;i<r.length;i++)e["$feature/".concat(r[i])]=t[r[i]];else s=n,a=!1,(I(o=He)?a:B&&o.indexOf===B?-1!=o.indexOf(s):(ee(o,(function(e){if(a||(a=e===s))return Q})),a))||(e[n]=t);var o,s,a})),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=te({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,t,n){var r=this;if(R(e)){C(t)&&(t="None"),this.expire_days=C(n)?this.default_expiry:n;var i=!1;if(ee(e,(function(e,n){r.props.hasOwnProperty(n)&&r.props[n]!==t||(r.props[n]=e,i=!0)})),i)return this.save(),!0}return!1}},{key:"register",value:function(e,t){var n=this;if(R(e)){this.expire_days=C(t)?this.default_expiry:t;var r=!1;if(ee(e,(function(t,i){e.hasOwnProperty(i)&&n.props[i]!==t&&(n.props[i]=t,r=!0)})),r)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(_n.campaignParams(this.config.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(_n.searchInfo())}},{key:"update_referrer_info",value:function(){this.register_once(_n.referrerInfo(),void 0)}},{key:"set_initial_person_info",value:function(){this.props[De]||this.props[$e]||this.register_once(p({},Be,_n.initialPersonInfo()),void 0)}},{key:"get_referrer_info",value:function(){return ae({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"get_initial_props",value:function(){var e=this,t={};ee([$e,De],(function(n){var r=e.props[n];r&&ee(r,(function(e,n){t["$initial_"+ue(n)]=e}))}));var n=this.props[Be];if(n){var r=_n.initialPersonPropsFromInfo(n);te(t,r)}return t}},{key:"safe_merge",value:function(e){return ee(this.props,(function(t,n){n in e||(e[n]=t)})),e}},{key:"update_config",value:function(e,t){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var n=this.buildStorage(e),r=this.props;this.clear(),this.storage=n,this.props=r,this.save()}}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,t){var n=this.props[pe]||{};n[e]=t,this.props[pe]=n,this.save()}},{key:"remove_event_timer",value:function(e){var t=(this.props[pe]||{})[e];return C(t)||(delete this.props[pe][e],this.save()),t}},{key:"get_property",value:function(e){return this.props[e]}},{key:"set_property",value:function(e,t){this.props[e]=t,this.save()}}]),e}();function bn(e){return JSON.stringify(e,(t=[],function(e,n){if(R(n)){for(;t.length>0&&t.at(-1)!==this;)t.pop();return t.includes(n)?"[Circular]":(t.push(n),n)}return n})).length;var t}var wn=2,kn=4;function Sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6606028.8;if(e.size>=t&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),i=e.data.slice(n);return[Sn({size:bn(r),data:r,sessionId:e.sessionId,windowId:e.windowId}),Sn({size:bn(i),data:i,sessionId:e.sessionId,windowId:e.windowId})].flatMap((function(e){return e}))}return[e]}var En=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(En||{}),xn=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(xn||{});function On(e){return e?Y(e).split(/\s+/):[]}function Rn(e){var t=null==N?void 0:N.location.href;return!!(t&&e&&e.some((function(e){return t.match(e)})))}function Mn(e){var t="";switch(l(e.className)){case"string":t=e.className;break;case"object":t=("baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return On(t)}function Cn(e){return F(e)?null:Y(e).split(/(\s+)/).filter((function(e){return Wn(e)})).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Pn(e){var t="";return Dn(e)&&!$n(e)&&e.childNodes&&e.childNodes.length&&ee(e.childNodes,(function(e){var n;Fn(e)&&e.textContent&&(t+=null!==(n=Cn(e.textContent))&&void 0!==n?n:"")})),Y(t)}function Tn(e){return!!e&&1===e.nodeType}function In(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function Fn(e){return!!e&&3===e.nodeType}function An(e){return!!e&&11===e.nodeType}var Ln=["a","button","form","input","select","textarea","label"];function Nn(e){var t=e.parentNode;return!(!t||!Tn(t))&&t}function jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!N||!e||In(e,"html")||!Tn(e))return!1;if(null!=n&&n.url_allowlist&&!Rn(n.url_allowlist))return!1;if(null!=n&&n.url_ignorelist&&Rn(n.url_ignorelist))return!1;if(null!=n&&n.dom_event_allowlist){var o=n.dom_event_allowlist;if(o&&!o.some((function(e){return t.type===e})))return!1}for(var s=!1,a=[e],u=!0,c=e;c.parentNode&&!In(c,"body");)if(An(c.parentNode))a.push(c.parentNode.host),c=c.parentNode.host;else{if(!(u=Nn(c)))break;if(r||Ln.indexOf(u.tagName.toLowerCase())>-1)s=!0;else{var d=N.getComputedStyle(u);d&&"pointer"===d.getPropertyValue("cursor")&&(s=!0)}a.push(u),c=u}if(!function(e,t){var n=null==t?void 0:t.element_allowlist;if(C(n))return!0;var r,i=y(e);try{var o=function(){var e=r.value;if(n.some((function(t){return e.tagName.toLowerCase()===t})))return{v:!0}};for(i.s();!(r=i.n()).done;){var s=o();if("object"===l(s))return s.v}}catch(e){i.e(e)}finally{i.f()}return!1}(a,n))return!1;if(!function(e,t){var n=null==t?void 0:t.css_selector_allowlist;if(C(n))return!0;var r,i=y(e);try{var o=function(){var e=r.value;if(n.some((function(t){return e.matches(t)})))return{v:!0}};for(i.s();!(r=i.n()).done;){var s=o();if("object"===l(s))return s.v}}catch(e){i.e(e)}finally{i.f()}return!1}(a,n))return!1;var f=N.getComputedStyle(e);if(f&&"pointer"===f.getPropertyValue("cursor")&&"click"===t.type)return!0;var h=e.tagName.toLowerCase();switch(h){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return s?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Ln.indexOf(h)>-1||"true"===e.getAttribute("contenteditable"))}}function Dn(e){for(var t=e;t.parentNode&&!In(t,"body");t=t.parentNode){var n=Mn(t);if(ne(n,"ph-sensitive")||ne(n,"ph-no-capture"))return!1}if(ne(Mn(e),"ph-include"))return!0;var r=e.type||"";if(P(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!P(i)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,""))}function $n(e){return!!(In(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||In(e,"select")||In(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var Bn="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",qn=new RegExp("^(?:".concat(Bn,")$")),Un=new RegExp(Bn),Hn="\\d{3}-?\\d{2}-?\\d{4}",Gn=new RegExp("^(".concat(Hn,")$")),zn=new RegExp("(".concat(Hn,")"));function Wn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(F(e))return!1;if(P(e)){if(e=Y(e),(t?qn:Un).test((e||"").replace(/[- ]/g,"")))return!1;if((t?Gn:zn).test(e))return!1}return!0}function Vn(e){var t=Pn(e);return Wn(t="".concat(t," ").concat(Xn(e)).trim())?t:""}function Xn(e){var t="";return e&&e.childNodes&&e.childNodes.length&&ee(e.childNodes,(function(e){var n;if(e&&"span"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase()))try{var r=Pn(e);t="".concat(t," ").concat(r).trim(),e.childNodes&&e.childNodes.length&&(t="".concat(t," ").concat(Xn(e)).trim())}catch(e){K.error(e)}})),t}function Jn(e){return function(e){var t=e.map((function(e){var t,n,r="";if(e.tag_name&&(r+=e.tag_name),e.attr_class){e.attr_class.sort();var i,o=y(e.attr_class);try{for(o.s();!(i=o.n()).done;){var s=i.value;r+=".".concat(s.replace(/"/g,""))}}catch(e){o.e(e)}finally{o.f()}}var a=c(c(c(c({},e.text?{text:e.text}:{}),{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(n=e.nth_of_type)&&void 0!==n?n:0},e.href?{href:e.href}:{}),e.attr_id?{attr_id:e.attr_id}:{}),e.attributes),u={};return re(a).sort((function(e,t){var n=v(e,1)[0],r=v(t,1)[0];return n.localeCompare(r)})).forEach((function(e){var t=v(e,2),n=t[0],r=t[1];return u[Kn(n.toString())]=Kn(r.toString())})),(r+=":")+re(a).map((function(e){var t=v(e,2),n=t[0],r=t[1];return"".concat(n,'="').concat(r,'"')})).join("")}));return t.join(";")}(function(e){return e.map((function(e){var t,n,r={text:null===(t=e.$el_text)||void 0===t?void 0:t.slice(0,400),tag_name:e.tag_name,href:null===(n=e.attr__href)||void 0===n?void 0:n.slice(0,2048),attr_class:Qn(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return re(e).filter((function(e){return 0===v(e,1)[0].indexOf("attr__")})).forEach((function(e){var t=v(e,2),n=t[0],i=t[1];return r.attributes[n]=i})),r}))}(e))}function Kn(e){return e.replace(/"|\\"/g,'\\"')}function Qn(e){var t=e.attr__class;return t?x(t)?t:On(t):void 0}var Yn="[SessionRecording]",Zn="redacted",er={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(e){return e},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},tr=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],nr=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],rr=["/s/","/e/","/i/"];function ir(e,t,n,r){if(F(e))return e;var i=(null==t?void 0:t["content-length"])||function(e){return new Blob([e]).size}(e);return P(i)&&(i=parseInt(i)),i>n?Yn+" ".concat(r," body too large to record (").concat(i," bytes)"):e}function or(e,t){if(F(e))return e;var n=e;return Wn(n,!1)||(n=Yn+" "+t+" body "+Zn),ee(nr,(function(e){var r,i;null!==(r=n)&&void 0!==r&&r.length&&-1!==(null===(i=n)||void 0===i?void 0:i.indexOf(e))&&(n=Yn+" "+t+" body "+Zn+" as might contain: "+e)})),n}var sr,ar=h((function e(t){var n,r,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,e),p(this,"bucketSize",100),p(this,"refillRate",10),p(this,"mutationBuckets",{}),p(this,"loggedTracker",{}),p(this,"refillBuckets",(function(){Object.keys(i.mutationBuckets).forEach((function(e){i.mutationBuckets[e]=i.mutationBuckets[e]+i.refillRate,i.mutationBuckets[e]>=i.bucketSize&&delete i.mutationBuckets[e]}))})),p(this,"getNodeOrRelevantParent",(function(e){var t=i.rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var n=t.closest("svg");if(n)return[i.rrweb.mirror.getId(n),n]}return[e,t]})),p(this,"numberOfChanges",(function(e){var t,n,r,i,o,s,a,u;return(null!==(t=null===(n=e.removes)||void 0===n?void 0:n.length)&&void 0!==t?t:0)+(null!==(r=null===(i=e.attributes)||void 0===i?void 0:i.length)&&void 0!==r?r:0)+(null!==(o=null===(s=e.texts)||void 0===s?void 0:s.length)&&void 0!==o?o:0)+(null!==(a=null===(u=e.adds)||void 0===u?void 0:u.length)&&void 0!==a?a:0)})),p(this,"throttleMutations",(function(e){if(3!==e.type||0!==e.data.source)return e;var t=e.data,n=i.numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter((function(e){var t,n,r,o=v(i.getNodeOrRelevantParent(e.id),2),s=o[0],a=o[1];return 0!==i.mutationBuckets[s]&&(i.mutationBuckets[s]=null!==(t=i.mutationBuckets[s])&&void 0!==t?t:i.bucketSize,i.mutationBuckets[s]=Math.max(i.mutationBuckets[s]-1,0),0===i.mutationBuckets[s]&&(i.loggedTracker[s]||(i.loggedTracker[s]=!0,null===(n=(r=i.options).onBlockedNode)||void 0===n||n.call(r,s,a))),e)})));var r=i.numberOfChanges(t);return 0!==r||n===r?e:void 0})),this.rrweb=t,this.options=o,this.refillRate=null!==(n=this.options.refillRate)&&void 0!==n?n:this.refillRate,this.bucketSize=null!==(r=this.options.bucketSize)&&void 0!==r?r:this.bucketSize,setInterval((function(){i.refillBuckets()}),1e3)})),ur=[xn.MouseMove,xn.MouseInteraction,xn.Scroll,xn.ViewportResize,xn.Input,xn.TouchMove,xn.MediaInteraction,xn.Drag],cr=function(e){return{rrwebMethod:e,enqueuedAt:Date.now(),attempt:1}},lr="[SessionRecording]",dr=function(){function e(t){var n=this;if(d(this,e),p(this,"queuedRRWebEvents",[]),p(this,"isIdle",!1),p(this,"_linkedFlagSeen",!1),p(this,"_lastActivityTimestamp",Date.now()),p(this,"_linkedFlag",null),p(this,"_forceAllowLocalhostNetworkCapture",!1),p(this,"_samplingSessionListener",null),this.instance=t,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,null==N||N.addEventListener("beforeunload",(function(){n._flushBuffer()})),null==N||N.addEventListener("offline",(function(){n._tryAddCustomEvent("browser offline",{})})),null==N||N.addEventListener("online",(function(){n._tryAddCustomEvent("browser online",{})})),null==N||N.addEventListener("visibilitychange",(function(){if(null!=U&&U.visibilityState){var e="window "+U.visibilityState;n._tryAddCustomEvent(e,{})}})),!this.instance.sessionManager)throw K.error(lr+" started without valid sessionManager"),new Error(lr+" started without valid sessionManager. This is a bug.");var r=this.sessionManager.checkAndGetSessionAndWindowId(),i=r.sessionId,o=r.windowId;this.sessionId=i,this.windowId=o,this.buffer=this.clearBuffer(),this._setupSampling()}return h(e,[{key:"rrwebRecord",get:function(){var e;return null==X||null===(e=X.rrweb)||void 0===e?void 0:e.record}},{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw new Error(lr+" must be started with a valid sessionManager.");return this.instance.sessionManager}},{key:"fullSnapshotIntervalMillis",get:function(){var e;return(null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.full_snapshot_interval_millis)||3e5}},{key:"isSampled",get:function(){var e=this.instance.get_property(Re);return L(e)?e:null}},{key:"sessionDuration",get:function(){var e,t,n=null===(e=this.buffer)||void 0===e?void 0:e.data[(null===(t=this.buffer)||void 0===t?void 0:t.data.length)-1],r=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return n?n.timestamp-r:null}},{key:"isRecordingEnabled",get:function(){var e=!!this.instance.get_property(be),t=!this.instance.config.disable_session_recording;return N&&e&&t}},{key:"isConsoleLogCaptureEnabled",get:function(){var e=!!this.instance.get_property(we),t=this.instance.config.enable_recording_console_log;return null!=t?t:e}},{key:"canvasRecording",get:function(){var e=this.instance.get_property(Se);return e&&e.fps&&e.quality?{enabled:e.enabled,fps:e.fps,quality:e.quality}:void 0}},{key:"networkPayloadCapture",get:function(){var e,t,n=this.instance.get_property(ke),r={recordHeaders:null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recordHeaders,recordBody:null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.recordBody},i=(null==r?void 0:r.recordHeaders)||(null==n?void 0:n.recordHeaders),o=(null==r?void 0:r.recordBody)||(null==n?void 0:n.recordBody),s=R(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,a=!!(L(s)?s:null==n?void 0:n.capturePerformance);return i||o||a?{recordHeaders:i,recordBody:o,recordPerformance:a}:void 0}},{key:"sampleRate",get:function(){var e=this.instance.get_property(Ee);return A(e)?e:null}},{key:"minimumDuration",get:function(){var e=this.instance.get_property(xe);return A(e)?e:null}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?F(this._linkedFlag)||this._linkedFlagSeen?L(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}},{key:"startIfEnabledOrStop",value:function(){this.isRecordingEnabled?(this._startCapture(),K.info(lr+" started")):(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,K.info(lr+" stopped"))}},{key:"makeSamplingDecision",value:function(e){var t,n=this.sessionId!==e,r=this.sampleRate;if(A(r)){var i,o=this.isSampled,s=n||!L(o);!(i=s?Math.random()<r:o)&&s&&K.warn(lr+" Sample rate (".concat(r,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r}),null===(t=this.instance.persistence)||void 0===t||t.register(p({},Re,i))}else{var a;null===(a=this.instance.persistence)||void 0===a||a.register(p({},Re,null))}}},{key:"afterDecideResponse",value:function(e){var t,n,r,i=this;if(this._persistDecideResponse(e),this._linkedFlag=(null===(t=e.sessionRecording)||void 0===t?void 0:t.linkedFlag)||null,null!==(n=e.sessionRecording)&&void 0!==n&&n.endpoint&&(this._endpoint=null===(r=e.sessionRecording)||void 0===r?void 0:r.endpoint),this._setupSampling(),!F(this._linkedFlag)){var o=P(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,s=P(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((function(e,t){var n=R(t)&&o in t,r=s?t[o]===s:n;if(r){var a={linkedFlag:o,linkedVariant:s},u="linked flag matched";K.info(lr+" "+u,a),i._tryAddCustomEvent(u,a)}i._linkedFlagSeen=r}))}this.receivedDecide=!0,this.startIfEnabledOrStop()}},{key:"_setupSampling",value:function(){var e=this;A(this.sampleRate)&&I(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId((function(t){e.makeSamplingDecision(t)})))}},{key:"_persistDecideResponse",value:function(e){if(this.instance.persistence){var t=this.instance.persistence,n=function(){var n,r,i,o,s,a,u,l,d=null===(n=e.sessionRecording)||void 0===n?void 0:n.sampleRate,f=F(d)?null:parseFloat(d),h=null===(r=e.sessionRecording)||void 0===r?void 0:r.minimumDurationMilliseconds;t.register((p(l={},be,!!e.sessionRecording),p(l,we,null===(i=e.sessionRecording)||void 0===i?void 0:i.consoleLogRecordingEnabled),p(l,ke,c({capturePerformance:e.capturePerformance},null===(o=e.sessionRecording)||void 0===o?void 0:o.networkPayloadCapture)),p(l,Se,{enabled:null===(s=e.sessionRecording)||void 0===s?void 0:s.recordCanvas,fps:null===(a=e.sessionRecording)||void 0===a?void 0:a.canvasFps,quality:null===(u=e.sessionRecording)||void 0===u?void 0:u.canvasQuality}),p(l,Ee,f),p(l,xe,C(h)?null:h),l))};n(),this.sessionManager.onSessionId(n)}}},{key:"log",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(t=this.instance.sessionRecording)||void 0===t||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:ie()})}},{key:"_startCapture",value:function(){var e=this;C(Object.assign)||this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut()||(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():this.instance.requestRouter.loadScript("/static/recorder.js?v=".concat(b.LIB_VERSION),(function(t){if(t)return K.error(lr+" could not load recorder.js",t);e._onScriptLoaded()})))}},{key:"isInteractiveEvent",value:function(e){var t;return 3===e.type&&-1!==ur.indexOf(null===(t=e.data)||void 0===t?void 0:t.source)}},{key:"_updateWindowAndSessionIds",value:function(e){var t=this.isInteractiveEvent(e);t||this.isIdle||e.timestamp-this._lastActivityTimestamp>3e5&&(this.isIdle=!0,clearTimeout(this._fullSnapshotTimer),this._flushBuffer());var n=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),n=!0)),!this.isIdle){var r=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),i=r.windowId,o=r.sessionId,s=this.sessionId!==o,a=this.windowId!==i;this.windowId=i,this.sessionId=o,(n||-1===[wn,kn].indexOf(e.type)&&(a||s||C(this._fullSnapshotTimer)))&&this._tryTakeFullSnapshot()}}},{key:"_tryRRWebMethod",value:function(e){try{return e.rrwebMethod(),!0}catch(c){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):K.warn(lr+" could not emit queued rrweb event.",c,e),!1}}},{key:"_tryAddCustomEvent",value:function(e,t){var n=this;return this._tryRRWebMethod(cr((function(){return n.rrwebRecord.addCustomEvent(e,t)})))}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRWebMethod(cr((function(){return e.rrwebRecord.takeFullSnapshot()})))}},{key:"_onScriptLoaded",value:function(){for(var e,t=this,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},r=this.instance.config.session_recording,i=0,o=Object.entries(r||{});i<o.length;i++){var s=v(o[i],2),a=s[0],u=s[1];a in n&&("maskInputOptions"===a?n.maskInputOptions=c({password:!0},u):n[a]=u)}if(this.canvasRecording&&this.canvasRecording.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.canvasRecording.fps},n.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=null!==(e=this.mutationRateLimiter)&&void 0!==e?e:new ar(this.rrwebRecord,{onBlockedNode:function(e,n){var r="Too many mutations on node '".concat(e,"'. Rate limiting. This could be due to SVG animations or something similar");K.info(r,{node:n}),t.log(lr+" "+r,"warn")}});var l=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(c({emit:function(e){t.onRRwebEmit(e)},plugins:l},n)),this.instance._addCaptureHook((function(e){try{if("$pageview"===e){var n=N?t._maskUrl(N.location.href):"";if(!n)return;t._tryAddCustomEvent("$pageview",{href:n})}}catch(e){K.error("Could not add $pageview to rrweb session",e)}})),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:l.map((function(e){return null==e?void 0:e.name}))}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else K.error(lr+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_scheduleFullSnapshot",value:function(){var e=this;if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var t=this.fullSnapshotIntervalMillis;t&&(this._fullSnapshotTimer=setInterval((function(){e._tryTakeFullSnapshot()}),t))}}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return X.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(X.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&O(X.getRecordNetworkPlugin)&&(!vt.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(X.getRecordNetworkPlugin(function(e,t){var n,r,i,o={payloadSizeLimitBytes:er.payloadSizeLimitBytes,performanceEntryTypeToObserve:g(er.performanceEntryTypeToObserve),payloadHostDenyList:[].concat(g(t.payloadHostDenyList||[]),g(er.payloadHostDenyList))},s=!1!==e.session_recording.recordHeaders&&t.recordHeaders,a=!1!==e.session_recording.recordBody&&t.recordBody,u=!1!==e.capture_performance&&t.recordPerformance,l=(n=o,i=Math.min(1e6,null!==(r=n.payloadSizeLimitBytes)&&void 0!==r?r:1e6),function(e){return null!=e&&e.requestBody&&(e.requestBody=ir(e.requestBody,e.requestHeaders,i,"Request")),null!=e&&e.responseBody&&(e.responseBody=ir(e.responseBody,e.responseHeaders,i,"Response")),e}),d=function(e){return l(function(e){var t=gt(e.name);if(!(t&&t.pathname&&rr.some((function(e){return 0===t.pathname.indexOf(e)}))))return e}((n=(t=e).requestHeaders,F(n)||ee(Object.keys(null!=n?n:{}),(function(e){tr.includes(e.toLowerCase())&&(n[e]=Zn)})),t)));var t,n},f=O(e.session_recording.maskNetworkRequestFn);return f&&O(e.session_recording.maskCapturedNetworkRequestFn)&&K.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),f&&(e.session_recording.maskCapturedNetworkRequestFn=function(t){var n=e.session_recording.maskNetworkRequestFn({url:t.name});return c(c({},t),{},{name:null==n?void 0:n.url})}),o.maskRequestFn=O(e.session_recording.maskCapturedNetworkRequestFn)?function(t){var n,r,i,o=d(t);return o&&null!==(n=null===(r=(i=e.session_recording).maskCapturedNetworkRequestFn)||void 0===r?void 0:r.call(i,o))&&void 0!==n?n:void 0}:function(e){return function(e){if(!C(e))return e.requestBody=or(e.requestBody,"Request"),e.responseBody=or(e.responseBody,"Response"),e}(d(e))},c(c(c({},er),o),{},{recordHeaders:s,recordBody:a,recordPerformance:u,recordInitialRequests:u})}(this.instance.config,this.networkPayloadCapture))):K.info(lr+" NetworkCapture not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(this._processQueuedEvents(),e&&R(e)){if(e.type===En.Meta){var t=this._maskUrl(e.data.href);if(this._lastHref=t,!t)return;e.data.href=t}else this._pageViewFallBack();e.type===En.FullSnapshot&&this._scheduleFullSnapshot();var n=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(n){var r=function(e){var t=e;if(t&&R(t)&&6===t.type&&R(t.data)&&"rrweb/console@1"===t.data.plugin){t.data.payload.payload.length>10&&(t.data.payload.payload=t.data.payload.payload.slice(0,10),t.data.payload.payload.push("...[truncated]"));for(var n=[],r=0;r<t.data.payload.payload.length;r++)t.data.payload.payload[r]&&t.data.payload.payload[r].length>2e3?n.push(t.data.payload.payload[r].slice(0,2e3)+"...[truncated]"):n.push(t.data.payload.payload[r]);return t.data.payload.payload=n,e}return e}(n),i=bn(r);if(this._updateWindowAndSessionIds(r),!this.isIdle||r.type===En.Custom){var o={$snapshot_bytes:i,$snapshot_data:r,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(o):this.clearBuffer()}}}}},{key:"_pageViewFallBack",value:function(){if(!this.instance.config.capture_pageview&&N){var e=this._maskUrl(N.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}},{key:"_processQueuedEvents",value:function(){var e=this;if(this.queuedRRWebEvents.length){var t=g(this.queuedRRWebEvents);this.queuedRRWebEvents=[],t.forEach((function(t){Date.now()-t.enqueuedAt<=2e3&&e._tryRRWebMethod(t)}))}}},{key:"_maskUrl",value:function(e){var t=this.instance.config.session_recording;if(t.maskNetworkRequestFn){var n,r={url:e};return null===(n=r=t.maskNetworkRequestFn(r))||void 0===n?void 0:n.url}return e}},{key:"clearBuffer",value:function(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var t=this.minimumDuration,n=this.sessionDuration,r=A(n)&&n>=0,i=A(t)&&r&&n<t;return"buffering"===this.status||i?(this.flushBufferTimer=setTimeout((function(){e._flushBuffer()}),2e3),this.buffer):(this.buffer.data.length>0&&Sn(this.buffer).forEach((function(t){e._captureSnapshot({$snapshot_bytes:t.size,$snapshot_data:t.data,$session_id:t.sessionId,$window_id:t.windowId})})),this.clearBuffer())}},{key:"_captureSnapshotBuffered",value:function(e){var t,n=this,r=2+((null===(t=this.buffer)||void 0===t?void 0:t.data.length)||0);(this.buffer.size+e.$snapshot_bytes+r>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout((function(){n._flushBuffer()}),2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings"})}}]),e}(),fr=function(){function e(t){d(this,e),this.instance=t,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return h(e,[{key:"call",value:function(){var e=this,t={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(Pe),group_properties:this.instance.get_property(Te),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:t,compression:this.instance.config.disable_compression?void 0:ce.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(t){return e.parseDecideResponse(t.json)}})}},{key:"parseDecideResponse",value:function(e){var t=this;this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var n=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(null!=e?e:{},n),n)K.error("Failed to fetch feature flags from PostHog.");else{if(!U||!U.body)return K.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((function(){t.parseDecideResponse(e)}),500);if(this.instance._afterDecideResponse(e),e.siteApps)if(this.instance.config.opt_in_site_apps){var r,i=y(e.siteApps);try{var o=function(){var e=r.value,n=e.id,i=e.url,o=t.instance.requestRouter.endpointFor("api",i);X["__$$ph_site_app_".concat(n)]=t.instance,t.instance.requestRouter.loadScript(o,(function(e){if(e)return K.error("Error while initializing PostHog app with config id ".concat(n),e)}))};for(i.s();!(r=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}}else e.siteApps.length>0&&K.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}}]),e}(),hr=null!=N&&N.location?yt(N.location.hash,"__posthog")||yt(location.hash,"state"):null,pr="_postHogToolbarParams";!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(sr||(sr={}));var vr=function(){function e(t){d(this,e),this.instance=t}return h(e,[{key:"setToolbarState",value:function(e){X.ph_toolbar_state=e}},{key:"getToolbarState",value:function(){var e;return null!==(e=X.ph_toolbar_state)&&void 0!==e?e:sr.UNINITIALIZED}},{key:"maybeLoadToolbar",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!N||!U)return!1;n=null!==(e=n)&&void 0!==e?e:N.location,i=null!==(t=i)&&void 0!==t?t:N.history;try{if(!r){try{N.localStorage.setItem("test","test"),N.localStorage.removeItem("test")}catch(e){return!1}r=null==N?void 0:N.localStorage}var o,s=hr||yt(n.hash,"__posthog")||yt(n.hash,"state"),a=s?oe((function(){return JSON.parse(atob(decodeURIComponent(s)))}))||oe((function(){return JSON.parse(decodeURIComponent(s))})):null;return a&&"ph_authorize"===a.action?((o=a).source="url",o&&Object.keys(o).length>0&&(a.desiredHash?n.hash=a.desiredHash:i?i.replaceState(i.state,"",n.pathname+n.search):n.hash="")):((o=JSON.parse(r.getItem(pr)||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token||(this.loadToolbar(o),0))}catch(e){return!1}}},{key:"_callLoadToolbar",value:function(e){(X.ph_load_toolbar||X.ph_load_editor)(e,this.instance)}},{key:"loadToolbar",value:function(e){var t=this,n=!(null==U||!U.getElementById(Ue));if(!N||n)return!1;var r="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,i=c(c({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(N.localStorage.setItem(pr,JSON.stringify(c(c({},i),{},{source:void 0}))),this.getToolbarState()===sr.LOADED)this._callLoadToolbar(i);else if(this.getToolbarState()===sr.UNINITIALIZED){this.setToolbarState(sr.LOADING);var o=3e5,s=Math.floor(Date.now()/o)*o;this.instance.requestRouter.loadScript("/static/toolbar.js?t=".concat(s),(function(e){if(e)return K.error("Failed to load toolbar",e),void t.setToolbarState(sr.UNINITIALIZED);t.setToolbarState(sr.LOADED),t._callLoadToolbar(i)})),le(N,"turbolinks:load",(function(){t.setToolbarState(sr.UNINITIALIZED),t.loadToolbar(i)}))}return!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(e,t,n)}}]),e}(),gr=function(){function e(t){d(this,e),p(this,"isPaused",!0),p(this,"queue",[]),p(this,"flushTimeoutMs",3e3),this.sendRequest=t}return h(e,[{key:"enqueue",value:function(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}},{key:"unload",value:function(){var e=this;this.clearFlushTimeout();var t=this.queue.length>0?this.formatQueue():{},n=Object.values(t);[].concat(g(n.filter((function(e){return 0===e.url.indexOf("/e")}))),g(n.filter((function(e){return 0!==e.url.indexOf("/e")})))).map((function(t){e.sendRequest(c(c({},t),{},{transport:"sendBeacon"}))}))}},{key:"enable",value:function(){this.isPaused=!1,this.setFlushTimeout()}},{key:"setFlushTimeout",value:function(){var e=this;this.isPaused||(this.flushTimeout=setTimeout((function(){if(e.clearFlushTimeout(),e.queue.length>0){var t=e.formatQueue(),n=function(n){var r=t[n],i=(new Date).getTime();r.data&&x(r.data)&&ee(r.data,(function(e){e.offset=Math.abs(e.timestamp-i),delete e.timestamp})),e.sendRequest(r)};for(var r in t)n(r)}}),this.flushTimeoutMs))}},{key:"clearFlushTimeout",value:function(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}},{key:"formatQueue",value:function(){var e={};return ee(this.queue,(function(t){var n,r=t,i=(r?r.batchKey:null)||r.url;C(e[i])&&(e[i]=c(c({},r),{},{data:[]})),null===(n=e[i].data)||void 0===n||n.push(r.data)})),this.queue=[],e}}]),e}(),_r=Uint8Array,mr=Uint16Array,yr=Uint32Array,br=new _r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wr=new _r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),kr=new _r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sr=function(e,t){for(var n=new mr(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new yr(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},Er=Sr(br,2),xr=Er[0],Or=Er[1];xr[28]=258,Or[258]=28;for(var Rr=Sr(wr,0)[1],Mr=new mr(32768),Cr=0;Cr<32768;++Cr){var Pr=(43690&Cr)>>>1|(21845&Cr)<<1;Pr=(61680&(Pr=(52428&Pr)>>>2|(13107&Pr)<<2))>>>4|(3855&Pr)<<4,Mr[Cr]=((65280&Pr)>>>8|(255&Pr)<<8)>>>1}var Tr=function(e,t,n){for(var r=e.length,i=0,o=new mr(t);i<r;++i)++o[e[i]-1];var s,a=new mr(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;if(n){s=new mr(1<<t);var u=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],l=t-e[i],d=a[e[i]-1]++<<l,f=d|(1<<l)-1;d<=f;++d)s[Mr[d]>>>u]=c}else for(s=new mr(r),i=0;i<r;++i)s[i]=Mr[a[e[i]-1]++]>>>15-e[i];return s},Ir=new _r(288);for(Cr=0;Cr<144;++Cr)Ir[Cr]=8;for(Cr=144;Cr<256;++Cr)Ir[Cr]=9;for(Cr=256;Cr<280;++Cr)Ir[Cr]=7;for(Cr=280;Cr<288;++Cr)Ir[Cr]=8;var Fr=new _r(32);for(Cr=0;Cr<32;++Cr)Fr[Cr]=5;var Ar=Tr(Ir,9,0),Lr=Tr(Fr,5,0),Nr=function(e){return(e/8|0)+(7&e&&1)},jr=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof mr?mr:e instanceof yr?yr:_r)(n-t);return r.set(e.subarray(t,n)),r},Dr=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},$r=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Br=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[new _r(0),0];if(1==i){var s=new _r(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],u=n[1],c=0,l=1,d=2;for(n[0]={s:-1,f:a.f+u.f,l:a,r:u};l!=i-1;)a=n[n[c].f<n[d].f?c++:d++],u=n[c!=l&&n[c].f<n[d].f?c++:d++],n[l++]={s:-1,f:a.f+u.f,l:a,r:u};var f=o[0].s;for(r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var h=new mr(f+1),p=qr(n[l-1],h,0);if(p>t){r=0;var v=0,g=p-t,_=1<<g;for(o.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));r<i;++r){var m=o[r].s;if(!(h[m]>t))break;v+=_-(1<<p-h[m]),h[m]=t}for(v>>>=g;v>0;){var y=o[r].s;h[y]<t?v-=1<<t-h[y]++-1:++r}for(;r>=0&&v;--r){var b=o[r].s;h[b]==t&&(--h[b],++v)}p=t}return[new _r(h),p]},qr=function e(t,n,r){return-1==t.s?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},Ur=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new mr(++t),r=0,i=e[0],o=1,s=function(e){n[r++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[n.subarray(0,r),t]},Hr=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Gr=function(e,t,n){var r=n.length,i=Nr(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},zr=function(e,t,n,r,i,o,s,a,u,c,l){Dr(t,l++,n),++i[256];for(var d=Br(i,15),f=d[0],h=d[1],p=Br(o,15),v=p[0],g=p[1],_=Ur(f),m=_[0],y=_[1],b=Ur(v),w=b[0],k=b[1],S=new mr(19),E=0;E<m.length;++E)S[31&m[E]]++;for(E=0;E<w.length;++E)S[31&w[E]]++;for(var x=Br(S,7),O=x[0],R=x[1],M=19;M>4&&!O[kr[M-1]];--M);var C,P,T,I,F=c+5<<3,A=Hr(i,Ir)+Hr(o,Fr)+s,L=Hr(i,f)+Hr(o,v)+s+14+3*M+Hr(S,O)+(2*S[16]+3*S[17]+7*S[18]);if(F<=A&&F<=L)return Gr(t,l,e.subarray(u,u+c));if(Dr(t,l,1+(L<A)),l+=2,L<A){C=Tr(f,h,0),P=f,T=Tr(v,g,0),I=v;var N=Tr(O,R,0);for(Dr(t,l,y-257),Dr(t,l+5,k-1),Dr(t,l+10,M-4),l+=14,E=0;E<M;++E)Dr(t,l+3*E,O[kr[E]]);l+=3*M;for(var j=[m,w],D=0;D<2;++D){var $=j[D];for(E=0;E<$.length;++E){var B=31&$[E];Dr(t,l,N[B]),l+=O[B],B>15&&(Dr(t,l,$[E]>>>5&127),l+=$[E]>>>12)}}}else C=Ar,P=Ir,T=Lr,I=Fr;for(E=0;E<a;++E)if(r[E]>255){B=r[E]>>>18&31,$r(t,l,C[B+257]),l+=P[B+257],B>7&&(Dr(t,l,r[E]>>>23&31),l+=br[B]);var q=31&r[E];$r(t,l,T[q]),l+=I[q],q>3&&($r(t,l,r[E]>>>5&8191),l+=wr[q])}else $r(t,l,C[r[E]]),l+=P[r[E]];return $r(t,l,C[256]),l+P[256]},Wr=new yr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Vr=new _r(0),Xr=function(){for(var e=new yr(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),Jr=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Kr(e,t){void 0===t&&(t={});var n=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Xr[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}}(),r=e.length;n.p(e);var i,o=function(e,t,n,r,i){return function(e,t,n,r,i,o){var s=e.length,a=new _r(r+s+5*(1+Math.floor(s/7e3))+i),u=a.subarray(r,a.length-i),c=0;if(!t||s<8)for(var l=0;l<=s;l+=65535){var d=l+65535;d<s?c=Gr(u,c,e.subarray(l,d)):(u[l]=o,c=Gr(u,c,e.subarray(l,s)))}else{for(var f=Wr[t-1],h=f>>>13,p=8191&f,v=(1<<n)-1,g=new mr(32768),_=new mr(v+1),m=Math.ceil(n/3),y=2*m,b=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<y)&v},w=new yr(25e3),k=new mr(288),S=new mr(32),E=0,x=0,O=(l=0,0),R=0,M=0;l<s;++l){var C=b(l),P=32767&l,T=_[C];if(g[P]=T,_[C]=P,R<=l){var I=s-l;if((E>7e3||O>24576)&&I>423){c=zr(e,u,0,w,k,S,x,O,M,l-M,c),O=E=x=0,M=l;for(var F=0;F<286;++F)k[F]=0;for(F=0;F<30;++F)S[F]=0}var A=2,L=0,N=p,j=P-T&32767;if(I>2&&C==b(l-j))for(var D=Math.min(h,I)-1,$=Math.min(32767,l),B=Math.min(258,I);j<=$&&--N&&P!=T;){if(e[l+A]==e[l+A-j]){for(var q=0;q<B&&e[l+q]==e[l+q-j];++q);if(q>A){if(A=q,L=j,q>D)break;var U=Math.min(j,q-2),H=0;for(F=0;F<U;++F){var G=l-j+F+32768&32767,z=G-g[G]+32768&32767;z>H&&(H=z,T=G)}}}j+=(P=T)-(T=g[P])+32768&32767}if(L){w[O++]=268435456|Or[A]<<18|Rr[L];var W=31&Or[A],V=31&Rr[L];x+=br[W]+wr[V],++k[257+W],++S[V],R=l+A,++E}else w[O++]=e[l],++k[e[l]]}}c=zr(e,u,o,w,k,S,x,O,M,l-M,c),o||(c=Gr(u,c,Vr))}return jr(a,0,r+Nr(c)+i)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)}(e,t,10+((i=t).filename&&i.filename.length+1||0),8),s=o.length;return function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&Jr(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}}(o,t),Jr(o,s-8,n.d()),Jr(o,s-4,r),o}var Qr=!!z||!!G,Yr="text/plain",Zr=function(e,t){var n=v(e.split("?"),2),r=n[0],i=n[1],o=c({},t);null==i||i.split("&").forEach((function(e){var t=v(e.split("="),1)[0];delete o[t]}));var s=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",i=[];return ee(e,(function(e,r){C(e)||C(r)||"undefined"===r||(t=encodeURIComponent(function(e){return e instanceof File}(e)?e.name:e.toString()),n=encodeURIComponent(r),i[i.length]=n+"="+t)})),i.join(r)}(o);return s=s?(i?i+"&":"")+s:i,"".concat(r,"?").concat(s)},ei=function(e){return"data="+encodeURIComponent("string"==typeof e?e:JSON.stringify(e))},ti=function(e){var t=e.data,n=e.compression;if(t){if(n===ce.GZipJS){var r=Kr(function(e){var t=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var n=new _r(e.length+(e.length>>>1)),r=0,i=function(e){n[r++]=e},o=0;o<t;++o){if(r+5>n.length){var s=new _r(r+8+(t-o<<1));s.set(n),n=s}var a=e.charCodeAt(o);a<128?i(a):a<2048?(i(192|a>>>6),i(128|63&a)):a>55295&&a<57344?(i(240|(a=65536+(1047552&a)|1023&e.charCodeAt(++o))>>>18),i(128|a>>>12&63),i(128|a>>>6&63),i(128|63&a)):(i(224|a>>>12),i(128|a>>>6&63),i(128|63&a))}return jr(n,0,r)}(JSON.stringify(t)),{mtime:0});return{contentType:Yr,body:new Blob([r],{type:Yr})}}if(n===ce.Base64){var i=function(e){var t,n,r,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,u=0,c="",l=[];if(!e)return e;e=function(e){var t,n,r,i,o="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var s=e.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),I(a)||(n>t&&(o+=e.substring(t,n)),o+=a,t=n=i+1)}return n>t&&(o+=e.substring(t,e.length)),o}(e);do{t=(o=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,l[u++]=s.charAt(t)+s.charAt(n)+s.charAt(r)+s.charAt(i)}while(a<e.length);switch(c=l.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(JSON.stringify(t));return{contentType:"application/x-www-form-urlencoded",body:ei(i)}}return{contentType:"application/json",body:JSON.stringify(t)}}},ni=[];z&&ni.push({transport:"XHR",method:function(e){var t,n=new z;n.open(e.method||"GET",e.url,!0);var r=null!==(t=ti(e))&&void 0!==t?t:{},i=r.contentType,o=r.body;ee(e.headers,(function(e,t){n.setRequestHeader(t,e)})),i&&n.setRequestHeader("Content-Type",i),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState){var t,r={statusCode:n.status,text:n.responseText};if(200===n.status)try{r.json=JSON.parse(n.responseText)}catch(e){}null===(t=e.callback)||void 0===t||t.call(e,r)}},n.send(o)}}),G&&ni.push({transport:"fetch",method:function(e){var t,n,r=null!==(t=ti(e))&&void 0!==t?t:{},i=r.contentType,o=r.body,s=new Headers;ee(s,(function(e,t){s.append(t,e)})),i&&s.append("Content-Type",i);var a=e.url,u=null;if(W){var c=new W;u={signal:c.signal,timeout:setTimeout((function(){return c.abort()}),e.timeout)}}G(a,{method:(null==e?void 0:e.method)||"GET",headers:s,keepalive:"POST"===e.method,body:o,signal:null===(n=u)||void 0===n?void 0:n.signal}).then((function(t){return t.text().then((function(n){var r,i={statusCode:t.status,text:n};if(200===t.status)try{i.json=JSON.parse(n)}catch(e){K.error(e)}null===(r=e.callback)||void 0===r||r.call(e,i)}))})).catch((function(t){var n;K.error(t),null===(n=e.callback)||void 0===n||n.call(e,{statusCode:0,text:t})})).finally((function(){return u?clearTimeout(u.timeout):null}))}}),null!=q&&q.sendBeacon&&ni.push({transport:"sendBeacon",method:function(e){var t=Zr(e.url,{beacon:"1"});try{var n,r=null!==(n=ti(e))&&void 0!==n?n:{},i=r.contentType,o=r.body,s="string"==typeof o?new Blob([o],{type:i}):o;q.sendBeacon(t,s)}catch(e){}}});var ri,ii=["retriesPerformedSoFar"],oi=function(){function e(t){var n=this;d(this,e),p(this,"isPolling",!1),p(this,"pollIntervalMs",3e3),p(this,"queue",[]),this.instance=t,this.queue=[],this.areWeOnline=!0,!C(N)&&"onLine"in N.navigator&&(this.areWeOnline=N.navigator.onLine,N.addEventListener("online",(function(){n.areWeOnline=!0,n.flush()})),N.addEventListener("offline",(function(){n.areWeOnline=!1})))}return h(e,[{key:"retriableRequest",value:function(e){var t=this,n=e.retriesPerformedSoFar,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,ii);A(n)&&n>0&&(r.url=Zr(r.url,{retry_count:n})),this.instance._send_request(c(c({},r),{},{callback:function(e){var i;200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=n?n:0)<10?t.enqueue(c({retriesPerformedSoFar:n},r)):null===(i=r.callback)||void 0===i||i.call(r,e)}}))}},{key:"enqueue",value:function(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var n=function(e){var t=3e3*Math.pow(2,e),n=t/2,r=Math.min(18e5,t),i=(Math.random()-.5)*(r-n);return Math.ceil(r+i)}(t),r=Date.now()+n;this.queue.push({retryAt:r,requestOptions:e});var i="Enqueued failed request for retry in ".concat(n);navigator.onLine||(i+=" (Browser is offline)"),K.warn(i),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var e=this;this.poller&&clearTimeout(this.poller),this.poller=setTimeout((function(){e.areWeOnline&&e.queue.length>0&&e.flush(),e.poll()}),this.pollIntervalMs)}},{key:"flush",value:function(){var e=Date.now(),t=[],n=this.queue.filter((function(n){return n.retryAt<e||(t.push(n),!1)}));if(this.queue=t,n.length>0){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var o=r.value.requestOptions;this.retriableRequest(o)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"unload",value:function(){this.poller&&(clearTimeout(this.poller),this.poller=void 0);var e,t=y(this.queue);try{for(t.s();!(e=t.n()).done;){var n=e.value.requestOptions;try{this.instance._send_request(c(c({},n),{},{transport:"sendBeacon"}))}catch(e){K.error(e)}}}catch(e){t.e(e)}finally{t.f()}this.queue=[]}}]),e}(),si=1800,ai=function(){function e(t,n,r,i){var o;d(this,e),p(this,"_sessionIdChangedHandlers",[]),this.config=t,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=r||tt,this._windowIdGenerator=i||tt;var s=t.persistence_name||t.token,a=t.session_idle_timeout_seconds||si;if(A(a)?a>si?K.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):a<60&&K.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(K.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),a=si),this._sessionTimeoutMs=1e3*Math.min(Math.max(a,60),si),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var u=pt.parse(this._window_id_storage_key),c=pt.parse(this._primary_window_exists_storage_key);u&&!c?this._windowId=u:pt.remove(this._window_id_storage_key),pt.set(this._primary_window_exists_storage_key,!0)}if(null!==(o=this.config.bootstrap)&&void 0!==o&&o.sessionID)try{var l=function(e){var t=e.replace(/-/g,"");if(32!==t.length)throw new Error("Not a valid UUID");if("7"!==t[12])throw new Error("Not a UUIDv7");return parseInt(t.substring(0,12),16)}(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,(new Date).getTime(),l)}catch(e){K.error("Invalid sessionID in bootstrap",e)}this._listenToReloadWindow()}return h(e,[{key:"onSessionId",value:function(e){var t=this;return C(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){t._sessionIdChangedHandlers=t._sessionIdChangedHandlers.filter((function(t){return t!==e}))}}},{key:"_canUseSessionStorage",value:function(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&pt.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&pt.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?pt.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,t,n){e===this._sessionId&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register(p({},Oe,[t,e,n])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Oe];return x(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;null==N||N.addEventListener("beforeunload",(function(){e._canUseSessionStorage()&&pt.remove(e._primary_window_exists_storage_key)}))}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),n=v(this._getSessionId(),3),r=n[0],i=n[1],o=n[2],s=this._getWindowId(),a=o&&o>0&&Math.abs(t-o)>864e5,u=!1,c=!i,l=!e&&Math.abs(t-r)>this._sessionTimeoutMs;c||l||a?(i=this._sessionIdGenerator(),s=this._windowIdGenerator(),K.info("[SessionId] new session ID generated",{sessionId:i,windowId:s,changeReason:{noSessionId:c,activityTimeout:l,sessionPastMaximumLength:a}}),o=t,u=!0):s||(s=this._windowIdGenerator(),u=!0);var d=0===r||!e||a?t:r,f=0===o?(new Date).getTime():o;return this._setWindowId(s),this._setSessionId(i,d,f),u&&this._sessionIdChangedHandlers.forEach((function(e){return e(i,s)})),{sessionId:i,windowId:s,sessionStartTimestamp:f}}}]),e}();!function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"}(ri||(ri={}));var ui="i.posthog.com",ci=function(){function e(t){d(this,e),p(this,"_regionCache",{}),this.instance=t}return h(e,[{key:"apiHost",get:function(){return this.instance.config.api_host.trim().replace(/\/$/,"")}},{key:"uiHost",get:function(){var e,t=null===(e=this.instance.config.ui_host)||void 0===e?void 0:e.replace(/\/$/,"");return"https://app.posthog.com"===t?"https://us.posthog.com":t}},{key:"region",get:function(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=ri.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=ri.EU:this._regionCache[this.apiHost]=ri.CUSTOM),this._regionCache[this.apiHost]}},{key:"endpointFor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t&&(t="/"===t[0]?t:"/".concat(t)),"ui"===e)return(this.uiHost||this.apiHost.replace(".".concat(ui),".posthog.com"))+t;if(this.region===ri.CUSTOM)return this.apiHost+t;var n=ui+t;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(n);case"api":return"https://".concat(this.region,".").concat(n)}}},{key:"loadScript",value:function(e,t){if(this.instance.config.disable_external_dependency_loading)return K.warn("".concat(e," was requested but loading of external scripts is disabled.")),t("Loading of external scripts is disabled");var n="/"===e[0]?this.endpointFor("assets",e):e,r=function(){if(!U)return t("document not found");var e=U.createElement("script");e.type="text/javascript",e.src=n,e.onload=function(e){return t(void 0,e)},e.onerror=function(e){return t(e)};var r,i=U.querySelectorAll("body > script");i.length>0?null===(r=i[0].parentNode)||void 0===r||r.insertBefore(e,i[0]):U.body.appendChild(e)};null!=U&&U.body?r():null==U||U.addEventListener("DOMContentLoaded",r)}}]),e}(),li="/e/",di="[Exception Capture]",fi=function(){function e(t){var n,r,i=this;d(this,e),p(this,"originalOnUnhandledRejectionHandler",void 0),p(this,"startCapturing",(function(){var e;if(N&&i.isEnabled&&!i.hasHandlers&&(null===(e=N.onerror)||void 0===e||!e.__POSTHOG_INSTRUMENTED__)){var t=N.posthogErrorWrappingFunctions.wrapOnError,n=N.posthogErrorWrappingFunctions.wrapUnhandledRejection;if(t&&n)try{i.unwrapOnError=t(i.captureException.bind(i)),i.unwrapUnhandledRejection=n(i.captureException.bind(i))}catch(e){K.error(di+" failed to start",e),i.stopCapturing()}else K.error(di+" failed to load error wrapping functions - cannot start")}})),this.instance=t,this.remoteEnabled=!(null===(n=this.instance.persistence)||void 0===n||!n.props[_e]),this._endpoint=(null===(r=this.instance.persistence)||void 0===r?void 0:r.props[me])||li,this.startIfEnabled()}return h(e,[{key:"endpoint",get:function(){return this._endpoint}},{key:"isEnabled",get:function(){var e;return null!==(e=this.remoteEnabled)&&void 0!==e&&e}},{key:"isCapturing",get:function(){var e;return!(null==N||null===(e=N.onerror)||void 0===e||!e.__POSTHOG_INSTRUMENTED__)}},{key:"hasHandlers",get:function(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this.isCapturing&&(K.info(di+" enabled, starting..."),this.loadScript(this.startCapturing))}},{key:"loadScript",value:function(e){this.hasHandlers&&e(),this.instance.requestRouter.loadScript(this.instance.requestRouter.endpointFor("assets","/static/exception-autocapture.js?v=".concat(b.LIB_VERSION)),(function(t){if(t)return K.error(di+" failed to load script",t);e()}))}},{key:"stopCapturing",value:function(){var e,t;null===(e=this.unwrapOnError)||void 0===e||e.call(this),null===(t=this.unwrapUnhandledRejection)||void 0===t||t.call(this)}},{key:"afterDecideResponse",value:function(e){var t=e.autocaptureExceptions;this.remoteEnabled=!!t||!1,this._endpoint=R(t)&&t.endpoint||li,this.instance.persistence&&(this.instance.persistence.register(p({},_e,this.remoteEnabled)),this.instance.persistence.register(p({},me,this._endpoint))),this.startIfEnabled()}},{key:"captureException",value:function(e){var t=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(t,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.sendExceptionEvent(e)}},{key:"sendExceptionEvent",value:function(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent",_url:this.endpoint})}}]),e}(),hi="posthog-js";function pi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.organization,r=t.projectId,i=t.prefix,o=t.severityAllowList,s=void 0===o?["error"]:o;return function(t){var o,a,u,c,l,d;if("*"!==s&&!s.includes(t.level)||!e.__loaded)return t;t.tags||(t.tags={});var f=e.requestRouter.endpointFor("ui","/project/".concat(e.config.token,"/person/").concat(e.get_distinct_id()));t.tags["PostHog Person URL"]=f,e.sessionRecordingStarted()&&(t.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var h=(null===(o=t.exception)||void 0===o?void 0:o.values)||[],p={$exception_message:(null===(a=h[0])||void 0===a?void 0:a.value)||t.message,$exception_type:null===(u=h[0])||void 0===u?void 0:u.type,$exception_personURL:f,$exception_level:t.level,$sentry_event_id:t.event_id,$sentry_exception:t.exception,$sentry_exception_message:(null===(c=h[0])||void 0===c?void 0:c.value)||t.message,$sentry_exception_type:null===(l=h[0])||void 0===l?void 0:l.type,$sentry_tags:t.tags,$level:t.level};return n&&r&&(p.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+t.event_id),e.capture("$exception",p,{_url:(null===(d=e.exceptionObserver)||void 0===d?void 0:d.endpoint)||li}),t}}var vi=h((function e(t,n,r,i,o){d(this,e),this.name=hi,this.setupOnce=function(e){e(pi(t,{organization:n,projectId:r,prefix:i,severityAllowList:o}))}}));var gi,_i,mi,yi=function(){function e(t){d(this,e),this._instance=t}return h(e,[{key:"doPageView",value:function(e){var t,n=this._previousPageViewProperties(e);return this._currentPath=null!==(t=null==N?void 0:N.location.pathname)&&void 0!==t?t:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,n}},{key:"doPageLeave",value:function(e){return this._previousPageViewProperties(e)}},{key:"_previousPageViewProperties",value:function(e){var t=this._currentPath,n=this._prevPageviewTimestamp,r=this._instance.scrollManager.getContext();if(!n)return{};var i={};if(r){var o=r.maxScrollHeight,s=r.lastScrollY,a=r.maxScrollY,u=r.maxContentHeight,c=r.lastContentY,l=r.maxContentY;C(o)||C(s)||C(a)||C(u)||C(c)||C(l)||(o=Math.ceil(o),s=Math.ceil(s),a=Math.ceil(a),u=Math.ceil(u),c=Math.ceil(c),l=Math.ceil(l),i={$prev_pageview_last_scroll:s,$prev_pageview_last_scroll_percentage:o<=1?1:bi(s/o,0,1),$prev_pageview_max_scroll:a,$prev_pageview_max_scroll_percentage:o<=1?1:bi(a/o,0,1),$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:u<=1?1:bi(c/u,0,1),$prev_pageview_max_content:l,$prev_pageview_max_content_percentage:u<=1?1:bi(l/u,0,1)})}return t&&(i.$prev_pageview_pathname=t),n&&(i.$prev_pageview_duration=(e.getTime()-n.getTime())/1e3),i}}]),e}();function bi(e,t,n){return Math.max(t,Math.min(e,n))}!function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(gi||(gi={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(_i||(_i={})),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}(mi||(mi={}));var wi=function(){function e(){d(this,e),p(this,"events",{}),this.events={}}return h(e,[{key:"on",value:function(e,t){var n=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){n.events[e]=n.events[e].filter((function(e){return e!==t}))}}},{key:"emit",value:function(e,t){var n,r=y(this.events[e]||[]);try{for(r.s();!(n=r.n()).done;)(0,n.value)(t)}catch(e){r.e(e)}finally{r.f()}var i,o=y(this.events["*"]||[]);try{for(o.s();!(i=o.n()).done;)(0,i.value)(e,t)}catch(e){o.e(e)}finally{o.f()}}}]),e}(),ki=function(){function e(t){var n=this;d(this,e),p(this,"_debugEventEmitter",new wi),p(this,"checkStep",(function(e,t){return n.checkStepEvent(e,t)&&n.checkStepUrl(e,t)&&n.checkStepElement(e,t)})),p(this,"checkStepEvent",(function(e,t){return null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event)})),this.instance=t,this.actionEvents=new Set,this.actionRegistry=new Set}return h(e,[{key:"init",value:function(){var e,t,n=this;C(null===(e=this.instance)||void 0===e?void 0:e._addCaptureHook)||(null===(t=this.instance)||void 0===t||t._addCaptureHook((function(e,t){n.on(e,t)})))}},{key:"register",value:function(e){var t,n,r=this;if(!C(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)&&(e.forEach((function(e){var t,n;null===(t=r.actionRegistry)||void 0===t||t.add(e),null===(n=e.steps)||void 0===n||n.forEach((function(e){var t;null===(t=r.actionEvents)||void 0===t||t.add((null==e?void 0:e.event)||"")}))})),null!==(n=this.instance)&&void 0!==n&&n.autocapture)){var i,o=new Set;e.forEach((function(e){var t;null===(t=e.steps)||void 0===t||t.forEach((function(e){null!=e&&e.selector&&o.add(null==e?void 0:e.selector)}))})),null===(i=this.instance)||void 0===i||i.autocapture.setElementSelectors(o)}}},{key:"on",value:function(e,t){var n,r=this;null!=t&&0!=e.length&&(this.actionEvents.has(e)||this.actionEvents.has(null==t?void 0:t.event))&&this.actionRegistry&&(null===(n=this.actionRegistry)||void 0===n?void 0:n.size)>0&&this.actionRegistry.forEach((function(e){r.checkAction(t,e)&&r._debugEventEmitter.emit("actionCaptured",e.name)}))}},{key:"_addActionHook",value:function(e){this.onAction("actionCaptured",(function(t){return e(t)}))}},{key:"checkAction",value:function(e,t){if(null==(null==t?void 0:t.steps))return!1;var n,r=y(t.steps);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(this.checkStep(e,i))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"onAction",value:function(e,t){return this._debugEventEmitter.on(e,t)}},{key:"checkStepUrl",value:function(t,n){if(null!=n&&n.url){var r,i=null==t||null===(r=t.properties)||void 0===r?void 0:r.$current_url;if(!i||"string"!=typeof i)return!1;if(!e.matchString(i,null==n?void 0:n.url,(null==n?void 0:n.url_matching)||"contains"))return!1}return!0}},{key:"checkStepElement",value:function(t,n){if((null!=n&&n.href||null!=n&&n.tag_name||null!=n&&n.text)&&!this.getElementsList(t).some((function(t){return!(null!=n&&n.href&&!e.matchString(t.href||"",null==n?void 0:n.href,(null==n?void 0:n.href_matching)||"exact")||null!=n&&n.tag_name&&t.tag_name!==(null==n?void 0:n.tag_name)||null!=n&&n.text&&!e.matchString(t.text||"",null==n?void 0:n.text,(null==n?void 0:n.text_matching)||"exact")&&!e.matchString(t.$el_text||"",null==n?void 0:n.text,(null==n?void 0:n.text_matching)||"exact"))})))return!1;if(null!=n&&n.selector){var r,i=null==t||null===(r=t.properties)||void 0===r?void 0:r.$element_selectors;if(!i)return!1;if(!i.includes(null==n?void 0:n.selector))return!1}return!0}},{key:"getElementsList",value:function(e){return null==(null==e?void 0:e.properties.$elements)?[]:null==e?void 0:e.properties.$elements}}],[{key:"matchString",value:function(t,n,r){switch(r){case"regex":return!!N&&_t(t,n);case"exact":return n===t;case"contains":var i=e.escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return _t(t,i);default:return!1}}},{key:"escapeStringRegexp",value:function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}}]),e}(),Si=function(){function e(t){d(this,e),this.instance=t,this.eventToSurveys=new Map,this.actionToSurveys=new Map}return h(e,[{key:"register",value:function(e){var t;C(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}},{key:"setupActionBasedSurveys",value:function(e){var t=this,n=e.filter((function(e){var t,n,r,i;return(null===(t=e.conditions)||void 0===t?void 0:t.actions)&&(null===(n=e.conditions)||void 0===n||null===(r=n.actions)||void 0===r||null===(i=r.values)||void 0===i?void 0:i.length)>0}));0!==n.length&&(null==this.actionMatcher&&(this.actionMatcher=new ki(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook((function(e){t.onAction(e)}))),n.forEach((function(e){var n,r,i,o,s,a,u,c,l,d;e.conditions&&null!==(n=e.conditions)&&void 0!==n&&n.actions&&null!==(r=e.conditions)&&void 0!==r&&null!==(i=r.actions)&&void 0!==i&&i.values&&(null===(o=e.conditions)||void 0===o||null===(s=o.actions)||void 0===s||null===(a=s.values)||void 0===a?void 0:a.length)>0&&(null===(u=t.actionMatcher)||void 0===u||u.register(e.conditions.actions.values),null===(c=e.conditions)||void 0===c||null===(l=c.actions)||void 0===l||null===(d=l.values)||void 0===d||d.forEach((function(n){if(n&&n.name){var r=t.actionToSurveys.get(n.name);r&&r.push(e.id),t.actionToSurveys.set(n.name,r||[e.id])}})))})))}},{key:"setupEventBasedSurveys",value:function(e){var t,n=this;0!==e.filter((function(e){var t,n,r,i;return(null===(t=e.conditions)||void 0===t?void 0:t.events)&&(null===(n=e.conditions)||void 0===n||null===(r=n.events)||void 0===r||null===(i=r.values)||void 0===i?void 0:i.length)>0})).length&&(null===(t=this.instance)||void 0===t||t._addCaptureHook((function(e,t){n.onEvent(e,t)})),e.forEach((function(e){var t,r,i;null===(t=e.conditions)||void 0===t||null===(r=t.events)||void 0===r||null===(i=r.values)||void 0===i||i.forEach((function(t){if(t&&t.name){var r=n.eventToSurveys.get(t.name);r&&r.push(e.id),n.eventToSurveys.set(t.name,r||[e.id])}}))})))}},{key:"onEvent",value:function(t,n){var r,i,o=(null===(r=this.instance)||void 0===r||null===(i=r.persistence)||void 0===i?void 0:i.props[Fe])||[];if(e.SURVEY_SHOWN_EVENT_NAME==t&&n&&o.length>0){var s,a=null==n||null===(s=n.properties)||void 0===s?void 0:s.$survey_id;if(a){var u=o.indexOf(a);u>=0&&(o.splice(u,1),this._updateActivatedSurveys(o))}}else this.eventToSurveys.has(t)&&this._updateActivatedSurveys(o.concat(this.eventToSurveys.get(t)||[]))}},{key:"onAction",value:function(e){var t,n,r=(null===(t=this.instance)||void 0===t||null===(n=t.persistence)||void 0===n?void 0:n.props[Fe])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(r.concat(this.actionToSurveys.get(e)||[]))}},{key:"_updateActivatedSurveys",value:function(e){var t,n;null===(t=this.instance)||void 0===t||null===(n=t.persistence)||void 0===n||n.register(p({},Fe,g(new Set(e))))}},{key:"getSurveys",value:function(){var e,t;return(null===(e=this.instance)||void 0===e||null===(t=e.persistence)||void 0===t?void 0:t.props[Fe])||[]}},{key:"getEventToSurveys",value:function(){return this.eventToSurveys}},{key:"_getActionMatcher",value:function(){return this.actionMatcher}}]),e}();p(Si,"SURVEY_SHOWN_EVENT_NAME","survey shown");var Ei="[Surveys]",xi={icontains:function(e){return!!N&&N.location.href.toLowerCase().indexOf(e.toLowerCase())>-1},not_icontains:function(e){return!!N&&-1===N.location.href.toLowerCase().indexOf(e.toLowerCase())},regex:function(e){return!!N&&_t(N.location.href,e)},not_regex:function(e){return!!N&&!_t(N.location.href,e)},exact:function(e){return(null==N?void 0:N.location.href)===e},is_not:function(e){return(null==N?void 0:N.location.href)!==e}},Oi=function(){function e(t){d(this,e),this.instance=t,this._surveyEventReceiver=null}return h(e,[{key:"afterDecideResponse",value:function(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}},{key:"loadIfEnabled",value:function(){var e=this,t=null==X?void 0:X.extendPostHogWithSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||t||(null==this._surveyEventReceiver&&(this._surveyEventReceiver=new Si(this.instance)),this.instance.requestRouter.loadScript("/static/surveys.js",(function(t){if(t)return K.error(Ei,"Could not load surveys script",t);e._surveyManager=X.extendPostHogWithSurveys(e.instance)})))}},{key:"getSurveys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.config.disable_surveys)return e([]);null==this._surveyEventReceiver&&(this._surveyEventReceiver=new Si(this.instance));var r=this.instance.get_property(Ie);if(r&&!n)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:function(n){var r;if(200!==n.statusCode||!n.json)return e([]);var i,o=n.json.surveys||[],s=o.filter((function(e){var t,n,r,i,o,s,a,u,c,l,d,f;return(null===(t=e.conditions)||void 0===t?void 0:t.events)&&(null===(n=e.conditions)||void 0===n||null===(r=n.events)||void 0===r?void 0:r.values)&&(null===(i=e.conditions)||void 0===i||null===(o=i.events)||void 0===o||null===(s=o.values)||void 0===s?void 0:s.length)>0||(null===(a=e.conditions)||void 0===a?void 0:a.actions)&&(null===(u=e.conditions)||void 0===u||null===(c=u.actions)||void 0===c?void 0:c.values)&&(null===(l=e.conditions)||void 0===l||null===(d=l.actions)||void 0===d||null===(f=d.values)||void 0===f?void 0:f.length)>0}));return s.length>0&&(null===(i=t._surveyEventReceiver)||void 0===i||i.register(s)),null===(r=t.instance.persistence)||void 0===r||r.register(p({},Ie,o)),e(o)}})}},{key:"getActiveMatchingSurveys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys((function(n){var r,i=n.filter((function(e){return!(!e.start_date||e.end_date)})).filter((function(e){var t,n,r,i;if(!e.conditions)return!0;var o=null===(t=e.conditions)||void 0===t||!t.url||xi[null!==(n=null===(r=e.conditions)||void 0===r?void 0:r.urlMatchType)&&void 0!==n?n:"icontains"](e.conditions.url),s=null===(i=e.conditions)||void 0===i||!i.selector||(null==U?void 0:U.querySelector(e.conditions.selector));return o&&s})),o=null===(r=t._surveyEventReceiver)||void 0===r?void 0:r.getSurveys(),s=i.filter((function(e){var n,r,i,s,a,u,c,l,d,f;if(!e.linked_flag_key&&!e.targeting_flag_key&&!e.internal_targeting_flag_key)return!0;var h=!e.linked_flag_key||t.instance.featureFlags.isFeatureEnabled(e.linked_flag_key),p=!e.targeting_flag_key||t.instance.featureFlags.isFeatureEnabled(e.targeting_flag_key),v=(null===(n=e.conditions)||void 0===n?void 0:n.events)&&(null===(r=e.conditions)||void 0===r||null===(i=r.events)||void 0===i?void 0:i.values)&&(null===(s=e.conditions)||void 0===s||null===(a=s.events)||void 0===a?void 0:a.values.length)>0,g=(null===(u=e.conditions)||void 0===u?void 0:u.actions)&&(null===(c=e.conditions)||void 0===c||null===(l=c.actions)||void 0===l?void 0:l.values)&&(null===(d=e.conditions)||void 0===d||null===(f=d.actions)||void 0===f?void 0:f.values.length)>0,_=!v&&!g||(null==o?void 0:o.includes(e.id)),m=t._canActivateRepeatedly(e),y=!(e.internal_targeting_flag_key&&!m)||t.instance.featureFlags.isFeatureEnabled(e.internal_targeting_flag_key);return h&&p&&y&&_}));return e(s)}),n)}},{key:"getNextSurveyStep",value:function(e,t,n){var r,i=e.questions[t],o=t+1;if(null===(r=i.branching)||void 0===r||!r.type)return t===e.questions.length-1?mi.End:o;if(i.branching.type===mi.End)return mi.End;if(i.branching.type===mi.SpecificQuestion){if(Number.isInteger(i.branching.index))return i.branching.index}else if(i.branching.type===mi.ResponseBased){if(i.type===_i.SingleChoice){var s,a,u=i.choices.indexOf("".concat(n));if(null!==(s=i.branching)&&void 0!==s&&null!==(a=s.responseValues)&&void 0!==a&&a.hasOwnProperty(u)){var c=i.branching.responseValues[u];return Number.isInteger(c)?c:c===mi.End?mi.End:o}}else if(i.type===_i.Rating){var l,d;if("number"!=typeof n||!Number.isInteger(n))throw new Error("The response type must be an integer");var f=function(e,t){if(3===t){if(e<1||e>3)throw new Error("The response must be in range 1-3");return 1===e?"negative":2===e?"neutral":"positive"}if(5===t){if(e<1||e>5)throw new Error("The response must be in range 1-5");return e<=2?"negative":3===e?"neutral":"positive"}if(10===t){if(e<0||e>10)throw new Error("The response must be in range 0-10");return e<=6?"detractors":e<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 10")}(n,i.scale);if(null!==(l=i.branching)&&void 0!==l&&null!==(d=l.responseValues)&&void 0!==d&&d.hasOwnProperty(f)){var h=i.branching.responseValues[f];return Number.isInteger(h)?h:h===mi.End?mi.End:o}}return o}return K.warn(Ei,"Falling back to next question index due to unexpected branching type"),o}},{key:"_canActivateRepeatedly",value:function(e){return F(X.__PosthogExtensions__.canActivateRepeatedly)&&K.warn(Ei,"canActivateRepeatedly is not defined, must init before calling"),X.__PosthogExtensions__.canActivateRepeatedly(e)}},{key:"canRenderSurvey",value:function(e){var t=this;F(this._surveyManager)?K.warn(Ei,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys((function(n){var r=n.filter((function(t){return t.id===e}))[0];t._surveyManager.canRenderSurvey(r)}))}},{key:"renderSurvey",value:function(e,t){var n=this;F(this._surveyManager)?K.warn(Ei,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys((function(r){var i=r.filter((function(t){return t.id===e}))[0];n._surveyManager.renderSurvey(i,null==U?void 0:U.querySelector(t))}))}}]),e}(),Ri=function(){function e(t){var n,r,i=this;d(this,e),p(this,"serverLimits",{}),p(this,"lastEventRateLimited",!1),p(this,"checkForLimiting",(function(e){var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach((function(e){K.info("[RateLimiter] ".concat(e||"events"," is quota limited.")),i.serverLimits[e]=(new Date).getTime()+6e4}))}catch(e){return void K.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(null==e?void 0:e.message,'"'),{text:t})}})),this.instance=t,this.captureEventsPerSecond=(null===(n=t.config.rate_limiting)||void 0===n?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null===(r=t.config.rate_limiting)||void 0===r?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}return h(e,[{key:"clientRateLimitContext",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=(new Date).getTime(),o=null!==(e=null===(t=this.instance.persistence)||void 0===t?void 0:t.get_property(je))&&void 0!==e?e:{tokens:this.captureEventsBurstLimit,last:i};o.tokens+=(i-o.last)/1e3*this.captureEventsPerSecond,o.last=i,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var s=o.tokens<1;return s||r||(o.tokens=Math.max(0,o.tokens-1)),!s||this.lastEventRateLimited||r||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=s,null===(n=this.instance.persistence)||void 0===n||n.set_property(je,o),{isRateLimited:s,remainingTokens:o.tokens}}},{key:"isServerRateLimited",value:function(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}]),e}(),Mi=function(){return c({initialPathName:(null==H?void 0:H.pathname)||"",referringDomain:_n.referringDomain()},_n.campaignParams())},Ci=function(){function e(t,n,r){var i=this;d(this,e),p(this,"_onSessionIdCallback",(function(e){var t=i._getStoredProps();if(!t||t.sessionId!==e){var n={sessionId:e,props:i._sessionSourceParamGenerator()};i._persistence.register(p({},Ne,n))}})),this._sessionIdManager=t,this._persistence=n,this._sessionSourceParamGenerator=r||Mi,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return h(e,[{key:"_getStoredProps",value:function(){return this._persistence.props[Ne]}},{key:"getSessionProps",value:function(){var e,t=null===(e=this._getStoredProps())||void 0===e?void 0:e.props;return t?{$client_session_initial_referring_host:t.referringDomain,$client_session_initial_pathname:t.initialPathName,$client_session_initial_utm_source:t.utm_source,$client_session_initial_utm_campaign:t.utm_campaign,$client_session_initial_utm_medium:t.utm_medium,$client_session_initial_utm_content:t.utm_content,$client_session_initial_utm_term:t.utm_term}:{}}}]),e}(),Pi=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],Ti=function(e,t){if(!e)return!1;var n=e.toLowerCase();return Pi.concat(t||[]).some((function(e){var t=e.toLowerCase();return-1!==n.indexOf(t)}))},Ii=function(){function e(){d(this,e),this.clicks=[]}return h(e,[{key:"isRageClick",value:function(e,t,n){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<30&&n-r.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}]),e}();function Fi(e){var t;return e.id===Ue||!(null===(t=e.closest)||void 0===t||!t.call(e,"#"+Ue))}var Ai=function(){function e(t){var n,r=this;d(this,e),p(this,"rageclicks",new Ii),p(this,"_enabledServerSide",!1),p(this,"_initialized",!1),p(this,"_flushInterval",null),this.instance=t,this._enabledServerSide=!(null===(n=this.instance.persistence)||void 0===n||!n.props[ge]),null==N||N.addEventListener("beforeunload",(function(){r.flush()}))}return h(e,[{key:"flushIntervalMilliseconds",get:function(){var e=5e3;return R(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}},{key:"isEnabled",get:function(){return C(this.instance.config.capture_heatmaps)?C(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}},{key:"startIfEnabled",value:function(){if(this.isEnabled){if(this._initialized)return;K.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e;clearInterval(null!==(e=this._flushInterval)&&void 0!==e?e:void 0),this.getAndClearBuffer()}}},{key:"afterDecideResponse",value:function(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register(p({},ge,t)),this._enabledServerSide=t,this.startIfEnabled()}},{key:"getAndClearBuffer",value:function(){var e=this.buffer;return this.buffer=void 0,e}},{key:"_setupListeners",value:function(){var e=this;N&&U&&(le(U,"click",(function(t){return e._onClick(t||(null==N?void 0:N.event))}),!1,!0),le(U,"mousemove",(function(t){return e._onMouseMove(t||(null==N?void 0:N.event))}),!1,!0),this._initialized=!0)}},{key:"_getProperties",value:function(e,t){var n=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),o=function(e,t,n){for(var r=e;r&&!In(r,"body");){if(r===n)return!1;if(ne(t,null==N?void 0:N.getComputedStyle(r).position))return!0;r=Nn(r)}return!1}(e.target,["fixed","sticky"],i);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:n),target_fixed:o,type:t}}},{key:"_onClick",value:function(e){var t;if(!Fi(e.target)){var n=this._getProperties(e,"click");null!==(t=this.rageclicks)&&void 0!==t&&t.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._capture(c(c({},n),{},{type:"rageclick"})),this._capture(n)}}},{key:"_onMouseMove",value:function(e){var t=this;Fi(e.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout((function(){t._capture(t._getProperties(e,"mousemove"))}),500))}},{key:"_capture",value:function(e){if(N){var t=N.location.href;this.buffer=this.buffer||{},this.buffer[t]||(this.buffer[t]=[]),this.buffer[t].push(e)}}},{key:"flush",value:function(){this.buffer&&!M(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}]),e}(),Li=function(){function e(t){var n=this;d(this,e),p(this,"_updateScrollData",(function(){var e,t,r,i;n.context||(n.context={});var o=n.scrollElement(),s=n.scrollY(),a=o?Math.max(0,o.scrollHeight-o.clientHeight):0,u=s+((null==o?void 0:o.clientHeight)||0),c=(null==o?void 0:o.scrollHeight)||0;n.context.lastScrollY=Math.ceil(s),n.context.maxScrollY=Math.max(s,null!==(e=n.context.maxScrollY)&&void 0!==e?e:0),n.context.maxScrollHeight=Math.max(a,null!==(t=n.context.maxScrollHeight)&&void 0!==t?t:0),n.context.lastContentY=u,n.context.maxContentY=Math.max(u,null!==(r=n.context.maxContentY)&&void 0!==r?r:0),n.context.maxContentHeight=Math.max(c,null!==(i=n.context.maxContentHeight)&&void 0!==i?i:0)})),this.instance=t}return h(e,[{key:"getContext",value:function(){return this.context}},{key:"resetContext",value:function(){var e=this.context;return setTimeout(this._updateScrollData,0),e}},{key:"startMeasuringScrollPosition",value:function(){null==N||N.addEventListener("scroll",this._updateScrollData,!0),null==N||N.addEventListener("scrollend",this._updateScrollData,!0),null==N||N.addEventListener("resize",this._updateScrollData)}},{key:"scrollElement",value:function(){if(!this.instance.config.scroll_root_selector)return null==N?void 0:N.document.documentElement;var e,t=y(x(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector]);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=null==N?void 0:N.document.querySelector(n);if(r)return r}}catch(e){t.e(e)}finally{t.f()}}},{key:"scrollY",value:function(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return N&&(N.scrollY||N.pageYOffset||N.document.documentElement.scrollTop)||0}},{key:"scrollX",value:function(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return N&&(N.scrollX||N.pageXOffset||N.document.documentElement.scrollLeft)||0}}]),e}(),Ni="$copy_autocapture";function ji(e,t){return t.length>e?t.slice(0,e)+"...":t}var Di,$i=function(){function e(t){d(this,e),p(this,"_initialized",!1),p(this,"_isDisabledServerSide",null),p(this,"rageclicks",new Ii),p(this,"_elementsChainAsString",!1),this.instance=t,this._elementSelectors=null}return h(e,[{key:"config",get:function(){var e,t,n=R(this.instance.config.autocapture)?this.instance.config.autocapture:{};return n.url_allowlist=null===(e=n.url_allowlist)||void 0===e?void 0:e.map((function(e){return new RegExp(e)})),n.url_ignorelist=null===(t=n.url_ignorelist)||void 0===t?void 0:t.map((function(e){return new RegExp(e)})),n}},{key:"_addDomEventHandlers",value:function(){var e=this;if(this.isBrowserSupported()){if(N&&U){var t=function(t){t=t||(null==N?void 0:N.event);try{e._captureEvent(t)}catch(e){K.error("Failed to capture event",e)}},n=function(t){t=t||(null==N?void 0:N.event),e._captureEvent(t,Ni)};le(U,"submit",t,!1,!0),le(U,"change",t,!1,!0),le(U,"click",t,!1,!0),this.config.capture_copied_text&&(le(U,"copy",n,!1,!0),le(U,"cut",n,!1,!0))}}else K.info("Disabling Automatic Event Collection because this browser is not supported")}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}},{key:"afterDecideResponse",value:function(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register(p({},ve,!!e.autocapture_opt_out)),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}},{key:"setElementSelectors",value:function(e){this._elementSelectors=e}},{key:"getElementSelectors",value:function(e){var t,n=[];return null===(t=this._elementSelectors)||void 0===t||t.forEach((function(t){var r=null==U?void 0:U.querySelectorAll(t);null==r||r.forEach((function(r){e===r&&n.push(t)}))})),n}},{key:"isEnabled",get:function(){var e,t,n=null===(e=this.instance.persistence)||void 0===e?void 0:e.props[ve],r=this._isDisabledServerSide;if(I(r)&&!L(n)&&!this.instance.config.advanced_disable_decide)return!1;var i=null!==(t=this._isDisabledServerSide)&&void 0!==t?t:!!n;return!!this.instance.config.autocapture&&!i}},{key:"_previousElementSibling",value:function(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!Tn(t));return t}},{key:"_getAugmentPropertiesFromElement",value:function(e){if(!Dn(e))return{};var t={};return ee(e.attributes,(function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var n=e.name.replace("data-ph-capture-attribute-",""),r=e.value;n&&r&&Wn(r)&&(t[n]=r)}})),t}},{key:"_getPropertiesFromElement",value:function(e,t,n){var r,i=e.tagName.toLowerCase(),o={tag_name:i};Ln.indexOf(i)>-1&&!n&&("a"===i.toLowerCase()||"button"===i.toLowerCase()?o.$el_text=ji(1024,Vn(e)):o.$el_text=ji(1024,Pn(e)));var s=Mn(e);s.length>0&&(o.classes=s.filter((function(e){return""!==e})));var a=null===(r=this.config)||void 0===r?void 0:r.element_attribute_ignorelist;ee(e.attributes,(function(n){var r;if((!$n(e)||-1!==["name","id","class","aria-label"].indexOf(n.name))&&(null==a||!a.includes(n.name))&&!t&&Wn(n.value)&&(r=n.name,!P(r)||"_ngcontent"!==r.substring(0,10)&&"_nghost"!==r.substring(0,7))){var i=n.value;"class"===n.name&&(i=On(i).join(" ")),o["attr__"+n.name]=ji(1024,i)}}));for(var u=1,c=1,l=e;l=this._previousElementSibling(l);)u++,l.tagName===e.tagName&&c++;return o.nth_child=u,o.nth_of_type=c,o}},{key:"_getDefaultProperties",value:function(e){return{$event_type:e,$ce_version:1}}},{key:"_getEventTarget",value:function(e){return C(e.target)?e.srcElement||null:null!==(t=e.target)&&void 0!==t&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}},{key:"_captureEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$autocapture";if(this.isEnabled){var r,i=this._getEventTarget(e);Fn(i)&&(i=i.parentNode||null),"$autocapture"===n&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!==(r=this.rageclicks)&&void 0!==r&&r.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._captureEvent(e,"$rageclick");var o=n===Ni;if(i&&jn(i,e,this.config,o,o?["copy","cut"]:void 0)){for(var s,a,u=[i],c=i;c.parentNode&&!In(c,"body");)An(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var l,d,f=[],h={},p=!1;if(ee(u,(function(e){var n=Dn(e);"a"===e.tagName.toLowerCase()&&(l=e.getAttribute("href"),l=n&&Wn(l)&&l),ne(Mn(e),"ph-no-capture")&&(p=!0),f.push(t._getPropertiesFromElement(e,t.instance.config.mask_all_element_attributes,t.instance.config.mask_all_text));var r=t._getAugmentPropertiesFromElement(e);te(h,r)})),this.instance.config.mask_all_text||("a"===i.tagName.toLowerCase()||"button"===i.tagName.toLowerCase()?f[0].$el_text=Vn(i):f[0].$el_text=Pn(i)),l){var v,g;f[0].attr__href=l;var _=null===(v=gt(l))||void 0===v?void 0:v.host,m=null==N||null===(g=N.location)||void 0===g?void 0:g.host;_&&m&&_!==m&&(d=l)}if(p)return!1;var y=te(this._getDefaultProperties(e.type),this._elementsChainAsString?{$elements_chain:Jn(f)}:{$elements:f},null!==(s=f[0])&&void 0!==s&&s.$el_text?{$el_text:null===(a=f[0])||void 0===a?void 0:a.$el_text}:{},d&&"click"===e.type?{$external_click_url:d}:{},h),b=this.getElementSelectors(i);if(b&&b.length>0&&(y.$element_selectors=b),n===Ni){var w,k=Cn(null==N||null===(w=N.getSelection())||void 0===w?void 0:w.toString()),S=e.type||"clipboard";if(!k)return!1;y.$selected_content=k,y.$copy_type=S}return this.instance.capture(n,y),!0}}}},{key:"isBrowserSupported",value:function(){return O(null==U?void 0:U.querySelectorAll)}}]),e}(),Bi=function(){function e(t){var n=this;d(this,e),p(this,"_restoreXHRPatch",void 0),p(this,"_restoreFetchPatch",void 0),p(this,"_startCapturing",(function(){C(n._restoreXHRPatch)&&X.postHogTracingHeadersPatchFns._patchXHR(n.instance.sessionManager),C(n._restoreFetchPatch)&&X.postHogTracingHeadersPatchFns._patchFetch(n.instance.sessionManager)})),this.instance=t}return h(e,[{key:"_loadScript",value:function(e){X.postHogTracingHeadersPatchFns&&e(),this.instance.requestRouter.loadScript("/static/tracing-headers.js?v=".concat(b.LIB_VERSION),(function(t){if(t)return K.error("[TRACING-HEADERS] failed to load script",t);e()}))}},{key:"startIfEnabledOrStop",value:function(){var e,t;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):(null===(e=this._restoreXHRPatch)||void 0===e||e.call(this),null===(t=this._restoreFetchPatch)||void 0===t||t.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}]),e}();!function(e){e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED"}(Di||(Di={}));var qi=function(){function e(t){d(this,e),this.instance=t}return h(e,[{key:"config",get:function(){return this.instance.config}},{key:"consent",get:function(){return this.getDnt()?Di.DENIED:this.storedConsent}},{key:"isOptedOut",value:function(){return this.consent===Di.DENIED||this.consent===Di.PENDING&&this.config.opt_out_capturing_by_default}},{key:"isOptedIn",value:function(){return!this.isOptedOut()}},{key:"optInOut",value:function(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}},{key:"reset",value:function(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}},{key:"storageKey",get:function(){var e=this.instance.config,t=e.token;return(e.opt_out_capturing_cookie_prefix||"__ph_opt_in_out_")+t}},{key:"storedConsent",get:function(){var e=this.storage.get(this.storageKey);return"1"===e?Di.GRANTED:"0"===e?Di.DENIED:Di.PENDING}},{key:"storage",get:function(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage="localStorage"===e?ut:st;var t="localStorage"===e?st:ut;t.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut("1"===t.get(this.storageKey)),t.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}},{key:"getDnt",value:function(){return!!this.config.respect_dnt&&!!de([null==q?void 0:q.doNotTrack,null==q?void 0:q.msDoNotTrack,X.doNotTrack],(function(e){return ne([!0,1,"1","yes"],e)}))}}]),e}(),Ui=9e5,Hi="[Web Vitals]",Gi=function(){function e(t){var n,r=this;d(this,e),p(this,"_enabledServerSide",!1),p(this,"_initialized",!1),p(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),p(this,"_flushToCapture",(function(){clearTimeout(r._delayedFlushTimer),0!==r.buffer.metrics.length&&(r.instance.capture("$web_vitals",r.buffer.metrics.reduce((function(e,t){var n;return c(c({},e),{},(p(n={},"$web_vitals_".concat(t.name,"_event"),c({},t)),p(n,"$web_vitals_".concat(t.name,"_value"),t.value),n))}),{})),r.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})})),p(this,"_addToBuffer",(function(e){var t,n=null===(t=r.instance.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0);if(C(n))K.error(Hi+"Could not read session ID. Dropping metrics!");else{r.buffer=r.buffer||{};var i=r._currentURL();C(i)||(F(null==e?void 0:e.name)||F(null==e?void 0:e.value)?K.error(Hi+"Invalid metric received",e):r._maxAllowedValue&&e.value>=r._maxAllowedValue?K.error(Hi+"Ignoring metric with value >= "+r._maxAllowedValue,e):(r.buffer.url!==i&&(r._flushToCapture(),r._delayedFlushTimer=setTimeout(r._flushToCapture,8e3)),C(r.buffer.url)&&(r.buffer.url=i),r.buffer.firstMetricTimestamp=C(r.buffer.firstMetricTimestamp)?Date.now():r.buffer.firstMetricTimestamp,r.buffer.metrics.push(c(c({},e),{},{$current_url:i,$session_id:n.sessionId,$window_id:n.windowId,timestamp:Date.now()})),4===r.buffer.metrics.length&&r._flushToCapture()))}})),p(this,"_startCapturing",(function(){var e=X.postHogWebVitalsCallbacks,t=e.onLCP,n=e.onCLS,i=e.onFCP,o=e.onINP;t&&n&&i&&o?(t(r._addToBuffer),n(r._addToBuffer),i(r._addToBuffer),o(r._addToBuffer),r._initialized=!0):K.error(Hi+"web vitals callbacks not loaded - not starting")})),this.instance=t,this._enabledServerSide=!(null===(n=this.instance.persistence)||void 0===n||!n.props[ye]),this.startIfEnabled()}return h(e,[{key:"_maxAllowedValue",get:function(){var e=R(this.instance.config.capture_performance)&&A(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:Ui;return 0<e&&e<=6e4?Ui:e}},{key:"isEnabled",get:function(){var e=R(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return L(e)?e:this._enabledServerSide}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(K.info(Hi+" enabled, starting..."),this.loadScript(this._startCapturing))}},{key:"afterDecideResponse",value:function(e){var t=R(e.capturePerformance)&&!!e.capturePerformance.web_vitals;this.instance.persistence&&this.instance.persistence.register(p({},ye,t)),this._enabledServerSide=t,this.startIfEnabled()}},{key:"loadScript",value:function(e){N.postHogWebVitalsCallbacks&&e(),this.instance.requestRouter.loadScript(this.instance.requestRouter.endpointFor("assets","/static/web-vitals.js?v=".concat(b.LIB_VERSION)),(function(t){t?K.error(Hi+" failed to load script",t):e()}))}},{key:"_currentURL",value:function(){var e=N?N.location.href:void 0;return e||K.error(Hi+"Could not determine current URL"),e}}]),e}(),zi={},Wi=function(){},Vi="posthog",Xi=!Qr&&-1===(null==V?void 0:V.indexOf("MSIE"))&&-1===(null==V?void 0:V.indexOf("Mozilla")),Ji=function(){var e,t,n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(t=null==U?void 0:U.location,n=null==t?void 0:t.hostname,!!P(n)&&"herokuapp.com"!==n.split(".").slice(-2).join(".")),persistence:"localStorage+cookie",persistence_name:"",loaded:Wi,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:H&&P(null==H?void 0:H.search)&&-1!==H.search.indexOf("__posthog_debug=true")||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==N||null===(e=N.location)||void 0===e?void 0:e.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:function(e){var t="Bad HTTP status: "+e.statusCode+" "+e.text;K.error(t)},get_device_id:function(e){return e},_onCapture:Wi,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"always",__add_tracing_headers:!1}},Ki=function(e){var t={};C(e.process_person)||(t.person_profiles=e.process_person),C(e.xhr_headers)||(t.request_headers=e.xhr_headers),C(e.cookie_name)||(t.persistence_name=e.cookie_name),C(e.disable_cookie)||(t.disable_persistence=e.disable_cookie);var n=te({},t,e);return x(e.property_blacklist)&&(C(e.property_denylist)?n.property_denylist=e.property_blacklist:x(e.property_denylist)?n.property_denylist=[].concat(g(e.property_blacklist),g(e.property_denylist)):K.error("Invalid value for property_denylist config: "+e.property_denylist)),n},Qi=function(){function e(){d(this,e),p(this,"__forceAllowLocalhost",!1)}return h(e,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){K.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),e}(),Yi=function(){function e(){var t=this;d(this,e),p(this,"webPerformance",new Qi),p(this,"_internalEventEmitter",new wi),this.config=Ji(),this.decideEndpointWasHit=!1,this.SentryIntegration=vi,this.sentryIntegration=function(e){return function(e,t){var n=pi(e,t);return{name:hi,processEvent:function(e){return n(e)}}}(t,e)},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.featureFlags=new Xe(this),this.toolbar=new vr(this),this.scrollManager=new Li(this),this.pageViewManager=new yi(this),this.surveys=new Oi(this),this.rateLimiter=new Ri(this),this.requestRouter=new ci(this),this.consent=new qi(this),this.people={set:function(e,n,r){var i=P(e)?p({},e,n):e;t.setPersonProperties(i),null==r||r({})},set_once:function(e,n,r){var i=P(e)?p({},e,n):e;t.setPersonProperties(void 0,i),null==r||r({})}},this.on("eventCaptured",(function(e){return K.info("send",e)}))}return h(e,[{key:"init",value:function(t,n,r){if(r&&r!==Vi){var i,o=null!==(i=zi[r])&&void 0!==i?i:new e;return o._init(t,n,r),zi[r]=o,zi[Vi][r]=o,o}return this._init(t,n,r)}},{key:"_init",value:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(C(e)||T(e))return K.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return K.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],this.set_config(te({},Ji(),Ki(i),{name:o,token:e})),this.config.on_xhr_error&&K.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=i.disable_compression?void 0:ce.Base64,this.persistence=new yn(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new yn(c(c({},this.config),{},{persistence:"sessionStorage"}));var s=c({},this.persistence.props),a=c({},this.sessionPersistence.props);if(this._requestQueue=new gr((function(e){return r._send_retriable_request(e)})),this._retryQueue=new oi(this),this.__request_queue=[],this.sessionManager=new ai(this.config,this.persistence),this.sessionPropsManager=new Ci(this.sessionManager,this.persistence),new Bi(this).startIfEnabledOrStop(),this.sessionRecording=new dr(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new $i(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Ai(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new Gi(this),this.exceptionObserver=new fi(this),this.exceptionObserver.startIfEnabled(),b.DEBUG=b.DEBUG||this.config.debug,b.DEBUG&&K.info("Starting in debug mode",{this:this,config:i,thisC:c({},this.config),p:s,s:a}),this._sync_opt_out_with_persistence(),void 0!==(null===(t=i.bootstrap)||void 0===t?void 0:t.distinctID)){var u,l,d=this.config.get_device_id(tt()),f=null!==(u=i.bootstrap)&&void 0!==u&&u.isIdentifiedID?d:i.bootstrap.distinctID;this.persistence.set_property(Le,null!==(l=i.bootstrap)&&void 0!==l&&l.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:i.bootstrap.distinctID,$device_id:f})}if(this._hasBootstrappedFeatureFlags()){var h,p,v=Object.keys((null===(h=i.bootstrap)||void 0===h?void 0:h.featureFlags)||{}).filter((function(e){var t,n;return!(null===(t=i.bootstrap)||void 0===t||null===(n=t.featureFlags)||void 0===n||!n[e])})).reduce((function(e,t){var n,r;return e[t]=(null===(n=i.bootstrap)||void 0===n||null===(r=n.featureFlags)||void 0===r?void 0:r[t])||!1,e}),{}),g=Object.keys((null===(p=i.bootstrap)||void 0===p?void 0:p.featureFlagPayloads)||{}).filter((function(e){return v[e]})).reduce((function(e,t){var n,r,o,s;return null!==(n=i.bootstrap)&&void 0!==n&&null!==(r=n.featureFlagPayloads)&&void 0!==r&&r[t]&&(e[t]=null===(o=i.bootstrap)||void 0===o||null===(s=o.featureFlagPayloads)||void 0===s?void 0:s[t]),e}),{});this.featureFlags.receivedFeatureFlags({featureFlags:v,featureFlagPayloads:g})}if(!this.get_distinct_id()){var _=this.config.get_device_id(tt());this.register_once({distinct_id:_,$device_id:_},""),this.persistence.set_property(Le,"anonymous")}return null==N||null===(n=N.addEventListener)||void 0===n||n.call(N,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),i.segment?function(e,t){var n=e.config.segment;if(!n)return t();!function(e,t){var n=e.config.segment;if(!n)return t();var r=function(n){var r=function(){return n.anonymousId()||tt()};e.config.get_device_id=r,n.id()&&(e.register({distinct_id:n.id(),$device_id:r()}),e.persistence.set_property(Le,"identified")),t()},i=n.user();"then"in i&&O(i.then)?i.then((function(e){return r(e)})):r(i)}(e,(function(){n.register(function(e){Promise&&Promise.resolve||K.warn("This browser does not have Promise support, and can not use the segment integration");var t=function(t,n){var r;if(!n)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||e.reset(),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(e.register({distinct_id:t.event.userId}),e.reloadFeatureFlags());var i=e._calculate_event_properties(n,null!==(r=t.event.properties)&&void 0!==r?r:{},new Date);return t.event.properties=Object.assign({},i,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(e){return t(e,e.event.event)},page:function(e){return t(e,"$pageview")},identify:function(e){return t(e,"$identify")},screen:function(e){return t(e,"$screen")}}}(e)).then((function(){t()}))}))}(this,(function(){return r._loaded()})):this._loaded(),O(this.config._onCapture)&&this.on("eventCaptured",(function(e){return r.config._onCapture(e.event,e)})),this}},{key:"_afterDecideResponse",value:function(e){var t,n,r,i,o,s,a;this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=ne(e.supportedCompression,ce.GZipJS)?ce.GZipJS:ne(e.supportedCompression,ce.Base64)?ce.Base64:void 0),null!==(t=e.analytics)&&void 0!==t&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),null===(n=this.sessionRecording)||void 0===n||n.afterDecideResponse(e),null===(r=this.autocapture)||void 0===r||r.afterDecideResponse(e),null===(i=this.heatmaps)||void 0===i||i.afterDecideResponse(e),null===(o=this.surveys)||void 0===o||o.afterDecideResponse(e),null===(s=this.webVitalsAutocapture)||void 0===s||s.afterDecideResponse(e),null===(a=this.exceptionObserver)||void 0===a||a.afterDecideResponse(e)}},{key:"_loaded",value:function(){var e=this,t=this.config.advanced_disable_decide;t||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(e){K.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout((function(){U&&e.capture("$pageview",{title:U.title},{send_instantly:!0})}),1),t||(new fr(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null===(e=this._requestQueue)||void 0===e||e.enable())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||Z(this.__request_queue,(function(t){return e._send_retriable_request(t)})),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_handle_unload",value:function(){var e,t;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),null===(e=this._requestQueue)||void 0===e||e.unload(),null===(t=this._retryQueue)||void 0===t||t.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_send_request",value:function(e){var t=this;this.__loaded&&(Xi?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Zr(e.url,{ip:this.config.ip?1:0}),e.headers=this.config.request_headers,e.compression="best-available"===e.compression?this.compression:e.compression,function(e){var t,n,r,i=c({},e);i.timeout=i.timeout||6e4,i.url=Zr(i.url,{_:(new Date).getTime().toString(),ver:b.LIB_VERSION,compression:i.compression});var o=null!==(t=i.transport)&&void 0!==t?t:"XHR",s=null!==(n=null===(r=de(ni,(function(e){return e.transport===o})))||void 0===r?void 0:r.method)&&void 0!==n?n:ni[0].method;if(!s)throw new Error("No available transport method");s(i)}(c(c({},e),{},{callback:function(n){var r,i,o;t.rateLimiter.checkForLimiting(n),n.statusCode>=400&&(null===(i=(o=t.config).on_request_error)||void 0===i||i.call(o,n)),null===(r=e.callback)||void 0===r||r.call(e,n)}}))))}},{key:"_send_retriable_request",value:function(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}},{key:"_execute_array",value:function(e){var t,n=this,r=[],i=[],o=[];Z(e,(function(e){e&&(t=e[0],x(t)?o.push(e):O(e)?e.call(n):x(e)&&"alias"===t?r.push(e):x(e)&&-1!==t.indexOf("capture")&&O(n[t])?o.push(e):i.push(e))}));var s=function(e,t){Z(e,(function(e){if(x(e[0])){var n=t;ee(e,(function(e){n=n[e[0]].apply(n,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};s(r,this),s(i,this),s(o,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,t;return(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags)&&Object.keys(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,t,n){var r;if(!(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue))return K.uninitializedWarning("posthog.capture");if(!this.consent.isOptedOut())if(!C(e)&&P(e)){if(!V||this.config.opt_out_useragent_filter||!Ti(V,this.config.custom_blocked_useragents)){var i=null!=n&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==i||!i.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,s=(null==n?void 0:n.timestamp)||o,a={uuid:tt(),event:e,properties:this._calculate_event_properties(e,t||{},s)};i&&(a.properties.$lib_rate_limit_remaining_tokens=i.remainingTokens),(null==n?void 0:n.$set)&&(a.$set=null==n?void 0:n.$set);var u=this._calculate_set_once_properties(null==n?void 0:n.$set_once);u&&(a.$set_once=u),(a=function(e,t){return n=e,r=function(e){return P(e)&&!I(t)?e.slice(0,t):e},i=new Set,function e(t,n){return t!==Object(t)?r?r(t):t:i.has(t)?void 0:(i.add(t),x(t)?(o=[],Z(t,(function(t){o.push(e(t))}))):(o={},ee(t,(function(t,n){i.has(t)||(o[n]=e(t,n))}))),o);var o}(n);var n,r,i}(a,null!=n&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=s,C(null==n?void 0:n.timestamp)||(a.properties.$event_time_override_provided=!0,a.properties.$event_time_override_system_time=o);var l=c(c({},a.properties.$set),a.$set);M(l)||this.setPersonPropertiesForFlags(l),this._internalEventEmitter.emit("eventCaptured",a);var d={method:"POST",url:null!==(r=null==n?void 0:n._url)&&void 0!==r?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:a,compression:"best-available",batchKey:null==n?void 0:n._batchKey};return!this.config.request_batching||n&&(null==n||!n._batchKey)||null!=n&&n.send_instantly?this._send_retriable_request(d):this._requestQueue.enqueue(d),a}K.critical("This capture call is ignored due to client rate limiting.")}}else K.error("No event name provided to posthog.capture")}},{key:"_addCaptureHook",value:function(e){this.on("eventCaptured",(function(t){return e(t.event,t)}))}},{key:"_calculate_event_properties",value:function(e,t,n){if(!this.persistence||!this.sessionPersistence)return t;var r=this.persistence.remove_event_timer(e),i=c({},t);if(i.token=this.config.token,"$snapshot"===e){var o=c(c({},this.persistence.properties()),this.sessionPersistence.properties());return i.distinct_id=o.distinct_id,(!P(i.distinct_id)&&!A(i.distinct_id)||T(i.distinct_id))&&K.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),i}var s=_n.properties();if(this.sessionManager){var a=this.sessionManager.checkAndGetSessionAndWindowId(),u=a.sessionId,l=a.windowId;i.$session_id=u,i.$window_id=l}if(this.requestRouter.region===ri.CUSTOM&&(i.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===e||"$pageleave"===e||"$autocapture"===e)){var d=this.sessionPropsManager.getSessionProps();i=te(i,d)}if(!this.config.disable_scroll_properties){var f={};"$pageview"===e?f=this.pageViewManager.doPageView(n):"$pageleave"===e&&(f=this.pageViewManager.doPageLeave(n)),i=te(i,f)}if("$pageview"===e&&U&&(i.title=U.title),!C(r)){var h=n.getTime()-r;i.$duration=parseFloat((h/1e3).toFixed(3))}V&&this.config.opt_out_useragent_filter&&(i.$browser_type=Ti(V,this.config.custom_blocked_useragents)?"bot":"browser"),(i=te({},s,this.persistence.properties(),this.sessionPersistence.properties(),i)).$is_identified=this._isIdentified(),x(this.config.property_denylist)?ee(this.config.property_denylist,(function(e){delete i[e]})):K.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var p=this.config.sanitize_properties;return p&&(i=p(i,e)),i.$process_person_profile=this._hasPersonProcessing(),i}},{key:"_calculate_set_once_properties",value:function(e){if(!this.persistence||!this._hasPersonProcessing())return e;var t=te({},this.persistence.get_initial_props(),e||{});return M(t)?void 0:t}},{key:"register",value:function(e,t){var n;null===(n=this.persistence)||void 0===n||n.register(e,t)}},{key:"register_once",value:function(e,t,n){var r;null===(r=this.persistence)||void 0===r||r.register_once(e,t,n)}},{key:"register_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.register(e)}},{key:"unregister",value:function(e){var t;null===(t=this.persistence)||void 0===t||t.unregister(e)}},{key:"unregister_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.unregister(e)}},{key:"_register_single",value:function(e,t){this.register(p({},e,t))}},{key:"getFeatureFlag",value:function(e,t){return this.featureFlags.getFeatureFlag(e,t)}},{key:"getFeatureFlagPayload",value:function(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}},{key:"isFeatureEnabled",value:function(e,t){return this.featureFlags.isFeatureEnabled(e,t)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}},{key:"getEarlyAccessFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,t)}},{key:"on",value:function(e,t){return this._internalEventEmitter.on(e,t)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var t,n;return null!==(t=null===(n=this.sessionManager)||void 0===n?void 0:n.onSessionId(e))&&void 0!==t?t:function(){}}},{key:"getSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(e,t)}},{key:"getActiveMatchingSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(e,t)}},{key:"renderSurvey",value:function(e,t){this.surveys.renderSurvey(e,t)}},{key:"canRenderSurvey",value:function(e){this.surveys.canRenderSurvey(e)}},{key:"getNextSurveyStep",value:function(e,t,n){return this.surveys.getNextSurveyStep(e,t,n)}},{key:"identify",value:function(e,t,n){if(!this.__loaded||!this.persistence)return K.uninitializedWarning("posthog.identify");if(A(e)&&(e=e.toString(),K.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))K.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==r&&e!==this.get_property(he)&&(this.unregister(he),this.register({distinct_id:e}));var o="anonymous"===(this.persistence.get_property(Le)||"anonymous");e!==r&&o?(this.persistence.set_property(Le,"identified"),this.setPersonPropertiesForFlags(t||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:n||{}}),this.featureFlags.setAnonymousDistinctId(r)):(t||n)&&this.setPersonProperties(t,n),e!==r&&(this.reloadFeatureFlags(),this.unregister(Ae))}}else K.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,t){(e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:t||{}}))}},{key:"group",value:function(e,t,n){if(e&&t){if(this._requirePersonProcessing("posthog.group")){var r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:c(c({},r),{},p({},e,t))}),n&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags(p({},e,n))),r[e]===t||n||this.reloadFeatureFlags()}}else K.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,t)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){var t,n,r,i;if(K.info("reset"),!this.__loaded)return K.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");this.consent.reset(),null===(t=this.persistence)||void 0===t||t.clear(),null===(n=this.sessionPersistence)||void 0===n||n.clear(),null===(r=this.persistence)||void 0===r||r.set_property(Le,"anonymous"),null===(i=this.sessionManager)||void 0===i||i.resetSessionId();var s=this.config.get_device_id(tt());this.register_once({distinct_id:s,$device_id:e?s:o},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,t;return null!==(e=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var t=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=t.sessionId,r=t.sessionStartTimestamp,i=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(n));if(null!=e&&e.withTimestamp&&r){var o,s=null!==(o=e.timestampLookBack)&&void 0!==o?o:10;if(!r)return i;var a=Math.max(Math.floor(((new Date).getTime()-r)/1e3)-s,0);i+="?t=".concat(a)}return i}},{key:"alias",value:function(e,t){return e===this.get_property(fe)?(K.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(C(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(he,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(K.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}},{key:"set_config",value:function(e){var t,n,r,i,o=c({},this.config);R(e)&&(te(this.config,Ki(e)),null===(t=this.persistence)||void 0===t||t.update_config(this.config,o),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new yn(c(c({},this.config),{},{persistence:"sessionStorage"})),ut.is_supported()&&"true"===ut.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(b.DEBUG=!0,K.info("set_config",{config:e,oldConfig:o,newConfig:c({},this.config)})),null===(n=this.sessionRecording)||void 0===n||n.startIfEnabledOrStop(),null===(r=this.autocapture)||void 0===r||r.startIfEnabled(),null===(i=this.heatmaps)||void 0===i||i.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}},{key:"startSessionRecording",value:function(e){if(null!=e&&e.sampling){var t,n,r=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId();null===(n=this.persistence)||void 0===n||n.register(p({},Re,!0)),K.info("Session recording started with sampling override for session: ",null==r?void 0:r.sessionId)}this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!(null===(e=this.sessionRecording)||void 0===e||!e.started)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var t;return null===(t=this.persistence)||void 0===t?void 0:t.props[e]}},{key:"getSessionProperty",value:function(e){var t;return null===(t=this.sessionPersistence)||void 0===t?void 0:t.props[e]}},{key:"toString",value:function(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:Vi;return t!==Vi&&(t=Vi+"."+t),t}},{key:"_isIdentified",value:function(){var e,t;return"identified"===(null===(e=this.persistence)||void 0===e?void 0:e.get_property(Le))||"identified"===(null===(t=this.sessionPersistence)||void 0===t?void 0:t.get_property(Le))}},{key:"_hasPersonProcessing",value:function(){var e,t,n,r;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&M(this.getGroups())&&(null===(e=this.persistence)||void 0===e||null===(t=e.props)||void 0===t||!t[he])&&(null===(n=this.persistence)||void 0===n||null===(r=n.props)||void 0===r||!r[qe]))}},{key:"_shouldCapturePageleave",value:function(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&this.config.capture_pageview}},{key:"createPersonProfile",value:function(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}},{key:"_requirePersonProcessing",value:function(e){return"never"===this.config.person_profiles?(K.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(qe,!0),!0)}},{key:"_sync_opt_out_with_persistence",value:function(){var e,t,n,r,i=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,s=this.config.disable_persistence||i&&!!o;(null===(e=this.persistence)||void 0===e?void 0:e.disabled)!==s&&(null===(n=this.persistence)||void 0===n||n.set_disabled(s)),(null===(t=this.sessionPersistence)||void 0===t?void 0:t.disabled)!==s&&(null===(r=this.sessionPersistence)||void 0===r||r.set_disabled(s))}},{key:"opt_in_capturing",value:function(e){var t;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(C(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!==(t=null==e?void 0:e.captureEventName)&&void 0!==t?t:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0})}},{key:"opt_out_capturing",value:function(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}},{key:"has_opted_in_capturing",value:function(){return this.consent.isOptedIn()}},{key:"has_opted_out_capturing",value:function(){return this.consent.isOptedOut()}},{key:"clear_opt_in_out_capturing",value:function(){this.consent.reset(),this._sync_opt_out_with_persistence()}},{key:"debug",value:function(e){!1===e?(null==N||N.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==N||N.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),e}();!function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=se(e.prototype[t[n]])}(Yi,["identify"]);var Zi,eo=(Zi=zi[Vi]=new Yi,function(){function e(){e.done||(e.done=!0,Xi=!1,ee(zi,(function(e){e._dom_loaded()})))}null!=U&&U.addEventListener&&("complete"===U.readyState?e():U.addEventListener("DOMContentLoaded",e,!1)),N&&le(N,"load",e,!0)}(),Zi);function to(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function no(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,to(r.key),r)}}function ro(e,t,n){return t&&no(e.prototype,t),n&&no(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function io(e,t,n){return(t=to(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oo=n(6339),so=n(9532),ao=function(e){console.error(e)},uo=(new so.default.Builder).withDomainRealm("prod","USAmazon").withErrorHandler(ao).build(),co=(new oo.Context.Builder).withSite("Tricorder").withServiceName("TricorderAnalyticsScript").build(),lo=new oo.Publisher(uo,ao,co),fo=ro((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),io(this,"publisher",void 0),io(this,"publishCount",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.publisher.newChildActionPublisherForMethod("Initialize").publishCounterMonitor(e,n)})),this.publisher=lo})),ho=new fo,po={api_host:"/tricorder",mask_all_text:!0,loaded:function(e){var t=e.getFeatureFlag("tricorder-customer",{send_event:!1});function n(e){var t;return(null===(t=document.querySelector('meta[name="'.concat(e,'"]')))||void 0===t?void 0:t.getAttribute("content"))||"unavailable"}t?e._isIdentified()?e.get_distinct_id()!=t&&(e.reset(),e.identify(t)):e.identify(t):e.reset(),e.register_for_session({mons_app_name:n("a2z:mons_app_name"),mons_config_name:n("a2z:mons_config_name"),mons_request_id:n("a2z:request_id"),weblab_treatments:n("a2z:mons_weblab_treatment")})}};function vo(){return go.apply(this,arguments)}function go(){return go=i(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{window.isTricorderInitialized=window.isTricorderInitialized||!1,window.isTricorderInitialized||(window.isTricorderInitialized=!0,console.log("Initializing Tricorder analytics"),eo.init("phc_tGCcl9SINhy3N0zy98fdlWrc1ppQ67KJ8pZMzVZOECH",po),ho.publishCount("InitializationError",0))}catch(u){console.error("Error initializing Tricorder analytics: ",u),ho.publishCount("InitializationError",1)}case 1:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}i(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo();case 2:case"end":return e.stop()}}),e)})))()})()})();
//# sourceMappingURL=tricorder.js.map