/*
 * Copyright (c) 2011, Yahoo! Inc.  All rights reserved.
 * Copyright (c) 2011-2012, Log-Normal, Inc.  All rights reserved.
 * Copyright (c) 2012-2017, SOASTA, Inc. All rights reserved.
 * Copyright (c) 2017, Akamai Technologies, Inc. All rights reserved.
 * Copyrights licensed under the BSD License. See the accompanying LICENSE.txt file for terms.
 */
/* Boomerang Version: 1.0.0.cathode */

BOOMR_start=(new Date).getTime();function BOOMR_check_doc_domain(e){if(window){if(!e){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(n){BOOMR.isCrossOriginError(n)||BOOMR.addError(n,"BOOMR_check_doc_domain.domainFix")}e=document.domain}if(e&&-1!==e.indexOf(".")&&window.parent){try{window.parent.document;return}catch(n){try{document.domain=e}catch(t){return}}try{window.parent.document;return}catch(n){e=e.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(e)}}}BOOMR_check_doc_domain();!function(l){var d,n,c,o,s,e,a,t=l;l.parent!==l&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(l=l.parent);c=l.document;l.BOOMR||(l.BOOMR={});BOOMR=l.BOOMR;if(!BOOMR.version){BOOMR.version="1.0.0";BOOMR.window=l;BOOMR.boomerang_frame=t;BOOMR.plugins||(BOOMR.plugins={});!function(){try{new l.CustomEvent("CustomEvent")!==undefined&&(o=function(e,n){return new l.CustomEvent(e,n)})}catch(e){}try{!o&&c.createEvent&&c.createEvent("CustomEvent")&&(o=function(e,n){var t=c.createEvent("CustomEvent");n=n||{cancelable:!1,bubbles:!1};t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail);return t})}catch(e){}!o&&c.createEventObject&&(o=function(e,n){var t=c.createEventObject();t.type=t.propertyName=e;t.detail=n.detail;return t});o=o||function(){return undefined}}();s=function(e,n,t){var i=o(e,{detail:n});i&&(t?BOOMR.setImmediate(r):r());function r(){try{c.dispatchEvent?c.dispatchEvent(i):c.fireEvent&&c.fireEvent("onpropertychange",i)}catch(e){}}};if("undefined"!=typeof c.hidden){e="visibilityState";a="visibilitychange"}else if("undefined"!=typeof c.mozHidden){e="mozVisibilityState";a="mozvisibilitychange"}else if("undefined"!=typeof c.msHidden){e="msVisibilityState";a="msvisibilitychange"}else if("undefined"!=typeof c.webkitHidden){e="webkitVisibilityState";a="webkitvisibilitychange"}d={beacon_url:"",beacon_url_force_https:!0,beacon_urls_allowed:[],beacon_type:"AUTO",beacon_auth_key:"Authorization",beacon_auth_token:undefined,beacon_with_credentials:!1,beacon_disable_sendbeacon:!1,site_domain:l.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,hasSentPageLoadBeacon:!1,r:undefined,same_site_cookie:"Lax",secure_cookie:!1,forced_same_site_cookie_none:!1,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],prerender_to_visible:[],before_beacon:[],beacon:[],page_load_beacon:[],xhr_load:[],click:[],form_submit:[],config:[],xhr_init:[],spa_init:[],spa_navigation:[],spa_cancel:[],xhr_send:[],xhr_error:[],error:[],netinfo:[],rage_click:[],before_early_beacon:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",beacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},translate_events:{onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},unloadEventsCount:0,unloadEventCalled:0,listenerCallbacks:{},vars:{},singleBeaconVars:{},varPriority:{"-1":{},1:{}},errors:{},disabled_plugins:{},localStorageSupported:!1,LOCAL_STORAGE_PREFIX:"_boomr_",nativeOverwrites:[],xb_handler:function(t){return function(e){var n;(e=e||l.event).target?n=e.target:e.srcElement&&(n=e.srcElement);3===n.nodeType&&(n=n.parentNode);n&&n.nodeName&&"OBJECT"===n.nodeName.toUpperCase()&&"application/x-shockwave-flash"===n.type||d.fireEvent(t,n)}},clearEvents:function(){for(var e in this.events)this.events.hasOwnProperty(e)&&(this.events[e]=[])},clearListeners:function(){for(var e in d.listenerCallbacks)if(d.listenerCallbacks.hasOwnProperty(e))for(;d.listenerCallbacks[e].length;)BOOMR.utils.removeListener(d.listenerCallbacks[e][0].el,e,d.listenerCallbacks[e][0].fn);d.listenerCallbacks={}},fireEvent:function(e,n){var t,i,r,o;e=e.toLowerCase();this.translate_events[e]&&(e=this.translate_events[e]);if(this.events.hasOwnProperty(e)){this.public_events.hasOwnProperty(e)&&s(this.public_events[e],n);r=this.events[e];"before_beacon"!==e&&"beacon"!==e&&"before_early_beacon"!==e&&BOOMR.real_sendBeacon();o=r.length;for(t=0;t<o;t++)try{(i=r[t]).fn.call(i.scope,n,i.cb_data)}catch(a){BOOMR.addError(a,"fireEvent."+e+"<"+t+">")}for(t=0;t<o;t++)if(r[t].once){r.splice(t,1);o--;t--}}},spaNavigation:function(){d.onloadfired=!0},beaconUrlAllowed:function(e){if(!d.beacon_urls_allowed||0===d.beacon_urls_allowed.length)return!0;for(var n=0;n<d.beacon_urls_allowed.length;n++){if(new RegExp(d.beacon_urls_allowed[n]).exec(e))return!0}return!1},checkLocalStorageSupport:function(){var e=d.LOCAL_STORAGE_PREFIX+"clss";d.localStorageSupported=!1;try{if(!l.JSON||!l.localStorage)return;l.localStorage.setItem(e,e);d.localStorageSupported=l.localStorage.getItem(e)===e;l.localStorage.removeItem(e)}catch(n){d.localStorageSupported=!1}},onFrameUnloaded:function(){var e,n;BOOMR.isUnloaded=!0;for(e=0;e<d.nativeOverwrites.length;e++)(n=d.nativeOverwrites[e]).obj[n.functionName]=n.origFn;d.nativeOverwrites=[]}};n={t_start:BOOMR_start,t_end:undefined,url:"",config_url:null,loadedLate:!1,beaconsSent:0,isUnloaded:!1,beaconInQueue:!1,cookies:{},testedCookies:!1,constants:{BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2e3},session:{domain:d.site_domain,ID:undefined,start:undefined,length:0,enabled:!0},utils:{hasPostMessageSupport:function(){return!(!l.postMessage||"function"!=typeof l.postMessage&&"object"!=typeof l.postMessage)},objectToString:function(e,n,t){var i,r=[];if(!e||"object"!=typeof e)return e;n===undefined&&(n="\n\t");t=t||0;if(BOOMR.utils.isArray(e)){for(i=0;i<e.length;i++)0<t&&null!==e[i]&&"object"==typeof e[i]?r.push(this.objectToString(e[i],n+("\n\t"===n?"\t":""),t-1)):"&"===n?r.push(encodeURIComponent(e[i])):r.push(e[i]);n=","}else for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(0<t&&null!==e[i]&&"object"==typeof e[i]?r.push(encodeURIComponent(i)+"="+this.objectToString(e[i],n+("\n\t"===n?"\t":""),t-1)):"&"===n?r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i])):r.push(i+"="+e[i]));return r.join(n)},getCookie:function(e){var n;if(!e)return null;if("undefined"!=typeof BOOMR.cookies[e])return!1===BOOMR.cookies[e]?undefined:BOOMR.cookies[e];if(void 0===(n=this.getRawCookie(e))){BOOMR.cookies[e]=!1;return undefined}BOOMR.cookies[e]=n;return BOOMR.cookies[e]},getRawCookie:function(e){if(!e)return null;e=" "+e+"=";var n,t=" "+c.cookie+";";if(0<=(n=t.indexOf(e))){n+=e.length;return t.substring(n,t.indexOf(";",n)).replace(/^"/,"").replace(/"$/,"")}},setCookie:function(e,n,t){var i,r,o,a,s;if(!e||!BOOMR.session.domain||void 0===n){BOOMR.addVar("nocookie",1);return!1}if((i=this.objectToString(n,"&"))===BOOMR.cookies[e])return!0;if((r=e+'="'+i+'"').length<500){a=[r,"path=/","domain="+BOOMR.session.domain];if("number"==typeof t){(s=new Date).setTime(s.getTime()+1e3*t);s=s.toGMTString();a.push("expires="+s)}var u=this.getSameSiteAttributeParts();"https:"===location.protocol&&!0===d.secure_cookie&&-1===u.indexOf("Secure")&&u.push("Secure");a=a.concat(u);c.cookie=a.join("; ");if(BOOMR.testedCookies){BOOMR.cookies[e]="number"!=typeof t||0<t?i:undefined;return!0}BOOMR.cookies[e]=undefined;if(i===(o=this.getRawCookie(e))||void 0===o&&"number"==typeof t&&t<=0){BOOMR.cookies[e]=i;BOOMR.testedCookies=!0;BOOMR.removeVar("nocookie");return!0}BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+i+"\n"+o)}else BOOMR.warn("Cookie too long: "+r.length+" "+r);BOOMR.addVar("nocookie",1);return!1},getSubCookies:function(e){var n,t,i,r,o=!1,a={};if(!e)return null;if("string"!=typeof e)return null;for(t=0,i=(n=e.split("&")).length;t<i;t++)if((r=n[t].split("="))[0]){r.push("");a[decodeURIComponent(r[0])]=decodeURIComponent(r[1]);o=!0}return o?a:null},removeCookie:function(e){return this.setCookie(e,{},-86400)},getSameSiteAttributeParts:function(){var e=d.same_site_cookie.toUpperCase();d.forced_same_site_cookie_none&&(e="NONE");return"LAX"===e?["SameSite=Lax"]:"NONE"===e?"https:"===location.protocol&&this.isCurrentUASameSiteNoneCompatible()?["SameSite=None","Secure"]:[]:"STRICT"===e?["SameSite=Strict"]:["SameSite=Lax"]},getLocalStorage:function(e){var n,t;if(!e||!d.localStorageSupported)return null;try{if(null===(n=l.localStorage.getItem(d.LOCAL_STORAGE_PREFIX+e)))return undefined;t=l.JSON.parse(n)}catch(i){BOOMR.warn(i);return null}if(!t||"object"!=typeof t.items){this.removeLocalStorage(e);return null}if("number"==typeof t.expires&&BOOMR.now()>=t.expires){this.removeLocalStorage(e);return undefined}return t.items},setLocalStorage:function(e,n,t){var i,r,o;if(!e||!d.localStorageSupported||"object"!=typeof n)return!1;i={items:n};"number"==typeof t&&(i.expires=BOOMR.now()+1e3*t);if((r=l.JSON.stringify(i)).length<5e4){try{l.localStorage.setItem(d.LOCAL_STORAGE_PREFIX+e,r);if(r===(o=l.localStorage.getItem(d.LOCAL_STORAGE_PREFIX+e)))return!0}catch(a){}BOOMR.warn("Saved storage value doesn't match what we tried to set:\n"+r+"\n"+o)}else BOOMR.warn("Storage items too large: "+r.length+" "+r);return!1},removeLocalStorage:function(e){if(!e||!d.localStorageSupported)return!1;try{l.localStorage.removeItem(d.LOCAL_STORAGE_PREFIX+e);return!0}catch(n){}return!1},cleanupURL:function(e,n){if(!e||BOOMR.utils.isArray(e))return"";d.strip_query_string&&(e=e.replace(/\?.*/,"?qs-redacted"));if(void 0!==n&&e&&e.length>n){var t=e.indexOf("?");e=-1!==t&&t<n?e.substr(0,t)+"?...":e.substr(0,n-3)+"..."}return e},hashQueryString:function(e,n){if(!e)return e;if(!e.match){BOOMR.addError("TypeError: Not a string","hashQueryString",typeof e);return""}e.match(/^\/\//)&&(e=location.protocol+e);if(!e.match(/^(https?|file):/)){BOOMR.error("Passed in URL is invalid: "+e);return""}n&&(e=e.replace(/#.*/,""));return e.replace(/\?([^#]*)/,function(e,n){return"?"+(10<n.length?BOOMR.utils.hashString(n):n)})},pluginConfig:function(e,n,t,i){var r,o=0;if(!n||!n[t])return!1;for(r=0;r<i.length;r++)if(n[t][i[r]]!==undefined){e[i[r]]=n[t][i[r]];o++}return 0<o},arrayFilter:function(e,n){var t=[];if(!(this.isArray(e)||e&&"number"==typeof e.length)||"function"!=typeof n)return t;if("function"==typeof e.filter)t=e.filter(n);else for(var i,r=-1,o=e.length;++r<o;)n(i=e[r],r,e)&&(t[t.length]=i);return t},arrayFind:function(e,n){if(!(this.isArray(e)||e&&"number"==typeof e.length)||"function"!=typeof n)return undefined;if("function"==typeof e.find)return e.find(n);for(var t,i=-1,r=e.length;++i<r;)if(n(t=e[i],i,e))return t;return undefined},isMutationObserverSupported:function(){return!(l&&l.navigator&&l.navigator.userAgent&&l.navigator.userAgent.match(/Trident.*rv[ :]*11\./))&&l&&l.MutationObserver&&"function"==typeof l.MutationObserver},addObserver:function(e,n,t,i,r,o){var a,s,u={observer:null,timer:null};if(!this.isMutationObserverSupported()||!i||!e)return null;function c(e){var n=!1;if(u.timer){clearTimeout(u.timer);u.timer=null}i&&((n=i.call(o,e,r))||(i=null));if(!n&&u.observer){u.observer.disconnect();u.observer=null}"number"==typeof n&&0<n&&(u.timer=setTimeout(c,n))}a=l.MutationObserver;l.Zone&&"function"==typeof l.Zone.__symbol__&&(s=l.Zone.__symbol__("MutationObserver"))&&"string"==typeof s&&l.hasOwnProperty(s)&&"function"==typeof l[s]&&(a=l[s]);u.observer=new a(c);t&&(u.timer=setTimeout(c,u.timeout));u.observer.observe(e,n);return u},addListener:function(e,n,t,i){var r=!1;if(e.addEventListener){"object"==typeof i?r=i:"boolean"==typeof i&&i&&BOOMR.browser.supportsPassive()&&(r={capture:!1,passive:!0});e.addEventListener(n,t,r)}else e.attachEvent&&e.attachEvent("on"+n,t);d.listenerCallbacks[n]=d.listenerCallbacks[n]||[];d.listenerCallbacks[n].push({el:e,fn:t})},removeListener:function(e,n,t){e.removeEventListener?e.removeEventListener(n,t,!1):e.detachEvent&&e.detachEvent("on"+n,t);if(d.listenerCallbacks.hasOwnProperty(n))for(var i=0;i<d.listenerCallbacks[n].length;i++)if(t===d.listenerCallbacks[n][i].fn&&e===d.listenerCallbacks[n][i].el){d.listenerCallbacks[n].splice(i,1);return}},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},inArray:function(e,n){var t;if(void 0===e||void 0===n||!n.length)return!1;for(t=0;t<n.length;t++)if(n[t]===e)return!0;return!1},getQueryParamValue:function(e,n){var t,i,r,o;if(!e)return null;"string"==typeof n?(t=BOOMR.window.document.createElement("a")).href=n:t="object"==typeof n&&"string"==typeof n.search?n:BOOMR.window.location;i=t.search.slice(1).split(/&/);for(r=0;r<i.length;r++)if(i[r]&&(o=i[r].split("=")).length&&o[0]===e)try{return 1<o.length?decodeURIComponent(o.splice(1).join("=").replace(/\+/g," ")):""}catch(a){if(!a||"string"!=typeof a.name||-1===a.name.indexOf("URIError"))throw a}return null},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},generateId:function(e){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".substr(0,e||40).replace(/x/g,function(e){return"0"===(e=(Math.random()||.01).toString(36))?"0":e.substr(2,1)})},serializeForUrl:function(e){return BOOMR.utils.Compression&&BOOMR.utils.Compression.jsUrl?BOOMR.utils.Compression.jsUrl(e):window.JSON?JSON.stringify(e):""},getMyURL:function(){var e,n=document.currentScript||document.getElementById("boomr-if-as")||document.getElementById("boomr-scr-as");if(n)return n.src;for(var t=document.getElementsByTagName("script"),i=t.length;i--;)if("interactive"===t[i].readyState)return t[i].src;try{throw new Error}catch(r){if("stack"in r&&(e=this.arrayFilter(r.stack.split(/\n/),function(e){return e.match(/https?:\/\//)}))&&e.length)return e[0].replace(/.*(https?:\/\/.+?)(:\d+)+\D*$/m,"$1")}return""},scroll:function(){var e=l.pageXOffset!==undefined,n="CSS1Compat"===(l.document.compatMode||""),t={x:0,y:0};if(e)if("function"==typeof l.pageXOffset){t.x=l.pageXOffset();t.y=l.pageYOffset()}else{t.x=l.pageXOffset;t.y=l.pageYOffset}else if(n){t.x=l.document.documentElement.scrollLeft;t.y=l.document.documentElement.scrollTop}else{t.x=l.document.body.scrollLeft;t.y=l.document.body.scrollTop}"number"==typeof t.sx&&(t.sx=Math.round(t.sx));"number"==typeof t.sy&&(t.sy=Math.round(t.sy));return t},windowHeight:function(){return l.innerHeight||l.document.documentElement.clientHeight||l.document.body.clientHeight},windowWidth:function(){return l.innerWidth||l.document.documentElement.clientWidth||l.document.body.clientWidth},isNative:function(e){return!!e&&e.toString&&!e.hasOwnProperty("toString")&&/\[native code\]/.test(String(e))},overwriteNative:function(e,n,t){if(e&&t){BOOMR.boomerang_frame!==BOOMR.window&&d.nativeOverwrites.push({obj:e,functionName:n,origFn:e[n]});e[n]=t}},isInteger:function(e){return(Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e})(e)},isObjectEmpty:function(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0},hashString:function(e){e=encodeURIComponent(e);for(var n=2166136261,t=0;t<e.length;t++){n^=e.charCodeAt(t);n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24)}var i=(n>>>0).toString()+e.length;return parseInt(i).toString(36)},isCurrentUASameSiteNoneCompatible:function(){return!(l&&l.navigator&&l.navigator.userAgent&&"string"==typeof l.navigator.userAgent)||this.isUASameSiteNoneCompatible(l.navigator.userAgent)},isUASameSiteNoneCompatible:function(e){var n=e.match(/(UCBrowser)\/(\d+\.\d+)\.(\d+)/);if(n){var t=parseFloat(n[2]),i=n[3];return 12.13===t?!(i<=2):!(t<12.13)}if(n=e.match(/(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)/)){var r=n[2];return 51<=r&&r<=66?!1:!0}return(n=e.match(/(Macintosh;.*Mac OS X 10_14[_\d]*.*) AppleWebKit\//))?(!(n=e.match(/Version\/.* Safari\//))||null!==(n=e.match(/Chrom(?:e|ium)/)))&&!(n=e.match(/^Mozilla\/\d+(?:\.\d+)* \(Macintosh;.*Mac OS X \d+(?:_\d+)*\) AppleWebKit\/\d+(?:\.\d+)* \(KHTML, like Gecko\)$/)):!(n=e.match(/(iP.+; CPU .*OS 12(?:_\d+)*.*)/))}},browser:{results:{},supportsPassive:function(){if("undefined"==typeof BOOMR.browser.results.supportsPassive){BOOMR.browser.results.supportsPassive=!1;if(!Object.defineProperty)return!1;try{var e=Object.defineProperty({},"passive",{get:function(){BOOMR.browser.results.supportsPassive=!0}});window.addEventListener("test",null,e)}catch(n){}}return BOOMR.browser.results.supportsPassive}},init:function(e){var n,t,i=["autorun","beacon_auth_key","beacon_auth_token","beacon_with_credentials","beacon_disable_sendbeacon","beacon_url","beacon_url_force_https","beacon_type","site_domain","strip_query_string","user_ip","same_site_cookie","secure_cookie"];BOOMR_check_doc_domain();(e=e||{}).log!==undefined&&(this.log=e.log);this.log||(this.log=function(){});this.pageId||(this.pageId=BOOMR.utils.generateId(8));if(e.primary&&d.handlers_attached)return this;if("undefined"!=typeof e.site_domain){/:/.test(e.site_domain)&&(e.site_domain=l.location.hostname.toLowerCase());this.session.domain=e.site_domain}BOOMR.session.enabled&&"undefined"==typeof BOOMR.session.ID&&(BOOMR.session.ID=BOOMR.utils.generateUUID());"undefined"!=typeof e.autorun&&(d.autorun=e.autorun);for(t in this.plugins)if(this.plugins.hasOwnProperty(t)){if(e[t]&&e[t].hasOwnProperty("enabled")&&!1===e[t].enabled){d.disabled_plugins[t]=1;"function"==typeof this.plugins[t].disable&&this.plugins[t].disable();continue}if(d.disabled_plugins[t]){if(!e[t]||!e[t].hasOwnProperty("enabled")||!0!==e[t].enabled)continue;"function"==typeof this.plugins[t].enable&&this.plugins[t].enable();delete d.disabled_plugins[t]}if("function"==typeof this.plugins[t].init)try{this.plugins[t].init(e)}catch(r){BOOMR.addError(r,t+".init")}}for(n=0;n<i.length;n++)e[i[n]]!==undefined&&(d[i[n]]=e[i[n]]);if(!d.handlers_attached&&!e.wait||d.handlers_attached&&d.waiting_for_config){if(!d.onloadfired&&(d.autorun===undefined||!1!==d.autorun)){BOOMR.hasBrowserOnloadFired()&&(BOOMR.loadedLate=!0);BOOMR.attach_page_ready(BOOMR.page_ready_autorun)}d.waiting_for_config=!1}if(d.handlers_attached)return this;e.wait&&(d.waiting_for_config=!0);BOOMR.attach_page_ready(function(){BOOMR.t_onload||(BOOMR.t_onload=BOOMR.now())});BOOMR.utils.addListener(l,"DOMContentLoaded",function(){d.fireEvent("dom_loaded")});BOOMR.fireEvent("config",e);BOOMR.subscribe("config",function(e){e.beacon_url&&(d.beacon_url=e.beacon_url)});BOOMR.subscribe("spa_navigation",d.spaNavigation,null,d);!function(){var e,n;if(a!==undefined){BOOMR.utils.addListener(c,a,function(){d.fireEvent("visibility_changed")});d.lastVisibilityState=BOOMR.visibilityState();BOOMR.subscribe("visibility_changed",function(){var e=BOOMR.visibilityState();BOOMR.lastVisibilityEvent[e]=BOOMR.now();if("prerender"===d.lastVisibilityState&&"prerender"!==e){BOOMR.addVar("vis.pre","1");d.fireEvent("prerender_to_visible")}d.lastVisibilityState=e})}BOOMR.utils.addListener(c,"mouseup",d.xb_handler("click"));e=c.getElementsByTagName("form");for(n=0;n<e.length;n++)BOOMR.utils.addListener(e[n],"submit",d.xb_handler("form_submit"));l.onpagehide||null===l.onpagehide||BOOMR.utils.addListener(l,"unload",function(){BOOMR.window=l=null});BOOMR.boomerang_frame!==BOOMR.window&&BOOMR.utils.addListener(BOOMR.boomerang_frame,"unload",d.onFrameUnloaded)}();d.handlers_attached=!0;return this},attach_page_ready:function(e){BOOMR.hasBrowserOnloadFired()?this.setImmediate(e,null,null,BOOMR):l.onpagehide||null===l.onpagehide?BOOMR.utils.addListener(l,"pageshow",e):BOOMR.utils.addListener(l,"load",e)},page_ready_autorun:function(e){d.autorun&&BOOMR.page_ready(e,!0)},page_ready:function(e,n){var t;if(!n&&"number"==typeof e){t=e;e=null}e=(e=e||l.event)||{name:"load"};if(n){if("number"==typeof l.BOOMR_page_ready){e.timing=e.timing||{};e.timing.loadEventEnd=l.BOOMR_page_ready;BOOMR.addVar("pr",1,!0)}}else{e.timing=e.timing||{};t?e.timing.loadEventEnd=t:"number"==typeof l.BOOMR_page_ready?e.timing.loadEventEnd=l.BOOMR_page_ready:e.timing.loadEventEnd=BOOMR.now();BOOMR.addVar("pr",1,!0)}if(d.onloadfired)return this;d.fireEvent("page_ready",e);d.onloadfired=!0;return this},hasBrowserOnloadFired:function(){var e=BOOMR.getPerformance();return c.readyState&&"complete"===c.readyState||e&&e.timing&&0<e.timing.loadEventStart||0<l.BOOMR_onload},onloadFired:function(){return d.onloadfired},setImmediate:function(e,n,t,i){var r=function(){e.call(i||null,n,t||{},void 0);r=null};l.requestIdleCallback?l.requestIdleCallback(r,{timeout:1e3}):l.setImmediate?l.setImmediate(r):setTimeout(r,10)},now:Date.now||function(){return(new Date).getTime()},getPerformance:function(){try{if(BOOMR.window)return"performance"in BOOMR.window&&BOOMR.window.performance?BOOMR.window.performance:BOOMR.window.msPerformance||BOOMR.window.webkitPerformance||BOOMR.window.mozPerformance}catch(e){}},forceSameSiteCookieNone:function(){d.forced_same_site_cookie_none=!0},hrNow:function(){var e,n,t=BOOMR.getPerformance();if(t&&t.now)e=t.now();else{n=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart&&BOOMR.plugins.RT.navigationStart()||BOOMR.t_lstart||BOOMR.t_start;e=BOOMR.now()-n}return e},visibilityState:e===undefined?function(){return"visible"}:function(){return c[e]},lastVisibilityEvent:{},registerEvent:function(e){if(d.events.hasOwnProperty(e))return this;d.events[e]=[];return this},disable:function(){d.clearEvents();d.clearListeners()},fireEvent:function(e,n){return d.fireEvent(e,n)},subscribe:function(n,t,i,r,e){var o,a,s;n=n.toLowerCase();d.translate_events[n]&&(n=d.translate_events[n]);d.events.hasOwnProperty(n)||(d.events[n]=[]);s=d.events[n];for(o=0;o<s.length;o++)if((a=s[o])&&a.fn===t&&a.cb_data===i&&a.scope===r)return this;s.push({fn:t,cb_data:i||{},scope:r||null,once:e||!1});"page_ready"===n&&d.onloadfired&&d.autorun&&this.setImmediate(t,null,i,r);if("page_unload"===n||"before_unload"===n){d.unloadEventsCount++;!function(){s.length;var e=function(e){t&&t.call(r,e||l.event,i);++d.unloadEventCalled===d.unloadEventsCount&&BOOMR.real_sendBeacon()};"page_unload"===n&&(l.onpagehide||null===l.onpagehide?BOOMR.utils.addListener(l,"pagehide",e):BOOMR.utils.addListener(l,"unload",e));BOOMR.utils.addListener(l,"beforeunload",e)}()}return this},addError:function BOOMR_addError(e,n,t){var i,r=BOOMR.plugins.Errors;BOOMR.error("Boomerang caught error: "+e+", src: "+n+", extra: "+t);if(r&&r.is_supported())if("string"==typeof e)r.send({message:e,extra:t,functionName:n,noStack:!0},r.VIA_APP,r.SOURCE_BOOMERANG);else{"string"==typeof n&&(e.functionName=n);void 0!==t&&(e.extra=t);r.send(e,r.VIA_APP,r.SOURCE_BOOMERANG)}else{if("string"!=typeof e){(i=String(e)).match(/^\[object/)&&(i=e.name+": "+(e.description||e.message).replace(/\r\n$/,""));e=i}n!==undefined&&(e="["+n+":"+BOOMR.now()+"] "+e);t&&(e+=":: "+t);d.errors[e]?d.errors[e]++:d.errors[e]=1}},isCrossOriginError:function(e){return"SecurityError"===e.name||"TypeError"===e.name&&"Permission denied"===e.message||"Error"===e.name&&e.message&&e.message.match(/^(Permission|Access is) denied/)||-2146828218===e.number},addVar:function(e,n,t){if("string"==typeof e){d.vars[e]=n;t&&(d.singleBeaconVars[e]=1)}else if("object"==typeof e){var i,r=e;for(i in r)if(r.hasOwnProperty(i)){d.vars[i]=r[i];t&&(d.singleBeaconVars[i]=1)}}return this},appendVar:function(e,n){var t=BOOMR.getVar(e)||"";t&&(t+=",");BOOMR.addVar(e,t+n);return this},removeVar:function(e){var n,t;if(!arguments.length)return this;t=1===arguments.length&&BOOMR.utils.isArray(e)?e:arguments;for(n=0;n<t.length;n++)d.vars.hasOwnProperty(t[n])&&delete d.vars[t[n]];return this},hasVar:function(e){return d.vars.hasOwnProperty(e)},getVar:function(e){return d.vars[e]},setVarPriority:function(e,n){if("number"!=typeof n||1!==Math.abs(n))return this;d.varPriority[n][e]=1;return this},setReferrer:function(e){d.r=e},requestStart:function(n){var t=BOOMR.now();BOOMR.plugins.RT.startTimer("xhr_"+n,t);return{loaded:function(e){BOOMR.responseEnd(n,t,e)}}},readyToSend:function(){for(var e in this.plugins)if(this.plugins.hasOwnProperty(e)){if(d.disabled_plugins[e])continue;if("function"==typeof this.plugins[e].readyToSend&&!1===this.plugins[e].readyToSend())return!1}return!0},responseEnd:function(e,n,t,i){n="number"==typeof n?n:BOOMR.now();i="number"==typeof i?i:BOOMR.now();if(BOOMR.readyToSend())if(BOOMR.hasSentPageLoadBeacon()||BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS))if(d.beaconInQueue)BOOMR.subscribe("beacon",function(){BOOMR.responseEnd(e,n,t,i)},null,BOOMR,!0);else{d.beaconInQueue=!0;if("object"==typeof e){if(!e.url)return;d.fireEvent("xhr_load",e)}else{BOOMR.real_sendBeacon();BOOMR.addVar("xhr.pg",e,!0);BOOMR.plugins.RT.startTimer("xhr_"+e,n);d.fireEvent("xhr_load",{name:"xhr_"+e,data:t,timing:{loadEventEnd:i}})}}else BOOMR.subscribe("page_load_beacon",function(){BOOMR.responseEnd(e,n,t,i)},null,BOOMR,!0);else setTimeout(function(){BOOMR.responseEnd(e,n,t,i)},1e3)},uninstrumentXHR:function(){},instrumentXHR:function(){},uninstrumentFetch:function(){},instrumentFetch:function(){},sendBeacon:function(e){e&&(d.beacon_url_override=e);if(!d.beaconQueued){d.beaconQueued=!0;BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)}return!0},sendBeaconWhenReady:function(e,n,t){if(d.beaconInQueue)BOOMR.subscribe("beacon",function(){BOOMR.sendBeaconWhenReady(e,n,t)},null,BOOMR,!0);else{d.beaconInQueue=!0;for(var i in e)e.hasOwnProperty(i)&&BOOMR.addVar(i,e[i],!0);"function"==typeof n&&void 0!==t&&n.apply(t);BOOMR.sendBeacon()}},real_sendBeacon:function(){var e,n=[],t={};if(!d.beaconQueued)return!1;d.beaconQueued=!1;for(e in this.plugins)if(this.plugins.hasOwnProperty(e)){if(d.disabled_plugins[e])continue;if(!this.plugins[e].is_complete(d.vars))return!1}if(!(window&&window.Image&&window.navigator&&BOOMR.window))return!1;var i=BOOMR.utils.inArray(d.vars["http.initiator"],BOOMR.constants.BEACON_TYPE_SPAS),r="undefined"==typeof d.vars["http.initiator"]||i;d.vars.pgu||(d.vars.pgu=i?c.URL:c.URL.replace(/#.*/,""));d.vars.pgu=BOOMR.utils.cleanupURL(d.vars.pgu);d.vars.u&&!i||(d.vars.u=d.vars.pgu);d.vars.pgu===d.vars.u&&delete d.vars.pgu;d.r?d.vars.r=BOOMR.utils.cleanupURL(d.r):delete d.vars.r;d.vars.v=BOOMR.version;BOOMR.snippetVersion&&(d.vars.sv=BOOMR.snippetVersion);d.vars.sm=BOOMR.snippetMethod||"i";if(BOOMR.session.enabled){d.vars["rt.si"]=BOOMR.session.ID+"-"+Math.round(BOOMR.session.start/1e3).toString(36);d.vars["rt.ss"]=BOOMR.session.start;d.vars["rt.sl"]=BOOMR.session.length}else BOOMR.removeVar("rt.si","rt.ss","rt.sl");if(BOOMR.visibilityState()){d.vars["vis.st"]=BOOMR.visibilityState();BOOMR.lastVisibilityEvent.visible&&(d.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible);BOOMR.lastVisibilityEvent.hidden&&(d.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)}d.vars["ua.plt"]=navigator.platform;d.vars["ua.vnd"]=navigator.vendor;this.pageId&&(d.vars.pid=this.pageId);d.vars.n=++this.beaconsSent;l!==window&&(d.vars["if"]="");for(e in d.errors)d.errors.hasOwnProperty(e)&&n.push(e+(1<d.errors[e]?" (*"+d.errors[e]+")":""));0<n.length&&(d.vars.errors=n.join("\n"));d.errors={};d.fireEvent("before_beacon",d.vars);for(e in d.vars)d.vars.hasOwnProperty(e)&&(t[e]=d.vars[e]);BOOMR.removeVar(["qt","pgu"]);if("undefined"==typeof d.vars.early){for(var o in d.singleBeaconVars)d.singleBeaconVars.hasOwnProperty(o)&&BOOMR.removeVar(o);d.singleBeaconVars={};if(!d.hasSentPageLoadBeacon&&r){d.hasSentPageLoadBeacon=!0;BOOMR.setImmediate(function(){d.fireEvent("page_load_beacon",t)})}}if(BOOMR.session.rate_limited)return!1;d.beaconInQueue=!1;BOOMR.sendBeaconData(t);return!0},sendBeaconData:function(e){var n,t,i,r,o,a=[],s=!0;d.beacon_url=d.beacon_url_override||d.beacon_url;if(!d.beacon_url)return!1;if(!d.beaconUrlAllowed(d.beacon_url))return!1;if(BOOMR.utils.isObjectEmpty(e))return!1;d.fireEvent("beacon",e);a=this.getVarsOfPriority(e,-1);n=this.getVarsOfPriority(e,1);t=a.concat(this.getVarsOfPriority(e,0),n).join("&");d.beacon_url_force_https&&d.beacon_url.match(/^\/\//)&&(d.beacon_url="https:"+d.beacon_url);i=d.beacon_url+(-1<d.beacon_url.indexOf("?")?"&":"?")+t;if("GET"===d.beacon_type){s=!0;i.length>BOOMR.constants.MAX_GET_LENGTH&&(window.console&&(console.warn||console.log)||function(){})("Boomerang: Warning: Beacon may not be sent via GET due to payload size > 2000 bytes")}else("POST"===d.beacon_type||i.length>BOOMR.constants.MAX_GET_LENGTH)&&(s=!1);if(l&&l.navigator&&"function"==typeof l.navigator.sendBeacon&&BOOMR.utils.isNative(l.navigator.sendBeacon)&&"function"==typeof l.Blob&&"GET"!==d.beacon_type&&"undefined"==typeof d.beacon_auth_token&&!d.beacon_disable_sendbeacon){var u=new l.Blob([t+"&sb=1"],{type:"application/x-www-form-urlencoded"});if(l.navigator.sendBeacon(d.beacon_url,u))return!0}BOOMR.orig_XMLHttpRequest||l&&l.XMLHttpRequest||(s=!0);if(s){try{r=new Image}catch(c){return!1}r.src=i}else{o=new(BOOMR.window.orig_XMLHttpRequest||BOOMR.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest);try{this.sendXhrPostBeacon(o,t)}catch(c){o=new BOOMR.boomerang_frame.XMLHttpRequest;this.sendXhrPostBeacon(o,t)}}return!0},hasSentPageLoadBeacon:function(){return d.hasSentPageLoadBeacon},sendXhrPostBeacon:function(e,n){e.open("POST",d.beacon_url);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");if("undefined"!=typeof d.beacon_auth_token){"undefined"==typeof d.beacon_auth_key&&(d.beacon_auth_key="Authorization");e.setRequestHeader(d.beacon_auth_key,d.beacon_auth_token)}d.beacon_with_credentials&&(e.withCredentials=!0);e.send(n)},getVarsOfPriority:function(e,n){var t,i=[],r=0!==n?d.varPriority[n]:e;for(t in r)if(r.hasOwnProperty(t)&&e.hasOwnProperty(t)){i.push(this.getUriEncodedVar(t,"undefined"==typeof e[t]?"":e[t]));0!==n&&delete e[t]}return i},getUriEncodedVar:function(e,n){n!==undefined&&null!==n||(n="");"object"==typeof n&&(n=BOOMR.utils.serializeForUrl(n));return encodeURIComponent(e)+"="+encodeURIComponent(n)},getResourceTiming:function(e,n,t){var i,r=BOOMR.getPerformance();try{if(r&&"function"==typeof r.getEntriesByName){if(!(i=r.getEntriesByName(e))||!i.length)return;if(!("function"!=typeof t||(i=BOOMR.utils.arrayFilter(i,t))&&i.length))return;1<i.length&&"function"==typeof n&&i.sort(n);return i[i.length-1]}}catch(o){BOOMR.warn("getResourceTiming:"+o)}}};if(BOOMR.url){var i=BOOMR.window.document.createElement("a");i.href=BOOMR.url;n.url=i.href}else n.url=n.utils.getMyURL();delete BOOMR_start;if("number"==typeof BOOMR_lstart){n.t_lstart=BOOMR_lstart;delete BOOMR_lstart}else"number"==typeof BOOMR.window.BOOMR_lstart&&(n.t_lstart=BOOMR.window.BOOMR_lstart);"number"==typeof BOOMR.window.BOOMR_onload&&(n.t_onload=BOOMR.window.BOOMR_onload);!function(){var e;"object"==typeof console&&console.log!==undefined?n.log=function(e,n,t){console.log("("+BOOMR.now()+") {"+BOOMR.pageId+"}: "+t+": ["+n+"] "+e)}:n.log=function(){};e=function(t){return function(e,n){this.log(e,t,"boomerang"+(n?"."+n:""));return this}};n.debug=e("debug");n.info=e("info");n.warn=e("warn");n.error=e("error")}();try{var r=n.getPerformance();r&&"function"==typeof r.now&&/\[native code\]/.test(String(r.now))&&r.timing&&r.timing.navigationStart&&(n.now=function(){return Math.round(r.now()+r.timing.navigationStart)})}catch(u){}d.checkLocalStorageSupport();!function(){for(var e in n)n.hasOwnProperty(e)&&(BOOMR[e]=n[e]);BOOMR.xhr_excludes||(BOOMR.xhr_excludes={})}();s("onBoomerangLoaded",{BOOMR:BOOMR},!0)}}(window);!function(){if(!BOOMR.plugins.Continuity){var R=!1,y=100,_=0,v=1,w=2,b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",S=".",T={passive:!0,capture:!0},E=BOOMR.getPerformance(),P={},k=E&&E.timing&&E.timing.navigationStart?E.timing.navigationStart:BOOMR.now(),n=function(c){var l={},i={},d=[],f=0,O=0,p=0,a=0;BOOMR.fpsLog&&BOOMR.fpsLog.length&&(c=BOOMR.fpsLog[0]+k);function m(){return Math.floor((BOOMR.now()-c)/y)}function g(){var e=0,n=null;if(C.frameworkStatusDomSelector){if(!BOOMR.window||!BOOMR.window.document||"loading"===BOOMR.window.document.readyState)return;(n=function r(e){return BOOMR.window&&BOOMR.window.document&&"function"==typeof BOOMR.window.document.querySelector?BOOMR.window.document.querySelector(e):null}(C.frameworkStatusDomSelector))&&(C.ttiWaitForFrameworkReady=!0)}if(C.ttiWaitForFrameworkReady){n&&!C.frameworkReady&&(C.frameworkReady=function o(e){return"ready"===e.dataset.status?parseInt(e.dataset.readyTime)+E.timeOrigin||BOOMR.now():null}(n));if(!C.frameworkReady)return;e=C.frameworkReady}if(BOOMR.plugins.PaintTiming&&BOOMR.plugins.PaintTiming.is_supported()&&E&&E.timeOrigin){var t=undefined;0;(t=(t=t||BOOMR.plugins.PaintTiming.getTimingFor("first-contentful-paint"))||BOOMR.plugins.PaintTiming.getTimingFor("first-paint"))&&(e=Math.max(e,Math.round(t+E.timeOrigin)))}else if(E&&E.timing&&E.timing.msFirstPaint)e=Math.max(e,E.timing.msFirstPaint);else if(BOOMR.window&&BOOMR.window.chrome&&"function"==typeof BOOMR.window.chrome.loadTimes){var i=BOOMR.window.chrome.loadTimes();i&&i.firstPaintTime&&(e=Math.max(e,1e3*i.firstPaintTime))}E&&E.timing&&E.timing.domContentLoadedEventEnd&&(e=Math.max(e,E.timing.domContentLoadedEventEnd));C.ttiWaitForHeroImages&&(a=function l(e){var n,t,i,r,o,a,s=0;if(!BOOMR.window||!BOOMR.window.document||"function"!=typeof BOOMR.window.document.querySelectorAll)return 0;if(!E||"function"!=typeof E.getEntriesByType)return 0;n=e+", "+e+" * img, "+e+" * image";if((t=BOOMR.window.document.querySelectorAll(n))&&t.length)for(i=0;i<t.length;i++){if(!(o=t[i].currentSrc||t[i].src||"function"==typeof t[i].getAttribute&&t[i].getAttribute("xlink:href"))&&"function"==typeof BOOMR.window.getComputedStyle){var u=BOOMR.window.getComputedStyle(t[i])&&BOOMR.window.getComputedStyle(t[i]).getPropertyValue("background");if(u){var c=u.match(/url\(["']?([^"']*)["']?\)/);c&&0<c.length&&(o=c[1])}}if(o&&(a=E.getEntriesByName(o))&&a.length)for(r=0;r<a.length;r++)s=Math.max(s,a[r].responseEnd)}return s?Math.floor(s+k):0}(C.ttiWaitForHeroImages))&&(e=Math.max(e,a));return e}function h(e,n){return function f(e,n,t,i,r){var o,a,s,u,c,l="",d=0;if(!t||!BOOMR.utils.Compression)return"";if(0===t.length)return"";if(n){"undefined"==typeof t[i]&&(t[i]=0);for(o=i+1;o<=r;o++)"undefined"==typeof t[o]&&(t[o]=t[o-1])}for(o=i;o<=r;o++){d="number"!=typeof t[o]||isNaN(t[o])?0:t[o];e===_?s=d<=63?b.charAt(d):S+d.toString(36)+S:e===v?s=d.toString(36):e===w&&(s=d<99?d<=9?"0"+Math.max(d,0):d:"__");if(o+3<=r&&(t[o+1]===d||0===d&&t[o+1]===undefined)&&(t[o+2]===d||0===d&&t[o+2]===undefined)&&(t[o+3]===d||0===d&&t[o+3]===undefined)){a=1;for(;o<r&&(t[o+1]===d||0===d&&t[o+1]===undefined);){a++;o++}u="*"+a.toString(36)+"*"+s}else u=s;if(0!==d||o!==r){e===v&&c&&(l+=",");c=!0;l+=u}}return c?e.toString()+l:""}(i[e].compressMode,i[e].backfillLast,l[e],0!==n?Math.floor((n-c)/y):0,m())}P.timeToInteractive=function(){if(f)return f-k};P.timeToInteractiveDone=function(){return O};P.timeToVisuallyReady=function(){if(p)return p-k};P.timeToHeroImagesReady=function(){if(C.ttiWaitForHeroImages&&a)return a-k};P.timeToFrameworkReady=function(){if(C.ttiWaitForFrameworkReady&&C.frameworkReady)return C.frameworkReady-k};P.log=function(){return d};return{register:function r(e,n,t){l[e]||(l[e]=[]);i[e]={compressMode:n||_,backfillLast:t}},set:function o(e,n,t){void 0===t&&(t=m());l[e]&&(l[e][t]=n)},log:function s(e,n,t){void 0===n&&(n=m());d.push({type:e,time:n,val:t});d.length>C.logMaxEntries&&Array.prototype.splice.call(d,0,d.length-C.logMaxEntries)},increment:function u(e,n,t){void 0===t&&(t=m());void 0===n&&(n=1);if(l[e]){l[e][t]||(l[e][t]=0);l[e][t]+=n}},getTimeBucket:m,getStats:function M(e,n){var t,i,r=0,o=0,a=Infinity,s=0,u=Math.floor((n-c)/y);if(!l[e])return 0;for(i in l[e])if(u<=(i=parseInt(i,10))&&l[e].hasOwnProperty(i)){r++;o+=t=l[e][i];a=Math.min(a,t);s=Math.max(s,t)}return{total:o,count:r,min:a,max:s}},analyze:function B(e){var n=m(),t=0,i=0;C.sendLog&&void 0!==e&&function s(){for(var e="",n=0;n<d.length;n++){var t,i=d[n];0!==n&&(e+="|");e+=i.type;e+=Math.round(i.time-k).toString(36);for(t in i.val)if(i.val.hasOwnProperty(t)){e+=","+t;"number"==typeof i.val[t]?e+=i.val[t].toString(36):e+=i.val[t]}}""!==e&&C.addToBeacon("c.l",e)}();C.sendTimeline&&void 0!==e&&function u(e){var n,t;for(n in l)l.hasOwnProperty(n)&&""!==(t=h(n,e))&&C.addToBeacon("c.t."+n,t)}(e);if(!O&&(p=p||g())){C.addToBeacon("c.tti.vr",P.timeToVisuallyReady());C.addToBeacon("c.tti.fr",P.timeToFrameworkReady());C.addToBeacon("c.tti.hi",P.timeToHeroImagesReady());if(l.longtask||l.fps||l.busy){var r=-1;if(window.parent.ctciStartTimeExperiment)if(window.parent.ctciStartTimeExperiment.mutationObserver){if(window.parent.ctciStartTimeExperiment.mutationStart){r=window.parent.ctciStartTimeExperiment.mutationStart;R=!0}}else if(window.parent.ctciStartTimeExperiment.domStart){r=window.parent.ctciStartTimeExperiment.domStart;R=!0}for(var o=Math.floor((p-c)/y),a=Math.floor((Math.max(r,p)-c)/y),t=o;t<=n;t++)if(l.longtask&&l.longtask[t])i=0;else if(l.fps&&(!l.fps[t]||l.fps[t]<2))i=0;else if(l.busy&&50<l.busy[t])i=0;else if(l.interdly&&l.interdly[t])i=0;else if(5<=++i){if(!f){f=c+(t-5)*y;f=Math.max(f,p);C.addToBeacon("c.tti",P.timeToInteractive())}if(R&&a+5<=t){O=1;break}}}}},stop:function e(){l={};d=[]},onBeacon:function n(){for(var e in l)l.hasOwnProperty(e)&&(l[e]=[]);d=[]}}},t=function(e){if(e.PerformanceObserver&&e.LayoutShift){var i=!0,r=0,n=new e.PerformanceObserver(function o(e){var n,t;if(!i)return;n=e.getEntries();for(t=0;t<n.length;t++)n[t].hadRecentInput||(r+=n[t].value)});try{n.observe({type:"layout-shift",buffered:!0})}catch(a){return}P.clsScore=function(){return r};return{clearClsScore:t,analyze:function s(e){C.addToBeacon("c.cls",P.clsScore())},stop:function u(){i=!1;n.disconnect();t()},onBeacon:function c(){t()}}}function t(){r=0}},i=function(e,i){if(e.PerformanceObserver&&e.PerformanceLongTaskTiming){var f={unknown:0,self:1,"same-origin-ancestor":2,"same-origin-descendant":3,"same-origin":4,"cross-origin-ancestor":5,"cross-origin-descendant":6,"cross-origin-unreachable":7,"multiple-contexts":8},O={unknown:0,script:1,layout:2},p={unknown:0,iframe:1,embed:2,object:3},n=new e.PerformanceObserver(function a(e){var n,t;if(!r)return;n=e.getEntries();Array.prototype.push.apply(m,n);for(t=0;t<n.length;t++)o+=n[t].duration;i.increment("longtask",n.length)});try{n.observe({entryTypes:["longtask"]})}catch(s){return}i.register("longtask",_);var m=[],r=!0,o=0;P.longTasksTime=function(){return o};P.longTasksCount=function(){return m.length};return{getTasks:function u(){return m},clearTasks:t,analyze:function g(e){var n,t,i,r,o,a=[],s=[];if(0!==m.length){for(n=0;n<m.length;n++){i=m[n];r={s:Math.round(i.startTime).toString(36),d:Math.ceil(i.duration).toString(36),n:f[i.name]?f[i.name]:0};s=[];for(t=0;t<i.attribution.length;t++)if("script"!==(o=i.attribution[t]).name||"iframe"!==o.containerType||o.containerName||o.containerId||o.containerSrc){var u=o.containerName?o.containerName:undefined,c=o.containerId?o.containerId:undefined;u===c&&(u=undefined);var l=c===undefined?o.containerSrc:undefined;s.push({a:O[o.name]?O[o.name]:0,t:p[o.containerType]?p[o.containerType]:0,n:u,i:c,s:l})}0<s.length&&(r.a=s);a.push(r)}C.addToBeacon("c.lt.n",P.longTasksCount(),!0);C.addToBeacon("c.lt.tt",P.longTasksTime());C.addToBeacon("c.lt",function d(e){var n=window.UserTimingCompression||BOOMR.window.UserTimingCompression;return n?n.jsUrl(e):window.JSON?JSON.stringify(e):""}(a))}},stop:function c(){r=!1;n.disconnect();t()},onBeacon:function l(){t()}}}function t(){m=[];o=0}},r=function(e,i){i.register("busy",w);var r=Math.floor(3.125),o=BOOMR.now(),a=0,s=0,u=0,c=0,n=!1,t=!1;P.pageBusy=function(){return 0===u?0:Math.ceil(c/u*100)};n=setInterval(function l(){var e=BOOMR.now(),n=e-o;o=e;if(68<n){var t=Math.floor((n-32)/32);a+=t;s+=t;n-=32*t}a++;36<n&&s++},32);t=setInterval(function d(){var e=i.getTimeBucket(),n=e,t=0;if(0!==a){for(;r+1<a&&t<=100;){i.set("busy",100,--n);a-=r;s=Math.max(s-r,0);u+=r;c+=r;t++}u+=a;c+=s;i.set("busy",Math.ceil(s/a*100),e);s=a=0}},100);return{analyze:function f(e){C.addToBeacon("c.b",P.pageBusy())},stop:function O(){if(n){clearInterval(n);n=!1}if(t){clearInterval(t);t=!1}},onBeacon:function p(){c=u=0}}},o=function(n,t){t.register("fps",_);var i,r,o=50,a=0,s=0,u=!0;if(BOOMR.fpsLog&&BOOMR.fpsLog.length){r=i=BOOMR.fpsLog[0]+k;for(var e=0;e<BOOMR.fpsLog.length;e++){var c=k+BOOMR.fpsLog[e];t.increment("fps",1,Math.floor((c-i)/y));o<=c-r&&s++;r=c}a=BOOMR.fpsLog.length;delete BOOMR.fpsLog}else i=BOOMR.now();n.requestAnimationFrame(function l(e){if(u){o<=e-r&&s++;r=e;a++;t.increment("fps");n.requestAnimationFrame(l)}});P.fps=function(){var e=P.fpsDuration();if(e)return Math.floor(a/(e/1e3))};P.fpsDuration=function(){if(i)return BOOMR.now()-i};P.fpsMinimum=function(){if(P.fpsDuration()){var e=t.getStats("fps",i).min;return e!==Infinity?e:undefined}};P.fpsLongFrames=function(){return s};P.fpsStart=function(){return i?i.toString(36):0};return{analyze:function d(e){C.addToBeacon("c.f",P.fps());C.addToBeacon("c.f.d",P.fpsDuration());C.addToBeacon("c.f.m",P.fpsMinimum());C.addToBeacon("c.f.l",P.fpsLongFrames());C.addToBeacon("c.f.s",P.fpsStart())},stop:function f(){u=!1;i=0},onBeacon:function O(){u&&(i=BOOMR.now());s=a=0}}},a=function(e,r,n){if(e&&e.document&&e.document.body&&e.document.documentElement){var o=2e3,a=20,s=0,u=0,c=0,l=0,d=0,f=0,O=0,p=0,t=!1,i=e.document.body,m=e.document.documentElement;r.register("scroll",_);r.register("scrollpct",w);var g=Math.max(i.scrollHeight,i.offsetHeight,m.clientHeight,m.scrollHeight,m.offsetHeight)-BOOMR.utils.windowHeight();P.scrollPct=function(){return l};P.scrollCount=function(){return d};P.scrollDistinct=function(){return O};P.scrollPixels=function(){return f};BOOMR.utils.addListener(e,"scroll",h,T);t=setInterval(function M(){var e=Math.min(c,100);0!==e&&r.set("scrollpct",e);c=0},y);return{analyze:function B(e){C.addToBeacon("c.s",P.scrollCount());C.addToBeacon("c.s.p",P.scrollPct());C.addToBeacon("c.s.y",P.scrollPixels());C.addToBeacon("c.s.d",P.scrollDistinct())},stop:function R(){if(t){clearInterval(t);t=!1}BOOMR.utils.removeListener(e,"scroll",h)},onBeacon:function v(){O=f=d=l=0}}}function h(e){var n=BOOMR.now();d++;o<n-p&&O++;p=n;var t=Math.ceil(BOOMR.utils.scroll().y),i=Math.abs(s-t);f+=i;r.increment("scroll",i);if(0===u||Math.abs(u-t)>a){r.log(0,n,{y:t});u=t}c+=Math.round(i/g*100);l+=Math.round(i/g*100);s=t}},s=function(e,o,a){o.register("click",_);var s=10,u=3,c=0,l=0,d=0,f=0,O=0,p=null;function n(e){var n=BOOMR.now(),t=e.clientX,i=e.clientY;c++;var r=Math.round(Math.sqrt(Math.pow(O-i,2)+Math.pow(f-t,2)));if(p===e.target||r<=s){if(u<=++l+1){d++;BOOMR.fireEvent("rage_click",e)}}else l=0;f=t;O=i;p=e.target;o.increment("click");o.log(1,n,{x:t,y:i});e.cancelable&&a.interact("click",n,e)}P.clicksCount=function(){return c};P.clicksRage=function(){return d};BOOMR.utils.addListener(e.document,"click",n,T);return{analyze:function t(e){C.addToBeacon("c.c",P.clicksCount());C.addToBeacon("c.c.r",P.clicksRage())},stop:function i(){BOOMR.utils.removeListener(e.document,"click",n)},onBeacon:function r(){d=l=c=0}}},u=function(e,t,i){t.register("key",_);var r=0,o=0;function n(e){var n=BOOMR.now();r++;27===e.keyCode&&o++;t.increment("key");t.log(3,n);e.cancelable&&i.interact("key",n,e)}P.keyCount=function(){return r};P.keyEscapes=function(){return o};BOOMR.utils.addListener(e.document,"keydown",n,T);return{analyze:function a(e){C.addToBeacon("c.k",P.keyCount());C.addToBeacon("c.k.e",P.keyEscapes())},stop:function s(){BOOMR.utils.removeListener(e.document,"keydown",n)},onBeacon:function u(){o=r=0}}},c=function(e,o,n){o.register("mouse",_);o.register("mousepct",w);var a=0,s=0,t=0,i=0,u=0,c=0,l=0,r=!1,d=!1,f=Math.round(Math.sqrt(Math.pow(BOOMR.utils.windowHeight(),2)+Math.pow(BOOMR.utils.windowWidth(),2)));function O(e){var n=e.clientX,t=e.clientY,i=Math.round(Math.sqrt(Math.pow(s-t,2)+Math.pow(a-n,2))),r=Math.round(i/f*100);u+=r;c+=r;l+=i;a=n;s=t;o.increment("mouse",i)}P.mousePct=function(){return c};P.mousePixels=function(){return l};r=setInterval(function p(){var e=Math.min(u,100);0!==e&&o.set("mousepct",e);u=0},y);d=setInterval(function m(){if(t!==a||i!==s){if(10<=Math.round(Math.sqrt(Math.pow(i-s,2)+Math.pow(t-a,2)))){o.log(2,BOOMR.now(),{x:a,y:s});t=a;i=s}}},250);BOOMR.utils.addListener(e.document,"mousemove",O,T);return{analyze:function g(e){C.addToBeacon("c.m.p",P.mousePct());C.addToBeacon("c.m.n",P.mousePixels())},stop:function h(){if(r){clearInterval(r);r=!1}if(d){clearInterval(d);d=!1}BOOMR.utils.removeListener(e.document,"mousemove",O)},onBeacon:function M(){l=c=0}}},l=function(r,o,e){o.register("inter",_);o.register("interdly",_);var a=e,s=0,u=null,c=0,l=0,d=0,f=0,O=!0,p=0,m=0,g=!1,h=!1,M=!1,t=!1;function n(){if(g){clearTimeout(g);g=!1}if(h){clearTimeout(h);h=!1}}function B(){BOOMR.sendBeaconWhenReady({"rt.start":"manual","http.initiator":"interaction","rt.tstart":p,"rt.end":m},function(){n();BOOMR.fireEvent("interaction")},C)}P.interactionDelayed=function(){return d};P.interactionDelayedTime=function(){return Math.ceil(f)};P.interactionAvgDelay=function(){if(0<c)return Math.ceil(l/c)};P.timeToFirstInteraction=function(){if(s)return s-k};P.firstInputDelay=function(){if(null!==u)return u};BOOMR.subscribe("spa_init",function i(){M=!0;n()},null,C);return{interact:function R(e,n,t){var i=0;BOOMR.hrNow();n=n||BOOMR.now();if(O){c++;s=s||(t&&t.timeStamp?t.timeStamp+k:n);if(t&&t.timeStamp&&(!C.isSafari||r===window)){i=14e11<t.timeStamp?n-t.timeStamp:BOOMR.hrNow()-t.timeStamp;l+=i;null===u&&(u=Math.ceil(i));if(50<i){o.increment("interdly");d++;f+=i}}o.increment("inter");if(!M&&C.afterOnloadMonitoring){m=BOOMR.now();if(!p){p=m;h=setTimeout(B,3e4)}if(g){clearTimeout(g);g=!1}g=setTimeout(B,a)}}},analyze:function v(e){var n;C.addToBeacon("c.i.dc",P.interactionDelayed());C.addToBeacon("c.i.dt",P.interactionDelayedTime());C.addToBeacon("c.i.a",P.interactionAvgDelay());if(!t){BOOMR.plugins.EventTiming&&BOOMR.plugins.EventTiming.is_enabled()&&(n=BOOMR.plugins.EventTiming.metrics.firstInputDelay());n||null===u||(n=P.firstInputDelay());if(n){C.addToBeacon("c.fid",Math.ceil(n),!0);C.addToBeacon("c.ttfi",BOOMR.plugins.EventTiming.metrics.timeToFirstInteraction()||P.timeToFirstInteraction());t=!0}}},stop:function y(){O=!1},onBeacon:function w(){m=p=l=c=d=f=0;M=!1;n()}}},d=function(e,n,t){var i,r,o=!0;function a(){if(o){t.interact("pd",i,r);r=i=null;BOOMR.utils.removeListener(window,"pointerup",a)}}function s(e){if(o&&e.cancelable){i=BOOMR.now();r=e;BOOMR.utils.addListener(window,"pointerup",a,T)}}function u(){o=!1;BOOMR.utils.removeListener(window,"pointerdown",s);BOOMR.utils.removeListener(window,"pointerup",a);BOOMR.utils.removeListener(window,"pointercancel",u)}BOOMR.utils.addListener(window,"pointerdown",s,T);BOOMR.utils.addListener(window,"pointercancel",u,T);return{stop:u}},f=function(e,n,t){var i=!0;function r(e){if(i&&e.cancelable){var n=BOOMR.now();t.interact("md",n,e)}}BOOMR.utils.addListener(window,"mousedown",r,T);return{stop:function o(){i=!1;BOOMR.utils.removeListener(window,"mousedown",r)}}},O=function(e,n,t){var i=!0;function r(e){if(i&&e.cancelable){var n=BOOMR.now();t.interact("ts",n,e)}}BOOMR.utils.addListener(window,"touchstart",r,T);return{stop:function o(){i=!1;BOOMR.utils.removeListener(window,"touchstart",r)}}},p=function(e,t,n){t.register("vis",_);var i={visible:0,hidden:1,prerender:2,unloaded:3},r=!0;BOOMR.subscribe("visibility_changed",function(e){var n=BOOMR.now();if(r){t.increment("vis");t.log(4,n,{s:i[BOOMR.visibilityState()]})}});return{stop:function o(){r=!1}}},m=function(e,r,n){r.register("orn",_);var o=!0;function t(e){var n=BOOMR.now(),t=window.orientation;if(o){r.increment("orn");var i=window.screen&&(screen.orientation||screen.msOrientation||screen.mozOrientation||{});i&&"number"==typeof i.angle&&(t=screen.orientation.angle);"number"==typeof t&&r.log(5,n,{a:t})}}BOOMR.utils.addListener(e,"orientationchange",t,T);return{stop:function i(){o=!1;BOOMR.utils.removeListener(e,"orientationchange",t)}}},g=function(e,t){t.register("mem",v,!0);t.register("bat",w,!0);t.register("domsz",v,!0);t.register("domln",v,!0);t.register("mut",_);var n,i=e.document,r=!0,o=!1,a=null,s=0,u=0,c=i.getElementsByTagName("*");function l(){r&&a&&t.set("bat",a.level)}o=setInterval(function d(){var e=E&&E.memory&&E.memory.usedJSHeapSize;e&&t.set("mem",e);u=c.length;t.set("domsz",i.documentElement.innerHTML.length);t.set("domln",u);if(0<s){var n=Math.min(Math.round(s/u*100),100);t.set("mut",n);s=0}},1e3);e.navigator&&"function"==typeof e.navigator.getBattery&&e.navigator.getBattery().then(function(e){(a=e).onlevelchange&&(a.onlevelchange=l)});BOOMR.utils.isMutationObserverSupported()&&(n=BOOMR.utils.addObserver(i,{childList:!0,subtree:!0},null,function f(e){e.forEach(function(e){if("childList"!==e.type)return!0;for(var n=0;n<e.addedNodes.length;n++){var t=e.addedNodes[n];s++;s+=t.getElementsByTagName?t.getElementsByTagName("*").length:0}});return!0},null,this));return{stop:function O(){r=!1;if(o){clearInterval(o);o=!1}if(n&&n.observer){n.observer.disconnect();n=null}a&&a.onlevelchange&&(a.onlevelchange=null);c=null}}},C={monitorLongTasks:!0,monitorPageBusy:!0,monitorFrameRate:!0,monitorInteractions:!0,monitorStats:!1,monitorLayoutShifts:!1,afterOnload:!1,afterOnloadMaxLength:6e4,afterOnloadMinWait:5e3,waitAfterOnload:!1,ttiWaitForFrameworkReady:!1,frameworkStatusDomSelector:!1,ttiWaitForHeroImages:!1,sendLog:!0,sendTimeline:!0,logMaxEntries:100,initialized:!1,complete:!1,isSpa:!1,firedPageReady:!1,afterOnloadMonitoring:!1,frameworkReady:null,timeline:null,ttiMethod:null,longTaskMonitor:null,pageBusyMonitor:null,frameRateMonitor:null,interactionMonitor:null,scrollMonitor:null,clickMonitor:null,keyMonitor:null,mouseMonitor:null,visibilityMonitor:null,orientationMonitor:null,touchStartMonitor:null,mouseDownMonitor:null,pointerDownMonitor:null,statsMonitor:null,layoutShiftMonitor:null,monitors:["timeline","longTaskMonitor","pageBusyMonitor","frameRateMonitor","scrollMonitor","keyMonitor","clickMonitor","mouseMonitor","interactionMonitor","visibilityMonitor","orientationMonitor","statsMonitor","layoutShiftMonitor","touchStartMonitor","mouseDownMonitor","pointerDownMonitor"],timeOfLastBeacon:0,hasAddedDataToBeacon:!1,isSafari:window&&window.navigator&&window.navigator.vendor&&-1!==window.navigator.vendor.indexOf("Apple"),onBeforeBeacon:function(){C.runAllAnalyzers()},runAllAnalyzers:function(){var e,n;if(!C.hasAddedDataToBeacon){for(e=0;e<C.monitors.length;e++)(n=C[C.monitors[e]])&&"function"==typeof n.analyze&&n.analyze(C.timeOfLastBeacon);C.addToBeacon("c.lb",C.timeOfLastBeacon?C.timeOfLastBeacon.toString(36):0);C.timeOfLastBeacon=BOOMR.now();C.hasAddedDataToBeacon=!0}},onBeacon:function(e){var n;if(!e||!("undefined"!=typeof e.early||e["http.initiator"]&&0===e["http.initiator"].indexOf("api_custom_"))){for(n=0;n<C.monitors.length;n++){var t=C[C.monitors[n]];if(t){C.afterOnload||"function"==typeof t.stop&&t.stop();"function"==typeof t.onBeacon&&t.onBeacon()}}C.hasAddedDataToBeacon=!1}},onXhrLoad:function(e){e&&BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS)&&(C.isSpa=!0);e&&"spa_hard"===e.initiator&&C.onPageReady()},onPageReady:function(){C.firedPageReady=!0;if(C.afterOnload&&C.monitorInteractions){C.afterOnloadMonitoring=!0;C.isSpa||"number"!=typeof C.afterOnloadMaxLength||setTimeout(function(){C.afterOnloadMonitoring=!1},C.afterOnloadMaxLength)}if(C.waitAfterOnload){var e=BOOMR.now();setTimeout(function n(){if(BOOMR.now()-e>C.waitAfterOnload){C.complete=!0;BOOMR.sendBeacon()}else{C.timeline.analyze();if(P.timeToInteractiveDone()){C.complete=!0;BOOMR.sendBeacon()}else setTimeout(n,500)}},500)}else C.complete=!0},addToBeacon:function(e,n,t){0!==n&&void 0!==n||t?BOOMR.addVar(e,n,!0):BOOMR.removeVar(e)}};BOOMR.plugins.Continuity={init:function(e){BOOMR.utils.pluginConfig(C,e,"Continuity",["monitorLongTasks","monitorPageBusy","monitorFrameRate","monitorInteractions","monitorStats","afterOnload","afterOnloadMaxLength","afterOnloadMinWait","waitAfterOnload","ttiWaitForFrameworkReady","ttiWaitForHeroImages","frameworkStatusDomSelector","sendLog","logMaxEntries","sendTimeline","monitorLayoutShifts"]);if(C.initialized)return this;C.initialized=!0;C.timeline=new n(BOOMR.now());if(BOOMR.window){if(C.monitorLongTasks&&BOOMR.window.PerformanceObserver&&BOOMR.window.PerformanceLongTaskTiming){C.longTaskMonitor=new i(BOOMR.window,C.timeline);C.ttiMethod="lt"}if(C.monitorFrameRate&&"function"==typeof BOOMR.window.requestAnimationFrame){C.frameRateMonitor=new o(BOOMR.window,C.timeline);C.ttiMethod||(C.ttiMethod="raf")}if(C.monitorPageBusy&&(!BOOMR.window.PerformanceObserver||!BOOMR.window.PerformanceLongTaskTiming||!C.monitorLongTasks)){C.pageBusyMonitor=new r(BOOMR.window,C.timeline);C.ttiMethod||(C.ttiMethod="b")}if(C.monitorInteractions){C.interactionMonitor=new l(BOOMR.window,C.timeline,C.afterOnloadMinWait);C.scrollMonitor=new a(BOOMR.window,C.timeline,C.interactionMonitor);C.keyMonitor=new u(BOOMR.window,C.timeline,C.interactionMonitor);C.clickMonitor=new s(BOOMR.window,C.timeline,C.interactionMonitor);C.mouseMonitor=new c(BOOMR.window,C.timeline,C.interactionMonitor);C.visibilityMonitor=new p(BOOMR.window,C.timeline,C.interactionMonitor);C.orientationMonitor=new m(BOOMR.window,C.timeline,C.interactionMonitor);C.touchStartMonitor=new O(BOOMR.window,C.timeline,C.interactionMonitor);C.mouseDownMonitor=new f(BOOMR.window,C.timeline,C.interactionMonitor);C.pointerDownMonitor=new d(BOOMR.window,C.timeline,C.interactionMonitor)}C.monitorStats&&(C.statsMonitor=new g(BOOMR.window,C.timeline,C.interactionMonitor));C.monitorLayoutShifts&&BOOMR.window.PerformanceObserver&&(C.layoutShiftMonitor=new t(BOOMR.window))}BOOMR.addVar("c.e",k.toString(36));BOOMR.addVar("c.tti.m",C.ttiMethod);BOOMR.subscribe("before_beacon",C.onBeforeBeacon,null,C);BOOMR.subscribe("beacon",C.onBeacon,null,C);BOOMR.subscribe("page_ready",C.onPageReady,null,C);BOOMR.subscribe("xhr_load",C.onXhrLoad,null,C);return this},is_complete:function(e){return C.complete||e&&("error"===e["http.initiator"]||"undefined"!=typeof e.early)},frameworkReady:function(){C.frameworkReady=BOOMR.now()},metrics:P}}}();!function(){var c,t=!1,n=!1,l=!1,d=!1,f=!1,O=!0,p=!1,m=!1,g=!1,r=[],o=!1;if(!BOOMR.plugins.SPA&&BOOMR.plugins.AutoXHR){var a={spaHardMissedOnComplete:function(e){var n,t=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart();o=!1;BOOMR.addVar("spa.missed","1",!0);BOOMR.plugins.RT&&BOOMR.plugins.RT.clearTimer("t_done");e.timing.requestStart=t;0===e.resources.length&&(n=BOOMR.getPerformance())&&n.timing&&n.timing.navigationStart&&n.timing.loadEventEnd&&(e.timing.loadEventEnd=n.timing.loadEventEnd)},pageReady:function(){d=!0}};BOOMR.plugins.SPA={is_complete:function(){return!o},init:function(e){if(e&&e.instrument_xhr){f=e.instrument_xhr;l&&f&&BOOMR.plugins.AutoXHR.enableAutoXhr()}if(!n){n=!0;BOOMR.subscribe("page_ready",a.pageReady,null,a)}},register:function(e){r.push(e)},supported_frameworks:function(){return r},onLoadSpaHardMissed:function(){if(!l){d=!0;f&&BOOMR.plugins.AutoXHR.enableAutoXhr();o=!0;g?o=!1:BOOMR.plugins.SPA.route_change(a.spaHardMissedOnComplete)}},hook:function(e,n){"function"==typeof(n=n||{}).routeFilter&&(p=n.routeFilter);"function"==typeof n.routeChangeWaitFilter&&(m=n.routeChangeWaitFilter);n.disableHardNav&&(g=n.disableHardNav);if(t)return this;e&&BOOMR.attach_page_ready(this.onLoadSpaHardMissed);t=!0;return this},route_change:function(n,e){var t=!1,i=O&&!g?"spa_hard":"spa";if(!c||!c.wait){if("spa"==i&&p)try{if(!p.apply(null,e))return}catch(u){BOOMR.addError(u,"SPA.route_change.routeFilter")}l=!0;var r=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart(),o=d?BOOMR.now():r,a=BOOMR.window.document.URL;BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),a]);var s={timing:{requestStart:o},initiator:i,url:a};O=!1;if(!d||"function"==typeof n){d=!0;s.onComplete=function(e){if(!t){t=!0;BOOMR.fireEvent("spa_navigation")}"function"==typeof n&&n(e)}}if("spa"==i&&m)try{if(m.apply(null,arguments)){s.wait=!0;c=s}}catch(u){BOOMR.addError(u,"SPA.route_change.routeChangeWaitFilter")}s.index=BOOMR.plugins.AutoXHR.getMutationHandler().addEvent(s);f&&BOOMR.plugins.AutoXHR.enableAutoXhr()}},last_location:function(e){lastLocationChange=e},current_spa_nav:function(){return d?"spa":"spa_hard"},wait_complete:function(){if(c){c.wait=!1;c.waitComplete&&c.waitComplete();c=null}},markNavigationComplete:function(){var e,n,t=BOOMR.plugins.AutoXHR.getMutationHandler();c&&c.wait&&BOOMR.plugins.SPA.wait_complete();if(t&&0<t.pending_events.length)for(e=t.pending_events.length-1;0<=e;e--)if((n=t.pending_events[e])&&BOOMR.utils.inArray(n.type,BOOMR.constants.BEACON_TYPE_SPAS)){if(n.complete)break;t.nodesWaitingFor(e);BOOMR.addVar("spa.forced","1",!0);BOOMR.addVar("spa.waiting",t.nodesWaitingFor(),!0);t.completeEvent(e);return}},isSpaNavInProgress:function(){var e,n,t=BOOMR.plugins.AutoXHR.getMutationHandler();if(t&&0<t.pending_events.length)for(e=t.pending_events.length-1;0<=e;e--)if((n=t.pending_events[e])&&BOOMR.utils.inArray(n.type,BOOMR.constants.BEACON_TYPE_SPAS))return!n.complete;return!1},isSinglePageApp:function(e){var n=!1,t=this.supported_frameworks();for(i=0;i<t.length;i++){var r=t[i];if(e[r]&&e[r].enabled){n=!0;break}}return n}};BOOMR.plugins.SPA.waitComplete=BOOMR.plugins.SPA.wait_complete}}();!function(){var u={monitorHistory:!0,enabled:!0,hooked:!1,routeChangeInProgress:!1,disableHardNav:!1,routeFilter:undefined,routeChangeWaitFilter:undefined,monitorReplaceState:!0,a:undefined,browserOnloadBeforeSetup:!1,DEPRECATED_PLUGINS:["Angular","Backbone","Ember"],resetRouteChangeInProgress:function(e){if(!e||!("undefined"!=typeof e.early||e["http.initiator"]&&0===e["http.initiator"].indexOf("api_custom_"))){u.routeChangeInProgress&&clearTimeout(u.routeChangeInProgress);u.routeChangeInProgress=!1}},setRouteChangeInProgress:function(){u.routeChangeInProgress&&clearTimeout(u.routeChangeInProgress);u.routeChangeInProgress=setTimeout(u.resetRouteChangeInProgress,50)},routeChange:function(e){if(u.enabled){if(u.disableHardNav&&!BOOMR.onloadFired())return;if(!u.routeChangeInProgress){if(e.toUrl){u.a.href=e.toUrl;e.toUrl=u.a.href}BOOMR.plugins.SPA.route_change(null,[e.type,e.fromUrl,e.toUrl])}}else u.resetRouteChangeInProgress()}};if(!BOOMR.plugins.History&&"undefined"!=typeof BOOMR.plugins.SPA&&"undefined"!=typeof BOOMR.plugins.AutoXHR&&BOOMR.window&&BOOMR.window.document){BOOMR.plugins.SPA.register("History");u.a=BOOMR.window.document.createElement("A");BOOMR.plugins.History={is_complete:function(){return!0},hook:function(e,n,t){(t=t||{}).disableHardNav=u.disableHardNav;u.routeFilter&&(t.routeFilter=u.routeFilter);u.routeChangeWaitFilter&&(t.routeChangeWaitFilter=u.routeChangeWaitFilter);!u.hooked&&u.monitorHistory&&function s(){var i,o,n,e,t,r=BOOMR.window.history;"function"==typeof r.pushState&&(r.pushState=(i=r.pushState,function(e,n,t){u.routeChange({type:"pushState",fromUrl:BOOMR.window.document.URL,toUrl:t});return i.apply(this,arguments)}));u.monitorReplaceState&&"function"==typeof r.replaceState&&(r.replaceState=(o=r.replaceState,function(e,n,t){var i=BOOMR.window.document.URL,r=i;if(3<=arguments.length&&null!=t){u.a.href=t;r=u.a.href}BOOMR.plugins.SPA.isSpaNavInProgress()&&r===i||u.routeChange({type:"pushState",fromUrl:BOOMR.window.document.URL,toUrl:t});return o.apply(this,arguments)}));"function"==typeof r.go&&(r.go=(n=r.go,function(e){u.routeChange({type:"go",fromUrl:BOOMR.window.document.URL});return n.apply(this,arguments)}));"function"==typeof r.back&&(r.back=(e=r.back,function(){u.routeChange({type:"back",fromUrl:BOOMR.window.document.URL});return e.apply(this,arguments)}));"function"==typeof r.forward&&(r.forward=(t=r.forward,function(){u.routeChange({type:"forward",fromUrl:BOOMR.window.document.URL});return t.apply(this,arguments)}));BOOMR.window.addEventListener("hashchange",function(e){var n=(e||{}).newURL;u.routeChange({type:"hashchange",toUrl:n})});function a(){BOOMR.window.addEventListener("popstate",function(e){u.routeChange({type:"popstate",toUrl:BOOMR.window.document.URL})})}BOOMR.hasBrowserOnloadFired()?a():BOOMR.window.addEventListener("load",function(){setTimeout(a,0)});BOOMR.subscribe("beacon",u.resetRouteChangeInProgress);BOOMR.subscribe("spa_cancel",u.resetRouteChangeInProgress);BOOMR.subscribe("spa_init",u.setRouteChangeInProgress);u.browserOnloadBeforeSetup=BOOMR.hasBrowserOnloadFired()}();n=u.browserOnloadBeforeSetup;BOOMR.plugins.SPA.hook(n,t);if(!u.hooked&&!u.browserOnloadBeforeSetup&&(!u.disableHardNav||BOOMR.onloadFired())){BOOMR.plugins.SPA.route_change();u.setRouteChangeInProgress()}u.hooked=!0;return this},init:function(e){BOOMR.utils.pluginConfig(u,e,"History",["enabled","monitorHistory","disableHardNav","routeFilter","routeChangeWaitFilter","monitorReplaceState"]);u.enabled&&this.hook();return this},disable:function(){u.enabled=!1;return this},enable:function(){u.enabled=!0;return this}};for(var e=0;e<u.DEPRECATED_PLUGINS.length;e++){var n=u.DEPRECATED_PLUGINS[e];BOOMR.plugins[n]=BOOMR.plugins.History;BOOMR.plugins[n]={init:function(n){return function(e){BOOMR.utils.pluginConfig(u,e,n,["enabled"]);u.enabled&&BOOMR.plugins.History.hook(undefined,undefined,{});return BOOMR.plugins[n]}}(n),enable:BOOMR.plugins.History.enable,hook:BOOMR.plugins.History.hook,is_complete:BOOMR.plugins.History.is_complete};BOOMR.plugins.SPA.register(n)}}}();!function(){if(!BOOMR.plugins.PaintTiming){var o={"first-paint":"fp","first-contentful-paint":"fcp","largest-contentful-paint":"lcp"},a={initialized:!1,complete:!1,supported:null,timingCache:{},observer:null,externalMetrics:{},done:function(e,n){var t,i,r;if(this.complete)return this;if("load"!==n&&(!e||"spa_hard"!==e.initiator)){this.complete=!0;return this}if((t=BOOMR.getPerformance())&&"function"==typeof t.getEntriesByType){if((i=t.getEntriesByType("paint"))&&i.length){BOOMR.info("This user agent supports PaintTiming","pt");for(r=0;r<i.length;r++){a.timingCache[i[r].name]=i[r].startTime;o[i[r].name]&&BOOMR.addVar("pt."+o[i[r].name],Math.floor(i[r].startTime),!0)}this.complete=!0;BOOMR.sendBeacon()}}else this.complete=!0},onObserver:function(e){var n=e.getEntries();if(0!==n.length){var t=n[n.length-1],i=t.renderTime||t.loadTime;a.timingCache[t.entryType]=i;BOOMR.addVar("pt.lcp",Math.floor(i),!0);a.externalMetrics.lcp=function(){return Math.floor(i)}}}};BOOMR.plugins.PaintTiming={init:function(){if(!this.is_supported()){a.complete=!0;a.initialized=!0}if(!a.complete&&"hidden"===BOOMR.visibilityState()){BOOMR.addVar("pt.hid",1,!0);a.complete=!0}if(!a.initialized){BOOMR.subscribe("page_ready",a.done,"load",a);BOOMR.subscribe("xhr_load",a.done,"xhr",a);BOOMR.subscribe("before_unload",a.done,null,a);if("function"==typeof BOOMR.window.PerformanceObserver&&"function"==typeof window.LargestContentfulPaint){a.observer=new BOOMR.window.PerformanceObserver(a.onObserver);a.observer.observe({type:"largest-contentful-paint",buffered:!0})}a.initialized=!0}return this},is_complete:function(){return!0},is_enabled:function(){return a.initialized&&this.is_supported()},is_supported:function(){if(null!==a.supported)return a.supported;var e=BOOMR.getPerformance();a.supported=e&&"undefined"!=typeof window.PerformancePaintTiming&&"function"==typeof e.getEntriesByType;return a.supported},getTimingFor:function(e){var n,t,i;if(a.timingCache[e])return a.timingCache[e];if(this.is_supported()){if((i=BOOMR.getPerformance())&&"function"==typeof i.getEntriesByType&&(n=i.getEntriesByType("paint"))&&n.length)for(t=0;t<n.length;t++)if(n[t].name===e){a.timingCache[e]=n[t].startTime;return a.timingCache[e]}}},metrics:a.externalMetrics}}}();!function(){if(!BOOMR.plugins.NavigationTiming){var l={complete:!1,fullySent:!1,sendBeacon:function(){this.complete=!0;BOOMR.sendBeacon()},xhr_done:function(e){var n;if(e&&"spa_hard"===e.initiator)l.done(e);else if(e&&"spa"===e.initiator)l.sendBeacon();else{BOOMR.window;var t,i,r={};if(e){e.data&&(e=e.data);if((n=BOOMR.getPerformance())&&e.restiming){r={nt_red_st:e.restiming.redirectStart,nt_red_end:e.restiming.redirectEnd,nt_fet_st:e.restiming.fetchStart,nt_dns_st:e.restiming.domainLookupStart,nt_dns_end:e.restiming.domainLookupEnd,nt_con_st:e.restiming.connectStart,nt_con_end:e.restiming.connectEnd,nt_req_st:e.restiming.requestStart,nt_res_st:e.restiming.responseStart,nt_res_end:e.restiming.responseEnd};e.restiming.secureConnectionStart&&(r.nt_ssl_st=e.restiming.secureConnectionStart);for(i in r)if(r.hasOwnProperty(i)&&r[i]){r[i]+=n.timing.navigationStart;r[i]=Math.floor(r[i])}}if(e.timing){t=e.timing;r.nt_req_st||(r.nt_req_st=t.requestStart);r.nt_res_st||(r.nt_res_st=t.responseStart);r.nt_res_end||(r.nt_res_end=t.responseEnd);r.nt_domint=t.domInteractive;r.nt_domcomp=t.domComplete;r.nt_load_st=t.loadEventEnd;r.nt_load_end=t.loadEventEnd}for(i in r)r.hasOwnProperty(i)&&!r[i]&&delete r[i];BOOMR.addVar(r,undefined,!0);l.sendBeacon()}}},done:function(){var e,n,t,i,r,o,a=BOOMR.window,s={},u=0,c=!1;if(this.complete)return this;if(e=BOOMR.getPerformance()){if("function"==typeof e.getEntriesByType)if((i=e.getEntriesByType("navigation"))&&i.length){BOOMR.info("This user agent supports NavigationTiming2","nt");i=i[0];u=e.timing?e.timing.navigationStart:0}else i=undefined;if(!i&&e.timing){BOOMR.info("This user agent supports NavigationTiming","nt");i=e.timing}if(i){!(s={nt_nav_st:e.timing?e.timing.navigationStart:0,nt_red_st:d(u,i.redirectStart),nt_red_end:d(u,i.redirectEnd),nt_fet_st:d(u,i.fetchStart),nt_dns_st:d(u,i.domainLookupStart),nt_dns_end:d(u,i.domainLookupEnd),nt_con_st:d(u,i.connectStart),nt_con_end:d(u,i.connectEnd),nt_req_st:d(u,i.requestStart),nt_res_st:d(u,i.responseStart),nt_res_end:d(u,i.responseEnd),nt_domloading:d(u,i.domLoading),nt_domint:d(u,i.domInteractive),nt_domcontloaded_st:d(u,i.domContentLoadedEventStart),nt_domcontloaded_end:d(u,i.domContentLoadedEventEnd),nt_domcomp:d(u,i.domComplete),nt_load_st:d(u,i.loadEventStart),nt_load_end:d(u,i.loadEventEnd),nt_unload_st:d(u,i.unloadEventStart),nt_unload_end:d(u,i.unloadEventEnd)}).nt_domloading&&e&&e.timing&&e.timing.domLoading&&(s.nt_domloading=e.timing.domLoading);i.secureConnectionStart&&(s.nt_ssl_st=d(u,i.secureConnectionStart));e.timing&&e.timing.msFirstPaint&&(s.nt_first_paint=e.timing.msFirstPaint);i.workerStart&&(s.nt_worker_start=d(u,i.workerStart));if(i.decodedBodySize||i.transferSize){s.nt_enc_size=i.encodedBodySize;s.nt_dec_size=i.decodedBodySize;s.nt_trn_size=i.transferSize}i.nextHopProtocol&&(s.nt_protocol=i.nextHopProtocol)}if(!s.nt_first_paint&&BOOMR.plugins.PaintTiming){c=BOOMR.plugins.PaintTiming.is_supported();(r=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"))&&(s.nt_first_paint=d(u,r))}if((!s.nt_protocol||!s.nt_first_paint)&&(!i||""!==i.nextHopProtocol)&&!c&&a.chrome&&"function"==typeof a.chrome.loadTimes&&(t=a.chrome.loadTimes())){s.nt_spdy=t.wasFetchedViaSpdy?1:0;s.nt_cinf=t.connectionInfo;"number"==typeof t.firstPaintTime&&0!==t.firstPaintTime&&(s.nt_first_paint=Math.round(1e3*t.firstPaintTime))}if(e.navigation){n=e.navigation;s.nt_red_cnt=n.redirectCount;s.nt_nav_type=n.type}for(o in s)s.hasOwnProperty(o)&&s[o]===undefined&&delete s[o];BOOMR.addVar(s,undefined,!0);i&&(i.requestStart&&i.navigationStart&&i.requestStart<i.navigationStart||i.responseStart&&i.navigationStart&&i.responseStart<i.navigationStart||i.responseStart&&i.fetchStart&&i.responseStart<i.fetchStart||i.navigationStart&&i.fetchStart<i.navigationStart||i.responseEnd&&i.responseEnd>BOOMR.now()+864e5)&&BOOMR.addVar("nt_bad",1,!0);0<s.nt_load_end&&(this.fullySent=!0)}l.sendBeacon()},clear:function(e){this.complete=!(e&&e.early)&&this.fullySent},prerenderToVisible:function(){this.complete=!1;this.done()},onBeforeEarlyBeacon:function(e){e&&"undefined"!=typeof e.initiator&&"spa_hard"!==e.initiator||this.done()}};BOOMR.plugins.NavigationTiming={init:function(){if(!l.initialized){BOOMR.subscribe("page_ready",l.done,null,l);BOOMR.subscribe("prerender_to_visible",l.prerenderToVisible,null,l);BOOMR.subscribe("before_early_beacon",l.onBeforeEarlyBeacon,null,l);BOOMR.subscribe("xhr_load",l.xhr_done,null,l);BOOMR.subscribe("before_unload",l.done,null,l);BOOMR.subscribe("beacon",l.clear,null,l);l.initialized=!0}return this},is_complete:function(){return!0}}}function d(e,n){return"number"!=typeof n||0===n?undefined:Math.floor((e||0)+n)}}();!function(){if(!BOOMR.plugins.UserTiming){var s={complete:!1,initialized:!1,supported:!1,options:{from:0,window:BOOMR.window},getUserTiming:function(){var e=this.findUserTimingForFrame(s.options.window);s.options.from&&(e=e.filter(function(e){return e.startTime+e.duration>=s.options.from}));var n=window.UserTimingCompression||BOOMR.window.UserTimingCompression;if(void 0===n){if(0===e.length)return null;for(var t={},i=0,r=e.length;i<r;i++){var o=e[i];t[o.entryType]=t[o.entryType]||{};"mark"===o.entryType?t[o.entryType][o.name]=o.startTime:"measure"===o.entryType&&(t[o.entryType][o.name]=o.duration)}return JSON.stringify(t)}var a=n.compressUserTiming(e);return n.compressForUri(a)},addEntriesToBeacon:function(e){var n,t=BOOMR.hrNow();if(!(this.complete||e&&"undefined"!=typeof e.early)){(n=this.getUserTiming())&&BOOMR.addVar("usertiming",n,!0);this.options.from=t;this.complete=!0}},findUserTimingForFrame:function(e){var n;if(!e)return[];try{e.location&&e.location.href;if(!("performance"in e&&e.performance&&e.performance.getEntriesByType))return n;n=(n=e.performance.getEntriesByType("mark")).concat(e.performance.getEntriesByType("measure"))}catch(t){return n}return n},clearMetrics:function(e){this.complete=!1},subscribe:function(){BOOMR.subscribe("before_beacon",this.addEntriesToBeacon,null,this);BOOMR.subscribe("beacon",this.clearMetrics,null,this)},pageReady:function(){this.checkSupport()&&this.subscribe()},checkSupport:function(){if(this.supported)return!0;var e=BOOMR.getPerformance();if(e&&"function"==typeof e.getEntriesByType){var n=e.getEntriesByType("mark"),t=e.getEntriesByType("measure");if(BOOMR.utils.isArray(n)&&BOOMR.utils.isArray(t)){BOOMR.info("Client supports UserTiming API","usertiming");return this.supported=!0}}return!1}};BOOMR.plugins.UserTiming={init:function(e){if(s.initialized)return this;s.checkSupport()?s.subscribe():BOOMR.subscribe("page_ready",s.pageReady,null,s);s.initialized=!0;return this},is_complete:function(){return!0},is_supported:function(){return s.initialized&&s.supported}}}}();!function(){BOOMR.utils=BOOMR.utils||{};if(!BOOMR.utils||!BOOMR.utils.Compression){var a=BOOMR.utils.Compression={};a.jsUrl=function s(e){function n(e){return/[^\w-.]/.test(e)?e=e.replace(/[^\w-.]/g,function(e){return"$"===e?"!":(e=e.charCodeAt(0))<256?"*"+("00"+e.toString(16)).slice(-2):"**"+("0000"+e.toString(16)).slice(-4)}):e}var t=[];switch(typeof e){case"number":return isFinite(e)?"~"+e:"~null";case"string":return"~'"+n(e);case"boolean":return"~"+e;case"object":if(!e)return"~null";if(BOOMR.utils.isArray(e)){for(var i=0;i<e.length;i++)i in e&&(t[i]=a.jsUrl(e[i])||"~null");return"~("+(t.join("")||"~")+")"}for(var r in e)if(e.hasOwnProperty(r)){var o=a.jsUrl(e[r]);o&&t.push(n(r)+o)}return"~("+t.sort().join("~")+")";default:return undefined}}}}();!function(){if(!BOOMR.plugins.EventTiming){var t={click:0,dblclick:1,mousedown:2,mouseup:3,mousemove:4,touchstart:5,touchend:6,touchmove:7,keydown:8,keyup:9,keypress:10,wheel:11,pointerdown:12,pointerup:13,pointermove:14,compositionstart:17,compositionupdate:18,compositionend:19,contextmenu:20},i={initialized:!1,supported:null,observerEvent:null,observerFirstInput:null,entries:[],firstInputDelay:null,timeToFirstInteraction:null,onBeforeBeacon:function(){if(i.entries&&i.entries.length){for(var e=[],n=0;n<i.entries.length;n++)e.push({n:t[i.entries[n].name]?t[i.entries[n].name]:i.entries[n].name,s:Math.round(i.entries[n].startTime).toString(36),d:Math.round(i.entries[n].duration).toString(36),p:Math.round(i.entries[n].processingEnd-i.entries[n].processingStart).toString(36),c:i.entries[n].cancelable?1:0,fi:"first-input"===i.entries[n].entryType?1:undefined});BOOMR.addVar("et.e",BOOMR.utils.serializeForUrl(e),!0)}i.entries=[];if(null!==i.firstInputDelay){BOOMR.addVar("et.fid",Math.ceil(i.firstInputDelay),!0);i.firstInputDelay=null}},onEventTiming:function(e){i.entries=i.entries.concat(e.getEntries())},onFirstInput:function(e){var n=e.getEntries();i.entries=i.entries.concat(n);i.firstInputDelay=n[0].processingStart-n[0].startTime;i.timeToFirstInteraction=n[0].startTime}};BOOMR.plugins.EventTiming={init:function(){this.is_supported()||(i.initialized=!0);if(!i.initialized){BOOMR.subscribe("before_beacon",i.onBeforeBeacon,null,i);try{var e=BOOMR.window;i.observerEvent=new e.PerformanceObserver(i.onEventTiming);i.observerEvent.observe({type:["event"],buffered:!0});i.observerFirstInput=new e.PerformanceObserver(i.onFirstInput);i.observerFirstInput.observe({type:["first-input"],buffered:!0})}catch(n){i.supported=!1}i.initialized=!0}return this},is_complete:function(){return!0},is_enabled:function(){return i.initialized&&this.is_supported()},is_supported:function(){if(null!==i.supported)return i.supported;var e=BOOMR.window,n=BOOMR.getPerformance();i.supported=n&&"undefined"!=typeof e.PerformanceEventTiming&&"function"==typeof e.PerformanceObserver;i.supported&&BOOMR.info("This user agent supports EventTiming","et");return i.supported},stop:function(){if(i.observerEvent){i.observerEvent.disconnect();i.observerEvent=null}if(i.observerFirstInput){i.observerFirstInput.disconnect();i.observerFirstInput=null}},metrics:{count:function(){return i.entries.length},averageDuration:function(){if(0===i.entries.length)return 0;for(var e=0,n=0;n<i.entries.length;n++)e+=i.entries[n].duration;return e/i.entries.length},firstInputDelay:function(){return i.firstInputDelay},timeToFirstInteraction:function(){return i.timeToFirstInteraction}}}}}();BOOMR.t_end=(new Date).getTime();
