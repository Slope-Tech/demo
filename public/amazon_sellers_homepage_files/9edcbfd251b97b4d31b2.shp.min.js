/*! For license information please see 9edcbfd251b97b4d31b2.shp.min.js.LICENSE.txt */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://d3iirj8c98qsqf.cloudfront.net/shp/",n(n.s=397)}([function(e,t,n){var r=n(88);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(88);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(185);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(189);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(86);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=n(197);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},function(e,t,n){var r=n(184)();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.dom=t.IntSize=t.dumpPrettyText=t.dumpText=t.dumpBinary=t.makeBinaryWriter=t.makePrettyWriter=t.makeTextWriter=t.makeReader=void 0;const s=a(n(70));t.IntSize=s.default;const u=n(71),l=n(154),c=n(55),f=n(41),d=n(358),h=n(156),p=n(157),_=n(77),g=n(42),v=n(76);function y(){return new _.TextWriter(new v.Writeable)}function m(e){return new d.PrettyTextWriter(new v.Writeable,e)}function b(){const e=f.defaultLocalSymbolTable();return new l.BinaryWriter(e,new v.Writeable)}function w(e,t){for(const n of t)M.Value.from(n).writeTo(e);return e.close(),e.getBytes()}t.makeReader=function(e){if("string"==typeof e)return new p.TextReader(new h.StringSpan(e));const t=new Uint8Array(e);return function(e){if(e.length<4)return!1;for(let t=0;t<4;t++)if(e[t]!==c.IVM.binary[t])return!1;return!0}(t)?new u.BinaryReader(new h.BinarySpan(t)):new p.TextReader(new h.StringSpan(g.decodeUtf8(t)))},t.makeTextWriter=y,t.makePrettyWriter=m,t.makeBinaryWriter=b,t.dumpBinary=function(...e){return w(b(),e)},t.dumpText=function(...e){return g.decodeUtf8(w(y(),e))},t.dumpPrettyText=function(...e){return g.decodeUtf8(w(m(),e))};var S=n(72);Object.defineProperty(t,"Catalog",{enumerable:!0,get:function(){return S.Catalog}});var T=n(56);Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return T.Decimal}});var C=n(41);Object.defineProperty(t,"defaultLocalSymbolTable",{enumerable:!0,get:function(){return C.defaultLocalSymbolTable}});var x=n(152);Object.defineProperty(t,"IonType",{enumerable:!0,get:function(){return x.IonType}});var I=n(14);Object.defineProperty(t,"IonTypes",{enumerable:!0,get:function(){return I.IonTypes}});var E=n(74);Object.defineProperty(t,"SharedSymbolTable",{enumerable:!0,get:function(){return E.SharedSymbolTable}});var O=n(57);Object.defineProperty(t,"TimestampPrecision",{enumerable:!0,get:function(){return O.TimestampPrecision}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return O.Timestamp}});var A=n(36);Object.defineProperty(t,"toBase64",{enumerable:!0,get:function(){return A.toBase64}});var k=n(42);Object.defineProperty(t,"decodeUtf8",{enumerable:!0,get:function(){return k.decodeUtf8}});const M=o(n(158));t.dom=M;var P=n(158);Object.defineProperty(t,"load",{enumerable:!0,get:function(){return P.load}}),Object.defineProperty(t,"loadAll",{enumerable:!0,get:function(){return P.loadAll}});var N=n(170);Object.defineProperty(t,"IonEventType",{enumerable:!0,get:function(){return N.IonEventType}}),Object.defineProperty(t,"IonEventFactory",{enumerable:!0,get:function(){return N.IonEventFactory}});var L=n(363);Object.defineProperty(t,"IonEventStream",{enumerable:!0,get:function(){return L.IonEventStream}});var R=n(171);Object.defineProperty(t,"EventStreamError",{enumerable:!0,get:function(){return R.EventStreamError}});var D=n(50);Object.defineProperty(t,"ComparisonResult",{enumerable:!0,get:function(){return D.ComparisonResult}}),Object.defineProperty(t,"ComparisonResultType",{enumerable:!0,get:function(){return D.ComparisonResultType}})},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IonTypes=void 0;const r=n(152);t.IonTypes={NULL:new r.IonType(0,"null",!0,!1,!1,!1),BOOL:new r.IonType(1,"bool",!0,!1,!1,!1),INT:new r.IonType(2,"int",!0,!1,!0,!1),FLOAT:new r.IonType(4,"float",!0,!1,!0,!1),DECIMAL:new r.IonType(5,"decimal",!0,!1,!1,!1),TIMESTAMP:new r.IonType(6,"timestamp",!0,!1,!1,!1),SYMBOL:new r.IonType(7,"symbol",!0,!1,!1,!1),STRING:new r.IonType(8,"string",!0,!1,!1,!1),CLOB:new r.IonType(9,"clob",!0,!0,!1,!1),BLOB:new r.IonType(10,"blob",!0,!0,!1,!1),LIST:new r.IonType(11,"list",!1,!1,!1,!0),SEXP:new r.IonType(12,"sexp",!1,!1,!1,!0),STRUCT:new r.IonType(13,"struct",!1,!1,!1,!0)}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){e.exports=function(){"use strict";var e=Math.imul,t=Math.clz32;function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(){return(c=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function f(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){function n(){return c(e,arguments,s(this).constructor)}if(null===e||!f(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function _(e){var t=l();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function g(e,t){return v(e)||y(e,t)||m(e,t)||w()}function v(e){if(Array.isArray(e))return e}function y(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}function m(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var T=function(e){var t=Math.abs,i=Math.max,s=Math.floor;function u(e,t){var n;if(r(this,u),(n=l.call(this,e)).sign=t,Object.setPrototypeOf(h(n),u.prototype),e>u.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return n}a(u,e);var l=_(u);return o(u,[{key:"toDebugString",value:function(){var e,t=["BigInt["],n=S(this);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push((r?(r>>>0).toString(16):r)+", ")}}catch(e){n.e(e)}finally{n.f()}return t.push("]"),t.join("")}},{key:"toString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(e&e-1)?u.__toStringBasePowerOfTwo(this,e):u.__toStringGeneric(this,e,!1)}},{key:"valueOf",value:function(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}},{key:"__copy",value:function(){for(var e=new u(this.length,this.sign),t=0;t<this.length;t++)e[t]=this[t];return e}},{key:"__trim",value:function(){for(var e=this.length,t=this[e-1];0===t;)t=this[--e-1],this.pop();return 0===e&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var e=0;e<this.length;e++)this[e]=0}},{key:"__clzmsd",value:function(){return u.__clz30(this.__digit(this.length-1))}},{key:"__inplaceMultiplyAdd",value:function(e,t,n){n>this.length&&(n=this.length);for(var r=32767&e,i=e>>>15,o=0,a=t,s=0;s<n;s++){var l=this.__digit(s),c=32767&l,f=l>>>15,d=u.__imul(c,r),h=u.__imul(c,i),p=u.__imul(f,r),_=a+d+o;o=_>>>30,_&=1073741823,o+=(_+=((32767&h)<<15)+((32767&p)<<15))>>>30,a=u.__imul(f,i)+(h>>>15)+(p>>>15),this.__setDigit(s,1073741823&_)}if(0!==o||0!==a)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(e,t,n){for(var r,i=0,o=0;o<n;o++)i=(r=this.__halfDigit(t+o)+e.__halfDigit(o)+i)>>>15,this.__setHalfDigit(t+o,32767&r);return i}},{key:"__inplaceSub",value:function(e,t,n){var r=0;if(1&t){t>>=1;for(var i=this.__digit(t),o=32767&i,a=0;a<n-1>>>1;a++){var s=e.__digit(a),u=(i>>>15)-(32767&s)-r;r=1&u>>>15,this.__setDigit(t+a,(32767&u)<<15|32767&o),r=1&(o=(32767&(i=this.__digit(t+a+1)))-(s>>>15)-r)>>>15}var l=e.__digit(a),c=(i>>>15)-(32767&l)-r;if(r=1&c>>>15,this.__setDigit(t+a,(32767&c)<<15|32767&o),t+a+1>=this.length)throw new RangeError("out of bounds");0==(1&n)&&(r=1&(o=(32767&(i=this.__digit(t+a+1)))-(l>>>15)-r)>>>15,this.__setDigit(t+e.length,1073709056&i|32767&o))}else{t>>=1;for(var f=0;f<e.length-1;f++){var d=this.__digit(t+f),h=e.__digit(f),p=(32767&d)-(32767&h)-r,_=(d>>>15)-(h>>>15)-(r=1&p>>>15);r=1&_>>>15,this.__setDigit(t+f,(32767&_)<<15|32767&p)}var g=this.__digit(t+f),v=e.__digit(f),y=(32767&g)-(32767&v)-r;r=1&y>>>15;var m=0;0==(1&n)&&(r=1&(m=(g>>>15)-(v>>>15)-r)>>>15),this.__setDigit(t+f,(32767&m)<<15|32767&y)}return r}},{key:"__inplaceRightShift",value:function(e){if(0!==e){for(var t,n=this.__digit(0)>>>e,r=this.length-1,i=0;i<r;i++)t=this.__digit(i+1),this.__setDigit(i,1073741823&t<<30-e|n),n=t>>>e;this.__setDigit(r,n)}}},{key:"__digit",value:function(e){return this[e]}},{key:"__unsignedDigit",value:function(e){return this[e]>>>0}},{key:"__setDigit",value:function(e,t){this[e]=0|t}},{key:"__setDigitGrow",value:function(e,t){this[e]=0|t}},{key:"__halfDigitLength",value:function(){var e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}},{key:"__halfDigit",value:function(e){return 32767&this[e>>>1]>>>15*(1&e)}},{key:"__setHalfDigit",value:function(e,t){var n=e>>>1,r=this.__digit(n),i=1&e?32767&r|t<<15:1073709056&r|32767&t;this.__setDigit(n,i)}}],[{key:"BigInt",value:function(e){var t=Number.isFinite;if("number"==typeof e){if(0===e)return u.__zero();if(u.__isOneDigitInt(e))return 0>e?u.__oneDigit(-e,!0):u.__oneDigit(e,!1);if(!t(e)||s(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return u.__fromDouble(e)}if("string"==typeof e){var r=u.__fromString(e);if(null===r)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return r}if("boolean"==typeof e)return!0===e?u.__oneDigit(1,!1):u.__zero();if("object"===n(e)){if(e.constructor===u)return e;var i=u.__toPrimitive(e);return u.BigInt(i)}throw new TypeError("Cannot convert "+e+" to a BigInt")}},{key:"toNumber",value:function(e){var t=e.length;if(0===t)return 0;if(1===t){var n=e.__unsignedDigit(0);return e.sign?-n:n}var r=e.__digit(t-1),i=u.__clz30(r),o=30*t-i;if(1024<o)return e.sign?-1/0:1/0;var a=o-1,s=r,l=t-1,c=i+3,f=32===c?0:s<<c;f>>>=12;var d=c-12,h=12<=c?0:s<<20+c,p=20+c;for(0<d&&0<l&&(l--,f|=(s=e.__digit(l))>>>30-d,h=s<<d+2,p=d+2);0<p&&0<l;)l--,s=e.__digit(l),h|=30<=p?s<<p-30:s>>>30-p,p-=30;var _=u.__decideRounding(e,p,l,s);if((1===_||0===_&&1==(1&h))&&0==(h=h+1>>>0)&&0!=++f>>>20&&(f=0,1023<++a))return e.sign?-1/0:1/0;var g=e.sign?-2147483648:0;return a=a+1023<<20,u.__kBitConversionInts[1]=g|a|f,u.__kBitConversionInts[0]=h,u.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(e){if(0===e.length)return e;var t=e.__copy();return t.sign=!e.sign,t}},{key:"bitwiseNot",value:function(e){return e.sign?u.__absoluteSubOne(e).__trim():u.__absoluteAddOne(e,!0)}},{key:"exponentiate",value:function(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(0===t.length)return u.__oneDigit(1,!1);if(0===e.length)return e;if(1===e.length&&1===e.__digit(0))return e.sign&&0==(1&t.__digit(0))?u.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");var n=t.__unsignedDigit(0);if(1===n)return e;if(n>=u.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===e.length&&2===e.__digit(0)){var r=1+(0|n/30),i=new u(r,e.sign&&0!=(1&n));i.__initializeDigits();var o=1<<n%30;return i.__setDigit(r-1,o),i}var a=null,s=e;for(0!=(1&n)&&(a=e),n>>=1;0!==n;n>>=1)s=u.multiply(s,s),0!=(1&n)&&(a=null===a?s:u.multiply(a,s));return a}},{key:"multiply",value:function(e,t){if(0===e.length)return e;if(0===t.length)return t;var n=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&n--;var r=new u(n,e.sign!==t.sign);r.__initializeDigits();for(var i=0;i<e.length;i++)u.__multiplyAccumulate(t,e.__digit(i),r,i);return r.__trim()}},{key:"divide",value:function(e,t){if(0===t.length)throw new RangeError("Division by zero");if(0>u.__absoluteCompare(e,t))return u.__zero();var n,r=e.sign!==t.sign,i=t.__unsignedDigit(0);if(1===t.length&&32767>=i){if(1===i)return r===e.sign?e:u.unaryMinus(e);n=u.__absoluteDivSmall(e,i,null)}else n=u.__absoluteDivLarge(e,t,!0,!1);return n.sign=r,n.__trim()}},{key:"remainder",value:function(e,t){if(0===t.length)throw new RangeError("Division by zero");if(0>u.__absoluteCompare(e,t))return e;var n=t.__unsignedDigit(0);if(1===t.length&&32767>=n){if(1===n)return u.__zero();var r=u.__absoluteModSmall(e,n);return 0===r?u.__zero():u.__oneDigit(r,e.sign)}var i=u.__absoluteDivLarge(e,t,!1,!0);return i.sign=e.sign,i.__trim()}},{key:"add",value:function(e,t){var n=e.sign;return n===t.sign?u.__absoluteAdd(e,t,n):0<=u.__absoluteCompare(e,t)?u.__absoluteSub(e,t,n):u.__absoluteSub(t,e,!n)}},{key:"subtract",value:function(e,t){var n=e.sign;return n===t.sign?0<=u.__absoluteCompare(e,t)?u.__absoluteSub(e,t,n):u.__absoluteSub(t,e,!n):u.__absoluteAdd(e,t,n)}},{key:"leftShift",value:function(e,t){return 0===t.length||0===e.length?e:t.sign?u.__rightShiftByAbsolute(e,t):u.__leftShiftByAbsolute(e,t)}},{key:"signedRightShift",value:function(e,t){return 0===t.length||0===e.length?e:t.sign?u.__leftShiftByAbsolute(e,t):u.__rightShiftByAbsolute(e,t)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(e,t){return 0>u.__compareToBigInt(e,t)}},{key:"lessThanOrEqual",value:function(e,t){return 0>=u.__compareToBigInt(e,t)}},{key:"greaterThan",value:function(e,t){return 0<u.__compareToBigInt(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return 0<=u.__compareToBigInt(e,t)}},{key:"equal",value:function(e,t){if(e.sign!==t.sign)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}},{key:"notEqual",value:function(e,t){return!u.equal(e,t)}},{key:"bitwiseAnd",value:function(e,t){if(!e.sign&&!t.sign)return u.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){var n=i(e.length,t.length)+1,r=u.__absoluteSubOne(e,n),o=u.__absoluteSubOne(t);return r=u.__absoluteOr(r,o,r),u.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}return u.__absoluteAndNot(e,u.__absoluteSubOne(t)).__trim()}},{key:"bitwiseXor",value:function(e,t){if(!e.sign&&!t.sign)return u.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){var n=i(e.length,t.length),r=u.__absoluteSubOne(e,n),o=u.__absoluteSubOne(t);return u.__absoluteXor(r,o,r).__trim()}var a=i(e.length,t.length)+1;if(e.sign){var s=[t,e];e=s[0],t=s[1]}var l=u.__absoluteSubOne(t,a);return l=u.__absoluteXor(l,e,l),u.__absoluteAddOne(l,!0,l).__trim()}},{key:"bitwiseOr",value:function(e,t){var n=i(e.length,t.length);if(!e.sign&&!t.sign)return u.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){var r=u.__absoluteSubOne(e,n),o=u.__absoluteSubOne(t);return r=u.__absoluteAnd(r,o,r),u.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}var s=u.__absoluteSubOne(t,n);return s=u.__absoluteAndNot(s,e,s),u.__absoluteAddOne(s,!0,s).__trim()}},{key:"asIntN",value:function(e,t){if(0===t.length)return t;if(0>(e=s(e)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===e)return u.__zero();if(e>=u.__kMaxLengthBits)return t;var n=0|(e+29)/30;if(t.length<n)return t;var r=t.__unsignedDigit(n-1),i=1<<(e-1)%30;if(t.length===n&&r<i)return t;if((r&i)!==i)return u.__truncateToNBits(e,t);if(!t.sign)return u.__truncateAndSubFromPowerOfTwo(e,t,!0);if(0==(r&i-1)){for(var o=n-2;0<=o;o--)if(0!==t.__digit(o))return u.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===n&&r===i?t:u.__truncateToNBits(e,t)}return u.__truncateAndSubFromPowerOfTwo(e,t,!1)}},{key:"asUintN",value:function(e,t){if(0===t.length)return t;if(0>(e=s(e)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===e)return u.__zero();if(t.sign){if(e>u.__kMaxLengthBits)throw new RangeError("BigInt too big");return u.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=u.__kMaxLengthBits)return t;var n=0|(e+29)/30;if(t.length<n)return t;var r=e%30;if(t.length==n){if(0===r)return t;if(0==t.__digit(n-1)>>>r)return t}return u.__truncateToNBits(e,t)}},{key:"ADD",value:function(e,t){if(e=u.__toPrimitive(e),t=u.__toPrimitive(t),"string"==typeof e)return"string"!=typeof t&&(t=t.toString()),e+t;if("string"==typeof t)return e.toString()+t;if(e=u.__toNumeric(e),t=u.__toNumeric(t),u.__isBigInt(e)&&u.__isBigInt(t))return u.add(e,t);if("number"==typeof e&&"number"==typeof t)return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(e,t){return u.__compare(e,t,0)}},{key:"LE",value:function(e,t){return u.__compare(e,t,1)}},{key:"GT",value:function(e,t){return u.__compare(e,t,2)}},{key:"GE",value:function(e,t){return u.__compare(e,t,3)}},{key:"EQ",value:function(e,t){for(;;){if(u.__isBigInt(e))return u.__isBigInt(t)?u.equal(e,t):u.EQ(t,e);if("number"==typeof e){if(u.__isBigInt(t))return u.__equalToNumber(t,e);if("object"!==n(t))return e==t;t=u.__toPrimitive(t)}else if("string"==typeof e){if(u.__isBigInt(t))return null!==(e=u.__fromString(e))&&u.equal(e,t);if("object"!==n(t))return e==t;t=u.__toPrimitive(t)}else if("boolean"==typeof e){if(u.__isBigInt(t))return u.__equalToNumber(t,+e);if("object"!==n(t))return e==t;t=u.__toPrimitive(t)}else if("symbol"===n(e)){if(u.__isBigInt(t))return!1;if("object"!==n(t))return e==t;t=u.__toPrimitive(t)}else{if("object"!==n(e))return e==t;if("object"===n(t)&&t.constructor!==u)return e==t;e=u.__toPrimitive(e)}}}},{key:"NE",value:function(e,t){return!u.EQ(e,t)}},{key:"DataViewGetBigInt64",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return u.asIntN(64,u.DataViewGetBigUint64(e,t,n))}},{key:"DataViewGetBigUint64",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=g(n?[4,0]:[0,4],2),i=r[0],o=r[1],a=e.getUint32(t+i,n),s=e.getUint32(t+o,n),l=new u(3,!1);return l.__setDigit(0,1073741823&s),l.__setDigit(1,(268435455&a)<<2|s>>>30),l.__setDigit(2,a>>>28),l.__trim()}},{key:"DataViewSetBigInt64",value:function(e,t,n){var r=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];u.DataViewSetBigUint64(e,t,n,r)}},{key:"DataViewSetBigUint64",value:function(e,t,n){var r=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],i=0,o=0;if(0<(n=u.asUintN(64,n)).length&&(o=n.__digit(0),1<n.length)){var a=n.__digit(1);o|=a<<30,i=a>>>2,2<n.length&&(i|=n.__digit(2)<<28)}var s=g(r?[4,0]:[0,4],2),l=s[0],c=s[1];e.setUint32(t+l,i,r),e.setUint32(t+c,o,r)}},{key:"__zero",value:function(){return new u(0,!1)}},{key:"__oneDigit",value:function(e,t){var n=new u(1,t);return n.__setDigit(0,e),n}},{key:"__decideRounding",value:function(e,t,n,r){if(0<t)return-1;var i;if(0>t)i=-t-1;else{if(0===n)return-1;n--,r=e.__digit(n),i=29}var o=1<<i;if(0==(r&o))return-1;if(0!=(r&(o-=1)))return 1;for(;0<n;)if(n--,0!==e.__digit(n))return 1;return 0}},{key:"__fromDouble",value:function(e){u.__kBitConversionDouble[0]=e;var t,n=(2047&u.__kBitConversionInts[1]>>>20)-1023,r=1+(0|n/30),i=new u(r,0>e),o=1048575&u.__kBitConversionInts[1]|1048576,a=u.__kBitConversionInts[0],s=20,l=n%30,c=0;if(l<s){var f=s-l;c=f+32,t=o>>>f,o=o<<32-f|a>>>f,a<<=32-f}else if(l===s)c=32,t=o,o=a,a=0;else{var d=l-s;c=32-d,t=o<<d|a>>>32-d,o=a<<d,a=0}i.__setDigit(r-1,t);for(var h=r-2;0<=h;h--)0<c?(c-=30,t=o>>>2,o=o<<30|a>>>2,a<<=30):t=0,i.__setDigit(h,t);return i.__trim()}},{key:"__isWhitespace",value:function(e){return!!(13>=e&&9<=e)||(159>=e?32==e:131071>=e?160==e||5760==e:196607>=e?10>=(e&=131071)||40==e||41==e||47==e||95==e||4096==e:65279==e)}},{key:"__fromString",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=0,r=e.length,i=0;if(i===r)return u.__zero();for(var o=e.charCodeAt(i);u.__isWhitespace(o);){if(++i===r)return u.__zero();o=e.charCodeAt(i)}if(43===o){if(++i===r)return null;o=e.charCodeAt(i),n=1}else if(45===o){if(++i===r)return null;o=e.charCodeAt(i),n=-1}if(0===t){if(t=10,48===o){if(++i===r)return u.__zero();if(88===(o=e.charCodeAt(i))||120===o){if(t=16,++i===r)return null;o=e.charCodeAt(i)}else if(79===o||111===o){if(t=8,++i===r)return null;o=e.charCodeAt(i)}else if(66===o||98===o){if(t=2,++i===r)return null;o=e.charCodeAt(i)}}}else if(16===t&&48===o){if(++i===r)return u.__zero();if(88===(o=e.charCodeAt(i))||120===o){if(++i===r)return null;o=e.charCodeAt(i)}}if(0!==n&&10!==t)return null;for(;48===o;){if(++i===r)return u.__zero();o=e.charCodeAt(i)}var a=r-i,s=u.__kMaxBitsPerChar[t],l=u.__kBitsPerCharTableMultiplier-1;if(a>1073741824/s)return null;var c=new u(0|(29+(s*a+l>>>u.__kBitsPerCharTableShift))/30,!1),f=10>t?t:10,d=10<t?t-10:0;if(0==(t&t-1)){s>>=u.__kBitsPerCharTableShift;var h=[],p=[],_=!1;do{for(var g,v=0,y=0;;){if(g=void 0,o-48>>>0<f)g=o-48;else{if(!((32|o)-97>>>0<d)){_=!0;break}g=(32|o)-87}if(y+=s,v=v<<s|g,++i===r){_=!0;break}if(o=e.charCodeAt(i),30<y+s)break}h.push(v),p.push(y)}while(!_);u.__fillFromParts(c,h,p)}else{c.__initializeDigits();var m=!1,b=0;do{for(var w,S=0,T=1;;){if(w=void 0,o-48>>>0<f)w=o-48;else{if(!((32|o)-97>>>0<d)){m=!0;break}w=(32|o)-87}var C=T*t;if(1073741823<C)break;if(T=C,S=S*t+w,b++,++i===r){m=!0;break}o=e.charCodeAt(i)}var x=0|(s*b+(l=30*u.__kBitsPerCharTableMultiplier-1)>>>u.__kBitsPerCharTableShift)/30;c.__inplaceMultiplyAdd(T,S,x)}while(!m)}if(i!==r){if(!u.__isWhitespace(o))return null;for(i++;i<r;i++)if(o=e.charCodeAt(i),!u.__isWhitespace(o))return null}return c.sign=-1===n,c.__trim()}},{key:"__fillFromParts",value:function(e,t,n){for(var r=0,i=0,o=0,a=t.length-1;0<=a;a--){var s=t[a],u=n[a];i|=s<<o,30===(o+=u)?(e.__setDigit(r++,i),o=0,i=0):30<o&&(e.__setDigit(r++,1073741823&i),i=s>>>u-(o-=30))}if(0!==i){if(r>=e.length)throw new Error("implementation bug");e.__setDigit(r++,i)}for(;r<e.length;r++)e.__setDigit(r,0)}},{key:"__toStringBasePowerOfTwo",value:function(e,t){var n=e.length,r=t-1,i=r=(15&(r=(51&(r=(85&r>>>1)+(85&r))>>>2)+(51&r))>>>4)+(15&r),o=t-1,a=e.__digit(n-1),s=0|(30*n-u.__clz30(a)+i-1)/i;if(e.sign&&s++,268435456<s)throw new Error("string too long");for(var l=Array(s),c=s-1,f=0,d=0,h=0;h<n-1;h++){var p=e.__digit(h),_=(f|p<<d)&o;l[c--]=u.__kConversionChars[_];var g=i-d;for(f=p>>>g,d=30-g;d>=i;)l[c--]=u.__kConversionChars[f&o],f>>>=i,d-=i}var v=(f|a<<d)&o;for(l[c--]=u.__kConversionChars[v],f=a>>>i-d;0!==f;)l[c--]=u.__kConversionChars[f&o],f>>>=i;if(e.sign&&(l[c--]="-"),-1!==c)throw new Error("implementation bug");return l.join("")}},{key:"__toStringGeneric",value:function(e,t,n){var r=e.length;if(0===r)return"";if(1===r){var i=e.__unsignedDigit(0).toString(t);return!1===n&&e.sign&&(i="-"+i),i}var o,a,s=30*r-u.__clz30(e.__digit(r-1)),l=u.__kMaxBitsPerChar[t]-1,c=s*u.__kBitsPerCharTableMultiplier,f=1+(c=0|(c+=l-1)/l)>>1,d=u.exponentiate(u.__oneDigit(t,!1),u.__oneDigit(f,!1)),h=d.__unsignedDigit(0);if(1===d.length&&32767>=h){(o=new u(e.length,!1)).__initializeDigits();for(var p,_=0,g=2*e.length-1;0<=g;g--)p=_<<15|e.__halfDigit(g),o.__setHalfDigit(g,0|p/h),_=0|p%h;a=_.toString(t)}else{var v=u.__absoluteDivLarge(e,d,!0,!0);o=v.quotient;var y=v.remainder.__trim();a=u.__toStringGeneric(y,t,!0)}o.__trim();for(var m=u.__toStringGeneric(o,t,!0);a.length<f;)a="0"+a;return!1===n&&e.sign&&(m="-"+m),m+a}},{key:"__unequalSign",value:function(e){return e?-1:1}},{key:"__absoluteGreater",value:function(e){return e?-1:1}},{key:"__absoluteLess",value:function(e){return e?1:-1}},{key:"__compareToBigInt",value:function(e,t){var n=e.sign;if(n!==t.sign)return u.__unequalSign(n);var r=u.__absoluteCompare(e,t);return 0<r?u.__absoluteGreater(n):0>r?u.__absoluteLess(n):0}},{key:"__compareToNumber",value:function(e,n){if(u.__isOneDigitInt(n)){var r=e.sign,i=0>n;if(r!==i)return u.__unequalSign(r);if(0===e.length){if(i)throw new Error("implementation bug");return 0===n?0:-1}if(1<e.length)return u.__absoluteGreater(r);var o=t(n),a=e.__unsignedDigit(0);return a>o?u.__absoluteGreater(r):a<o?u.__absoluteLess(r):0}return u.__compareToDouble(e,n)}},{key:"__compareToDouble",value:function(e,t){if(t!=t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;var n=e.sign;if(n!==0>t)return u.__unequalSign(n);if(0===t)throw new Error("implementation bug: should be handled elsewhere");if(0===e.length)return-1;u.__kBitConversionDouble[0]=t;var r=2047&u.__kBitConversionInts[1]>>>20;if(2047==r)throw new Error("implementation bug: handled elsewhere");var i=r-1023;if(0>i)return u.__absoluteGreater(n);var o=e.length,a=e.__digit(o-1),s=u.__clz30(a),l=30*o-s,c=i+1;if(l<c)return u.__absoluteLess(n);if(l>c)return u.__absoluteGreater(n);var f=1048576|1048575&u.__kBitConversionInts[1],d=u.__kBitConversionInts[0],h=20,p=29-s;if(p!==(0|(l-1)%30))throw new Error("implementation bug");var _,g=0;if(p<h){var v=h-p;g=v+32,_=f>>>v,f=f<<32-v|d>>>v,d<<=32-v}else if(p===h)g=32,_=f,f=d,d=0;else{var y=p-h;g=32-y,_=f<<y|d>>>32-y,f=d<<y,d=0}if((a>>>=0)>(_>>>=0))return u.__absoluteGreater(n);if(a<_)return u.__absoluteLess(n);for(var m=o-2;0<=m;m--){0<g?(g-=30,_=f>>>2,f=f<<30|d>>>2,d<<=30):_=0;var b=e.__unsignedDigit(m);if(b>_)return u.__absoluteGreater(n);if(b<_)return u.__absoluteLess(n)}if(0!==f||0!==d){if(0===g)throw new Error("implementation bug");return u.__absoluteLess(n)}return 0}},{key:"__equalToNumber",value:function(e,n){return u.__isOneDigitInt(n)?0===n?0===e.length:1===e.length&&e.sign===0>n&&e.__unsignedDigit(0)===t(n):0===u.__compareToDouble(e,n)}},{key:"__comparisonResultToBool",value:function(e,t){return 0===t?0>e:1===t?0>=e:2===t?0<e:3===t?0<=e:void 0}},{key:"__compare",value:function(e,t,n){if(e=u.__toPrimitive(e),t=u.__toPrimitive(t),"string"==typeof e&&"string"==typeof t)switch(n){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(u.__isBigInt(e)&&"string"==typeof t)return null!==(t=u.__fromString(t))&&u.__comparisonResultToBool(u.__compareToBigInt(e,t),n);if("string"==typeof e&&u.__isBigInt(t))return null!==(e=u.__fromString(e))&&u.__comparisonResultToBool(u.__compareToBigInt(e,t),n);if(e=u.__toNumeric(e),t=u.__toNumeric(t),u.__isBigInt(e)){if(u.__isBigInt(t))return u.__comparisonResultToBool(u.__compareToBigInt(e,t),n);if("number"!=typeof t)throw new Error("implementation bug");return u.__comparisonResultToBool(u.__compareToNumber(e,t),n)}if("number"!=typeof e)throw new Error("implementation bug");if(u.__isBigInt(t))return u.__comparisonResultToBool(u.__compareToNumber(t,e),2^n);if("number"!=typeof t)throw new Error("implementation bug");return 0===n?e<t:1===n?e<=t:2===n?e>t:3===n?e>=t:void 0}},{key:"__absoluteAdd",value:function(e,t,n){if(e.length<t.length)return u.__absoluteAdd(t,e,n);if(0===e.length)return e;if(0===t.length)return e.sign===n?e:u.unaryMinus(e);var r=e.length;(0===e.__clzmsd()||t.length===e.length&&0===t.__clzmsd())&&r++;for(var i,o=new u(r,n),a=0,s=0;s<t.length;s++)a=(i=e.__digit(s)+t.__digit(s)+a)>>>30,o.__setDigit(s,1073741823&i);for(;s<e.length;s++){var l=e.__digit(s)+a;a=l>>>30,o.__setDigit(s,1073741823&l)}return s<o.length&&o.__setDigit(s,a),o.__trim()}},{key:"__absoluteSub",value:function(e,t,n){if(0===e.length)return e;if(0===t.length)return e.sign===n?e:u.unaryMinus(e);for(var r,i=new u(e.length,n),o=0,a=0;a<t.length;a++)o=1&(r=e.__digit(a)-t.__digit(a)-o)>>>30,i.__setDigit(a,1073741823&r);for(;a<e.length;a++){var s=e.__digit(a)-o;o=1&s>>>30,i.__setDigit(a,1073741823&s)}return i.__trim()}},{key:"__absoluteAddOne",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=e.length;null===n?n=new u(r,t):n.sign=t;for(var i,o=1,a=0;a<r;a++)o=(i=e.__digit(a)+o)>>>30,n.__setDigit(a,1073741823&i);return 0!==o&&n.__setDigitGrow(r,1),n}},{key:"__absoluteSubOne",value:function(e,t){for(var n,r=e.length,i=new u(t=t||r,!1),o=1,a=0;a<r;a++)o=1&(n=e.__digit(a)-o)>>>30,i.__setDigit(a,1073741823&n);if(0!==o)throw new Error("implementation bug");for(var s=r;s<t;s++)i.__setDigit(s,0);return i}},{key:"__absoluteAnd",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=e.length,i=t.length,o=i;if(r<i){o=r;var a=e,s=r;e=t,r=i,t=a,i=s}var l=o;null===n?n=new u(l,!1):l=n.length;for(var c=0;c<o;c++)n.__setDigit(c,e.__digit(c)&t.__digit(c));for(;c<l;c++)n.__setDigit(c,0);return n}},{key:"__absoluteAndNot",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=e.length,i=t.length,o=i;r<i&&(o=r);var a=r;null===n?n=new u(a,!1):a=n.length;for(var s=0;s<o;s++)n.__setDigit(s,e.__digit(s)&~t.__digit(s));for(;s<r;s++)n.__setDigit(s,e.__digit(s));for(;s<a;s++)n.__setDigit(s,0);return n}},{key:"__absoluteOr",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=e.length,i=t.length,o=i;if(r<i){o=r;var a=e,s=r;e=t,r=i,t=a,i=s}var l=r;null===n?n=new u(l,!1):l=n.length;for(var c=0;c<o;c++)n.__setDigit(c,e.__digit(c)|t.__digit(c));for(;c<r;c++)n.__setDigit(c,e.__digit(c));for(;c<l;c++)n.__setDigit(c,0);return n}},{key:"__absoluteXor",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=e.length,i=t.length,o=i;if(r<i){o=r;var a=e,s=r;e=t,r=i,t=a,i=s}var l=r;null===n?n=new u(l,!1):l=n.length;for(var c=0;c<o;c++)n.__setDigit(c,e.__digit(c)^t.__digit(c));for(;c<r;c++)n.__setDigit(c,e.__digit(c));for(;c<l;c++)n.__setDigit(c,0);return n}},{key:"__absoluteCompare",value:function(e,t){var n=e.length-t.length;if(0!=n)return n;for(var r=e.length-1;0<=r&&e.__digit(r)===t.__digit(r);)r--;return 0>r?0:e.__unsignedDigit(r)>t.__unsignedDigit(r)?1:-1}},{key:"__multiplyAccumulate",value:function(e,t,n,r){if(0!==t){for(var i=32767&t,o=t>>>15,a=0,s=0,l=0;l<e.length;l++,r++){var c=n.__digit(r),f=e.__digit(l),d=32767&f,h=f>>>15,p=u.__imul(d,i),_=u.__imul(d,o),g=u.__imul(h,i);a=(c+=s+p+a)>>>30,c&=1073741823,a+=(c+=((32767&_)<<15)+((32767&g)<<15))>>>30,s=u.__imul(h,o)+(_>>>15)+(g>>>15),n.__setDigit(r,1073741823&c)}for(;0!==a||0!==s;r++){var v=n.__digit(r);v+=a+s,s=0,a=v>>>30,n.__setDigit(r,1073741823&v)}}}},{key:"__internalMultiplyAdd",value:function(e,t,n,r,i){for(var o=n,a=0,s=0;s<r;s++){var l=e.__digit(s),c=u.__imul(32767&l,t),f=u.__imul(l>>>15,t),d=c+((32767&f)<<15)+a+o;o=d>>>30,a=f>>>15,i.__setDigit(s,1073741823&d)}if(i.length>r)for(i.__setDigit(r++,o+a);r<i.length;)i.__setDigit(r++,0);else if(0!==o+a)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=new u(e.length,!1));for(var r=0,i=2*e.length-1;0<=i;i-=2){var o=(r<<15|e.__halfDigit(i))>>>0,a=0|o/t,s=0|(o=((r=0|o%t)<<15|e.__halfDigit(i-1))>>>0)/t;r=0|o%t,n.__setDigit(i>>>1,a<<15|s)}return n}},{key:"__absoluteModSmall",value:function(e,t){for(var n=0,r=2*e.length-1;0<=r;r--)n=0|((n<<15|e.__halfDigit(r))>>>0)%t;return n}},{key:"__absoluteDivLarge",value:function(e,t,n,r){var i=t.__halfDigitLength(),o=t.length,a=e.__halfDigitLength()-i,s=null;n&&(s=new u(a+2>>>1,!1)).__initializeDigits();var l=new u(i+2>>>1,!1);l.__initializeDigits();var c=u.__clz15(t.__halfDigit(i-1));0<c&&(t=u.__specialLeftShift(t,c,0));for(var f=u.__specialLeftShift(e,c,1),d=t.__halfDigit(i-1),h=0,p=a;0<=p;p--){var _=32767,g=f.__halfDigit(p+i);if(g!==d){var v=(g<<15|f.__halfDigit(p+i-1))>>>0;_=0|v/d;for(var y=0|v%d,m=t.__halfDigit(i-2),b=f.__halfDigit(p+i-2);u.__imul(_,m)>>>0>(y<<16|b)>>>0&&(_--,!(32767<(y+=d))););}u.__internalMultiplyAdd(t,_,0,o,l);var w=f.__inplaceSub(l,p,i+1);0!==w&&(w=f.__inplaceAdd(t,p,i),f.__setHalfDigit(p+i,32767&f.__halfDigit(p+i)+w),_--),n&&(1&p?h=_<<15:s.__setDigit(p>>>1,h|_))}if(r)return f.__inplaceRightShift(c),n?{quotient:s,remainder:f}:f;if(n)return s;throw new Error("unreachable")}},{key:"__clz15",value:function(e){return u.__clz30(e)-15}},{key:"__specialLeftShift",value:function(e,t,n){var r=e.length,i=new u(r+n,!1);if(0===t){for(var o=0;o<r;o++)i.__setDigit(o,e.__digit(o));return 0<n&&i.__setDigit(r,0),i}for(var a,s=0,l=0;l<r;l++)a=e.__digit(l),i.__setDigit(l,1073741823&a<<t|s),s=a>>>30-t;return 0<n&&i.__setDigit(r,s),i}},{key:"__leftShiftByAbsolute",value:function(e,t){var n=u.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");var r=0|n/30,i=n%30,o=e.length,a=0!==i&&0!=e.__digit(o-1)>>>30-i,s=o+r+(a?1:0),l=new u(s,e.sign);if(0===i){for(var c=0;c<r;c++)l.__setDigit(c,0);for(;c<s;c++)l.__setDigit(c,e.__digit(c-r))}else{for(var f=0,d=0;d<r;d++)l.__setDigit(d,0);for(var h,p=0;p<o;p++)h=e.__digit(p),l.__setDigit(p+r,1073741823&h<<i|f),f=h>>>30-i;if(a)l.__setDigit(o+r,f);else if(0!==f)throw new Error("implementation bug")}return l.__trim()}},{key:"__rightShiftByAbsolute",value:function(e,t){var n=e.length,r=e.sign,i=u.__toShiftAmount(t);if(0>i)return u.__rightShiftByMaximum(r);var o=0|i/30,a=i%30,s=n-o;if(0>=s)return u.__rightShiftByMaximum(r);var l=!1;if(r)if(0!=(e.__digit(o)&(1<<a)-1))l=!0;else for(var c=0;c<o;c++)if(0!==e.__digit(c)){l=!0;break}l&&0===a&&0==~e.__digit(n-1)&&s++;var f=new u(s,r);if(0===a){f.__setDigit(s-1,0);for(var d=o;d<n;d++)f.__setDigit(d-o,e.__digit(d))}else{for(var h,p=e.__digit(o)>>>a,_=n-o-1,g=0;g<_;g++)h=e.__digit(g+o+1),f.__setDigit(g,1073741823&h<<30-a|p),p=h>>>a;f.__setDigit(_,p)}return l&&(f=u.__absoluteAddOne(f,!0,f)),f.__trim()}},{key:"__rightShiftByMaximum",value:function(e){return e?u.__oneDigit(1,!0):u.__zero()}},{key:"__toShiftAmount",value:function(e){if(1<e.length)return-1;var t=e.__unsignedDigit(0);return t>u.__kMaxLengthBits?-1:t}},{key:"__toPrimitive",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==n(e))return e;if(e.constructor===u)return e;if("undefined"!=typeof Symbol&&"symbol"===n(Symbol.toPrimitive)){var r=e[Symbol.toPrimitive];if(r){var i=r(t);if("object"!==n(i))return i;throw new TypeError("Cannot convert object to primitive value")}}var o=e.valueOf;if(o){var a=o.call(e);if("object"!==n(a))return a}var s=e.toString;if(s){var l=s.call(e);if("object"!==n(l))return l}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(e){return u.__isBigInt(e)?e:+e}},{key:"__isBigInt",value:function(e){return"object"===n(e)&&null!==e&&e.constructor===u}},{key:"__truncateToNBits",value:function(e,t){for(var n=0|(e+29)/30,r=new u(n,t.sign),i=n-1,o=0;o<i;o++)r.__setDigit(o,t.__digit(o));var a=t.__digit(i);if(0!=e%30){var s=32-e%30;a=a<<s>>>s}return r.__setDigit(i,a),r.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(e,t,n){for(var r,i=Math.min,o=0|(e+29)/30,a=new u(o,n),s=0,l=o-1,c=0,f=i(l,t.length);s<f;s++)c=1&(r=0-t.__digit(s)-c)>>>30,a.__setDigit(s,1073741823&r);for(;s<l;s++)a.__setDigit(s,0|1073741823&-c);var d,h=l<t.length?t.__digit(l):0,p=e%30;if(0===p)d=0-h-c,d&=1073741823;else{var _=32-p,g=1<<32-_;d=g-(h=h<<_>>>_)-c,d&=g-1}return a.__setDigit(l,d),a.__trim()}},{key:"__digitPow",value:function(e,t){for(var n=1;0<t;)1&t&&(n*=e),t>>>=1,e*=e;return n}},{key:"__isOneDigitInt",value:function(e){return(1073741823&e)===e}}]),u}(d(Array));return T.__kMaxLength=33554432,T.__kMaxLengthBits=T.__kMaxLength<<5,T.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],T.__kBitsPerCharTableShift=5,T.__kBitsPerCharTableMultiplier=1<<T.__kBitsPerCharTableShift,T.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],T.__kBitConversionBuffer=new ArrayBuffer(8),T.__kBitConversionDouble=new Float64Array(T.__kBitConversionBuffer),T.__kBitConversionInts=new Int32Array(T.__kBitConversionBuffer),T.__clz30=t?function(e){return t(e)-2}:function(e){var t=Math.LN2,n=Math.log;return 0===e?30:0|29-(0|n(e>>>0)/t)},T.__imul=e||function(e,t){return 0|e*t},T}()},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Value=void 0;const a=n(35),s=o(n(78)),u=Symbol("ion.dom.Value");function l(e,t,n){const r=class extends e{constructor(...e){super(...e),this._ionType=t,this._ionAnnotations=[],Object.defineProperty(this,"_ionType",{enumerable:!1}),Object.defineProperty(this,"_ionAnnotations",{enumerable:!1})}_unsupportedOperation(e){throw new Error(`Value#${e}() is not supported by Ion type ${this.getType().name}`)}getType(){return this._ionType}_setAnnotations(e){this._ionAnnotations=e}getAnnotations(){return null===this._ionAnnotations?[]:this._ionAnnotations}isNull(){return!1}booleanValue(){this._unsupportedOperation("booleanValue")}numberValue(){this._unsupportedOperation("numberValue")}bigIntValue(){this._unsupportedOperation("bigIntValue")}decimalValue(){this._unsupportedOperation("decimalValue")}stringValue(){this._unsupportedOperation("stringValue")}dateValue(){this._unsupportedOperation("dateValue")}timestampValue(){this._unsupportedOperation("timestampValue")}uInt8ArrayValue(){this._unsupportedOperation("uInt8ArrayValue")}fieldNames(){this._unsupportedOperation("fieldNames")}fields(){this._unsupportedOperation("fields")}allFields(){this._unsupportedOperation("allFields")}elements(){this._unsupportedOperation("elements")}get(...e){this._unsupportedOperation("get")}getAll(...e){this._unsupportedOperation("getAll")}as(e){if(this instanceof e)return this;throw new Error(`${this.constructor.name} is not an instance of ${e.name}`)}writeTo(e){this._unsupportedOperation("writeTo")}deleteField(e){this._unsupportedOperation("deleteField")}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0,coerceNumericType:!1}){this._unsupportedOperation("_valueEquals")}equals(e,t={epsilon:null}){let n=!1;return e instanceof l&&(n=!0),this._valueEquals(e,{onlyCompareIon:n,ignoreTimestampPrecision:!0,ignoreAnnotations:!0,epsilon:t.epsilon,coerceNumericType:!0})}ionEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1}){if(!t.ignoreAnnotations){if(!(e instanceof l))return!1;let t=this.getAnnotations(),n=e.getAnnotations();if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(0!==t[e].localeCompare(n[e]))return!1}let n={onlyCompareIon:!0,ignoreTimestampPrecision:t.ignoreTimestampPrecision,epsilon:t.epsilon,coerceNumericType:!1};return this._valueEquals(e,n)}static _getIonType(){return t}static _fromJsValue(e,t){return n.construct(this,e,t)}};return Object.defineProperty(r,u,{writable:!1,enumerable:!1,value:u}),r}t.Value=l,function(e){e.from=function(t,n){if(t instanceof e){if(a._hasValue(n))throw new Error("Value.from() does not support overriding the annotations on a dom.Value passed as an argument.");return t}return s._ionValueFromJsValue(t,n)}}(l=t.Value||(t.Value={})),Object.defineProperty(l,Symbol.hasInstance,{get:()=>e=>a._hasValue(e)&&a._hasValue(e.constructor)&&u in e.constructor&&e.constructor[u]===u})},function(e,t,n){var r=n(207),i=n(208),o=n(90),a=n(209);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Primitives=t.FromJsConstructor=t.FromJsConstructorBuilder=void 0;const r=n(5),i=n(35);function o(e){return i._hasValue(e)?new Set(e):new Set}class a{constructor(){this._primitives=o(),this._classesToUnbox=o(),this._classes=o()}withPrimitives(...e){return this._primitives=o(e),this}withClasses(...e){return this._classes=o(e),this}withClassesToUnbox(...e){return this._classesToUnbox=o(e),this}build(){return new s(this._primitives,this._classesToUnbox,this._classes)}}t.FromJsConstructorBuilder=a;class s{constructor(e,t,n){this._primitives=e,this._classesToUnbox=t,this._classes=n}construct(e,t,n=[]){if(null===t)return new r.dom.Null(r.IonTypes.NULL,n);const i=typeof t;if("object"===i){if(this._classesToUnbox.has(t.constructor))return new e(t.valueOf(),n);if(this._classes.has(t.constructor))return new e(t,n);throw new Error(`Unable to construct a(n) ${e.name} from a ${t.constructor.name}.`)}if(this._primitives.has(i))return new e(t,n);throw new Error(`Unable to construct a(n) ${e.name} from a ${i}.`)}}t.FromJsConstructor=s,function(e){e.NONE=(new a).build()}(s=t.FromJsConstructor||(t.FromJsConstructor={})),t.Primitives={Boolean:"boolean",Number:"number",String:"string"}},function(e,t,n){var r=n(214);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(37).default,i=n(94);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(234);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(39).default,i=n(113);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(292);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(40).default,i=n(136);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsbiSupport=void 0;const i=r(n(17));class o{static isZero(e){return i.default.equal(e,o.ZERO)}static isNegative(e){return i.default.lessThan(e,o.ZERO)}static bigIntFromString(e){let t=!1,n=e.trimLeft();e.startsWith("-")&&(t=!0,n=e.substring(1));let r=i.default.BigInt(n);return t&&(r=i.default.unaryMinus(r)),r}static clampToSafeIntegerRange(e){return i.default.greaterThan(e,this.NUMBER_MAX_SAFE_INTEGER)?Number.MAX_SAFE_INTEGER:i.default.lessThan(e,this.NUMBER_MIN_SAFE_INTEGER)?Number.MIN_SAFE_INTEGER:i.default.toNumber(e)}static isSafeInteger(e){return i.default.greaterThanOrEqual(e,this.NUMBER_MIN_SAFE_INTEGER)&&i.default.lessThanOrEqual(e,this.NUMBER_MAX_SAFE_INTEGER)}}t.JsbiSupport=o,o.ZERO=i.default.BigInt(0),o.ONE=i.default.BigInt(1),o.TWO=i.default.BigInt(2),o.NUMBER_MAX_SAFE_INTEGER=i.default.BigInt(Number.MAX_SAFE_INTEGER),o.NUMBER_MIN_SAFE_INTEGER=i.default.BigInt(Number.MIN_SAFE_INTEGER)},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._assertDefined=t._hasValue=t._sign=void 0,t._sign=function(e){return e<0||0===e&&1/e==-1/0?-1:1},t._hasValue=function(e){return null!=e},t._assertDefined=function(e){if(void 0===e)throw new Error("Expected value to be defined")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escape=t.isDigit=t.isOperator=t.isIdentifier=t.SymbolEscapes=t.StringEscapes=t.ClobEscapes=t.CharCodes=t.toBase64=t.fromBase64=t.is_hex_digit=t.is_base64_char=t.is_whitespace=t.is_operator_char=t.is_letter_or_digit=t.isNumericTerminator=t.is_letter=t.toHex=t.escapeSequence=t.escapeString=t.needsEscape=t.nextEscape=t.asAscii=t.is_keyword=t.is_digit=t.ESCAPED_NEWLINE=t.WHITESPACE_COMMENT2=t.WHITESPACE_COMMENT1=void 0,t.WHITESPACE_COMMENT1=-2,t.WHITESPACE_COMMENT2=-3,t.ESCAPED_NEWLINE=-4;const r={0:"\\0",8:"\\b",9:"\\t",10:"\\n",13:"\\r",DOUBLE_QUOTE:'\\"',SINGLE_QUOTE:"\\'",SLASH:"\\\\"};function i(e){let t=e.length;const n=[];for(n[128]=!1;t>0;)--t,n[e.charCodeAt(t)]=!0;return n}const o=i("+/0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),a=i("0123456789abcdefABCDEF"),s=i("_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),u=i("_$0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),l=i("{}[](),\"' \t\n\r\v\f"),c=i("!#%&*+-./;<=>?@^`|~"),f=i(" \t\r\n\v\f"),d=i("_$0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function h(e){return!(e<48||e>57)}function p(e,t){for(;t-- >0&&!_(e.charCodeAt(t)););return t}function _(e){return e<32||(e>126||(34===e||39===e||92===e))}function g(e,t){const n=[];let r,i,o;for(;t>=0&&(r=e.charCodeAt(t),_(r));)n.push([t,r]),t=p(e,t);if(n.length>0){for(o="",i=n.length,t=e.length;i--;){const r=n[i];o=t-r[0]-1>0?v(r[1])+e.substring(r[0]+1,t)+o:e.substring(r[0]+1,t)+o,t=r[0]-1}t>=0&&(o=e.substring(0,t)+o),e=o}return e}function v(e){let t=r[e];return void 0===t&&(t=e<256?"\\x"+y(e,2):e<=65535?"\\u"+y(e,4):"\\U"+y(e,8)),t}function y(e,t){let n="";for(;e>0;)n+="0123456789ABCDEF".charAt(e&&15),e/=16;return n.length<t&&(n="000000000"+n,n=n.substring(n.length-t,n.length)),n}t.is_digit=h,t.is_keyword=function(e){return"null"===e||"true"===e||"false"===e||"nan"===e||"+inf"===e||"-inf"===e},t.asAscii=function(e){if(void 0===e)e="undefined::null";else if("number"==typeof e)e=""+e;else if("string"!=typeof e){const t=p(e,e.length);t>=0&&(e=g(e,t))}return e},t.nextEscape=p,t.needsEscape=_,t.escapeString=g,t.escapeSequence=v,t.toHex=y,t.is_letter=function(e){return s[e]},t.isNumericTerminator=function(e){return-1==e||l[e]},t.is_letter_or_digit=function(e){return u[e]},t.is_operator_char=function(e){return c[e]},t.is_whitespace=function(e){return!(e>32)&&(e==this.WHITESPACE_COMMENT1||(e==this.WHITESPACE_COMMENT2||(e==this.ESCAPED_NEWLINE||f[e])))},t.is_base64_char=function(e){return o[e]},t.is_hex_digit=function(e){return a[e]};const m=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],b={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};var w;function S(e){return[w.BACKSLASH,e.charCodeAt(0)]}t.fromBase64=function(e){let t=0;for(let r=e.length-1;"="==e.charAt(r);r--)t++;const n=new Uint8Array(3*e.length/4-t);for(let r=0;r<e.length-t;r+=4){const i=b[e.charAt(r)],o=b[e.charAt(r+1)],a=b[e.charAt(r+2)],s=b[e.charAt(r+3)];n[3*r/4]=i<<2&255|o>>>4,r+2<e.length-t&&(n[3*r/4+1]=o<<4&255|a>>>2,r+3<e.length-t&&(n[3*r/4+2]=a<<6&255|s))}return n},t.toBase64=function(e){const t=new Array(Math.ceil(4*e.length/3));for(let n=0;n<e.length;n+=3){const r=e[n],i=e[n+1],o=e[n+2];e[n+3];if(t[4*n/3]=m[r>>>2],t[4*n/3+1]=m[r<<4&63|(i||0)>>>4],!(n+1<e.length))return t.join("")+"==";if(t[4*n/3+2]=m[i<<2&63|(o||0)>>>6],!(n+2<e.length))return t.join("")+"=";t[4*n/3+3]=m[63&o]}return t.join("")},function(e){e[e.NULL=0]="NULL",e[e.BELL=7]="BELL",e[e.BACKSPACE=8]="BACKSPACE",e[e.HORIZONTAL_TAB=9]="HORIZONTAL_TAB",e[e.LINE_FEED=10]="LINE_FEED",e[e.VERTICAL_TAB=11]="VERTICAL_TAB",e[e.FORM_FEED=12]="FORM_FEED",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.DOUBLE_QUOTE=34]="DOUBLE_QUOTE",e[e.SINGLE_QUOTE=39]="SINGLE_QUOTE",e[e.FORWARD_SLASH=47]="FORWARD_SLASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.BACKSLASH=92]="BACKSLASH",e[e.LEFT_PARENTHESIS=40]="LEFT_PARENTHESIS",e[e.RIGHT_PARENTHESIS=41]="RIGHT_PARENTHESIS",e[e.LEFT_BRACE=123]="LEFT_BRACE",e[e.RIGHT_BRACE=125]="RIGHT_BRACE",e[e.LEFT_BRACKET=91]="LEFT_BRACKET",e[e.RIGHT_BRACKET=93]="RIGHT_BRACKET",e[e.COMMA=44]="COMMA",e[e.SPACE=32]="SPACE",e[e.LOWERCASE_X=120]="LOWERCASE_X",e[e.COLON=58]="COLON"}(w=t.CharCodes||(t.CharCodes={}));const T=[w.BACKSLASH,w.LOWERCASE_X];function C(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return T.concat(function(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(t))}function x(e,t,n){if(void 0===n)e[t]=C(t);else for(let r=t;r<n;r++)e[r]=C(r)}const I={};I[w.NULL]=S("0"),x(I,1,7),I[w.BELL]=S("a"),I[w.BACKSPACE]=S("b"),I[w.HORIZONTAL_TAB]=S("t"),I[w.LINE_FEED]=S("n"),I[w.VERTICAL_TAB]=S("v"),I[w.FORM_FEED]=S("f"),I[w.CARRIAGE_RETURN]=S("r"),x(I,14,32),I[w.BACKSLASH]=S("\\"),x(I,127,160),t.ClobEscapes=Object.assign({},I),t.ClobEscapes[w.DOUBLE_QUOTE]=S('"'),t.ClobEscapes[w.SINGLE_QUOTE]=S("'"),t.ClobEscapes[w.FORWARD_SLASH]=S("/"),t.ClobEscapes[w.QUESTION_MARK]=S("?"),t.StringEscapes=Object.assign({},I),t.StringEscapes[w.DOUBLE_QUOTE]=S('"'),t.SymbolEscapes=Object.assign({},I),t.SymbolEscapes[w.SINGLE_QUOTE]=S("'"),t.isIdentifier=function(e){if(h(e.charCodeAt(0)))return!1;for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(!d[n])return!1}return!0},t.isOperator=function(e){for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(!c[n])return!1}return!0},t.isDigit=function(e){return e<58&&e>47},t.escape=function(e,t){let n,r,i="",o="",a=0;for(let s=0;s<e.length;s++)if(n=e.charCodeAt(s),r=t[n],void 0!==r){for(let e=0;e<r.length;e++)o+=String.fromCharCode(r[e]);i+=e.slice(a,s)+o,a=s+1,o=""}return i+e.slice(a,e.length)}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(37)),o=r(n(10)),a=r(n(11)),s=r(n(27)),u=r(n(92)),l=r(n(213)),c=function(){function e(t){(0,o.default)(this,e),this._name=t,this._isMonitor=!1}return(0,a.default)(e,[{key:"name",get:function(){return this._name}},{key:"metricKey",get:function(){return this._name}},{key:"withMonitor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isMonitor=e,this}},{key:"isMonitor",get:function(){return this._isMonitor},set:function(e){this._isMonitor=!!e}},{key:"canMonitor",get:function(){throw new Error("Subclass of KatalMetricObject must implement canMonitor")}},{key:"type",get:function(){throw new Error("Subclass of KatalMetricObject must implement type getter")}},{key:"validationError",value:function(){return void 0!==this.isMonitor&&"boolean"!=typeof this.isMonitor?new Error("Field isMonitor should be a boolean, but it was a ".concat((0,i.default)(this.isMonitor))):(0,u.default)(this.name,"field name")}}]),e}();t.default=c,(0,s.default)(c,"Types",l.default)},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLocalSymbolTable=t.LocalSymbolTable=void 0;const r=n(73);class i{constructor(e,t=[]){this.index=Object.create(null),this._symbols=[],this._import=null===e?r.getSystemSymbolTableImport():e,this.offset=this._import.offset+this._import.length;for(const n of t)this.assignSymbolId(n)}get symbols(){return this._symbols}get maxId(){return this.offset+this._symbols.length-1}get import(){return this._import}getSymbolId(e){return this._import.getSymbolId(e)||this.index[e]}addSymbol(e){if(null!==e){const t=this.getSymbolId(e);if(void 0!==t)return t}const t=this.offset+this.symbols.length;return this.symbols.push(e),null!==e&&(this.index[e]=t),t}assignSymbolId(e){const t=this.offset+this.symbols.length;return this.symbols.push(e),null!==e&&void 0===this.getSymbolId(e)&&(this.index[e]=t),t}getSymbolText(e){if(e>this.maxId)throw new Error("Symbol $"+e.toString()+" greater than maxID.");const t=this.import.getSymbolText(e);if(void 0!==t)return t;const n=e-this.offset;return this.symbols[n]}numberOfSymbols(){return this._symbols.length}}t.LocalSymbolTable=i,t.defaultLocalSymbolTable=function(){return new i(r.getSystemSymbolTableImport())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeUtf8=t.encodeUtf8=void 0;let r;r="undefined"!=typeof TextDecoder?new TextDecoder("utf8",{fatal:!0}):null,t.encodeUtf8=function(e){let t,n=0;const r=new Uint8Array(4*e.length);for(let i=0;i<e.length;i++)if(t=e.charCodeAt(i),t<128)r[n++]=t;else{if(t<2048)r[n++]=t>>6|192;else{if(t>55295&&t<56320){if(++i>=e.length)throw new Error("UTF-8 encode: incomplete surrogate pair");const o=e.charCodeAt(i);if(o<56320||o>57343)throw new Error("UTF-8 encode: second surrogate character 0x"+o.toString(16)+" at index "+i+" out of range");t=65536+((1023&t)<<10)+(1023&o),r[n++]=t>>18|240,r[n++]=t>>12&63|128}else r[n++]=t>>12|224;r[n++]=t>>6&63|128}r[n++]=63&t|128}return r.subarray(0,n)},t.decodeUtf8=function(e){if(e.length>512&&null!=r)return r.decode(e);let t,n=0,i="";for(;n<e.length;){if(t=e[n++],t>127)if(t>191&&t<224){if(n>=e.length)throw new Error("UTF-8 decode: incomplete 2-byte sequence");t=(31&t)<<6|63&e[n++]}else if(t>223&&t<240){if(n+1>=e.length)throw new Error("UTF-8 decode: incomplete 3-byte sequence");t=(15&t)<<12|(63&e[n++])<<6|63&e[n++]}else{if(!(t>239&&t<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+t.toString(16)+" at index "+(n-1));if(n+2>=e.length)throw new Error("UTF-8 decode: incomplete 4-byte sequence");t=(7&t)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]}if(t<=65535)i+=String.fromCharCode(t);else{if(!(t<=1114111))throw new Error("UTF-8 decode: code point 0x"+t.toString(16)+" exceeds UTF-16 reach");t-=65536,i+=String.fromCharCode(t>>10|55296),i+=String.fromCharCode(1023&t|56320)}}return i}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(95);function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},e.exports.default=e.exports,e.exports.__esModule=!0),i(t,n,o||t)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(39)),o=r(n(12)),a=r(n(15)),s=r(n(33)),u=r(n(110)),l=r(n(111)),c=function(){function e(t){(0,o.default)(this,e),this._name=t,this._isMonitor=!1}return(0,a.default)(e,[{key:"name",get:function(){return this._name}},{key:"metricKey",get:function(){return this._name}},{key:"withMonitor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isMonitor=e,this}},{key:"isMonitor",get:function(){return this._isMonitor},set:function(e){this._isMonitor=!!e}},{key:"canMonitor",get:function(){throw new Error("Subclass of KatalMetricObject must implement canMonitor")}},{key:"type",get:function(){throw new Error("Subclass of KatalMetricObject must implement type getter")}},{key:"validationError",value:function(){return void 0!==this.isMonitor&&"boolean"!=typeof this.isMonitor?new Error("Field isMonitor should be a boolean, but it was a ".concat((0,i.default)(this.isMonitor))):(0,u.default)(this.name,"field name")}}]),e}();t.default=c,(0,s.default)(c,"Types",l.default)},function(e,t,n){var r=n(114);function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},e.exports.default=e.exports,e.exports.__esModule=!0),i(t,n,o||t)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(40)),o=r(n(13)),a=r(n(16)),s=r(n(34)),u=r(n(134)),l=r(n(291)),c=function(){function e(t){(0,o.default)(this,e),this._name=t,this._isMonitor=!1}return(0,a.default)(e,[{key:"name",get:function(){return this._name}},{key:"metricKey",get:function(){return this._name}},{key:"withMonitor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isMonitor=e,this}},{key:"isMonitor",get:function(){return this._isMonitor},set:function(e){this._isMonitor=!!e}},{key:"canMonitor",get:function(){throw new Error("Subclass of KatalMetricObject must implement canMonitor")}},{key:"type",get:function(){throw new Error("Subclass of KatalMetricObject must implement type getter")}},{key:"validationError",value:function(){return void 0!==this.isMonitor&&"boolean"!=typeof this.isMonitor?new Error("Field isMonitor should be a boolean, but it was a ".concat((0,i.default)(this.isMonitor))):(0,u.default)(this.name,"field name")}}]),e}();t.default=c,(0,s.default)(c,"Types",l.default)},function(e,t,n){var r=n(137);function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},e.exports.default=e.exports,e.exports.__esModule=!0),i(t,n,o||t)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryContext=t.ConfigManager=t.ClientStage=t.WeblabContext=void 0;var i=n(318);Object.defineProperty(t,"WeblabContext",{enumerable:!0,get:function(){return i.WeblabContext}});var o=n(326);Object.defineProperty(t,"ClientStage",{enumerable:!0,get:function(){return o.ClientStage}});var a=n(330);Object.defineProperty(t,"ConfigManager",{enumerable:!0,get:function(){return r(a).default}});var s=n(54);Object.defineProperty(t,"QueryContext",{enumerable:!0,get:function(){return r(s).default}})},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ComparisonResult=t.ComparisonResultType=void 0,function(e){e.EQUAL="EQUAL",e.NOT_EQUAL="NOT_EQUAL",e.ERROR="ERROR"}(r=t.ComparisonResultType||(t.ComparisonResultType={}));t.ComparisonResult=class{constructor(e=r.EQUAL,t="",n=0,i=0){this.result=e,this.message=t,this.actualIndex=n,this.expectedIndex=i}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureConfig=t.SidebarHelpPanelFeatureConfigClientProvider=t.SidebarHelpPanelFeatureConfigContext=void 0;var i=n(371);Object.defineProperty(t,"SidebarHelpPanelFeatureConfigContext",{enumerable:!0,get:function(){return r(i).default}});var o=n(393);Object.defineProperty(t,"SidebarHelpPanelFeatureConfigClientProvider",{enumerable:!0,get:function(){return r(o).default}});var a=n(395);Object.defineProperty(t,"FeatureConfig",{enumerable:!0,get:function(){return r(a).default}})},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=new Map),this.contextValues=new Map(e)}return e.prototype.getValue=function(e){return this.contextValues.get(e)},e.prototype.setValue=function(e,t){return this.contextValues.set(e,t),this},e.prototype.getContextKeys=function(){return Array.from(this.contextValues.keys())},e.prototype.getContextEntries=function(){return new Map(this.contextValues)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IVM=t.EOF=void 0,t.EOF=-1,t.IVM={text:"$ion_1_0",binary:new Uint8Array([224,1,0,234]),sid:2}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Decimal=void 0;const i=r(n(17)),o=n(32),a=n(35);class s{constructor(e,t,n=!1){if("string"==typeof e)return s.parse(e);if(!a._hasValue(t))throw new Error("Decimal's constructor was called with a numeric coefficient but no exponent.");if("number"==typeof e)return s._fromNumberCoefficient(e,t);if(e instanceof i.default)return a._hasValue(n)?n!=o.JsbiSupport.isNegative(e)&&(e=i.default.unaryMinus(e)):n=o.JsbiSupport.isNegative(e),s._fromBigIntCoefficient(n,e,t);throw new Error(`Unsupported parameter set (${e}, ${t}, ${n} passed to Decimal constructor.`)}static _fromNumberCoefficient(e,t){if(!Number.isInteger(e))throw new Error("The provided coefficient was not an integer. ("+e+")");const n=e<0||Object.is(e,-0);return this._fromBigIntCoefficient(n,i.default.BigInt(e),t)}static _fromBigIntCoefficient(e,t,n){const r=Object.create(this.prototype);return r._initialize(e,t,n),r}static parse(e){let t=0;if("null"===e||"null.decimal"===e)return null;const n=e.match("[d|D]");let r=e.length;null!=n&&(t=Number(e.substring(n.index+1,e.length)),r=n.index);const a=e.match("\\.");let u;if(a){t-=n?n.index-1-a.index:e.length-1-a.index,u=e.substring(0,a.index)+e.substring(a.index+1,r)}else u=e.substring(0,r);const l=i.default.BigInt(u),c=o.JsbiSupport.isNegative(l)||u.startsWith("-0");return s._fromBigIntCoefficient(c,l,t)}isNegative(){return this._isNegative}numberValue(){return this._isNegativeZero()?-0:i.default.toNumber(this._coefficient)*Math.pow(10,this._exponent)}intValue(){return Math.trunc(this.numberValue())}toString(){let e=this._coefficient.toString();"-"===e[0]&&(e=e.substr(1,e.length));const t=e.length,n=this._exponent+(t-1);let r="";return this._exponent<=0&&n>=-6?0===this._exponent?r+=e:e.length<=-this._exponent?(e="0".repeat(-this._exponent-e.length+1)+e,r+=e.substr(0,1)+"."+e.substr(1)):r+=e.substr(0,t+this._exponent)+"."+e.substr(t+this._exponent):(r+=e[0],e.length>1&&(r+="."+e.substr(1)),r+="E"+(n>0?"+":"")+n),(this.isNegative()?"-":"")+r}toJSON(){return this.numberValue()}getCoefficient(){return this._coefficient}getExponent(){return this._exponent}equals(e){return this.getExponent()===e.getExponent()&&a._sign(this.getExponent())===a._sign(e.getExponent())&&this.isNegative()===e.isNegative()&&i.default.equal(this.getCoefficient(),e.getCoefficient())}compareTo(e){if(o.JsbiSupport.isZero(this._coefficient)&&o.JsbiSupport.isZero(e._coefficient))return 0;const t=this.isNegative();if(t!==e.isNegative())return t?-1:1;let[n,r,a]=this._compareToParams(),[s,u,l]=e._compareToParams();if(a>l)return t?-1:1;if(a<l)return t?1:-1;n.length<s.length?n+="0".repeat(u-r):n.length>s.length&&(s+="0".repeat(r-u));const c=i.default.BigInt(n),f=i.default.BigInt(s);return i.default.greaterThan(c,f)?t?-1:1:i.default.lessThan(c,f)?t?1:-1:0}_initialize(e,t,n){this._isNegative=e,this._coefficient=t,Object.is(-0,n)&&(n=0),this._exponent=n}_isNegativeZero(){return this.isNegative()&&o.JsbiSupport.isZero(this._coefficient)}_compareToParams(){const e=this.isNegative()?this._coefficient.toString().substring(1):this._coefficient.toString(),t=e.length;let n=t+this._exponent;return n<=0&&(n-=1),o.JsbiSupport.isZero(this._coefficient)&&(n=-1/0),[e,t,n]}}t.Decimal=s,s.ZERO=new s(0,0),s.ONE=new s(1,0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=t.TimestampPrecision=void 0;const r=n(56),i=n(36),o=n(35);var a,s;!function(e){e[e.YEAR=1]="YEAR",e[e.MONTH=2]="MONTH",e[e.DAY=3]="DAY",e[e.HOUR_AND_MINUTE=4]="HOUR_AND_MINUTE",e[e.SECONDS=5]="SECONDS"}(a=t.TimestampPrecision||(t.TimestampPrecision={}));class u{constructor(e=null,t=null,n=null,i=null,o=null,s=null,l=null){if(e instanceof Date){const t=e,n=new r.Decimal(t.getSeconds()+t.getMilliseconds(),0);this._localOffset=-1*t.getTimezoneOffset(),this._year=t.getFullYear(),this._month=t.getMonth()+1,this._day=t.getDate(),this._hour=t.getHours(),this._minutes=t.getMinutes(),this._secondsDecimal=n,this._precision=a.YEAR}else{const c=e;if(null===c)throw new Error("Timestamp's constructor was called without localOffset");if(null===t)throw new Error("Timestamp's constructor was called without year");if(this._localOffset=c,this._year=t,this._precision=a.YEAR,this._checkRequiredField("Offset",this._localOffset,u._MIN_OFFSET,u._MAX_OFFSET),this._checkRequiredField("Year",this._year,u._MIN_YEAR,u._MAX_YEAR),this._month=this._checkOptionalField("Month",n,u._MIN_MONTH,u._MAX_MONTH,1,a.MONTH),this._day=this._checkOptionalField("Day",i,u._MIN_DAY,u._MAX_DAY,1,a.DAY),this._hour=this._checkOptionalField("Hour",o,u._MIN_HOUR,u._MAX_HOUR,0,a.HOUR_AND_MINUTE),this._minutes=this._checkOptionalField("Minutes",s,u._MIN_MINUTE,u._MAX_MINUTE,0,a.HOUR_AND_MINUTE),"number"==typeof l){if(!Number.isInteger(l))throw new Error("The provided seconds number was not an integer ("+l+")");this._secondsDecimal=new r.Decimal(l,0)}else null!==l&&(this._secondsDecimal=l)}if(null===this._secondsDecimal||void 0===this._secondsDecimal?this._secondsDecimal=r.Decimal.ZERO:(this._checkFieldRange("Seconds",this._secondsDecimal,u._MIN_SECONDS,u._MAX_SECONDS),this._precision=a.SECONDS),this._precision<=a.DAY&&(this._localOffset=-0),this._precision>a.MONTH){const e=new Date(this._year,this._month,0);if(e.setUTCFullYear(this._year),this._day>e.getDate())throw new Error(`Month ${this._month} has less than ${this._day} days`);if(2===this._month&&29===this._day&&!this._isLeapYear(this._year))throw new Error(`Given February 29th but year ${this._year} is not a leap year`)}const c=this.getDate().getUTCFullYear();this._checkFieldRange("Year",c,u._MIN_YEAR,u._MAX_YEAR)}static parse(e){return c._parse(e)}static _adjustMsSinceEpochIfNeeded(e,t){if(e>=100)return t;const n=new Date(t);return n.setUTCFullYear(e),n.getTime()}static _splitSecondsDecimal(e){const t=e.getCoefficient().toString(),n=e.getExponent();let r="",i="";if(n<0){const o=Math.max(t.length+n,0);r=t.substr(0,o),i=t.substr(o),-e.getExponent()-t.length>0&&(i="0".repeat(-n-t.length)+i)}else r=n>0?t+"0".repeat(n):t;return[r,i]}static _valueOf(e,t,n,i){const o=e.getTime()+60*t*1e3;let s;if(e=new Date(o),null!=n){const[t,i]=u._splitSecondsDecimal(n);s=r.Decimal.parse(e.getUTCSeconds()+"."+i)}else s=r.Decimal.parse(e.getUTCSeconds()+"."+e.getUTCMilliseconds());switch(i){case a.YEAR:return new u(t,e.getUTCFullYear());case a.MONTH:return new u(t,e.getUTCFullYear(),e.getUTCMonth()+1);case a.DAY:return new u(t,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate());case a.HOUR_AND_MINUTE:return new u(t,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes());case a.SECONDS:default:return new u(t,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),s)}}getLocalOffset(){return this._localOffset}getPrecision(){return this._precision}getDate(){let e=0;this._precision===a.SECONDS&&(e=Math.round(1e3*(this._secondsDecimal.numberValue()-this.getSecondsInt())));let t=Date.UTC(this._year,this._precision===a.YEAR?0:this._month-1,this._day,this._hour,this._minutes,this.getSecondsInt(),e);t=u._adjustMsSinceEpochIfNeeded(this._year,t);const n=60*this._localOffset*1e3;return new Date(t-n)}getSecondsInt(){return this._secondsDecimal.intValue()}getSecondsDecimal(){return this._secondsDecimal}_getFractionalSeconds(){const[e,t]=u._splitSecondsDecimal(this._secondsDecimal);return""===t?r.Decimal.ZERO:r.Decimal.parse(t+"d-"+t.length)}equals(e){return this.getPrecision()===e.getPrecision()&&this.getLocalOffset()===e.getLocalOffset()&&o._sign(this.getLocalOffset())===o._sign(e.getLocalOffset())&&0===this.compareTo(e)&&this._secondsDecimal.equals(e._secondsDecimal)}compareTo(e){const t=this.getDate().getTime(),n=e.getDate().getTime();return t===n?this.getSecondsDecimal().compareTo(e.getSecondsDecimal()):t<n?-1:1}toString(){let e="";switch(this._precision){default:throw new Error("unrecognized timestamp precision "+this._precision);case a.SECONDS:const[t,n]=u._splitSecondsDecimal(this._secondsDecimal);e=this._lpadZeros(t,2),n.length>0&&(e+="."+n);case a.HOUR_AND_MINUTE:e=this._lpadZeros(this._minutes,2)+(e?":"+e:""),e=this._lpadZeros(this._hour,2)+(e?":"+e:"");case a.DAY:e=this._lpadZeros(this._day,2)+(e?"T"+e:"T");case a.MONTH:e=this._lpadZeros(this._month,2)+(e?"-"+e:"");case a.YEAR:e=this._precision===a.YEAR?this._lpadZeros(this._year,4)+"T":this._precision===a.MONTH?this._lpadZeros(this._year,4)+"-"+e+"T":this._lpadZeros(this._year,4)+"-"+e}const t=this._localOffset;return this._precision>a.DAY&&(0===t&&1===o._sign(t)?e+="Z":e+=(-1===o._sign(t)?"-":"+")+this._lpadZeros(Math.floor(Math.abs(t)/60),2)+":"+this._lpadZeros(Math.abs(t)%60,2)),e}toJSON(){return this.getDate().toISOString()}_checkRequiredField(e,t,n,r){if(!o._hasValue(t))throw new Error(`${e} cannot be ${t}`);this._checkFieldRange(e,t,n,r)}_checkOptionalField(e,t,n,r,i,a){return o._hasValue(t)?(this._checkFieldRange(e,t,n,r),this._precision=a,t):i}_checkFieldRange(e,t,n,i){if(t instanceof r.Decimal){if(o._hasValue(t)&&(t.compareTo(n)<0||t.compareTo(i)>=0))throw new Error(`${e} ${t} must be between ${n} inclusive, and ${i} exclusive`)}else{if(!Number.isInteger(t))throw new Error(`${e} ${t} must be an integer`);if(t<n||t>i)throw new Error(`${e} ${t} must be between ${n} and ${i} inclusive`)}}_isLeapYear(e){return e%4==0&&(e%400==0||(e%100!=0||e<1600))}_lpadZeros(e,t){const n=e.toString();if(n.length<=t)return"0".repeat(t-n.length)+n;throw new Error("Unable to fit '"+n+"' into "+t+" characters")}}t.Timestamp=u,u._MIN_SECONDS=r.Decimal.ZERO,u._MAX_SECONDS=r.Decimal.parse("60"),u._MIN_MINUTE=0,u._MAX_MINUTE=59,u._MIN_HOUR=0,u._MAX_HOUR=23,u._MIN_DAY=1,u._MAX_DAY=31,u._MIN_MONTH=1,u._MAX_MONTH=12,u._MIN_YEAR=1,u._MAX_YEAR=9999,u._MIN_OFFSET=-1439,u._MAX_OFFSET=1439,function(e){e[e.YEAR=0]="YEAR",e[e.MONTH=1]="MONTH",e[e.DAY=2]="DAY",e[e.HOUR=3]="HOUR",e[e.MINUTE=4]="MINUTE",e[e.SECONDS=5]="SECONDS",e[e.FRACTIONAL_SECONDS=6]="FRACTIONAL_SECONDS",e[e.OFFSET_POSITIVE=7]="OFFSET_POSITIVE",e[e.OFFSET_NEGATIVE=8]="OFFSET_NEGATIVE",e[e.OFFSET_MINUTES=9]="OFFSET_MINUTES",e[e.OFFSET_ZULU=10]="OFFSET_ZULU",e[e.OFFSET_UNKNOWN=11]="OFFSET_UNKNOWN"}(s||(s={}));class l{constructor(e,t,n=null){this.f=e,this.len=t,this.t=n}}class c{static _parse(e){if(e.length<1)return null;if(110===e.charCodeAt(0)){if("null"===e||"null.timestamp"===e)return null;throw new Error("Illegal timestamp: "+e)}let t,n=null,i=0,o=null,a=null,l=null,f=null,d=null,h="",p=0,_=c._timeParserStates[s.YEAR];const g=e.length;let v,y;for(;p<g;){if(null===_.len){const t=c._readUnknownDigits(e,p);if(0===t.length)throw new Error("No digits found at pos: "+p);v=parseInt(t,10),p+=t.length}else if(_.len>0){if(v=c._readDigits(e,p,_.len),v<0)throw new Error("Non-digit value found at pos "+p);p+=_.len}switch(v=v,_.f){case s.YEAR:i=v;break;case s.MONTH:o=v;break;case s.DAY:a=v;break;case s.HOUR:l=v;break;case s.MINUTE:f=v;break;case s.SECONDS:d=v;break;case s.FRACTIONAL_SECONDS:h=e.substring(20,p);break;case s.OFFSET_POSITIVE:t=1,n=60*v;break;case s.OFFSET_NEGATIVE:t=-1,n=60*v;break;case s.OFFSET_MINUTES:if(n+=v,v>=60)throw new Error("Minute offset "+String(v)+" above maximum or equal to : 60");break;case s.OFFSET_ZULU:t=1,n=0;break;case s.OFFSET_UNKNOWN:n=-0;break;default:throw new Error("invalid internal state")}if(p>=g)break;if(null!==_.t){const r=String.fromCharCode(e.charCodeAt(p));if(_=c._timeParserStates[_.t[r]],void 0===_)throw new Error("State was not set pos:"+p);_.f===s.OFFSET_ZULU&&(t=1,n=0)}p++}if(null===n){if(null!==f)throw new Error('invalid timestamp, missing local offset: "'+e+'"');n=-0}else n*=t;return(null!=d||h)&&(y=r.Decimal.parse(d+"."+(h||""))),new u(n,i,o,a,l,f,y)}static _readUnknownDigits(e,t){let n=t;for(;n<e.length&&i.isDigit(e.charCodeAt(n));n++);return e.substring(t,n)}static _readDigits(e,t,n){let r=0;for(let i=t;i<t+n;i++){const t=e.charCodeAt(i)-48;if(t<0&&t>9)return-1;r=10*r+t}return r}}c._timeParserStates={[s.YEAR]:new l(s.YEAR,4,{T:s.OFFSET_UNKNOWN,"-":s.MONTH}),[s.MONTH]:new l(s.MONTH,2,{T:s.OFFSET_UNKNOWN,"-":s.DAY}),[s.DAY]:new l(s.DAY,2,{T:s.HOUR}),[s.HOUR]:new l(s.HOUR,2,{":":s.MINUTE}),[s.MINUTE]:new l(s.MINUTE,2,{":":s.SECONDS,"+":s.OFFSET_POSITIVE,"-":s.OFFSET_NEGATIVE,Z:s.OFFSET_ZULU}),[s.SECONDS]:new l(s.SECONDS,2,{".":s.FRACTIONAL_SECONDS,"+":s.OFFSET_POSITIVE,"-":s.OFFSET_NEGATIVE,Z:s.OFFSET_ZULU}),[s.FRACTIONAL_SECONDS]:new l(s.FRACTIONAL_SECONDS,null,{"+":s.OFFSET_POSITIVE,"-":s.OFFSET_NEGATIVE,Z:s.OFFSET_ZULU}),[s.OFFSET_POSITIVE]:new l(s.OFFSET_POSITIVE,2,{":":s.OFFSET_MINUTES}),[s.OFFSET_NEGATIVE]:new l(s.OFFSET_NEGATIVE,2,{":":s.OFFSET_MINUTES}),[s.OFFSET_MINUTES]:new l(s.OFFSET_MINUTES,2),[s.OFFSET_ZULU]:new l(s.OFFSET_ZULU,0),[s.OFFSET_UNKNOWN]:new l(s.OFFSET_UNKNOWN,0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=new Map),this.contextValues=new Map(e)}return e.prototype.getValue=function(e){return this.contextValues.get(e)},e.prototype.setValue=function(e,t){return this.contextValues.set(e,t),this},e.prototype.getContextKeys=function(){return Array.from(this.contextValues.keys())},e.prototype.getContextEntries=function(){return new Map(this.contextValues)},e}();t.default=r},function(e,t,n){var r=n(52).default,i=n(20);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(211);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(128),t),i(n(286),t),i(n(287),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(288);t.KatalWeblabClient=r.KatalWeblabClient;var i=n(315);t.BrowserStorageCache=i.BrowserStorageCache;var o=n(317);t.TestWeblabClient=o.TestWeblabClient},function(e,t,n){var r=n(83);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=r(n(23)),s=r(n(24)),u=r(n(21)),l=r(n(27)),c=r(n(215)),f=r(n(99)),d=r(n(96));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).setNamedMetric(n.LATENCY_SUFFIX,(function(e){return new f.default(e)})),r.setNamedMetric(n.FAILURE_SUFFIX,(function(e){return new d.default(e,1)})),r}return(0,o.default)(n,[{key:"setFailure",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?1:0,n=this.failureMetric;n.value=t}},{key:"setSuccess",value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(e){this.latencyMetric.value=e}},{key:"latencyMetric",get:function(){return this.getNamedMetric(n.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(n.FAILURE_SUFFIX)}}]),n}(c.default);t.default=p,(0,l.default)(p,"LATENCY_SUFFIX","Latency"),(0,l.default)(p,"FAILURE_SUFFIX","Failure")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=void 0;return e.some((function(e){return null!=(n=t(e))})),n}},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=r(n(28)),s=r(n(29)),u=r(n(25)),l=r(n(33)),c=r(n(235)),f=r(n(118)),d=r(n(115));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).setNamedMetric(n.LATENCY_SUFFIX,(function(e){return new f.default(e)})),r.setNamedMetric(n.FAILURE_SUFFIX,(function(e){return new d.default(e,1)})),r}return(0,o.default)(n,[{key:"setFailure",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?1:0,n=this.failureMetric;n.value=t}},{key:"setSuccess",value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(e){this.latencyMetric.value=e}},{key:"latencyMetric",get:function(){return this.getNamedMetric(n.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(n.FAILURE_SUFFIX)}}]),n}(c.default);t.default=p,(0,l.default)(p,"LATENCY_SUFFIX","Latency"),(0,l.default)(p,"FAILURE_SUFFIX","Failure")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=void 0;return e.some((function(e){return null!=(n=t(e))})),n}},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=r(n(30)),s=r(n(31)),u=r(n(26)),l=r(n(34)),c=r(n(293)),f=r(n(141)),d=r(n(138));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).setNamedMetric(n.LATENCY_SUFFIX,(function(e){return new f.default(e)})),r.setNamedMetric(n.FAILURE_SUFFIX,(function(e){return new d.default(e,1)})),r}return(0,o.default)(n,[{key:"setFailure",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?1:0,n=this.failureMetric;n.value=t}},{key:"setSuccess",value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(e){this.latencyMetric.value=e}},{key:"latencyMetric",get:function(){return this.getNamedMetric(n.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(n.FAILURE_SUFFIX)}}]),n}(c.default);t.default=p,(0,l.default)(p,"LATENCY_SUFFIX","Latency"),(0,l.default)(p,"FAILURE_SUFFIX","Failure")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=void 0;return e.some((function(e){return null!=(n=t(e))})),n}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.IntSize=void 0,function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt"}(r=t.IntSize||(t.IntSize={})),t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryReader=void 0;const i=r(n(70)),o=n(72),a=n(55),s=n(41),u=n(353),l=n(153),c=n(14),f=n(32);function d(e){switch(e){case 0:return c.IonTypes.NULL;case 1:return c.IonTypes.BOOL;case 2:case 3:return c.IonTypes.INT;case 4:return c.IonTypes.FLOAT;case 5:return c.IonTypes.DECIMAL;case 6:return c.IonTypes.TIMESTAMP;case 7:return c.IonTypes.SYMBOL;case 8:return c.IonTypes.STRING;case 9:return c.IonTypes.CLOB;case 10:return c.IonTypes.BLOB;case 11:return c.IonTypes.LIST;case 12:return c.IonTypes.SEXP;case 13:return c.IonTypes.STRUCT;default:return null}}t.BinaryReader=class{constructor(e,t){this._annotations=null,this._parser=new u.ParserBinaryRaw(e),this._cat=t||new o.Catalog,this._symtab=s.defaultLocalSymbolTable(),this._raw_type=-2}position(){return this._parser.source().position()}next(){if(this._annotations=null,-1===this._raw_type)return null;for(this._raw_type=this._parser.next();0===this.depth();this._raw_type=this._parser.next())if(7===this._raw_type){if(this._parser._getSid()!==a.IVM.sid)break;this._symtab=s.defaultLocalSymbolTable()}else{if(13!==this._raw_type)break;if(!this._parser.hasAnnotations())break;if(this._parser.getAnnotation(0)!==l.ion_symbol_table_sid)break;this._symtab=l.makeSymbolTable(this._cat,this)}return d(this._raw_type)}stepIn(){if(!d(this._raw_type).isContainer)throw new Error("Can't step in to a scalar value");this._parser.stepIn(),this._raw_type=-2}stepOut(){this._parser.stepOut(),this._raw_type=-2}type(){return d(this._raw_type)}depth(){return this._parser.depth()}fieldName(){return this.getSymbolString(this._parser.getFieldId())}hasAnnotations(){return this._parser.hasAnnotations()}annotations(){return this._loadAnnotations(),null!==this._annotations?this._annotations:[]}getAnnotation(e){return this._loadAnnotations(),this._annotations[e]}isNull(){return 0===this._raw_type||this._parser.isNull()}byteValue(){return this._parser.uInt8ArrayValue()}uInt8ArrayValue(){return this._parser.uInt8ArrayValue()}booleanValue(){return this._parser.booleanValue()}decimalValue(){return this._parser.decimalValue()}bigIntValue(){return this._parser.bigIntValue()}intSize(){return f.JsbiSupport.isSafeInteger(this.bigIntValue())?i.default.Number:i.default.BigInt}numberValue(){return this._parser.numberValue()}stringValue(){const e=this._parser;switch(d(this._raw_type)){case c.IonTypes.NULL:return null;case c.IonTypes.STRING:return this.isNull()?null:e.stringValue();case c.IonTypes.SYMBOL:if(this.isNull())return null;const t=e._getSid();if(null!==t)return this.getSymbolString(t)}throw new Error("Current value is not a string or symbol.")}timestampValue(){return this._parser.timestampValue()}value(){const e=this.type();if(e&&e.isContainer){if(this.isNull())return null;throw new Error("Unable to provide a value for "+e.name+" containers.")}switch(e){case c.IonTypes.NULL:return null;case c.IonTypes.BLOB:case c.IonTypes.CLOB:return this.byteValue();case c.IonTypes.BOOL:return this.booleanValue();case c.IonTypes.DECIMAL:return this.decimalValue();case c.IonTypes.INT:return this.bigIntValue();case c.IonTypes.FLOAT:return this.numberValue();case c.IonTypes.STRING:case c.IonTypes.SYMBOL:return this.stringValue();case c.IonTypes.TIMESTAMP:return this.timestampValue();default:throw new Error("There is no current value.")}}_loadAnnotations(){null===this._annotations&&(this._annotations=[],this._parser.getAnnotations().forEach((e=>{this._annotations.push(this.getSymbolString(e))})))}getSymbolString(e){let t=null;if(null===e)return null;if(e>0){if(t=this._symtab.getSymbolText(e),void 0===t)throw new Error("symbol is unresolvable")}else{if(0===e)throw new Error("Symbol ID zero is unsupported");if(e<0)throw new Error("Negative symbol ID: "+e+" is illegal.")}return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Catalog=void 0;const r=n(73);t.Catalog=class{constructor(){this.symbolTables={},this.add(r.getSystemSymbolTable())}add(e){if(void 0===e.name||null===e.name)throw new Error("SymbolTable name must be defined.");void 0===this.symbolTables[e.name]&&(this.symbolTables[e.name]=[]),this.symbolTables[e.name][e.version]=e}getVersion(e,t){const n=this.symbolTables[e];if(!n)return null;let r=n[t];return r||(r=n[n.length]),r||null}getTable(e){const t=this.symbolTables[e];return void 0===t?null:t[t.length-1]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSystemSymbolTableImport=t.getSystemSymbolTable=void 0;const r=n(151),i=new(n(74).SharedSymbolTable)("$ion",1,["$ion","$ion_1_0","$ion_symbol_table","name","version","imports","symbols","max_id","$ion_shared_symbol_table"]);function o(){return i}t.getSystemSymbolTable=o,t.getSystemSymbolTableImport=function(){return new r.Import(null,o())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedSymbolTable=void 0;t.SharedSymbolTable=class{constructor(e,t,n){this._name=e,this._version=t,this._symbols=n,this._idsByText=new Map,this._numberOfSymbols=this._symbols.length;for(let r=n.length-1;r>=0;r--)this._idsByText.set(n[r],r)}get numberOfSymbols(){return this._numberOfSymbols}get name(){return this._name}get version(){return this._version}getSymbolText(e){if(e<0)throw new Error(`Index ${e} is out of bounds for the SharedSymbolTable name=${this.name}, version=${this.version}`);if(!(e>=this.numberOfSymbols))return this._symbols[e]}getSymbolId(e){return this._idsByText.get(e)}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsbiSerde=void 0;const i=r(n(17)),o=n(32);class a{static toSignedIntBytes(e,t){let n=this.toUnsignedIntBytes(e);if(n[0]>=128){const e=new Uint8Array(n.length+1);e.set(n,1),n=e}return t&&(n[0]+=128),n}static fromUnsignedBytes(e){let t=o.JsbiSupport.ZERO;for(let n=0;n<e.length;n++){const r=i.default.BigInt(e[n]);t=i.default.leftShift(t,this.BITS_PER_BYTE),t=i.default.bitwiseOr(t,r)}return t}static toUnsignedIntBytes(e){o.JsbiSupport.isNegative(e)&&(e=i.default.unaryMinus(e));const t=this.getUnsignedIntSizeInBytes(e),n=new Uint8Array(t);for(let r=t-1;r>=0;r--){const t=i.default.toNumber(i.default.bitwiseAnd(e,this.BYTE_MAX_VALUE));e=i.default.signedRightShift(e,this.BITS_PER_BYTE),n[r]=t}return n}static getUnsignedIntSizeInBytes(e){for(let r=0;r<this.SIZE_THRESHOLDS.length;r++){const t=this.SIZE_THRESHOLDS[r];if(i.default.lessThanOrEqual(e,t))return r+1}let t=this.SIZE_THRESHOLDS.length,n=this.calculateSizeThreshold(t);for(;i.default.greaterThan(e,n);)t++,n=this.calculateSizeThreshold(t);return t}static calculateSizeThresholds(){const e=[];for(let t=1;t<=this.SERIALIZED_JSBI_SIZES_TO_PRECOMPUTE;t++)e.push(this.calculateSizeThreshold(t));return e}static calculateSizeThreshold(e){const t=i.default.multiply(i.default.BigInt(e),this.BITS_PER_BYTE),n=i.default.exponentiate(o.JsbiSupport.TWO,t);return i.default.subtract(n,o.JsbiSupport.ONE)}}t.JsbiSerde=a,a.SERIALIZED_JSBI_SIZES_TO_PRECOMPUTE=64,a.BITS_PER_BYTE=i.default.BigInt(8),a.BYTE_MAX_VALUE=i.default.BigInt(255),a.SIZE_THRESHOLDS=a.calculateSizeThresholds()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Writeable=void 0;t.Writeable=class{constructor(e){this.bufferSize=e||4096,this.buffers=[new Uint8Array(this.bufferSize)],this.index=0,this.clean=!1}get currentBuffer(){return this.buffers[this.buffers.length-1]}get totalSize(){let e=0;for(let t=0;t<this.buffers.length-1;t++)e+=this.buffers[t].length;return e+this.index}writeByte(e){this.clean=!1,this.currentBuffer[this.index]=e,this.index++,this.index===this.bufferSize&&(this.buffers.push(new Uint8Array(this.bufferSize)),this.index=0)}writeBytes(e,t,n){void 0===t&&(t=0);const r=void 0!==n?Math.min(e.length-t,n):e.length-t;r<this.currentBuffer.length-this.index-1?(this.currentBuffer.set(e.subarray(t,t+r),this.index),this.index+=r):(this.buffers[this.buffers.length-1]=this.currentBuffer.slice(0,this.index),this.buffers.push(e.subarray(t,n)),this.buffers.push(new Uint8Array(this.bufferSize)),this.clean=!1,this.index=0)}getBytes(){if(this.clean)return this.buffers[0];const e=new Uint8Array(this.totalSize);let t=0;for(let n=0;n<this.buffers.length-1;n++)e.set(this.buffers[n],t),t+=this.buffers[n].length;return e.set(this.currentBuffer.subarray(0,this.index),t),this.buffers=[e,new Uint8Array(this.bufferSize)],this.index=0,this.clean=!0,e}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextWriter=t.Context=t.State=void 0;const i=r(n(17)),o=n(155),a=n(36),s=n(14),u=n(42),l=n(32),c=n(35);var f;!function(e){e[e.VALUE=0]="VALUE",e[e.STRUCT_FIELD=1]="STRUCT_FIELD"}(f=t.State||(t.State={}));class d{constructor(e){this.state=e===s.IonTypes.STRUCT?f.STRUCT_FIELD:f.VALUE,this.clean=!0,this.containerType=e}}t.Context=d;class h extends o.AbstractWriter{constructor(e){super(),this.writeable=e,this._floatSerializer=e=>{h._serializeFloat(this,e)},this.containerContext=[new d(null)]}get isTopLevel(){return 0===this.depth()}get currentContainer(){return this.containerContext[this.depth()]}static _serializeFloat(e,t){let n;if(t===Number.POSITIVE_INFINITY)n="+inf";else if(t===Number.NEGATIVE_INFINITY)n="-inf";else if(Object.is(t,Number.NaN))n="nan";else if(Object.is(t,-0))n="-0e0";else{n=t.toExponential();const e=n.lastIndexOf("+");e>-1&&(n=n.slice(0,e)+n.slice(e+1))}e.writeUtf8(n)}getBytes(){return this.writeable.getBytes()}writeBlob(e){c._assertDefined(e),this._serializeValue(s.IonTypes.BLOB,e,(e=>{this.writeable.writeBytes(u.encodeUtf8("{{"+a.toBase64(e)+"}}"))}))}writeBoolean(e){c._assertDefined(e),this._serializeValue(s.IonTypes.BOOL,e,(e=>{this.writeUtf8(e?"true":"false")}))}writeClob(e){c._assertDefined(e),this._serializeValue(s.IonTypes.CLOB,e,(e=>{let t;this.writeUtf8('{{"');for(let n=0;n<e.length;n++){const r=e[n];if(r>127&&r<256){t="\\x"+r.toString(16);for(let e=0;e<t.length;e++)this.writeable.writeByte(t.charCodeAt(e))}else{const e=a.ClobEscapes[r];if(void 0===e)if(r<32){t="\\x"+r.toString(16);for(let e=0;e<t.length;e++)this.writeable.writeByte(t.charCodeAt(e))}else this.writeable.writeByte(r);else this.writeable.writeBytes(new Uint8Array(e))}}this.writeUtf8('"}}')}))}writeDecimal(e){c._assertDefined(e),this._serializeValue(s.IonTypes.DECIMAL,e,(e=>{let t="",n=e.getCoefficient();i.default.lessThan(n,l.JsbiSupport.ZERO)&&(n=i.default.unaryMinus(n)),e.isNegative()&&(t+="-");const r=e.getExponent(),o=-r;if(0==r)t+=n.toString()+".";else if(r<0){const e=n.toString().length,r=e-1-o;if(r>=0){const r=e-o;t+=n.toString().substring(0,r),t+=".",t+=n.toString().substring(r,e)}else r>=-6?(t+="0.",t+="00000".substring(0,o-e),t+=n.toString()):(t+=n.toString(),t+="d-",t+=o.toString())}else t+=n.toString()+"d"+r;this.writeUtf8(t)}))}_isInStruct(){return this.currentContainer.containerType===s.IonTypes.STRUCT}writeFieldName(e){if(c._assertDefined(e),this.currentContainer.containerType!==s.IonTypes.STRUCT)throw new Error("Cannot write field name outside of a struct");if(this.currentContainer.state!==f.STRUCT_FIELD)throw new Error("Expecting a struct value");this.currentContainer.clean||this.writeable.writeByte(a.CharCodes.COMMA),this.writeSymbolToken(e),this.writeable.writeByte(a.CharCodes.COLON),this.currentContainer.state=f.VALUE}writeFloat32(e){c._assertDefined(e),this._writeFloat(e)}writeFloat64(e){c._assertDefined(e),this._writeFloat(e)}writeInt(e){c._assertDefined(e),this._serializeValue(s.IonTypes.INT,e,(e=>{this.writeUtf8(e.toString(10))}))}_writeNull(e){e===s.IonTypes.NULL?this.writeUtf8("null"):this.writeUtf8("null."+e.name)}writeNull(e){null==e&&(e=s.IonTypes.NULL),this.handleSeparator(),this.writeAnnotations(),this._writeNull(e),this.currentContainer.containerType===s.IonTypes.STRUCT&&(this.currentContainer.state=f.STRUCT_FIELD)}writeString(e){c._assertDefined(e),this._serializeValue(s.IonTypes.STRING,e,(e=>{this.writeable.writeBytes(u.encodeUtf8('"'+a.escape(e,a.StringEscapes)+'"'))}))}writeSymbol(e){c._assertDefined(e),this._serializeValue(s.IonTypes.SYMBOL,e,(e=>{this.writeSymbolToken(e)}))}writeTimestamp(e){c._assertDefined(e),this._serializeValue(s.IonTypes.TIMESTAMP,e,(e=>{this.writeUtf8(e.toString())}))}stepIn(e){if(this.currentContainer.state===f.STRUCT_FIELD)throw new Error(`Started writing a ${this.currentContainer.containerType.name} inside a struct"\n                + " without writing the field name first. Call writeFieldName(string) with the desired name"\n                + " before calling stepIn(${this.currentContainer.containerType.name}).`);switch(e){case s.IonTypes.LIST:this.writeContainer(e,a.CharCodes.LEFT_BRACKET);break;case s.IonTypes.SEXP:this.writeContainer(e,a.CharCodes.LEFT_PARENTHESIS);break;case s.IonTypes.STRUCT:if(void 0!==this._annotations&&"$ion_symbol_table"===this._annotations[0]&&0===this.depth())throw new Error("Unable to alter symbol table context, it allows invalid ion to be written.");this.writeContainer(e,a.CharCodes.LEFT_BRACE);break;default:throw new Error("Unrecognized container type")}}stepOut(){const e=this.containerContext.pop();if(!e||!e.containerType)throw new Error("Can't step out when not in a container");if(e.containerType===s.IonTypes.STRUCT&&e.state===f.VALUE)throw new Error("Expecting a struct value");switch(e.containerType){case s.IonTypes.LIST:this.writeable.writeByte(a.CharCodes.RIGHT_BRACKET);break;case s.IonTypes.SEXP:this.writeable.writeByte(a.CharCodes.RIGHT_PARENTHESIS);break;case s.IonTypes.STRUCT:this.writeable.writeByte(a.CharCodes.RIGHT_BRACE);break;default:throw new Error("Unexpected container TypeCode")}}close(){if(this.depth()>0)throw new Error("Writer has one or more open containers; call stepOut() for each container prior to close()")}depth(){return this.containerContext.length-1}_serializeValue(e,t,n){if(this.currentContainer.state===f.STRUCT_FIELD)throw new Error("Expecting a struct field");null!==t?(this.handleSeparator(),this.writeAnnotations(),n(t),this.currentContainer.containerType===s.IonTypes.STRUCT&&(this.currentContainer.state=f.STRUCT_FIELD)):this.writeNull(e)}writeContainer(e,t){this.currentContainer.containerType===s.IonTypes.STRUCT&&this.currentContainer.state===f.VALUE&&(this.currentContainer.state=f.STRUCT_FIELD),this.handleSeparator(),this.writeAnnotations(),this.writeable.writeByte(t),this._stepIn(e)}handleSeparator(){if(0===this.depth())this.currentContainer.clean?this.currentContainer.clean=!1:this.writeable.writeByte(a.CharCodes.LINE_FEED);else if(this.currentContainer.clean)this.currentContainer.clean=!1;else switch(this.currentContainer.containerType){case s.IonTypes.LIST:this.writeable.writeByte(a.CharCodes.COMMA);break;case s.IonTypes.SEXP:this.writeable.writeByte(a.CharCodes.SPACE)}}writeUtf8(e){this.writeable.writeBytes(u.encodeUtf8(e))}writeAnnotations(){for(const e of this._annotations)this.writeSymbolToken(e),this.writeUtf8("::");this._clearAnnotations()}_stepIn(e){this.containerContext.push(new d(e))}writeSymbolToken(e){0===e.length||a.is_keyword(e)||this.isSid(e)||!a.isIdentifier(e)&&!a.isOperator(e)||a.isOperator(e)&&this.currentContainer.containerType!=s.IonTypes.SEXP?this.writeable.writeBytes(u.encodeUtf8("'"+a.escape(e,a.SymbolEscapes)+"'")):this.writeUtf8(e)}_writeFloat(e){this._serializeValue(s.IonTypes.FLOAT,e,this._floatSerializer)}isSid(e){if(e.length>1&&e.charAt(0)==="$".charAt(0)){const t=e.substr(1,e.length);return+t==+t}return!1}}t.TextWriter=h},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._ionValueFromJsValue=t._domConstructorFor=t._NativeJsString=t._NativeJsBoolean=void 0;const i=r(n(17)),o=n(5),a=n(14),s=n(35);t._NativeJsBoolean=Boolean,t._NativeJsString=String;let u=null;function l(e){const t=(null===u&&(u=new Map([[a.IonTypes.NULL,o.dom.Null],[a.IonTypes.BOOL,o.dom.Boolean],[a.IonTypes.INT,o.dom.Integer],[a.IonTypes.FLOAT,o.dom.Float],[a.IonTypes.DECIMAL,o.dom.Decimal],[a.IonTypes.TIMESTAMP,o.dom.Timestamp],[a.IonTypes.STRING,o.dom.String],[a.IonTypes.BLOB,o.dom.Blob],[a.IonTypes.LIST,o.dom.List],[a.IonTypes.STRUCT,o.dom.Struct]])),u).get(e);if(!s._hasValue(t))throw new Error("No dom type constructor was found for Ion type "+e.name);return t}t._domConstructorFor=l,t._ionValueFromJsValue=function(e,t=[]){return l(function(e){if(void 0===e)throw new Error("Cannot create an Ion value from `undefined`.");if(null===e)return a.IonTypes.NULL;const t=typeof e;switch(t){case"string":return a.IonTypes.STRING;case"number":return Number.isInteger(e)?a.IonTypes.INT:a.IonTypes.FLOAT;case"boolean":return a.IonTypes.BOOL;case"object":case"bigint":break;default:throw new Error(`Value.from() does not support the JS primitive type ${t}.`)}if(e instanceof i.default)return a.IonTypes.INT;if("bigint"==typeof e)throw new Error("bigints are not supported without using Babel for JSBI compilation.");return e instanceof Number?Number.isInteger(e.valueOf())?a.IonTypes.INT:a.IonTypes.FLOAT:e instanceof Boolean?a.IonTypes.BOOL:e instanceof String?a.IonTypes.STRING:e instanceof o.Decimal?a.IonTypes.DECIMAL:e instanceof Date||e instanceof o.Timestamp?a.IonTypes.TIMESTAMP:e instanceof Uint8Array?a.IonTypes.BLOB:e instanceof Array?a.IonTypes.LIST:a.IonTypes.STRUCT}(e))._fromJsValue(e,t)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Decimal=void 0;const a=o(n(5)),s=n(5),u=n(22),l=n(18),c=n(80),f=(new u.FromJsConstructorBuilder).withClasses(a.Decimal).build();class d extends(l.Value(Number,s.IonTypes.DECIMAL,f)){constructor(e,t=[]){super(e.numberValue()),this._decimalValue=e,this._numberValue=e.numberValue(),this._setAnnotations(t)}numberValue(){return this._numberValue}decimalValue(){return this._decimalValue}toString(){return this._decimalValue.toString()}valueOf(){return this._numberValue}writeTo(e){e.setAnnotations(this.getAnnotations()),e.writeDecimal(this.decimalValue())}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0,coerceNumericType:!1}){let n=!1,r=null;return e instanceof d?(n=!0,r=e.decimalValue()):!0===t.coerceNumericType&&e instanceof c.Float?(n=!0,r=new a.Decimal(e.toString())):t.onlyCompareIon||(e instanceof a.Decimal?(n=!0,r=e):(e instanceof Number||"number"==typeof e)&&(n=!0,r=new a.Decimal(e.toString()))),!!n&&this.decimalValue().equals(r)}}t.Decimal=d},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Float=void 0;const a=n(5),s=n(22),u=n(18),l=n(79),c=o(n(5)),f=(new s.FromJsConstructorBuilder).withPrimitives(s.Primitives.Number).withClassesToUnbox(Number).build();class d extends(u.Value(Number,a.IonTypes.FLOAT,f)){constructor(e,t=[]){super(e),this._setAnnotations(t)}numberValue(){return+this.valueOf()}writeTo(e){e.setAnnotations(this.getAnnotations()),e.writeFloat64(this.numberValue())}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0,coerceNumericType:!1}){let n=!1,r=null;if(e instanceof d)n=!0,r=e.numberValue();else{if(!0===t.coerceNumericType&&e instanceof l.Decimal){return new c.Decimal(e.toString()).equals(e.decimalValue())}t.onlyCompareIon||(e instanceof Number||"number"==typeof e)&&(n=!0,r=e.valueOf())}if(!n)return!1;let i=Object.is(this.numberValue(),r);return!(null==t.epsilon||!(i||Math.abs(this.numberValue()-r)<=t.epsilon))||i}}t.Float=d},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(83);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(84).default,i=n(187);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShpMessageType=t.HeaderActionType=t.HeaderActionPriority=void 0,t.isCustomClientMessage=function(e){return e.type===r.CustomClientMessage},t.isCustomHeaderAction=function(e){return e.type===i.CustomAction},t.isDockUndockHeaderAction=function(e){return e.type===i.DockUndock};var r=t.ShpMessageType=function(e){return e.ContentFrameReady="@shp/contentFrameReady",e.ContentFrameLoading="@shp/contentFrameLoading",e.ContentFrameLoaded="@shp/contentFrameLoaded",e.SummonContent="@shp/summonContent",e.BackButtonClicked="@shp/backButtonClicked",e.UpdateHeader="@shp/updateHeader",e.CustomClientMessage="@shp/customClientMessage",e}({}),i=(t.HeaderActionPriority=function(e){return e.Primary="Primary",e.Secondary="Secondary",e}({}),t.HeaderActionType=function(e){return e.DockUndock="Dock/Undock",e.CustomAction="CustomAction",e}({}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(191);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(192);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=n(193);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=n(194);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var u=n(195);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=n(196);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}))},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(52).default,i=n(206);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(89);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Counter",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"HttpRequest",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Initialization",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Object",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"String",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"TimedAttempt",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"TimerStopwatch",{enumerable:!0,get:function(){return u.default}});var i=r(n(38)),o=r(n(93)),a=r(n(96)),s=r(n(98)),u=r(n(99)),l=r(n(64)),c=r(n(218)),f=r(n(219))},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"!=typeof e)return new Error("Expected ".concat(t," to be a string, but it was a ").concat((0,i.default)(e)));if(e.length>127)return new Error("Expected ".concat(t," to be less than ").concat(127," characters, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected ".concat(t," to be non-blank"));if(!o.test(e))return new Error("Expected ".concat(t," to contain only valid characters, but it was ").concat(e,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};var i=r(n(37)),o=/^[A-Za-z0-9.:@_/-]+$/},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(37)),o=r(n(10)),a=r(n(11)),s=r(n(94)),u=r(n(44)),l=r(n(23)),c=r(n(24)),f=r(n(21)),d=r(n(27)),h=r(n(38));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var i=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var _=function(e){(0,l.default)(n,e);var t=p(n);function n(e,r){var i;return(0,o.default)(this,n),i=t.call(this,e),(0,d.default)((0,s.default)(i),"truncate",!1),i.value=r,i}return(0,a.default)(n,[{key:"value",get:function(){return this._value},set:function(e){"number"!=typeof e&&"boolean"!=typeof e||(e=e.toString()),this._value=e}},{key:"type",get:function(){return h.default.Types.String}},{key:"canMonitor",get:function(){return!1}},{key:"validationError",value:function(){var e=(0,u.default)((0,f.default)(n.prototype),"validationError",this).call(this);if(e)return e;if("string"!=typeof this.value)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be type string, but it was ").concat((0,i.default)(this.value)));if(this.value.length>n.MAX_SIZE){if(!this.truncate)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(n.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."));this.value=this.value.substring(0,n.MAX_SIZE)}}}]),n}(h.default);t.default=_,(0,d.default)(_,"MAX_SIZE",256)},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(21);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=r(n(44)),s=r(n(23)),u=r(n(24)),l=r(n(21)),c=r(n(38)),f=r(n(97));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=d(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,i.default)(this,n),(r=t.call(this,e)).value=o,r}return(0,o.default)(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=Math.round(e)}},{key:"type",get:function(){return c.default.Types.Counter}},{key:"add",value:function(e){this.value+=e}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var e=(0,a.default)((0,l.default)(n.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Counter metrics object '".concat(this.name,"'"))}}]),n}(c.default);t.default=h},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("number"!=typeof e)return new Error("Expected ".concat(t," to have type 'number', but it was type '").concat((0,i.default)(e),"'"));if(e<0)return new Error("Expected ".concat(t," to be positive, but it was ").concat(e));if(!function(e){return isFinite(e)&&Math.floor(e)===e}(e))return new Error("Expected ".concat(t," to be an integer, but it was ").concat(e))};var i=r(n(37))},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=r(n(44)),s=r(n(23)),u=r(n(24)),l=r(n(21)),c=r(n(38)),f=r(n(97));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=d(n);function n(e,r){var o;return(0,i.default)(this,n),(o=t.call(this,e)).value=r,o}return(0,o.default)(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=null!=e?Math.round(e):e}},{key:"type",get:function(){return c.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var e=(0,a.default)((0,l.default)(n.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Timer metrics object '".concat(this.name,"'"))}}]),n}(c.default);t.default=h},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=r(n(100)),s=r(n(44)),u=r(n(23)),l=r(n(24)),c=r(n(21));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var d=function(e){(0,u.default)(n,e);var t=f(n);function n(e,r){var o;return(0,i.default)(this,n),(o=t.call(this,e,void 0)).start(r),o._value=void 0,o}return(0,o.default)(n,[{key:"start",value:function(e){this._startTime=e||this.now()}},{key:"stop",value:function(e){return this._stopTime=e||this.now()}},{key:"isStopped",get:function(){return void 0!==this._stopTime}},{key:"value",get:function(){return void 0===(0,s.default)((0,c.default)(n.prototype),"value",this)&&(this.isStopped||this.stop(),(0,a.default)((0,c.default)(n.prototype),"value",this.stopTime-this.startTime,this,!0)),(0,s.default)((0,c.default)(n.prototype),"value",this)},set:function(e){(0,a.default)((0,c.default)(n.prototype),"value",e,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}},{key:"now",value:function(){return performance.now()}}]),n}(r(n(98)).default);t.default=d},function(e,t,n){var r=n(95),i=n(27);function o(e,t,n,a){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var a,s=r(e,t);if(s){if((a=Object.getOwnPropertyDescriptor(s,t)).set)return a.set.call(o,n),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(o,t)){if(!a.writable)return!1;a.value=n,Object.defineProperty(o,t,a)}else i(o,t,n);return!0})(e,t,n,a)}e.exports=function(e,t,n,r,i){if(!o(e,t,n,r||e)&&i)throw new Error("failed to set property");return n},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=r(n(27)),s=r(n(92)),u=r(n(224)),l=r(n(65)),c=n(102),f=n(104);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=["site","serviceName","methodName"],_=["actionId"],g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.context=h({},t)}return(0,o.default)(e,[{key:"merge",value:function(t){if(!t)return this;if(t instanceof e.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");var n=t instanceof e?t.context:t;return new e(h(h(h({},this.context),n),{},{relatedMetrics:(0,c.mergeLists)(this.context.relatedMetrics,n.relatedMetrics),relatedMetricsSingleAction:(0,c.mergeLists)(this.context.relatedMetricsSingleAction,n.relatedMetricsSingleAction),cloudWatchDimensions:(0,c.mergeLists)(this.context.cloudWatchDimensions,n.cloudWatchDimensions)}))}},{key:"withoutRelatedMetricsSingleAction",value:function(){return new e(h(h({},this.context),{},{relatedMetricsSingleAction:void 0}))}},{key:"driverContext",value:function(){var t=h({},this.context);return delete t.relatedMetrics,delete t.relatedMetricsSingleAction,delete t.requestId,this.context.requestId&&(t.actionId=(0,f.embedRequestId)(t.actionId,this.context.requestId)),new e(t)}},{key:"getFields",value:function(){return h({},this.context)}},{key:"validationError",value:function(){var e,t=this;return(e=(0,l.default)(p,(function(e){if(null==t.context[e])return new Error("Field ".concat(e," is required, but it is ").concat(t.context[e]))})))?e:(_.forEach((function(e){if(!t.context[e]){var n,r=new CustomEvent("katal.metrics.missing-".concat(e),{detail:{context:t.context}});null===(n=window)||void 0===n||n.dispatchEvent(r),console.warn("No ".concat(e," present in context."))}})),(0,l.default)(Object.keys(this.context),(function(e){return t.validateField(e)})))}},{key:"validateField",value:function(e){var t=this.context[e],n="field ".concat(e);switch(e){case"site":case"serviceName":if(t.indexOf("/")>-1)return new Error("Expected ".concat(n," to contain only valid characters, but it was ").concat(t,".  It cannot contain a slash."));case"methodName":case"actionId":return(0,s.default)(t,n);case"cloudWatchDimensions":return(0,u.default)(t||[])}}}]),e}();t.default=g,(0,a.default)(g,"Builder",function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"context",{})}return(0,o.default)(e,[{key:"withSite",value:function(e){return this.context.site=e,this}},{key:"withServiceName",value:function(e){return this.context.serviceName=e,this}},{key:"withMethodName",value:function(e){return this.context.methodName=e,this}},{key:"withActionId",value:function(e){return this.context.actionId=e,this}},{key:"withRequestId",value:function(e){return this.context.requestId=e,this}},{key:"withCloudWatchDimensions",value:function(e){return this.context.cloudWatchDimensions=e,this}},{key:"withRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=t,this}},{key:"addRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=(0,c.mergeLists)(this.context.relatedMetrics,t),this}},{key:"withRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=t,this}},{key:"addRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=(0,c.mergeLists)(this.context.relatedMetricsSingleAction,t),this}},{key:"build",value:function(){return new g(this.context)}}]),e}())},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLists=function(e,t){return e||t?[].concat((0,i.default)(e||[]),(0,i.default)(t||[])):void 0};var i=r(n(225))},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embedRequestId=function(e,t){if(t)return[t,e].join("::");return e}},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"publish",value:function(e,t){throw new Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead")}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR_HANDLER=void 0;t.DEFAULT_ERROR_HANDLER=function(e){throw e}},function(e,t){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Counter",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"HttpRequest",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Initialization",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Object",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"String",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"TimedAttempt",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"TimerStopwatch",{enumerable:!0,get:function(){return u.default}});var i=r(n(45)),o=r(n(112)),a=r(n(115)),s=r(n(117)),u=r(n(118)),l=r(n(66)),c=r(n(238)),f=r(n(239))},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"!=typeof e)return new Error("Expected ".concat(t," to be a string, but it was a ").concat((0,i.default)(e)));if(e.length>127)return new Error("Expected ".concat(t," to be less than ").concat(127," characters, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected ".concat(t," to be non-blank"));if(!o.test(e))return new Error("Expected ".concat(t," to contain only valid characters, but it was ").concat(e,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};var i=r(n(39)),o=/^[A-Za-z0-9.:@_/-]+$/},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e){e.String="String",e.Counter="Counter",e.Timer="Timer",e.List="List"}(r||(r={}));var i=r;t.default=i},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(39)),o=r(n(12)),a=r(n(15)),s=r(n(113)),u=r(n(46)),l=r(n(28)),c=r(n(29)),f=r(n(25)),d=r(n(33)),h=r(n(45));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var i=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var _=function(e){(0,l.default)(n,e);var t=p(n);function n(e,r){var i;return(0,o.default)(this,n),i=t.call(this,e),(0,d.default)((0,s.default)(i),"truncate",!1),i.value=r,i}return(0,a.default)(n,[{key:"value",get:function(){return this._value},set:function(e){"number"!=typeof e&&"boolean"!=typeof e||(e=e.toString()),this._value=e}},{key:"type",get:function(){return h.default.Types.String}},{key:"canMonitor",get:function(){return!1}},{key:"validationError",value:function(){var e=(0,u.default)((0,f.default)(n.prototype),"validationError",this).call(this);if(e)return e;if("string"!=typeof this.value)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be type string, but it was ").concat((0,i.default)(this.value)));if(this.value.length>n.MAX_SIZE){if(!this.truncate)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(n.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."));this.value=this.value.substring(0,n.MAX_SIZE)}}}]),n}(h.default);t.default=_,(0,d.default)(_,"MAX_SIZE",256)},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(25);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=r(n(46)),s=r(n(28)),u=r(n(29)),l=r(n(25)),c=r(n(45)),f=r(n(116));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=d(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,i.default)(this,n),(r=t.call(this,e)).value=o,r}return(0,o.default)(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=Math.round(e)}},{key:"type",get:function(){return c.default.Types.Counter}},{key:"add",value:function(e){this.value+=e}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var e=(0,a.default)((0,l.default)(n.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Counter metrics object '".concat(this.name,"'"))}}]),n}(c.default);t.default=h},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("number"!=typeof e)return new Error("Expected ".concat(t," to have type 'number', but it was type '").concat((0,i.default)(e),"'"));if(e<0)return new Error("Expected ".concat(t," to be positive, but it was ").concat(e));if(!function(e){return isFinite(e)&&Math.floor(e)===e}(e))return new Error("Expected ".concat(t," to be an integer, but it was ").concat(e))};var i=r(n(39))},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=r(n(46)),s=r(n(28)),u=r(n(29)),l=r(n(25)),c=r(n(45)),f=r(n(116));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=d(n);function n(e,r){var o;return(0,i.default)(this,n),(o=t.call(this,e)).value=r,o}return(0,o.default)(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=null!=e?Math.round(e):e}},{key:"type",get:function(){return c.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var e=(0,a.default)((0,l.default)(n.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Timer metrics object '".concat(this.name,"'"))}}]),n}(c.default);t.default=h},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=r(n(119)),s=r(n(46)),u=r(n(28)),l=r(n(29)),c=r(n(25));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var d=function(e){(0,u.default)(n,e);var t=f(n);function n(e,r){var o;return(0,i.default)(this,n),(o=t.call(this,e,void 0)).start(r),o._value=void 0,o}return(0,o.default)(n,[{key:"start",value:function(e){this._startTime=e||this.now()}},{key:"stop",value:function(e){return this._stopTime=e||this.now()}},{key:"isStopped",get:function(){return void 0!==this._stopTime}},{key:"value",get:function(){return void 0===(0,s.default)((0,c.default)(n.prototype),"value",this)&&(this.isStopped||this.stop(),(0,a.default)((0,c.default)(n.prototype),"value",this.stopTime-this.startTime,this,!0)),(0,s.default)((0,c.default)(n.prototype),"value",this)},set:function(e){(0,a.default)((0,c.default)(n.prototype),"value",e,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}},{key:"now",value:function(){return performance.now()}}]),n}(r(n(117)).default);t.default=d},function(e,t,n){var r=n(114),i=n(33);function o(e,t,n,a){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var a,s=r(e,t);if(s){if((a=Object.getOwnPropertyDescriptor(s,t)).set)return a.set.call(o,n),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(o,t)){if(!a.writable)return!1;a.value=n,Object.defineProperty(o,t,a)}else i(o,t,n);return!0})(e,t,n,a)}e.exports=function(e,t,n,r,i){if(!o(e,t,n,r||e)&&i)throw new Error("failed to set property");return n},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=r(n(33)),s=r(n(110)),u=r(n(244)),l=r(n(67)),c=n(121),f=n(123);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=["site","serviceName","methodName"],_=["actionId"],g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.context=h({},t)}return(0,o.default)(e,[{key:"merge",value:function(t){if(!t)return this;if(t instanceof e.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");var n=t instanceof e?t.context:t;return new e(h(h(h({},this.context),n),{},{relatedMetrics:(0,c.mergeLists)(this.context.relatedMetrics,n.relatedMetrics),relatedMetricsSingleAction:(0,c.mergeLists)(this.context.relatedMetricsSingleAction,n.relatedMetricsSingleAction),cloudWatchDimensions:(0,c.mergeLists)(this.context.cloudWatchDimensions,n.cloudWatchDimensions)}))}},{key:"withoutRelatedMetricsSingleAction",value:function(){return new e(h(h({},this.context),{},{relatedMetricsSingleAction:void 0}))}},{key:"driverContext",value:function(){var t=h({},this.context);return delete t.relatedMetrics,delete t.relatedMetricsSingleAction,delete t.requestId,this.context.requestId&&(t.actionId=(0,f.embedRequestId)(t.actionId,this.context.requestId)),new e(t)}},{key:"getFields",value:function(){return h({},this.context)}},{key:"validationError",value:function(){var e,t=this;return(e=(0,l.default)(p,(function(e){if(null==t.context[e])return new Error("Field ".concat(e," is required, but it is ").concat(t.context[e]))})))?e:(_.forEach((function(e){if(!t.context[e]){var n,r=new CustomEvent("katal.metrics.missing-".concat(e),{detail:{context:t.context}});null===(n=window)||void 0===n||n.dispatchEvent(r),console.warn("No ".concat(e," present in context."))}})),(0,l.default)(Object.keys(this.context),(function(e){return t.validateField(e)})))}},{key:"validateField",value:function(e){var t=this.context[e],n="field ".concat(e);switch(e){case"site":case"serviceName":if(t.indexOf("/")>-1)return new Error("Expected ".concat(n," to contain only valid characters, but it was ").concat(t,".  It cannot contain a slash."));case"methodName":case"actionId":return(0,s.default)(t,n);case"cloudWatchDimensions":return(0,u.default)(t||[])}}}]),e}();t.default=g,(0,a.default)(g,"Builder",function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"context",{})}return(0,o.default)(e,[{key:"withSite",value:function(e){return this.context.site=e,this}},{key:"withServiceName",value:function(e){return this.context.serviceName=e,this}},{key:"withMethodName",value:function(e){return this.context.methodName=e,this}},{key:"withActionId",value:function(e){return this.context.actionId=e,this}},{key:"withRequestId",value:function(e){return this.context.requestId=e,this}},{key:"withCloudWatchDimensions",value:function(e){return this.context.cloudWatchDimensions=e,this}},{key:"withRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=t,this}},{key:"addRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=(0,c.mergeLists)(this.context.relatedMetrics,t),this}},{key:"withRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=t,this}},{key:"addRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=(0,c.mergeLists)(this.context.relatedMetricsSingleAction,t),this}},{key:"build",value:function(){return new g(this.context)}}]),e}())},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLists=function(e,t){return e||t?[].concat((0,i.default)(e||[]),(0,i.default)(t||[])):void 0};var i=r(n(245))},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embedRequestId=function(e,t){if(t)return[t,e].join("::");return e}},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"publish",value:function(e,t){throw new Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead")}}]),e}();t.default=a},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";t.extend=function(e){var t,n,i,o,a=Array.prototype.slice.call(arguments,1);for(t=0,n=a.length;t<n;t+=1)if(i=a[t])for(o in i)r.call(i,o)&&(e[o]=i[o]);return e};var r=Object.prototype.hasOwnProperty;t.hop=r},function(e,t,n){"use strict";var r,i,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.KatalWebSellerCentralClient=t.WeblabRegionType=t.WeblabType=void 0,function(e){e.Session="session",e.Customer="customer",e.Merchant="merchant",e.User="user",e.Partner="partner",e.Vendor="vendor"}(r=t.WeblabType||(t.WeblabType={})),function(e){e.HostMarketplace="host_marketplace",e.Region="region"}(i=t.WeblabRegionType||(t.WeblabRegionType={}));var s=function(){function e(e){var t;this.options=e,this.weblabPath="/mons/weblabs",(null===(t=this.options)||void 0===t?void 0:t.weblabPath)&&(this.weblabPath=this.options.weblabPath)}return e.prototype.setMetricsPublisher=function(e){this.metricsPublisher=e},e.prototype.getTreatments=function(e){var t=this,n=e;return this.verifySellerCentralWeblab(n).then((function(){var r=t.getWeblabApiUrls(n);return t.getTreatmentData(r).then((function(n){if(!Object.keys(n).length)throw new Error("Unable to contact the Mons weblab service to retrieve weblab treatments.");var r=new Map;return e.forEach((function(e){var i,o,a=(null===(i=n[e.id])||void 0===i?void 0:i.treatment)||e.defaultTreatment,s=!(null===(o=n[e.id])||void 0===o?void 0:o.treatment),u=t.convertToTreatment(e,a,s);r.set(e,u)})),r}))}))},e.prototype.recordTrigger=function(e,t){var n=this,r=e,i=this.getRecordTriggerApiData(r,t);return this.verifySellerCentralWeblab([r]).then((function(){return fetch(i.url,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i.body)})})).then((function(e){if(n.publishPerformanceTimerForUrl(e.url,"RecordTrigger.Network"),!e.ok)throw new Error("Unable to contact the weblab service [".concat(i.url,"] to record weblab triggers. Status: ").concat(e.status," Message: ").concat(e.statusText))}))},e.prototype.verifySellerCentralWeblab=function(e){var t=this;return e.filter((function(e){return!e.weblabType||t.isNotSupportedByNewApi(e)})).length?Promise.reject(new Error("Invalid weblab type found or marketplaceId is missing. All weblabs must be of type SellerCentralWeblab or you must provide marketplaceId for partner account.")):Promise.resolve()},e.prototype.convertWeblabToGetRequestFormat=function(e){var t=this.getWeblabMarketplaceType(e),n=encodeURIComponent("".concat(e.id,":").concat(e.weblabType,":").concat(t));return"weblab=".concat(n)},e.prototype.convertToTreatment=function(e,t,n){var r=this;return{weblabId:e.id,treatmentValue:t,assignmentMissing:!!n,recordTrigger:n?function(){return Promise.resolve()}:function(){return r.recordTrigger(e,t)}}},e.prototype.randomId=function(){return Math.floor(1e8*Math.random())},e.prototype.getRequestDuration=function(e){if(null===performance||void 0===performance?void 0:performance.getEntriesByName){var t=performance.getEntriesByName(e);if(null==t?void 0:t.length)return t[0].duration}},e.prototype.publishPerformanceTimerForUrl=function(e,t){if(this.metricsPublisher){var n=this.getRequestDuration(e);n&&this.metricsPublisher.publishTimerMonitor("".concat(t,".Latency"),n)}},e.prototype.getWeblabApiUrls=function(e){var t=this,n={};return e.forEach((function(e){t.updateUrlToQueryParamMapping(e,n)})),Object.keys(n).map((function(e){return"".concat(e,"?").concat(n[e].join("&"),"&reqid=").concat(t.randomId())}))},e.prototype.updateUrlToQueryParamMapping=function(e,t){if(this.doFallbackToOldApi(e))t[this.weblabPath]=(t[this.weblabPath]||[]).concat(this.convertWeblabToGetRequestFormat(e));else{var n="/mons/weblabs/".concat(e.weblabType,"/treatment");t[n]=(t[n]||[]).concat(this.convertWeblabToNewGetRequestFormat(e))}},e.prototype.doFallbackToOldApi=function(e){var t;return!!(null===(t=this.options)||void 0===t?void 0:t.weblabPath)||(e.weblabType===r.Session||e.weblabType===r.Customer)&&this.isMarketplaceIdRequiredAndNotPresent(e)},e.prototype.isMarketplaceIdRequiredAndNotPresent=function(e){return this.getWeblabMarketplaceType(e)===i.HostMarketplace&&!e.marketplaceId},e.prototype.convertWeblabToNewGetRequestFormat=function(e){var t=this.getWeblabMarketplaceType(e),n=encodeURIComponent("".concat(e.id,":").concat(t).concat(e.marketplaceId?":".concat(e.marketplaceId):""));return"weblab=".concat(n)},e.prototype.getTreatmentData=function(e){return o(this,void 0,void 0,(function(){var t,n,r=this;return a(this,(function(i){switch(i.label){case 0:return[4,Promise.allSettled(e.map((function(e){return fetch(e).then((function(e){return r.publishPerformanceTimerForUrl(e.url,"GetTreatments.Network"),e.json()}))})))];case 1:return t=i.sent(),n={},t.forEach((function(e){"fulfilled"===e.status?e.value.treatments?Object.assign(n,e.value.treatments):r.publishCountMetric("".concat(e.value.path,".Error")):r.publishCountMetric("ApiNetworkError")})),[2,n]}}))}))},e.prototype.publishCountMetric=function(e){this.metricsPublisher&&this.metricsPublisher.publishCounterMonitor(e,1)},e.prototype.getRecordTriggerApiData=function(e,t){var n=this.getWeblabMarketplaceType(e);return this.doFallbackToOldApi(e)?{url:"".concat(this.weblabPath,"/").concat(e.id,"/trigger/").concat(t,"?weblabType=").concat(e.weblabType,"&marketplaceType=").concat(n,"&reqid=").concat(this.randomId())}:{url:"/mons/weblabs/".concat(e.weblabType,"/trigger?reqid=").concat(this.randomId()),body:{weblabId:e.id,treatmentId:t,marketplaceType:n,marketplaceId:e.marketplaceId||null}}},e.prototype.getWeblabMarketplaceType=function(e){return e.regionType||i.HostMarketplace},e.prototype.isNotSupportedByNewApi=function(e){return[r.Partner].includes(e.weblabType)&&this.isMarketplaceIdRequiredAndNotPresent(e)},e}();t.KatalWebSellerCentralClient=s},function(e,t,n){"use strict";n.r(t),function(e){var r=n(179),i=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function a(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function u(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void c(t.promise,i)}l(t.promise,r)}else(1===e._state?l:c)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void f(e);if("function"==typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(o){c(e,o)}var r,i}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&s._immediateFn((function(){e._handled||s._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)u(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e((function(e){n||(n=!0,l(t,e))}),(function(e){n||(n=!0,c(t,e))}))}catch(r){if(n)return;n=!0,c(t,r)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(a);return u(this,new d(e,t,n)),n},s.prototype.finally=r.a,s.all=function(e){return new s((function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function a(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,(function(t){a(e,t)}),n)}r[e]=o,0==--i&&t(r)}catch(u){n(u)}}for(var s=0;s<r.length;s++)a(s,r[s])}))},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s((function(t){t(e)}))},s.reject=function(e){return new s((function(t,n){n(e)}))},s.race=function(e){return new s((function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)s.resolve(e[r]).then(t,n)}))},s._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){i(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.default=s}.call(this,n(289).setImmediate)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,f=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(9),i=n(40);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CloudWatchDimensions",{enumerable:!0,get:function(){return c.CloudWatchDimensions}}),Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ErrorHandler",{enumerable:!0,get:function(){return l.ErrorHandler}}),t.Metric=void 0,Object.defineProperty(t,"MetricsDriver",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return a.default}});var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(133));t.Metric=o;var a=r(n(298)),s=r(n(143)),u=r(n(309)),l=n(310),c=n(311);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Counter",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"HttpRequest",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Initialization",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Object",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"String",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"TimedAttempt",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"TimerStopwatch",{enumerable:!0,get:function(){return u.default}});var i=r(n(47)),o=r(n(135)),a=r(n(138)),s=r(n(140)),u=r(n(141)),l=r(n(68)),c=r(n(296)),f=r(n(297))},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"!=typeof e)return new Error("Expected ".concat(t," to be a string, but it was a ").concat((0,i.default)(e)));if(e.length>127)return new Error("Expected ".concat(t," to be less than ").concat(127," characters, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected ".concat(t," to be non-blank"));if(!o.test(e))return new Error("Expected ".concat(t," to contain only valid characters, but it was ").concat(e,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};var i=r(n(40)),o=/^[A-Za-z0-9.:@_/-]+$/},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(40)),o=r(n(13)),a=r(n(16)),s=r(n(136)),u=r(n(48)),l=r(n(30)),c=r(n(31)),f=r(n(26)),d=r(n(34)),h=r(n(47));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var i=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var _=function(e){(0,l.default)(n,e);var t=p(n);function n(e,r){var i;return(0,o.default)(this,n),i=t.call(this,e),(0,d.default)((0,s.default)(i),"truncate",!1),i.value=r,i}return(0,a.default)(n,[{key:"value",get:function(){return this._value},set:function(e){"number"!=typeof e&&"boolean"!=typeof e||(e=e.toString()),this._value=e}},{key:"type",get:function(){return h.default.Types.String}},{key:"canMonitor",get:function(){return!1}},{key:"validationError",value:function(){var e=(0,u.default)((0,f.default)(n.prototype),"validationError",this).call(this);if(e)return e;if("string"!=typeof this.value)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be type string, but it was ").concat((0,i.default)(this.value)));if(this.value.length>n.MAX_SIZE){if(!this.truncate)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(n.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."));this.value=this.value.substring(0,n.MAX_SIZE)}}}]),n}(h.default);t.default=_,(0,d.default)(_,"MAX_SIZE",256)},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(26);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=r(n(48)),s=r(n(30)),u=r(n(31)),l=r(n(26)),c=r(n(47)),f=r(n(139));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=d(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,i.default)(this,n),(r=t.call(this,e)).value=o,r}return(0,o.default)(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=Math.round(e)}},{key:"type",get:function(){return c.default.Types.Counter}},{key:"add",value:function(e){this.value+=e}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var e=(0,a.default)((0,l.default)(n.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Counter metrics object '".concat(this.name,"'"))}}]),n}(c.default);t.default=h},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("number"!=typeof e)return new Error("Expected ".concat(t," to have type 'number', but it was type '").concat((0,i.default)(e),"'"));if(e<0)return new Error("Expected ".concat(t," to be positive, but it was ").concat(e));if(!function(e){return isFinite(e)&&Math.floor(e)===e}(e))return new Error("Expected ".concat(t," to be an integer, but it was ").concat(e))};var i=r(n(40))},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=r(n(48)),s=r(n(30)),u=r(n(31)),l=r(n(26)),c=r(n(47)),f=r(n(139));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=d(n);function n(e,r){var o;return(0,i.default)(this,n),(o=t.call(this,e)).value=r,o}return(0,o.default)(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=null!=e?Math.round(e):e}},{key:"type",get:function(){return c.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var e=(0,a.default)((0,l.default)(n.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Timer metrics object '".concat(this.name,"'"))}}]),n}(c.default);t.default=h},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=r(n(142)),s=r(n(48)),u=r(n(30)),l=r(n(31)),c=r(n(26));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var d=function(e){(0,u.default)(n,e);var t=f(n);function n(e,r){var o;return(0,i.default)(this,n),(o=t.call(this,e,void 0)).start(r),o._value=void 0,o}return(0,o.default)(n,[{key:"start",value:function(e){this._startTime=e||this.now()}},{key:"stop",value:function(e){return this._stopTime=e||this.now()}},{key:"isStopped",get:function(){return void 0!==this._stopTime}},{key:"value",get:function(){return void 0===(0,s.default)((0,c.default)(n.prototype),"value",this)&&(this.isStopped||this.stop(),(0,a.default)((0,c.default)(n.prototype),"value",this.stopTime-this.startTime,this,!0)),(0,s.default)((0,c.default)(n.prototype),"value",this)},set:function(e){(0,a.default)((0,c.default)(n.prototype),"value",e,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}},{key:"now",value:function(){return performance.now()}}]),n}(r(n(140)).default);t.default=d},function(e,t,n){var r=n(137),i=n(34);function o(e,t,n,a){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var a,s=r(e,t);if(s){if((a=Object.getOwnPropertyDescriptor(s,t)).set)return a.set.call(o,n),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(o,t)){if(!a.writable)return!1;a.value=n,Object.defineProperty(o,t,a)}else i(o,t,n);return!0})(e,t,n,a)}e.exports=function(e,t,n,r,i){if(!o(e,t,n,r||e)&&i)throw new Error("failed to set property");return n},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=r(n(34)),s=r(n(134)),u=r(n(302)),l=r(n(69)),c=n(144),f=n(146);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=["site","serviceName","methodName"],_=["actionId"],g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.context=h({},t)}return(0,o.default)(e,[{key:"merge",value:function(t){if(!t)return this;if(t instanceof e.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");var n=t instanceof e?t.context:t;return new e(h(h(h({},this.context),n),{},{relatedMetrics:(0,c.mergeLists)(this.context.relatedMetrics,n.relatedMetrics),relatedMetricsSingleAction:(0,c.mergeLists)(this.context.relatedMetricsSingleAction,n.relatedMetricsSingleAction),cloudWatchDimensions:(0,c.mergeLists)(this.context.cloudWatchDimensions,n.cloudWatchDimensions)}))}},{key:"withoutRelatedMetricsSingleAction",value:function(){return new e(h(h({},this.context),{},{relatedMetricsSingleAction:void 0}))}},{key:"driverContext",value:function(){var t=h({},this.context);return delete t.relatedMetrics,delete t.relatedMetricsSingleAction,delete t.requestId,this.context.requestId&&(t.actionId=(0,f.embedRequestId)(t.actionId,this.context.requestId)),new e(t)}},{key:"getFields",value:function(){return h({},this.context)}},{key:"validationError",value:function(){var e,t=this;return(e=(0,l.default)(p,(function(e){if(null==t.context[e])return new Error("Field ".concat(e," is required, but it is ").concat(t.context[e]))})))?e:(_.forEach((function(e){if(!t.context[e]){var n,r=new CustomEvent("katal.metrics.missing-".concat(e),{detail:{context:t.context}});null===(n=window)||void 0===n||n.dispatchEvent(r),console.warn("No ".concat(e," present in context."))}})),(0,l.default)(Object.keys(this.context),(function(e){return t.validateField(e)})))}},{key:"validateField",value:function(e){var t=this.context[e],n="field ".concat(e);switch(e){case"site":case"serviceName":if(t.indexOf("/")>-1)return new Error("Expected ".concat(n," to contain only valid characters, but it was ").concat(t,".  It cannot contain a slash."));case"methodName":case"actionId":return(0,s.default)(t,n);case"cloudWatchDimensions":return(0,u.default)(t||[])}}}]),e}();t.default=g,(0,a.default)(g,"Builder",function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"context",{})}return(0,o.default)(e,[{key:"withSite",value:function(e){return this.context.site=e,this}},{key:"withServiceName",value:function(e){return this.context.serviceName=e,this}},{key:"withMethodName",value:function(e){return this.context.methodName=e,this}},{key:"withActionId",value:function(e){return this.context.actionId=e,this}},{key:"withRequestId",value:function(e){return this.context.requestId=e,this}},{key:"withCloudWatchDimensions",value:function(e){return this.context.cloudWatchDimensions=e,this}},{key:"withRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=t,this}},{key:"addRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=(0,c.mergeLists)(this.context.relatedMetrics,t),this}},{key:"withRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=t,this}},{key:"addRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=(0,c.mergeLists)(this.context.relatedMetricsSingleAction,t),this}},{key:"build",value:function(){return new g(this.context)}}]),e}())},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLists=function(e,t){return e||t?[].concat((0,i.default)(e||[]),(0,i.default)(t||[])):void 0};var i=r(n(303))},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embedRequestId=function(e,t){if(t)return[t,e].join("::");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(321),i=function(){function e(e,t){if(e&&t){throw new r.ACSClientError("You should not define both types of resolvers. At maximum one of `weblabTreatmentResolver` or `weblabWithContextTreatmentResolver` should be defined.")}this.weblabTreatmentResolver=e,this.weblabWithContextTreatmentResolver=t}return e.prototype.validateInput=function(e,t){if(!t||0===t.length)return!1;if(void 0!==e&&!this.weblabWithContextTreatmentResolver){var n="Weblab rules are NOT applied and the default value is used as no WeblabWithContextTreatmentResolver resolver was defined at client initialisation time. Please make sure you provide one. Until then we are using the default value and not taking the weblab rules into account.";return console.warn(n),!1}if(!this.weblabTreatmentResolver&&!this.weblabWithContextTreatmentResolver){n="Weblab rules are NOT applied and the default value is used as no resolver was defined. Please make sure a weblab resolver is defined.";return console.warn(n),!1}if(!e&&void 0!==this.weblabWithContextTreatmentResolver){n="Weblab rules are NOT applied and the default value is used as no WeblabContext was provided to the ACS typesafe client. Please make sure you provide one. Until then we are using the default value and not taking the weblab rules into account.";return console.warn(n),!1}return!0},e.prototype.isWeblabExpressionTrue=function(e,t,n){var i=this,o=function(e){return i.isWeblabOperandTrue(e,n)};return t===r.WeblabRuleOperator.OR?e.some(o):e.every(o)},e.prototype.isWeblabOperandTrue=function(e,t){var n=this.getWeblabNameAndTreatementFromStr(e),r=n.name;return n.treatment===t.get(r)},e.prototype.getDistinctWeblabNames=function(e){var t=this;return new Set(e.flatMap((function(e){return e.operands})).map((function(e){return t.getWeblabNameAndTreatementFromStr(e).name})))},e.prototype.getWeblabNameAndTreatementFromStr=function(e){var t=e.split(":");return{name:t[0],treatment:t[1]}},e.prototype.findMatchingValue=function(e,t){var n,r=this;return null===(n=e.find((function(e){return r.isWeblabExpressionTrue(e.operands,e.operator,t)})))||void 0===n?void 0:n.use},e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractConfigSetImpl=void 0;var i=r(n(332)),o=r(n(334)),a=r(n(335)),s=function(e,t,n,r){this.LISTING_IS_NOT_SUPPORTED="This feature is coming soon. More info: https://sim.amazon.com/issues/ConfigPlane-FR-17";var s=[];(n||r)&&s.push(new i.default(n,r)),t.forEach((function(e){return s.push(e)}));var u=o.default.create(s);this.configStoreProxy=new a.default(e,u)};t.AbstractConfigSetImpl=s,t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=n(340),o=function(){function e(e){var t;void 0===e&&(e={}),this.stage=null!==(t=e.stage)&&void 0!==t?t:r.ClientStage.PROD,this.weblabRulesResolver=new i.WeblabRulesResolverImpl(e.weblabTreatmentResolver,e.weblabWithContextTreatmentResolver)}return e.prototype.getStage=function(){return this.stage},e.prototype.getWeblabRulesResolver=function(){return this.weblabRulesResolver},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(343),i=function(){function e(e,t){if(e&&t){throw new r.ACSClientError("You should not define both types of resolvers. At maximum one of `weblabTreatmentResolver` or `weblabWithContextTreatmentResolver` should be defined.")}this.weblabTreatmentResolver=e,this.weblabWithContextTreatmentResolver=t}return e.prototype.validateInput=function(e,t){if(!t||0===t.length)return!1;if(void 0!==e&&!this.weblabWithContextTreatmentResolver){var n="Weblab rules are NOT applied and the default value is used as no WeblabWithContextTreatmentResolver resolver was defined at client initialisation time. Please make sure you provide one. Until then we are using the default value and not taking the weblab rules into account.";return console.warn(n),!1}if(!this.weblabTreatmentResolver&&!this.weblabWithContextTreatmentResolver){n="Weblab rules are NOT applied and the default value is used as no resolver was defined. Please make sure a weblab resolver is defined.";return console.warn(n),!1}if(!e&&void 0!==this.weblabWithContextTreatmentResolver){n="Weblab rules are NOT applied and the default value is used as no WeblabContext was provided to the ACS typesafe client. Please make sure you provide one. Until then we are using the default value and not taking the weblab rules into account.";return console.warn(n),!1}return!0},e.prototype.isWeblabExpressionTrue=function(e,t,n){var i=this,o=function(e){return i.isWeblabOperandTrue(e,n)};return t===r.WeblabRuleOperator.OR?e.some(o):e.every(o)},e.prototype.isWeblabOperandTrue=function(e,t){var n=this.getWeblabNameAndTreatementFromStr(e),r=n.name;return n.treatment===t.get(r)},e.prototype.getDistinctWeblabNames=function(e){var t=this;return new Set(e.flatMap((function(e){return e.operands})).map((function(e){return t.getWeblabNameAndTreatementFromStr(e).name})))},e.prototype.getWeblabNameAndTreatementFromStr=function(e){var t=e.split(":");return{name:t[0],treatment:t[1]}},e.prototype.findMatchingValue=function(e,t){var n,r=this;return null===(n=e.find((function(e){return r.isWeblabExpressionTrue(e.operands,e.operator,t)})))||void 0===n?void 0:n.use},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Import=void 0;t.Import=class{constructor(e,t,n){this._parent=e,this._symbolTable=t,this._offset=this.parent?this.parent.offset+this.parent.length:1,this._length=n||this.symbolTable.numberOfSymbols}get parent(){return this._parent}get offset(){return this._offset}get length(){return this._length}get symbolTable(){return this._symbolTable}getSymbolText(e){if(void 0===this.parent)throw new Error("Illegal parent state.");if(null!==this.parent){const t=this.parent.getSymbolText(e);if(t)return t}const t=e-this.offset;if(t>=0&&t<this.length)return this.symbolTable.getSymbolText(t)}getSymbolId(e){let t;return null!==this.parent&&(t=this.parent.getSymbolId(e),t)?t:(t=this.symbolTable.getSymbolId(e),null!=t&&t<this.length?t+this.offset:void 0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IonType=void 0;t.IonType=class{constructor(e,t,n,r,i,o){this.binaryTypeId=e,this.name=t,this.isScalar=n,this.isLob=r,this.isNumeric=i,this.isContainer=o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSymbolTable=t.ion_symbol_table_sid=t.ion_symbol_table=void 0;const r=n(151),i=n(41),o=n(356),a=n(73);function s(e,t){let n=a.getSystemSymbolTableImport();for(e.stepIn();e.next();){e.stepIn();let i=null,a=1,s=null;for(;e.next();)switch(e.fieldName()){case"name":i=e.stringValue();break;case"version":a=e.numberValue();break;case"max_id":s=e.numberValue()}if((null===a||a<1)&&(a=1),i&&"$ion"!==i){let e=t.getVersion(i,a);if(!e){if(void 0===s)throw new Error(`No exact match found when trying to import symbol table ${i} version ${a}`);e=t.getTable(i)}e||(e=new o.SubstituteSymbolTable(s)),n=new r.Import(n,e,s)}e.stepOut()}return e.stepOut(),n}function u(e){const t=[];for(e.stepIn();e.next();)t.push(e.stringValue());return e.stepOut(),t}t.ion_symbol_table="$ion_symbol_table",t.ion_symbol_table_sid=3,t.makeSymbolTable=function(e,t){let n=null,r=[],o=!1,a=!1;for(t.stepIn();t.next();)switch(t.fieldName()){case"imports":if(a)throw new Error("Multiple import fields found.");n=s(t,e),a=!0;break;case"symbols":if(o)throw new Error("Multiple symbol fields found.");r=u(t),o=!0}return t.stepOut(),new i.LocalSymbolTable(n,r)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NullNode=t.LeafNode=t.AbstractNode=t.BinaryWriter=void 0;const i=r(n(17)),o=n(155),a=n(357),s=n(57),u=n(14),l=n(42),c=n(76),f=n(75),d=n(32),h=n(35),p=new Uint8Array;var _,g;!function(e){e[e.VALUE=0]="VALUE",e[e.STRUCT_FIELD=1]="STRUCT_FIELD",e[e.STRUCT_VALUE=2]="STRUCT_VALUE",e[e.CLOSED=3]="CLOSED"}(_||(_={})),function(e){e[e.NULL=0]="NULL",e[e.BOOL=1]="BOOL",e[e.POSITIVE_INT=2]="POSITIVE_INT",e[e.NEGATIVE_INT=3]="NEGATIVE_INT",e[e.FLOAT=4]="FLOAT",e[e.DECIMAL=5]="DECIMAL",e[e.TIMESTAMP=6]="TIMESTAMP",e[e.SYMBOL=7]="SYMBOL",e[e.STRING=8]="STRING",e[e.CLOB=9]="CLOB",e[e.BLOB=10]="BLOB",e[e.LIST=11]="LIST",e[e.SEXP=12]="SEXP",e[e.STRUCT=13]="STRUCT",e[e.ANNOTATION=14]="ANNOTATION"}(g||(g={}));class v extends o.AbstractWriter{constructor(e,t){super(),this.datagram=[],this.containers=[],this.state=_.VALUE,this.symbolTable=e,this.writer=new a.LowLevelBinaryWriter(t)}getBytes(){return this.writer.getBytes()}writeBlob(e){h._assertDefined(e),this.checkWriteValue(),null!==e?this.addNode(new x(this.writer,this.getCurrentContainer(),u.IonTypes.BLOB,this.encodeAnnotations(this._annotations),e)):this.writeNull(u.IonTypes.BLOB)}writeBoolean(e){h._assertDefined(e),this.checkWriteValue(),null!==e?this.addNode(new T(this.writer,this.getCurrentContainer(),this.encodeAnnotations(this._annotations),e)):this.writeNull(u.IonTypes.BOOL)}writeClob(e){h._assertDefined(e),this.checkWriteValue(),null!==e?this.addNode(new x(this.writer,this.getCurrentContainer(),u.IonTypes.CLOB,this.encodeAnnotations(this._annotations),e)):this.writeNull(u.IonTypes.CLOB)}writeDecimal(e){if(h._assertDefined(e),this.checkWriteValue(),null===e)return void this.writeNull(u.IonTypes.DECIMAL);const t=e.getExponent(),n=e.getCoefficient();if(i.default.equal(n,d.JsbiSupport.ZERO)&&!e.isNegative()&&0===t&&1===h._sign(t))return void this.addNode(new x(this.writer,this.getCurrentContainer(),u.IonTypes.DECIMAL,this.encodeAnnotations(this._annotations),new Uint8Array(0)));const r=e.isNegative(),o=r||i.default.notEqual(n,d.JsbiSupport.ZERO),s=o?f.JsbiSerde.toSignedIntBytes(n,r):p,l=a.LowLevelBinaryWriter.getVariableLengthSignedIntSize(t)+(o?s.length:0),_=new a.LowLevelBinaryWriter(new c.Writeable(l));_.writeVariableLengthSignedInt(t),o&&_.writeBytes(s),this.addNode(new x(this.writer,this.getCurrentContainer(),u.IonTypes.DECIMAL,this.encodeAnnotations(this._annotations),_.getBytes()))}writeFloat32(e){if(h._assertDefined(e),this.checkWriteValue(),null===e)return void this.writeNull(u.IonTypes.FLOAT);let t;if(Object.is(e,0))t=new Uint8Array(0);else{const n=new ArrayBuffer(4);new DataView(n).setFloat32(0,e,!1),t=new Uint8Array(n)}this.addNode(new x(this.writer,this.getCurrentContainer(),u.IonTypes.FLOAT,this.encodeAnnotations(this._annotations),t))}writeFloat64(e){if(h._assertDefined(e),this.checkWriteValue(),null===e)return void this.writeNull(u.IonTypes.FLOAT);let t;if(Object.is(e,0))t=new Uint8Array(0);else{const n=new ArrayBuffer(8);new DataView(n).setFloat64(0,e,!1),t=new Uint8Array(n)}this.addNode(new x(this.writer,this.getCurrentContainer(),u.IonTypes.FLOAT,this.encodeAnnotations(this._annotations),t))}writeInt(e){h._assertDefined(e),this.checkWriteValue(),null!==e?this.addNode(new C(this.writer,this.getCurrentContainer(),this.encodeAnnotations(this._annotations),e)):this.writeNull(u.IonTypes.INT)}writeNull(e){null==e&&(e=u.IonTypes.NULL),this.checkWriteValue(),this.addNode(new I(this.writer,this.getCurrentContainer(),e,this.encodeAnnotations(this._annotations)))}writeString(e){h._assertDefined(e),this.checkWriteValue(),null!==e?this.addNode(new x(this.writer,this.getCurrentContainer(),u.IonTypes.STRING,this.encodeAnnotations(this._annotations),l.encodeUtf8(e))):this.writeNull(u.IonTypes.STRING)}writeSymbol(e){if(h._assertDefined(e),this.checkWriteValue(),null===e)this.writeNull(u.IonTypes.SYMBOL);else{const t=this.symbolTable.addSymbol(e),n=new a.LowLevelBinaryWriter(new c.Writeable(a.LowLevelBinaryWriter.getUnsignedIntSize(t)));n.writeUnsignedInt(t),this.addNode(new x(this.writer,this.getCurrentContainer(),u.IonTypes.SYMBOL,this.encodeAnnotations(this._annotations),n.getBytes()))}}writeTimestamp(e){if(h._assertDefined(e),this.checkWriteValue(),null===e)return void this.writeNull(u.IonTypes.TIMESTAMP);const t=new a.LowLevelBinaryWriter(new c.Writeable(12));t.writeVariableLengthSignedInt(e.getLocalOffset());const n=e.getDate();if(t.writeVariableLengthUnsignedInt(n.getUTCFullYear()),e.getPrecision()>=s.TimestampPrecision.MONTH&&t.writeVariableLengthUnsignedInt(n.getUTCMonth()+1),e.getPrecision()>=s.TimestampPrecision.DAY&&t.writeVariableLengthUnsignedInt(n.getUTCDate()),e.getPrecision()>=s.TimestampPrecision.HOUR_AND_MINUTE&&(t.writeVariableLengthUnsignedInt(n.getUTCHours()),t.writeVariableLengthUnsignedInt(n.getUTCMinutes())),e.getPrecision()>=s.TimestampPrecision.SECONDS){t.writeVariableLengthUnsignedInt(e.getSecondsInt());const n=e._getFractionalSeconds();0!==n.getExponent()&&(t.writeVariableLengthSignedInt(n.getExponent()),d.JsbiSupport.isZero(n.getCoefficient())||t.writeBytes(f.JsbiSerde.toSignedIntBytes(n.getCoefficient(),n.isNegative())))}this.addNode(new x(this.writer,this.getCurrentContainer(),u.IonTypes.TIMESTAMP,this.encodeAnnotations(this._annotations),t.getBytes()))}stepIn(e){switch(this.checkWriteValue(),e){case u.IonTypes.LIST:case u.IonTypes.SEXP:this.addNode(new b(this.writer,this.getCurrentContainer(),e,this.encodeAnnotations(this._annotations)));break;case u.IonTypes.STRUCT:this.addNode(new w(this.writer,this.getCurrentContainer(),this.encodeAnnotations(this._annotations))),this.state=_.STRUCT_FIELD;break;default:throw new Error("Unrecognized container type")}}stepOut(){if(0===this.depth())throw new Error("Not currently in a container");if(this.state===_.STRUCT_VALUE)throw new Error("Cannot exit a struct with a partially written field");this.containers.pop(),this.depth()>0?this.state=this.getCurrentContainer()instanceof w?_.STRUCT_FIELD:_.VALUE:this.state=_.VALUE}_isInStruct(){return this.getCurrentContainer()instanceof w}writeFieldName(e){if(h._assertDefined(e),this.state!==_.STRUCT_FIELD)throw new Error("Cannot write a field name outside of a struct");this.fieldName=this.encodeAnnotations([e]),this.state=_.STRUCT_VALUE}depth(){return this.containers.length}close(){if(this.checkClosed(),this.depth()>0)throw new Error("Writer has one or more open containers; call stepOut() for each container prior to close()");this.writeIvm();const e=this.datagram;this.datagram=[],this.writeSymbolTable();for(const t of e)t.write();this.state=_.CLOSED}writeIvm(){this.writer.writeByte(224),this.writer.writeByte(1),this.writer.writeByte(0),this.writer.writeByte(234)}encodeAnnotations(e){if(0===e.length)return new Uint8Array(0);const t=new c.Writeable,n=new a.LowLevelBinaryWriter(t);for(const r of e){const e=this.symbolTable.addSymbol(r);n.writeVariableLengthUnsignedInt(e)}return this._clearAnnotations(),t.getBytes()}getCurrentContainer(){return this.containers[this.containers.length-1]}addNode(e){0===this.depth()?this.datagram.push(e):this.state===_.STRUCT_VALUE?(this.getCurrentContainer().addChild(e,this.fieldName),this.state=_.STRUCT_FIELD):this.getCurrentContainer().addChild(e),e.isContainer()&&(this.containers.push(e),this.state=_.VALUE)}checkWriteValue(){if(this.checkClosed(),this.state===_.STRUCT_FIELD)throw new Error("Expected a struct field name instead of a value, call writeFieldName(string) with the desired name before calling stepIn(IonType) or writeIonType()")}checkClosed(){if(this.state===_.CLOSED)throw new Error("Writer is closed, no further operations are available")}writeSymbolTable(){const e="$ion"!=this.symbolTable.import.symbolTable.name,t=this.symbolTable.symbols.length>0;if(e||t){if(this.setAnnotations(["$ion_symbol_table"]),this.stepIn(u.IonTypes.STRUCT),e&&(this.writeFieldName("imports"),this.stepIn(u.IonTypes.LIST),this.writeImport(this.symbolTable.import),this.stepOut()),t){this.writeFieldName("symbols"),this.stepIn(u.IonTypes.LIST);for(const e of this.symbolTable.symbols)void 0!==e&&this.writeString(e);this.stepOut()}this.stepOut(),this.datagram[0].write()}}writeImport(e){e&&(this.writeImport(e.parent),this.stepIn(u.IonTypes.STRUCT),this.writeFieldName("name"),this.writeString(e.symbolTable.name),this.writeFieldName("version"),this.writeInt(e.symbolTable.version),this.writeFieldName("max_id"),this.writeInt(e.length),this.stepOut())}}t.BinaryWriter=v;class y{constructor(e,t,n,r){this._writer=e,this.parent=t,this._type=n,this.annotations=r}get typeCode(){return this._type.binaryTypeId}get writer(){return this._writer}static getLengthLength(e){return e<14?0:a.LowLevelBinaryWriter.getVariableLengthUnsignedIntSize(e)}writeTypeDescriptorAndLength(e,t,n){let r=e<<4;t?(r|=15,this.writer.writeByte(r)):n<14?(r|=n,this.writer.writeByte(r)):(r|=14,this.writer.writeByte(r),this.writer.writeVariableLengthUnsignedInt(n))}getContainedValueLength(){const e=this.getValueLength();return 1+y.getLengthLength(e)+e}getAnnotatedContainerLength(){const e=this.annotations.length;return e+a.LowLevelBinaryWriter.getVariableLengthUnsignedIntSize(e)+this.getContainedValueLength()}getAnnotationsLength(){if(this.hasAnnotations()){const e=this.annotations.length,t=a.LowLevelBinaryWriter.getVariableLengthUnsignedIntSize(e),n=this.getContainedValueLength();return 1+y.getLengthLength(n+e+t)+t+e}return 0}getLength(){return this.getAnnotationsLength()+this.getContainedValueLength()}writeAnnotations(){if(!this.hasAnnotations())return;const e=this.getAnnotatedContainerLength();this.writeTypeDescriptorAndLength(g.ANNOTATION,!1,e),this.writer.writeVariableLengthUnsignedInt(this.annotations.length),this.writer.writeBytes(new Uint8Array(this.annotations))}hasAnnotations(){return this.annotations.length>0}}t.AbstractNode=y;class m extends y{constructor(e,t,n,r){super(e,t,n,r)}isContainer(){return!0}}class b extends m{constructor(e,t,n,r){super(e,t,n,r),this.children=[]}addChild(e,t){this.children.push(e)}write(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.getValueLength());for(const e of this.children)e.write()}getValueLength(){let e=0;for(const t of this.children)e+=t.getLength();return e}getLength(){return void 0===this.length&&(this.length=super.getLength()),this.length}}class w extends m{constructor(e,t,n){super(e,t,u.IonTypes.STRUCT,n),this.fields=[]}addChild(e,t){if(null==t)throw new Error("Cannot add a value to a struct without a field name");this.fields.push({name:t,value:e})}getValueLength(){let e=0;for(const t of this.fields)e+=t.name.length,e+=t.value.getLength();return e}getLength(){return void 0===this.length&&(this.length=super.getLength()),this.length}write(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.getValueLength());for(const e of this.fields)this.writer.writeBytes(new Uint8Array(e.name)),e.value.write()}}class S extends y{addChild(e,t){throw new Error("Cannot add a child to a leaf node")}isContainer(){return!1}}t.LeafNode=S;class T extends S{constructor(e,t,n,r){super(e,t,u.IonTypes.BOOL,n),this.value=r}write(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.value?1:0)}getValueLength(){return 0}}class C extends S{constructor(e,t,n,r){if(super(e,t,u.IonTypes.INT,n),this.value=r,!("number"==typeof this.value||this.value instanceof i.default))throw new Error("Expected "+this.value+" to be a number or JSBI");if(i.default.GT(this.value,0)){this.intTypeCode=g.POSITIVE_INT;const e=new a.LowLevelBinaryWriter(new c.Writeable(a.LowLevelBinaryWriter.getUnsignedIntSize(this.value)));e.writeUnsignedInt(this.value),this.bytes=e.getBytes()}else if(i.default.LT(this.value,0)){let e;this.intTypeCode=g.NEGATIVE_INT,e=r instanceof i.default?d.JsbiSupport.isNegative(r)?i.default.unaryMinus(r):r:Math.abs(r);const t=new a.LowLevelBinaryWriter(new c.Writeable(a.LowLevelBinaryWriter.getUnsignedIntSize(e)));t.writeUnsignedInt(e),this.bytes=t.getBytes()}else this.intTypeCode=g.POSITIVE_INT,this.bytes=new Uint8Array(0)}write(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.intTypeCode,!1,this.bytes.length),this.writer.writeBytes(this.bytes)}getValueLength(){return this.bytes.length}}class x extends S{constructor(e,t,n,r,i){super(e,t,n,r),this.value=i}write(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.value.length),this.writer.writeBytes(this.value)}getValueLength(){return this.value.length}}class I extends S{constructor(e,t,n,r){super(e,t,n,r)}write(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!0,0)}getValueLength(){return 0}}t.NullNode=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractWriter=void 0;const r=n(14);t.AbstractWriter=class{constructor(){this._annotations=[]}addAnnotation(e){if(!this._isString(e))throw new Error("Annotation must be of type string.");this._annotations.push(e)}setAnnotations(e){if(null==e)throw new Error("Annotations were undefined or null.");if(!this._validateAnnotations(e))throw new Error("Annotations must be of type string[].");this._annotations=e}writeValues(e){this._writeValues(e)}writeValue(e){this._writeValue(e)}_clearAnnotations(){this._annotations=[]}_writeValues(e){let t=e.type();for(null===t&&(t=e.next());null!==t;)this._writeValue(e),t=e.next()}_writeValue(e){const t=e.type();if(null!==t){if(this._isInStruct()){const t=e.fieldName();if(null===t)throw new Error("Cannot call writeValue() when the Writer is in a Struct but the Reader is not.");this.writeFieldName(t)}if(this.setAnnotations(e.annotations()),e.isNull())this.writeNull(t);else{switch(t){case r.IonTypes.BOOL:this.writeBoolean(e.booleanValue());break;case r.IonTypes.INT:this.writeInt(e.bigIntValue());break;case r.IonTypes.FLOAT:this.writeFloat64(e.numberValue());break;case r.IonTypes.DECIMAL:this.writeDecimal(e.decimalValue());break;case r.IonTypes.TIMESTAMP:this.writeTimestamp(e.timestampValue());break;case r.IonTypes.SYMBOL:this.writeSymbol(e.stringValue());break;case r.IonTypes.STRING:this.writeString(e.stringValue());break;case r.IonTypes.CLOB:this.writeClob(e.byteValue());break;case r.IonTypes.BLOB:this.writeBlob(e.byteValue());break;case r.IonTypes.LIST:this.stepIn(r.IonTypes.LIST);break;case r.IonTypes.SEXP:this.stepIn(r.IonTypes.SEXP);break;case r.IonTypes.STRUCT:this.stepIn(r.IonTypes.STRUCT);break;default:throw new Error("Unrecognized type "+(null!==t?t.name:t))}t.isContainer&&(e.stepIn(),this._writeValues(e),this.stepOut(),e.stepOut())}}}_validateAnnotations(e){if(!Array.isArray(e))return!1;for(let t=0;t<e.length;t++)if(!this._isString(e[t]))return!1;return!0}_isString(e){return"string"==typeof e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinarySpan=t.StringSpan=t.Span=void 0;const r=n(55);class i{constructor(e){this._type=e}static error(){throw new Error("span error")}write(e){throw new Error("not implemented")}}t.Span=i;class o extends i{constructor(e){super(0),this._line=1,this._src=e,this._limit=e.length,this._start=0,this._pos=0,this._line_start=0,this._old_line_start=0}viewSource(){return this._src}position(){return this._pos-this._start}getRemaining(){return this._limit-this._pos}setRemaining(e){this._limit=e+this._pos}is_empty(){return this._pos>=this._limit}next(){let e;if(this.is_empty()){if(this._pos>1073741824)throw new Error("span position is out of bounds");return this._pos++,r.EOF}return e=this._src.charCodeAt(this._pos),13===e?10!=this.peek()&&this._inc_line():10==e&&this._inc_line(),this._pos++,e}_inc_line(){this._old_line_start=this._line_start,this._line++,this._line_start=this._pos}unread(e){this._pos<=this._start&&i.error(),this._pos--,e<0?1!=this.is_empty()&&i.error():(this._pos==this._line_start&&(this._line_start=this._old_line_start,this._line--),e!=this.peek()&&i.error())}peek(){return this.valueAt(this._pos)}skip(e){this._pos+=e,this._pos>this._limit&&(this._pos=this._limit)}valueAt(e){return e<this._start||e>=this._limit?r.EOF:this._src.charCodeAt(e)}chunk(e){const t=this._src.substr(this._pos,e);return this._pos+=e,t}getCodePoint(e){return this._src.codePointAt(e)}line_number(){return this._line}offset(){return this._pos-this._line_start}clone(e){return new o(this._src.substr(this._pos))}}t.StringSpan=o;class a extends i{constructor(e){super(1),this._src=e,this._limit=e.length,this._start=0,this._pos=0}position(){return this._pos-this._start}getRemaining(){return this._limit-this._pos}setRemaining(e){this._limit=e+this._pos}is_empty(){return this._pos>=this._limit}next(){return this.is_empty()?r.EOF:this._src[this._pos++]}view(e){if(this._pos+e>this._limit)throw new Error("Unable to read "+e+" bytes (position: "+this.position()+", limit: "+this._limit+")");return this._src.subarray(this._pos,this._pos+=e)}chunk(e){return new Uint8Array(this.view(e))}unread(e){this._pos<=this._start&&i.error(),this._pos--,e==r.EOF&&0==this.is_empty()&&i.error(),e!=this.peek()&&i.error()}peek(){return this.is_empty()?r.EOF:this._src[this._pos]}skip(e){if(this._pos+=e,this._pos>this._limit)throw new Error("Skipped over end of source.")}valueAt(e){return e<this._start||e>=this._limit?r.EOF:this._src[e]}clone(e,t){return new a(this._src.subarray(this._pos))}}t.BinarySpan=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextReader=void 0;const i=r(n(70)),o=n(72),a=n(56),s=n(41),u=n(359),l=n(153),c=n(36),f=n(57),d=n(14),h=n(32);t.TextReader=class{constructor(e,t){if(!e)throw new Error("a source Span is required to make a reader");this._parser=new u.ParserTextRaw(e),this._depth=0,this._cat=t||new o.Catalog,this._symtab=s.defaultLocalSymbolTable(),this._type=null,this._raw_type=void 0,this._raw=void 0}load_raw(){const e=this;void 0===e._raw&&(14===e._raw_type||15===e._raw_type?e._raw=e._parser.get_value_as_uint8array(e._raw_type):e._raw=e._parser.get_value_as_string(e._raw_type))}skip_past_container(){let e;const t=this.depth();for(this.stepIn();this.depth()>t;)e=this.next(),null===e?this.stepOut():e.isContainer&&!this.isNull()&&this.stepIn()}isIVM(e,t,n){if(t>0)return!1;const r="$ion_1_0",i="$ion_";if(e.length<r.length||n.length>0)return!1;let o=0;for(;o<i.length;){if(i.charAt(o)!==e.charAt(o))return!1;o++}for(;o<e.length&&"_"!=e.charAt(o);){const t=e.charAt(o);if(t<"0"||t>"9")return!1;o++}for(o++;o<e.length;){const t=e.charAt(o);if(t<"0"||t>"9")return!1;o++}if(e!==r)throw new Error("Only Ion version 1.0 is supported.");return!0}isLikeIVM(){return!1}position(){return this._parser.source().position()}next(){if(this._raw=void 0,-1===this._raw_type)return null;-2!==this._raw_type&&!this.isNull()&&this._type&&this._type.isContainer&&this.skip_past_container();const e=this._parser;for(;;)if(this._raw_type=e.next(),9===this._raw_type){if(this._depth>0)break;if(this.load_raw(),!this.isIVM(this._raw,this.depth(),this.annotations()))break;this._symtab=s.defaultLocalSymbolTable(),this._raw=void 0,this._raw_type=void 0}else if(11===this._raw_type){if(this._depth>0)break;if(this.load_raw(),"$ion_1_0"!==this._raw)break;this._raw=void 0,this._raw_type=void 0}else{if(19!==this._raw_type)break;if(1!==e.annotations().length)break;if(e.annotations()[0].getText()!=l.ion_symbol_table)break;this._type=u.get_ion_type(this._raw_type),this._symtab=l.makeSymbolTable(this._cat,this),this._raw=void 0,this._raw_type=void 0}return this._type=u.get_ion_type(this._raw_type),this._type}stepIn(){if(!this._type.isContainer)throw new Error("can't step in to a scalar value");if(this.isNull())throw new Error("Can't step into a null container");this._parser.clearFieldName(),this._type=null,this._raw_type=-2,this._depth++}stepOut(){for(this._parser.clearFieldName();-1!=this._raw_type;)this.next();if(this._raw_type=void 0,this._depth<=0)throw new Error("Cannot stepOut any further, already at top level");this._depth--}type(){return this._type}depth(){return this._depth}fieldName(){const e=this._parser.fieldName();if(null!==e){if(9===this._parser.fieldNameType()&&e.length>1&&"$"===e[0]){const t=e.substr(1,e.length);if(+t==+t){const e=this._symtab.getSymbolText(Number(t));if(void 0===e)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return e}}}return e}annotations(){return this._parser.annotations().map((e=>{const t=e.getText();if(null!==t)return t;{const t=this._symtab.getSymbolText(e.getSid());if(null==t)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return t}}))}isNull(){return this._type===d.IonTypes.NULL||this._parser.isNull()}_stringRepresentation(){return this.load_raw(),this.isNull()?this._type===d.IonTypes.NULL?"null":"null."+this._type.name:this._raw}booleanValue(){switch(this._type){case d.IonTypes.NULL:return null;case d.IonTypes.BOOL:return this._parser.booleanValue()}throw new Error("Current value is not a Boolean.")}byteValue(){return this.uInt8ArrayValue()}uInt8ArrayValue(){switch(this.load_raw(),this._type){case d.IonTypes.NULL:return null;case d.IonTypes.BLOB:return this.isNull()?null:c.fromBase64(this._raw);case d.IonTypes.CLOB:return this.isNull()?null:this._raw}throw new Error("Current value is not a blob or clob.")}decimalValue(){switch(this._type){case d.IonTypes.NULL:return null;case d.IonTypes.DECIMAL:return a.Decimal.parse(this._stringRepresentation())}throw new Error("Current value is not a decimal.")}bigIntValue(){switch(this._type){case d.IonTypes.NULL:return null;case d.IonTypes.INT:return this._parser.bigIntValue()}throw new Error("bigIntValue() was called when the current value was a(n) "+this._type.name)}intSize(){return h.JsbiSupport.isSafeInteger(this.bigIntValue())?i.default.Number:i.default.BigInt}numberValue(){switch(this._type){case d.IonTypes.NULL:return null;case d.IonTypes.FLOAT:case d.IonTypes.INT:return this._parser.numberValue()}throw new Error("Current value is not a float or int.")}stringValue(){switch(this.load_raw(),this._type){case d.IonTypes.NULL:return null;case d.IonTypes.STRING:return this._parser.isNull()?null:this._raw;case d.IonTypes.SYMBOL:if(this._parser.isNull())return null;if(9===this._raw_type&&this._raw.length>1&&this._raw.charAt(0)==="$".charAt(0)){const e=this._raw.substr(1,this._raw.length);if(+e==+e){const t=Number(e),n=this._symtab.getSymbolText(t);if(void 0===n)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return n}}return this._raw}throw new Error("Current value is not a string or symbol.")}timestampValue(){switch(this._type){case d.IonTypes.NULL:return null;case d.IonTypes.TIMESTAMP:return f.Timestamp.parse(this._stringRepresentation())}throw new Error("Current value is not a timestamp.")}value(){if(this._type&&this._type.isContainer){if(this.isNull())return null;throw new Error("Unable to provide a value for "+this._type.name+" containers.")}switch(this._type){case d.IonTypes.NULL:return null;case d.IonTypes.BLOB:case d.IonTypes.CLOB:return this.byteValue();case d.IonTypes.BOOL:return this.booleanValue();case d.IonTypes.DECIMAL:return this.decimalValue();case d.IonTypes.INT:return this.bigIntValue();case d.IonTypes.FLOAT:return this.numberValue();case d.IonTypes.STRING:case d.IonTypes.SYMBOL:return this.stringValue();case d.IonTypes.TIMESTAMP:return this.timestampValue();default:throw new Error("There is no current value.")}}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.load=t.loadAll=void 0;const a=o(n(5)),s=n(5),u=n(71),l=n(157),c=n(159),f=n(161),d=n(79),h=n(80),p=n(162),_=n(163),g=n(165),v=n(166),y=n(167),m=n(168),b=n(169);function w(e){return e instanceof l.TextReader||e instanceof u.BinaryReader?e:s.makeReader(e)}function S(e){const t=e.type();if(null===t)throw new Error("loadValue() called when no further values were available to read.");const n=e.annotations();if(e.isNull())return new g.Null(e.type(),n);switch(t){case s.IonTypes.NULL:return new g.Null(s.IonTypes.NULL,n);case s.IonTypes.BOOL:return new a.dom.Boolean(e.booleanValue(),n);case s.IonTypes.INT:return e.intSize()==s.IntSize.Number?new p.Integer(e.numberValue(),n):new p.Integer(e.bigIntValue(),n);case s.IonTypes.FLOAT:return new h.Float(e.numberValue(),n);case s.IonTypes.DECIMAL:return new d.Decimal(e.decimalValue(),n);case s.IonTypes.TIMESTAMP:return new b.Timestamp(e.timestampValue(),n);case s.IonTypes.SYMBOL:return new m.Symbol(e.stringValue(),n);case s.IonTypes.STRING:return new a.dom.String(e.stringValue(),n);case s.IonTypes.CLOB:return new f.Clob(e.byteValue(),n);case s.IonTypes.BLOB:return new c.Blob(e.byteValue(),n);case s.IonTypes.LIST:return function(e){const t=e.annotations();return new _.List(T(e),t)}(e);case s.IonTypes.SEXP:return function(e){const t=e.annotations();return new v.SExpression(T(e),t)}(e);case s.IonTypes.STRUCT:return function(e){const t=new Map,n=e.annotations();e.stepIn();for(;e.next();)t.has(e.fieldName())?t.get(e.fieldName()).push(S(e)):t.set(e.fieldName(),[S(e)]);return e.stepOut(),new y.Struct(t.entries(),n)}(e);default:throw new Error(`Unrecognized IonType '${t}' found.`)}}function T(e){const t=[];for(e.stepIn();e.next();)t.push(S(e));return e.stepOut(),t}t.loadAll=function(e){const t=w(e),n=[];for(;t.next();)n.push(S(t));return n},t.load=function(e){const t=w(e);return null===t.type()&&t.next(),null===t.type()?null:S(t)};var C=n(18);Object.defineProperty(t,"Value",{enumerable:!0,get:function(){return C.Value}});var x=n(165);Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return x.Null}});var I=n(361);Object.defineProperty(t,"Boolean",{enumerable:!0,get:function(){return I.Boolean}});var E=n(162);Object.defineProperty(t,"Integer",{enumerable:!0,get:function(){return E.Integer}});var O=n(80);Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return O.Float}});var A=n(79);Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return A.Decimal}});var k=n(169);Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return k.Timestamp}});var M=n(362);Object.defineProperty(t,"String",{enumerable:!0,get:function(){return M.String}});var P=n(168);Object.defineProperty(t,"Symbol",{enumerable:!0,get:function(){return P.Symbol}});var N=n(159);Object.defineProperty(t,"Blob",{enumerable:!0,get:function(){return N.Blob}});var L=n(161);Object.defineProperty(t,"Clob",{enumerable:!0,get:function(){return L.Clob}});var R=n(167);Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return R.Struct}});var D=n(163);Object.defineProperty(t,"List",{enumerable:!0,get:function(){return D.List}});var j=n(166);Object.defineProperty(t,"SExpression",{enumerable:!0,get:function(){return j.SExpression}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Blob=void 0;const r=n(5),i=n(160);class o extends(i.Lob(r.IonTypes.BLOB)){constructor(e,t=[]){super(e,t)}toJSON(){return r.toBase64(this)}writeTo(e){e.setAnnotations(this.getAnnotations()),e.writeBlob(this)}}t.Blob=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lob=void 0;const r=n(5),i=n(22),o=n(18),a=(new i.FromJsConstructorBuilder).withClasses(Uint8Array).build();t.Lob=function(e){return class extends(o.Value(Uint8Array,e,a)){constructor(e,t=[]){super(e),this._setAnnotations(t)}uInt8ArrayValue(){return this}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}){let n=!1,i=null;if(t.onlyCompareIon?e.getType()!==r.IonTypes.CLOB&&e.getType()!==r.IonTypes.BLOB||(n=!0,i=e.uInt8ArrayValue()):e instanceof Uint8Array&&(n=!0,i=e.valueOf()),!n)return!1;let o=this.uInt8ArrayValue(),a=i;if(o.length!==a.length)return!1;for(let r=0;r<o.length;r++)if(o[r]!==a[r])return!1;return!0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clob=void 0;const r=n(5),i=n(160);class o extends(i.Lob(r.IonTypes.CLOB)){constructor(e,t=[]){super(e,t)}writeTo(e){e.setAnnotations(this.getAnnotations()),e.writeClob(this)}toJSON(){let e="";for(const t of this){if(t>=32&&t<=126){e+=String.fromCharCode(t);continue}const n=t.toString(16);1==n.length?e+="\\u000"+n:e+="\\u00"+n}return e}}t.Clob=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Integer=void 0;const i=r(n(17)),o=n(5),a=n(22),s=n(18),u=i.default,l=(new a.FromJsConstructorBuilder).withPrimitives(a.Primitives.Number).withClassesToUnbox(Number).withClasses(u).build();class c extends(s.Value(Number,o.IonTypes.INT,l)){constructor(e,t=[]){if("number"==typeof e)super(e),this._numberValue=e,this._bigIntValue=null;else{const t=i.default.toNumber(e);super(t),this._bigIntValue=e,this._numberValue=t}this._setAnnotations(t)}bigIntValue(){return null===this._bigIntValue&&(this._bigIntValue=i.default.BigInt(this.numberValue())),this._bigIntValue}numberValue(){return this._numberValue}toString(){return null===this._bigIntValue?this._numberValue.toString():this._bigIntValue.toString()}valueOf(){return this.numberValue()}writeTo(e){e.setAnnotations(this.getAnnotations()),null===this._bigIntValue?e.writeInt(this.numberValue()):e.writeInt(this._bigIntValue)}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}){let n=!1,r=null;return e instanceof c?(n=!0,r=null==this._bigIntValue&&null==e._bigIntValue?e.numberValue():e.bigIntValue()):t.onlyCompareIon||(e instanceof Number||"number"==typeof e?(n=!0,r=null==this.bigIntValue?e.valueOf():i.default.BigInt(e.valueOf())):e instanceof i.default&&(n=!0,r=e)),!!n&&(r instanceof i.default?i.default.equal(this.bigIntValue(),r):this.numberValue()==r)}}t.Integer=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;const r=n(5),i=n(164);class o extends(i.Sequence(r.IonTypes.LIST)){constructor(e,t=[]){super(e,t)}}t.List=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sequence=void 0;const r=n(5),i=n(22),o=n(18);t.Sequence=function(e){return class extends(o.Value(Array,e,i.FromJsConstructor.NONE)){constructor(e,t=[]){super();for(const n of e)this.push(n);this._setAnnotations(t)}get(...e){if(0===e.length)throw new Error("Value#get requires at least one parameter.");const[t,...n]=e;if("number"!=typeof t)throw new Error(`Cannot index into a ${this.getType().name} with a ${typeof t}.`);const r=this[t],i=void 0===r?null:r;return 0===n.length||null===i?i:i.get(...n)}elements(){return Object.values(this)}toString(){return"["+this.join(", ")+"]"}static _fromJsValue(e,t){if(!(e instanceof Array))throw new Error(`Cannot create a ${this.name} from: ${e.toString()}`);return new this(e.map((e=>o.Value.from(e))),t)}writeTo(t){t.setAnnotations(this.getAnnotations()),t.stepIn(e);for(const e of this)e.writeTo(t);t.stepOut()}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}){let n=!1,i=null;if(t.onlyCompareIon?e.getType()!==r.IonTypes.LIST&&e.getType()!==r.IonTypes.SEXP||(n=!0,i=e.elements()):e instanceof Array&&(n=!0,i=e),!n)return!1;let o=this.elements(),a=i;if(o.length!==a.length)return!1;for(let r=0;r<o.length;r++)if(t.onlyCompareIon){if(!o[r].ionEquals(a[r],t))return!1}else if(!o[r].equals(a[r]))return!1;return!0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Null=void 0;const r=n(5),i=n(22),o=n(18);class a extends(o.Value(Object,r.IonTypes.NULL,i.FromJsConstructor.NONE)){constructor(e=r.IonTypes.NULL,t=[]){super(),this._ionType=e,this._setAnnotations(t)}static _operationIsSupported(e,t){return a._supportedIonTypesByOperation.get(t).has(e)}isNull(){return!0}_convertToJsNull(e){if(a._operationIsSupported(this.getType(),e))return null;throw new Error(`${e}() is not supported by Ion type ${this.getType().name}`)}_unsupportedOperationOrNullDereference(e){if(a._operationIsSupported(this.getType(),e))throw new Error(`${e}() called on a null ${this.getType().name}.`);throw new Error(`${e}() is not supported by Ion type ${this.getType().name}`)}booleanValue(){return this._convertToJsNull("booleanValue")}numberValue(){return this._convertToJsNull("numberValue")}bigIntValue(){return this._convertToJsNull("bigIntValue")}decimalValue(){return this._convertToJsNull("decimalValue")}stringValue(){return this._convertToJsNull("stringValue")}dateValue(){return this._convertToJsNull("dateValue")}uInt8ArrayValue(){return this._convertToJsNull("uInt8ArrayValue")}fieldNames(){this._unsupportedOperationOrNullDereference("fieldNames")}fields(){this._unsupportedOperationOrNullDereference("fields")}elements(){this._unsupportedOperationOrNullDereference("elements")}get(...e){return null}toString(){return this.getType()==r.IonTypes.NULL?"null":"null."+this._ionType.name}toJSON(){return null}writeTo(e){e.setAnnotations(this.getAnnotations()),e.writeNull(this.getType())}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}){let n=!1,r=null;if(e instanceof a)n=!0,r=e;else if(!t.onlyCompareIon&&null===e&&"null"===this._ionType.name)return!0;return!!n&&this._ionType.name===r._ionType.name}}t.Null=a,a._supportedIonTypesByOperation=new Map([["booleanValue",new Set([r.IonTypes.BOOL])],["numberValue",new Set([r.IonTypes.INT,r.IonTypes.FLOAT,r.IonTypes.DECIMAL])],["bigIntValue",new Set([r.IonTypes.INT])],["decimalValue",new Set([r.IonTypes.DECIMAL])],["stringValue",new Set([r.IonTypes.STRING,r.IonTypes.SYMBOL])],["dateValue",new Set([r.IonTypes.TIMESTAMP])],["timestampValue",new Set([r.IonTypes.TIMESTAMP])],["uInt8ArrayValue",new Set([r.IonTypes.BLOB,r.IonTypes.CLOB])],["fields",new Set([r.IonTypes.STRUCT])],["fieldNames",new Set([r.IonTypes.STRUCT])],["elements",new Set([r.IonTypes.LIST,r.IonTypes.SEXP,r.IonTypes.STRUCT])]])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SExpression=void 0;const r=n(5),i=n(164);class o extends(i.Sequence(r.IonTypes.SEXP)){constructor(e,t=[]){super(e,t)}toString(){return"("+this.join(" ")+")"}}t.SExpression=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Struct=void 0;const r=n(5),i=n(22),o=n(18);class a extends(o.Value(Object,r.IonTypes.STRUCT,i.FromJsConstructor.NONE)){constructor(e,t=[]){super(),this._fields=Object.create(null);for(const[n,r]of e)this._fields[n]=r instanceof o.Value?[r]:r;return this._setAnnotations(t),new Proxy(this,{set:function(e,t,n){return e._fields[t]=[n],!0},get:function(e,t){if(t in e)return e[t];let n=void 0!==e._fields[t]?e._fields[t].length:-1;return-1===n?e._fields[t]:e._fields[t][n-1]},deleteProperty:function(e,t){return t in e._fields&&delete e._fields[t],!0}})}get(...e){if(0===e.length)throw new Error("Value#get requires at least one parameter.");const[t,...n]=e;if("string"!=typeof t)throw new Error(`Cannot index into a struct with a ${typeof t}.`);const r=this._fields[t];return void 0===r?null:0===n.length?r[r.length-1]:r[r.length-1].get(...n)}getAll(...e){if(0===e.length)throw new Error("Value#get requires at least one parameter.");const[t,...n]=e;if("string"!=typeof t)throw new Error(`Cannot index into a struct with a ${typeof t}.`);const r=this._fields[t];if(void 0===r)return null;if(0===n.length)return r;let i=[];return r.forEach((e=>i.push(...e.getAll(...n)))),i}fieldNames(){return Object.keys(this._fields)}allFields(){return Object.entries(this._fields)}fields(){let e=Object.create(null);for(const[t,n]of this.allFields())e[t]=n[n.length-1];return Object.entries(e)}elements(){let e=Object.create(null);for(const[t,n]of this.allFields())e[t]=n[n.length-1];return Object.values(e)}[Symbol.iterator](){return this.fields()[Symbol.iterator]()}toString(){return"{"+[...this.allFields()].map((([e,t])=>e+": "+t)).join(", ")+"}"}writeTo(e){e.setAnnotations(this.getAnnotations()),e.stepIn(r.IonTypes.STRUCT);for(const[t,n]of this.allFields())for(let r of n)e.writeFieldName(t),r.writeTo(e);e.stepOut()}deleteField(e){return e in this._fields&&(delete this._fields[e],!0)}toJSON(){let e=Object.create(null);for(const[t,n]of this.fields())e[t]=n;return e}static _fromJsValue(e,t){if(!(e instanceof Object))throw new Error("Cannot create a dom.Struct from: "+e.toString());return new this(Object.entries(e).map((([e,t])=>[e,[o.Value.from(t)]])),t)}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}){let n=!1,r=null;if(e instanceof a?(n=!0,r=e.allFields()):t.onlyCompareIon||("object"==typeof e||e instanceof Object)&&(n=!0,r=o.Value.from(e).allFields()),!n)return!1;if(this.allFields().length!==r.length)return!1;let i=!0;const s=new Array(r.length);for(let o=0;i&&o<this.allFields().length;o++){i=!1;for(let e=0;!i&&e<r.length;e++)if(!s[e]){const n=this.allFields()[o],a=r[e];i=n[0]===a[0]&&this._ionValueEquals(n[1].sort(),a[1].sort(),t),i&&(s[e]=!0)}}for(let o=0;o<s.length;o++)if(!s[o]){i=!1;break}return i}_ionValueEquals(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(n.onlyCompareIon){if(!e[r].ionEquals(t[r],n))return!1}else if(!e[r].equals(t[r]))return!1;return!0}}t.Struct=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Symbol=void 0;const r=n(5),i=n(22),o=n(18),a=(new i.FromJsConstructorBuilder).withPrimitives(i.Primitives.String).withClassesToUnbox(String).build();class s extends(o.Value(String,r.IonTypes.SYMBOL,a)){constructor(e,t=[]){super(e),this._setAnnotations(t)}stringValue(){return this.toString()}writeTo(e){e.setAnnotations(this.getAnnotations()),e.writeSymbol(this.stringValue())}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}){let n=!1,r=null;return e instanceof s?(n=!0,r=e.stringValue()):t.onlyCompareIon||("string"==typeof e||e instanceof String)&&(n=!0,r=e.valueOf()),!!n&&0===this.compareValue(r)}compareValue(e){return this.stringValue().localeCompare(e)}}t.Symbol=s},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=void 0;const a=o(n(5)),s=n(5),u=n(22),l=n(18),c=(new u.FromJsConstructorBuilder).withClasses(Date,a.Timestamp).build();class f extends(l.Value(Date,s.IonTypes.TIMESTAMP,c)){constructor(e,t=[]){let n,r;e instanceof Date?(n=e,r=f._timestampFromDate(n)):(r=e,n=r.getDate()),super(n),this._date=n,this._timestamp=r,this._setAnnotations(t)}static _timestampFromDate(e){const t=1e3*e.getUTCSeconds()+e.getUTCMilliseconds(),n=new s.Decimal(t,-3);return new a.Timestamp(0,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),n)}timestampValue(){return this._timestamp}dateValue(){return this._date}writeTo(e){e.setAnnotations(this.getAnnotations()),e.writeTimestamp(this.timestampValue())}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}){let n=!1,r=null;if(e instanceof f)n=!0,r=e.timestampValue();else if(!t.onlyCompareIon)if(e instanceof a.Timestamp)n=!0,r=e;else if(e instanceof Date)return this.dateValue().getTime()===e.getTime();return!!n&&(t.ignoreTimestampPrecision?0===this.timestampValue().compareTo(r):this.timestampValue().equals(r))}}t.Timestamp=f},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IonEventFactory=t.IonEventType=void 0;const i=r(n(17)),o=n(50),a=n(50),s=n(154),u=n(41),l=n(77),c=n(14),f=n(42),d=n(76);var h;!function(e){e[e.SCALAR=0]="SCALAR",e[e.CONTAINER_START=1]="CONTAINER_START",e[e.CONTAINER_END=2]="CONTAINER_END",e[e.SYMBOL_TABLE=3]="SYMBOL_TABLE",e[e.STREAM_END=4]="STREAM_END"}(h=t.IonEventType||(t.IonEventType={}));class p{constructor(e,t,n,r,i,o){this.eventType=e,this.ionType=t,this.fieldName=n,this.annotations=r,this.depth=i,this.ionValue=o}write(e){e.stepIn(c.IonTypes.STRUCT),e.writeFieldName("event_type"),e.writeSymbol(h[this.eventType]),null!==this.ionType&&(e.writeFieldName("ion_type"),e.writeSymbol(this.ionType.name.toUpperCase())),null!==this.fieldName&&void 0!==this.fieldName&&(e.writeFieldName("field_name"),e.stepIn(c.IonTypes.STRUCT),e.writeFieldName("text"),e.writeString(this.fieldName),e.stepOut()),null!==this.annotations&&(e.writeFieldName("annotations"),this.writeAnnotations(e)),this.eventType===h.SCALAR&&this.writeValues(e),e.writeFieldName("depth"),e.writeInt(this.depth),e.stepOut()}writeAnnotations(e){if(void 0!==this.annotations){e.stepIn(c.IonTypes.LIST);for(let t=0;t<this.annotations.length;t++)e.stepIn(c.IonTypes.STRUCT),e.writeFieldName("text"),e.writeString(this.annotations[t]),e.stepOut();e.stepOut()}else e.writeNull(c.IonTypes.LIST)}writeSymbolToken(e,t){e.writeSymbol(t)}writeImportDescriptor(e){e.writeNull(c.IonTypes.STRUCT)}writeValues(e){this.eventType===h.SCALAR&&(e.writeFieldName("value_text"),this.writeTextValue(e),e.writeFieldName("value_binary"),this.writeBinaryValue(e))}writeTextValue(e){const t=new l.TextWriter(new d.Writeable);this.writeIonValue(t),t.close(),e.writeString(f.decodeUtf8(t.getBytes()))}writeBinaryValue(e){const t=new s.BinaryWriter(u.defaultLocalSymbolTable(),new d.Writeable);this.writeIonValue(t),t.close();const n=t.getBytes();e.stepIn(c.IonTypes.LIST);for(let r=0;r<n.length;r++)e.writeInt(n[r]);e.stepOut()}equals(e){return this.compare(e).result==a.ComparisonResultType.EQUAL}compare(e){var t,n;if(this.eventType!==e.eventType)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Event types don't match");if(this.ionType!==e.ionType)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Ion types don't match "+(null===(t=this.ionType)||void 0===t?void 0:t.name)+" vs. "+(null===(n=e.ionType)||void 0===n?void 0:n.name));if(this.fieldName!==e.fieldName)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Field names don't match "+this.fieldName+" vs. "+e.fieldName);if(this.depth!==e.depth)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Event depths don't match "+this.depth+" vs. "+e.depth);const r=this.annotationCompare(e.annotations);if(r.result===a.ComparisonResultType.NOT_EQUAL)return r;const i=this.valueCompare(e);return i.result===a.ComparisonResultType.NOT_EQUAL?i:new o.ComparisonResult(a.ComparisonResultType.EQUAL)}annotationCompare(e){if(this.annotations===e)return new o.ComparisonResult(a.ComparisonResultType.EQUAL);if(this.annotations.length!==e.length)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"annotations length don't match"+this.annotations.length+" vs. "+e.length);for(let t=0;t<this.annotations.length;t++)if(this.annotations[t]!==e[t])return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"annotation value doesn't match"+this.annotations[t]+" vs. "+e[t]);return new o.ComparisonResult(a.ComparisonResultType.EQUAL)}}t.IonEventFactory=class{makeEvent(e,t,n,r,i,o,a){if(o)return new _(e,t,n,i,r);switch(e){case h.SCALAR:case h.CONTAINER_START:switch(t){case c.IonTypes.BOOL:return new v(e,t,n,i,r,a);case c.IonTypes.INT:return new g(e,t,n,i,r,a);case c.IonTypes.FLOAT:return new y(e,t,n,i,r,a);case c.IonTypes.DECIMAL:return new m(e,t,n,i,r,a);case c.IonTypes.SYMBOL:return new b(e,t,n,i,r,a);case c.IonTypes.STRING:return new w(e,t,n,i,r,a);case c.IonTypes.TIMESTAMP:return new S(e,t,n,i,r,a);case c.IonTypes.BLOB:return new T(e,t,n,i,r,a);case c.IonTypes.CLOB:return new C(e,t,n,i,r,a);case c.IonTypes.LIST:return new E(e,t,n,i,r);case c.IonTypes.SEXP:return new O(e,t,n,i,r);case c.IonTypes.STRUCT:return new I(e,t,n,i,r);default:throw new Error("IonType "+t.name+" unexpected.")}case h.SYMBOL_TABLE:throw new Error("symbol tables unsupported.");case h.CONTAINER_END:case h.STREAM_END:return new A(e,r,t)}}};class _ extends p{constructor(e,t,n,r,i){super(e,t,n,r,i,null)}valueCompare(e){return e instanceof _&&this.ionValue===e.ionValue?new o.ComparisonResult(a.ComparisonResultType.EQUAL):new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}writeIonValue(e){e.writeNull(null!==this.ionType?this.ionType:c.IonTypes.NULL)}}class g extends p{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}valueCompare(e){if(e instanceof g){let t=this.ionValue instanceof i.default?this.ionValue:i.default.BigInt(this.ionValue),n=e.ionValue instanceof i.default?e.ionValue:i.default.BigInt(e.ionValue);if(i.default.equal(t,n))return new o.ComparisonResult(a.ComparisonResultType.EQUAL)}return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,`${this.ionValue} vs. ${e.ionValue}`)}writeIonValue(e){e.writeInt(this.ionValue)}}class v extends p{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}valueCompare(e){return e instanceof v&&this.ionValue===e.ionValue?new o.ComparisonResult(a.ComparisonResultType.EQUAL):new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}writeIonValue(e){e.writeBoolean(this.ionValue)}}class y extends p{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}valueCompare(e){return e instanceof y&&Object.is(this.ionValue,e.ionValue)?new o.ComparisonResult(a.ComparisonResultType.EQUAL):new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}writeIonValue(e){e.writeFloat64(this.ionValue)}}class m extends p{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}valueCompare(e){return e instanceof m&&this.ionValue.equals(e.ionValue)?new o.ComparisonResult(a.ComparisonResultType.EQUAL):new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}writeIonValue(e){e.writeDecimal(this.ionValue)}}class b extends p{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}valueCompare(e){return e instanceof b&&this.ionValue===e.ionValue?new o.ComparisonResult(a.ComparisonResultType.EQUAL):new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}writeIonValue(e){e.writeSymbol(this.ionValue)}}class w extends p{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}valueCompare(e){return e instanceof w&&this.ionValue===e.ionValue?new o.ComparisonResult(a.ComparisonResultType.EQUAL):new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}writeIonValue(e){e.writeString(this.ionValue)}}class S extends p{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}valueCompare(e){return e instanceof S&&this.ionValue.equals(e.ionValue)?new o.ComparisonResult(a.ComparisonResultType.EQUAL):new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}writeIonValue(e){e.writeTimestamp(this.ionValue)}}class T extends p{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}valueCompare(e){if(!(e instanceof T))return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL);if(this.ionValue.length!==e.ionValue.length)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Blob length don't match");for(let t=0;t<this.ionValue.length;t++)if(this.ionValue[t]!==e.ionValue[t])return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue[t]+" vs. "+e.ionValue[t]);return new o.ComparisonResult(a.ComparisonResultType.EQUAL)}writeIonValue(e){e.writeBlob(this.ionValue)}}class C extends p{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}valueCompare(e){if(!(e instanceof C))return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL);if(this.ionValue.length!==e.ionValue.length)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue);for(let t=0;t<this.ionValue.length;t++)if(this.ionValue[t]!==e.ionValue[t])return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue[t]+" vs. "+e.ionValue[t]);return new o.ComparisonResult(a.ComparisonResultType.EQUAL)}writeIonValue(e){e.writeClob(this.ionValue)}}class x extends p{constructor(e,t,n,r,i){super(e,t,n,r,i,null)}writeIonValue(e){}}class I extends x{constructor(e,t,n,r,i){super(e,t,n,r,i)}valueCompare(e){if(!(e instanceof I))return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Event types don't match");const t=null==this.ionValue?[]:this.ionValue,n=null==e.ionValue?[]:e.ionValue;return t.length!==n.length?new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Struct length don't match"):this.structsCompare(t,n)}structsCompare(e,t){let n=new o.ComparisonResult(a.ComparisonResultType.EQUAL);const r=new Array(t.length);for(let i=0;n&&i<e.length;i++){n.result=a.ComparisonResultType.NOT_EQUAL;for(let o=0;n.result==a.ComparisonResultType.NOT_EQUAL&&o<t.length;o++)if(!r[o]){const s=e[i],u=t[o];if(n=s.compare(u),n.result==a.ComparisonResultType.EQUAL&&(r[o]=!0),n.result==a.ComparisonResultType.EQUAL&&s.eventType===h.CONTAINER_START){for(let e=0;e<u.ionValue.length;e++)r[e+o+1]=!0;i+=s.ionValue.length}}}for(let i=0;i<r.length;i++)if(!r[i]){n=new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Didn't find matching field for "+t[i].fieldName);break}return n}}class E extends x{constructor(e,t,n,r,i){super(e,t,n,r,i)}valueCompare(e){if(!(e instanceof E))return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Event types don't match");const t=null==this.ionValue?[]:this.ionValue,n=null==e.ionValue?[]:e.ionValue;if(t.length!==n.length)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"List length don't match");for(let r=0;r<t.length;r++){const e=t[r];if(e.compare(n[r]).result==a.ComparisonResultType.NOT_EQUAL)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,`${e.ionValue} vs. ${n[r].ionValue}`,r+1,r+1);e.eventType===h.CONTAINER_START&&(r+=e.ionValue.length)}return new o.ComparisonResult(a.ComparisonResultType.EQUAL)}}class O extends x{constructor(e,t,n,r,i){super(e,t,n,r,i)}valueCompare(e){if(!(e instanceof O))return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"Event types don't match");const t=null==this.ionValue?[]:this.ionValue,n=null==e.ionValue?[]:e.ionValue;if(t.length!==n.length)return new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,"S-expression length don't match");for(let r=0;r<t.length;r++){const e=t[r],i=e.compare(n[r]);if(i.result==a.ComparisonResultType.NOT_EQUAL)return i;e.eventType===h.CONTAINER_START&&(r+=e.ionValue.length)}return new o.ComparisonResult(a.ComparisonResultType.EQUAL)}}class A extends p{constructor(e,t,n){e===h.STREAM_END?super(e,null,null,[],t,void 0):super(e,n,null,[],t,void 0)}valueCompare(e){return e instanceof A&&this.ionValue===e.ionValue?new o.ComparisonResult(a.ComparisonResultType.EQUAL):new o.ComparisonResult(a.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}writeIonValue(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventStreamError=void 0;class r extends Error{constructor(e,t,n,r){super(),this.type=e,this.index=n,this.message=t,this.eventstream=r}}t.EventStreamError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyFeatureContext=void 0;t.stringifyFeatureContext=function(e){return JSON.stringify({contextualParameters:Array.from(e.contextualParameters.entries()),attributeName:e.attributeName})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(376),i=function(){function e(e,t){if(e&&t){throw new r.ACSClientError("You should not define both types of resolvers. At maximum one of `weblabTreatmentResolver` or `weblabWithContextTreatmentResolver` should be defined.")}this.weblabTreatmentResolver=e,this.weblabWithContextTreatmentResolver=t}return e.prototype.validateInput=function(e,t){if(!t||0===t.length)return!1;if(void 0!==e&&!this.weblabWithContextTreatmentResolver){var n="Weblab rules are NOT applied and the default value is used as no WeblabWithContextTreatmentResolver resolver was defined at client initialisation time. Please make sure you provide one. Until then we are using the default value and not taking the weblab rules into account.";return console.warn(n),!1}if(!this.weblabTreatmentResolver&&!this.weblabWithContextTreatmentResolver){n="Weblab rules are NOT applied and the default value is used as no resolver was defined. Please make sure a weblab resolver is defined.";return console.warn(n),!1}if(!e&&void 0!==this.weblabWithContextTreatmentResolver){n="Weblab rules are NOT applied and the default value is used as no WeblabContext was provided to the ACS typesafe client. Please make sure you provide one. Until then we are using the default value and not taking the weblab rules into account.";return console.warn(n),!1}return!0},e.prototype.isWeblabExpressionTrue=function(e,t,n){var i=this,o=function(e){return i.isWeblabOperandTrue(e,n)};return t===r.WeblabRuleOperator.OR?e.some(o):e.every(o)},e.prototype.isWeblabOperandTrue=function(e,t){var n=this.getWeblabNameAndTreatementFromStr(e),r=n.name;return n.treatment===t.get(r)},e.prototype.getDistinctWeblabNames=function(e){var t=this;return new Set(e.flatMap((function(e){return e.operands})).map((function(e){return t.getWeblabNameAndTreatementFromStr(e).name})))},e.prototype.getWeblabNameAndTreatementFromStr=function(e){var t=e.split(":");return{name:t[0],treatment:t[1]}},e.prototype.findMatchingValue=function(e,t){var n,r=this;return null===(n=e.find((function(e){return r.isWeblabExpressionTrue(e.operands,e.operator,t)})))||void 0===n?void 0:n.use},e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractConfigSetImpl=void 0;var i=r(n(387)),o=r(n(389)),a=r(n(390)),s=function(e,t,n,r){this.LISTING_IS_NOT_SUPPORTED="This feature is coming soon. More info: https://sim.amazon.com/issues/ConfigPlane-FR-17";var s=[];(n||r)&&s.push(new i.default(n,r)),t.forEach((function(e){return s.push(e)}));var u=o.default.create(s);this.configStoreProxy=new a.default(e,u)};t.AbstractConfigSetImpl=s,t.default=s},function(e,t,n){var r;!function(i,o){"use strict";var a="function",s="undefined",u="object",l="string",c="major",f="model",d="name",h="type",p="vendor",_="version",g="architecture",v="console",y="mobile",m="tablet",b="smarttv",w="wearable",S="embedded",T="Amazon",C="Apple",x="ASUS",I="BlackBerry",E="Firefox",O="Google",A="Huawei",k="LG",M="Microsoft",P="Motorola",N="Opera",L="Samsung",R="Sharp",D="Sony",j="Xiaomi",B="Zebra",F="Facebook",U="Chromium OS",V="Mac OS",H=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},W=function(e,t){return typeof e===l&&-1!==q(t).indexOf(q(e))},q=function(e){return e.toLowerCase()},z=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,500)},G=function(e,t){for(var n,r,i,s,l,c,f=0;f<t.length&&!l;){var d=t[f],h=t[f+1];for(n=r=0;n<d.length&&!l&&d[n];)if(l=d[n++].exec(e))for(i=0;i<h.length;i++)c=l[++r],typeof(s=h[i])===u&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):o:this[s[0]]=c?s[1].call(this,c,s[2]):o:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):o):this[s]=c||o;f+=2}},X=function(e,t){for(var n in t)if(typeof t[n]===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(W(t[n][r],e))return"?"===n?o:n}else if(W(t[n],e))return"?"===n?o:n;return e},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,_],[/opios[\/ ]+([\w\.]+)/i],[_,[d,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[_,[d,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[_,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,_],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[d,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[_,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[_,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[_,[d,"Smart Lenovo Browser"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],_],[/\bfocus\/([\w\.]+)/i],[_,[d,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[_,[d,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[d,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[d,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[_,[d,E]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 Browser"]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],_],[/samsungbrowser\/([\w\.]+)/i],[_,[d,"Samsung Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],_],[/metasr[\/ ]?([\d\.]+)/i],[_,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,_],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,F],_],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,_],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[_,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[d,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,_],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[_,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[_,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[_,X,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,_],[/(cobalt)\/([\w\.]+)/i],[d,[_,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,q]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[p,L],[h,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[p,L],[h,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[p,C],[h,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[p,C],[h,m]],[/(macintosh);/i],[f,[p,C]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[p,R],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[p,A],[h,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[p,A],[h,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[p,j],[h,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[p,j],[h,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[p,"OPPO"],[h,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[p,"Vivo"],[h,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[p,"Realme"],[h,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[p,P],[h,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[p,P],[h,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[p,k],[h,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[p,k],[h,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[p,"Lenovo"],[h,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[p,"Nokia"],[h,y]],[/(pixel c)\b/i],[f,[p,O],[h,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[p,O],[h,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[p,D],[h,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[p,D],[h,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[p,"OnePlus"],[h,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[p,T],[h,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[p,T],[h,y]],[/(playbook);[-\w\),; ]+(rim)/i],[f,p,[h,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[p,I],[h,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[p,x],[h,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[p,x],[h,y]],[/(nexus 9)/i],[f,[p,"HTC"],[h,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[f,/_/g," "],[h,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[p,"Acer"],[h,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[p,"Meizu"],[h,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[p,"Ulefone"],[h,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,f,[h,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,f,[h,m]],[/(surface duo)/i],[f,[p,M],[h,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[p,"Fairphone"],[h,y]],[/(u304aa)/i],[f,[p,"AT&T"],[h,y]],[/\bsie-(\w*)/i],[f,[p,"Siemens"],[h,y]],[/\b(rct\w+) b/i],[f,[p,"RCA"],[h,m]],[/\b(venue[\d ]{2,7}) b/i],[f,[p,"Dell"],[h,m]],[/\b(q(?:mv|ta)\w+) b/i],[f,[p,"Verizon"],[h,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[p,"Barnes & Noble"],[h,m]],[/\b(tm\d{3}\w+) b/i],[f,[p,"NuVision"],[h,m]],[/\b(k88) b/i],[f,[p,"ZTE"],[h,m]],[/\b(nx\d{3}j) b/i],[f,[p,"ZTE"],[h,y]],[/\b(gen\d{3}) b.+49h/i],[f,[p,"Swiss"],[h,y]],[/\b(zur\d{3}) b/i],[f,[p,"Swiss"],[h,m]],[/\b((zeki)?tb.*\b) b/i],[f,[p,"Zeki"],[h,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],f,[h,m]],[/\b(ns-?\w{0,9}) b/i],[f,[p,"Insignia"],[h,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[p,"NextBook"],[h,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],f,[h,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],f,[h,y]],[/\b(ph-1) /i],[f,[p,"Essential"],[h,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[p,"Envizen"],[h,m]],[/\b(trio[-\w\. ]+) b/i],[f,[p,"MachSpeed"],[h,m]],[/\btu_(1491) b/i],[f,[p,"Rotor"],[h,m]],[/(shield[\w ]+) b/i],[f,[p,"Nvidia"],[h,m]],[/(sprint) (\w+)/i],[p,f,[h,y]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[p,M],[h,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[p,B],[h,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[p,B],[h,y]],[/smart-tv.+(samsung)/i],[p,[h,b]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[p,L],[h,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,k],[h,b]],[/(apple) ?tv/i],[p,[f,"Apple TV"],[h,b]],[/crkey/i],[[f,"Chromecast"],[p,O],[h,b]],[/droid.+aft(\w+)( bui|\))/i],[f,[p,T],[h,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[p,R],[h,b]],[/(bravia[\w ]+)( bui|\))/i],[f,[p,D],[h,b]],[/(mitv-\w{5}) bui/i],[f,[p,j],[h,b]],[/Hbbtv.*(technisat) (.*);/i],[p,f,[h,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,z],[f,z],[h,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,f,[h,v]],[/droid.+; (shield) bui/i],[f,[p,"Nvidia"],[h,v]],[/(playstation [345portablevi]+)/i],[f,[p,D],[h,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[p,M],[h,v]],[/((pebble))app/i],[p,f,[h,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[p,C],[h,w]],[/droid.+; (glass) \d/i],[f,[p,O],[h,w]],[/droid.+; (wt63?0{2,3})\)/i],[f,[p,B],[h,w]],[/(quest( 2| pro)?)/i],[f,[p,F],[h,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,S]],[/(aeobc)\b/i],[f,[p,T],[h,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[h,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[h,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,y]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,_],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[_,X,$]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[_,X,$],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,V],[_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[_,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,_],[/\(bb(10);/i],[_,[d,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[_,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[_,[d,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,U],_],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,_],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,_]]},J=function(e,t){if(typeof e===u&&(t=e,e=o),!(this instanceof J))return new J(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:o,r=e||(n&&n.userAgent?n.userAgent:""),c=n&&n.userAgentData?n.userAgentData:o,f=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(Y,t):Y,d=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t.name=o,t.version=o,G.call(t,r,f.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:o,d&&n&&n.brave&&typeof n.brave.isBrave==a&&(t.name="Brave"),t},this.getCPU=function(){var e={};return e.architecture=o,G.call(e,r,f.cpu),e},this.getDevice=function(){var e={};return e.vendor=o,e.model=o,e.type=o,G.call(e,r,f.device),d&&!e.type&&c&&c.mobile&&(e.type=y),d&&"Macintosh"==e.model&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e.model="iPad",e.type=m),e},this.getEngine=function(){var e={};return e.name=o,e.version=o,G.call(e,r,f.engine),e},this.getOS=function(){var e={};return e.name=o,e.version=o,G.call(e,r,f.os),d&&!e.name&&c&&"Unknown"!=c.platform&&(e.name=c.platform.replace(/chrome os/i,U).replace(/macos/i,V)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===l&&e.length>500?z(e,500):e,this},this.setUA(r),this};J.VERSION="0.7.37",J.BROWSER=H([d,_,c]),J.CPU=H([g]),J.DEVICE=H([f,p,h,v,y,b,m,w,S]),J.ENGINE=J.OS=H([d,_]),typeof t!==s?(typeof e!==s&&e.exports&&(t=e.exports=J),t.UAParser=J):n(210)?(r=function(){return J}.call(t,n,t,e))===o||(e.exports=r):typeof i!==s&&(i.UAParser=J);var K=typeof i!==s&&(i.jQuery||i.Zepto);if(K&&!K.ua){var Q=new J;K.ua=Q.getResult(),K.ua.get=function(){return Q.getUA()},K.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var n in t)K.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){"use strict";var r=n(107);Object.defineProperty(t,"__esModule",{value:!0});var i={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var o=r(n(232));Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},function(e,t,n){e.exports=n(272).default},function(e,t,n){var r=n(283),i=n(284),o=n(90),a=n(285);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineClientSettings=t.OfflineConfigManager=t.WeblabContext=t.QueryContext=t.ClientStage=void 0;var i=n(49);Object.defineProperty(t,"ClientStage",{enumerable:!0,get:function(){return i.ClientStage}}),Object.defineProperty(t,"QueryContext",{enumerable:!0,get:function(){return i.QueryContext}}),Object.defineProperty(t,"WeblabContext",{enumerable:!0,get:function(){return i.WeblabContext}});var o=n(338);Object.defineProperty(t,"OfflineConfigManager",{enumerable:!0,get:function(){return r(o).default}});var a=n(149);Object.defineProperty(t,"OfflineClientSettings",{enumerable:!0,get:function(){return r(a).default}})},function(e){e.exports=JSON.parse('{"a":[{"attributeValue":"[{precog_enabled:\\"true\\",url_regex:\\"^/listing/status$\\"},{precog_enabled:\\"true\\",url_regex:\\"^/shp$\\"}]","sequenceId":1944735552},{"attributeValue":"[{precog_enabled:\\"true\\",url_regex:\\"^/listing/status$\\"},{precog_enabled:\\"true\\",url_regex:\\"^/shp$\\"}]","sequenceId":1944735551},{"attributeValue":"[{precog_enabled:\\"true\\",url_regex:\\"^/listing/status$\\"},{precog_enabled:\\"true\\",url_regex:\\"^/shp$\\"}]","sequenceId":1944735550},{"attributeValue":"[{precog_enabled:\\"true\\",url_regex:\\"^/listing/status$\\"},{precog_enabled:\\"true\\",url_regex:\\"^/shp$\\"}]","sequenceId":1944735549},{"attributeValue":"[{precog_enabled:\\"true\\",url_regex:\\"^/listing/status$\\"},{precog_enabled:\\"true\\",url_regex:\\"^/shp$\\"}]","sequenceId":1944735548},{"attributeValue":"[{precog_enabled:\\"true\\",url_regex:\\"^/listing/status$\\"},{precog_enabled:\\"true\\",url_regex:\\"^/shp$\\"}]","sequenceId":1944735547},{"attributeValue":"[{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/shp$\\"},{opa_first_nav_experience:\\"TEST_WEBLAB_1234\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"TEST_WEBLAB_1234\\",url_regex:\\"/test/weblabbed\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"/test/disabled\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"/test/enabled\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"/mons/trimIntegration/test\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"/shp/spa-layout/disabledIntegrationTest\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/help/center$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/orders-v3.*$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/product-search/search$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/product-search$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/productclassify$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/abis/listing/syh\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/abis/listing/create\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/fba/dashboard$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/listing/download-status$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/listing/cards$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/listing/upload$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/listing/status$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/inventoryplanning/stranded-inventory$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/insoa/(registration|readytolaunch|launch)/(phonenumber|tax|storename|pickupaddress|shippingmethod|shippingrate|bank|ptc|listing)$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/inapay/(registration|readytolaunch|launch)/(tax|storename|pickupaddress|shippingmethod|shippingrate|bank|ptc|listing)$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/infresh/(registration|readytolaunch|launch)/(tax|storename|pickupaddress|shippingmethod|bank)$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/step$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/sw/in/FBA/dashboard$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/sw/in/FBAFAQs/step/Details$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/sbr$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/sw/in/[a-zA-Z]+/step/.+\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/test/minerva/disabled$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/test/minerva/enabled$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/test/minerva/weblabbed$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"true\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/shp/spa-layout$\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"true\\",opa_ingress_enabled:\\"true\\",url_regex:\\"/shp/no-trim\\"},{opa_first_nav_experience:\\"true\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/shp/disableMeld$\\"}]","sequenceId":1940395324},{"attributeValue":"[{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"TEST_WEBLAB_1234\\",url_regex:\\"^/test/minerva/weblabbed$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/test/minerva/enabled$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"false\\",url_regex:\\"^/test/minerva/disabled$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/sw/in/[a-zA-Z]+/step/.+\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/sbr$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/sw/in/FBAFAQs/step/Details$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/sw/in/FBA/dashboard$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/step$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/infresh/(registration|readytolaunch|launch)/(tax|storename|pickupaddress|shippingmethod|bank)$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/inapay/(registration|readytolaunch|launch)/(tax|storename|pickupaddress|shippingmethod|shippingrate|bank|ptc|listing)$\\"},{opa_first_nav_experience:\\"false\\",first_time_experience:\\"false\\",opa_ingress_enabled:\\"true\\",url_regex:\\"^/insoa/(registration|readytolaunch|launch)/(phonenumber|tax|storename|pickupaddress|shippingmethod|shippingrate|bank|ptc|listing)$\\"}]","sequenceId":1935229173}]}')},function(e){e.exports=JSON.parse('{"a":[{"keys":{"attribute_name":"feature_configs","acs_marketplace_id":"A2EUQ1WTGCTBG2"},"sequenceIds":[1944735552]},{"keys":{"attribute_name":"feature_configs","acs_marketplace_id":"A1F83G8C2ARO7P"},"sequenceIds":[1944735551]},{"keys":{"attribute_name":"feature_configs","acs_marketplace_id":"A1VC38T7YXB528"},"sequenceIds":[1944735550]},{"keys":{"attribute_name":"feature_configs","acs_marketplace_id":"APJ6JRA9NG5V4"},"sequenceIds":[1944735549]},{"keys":{"attribute_name":"feature_configs","acs_marketplace_id":"A13V1IB3VIYZZH"},"sequenceIds":[1944735548]},{"keys":{"attribute_name":"feature_configs","acs_marketplace_id":"A1PA6795UKMFR9"},"sequenceIds":[1944735547]},{"keys":{"attribute_name":"feature_configs","acs_marketplace_id":"ANY"},"sequenceIds":[1940395324]},{"keys":{"attribute_name":"feature_configs","acs_marketplace_id":"A21TJRUUN4KGV"},"sequenceIds":[1935229173]}]}')},function(e){e.exports=JSON.parse('{"a":[]}')},function(e,t,n){var r=n(52).default;function i(){"use strict";e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new P(r||[]);return s(o,"_invoke",{value:O(e,n,a)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var _="suspendedStart",g="executing",v="completed",y={};function m(){}function b(){}function w(){}var S={};d(S,l,(function(){return this}));var T=Object.getPrototypeOf,C=T&&T(T(N([])));C&&C!==o&&a.call(C,l)&&(S=C);var x=w.prototype=m.prototype=Object.create(S);function I(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,o,s,u){var l=p(e[i],e,o);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,u)}))}u(l.arg)}var i;s(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function O(e,n,r){var i=_;return function(o,a){if(i===g)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===_)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var l=p(e,n,r);if("normal"===l.type){if(i=r.done?v:"suspendedYield",l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=v,r.method="throw",r.arg=l.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=w,s(x,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,f,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,f,"GeneratorFunction")),e.prototype=Object.create(x),e},n.awrap=function(e){return{__await:e}},I(E.prototype),d(E.prototype,c,(function(){return this})),n.AsyncIterator=E,n.async=function(e,t,r,i,o){void 0===o&&(o=Promise);var a=new E(h(e,t,r,i),o);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},I(x),d(x,f,"Generator"),d(x,l,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=N,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ShpMessenger",{enumerable:!0,get:function(){return r.ShpMessenger}});var r=n(186)},function(e,t,n){"use strict";var r=n(53);Object.defineProperty(t,"__esModule",{value:!0}),t.ShpMessenger=void 0;var i=r(n(81)),o=r(n(82)),a=r(n(63)),s=n(188);t.ShpMessenger=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;(0,i.default)(this,e),(0,a.default)(this,"addMessageListener",(function(e){var n=function(n){if(n.origin===t.windowRef.location.origin){var r=(0,s.parseMessage)(n);r&&e(r)}};return t.windowRef.addEventListener("message",n),function(){t.windowRef.removeEventListener("message",n)}})),this.windowRef=n}return(0,o.default)(e,[{key:"sendMessage",value:function(e,t){e.postMessage(JSON.stringify(t),this.windowRef.location.origin)}}]),e}()},function(e,t,n){var r=n(84).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMessage=function(e){try{var t,n=JSON.parse(e.data);if(a[null==n?void 0:n.type])return{message:{type:n.type,payload:n.payload},source:null!==(t=e.source)&&void 0!==t?t:void 0}}catch(e){return}};var r=n(85);var i,o,a=(i=r.ShpMessageType,o={},Object.keys(i).forEach((function(e){return o[i[e]]=!0})),o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(190);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}))},function(e,t,n){"use strict";var r=n(53);Object.defineProperty(t,"__esModule",{value:!0}),t.getFallbackSummonArgsAsQueryParams=function(e){var t={};e.clientId&&(t.client=e.clientId);switch(e.type){case o.SummonArgsType.Solution:var n=s(s({},t),{},(0,i.default)((0,i.default)((0,i.default)({},l,o.SummonArgsType.Solution),c,e.solutionId),f,e.solutionType));return e.scope&&(n.merchantId=e.scope.merchantId,n.marketplaceId=e.scope.marketplaceId),e.clientId&&(n.client=e.clientId),n;case o.SummonArgsType.Search:return e.query?s(s({},t),{},(0,i.default)((0,i.default)({},l,o.SummonArgsType.Search),d,e.query)):s(s({},t),{},(0,i.default)({},l,o.SummonArgsType.Search));case o.SummonArgsType.Support:return s(s({},t),{},(0,i.default)({},l,o.SummonArgsType.Support));case o.SummonArgsType.NewConversation:return s(s({},t),{},(0,i.default)({},l,o.SummonArgsType.NewConversation));case o.SummonArgsType.LoadConversation:var r=s(s({},t),{},(0,i.default)({},l,o.SummonArgsType.LoadConversation));return e.conversationId?s(s({},r),{},(0,i.default)({},g,e.conversationId)):r;default:return{}}},t.parseFallbackSummonArgsFromQueryParams=function(e){var t,n,r;switch(e.get(l)){case o.SummonArgsType.Solution:return null!==(t=function(e){var t,n=e.get(c),r=e.get(f),i=r&&function(e){try{return o.SolutionType.of(e)}catch(t){return}}(r),a=e.get(h),s=e.get(p),u=s&&a?{merchantId:s,marketplaceId:a}:void 0,l=null!==(t=e.get(_))&&void 0!==t?t:void 0;if(n&&i)return{type:o.SummonArgsType.Solution,solutionId:n,solutionType:i,scope:u,clientId:l}}(e))&&void 0!==t?t:u;case o.SummonArgsType.Search:return function(e){var t,n=e.get(d),r=null!==(t=e.get(_))&&void 0!==t?t:void 0;return{type:o.SummonArgsType.Search,query:null!=n?n:void 0,clientId:r}}(e);case o.SummonArgsType.Support:return function(e){var t,n=null!==(t=e.get(_))&&void 0!==t?t:void 0;return{type:o.SummonArgsType.Support,clientId:n}}(e);case o.SummonArgsType.NewConversation:return null!==(n=function(e){var t,n=null!==(t=e.get(_))&&void 0!==t?t:void 0;return{type:o.SummonArgsType.NewConversation,clientId:n}}(e))&&void 0!==n?n:u;case o.SummonArgsType.LoadConversation:return null!==(r=function(e){var t,n=e.get(g),r=null!==(t=e.get(_))&&void 0!==t?t:void 0;return n?{type:o.SummonArgsType.LoadConversation,conversationId:n,clientId:r}:{type:o.SummonArgsType.LoadConversation,clientId:r}}(e))&&void 0!==r?r:u;default:return u}};var i=r(n(63)),o=n(86);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={type:o.SummonArgsType.Search},l="fallbackSummonType",c="solutionId",f="solutionType",d="query",h="marketplaceId",p="merchantId",_="client",g="conversationId"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentType=void 0;t.ContentType=function(e){return e.Help="HELP",e.Any="ANY",e.SellerForums="SELLER_FORUMS",e}({})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionType=void 0;var r=t.SolutionType=function(e){return e.Help="HelpArticle",e.DirectAnswer="DirectAnswer",e.Workflow="Workflow",e.InlineRevenueCalculator="InlineRevenueCalculator",e.MinervaChatbot="MinervaChatbot",e.ActionPanel="ActionPanel",e}({});(r||(t.SolutionType=r={})).of=function(e){if(r.Help.toUpperCase()===e.toUpperCase())return r.Help;if(r.DirectAnswer.toUpperCase()===e.toUpperCase())return r.DirectAnswer;if(r.Workflow.toUpperCase()===e.toUpperCase())return r.Workflow;if(r.InlineRevenueCalculator.toUpperCase()===e.toUpperCase())return r.InlineRevenueCalculator;if(r.MinervaChatbot.toUpperCase()===e.toUpperCase())return r.MinervaChatbot;if(r.ActionPanel.toUpperCase()===e.toUpperCase())return r.ActionPanel;throw Error("unrecognized solution type: [".concat(e,"]"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InnerSidebarStateType=t.HeaderTheme=void 0;t.InnerSidebarStateType=function(e){return e.Search="search",e.Solution="solution",e.Default="default",e}({}),t.HeaderTheme=function(e){return e.Default="default",e.SCA="conversation",e}({})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupportIngressType=t.SummonArgsType=void 0;t.SummonArgsType=function(e){return e.Search="search",e.Solution="solution",e.Support="support",e.NewConversation="newConversation",e.LoadConversation="loadConversation",e.EmptyConversation="emptyConversation",e}({}),t.SupportIngressType=function(e){return e.OpaIngress="opaIngress",e.HelpLink="helpLink",e}({})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiMessageType=void 0;t.ApiMessageType=function(e){return e.Text="Text",e}({})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SidebarPageType=void 0;t.SidebarPageType=function(e){return e.Solution="solution",e.Conversation="conversation",e.EmptyConversation="emptyConversation",e}({})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(198);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(200);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},function(e,t,n){"use strict";var r=n(53);Object.defineProperty(t,"__esModule",{value:!0}),t.SEARCH_HISTORY_COOKIE=void 0,t.addSearchToCookie=function(e){var t=a();t.unshift(e),i.default.set(o,function(e){function t(e,t,n){return n.indexOf(e)===t}return e.filter(t)}(t).slice(0,10).join("|"))},t.getSearchHistory=a;var i=r(n(199)),o=t.SEARCH_HISTORY_COOKIE="search-history-store";function a(){var e,t=i.default.get(o);return null!==(e=null==t?void 0:t.split("|"))&&void 0!==e?e:[]}},function(e,t,n){e.exports=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function t(n,r){function i(t,i,o){if("undefined"!=typeof document){"number"==typeof(o=e({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in o)o[s]&&(a+="; "+s,!0!==o[s]&&(a+="="+o[s].split(";")[0]));return document.cookie=t+"="+n.write(i,t)+a}}function o(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},i=0;i<t.length;i++){var o=t[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=n.read(a,s),e===s)break}catch(u){}}return e?r[e]:r}}return Object.create({set:i,get:o,remove:function(t,n){i(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(n)}})}return t({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},function(e,t,n){"use strict";var r=n(53);Object.defineProperty(t,"__esModule",{value:!0}),t.ShpHistoryManager=void 0;var i=r(n(201)),o=r(n(81)),a=r(n(82)),s=r(n(63));t.ShpHistoryManager=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;(0,o.default)(this,e),(0,s.default)(this,"STORAGE_KEY","shp-history-stack"),this.windowRef=n,this.logger=t,this.historyStack=this.loadHistory()}return(0,a.default)(e,[{key:"loadHistory",value:function(){try{var e=this.windowRef.sessionStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(t){return this.logger.logCountMetric("loadHistory",1),this.logger.logError("Error loading history from sessionStorage:",t),[]}}},{key:"saveHistory",value:function(){try{this.windowRef.sessionStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.historyStack))}catch(e){this.logger.logCountMetric("saveHistory",1),this.logger.logError("Error saving history to sessionStorage:",e)}}},{key:"addToHistory",value:function(e){this.historyStack.push(e),this.saveHistory()}},{key:"getHistory",value:function(){return(0,i.default)(this.historyStack)}},{key:"clearHistory",value:function(){try{this.historyStack=[],this.windowRef.sessionStorage.removeItem(this.STORAGE_KEY)}catch(e){this.logger.logCountMetric("clearHistory",1),this.logger.logError("Error clearing history:",e)}}}]),e}()},function(e,t,n){var r=n(202),i=n(203),o=n(204),a=n(205);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(87);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(87);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(52).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(89);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=n(7),i=n(37);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CloudWatchDimensions",{enumerable:!0,get:function(){return c.CloudWatchDimensions}}),Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ErrorHandler",{enumerable:!0,get:function(){return l.ErrorHandler}}),t.Metric=void 0,Object.defineProperty(t,"MetricsDriver",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return a.default}});var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(91));t.Metric=o;var a=r(n(220)),s=r(n(101)),u=r(n(105)),l=n(106),c=n(231);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e){e.String="String",e.Counter="Counter",e.Timer="Timer",e.List="List"}(r||(r={}));var i=r;t.default=i},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=r(n(23)),s=r(n(24)),u=r(n(21)),l=r(n(216)),c=r(n(217));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var d=function(e){(0,a.default)(n,e);var t=f(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).namedMetrics={},r}return(0,o.default)(n,[{key:"metricList",get:function(){return(0,c.default)(this.namedMetrics)}},{key:"setNamedMetric",value:function(e,t){var n=t(this.getNameForSubMetric(e));n.canMonitor&&(n.isMonitor=this.isMonitor),this.namedMetrics[e]=n}},{key:"setOrDeleteNamedMetricValue",value:function(e,t,n){null==n?this.deleteNamedMetric(e):this.getOrCreateNamedMetric(e,(function(e){return new t(e,n)})).value=n}},{key:"getOrCreateNamedMetric",value:function(e,t){return this.namedMetrics[e]||this.setNamedMetric(e,t),this.namedMetrics[e]}},{key:"getNamedMetric",value:function(e){return this.namedMetrics[e]}},{key:"deleteNamedMetric",value:function(e){delete this.namedMetrics[e]}},{key:"getNamedMetricValue",value:function(e){var t=this.getNamedMetric(e);if(t)return t.value}},{key:"getNameForSubMetric",value:function(e){return"".concat(this.name,".").concat(e)}}]),n}(l.default);t.default=d},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=r(n(44)),s=r(n(100)),u=r(n(23)),l=r(n(24)),c=r(n(21)),f=r(n(38)),d=r(n(65));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,u.default)(n,e);var t=h(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"metricList",get:function(){throw new Error("Subclass of KatalMetricObjectList must implement metricList getter")}},{key:"isMonitor",get:function(){return(0,a.default)((0,c.default)(n.prototype),"isMonitor",this)},set:function(e){(0,s.default)((0,c.default)(n.prototype),"isMonitor",e,this,!0),this.metricList.forEach((function(t){t.canMonitor&&(t.isMonitor=e)}))}},{key:"canMonitor",get:function(){return!0}},{key:"type",get:function(){return f.default.Types.List}},{key:"validationError",value:function(){return(0,d.default)(this.metricList,(function(e){return e.validationError()}))}}]),n}(f.default);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.values?Object.values:function(e){return Object.keys(e).map((function(t){return e[t]}))};t.default=r},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(23)),a=r(n(24)),s=r(n(21)),u=r(n(27));function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var c=function(e){(0,o.default)(n,e);var t=l(n);function n(){return(0,i.default)(this,n),t.call(this,n.INITIALIZE_METRIC_NAME)}return n}(r(n(64)).default);t.default=c,(0,u.default)(c,"INITIALIZE_METRIC_NAME","Initialization")},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=r(n(23)),s=r(n(24)),u=r(n(21)),l=r(n(27)),c=r(n(64)),f=r(n(93));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var h=function(e){(0,a.default)(n,e);var t=d(n);function n(e){return(0,i.default)(this,n),t.call(this,"".concat(n.HTTP_REQUEST_PREFIX,".").concat(e))}return(0,o.default)(n,[{key:"url",get:function(){return this.getNamedMetricValue(n.URL_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.URL_SUFFIX,f.default,e)}},{key:"urlMetric",get:function(){return this.getNamedMetric(n.URL_SUFFIX)}},{key:"statusCode",get:function(){return this.getNamedMetricValue(n.STATUS_CODE_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.STATUS_CODE_SUFFIX,f.default,e)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(n.STATUS_CODE_SUFFIX)}},{key:"statusText",get:function(){return this.getNamedMetricValue(n.STATUS_TEXT_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.STATUS_TEXT_SUFFIX,f.default,e)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(n.STATUS_TEXT_SUFFIX)}}]),n}(c.default);t.default=h,(0,l.default)(h,"HTTP_REQUEST_PREFIX","HTTPRequest"),(0,l.default)(h,"URL_SUFFIX","URL"),(0,l.default)(h,"STATUS_CODE_SUFFIX","StatusCode"),(0,l.default)(h,"STATUS_TEXT_SUFFIX","StatusText")},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10)),o=r(n(11)),a=r(n(27)),s=r(n(221)),u=r(n(101)),l=n(91),c=n(102),f=n(230),d=n(104),h=function(e){console.error("Error publishing metrics:"),console.error(e)},p=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new u.default;if((0,i.default)(this,e),(0,a.default)(this,"combinedErrorHandler",(function(e){try{n.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t),h(e)}})),o instanceof u.default.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");this.driver=t,this.errorHandler=r,this.context=o instanceof u.default?o:new u.default(o)}return(0,o.default)(e,[{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"getAdditionalRelatedMetrics",value:function(e){var t=e instanceof u.default?e.context:e,n=this.getBaseRelatedMetrics();return(0,c.mergeLists)(n,t.relatedMetrics)}},{key:"getBaseRelatedMetrics",value:function(){return(0,c.mergeLists)(this.context.context.relatedMetrics,this.context.context.relatedMetricsSingleAction)}},{key:"publish",value:function(e){var t=this;this.withErrorHandling((function(){if(!e)throw new Error("Cannot publish undefined/null metric object");if(l.Object.Types.List===e.type)e.metricList.forEach((function(e){t.publish(e)}));else{var n=t.context.driverContext(),r=n.validationError();if(r)throw r;var i=e.validationError();if(i)throw i;(0,f.dispatchMetricEvent)(e,n),t.driver.publish(e,n)}}))}},{key:"newChildPublisher",value:function(t){return new e(this.driver,this.errorHandler,this.context.merge(t))}},{key:"newChildActionPublisher",value:function(t){var n=this._generateActionid(t),r=this.context.withoutRelatedMetricsSingleAction().merge({actionId:n}).merge(t),i=new e(this.driver,this.errorHandler,r),o=!t||t instanceof u.default.Builder?this.getBaseRelatedMetrics():this.getAdditionalRelatedMetrics(t);return o&&o.forEach((function(e){i.publish(e)})),i}},{key:"newChildActionPublisherChained",value:function(e){var t=this._generateActionid(e),n=(0,d.embedRequestId)(t,this.context.context.requestId),r=[new l.String("parentActionId",n)],i=new u.default({actionId:t,relatedMetricsSingleAction:r}).merge(e);return this.newChildActionPublisher(i)}},{key:"newChildActionPublisherChainedForMethod",value:function(e,t){return this.newChildActionPublisherChained(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForMethod",value:function(e,t){return this.newChildActionPublisher(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForInitialization",value:function(e){return this.newChildActionPublisherForMethod("Initialization",e)}},{key:"publishString",value:function(e,t){this.publish(new l.String(e,t))}},{key:"publishStringTruncate",value:function(e,t){var n=new l.String(e,t);n.truncate=!0,this.publish(n)}},{key:"publishCounter",value:function(e,t){this.publish(new l.Counter(e,t))}},{key:"publishTimer",value:function(e,t){this.publish(new l.Timer(e,t))}},{key:"publishCounterMonitor",value:function(e,t){this.publish(new l.Counter(e,t).withMonitor())}},{key:"publishTimerMonitor",value:function(e,t){this.publish(new l.Timer(e,t).withMonitor())}},{key:"_generateActionid",value:function(e){if(e){var t=function(e){return e.context?e.context:e}(e);if(t.actionId)return t.actionId}return(0,s.default)()}}]),e}();t.default=p},function(e,t,n){var r=n(222),i=n(223);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e,(function(e){return function(e,t){if(e.length>s)return new Error("Expected Dimension name for value ".concat(t," to be ").concat(s," characters or less, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected Dimension name for value ".concat(t," to be non-blank"));if(!o.test(e))return new Error("Expected Dimension name for value ".concat(t," to contain only ASCII characters, but it was ").concat(e));if(!a.test(e))return new Error("Expected Dimension name for value ".concat(t," to contain at least one non whitespace character, but it was ").concat(e));if(e.startsWith(":"))return new Error("Expected Dimension name for value ".concat(t,' to not start with a colon (":"), but it was ').concat(e));if(t.length>u)return new Error("Expected Dimension value for name ".concat(e," to be ").concat(u," characters or less, but it was ").concat(t.length," characters"));if(t.length<1)return new Error("Expected Dimension value for name ".concat(e," to be non-blank"));if(!o.test(t))return new Error("Expected Dimension value for name ".concat(e," to contain only ASCII characters, but it was ").concat(t));if(!a.test(t))return new Error("Expected Dimension value for name ".concat(e," to contain at least one non whitespace character, but it was ").concat(t,"}"))}(e.name,e.value)}))};var i=r(n(65)),o=/^[\x20-\x7E]+$/,a=/^.*\S+.*$/,s=255,u=1024},function(e,t,n){var r=n(226),i=n(227),o=n(228),a=n(229);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(103);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(103);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchMetricEvent=function(e,t){if("undefined"==typeof window)return;(function(e,t){if("function"!=typeof CustomEvent)return;var n=new CustomEvent("katal.metrics.publish",{detail:{metric:e,context:t.getFields()}});window.dispatchEvent(n)})(e,t),function(e,t){var n=window.__KATAL_METRICS_EXTENSION__;n&&n.publish(e,t.getFields())}(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=n(108),i=n(107);Object.defineProperty(t,"__esModule",{value:!0}),t.makePublisher=c,t.makeContextBuilder=f,t.makeDriverConfigBuilder=d,t.makeErrorHandler=h,t.default=void 0;var o=i(n(233)),a=r(n(253)),s=r(n(269)),u={test:"com.amazon.eel.katal.metrics.core.nexus.sellercentral.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus.sellercentral"},l={logLevel:"ERROR",attribution:"KatalMetrics",message:"Metrics Failure"};function c(e){var t=h(),n=d(t),r=f(e,t);return new o.Publisher(n.build(),t,r.build())}function f(e,t){if(!e)throw new Error("KatalMetricsSellerCentral.makeContextBuilder requires a serviceName parameter");var n=new o.Context.Builder;return n.withSite("SellerCentral"),window.ue_id?n.withRelatedMetrics(new o.Metric.String("http_request_id",window.ue_id)):t&&t(new Error("KatalMetricsSellerCentral could not detect http_request_id")),n.withServiceName(e),n}function d(e){var t=(0,s.default)();e&&(t.domain||e(new Error("KatalMetricsSellerCentral could not auto-detect domain for metrics")),t.realm||e(new Error("KatalMetricsSellerCentral could not auto-detect realm for metrics")));var n=t.domain||"prod",r=t.realm||"USAmazon",i=(new a.default.Builder).withCustomProducer("katal_sellercentral").withCustomSourceGroup(u[n]).withDomainRealm(n,r);return e&&i.withErrorHandler(e),i}function h(){return function(e){window.ueLogError?window.ueLogError(e,l):console.error("KatalMetricsSellerCentral could not find window.ueLogError to handle error:",e.message)}}var p={makePublisher:c,makeContextBuilder:f,makeDriverConfigBuilder:d,makeErrorHandler:h};t.default=p},function(e,t,n){"use strict";var r=n(8),i=n(39);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CloudWatchDimensions",{enumerable:!0,get:function(){return c.CloudWatchDimensions}}),Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ErrorHandler",{enumerable:!0,get:function(){return l.ErrorHandler}}),t.Metric=void 0,Object.defineProperty(t,"MetricsDriver",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return a.default}});var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(109));t.Metric=o;var a=r(n(240)),s=r(n(120)),u=r(n(124)),l=n(251),c=n(252);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=r(n(28)),s=r(n(29)),u=r(n(25)),l=r(n(236)),c=r(n(237));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var d=function(e){(0,a.default)(n,e);var t=f(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).namedMetrics={},r}return(0,o.default)(n,[{key:"metricList",get:function(){return(0,c.default)(this.namedMetrics)}},{key:"setNamedMetric",value:function(e,t){var n=t(this.getNameForSubMetric(e));n.canMonitor&&(n.isMonitor=this.isMonitor),this.namedMetrics[e]=n}},{key:"setOrDeleteNamedMetricValue",value:function(e,t,n){null==n?this.deleteNamedMetric(e):this.getOrCreateNamedMetric(e,(function(e){return new t(e,n)})).value=n}},{key:"getOrCreateNamedMetric",value:function(e,t){return this.namedMetrics[e]||this.setNamedMetric(e,t),this.namedMetrics[e]}},{key:"getNamedMetric",value:function(e){return this.namedMetrics[e]}},{key:"deleteNamedMetric",value:function(e){delete this.namedMetrics[e]}},{key:"getNamedMetricValue",value:function(e){var t=this.getNamedMetric(e);if(t)return t.value}},{key:"getNameForSubMetric",value:function(e){return"".concat(this.name,".").concat(e)}}]),n}(l.default);t.default=d},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=r(n(46)),s=r(n(119)),u=r(n(28)),l=r(n(29)),c=r(n(25)),f=r(n(45)),d=r(n(67));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,u.default)(n,e);var t=h(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"metricList",get:function(){throw new Error("Subclass of KatalMetricObjectList must implement metricList getter")}},{key:"isMonitor",get:function(){return(0,a.default)((0,c.default)(n.prototype),"isMonitor",this)},set:function(e){(0,s.default)((0,c.default)(n.prototype),"isMonitor",e,this,!0),this.metricList.forEach((function(t){t.canMonitor&&(t.isMonitor=e)}))}},{key:"canMonitor",get:function(){return!0}},{key:"type",get:function(){return f.default.Types.List}},{key:"validationError",value:function(){return(0,d.default)(this.metricList,(function(e){return e.validationError()}))}}]),n}(f.default);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.values?Object.values:function(e){return Object.keys(e).map((function(t){return e[t]}))};t.default=r},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(28)),a=r(n(29)),s=r(n(25)),u=r(n(33));function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var c=function(e){(0,o.default)(n,e);var t=l(n);function n(){return(0,i.default)(this,n),t.call(this,n.INITIALIZE_METRIC_NAME)}return n}(r(n(66)).default);t.default=c,(0,u.default)(c,"INITIALIZE_METRIC_NAME","Initialization")},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=r(n(28)),s=r(n(29)),u=r(n(25)),l=r(n(33)),c=r(n(66)),f=r(n(112));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var h=function(e){(0,a.default)(n,e);var t=d(n);function n(e){return(0,i.default)(this,n),t.call(this,"".concat(n.HTTP_REQUEST_PREFIX,".").concat(e))}return(0,o.default)(n,[{key:"url",get:function(){return this.getNamedMetricValue(n.URL_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.URL_SUFFIX,f.default,e)}},{key:"urlMetric",get:function(){return this.getNamedMetric(n.URL_SUFFIX)}},{key:"statusCode",get:function(){return this.getNamedMetricValue(n.STATUS_CODE_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.STATUS_CODE_SUFFIX,f.default,e)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(n.STATUS_CODE_SUFFIX)}},{key:"statusText",get:function(){return this.getNamedMetricValue(n.STATUS_TEXT_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.STATUS_TEXT_SUFFIX,f.default,e)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(n.STATUS_TEXT_SUFFIX)}}]),n}(c.default);t.default=h,(0,l.default)(h,"HTTP_REQUEST_PREFIX","HTTPRequest"),(0,l.default)(h,"URL_SUFFIX","URL"),(0,l.default)(h,"STATUS_CODE_SUFFIX","StatusCode"),(0,l.default)(h,"STATUS_TEXT_SUFFIX","StatusText")},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(12)),o=r(n(15)),a=r(n(33)),s=r(n(241)),u=r(n(120)),l=n(109),c=n(121),f=n(250),d=n(123),h=function(e){console.error("Error publishing metrics:"),console.error(e)},p=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new u.default;if((0,i.default)(this,e),(0,a.default)(this,"combinedErrorHandler",(function(e){try{n.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t),h(e)}})),o instanceof u.default.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");this.driver=t,this.errorHandler=r,this.context=o instanceof u.default?o:new u.default(o)}return(0,o.default)(e,[{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"getAdditionalRelatedMetrics",value:function(e){var t=e instanceof u.default?e.context:e,n=this.getBaseRelatedMetrics();return(0,c.mergeLists)(n,t.relatedMetrics)}},{key:"getBaseRelatedMetrics",value:function(){return(0,c.mergeLists)(this.context.context.relatedMetrics,this.context.context.relatedMetricsSingleAction)}},{key:"publish",value:function(e){var t=this;this.withErrorHandling((function(){if(!e)throw new Error("Cannot publish undefined/null metric object");if(l.Object.Types.List===e.type)e.metricList.forEach((function(e){t.publish(e)}));else{var n=t.context.driverContext(),r=n.validationError();if(r)throw r;var i=e.validationError();if(i)throw i;(0,f.dispatchMetricEvent)(e,n),t.driver.publish(e,n)}}))}},{key:"newChildPublisher",value:function(t){return new e(this.driver,this.errorHandler,this.context.merge(t))}},{key:"newChildActionPublisher",value:function(t){var n=this._generateActionid(t),r=this.context.withoutRelatedMetricsSingleAction().merge({actionId:n}).merge(t),i=new e(this.driver,this.errorHandler,r),o=!t||t instanceof u.default.Builder?this.getBaseRelatedMetrics():this.getAdditionalRelatedMetrics(t);return o&&o.forEach((function(e){i.publish(e)})),i}},{key:"newChildActionPublisherChained",value:function(e){var t=this._generateActionid(e),n=(0,d.embedRequestId)(t,this.context.context.requestId),r=[new l.String("parentActionId",n)],i=new u.default({actionId:t,relatedMetricsSingleAction:r}).merge(e);return this.newChildActionPublisher(i)}},{key:"newChildActionPublisherChainedForMethod",value:function(e,t){return this.newChildActionPublisherChained(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForMethod",value:function(e,t){return this.newChildActionPublisher(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForInitialization",value:function(e){return this.newChildActionPublisherForMethod("Initialization",e)}},{key:"publishString",value:function(e,t){this.publish(new l.String(e,t))}},{key:"publishStringTruncate",value:function(e,t){var n=new l.String(e,t);n.truncate=!0,this.publish(n)}},{key:"publishCounter",value:function(e,t){this.publish(new l.Counter(e,t))}},{key:"publishTimer",value:function(e,t){this.publish(new l.Timer(e,t))}},{key:"publishCounterMonitor",value:function(e,t){this.publish(new l.Counter(e,t).withMonitor())}},{key:"publishTimerMonitor",value:function(e,t){this.publish(new l.Timer(e,t).withMonitor())}},{key:"_generateActionid",value:function(e){if(e){var t=function(e){return e.context?e.context:e}(e);if(t.actionId)return t.actionId}return(0,s.default)()}}]),e}();t.default=p},function(e,t,n){var r=n(242),i=n(243);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";var r=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e,(function(e){return function(e,t){if(e.length>s)return new Error("Expected Dimension name for value ".concat(t," to be ").concat(s," characters or less, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected Dimension name for value ".concat(t," to be non-blank"));if(!o.test(e))return new Error("Expected Dimension name for value ".concat(t," to contain only ASCII characters, but it was ").concat(e));if(!a.test(e))return new Error("Expected Dimension name for value ".concat(t," to contain at least one non whitespace character, but it was ").concat(e));if(e.startsWith(":"))return new Error("Expected Dimension name for value ".concat(t,' to not start with a colon (":"), but it was ').concat(e));if(t.length>u)return new Error("Expected Dimension value for name ".concat(e," to be ").concat(u," characters or less, but it was ").concat(t.length," characters"));if(t.length<1)return new Error("Expected Dimension value for name ".concat(e," to be non-blank"));if(!o.test(t))return new Error("Expected Dimension value for name ".concat(e," to contain only ASCII characters, but it was ").concat(t));if(!a.test(t))return new Error("Expected Dimension value for name ".concat(e," to contain at least one non whitespace character, but it was ").concat(t,"}"))}(e.name,e.value)}))};var i=r(n(67)),o=/^[\x20-\x7E]+$/,a=/^.*\S+.*$/,s=255,u=1024},function(e,t,n){var r=n(246),i=n(247),o=n(248),a=n(249);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(122);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(122);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchMetricEvent=function(e,t){if("undefined"==typeof window)return;(function(e,t){if("function"!=typeof CustomEvent)return;var n=new CustomEvent("katal.metrics.publish",{detail:{metric:e,context:t.getFields()}});window.dispatchEvent(n)})(e,t),function(e,t){var n=window.__KATAL_METRICS_EXTENSION__;n&&n.publish(e,t.getFields())}(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR_HANDLER=void 0;t.DEFAULT_ERROR_HANDLER=function(e){throw e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(254);var r=n(255).KatalMetricsDriverSushi;t.default=r},function(e,t){},function(e,t,n){"use strict";var r=n(108);Object.defineProperty(t,"__esModule",{value:!0}),t.KatalMetricsDriverSushi=void 0;var i=r(n(256)),o=r(n(257)),a=r(n(258)),s=r(n(259)),u=r(n(261)),l=r(n(126)),c=r(n(262)),f=r(n(125)),d=r(n(124)),h=r(n(111)),p=r(n(264)),_={test:"com.amazon.eel.katal.metrics.core.nexus.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus"},g=function(e){function t(e){var n;(0,o.default)(this,t),n=(0,s.default)(this,(0,u.default)(t).call(this)),(0,f.default)((0,l.default)(n),"sushi",void 0),(0,f.default)((0,l.default)(n),"producerId",void 0),(0,f.default)((0,l.default)(n),"sourceGroupId",void 0),(0,f.default)((0,l.default)(n),"errorHandler",void 0),(0,f.default)((0,l.default)(n),"combinedErrorHandler",(function(e){if(n.errorHandler)try{return void n.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t)}n.defaultErrorHandler(e)}));var r=e.domain,i=e.realm,a=e.errorHandler,c=e.sushiClient,d=e.sushiProducer,h=void 0===d?"katal":d,p=e.sushiClientOptions,g=e.sushiClientTransportOverride,v=e.sourceGroupId||_[r]||_.test;return n.sushi=c||n.buildSushiClient(r,i,v,p,g),n.errorHandler=a,n.producerId=h,n.sourceGroupId=v,n}return(0,c.default)(t,e),(0,a.default)(t,[{key:"beforeUnload",value:function(e){this.sushi.onSushiUnload(e)}},{key:"defaultErrorHandler",value:function(e){console.error("Error publishing metrics:"),console.error(e)}},{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"buildSushiClient",value:function(e,n,r,i,o){if(!e||!n)throw new Error("KatalMetricsDriverSushi requires a domain and realm to build a sushi client.");return new p.default(t.getRealmName(n),r,this.combinedErrorHandler,i,o)}},{key:"publish",value:function(e,t,n){var r=this,o=arguments.length<3?arguments[1]:arguments[2];this.withErrorHandling((function(){if(h.default.List!==e.type){var t=r.mapObjectTypeToNexusSchema(e.type),n=(0,i.default)({},o.context,{metricKey:e.name,value:e.value});e.isMonitor&&(n.isMonitor=!0),r.sushi.reset(),r.sushi.event(n,r.producerId,t,{ssd:1})}else e.metricList.forEach((function(e){r.publish(e,o)}))}))}},{key:"mapObjectTypeToNexusSchema",value:function(e){switch(e){case h.default.String:return"katal.client.metrics.String.2";case h.default.Counter:return"katal.client.metrics.Counter.3";case h.default.Timer:return"katal.client.metrics.Timer.2";default:throw new Error("Unknown type ".concat(e," when publishing metric object."))}}}],[{key:"getRealmName",value:function(e){switch(e){case"NAAmazon":case"USAmazon":return p.default.REGIONS.NA;case"EUAmazon":return p.default.REGIONS.EU;case"FEAmazon":case"JPAmazon":return p.default.REGIONS.FE;case"CNAmazon":return p.default.REGIONS.CN;default:return e}}}]),t}(d.default);t.KatalMetricsDriverSushi=g,(0,f.default)(g,"Builder",function(){function e(){(0,o.default)(this,e),(0,f.default)(this,"context",{})}return(0,a.default)(e,[{key:"withSushiClient",value:function(e){return this.context.sushiClient=e,this}},{key:"withDomainRealm",value:function(e,t){return this.context.domain=e,this.context.realm=t,this}},{key:"withCustomProducer",value:function(e){return this.context.sushiProducer=e,this}},{key:"withCustomSourceGroup",value:function(e){return this.context.sourceGroupId=e,this}},{key:"withErrorHandler",value:function(e){return this.context.errorHandler=e,this}},{key:"withSushiClientOptions",value:function(e){return this.context.sushiClientOptions=e,this}},{key:"withSushiClientTransportOverride",value:function(e){return this.context.sushiClientTransportOverride=e,this}},{key:"build",value:function(){return new g(this.context)}}]),e}())},function(e,t,n){var r=n(125);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(260),i=n(126);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(263);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";var r=n(265);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(266)),o=r(n(267)),a=r(n(268));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.REGIONS.NA,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0;(0,o.default)(this,e);var s=e.createSushiUrl(t,n),u=e.createCsmUserContext(s,i);this.ue_csm=this.setupMockCSMObject(u),this.encapsulatedWindow=this.setupMockWindow(this.ue_csm),this.transportationClientCode(this.ue_csm,window),a&&(this.ue_csm.ue._sBcn={isSupported:!0,send:function(e,t){return a(e,t),!0}}),this.clientCode(this.ue_csm,this.encapsulatedWindow),this.errorHandler=r}return(0,a.default)(e,null,[{key:"createSushiUrl",value:function(t,n){if(!n)throw new Error("Sushi Driver was not provided with a source group.");var r;switch(t){case e.REGIONS.NA:r="unagi-na";break;case e.REGIONS.EU:r="unagi-eu";break;case e.REGIONS.FE:r="unagi-fe";break;case e.REGIONS.CN:r="unagi-cn";break;default:throw new Error("Unrecognized region '".concat(t,"' provided to SushiClient."))}return"https://".concat(r,".amazon.com/1/events/").concat(n)}},{key:"createCsmUserContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u({hiPriFlushInterval:1e3,lowPriFlushInterval:1e4,requestId:"1",errorChannel:"jserr",sessionStorageWrapper:void 0,errorHandlerFunction:console.log,sushiUrl:e},t)}},{key:"REGIONS",get:function(){return{NA:"NA",EU:"EU",FE:"FE",CN:"CN"}}}]),(0,a.default)(e,[{key:"event",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return i&&console.log("SushiClient wrapper publishing the following:",{data:e,producerId:t,schemaId:n,options:r}),this.ue_csm.ue.event(e,t,n,r)}},{key:"reset",value:function(){this.ue_csm.ue.event.reset()}},{key:"onSushiFlush",value:function(e){this.ue_csm.ue.onSushiFlush(e)}},{key:"onSushiUnload",value:function(e){this.ue_csm.ue.onSushiUnload(e)}},{key:"setupMockCSMObject",value:function(e){var t=this;return{ue_hpsi:e.hiPriFlushInterval,ue_lpsi:e.lowPriFlushInterval,ue:{ssw:e.sessionStorageWrapper,log:function(e,n){t.errorHandler?t.errorHandler(e):console.log("An error has occurred in SushiClient channel "+n,e)},exec:function(e,t){return e},event:function(e,t,n){console.warn("SushiClient CSM stub called in unsupported manner: event()")},attach:function(e,t,n){n=n||window,window.EventTarget&&window.EventTarget.prototype&&window.EventTarget.prototype.addEventListener?window.EventTarget.prototype.addEventListener.call(n,e,t,!!window.ue_clf):n.addEventListener?n.addEventListener(e,t,!!window.ue_clf):n.attachEvent&&n.attachEvent("on"+e,t)}},ueLogError:e.errorHandlerFunction,ue_surl:e.sushiUrl,ue_id:e.requestId,ue_err_chan:e.errorChannel}}},{key:"setupMockWindow",value:function(e){return{ue_csm:e,ueLogError:e.ueLogError,ue:e.ue,setTimeout:function(e,t){return window.setTimeout(e,t)}}}},{key:"clientCode",value:function(e,t){e.ue.exec((function(e,t){function n(){for(var e=0;e<arguments.length;e++){var n=arguments[e];try{if(!n.isSupported)throw dummyException;var r=M.buildPayload(S,b);return n.send(y,r)}catch(h){}}p({m:"All supported clients failed",attribution:"CSMSushiClient_TRANSPORTATION_FAIL",f:"sushi-client.js",logLevel:"ERROR"},t.ue_err_chan||"jserr")}function r(){if(b.length){for(var e=0;e<E.length;e++)E[e]();n(h._sBcn||{},h._ajx||{}),b=[],w={},S={},g=v=T=C=0}}function i(e){try{return JSON.stringify(e)}catch(t){}return null}function o(n,o,a,s){var u,d=!1;return s=s||{},++x==l&&p({m:"Max number of Sushi Logs exceeded",f:"sushi-client.js",logLevel:"ERROR",attribution:"CSMSushiClient_MAX_CALLS"},t.ue_err_chan||"jserr"),(u=!(x>=l))&&((u=n&&-1<n.constructor.toString().indexOf("Object")&&o&&-1<o.constructor.toString().indexOf("String")&&a&&-1<a.constructor.toString().indexOf("String"))||0),u&&(h.count&&h.count("Event:"+a,1),n.producerId=n.producerId||o,n.schemaId=n.schemaId||a,n.timestamp=function(){var e=new Date,t=function(e){return 10>e?"0"+e:e};return Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}(),o=Date.now?Date.now():+new Date,a=Math.random().toString().substring(2,12),n.messageId=e.ue_id+"-"+o+"-"+a,s&&!s.ssd&&(n.sessionId=n.sessionId||e.ue_sid,n.requestId=n.requestId||e.ue_id,n.obfuscatedMarketplaceId=n.obfuscatedMarketplaceId||e.ue_mid),(o=i(n))?(o=o.length,(b.length==c||T+o>f)&&r(),T+=o,n={data:M.compressEvent(n)},b.push(n),(s||{}).n?0===A?r():g||(g=t.setTimeout(r,A)):v||(v=t.setTimeout(r,k)),d=!0):d=!1),!d&&e.ue_int&&console.error("Invalid JS Nexus API call"),d}function a(){if(!O){for(var t=0;t<I.length;t++)I[t]();for(t=0;t<E.length;t++)E[t]();b.length&&(e.ue_sbuimp&&e.ue&&e.ue.ssw&&(t=i({dct:S,evt:b}),e.ue.ssw("eeldata",t),e.ue.ssw("eelsts","unk")),n(h._sBcn||{})),O=!0}}function s(e){I.push(e)}function u(e){E.push(e)}var l=1e3,c=499,f=524288,d=function(){},h=e.ue||{},p=h.log||d,_=e.uex||d;(e.uet||d)("bb","ue_sushi_v1",{wb:1});var g,v,y=e.ue_surl||"https://unagi-na.amazon.com/1/events/com.amazon.csm.nexusclient.gamma",m=["messageId","timestamp"],b=[],w={},S={},T=0,C=0,x=0,I=[],E=[],O=!1,A=void 0===e.ue_hpsi?1e3:e.ue_hpsi,k=void 0===e.ue_lpsi?1e4:e.ue_lpsi,M=function(){function e(e){return w[e]="#"+C++,S[w[e]]=e,w[e]}return{compressEvent:function t(n){if(!(n instanceof Function)){if(n instanceof Array){for(var r=[],i=n.length,o=0;o<i;o++)r[o]=t(n[o]);return r}if(n instanceof Object){for(i in r={},n)n.hasOwnProperty(i)&&(r[w[i]?w[i]:e(i)]=-1===m.indexOf(i)?t(n[i]):n[i]);return r}return"string"==typeof n&&(n.length>("#"+C).length||"#"===n.charAt(0))?w[n]?w[n]:e(n):n}},buildPayload:function(){return i({cs:{dct:S},events:b})}}}();!function(){if(h.event&&h.event.isStub){if(e.ue_sbuimp&&e.ue&&e.ue.ssw){var t=e.ue.ssw("eelsts").val;if(t&&"unk"===t&&(t=e.ue.ssw("eeldata").val)){var n;e:{try{n=JSON.parse(t);break e}catch(w){}n=null}n&&n.evt instanceof Array&&n.dct instanceof Object&&(b=n.evt,S=n.dct,b&&S&&(r(),e.ue.ssw("eeldata","{}"),e.ue.ssw("eelsts","scs")))}}h.event.replay((function(e){e[3]=e[3]||{},e[3].n=1,o.apply(this,e)})),h.onSushiUnload.replay((function(e){s(e[0])})),h.onSushiFlush.replay((function(e){u(e[0])}))}}(),h.attach("beforeunload",a),h.attach("pagehide",a),h._cmps=M,h.event=o,h.event.reset=function(){x=0},h.onSushiUnload=s,h.onSushiFlush=u;try{t.P&&t.P.register&&t.P.register("sushi-client",d)}catch(P){e.ueLogError(P,{logLevel:"WARN"})}_("ld","ue_sushi_v1",{wb:1})}),"Nxs-JS-Client")(e,t)}},{key:"transportationClientCode",value:function(e,t){e.ue.exec((function(e,t){var n=function(){},r={send:function(e,r){if(r&&e){var i;if(t.XDomainRequest)(i=new XDomainRequest).onerror=n,i.ontimeout=n,i.onprogress=n,i.onload=n,i.timeout=0;else if(t.XMLHttpRequest){if(!("withCredentials"in(i=new XMLHttpRequest)))throw""}else i=void 0;if(!i)throw"";i.open("POST",e,!0),i.setRequestHeader&&i.setRequestHeader("Content-type","text/plain"),i.send(r)}},isSupported:!0},i={send:function(t,n){if(t&&n){if(!navigator.sendBeacon(t,n))throw"";e.ue_sbuimp&&e.ue&&e.ue.ssw&&e.ue.ssw("eelsts","scs")}},isSupported:!(!navigator.sendBeacon||t.cordova&&t.cordova.platformId&&"ios"==t.cordova.platformId)};e.ue._ajx=r,e.ue._sBcn=i}),"Transportation-clients")(e,t)}}]),e}();t.default=l},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(){var e=window.ue_surl;if(e){var t=e.match(/unagi[-]([a-z]{2})/);if(t)return r[t[1]]}}();return{domain:i(),realm:e}};var r={na:"USAmazon",eu:"EUAmazon",fe:"FEAmazon",cn:"CNAmazon"};function i(){var e=window.ue_surl;if(e){if(-1!==e.indexOf("nexusclient.prod"))return"prod";if(-1!==e.indexOf("nexusclient.gamma"))return"test"}}},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(271)),o=r(n(27)),a=r(n(10)),s=r(n(11)),u=r(n(23)),l=r(n(24)),c=r(n(21)),f=r(n(105)),d=n(106),h=r(n(38));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var g=function(e){(0,u.default)(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.DEFAULT_ERROR_HANDLER;return(0,a.default)(this,n),(e=t.call(this))._errorHandler=i,e._console=r,e}return(0,s.default)(n,[{key:"errorHandler",get:function(){return this._errorHandler}},{key:"publish",value:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.getFields());switch(e.type){case h.default.Types.String:case h.default.Types.Counter:case h.default.Types.Timer:(0,i.default)(n,{type:e.type,metricKey:e.name,value:e.value}),e.isMonitor&&(n.isMonitor=!0);break;default:var r=new Error("Unknown type ".concat(e.type," when publishing metric object."));return void this.errorHandler(r)}this._console.log(n)}}]),n}(f.default);t.default=g},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(273)),a=(i=n(274))&&i.__esModule?i:{default:i};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="i18nFormat",this.mem={},this.init(null,t)}var t,n,r;return t=e,(n=[{key:"init",value:function(e,t){var n=this,r=e&&e.options&&e.options.i18nFormat||{};if(this.options=o.defaults(r,t,this.options||{},{memoize:!0,memoizeFallback:!1,bindI18n:"",bindI18nStore:"",parseErrorHandler:function(e,t,n,r){return n}}),this.formats=this.options.formats,e){var i=this.options,s=i.bindI18n,u=i.bindI18nStore,l=i.memoize;e.IntlMessageFormat=a.default,e.ICU=this,l&&(s&&e.on(s,(function(){return n.clearCache()})),u&&e.store.on(u,(function(){return n.clearCache()})))}this.options.localeData&&("[object Array]"===Object.prototype.toString.apply(this.options.localeData)?this.options.localeData.forEach((function(e){return n.addLocaleData(e)})):this.addLocaleData(this.options.localeData))}},{key:"addLocaleData",value:function(e){("[object Array]"===Object.prototype.toString.apply(e)?e:[e]).forEach((function(e){e&&e.locale&&a.default.__addLocaleData(e)}))}},{key:"addUserDefinedFormats",value:function(e){this.formats=this.formats?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.formats,{},e):e}},{key:"parse",value:function(e,t,n,r,i,s){var u,l=s&&s.resolved&&s.resolved.res,c=this.options.memoize&&"".concat(n,".").concat(r,".").concat(i.replace(/\./g,"###"));this.options.memoize&&(u=o.getPath(this.mem,c));try{return u||(u=new a.default(e,n,this.formats),this.options.memoize&&(this.options.memoizeFallback||!s||l)&&o.setPath(this.mem,c,u)),u.format(t)}catch(f){return this.options.parseErrorHandler(f,i,e,t)}}},{key:"addLookupKeys",value:function(e,t,n,r,i){return e}},{key:"clearCache",value:function(){this.mem={}}}])&&c(t.prototype,n),r&&c(t,r),e}();f.type="i18nFormat";var d=f;t.default=d},function(e,t,n){"use strict";function r(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=e[a]}return i()?{}:{obj:e,k:r(o.shift())}}Object.defineProperty(t,"__esModule",{value:!0}),t.setPath=function(e,t,n){var i=r(e,t,Object),o=i.obj,a=i.k;o[a]=n},t.pushPath=function(e,t,n,i){var o=r(e,t,Object),a=o.obj,s=o.k;a[s]=a[s]||[],i&&(a[s]=a[s].concat(n));i||a[s].push(n)},t.getPath=function(e,t){var n=r(e,t),i=n.obj,o=n.k;return i?i[o]:void 0},t.defaults=function(e){return o.call(a.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e},t.extend=function(e){return o.call(a.call(arguments,1),(function(t){if(t)for(var n in t)e[n]=t[n]})),e};var i=[],o=i.forEach,a=i.slice},function(e,t,n){"use strict";var r=n(275).default;n(282),(t=e.exports=r).default=t},function(e,t,n){"use strict";var r=n(276),i=n(281);r.default.__addLocaleData(i.default),r.default.defaultLocale="en",t.default=r.default},function(e,t,n){"use strict";var r=n(127),i=n(277),o=n(278),a=n(279);function s(e,t,n){var r="string"==typeof e?s.__parse(e):e;if(!r||"messageFormatPattern"!==r.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(s.formats,n),i.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var o=this._findPluralRuleFunction(this._locale),a=this._compilePattern(r,t,n,o),u=this;this.format=function(t){try{return u._format(a,t)}catch(n){throw n.variableId?new Error("The intl string context variable '"+n.variableId+"' was not provided to the string '"+e+"'"):n}}}t.default=s,i.defineProperty(s,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),i.defineProperty(s,"__localeData__",{value:i.objCreate(null)}),i.defineProperty(s,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");s.__localeData__[e.locale.toLowerCase()]=e}}),i.defineProperty(s,"__parse",{value:a.default.parse}),i.defineProperty(s,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),s.prototype.resolvedOptions=function(){return{locale:this._locale}},s.prototype._compilePattern=function(e,t,n,r){return new o.default(t,n,r).compile(e)},s.prototype._findPluralRuleFunction=function(e){for(var t=s.__localeData__,n=t[e.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&t[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},s.prototype._format=function(e,t){var n,i,o,a,s,u,l="";for(n=0,i=e.length;n<i;n+=1)if("string"!=typeof(o=e[n])){if(a=o.id,!t||!r.hop.call(t,a))throw(u=new Error("A value must be provided for: "+a)).variableId=a,u;s=t[a],o.options?l+=this._format(o.getOption(s),t):l+=o.format(s)}else l+=o;return l},s.prototype._mergeFormats=function(e,t){var n,o,a={};for(n in e)r.hop.call(e,n)&&(a[n]=o=i.objCreate(e[n]),t&&r.hop.call(t,n)&&r.extend(o,t[n]));return a},s.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(s.defaultLocale);var t,n,r,i,o=s.__localeData__;for(t=0,n=e.length;t<n;t+=1)for(r=e[t].toLowerCase().split("-");r.length;){if(i=o[r.join("-")])return i.locale;r.pop()}var a=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+a)}},function(e,t,n){"use strict";var r=n(127),i=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),o=(!i&&Object.prototype.__defineGetter__,i?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):r.hop.call(e,t)&&!("value"in n)||(e[t]=n.value)}),a=Object.create||function(e,t){var n,i;function a(){}for(i in a.prototype=e,n=new a,t)r.hop.call(t,i)&&o(n,i,t[i]);return n};t.defineProperty=o,t.objCreate=a},function(e,t,n){"use strict";function r(e,t,n){this.locales=e,this.formats=t,this.pluralFn=n}function i(e){this.id=e}function o(e,t,n,r,i){this.id=e,this.useOrdinal=t,this.offset=n,this.options=r,this.pluralFn=i}function a(e,t,n,r){this.id=e,this.offset=t,this.numberFormat=n,this.string=r}function s(e,t){this.id=e,this.options=t}t.default=r,r.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},r.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,n,r,i=e.elements,o=[];for(t=0,n=i.length;t<n;t+=1)switch((r=i[t]).type){case"messageTextElement":o.push(this.compileMessageText(r));break;case"argumentElement":o.push(this.compileArgument(r));break;default:throw new Error("Message element does not have a valid type")}return o},r.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new a(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},r.prototype.compileArgument=function(e){var t=e.format;if(!t)return new i(e.id);var n,r=this.formats,a=this.locales,u=this.pluralFn;switch(t.type){case"numberFormat":return n=r.number[t.style],{id:e.id,format:new Intl.NumberFormat(a,n).format};case"dateFormat":return n=r.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,n).format};case"timeFormat":return n=r.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,n).format};case"pluralFormat":return n=this.compileOptions(e),new o(e.id,t.ordinal,t.offset,n,u);case"selectFormat":return n=this.compileOptions(e),new s(e.id,n);default:throw new Error("Message element does not have a valid format type")}},r.prototype.compileOptions=function(e){var t,n,r,i=e.format,o=i.options,a={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===i.type?e:null,t=0,n=o.length;t<n;t+=1)a[(r=o[t]).selector]=this.compileMessage(r.value);return this.currentPlural=this.pluralStack.pop(),a},i.prototype.format=function(e){return e||"number"==typeof e?"string"==typeof e?e:String(e):""},o.prototype.getOption=function(e){var t=this.options;return t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)]||t.other},a.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},s.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},function(e,t,n){"use strict";(t=e.exports=n(280).default).default=t},function(e,t,n){"use strict";t.default=function(){function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,r=arguments.length>1?arguments[1]:{},i={},o={start:ke},a=ke,s=function(e){return{type:"messageFormatPattern",elements:e,location:xe()}},u=function(e){var t,n,r,i,o,a="";for(t=0,r=e.length;t<r;t+=1)for(n=0,o=(i=e[t]).length;n<o;n+=1)a+=i[n];return a},l=function(e){return{type:"messageTextElement",value:e,location:xe()}},c=/^[^ \t\n\r,.+={}#]/,f={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},d="{",h={type:"literal",value:"{",description:'"{"'},p=",",_={type:"literal",value:",",description:'","'},g="}",v={type:"literal",value:"}",description:'"}"'},y=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2],location:xe()}},m="number",b={type:"literal",value:"number",description:'"number"'},w="date",S={type:"literal",value:"date",description:'"date"'},T="time",C={type:"literal",value:"time",description:'"time"'},x=function(e,t){return{type:e+"Format",style:t&&t[2],location:xe()}},I="plural",E={type:"literal",value:"plural",description:'"plural"'},O=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options,location:xe()}},A="selectordinal",k={type:"literal",value:"selectordinal",description:'"selectordinal"'},M=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options,location:xe()}},P="select",N={type:"literal",value:"select",description:'"select"'},L=function(e){return{type:"selectFormat",options:e,location:xe()}},R="=",D={type:"literal",value:"=",description:'"="'},j=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t,location:xe()}},B="offset:",F={type:"literal",value:"offset:",description:'"offset:"'},U=function(e){return e},V=function(e,t){return{type:"pluralFormat",offset:e,options:t,location:xe()}},H={type:"other",description:"whitespace"},W=/^[ \t\n\r]/,q={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},z={type:"other",description:"optionalWhitespace"},G=/^[0-9]/,X={type:"class",value:"[0-9]",description:"[0-9]"},$=/^[0-9a-f]/i,Y={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},J="0",K={type:"literal",value:"0",description:'"0"'},Q=/^[1-9]/,Z={type:"class",value:"[1-9]",description:"[1-9]"},ee=function(e){return parseInt(e,10)},te=/^[^{}\\\0-\x1F \t\n\r]/,ne={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},re="\\\\",ie={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},oe=function(){return"\\"},ae="\\#",se={type:"literal",value:"\\#",description:'"\\\\#"'},ue=function(){return"\\#"},le="\\{",ce={type:"literal",value:"\\{",description:'"\\\\{"'},fe=function(){return"{"},de="\\}",he={type:"literal",value:"\\}",description:'"\\\\}"'},pe=function(){return"}"},_e="\\u",ge={type:"literal",value:"\\u",description:'"\\\\u"'},ve=function(e){return String.fromCharCode(parseInt(e,16))},ye=function(e){return e.join("")},me=0,be=0,we=[{line:1,column:1,seenCR:!1}],Se=0,Te=[],Ce=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=o[r.startRule]}function xe(){return Ee(be,me)}function Ie(e){var n,r,i=we[e];if(i)return i;for(n=e-1;!we[n];)n--;for(i={line:(i=we[n]).line,column:i.column,seenCR:i.seenCR};n<e;)"\n"===(r=t.charAt(n))?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return we[e]=i,i}function Ee(e,t){var n=Ie(e),r=Ie(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Oe(e){me<Se||(me>Se&&(Se=me,Te=[]),Te.push(e))}function Ae(t,n,r,i){return null!==n&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==t?t:function(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(n,r),n,r,i)}function ke(){return Me()}function Me(){var e,t,n;for(e=me,t=[],n=Pe();n!==i;)t.push(n),n=Pe();return t!==i&&(be=e,t=s(t)),e=t}function Pe(){var e;return(e=Le())===i&&(e=De()),e}function Ne(){var e,n,r,o,a,s;if(e=me,n=[],r=me,(o=Xe())!==i&&(a=Qe())!==i&&(s=Xe())!==i?r=o=[o,a,s]:(me=r,r=i),r!==i)for(;r!==i;)n.push(r),r=me,(o=Xe())!==i&&(a=Qe())!==i&&(s=Xe())!==i?r=o=[o,a,s]:(me=r,r=i);else n=i;return n!==i&&(be=e,n=u(n)),(e=n)===i&&(e=me,e=(n=Ge())!==i?t.substring(e,me):n),e}function Le(){var e,t;return e=me,(t=Ne())!==i&&(be=e,t=l(t)),e=t}function Re(){var e,n,r;if((e=Je())===i){if(e=me,n=[],c.test(t.charAt(me))?(r=t.charAt(me),me++):(r=i,0===Ce&&Oe(f)),r!==i)for(;r!==i;)n.push(r),c.test(t.charAt(me))?(r=t.charAt(me),me++):(r=i,0===Ce&&Oe(f));else n=i;e=n!==i?t.substring(e,me):n}return e}function De(){var e,n,r,o,a,s,u;return e=me,123===t.charCodeAt(me)?(n=d,me++):(n=i,0===Ce&&Oe(h)),n!==i&&Xe()!==i&&(r=Re())!==i&&Xe()!==i?(o=me,44===t.charCodeAt(me)?(a=p,me++):(a=i,0===Ce&&Oe(_)),a!==i&&(s=Xe())!==i&&(u=je())!==i?o=a=[a,s,u]:(me=o,o=i),o===i&&(o=null),o!==i&&(a=Xe())!==i?(125===t.charCodeAt(me)?(s=g,me++):(s=i,0===Ce&&Oe(v)),s!==i?(be=e,e=n=y(r,o)):(me=e,e=i)):(me=e,e=i)):(me=e,e=i),e}function je(){var e;return(e=Be())===i&&(e=Fe())===i&&(e=Ue())===i&&(e=Ve()),e}function Be(){var e,n,r,o,a,s;return e=me,t.substr(me,6)===m?(n=m,me+=6):(n=i,0===Ce&&Oe(b)),n===i&&(t.substr(me,4)===w?(n=w,me+=4):(n=i,0===Ce&&Oe(S)),n===i&&(t.substr(me,4)===T?(n=T,me+=4):(n=i,0===Ce&&Oe(C)))),n!==i&&Xe()!==i?(r=me,44===t.charCodeAt(me)?(o=p,me++):(o=i,0===Ce&&Oe(_)),o!==i&&(a=Xe())!==i&&(s=Qe())!==i?r=o=[o,a,s]:(me=r,r=i),r===i&&(r=null),r!==i?(be=e,e=n=x(n,r)):(me=e,e=i)):(me=e,e=i),e}function Fe(){var e,n,r,o;return e=me,t.substr(me,6)===I?(n=I,me+=6):(n=i,0===Ce&&Oe(E)),n!==i&&Xe()!==i?(44===t.charCodeAt(me)?(r=p,me++):(r=i,0===Ce&&Oe(_)),r!==i&&Xe()!==i&&(o=ze())!==i?(be=e,e=n=O(o)):(me=e,e=i)):(me=e,e=i),e}function Ue(){var e,n,r,o;return e=me,t.substr(me,13)===A?(n=A,me+=13):(n=i,0===Ce&&Oe(k)),n!==i&&Xe()!==i?(44===t.charCodeAt(me)?(r=p,me++):(r=i,0===Ce&&Oe(_)),r!==i&&Xe()!==i&&(o=ze())!==i?(be=e,e=n=M(o)):(me=e,e=i)):(me=e,e=i),e}function Ve(){var e,n,r,o,a;if(e=me,t.substr(me,6)===P?(n=P,me+=6):(n=i,0===Ce&&Oe(N)),n!==i)if(Xe()!==i)if(44===t.charCodeAt(me)?(r=p,me++):(r=i,0===Ce&&Oe(_)),r!==i)if(Xe()!==i){if(o=[],(a=We())!==i)for(;a!==i;)o.push(a),a=We();else o=i;o!==i?(be=e,e=n=L(o)):(me=e,e=i)}else me=e,e=i;else me=e,e=i;else me=e,e=i;else me=e,e=i;return e}function He(){var e,n,r,o;return e=me,n=me,61===t.charCodeAt(me)?(r=R,me++):(r=i,0===Ce&&Oe(D)),r!==i&&(o=Je())!==i?n=r=[r,o]:(me=n,n=i),(e=n!==i?t.substring(e,me):n)===i&&(e=Qe()),e}function We(){var e,n,r,o,a;return e=me,Xe()!==i&&(n=He())!==i&&Xe()!==i?(123===t.charCodeAt(me)?(r=d,me++):(r=i,0===Ce&&Oe(h)),r!==i&&Xe()!==i&&(o=Me())!==i&&Xe()!==i?(125===t.charCodeAt(me)?(a=g,me++):(a=i,0===Ce&&Oe(v)),a!==i?(be=e,e=j(n,o)):(me=e,e=i)):(me=e,e=i)):(me=e,e=i),e}function qe(){var e,n,r;return e=me,t.substr(me,7)===B?(n=B,me+=7):(n=i,0===Ce&&Oe(F)),n!==i&&Xe()!==i&&(r=Je())!==i?(be=e,e=n=U(r)):(me=e,e=i),e}function ze(){var e,t,n,r;if(e=me,(t=qe())===i&&(t=null),t!==i)if(Xe()!==i){if(n=[],(r=We())!==i)for(;r!==i;)n.push(r),r=We();else n=i;n!==i?(be=e,e=t=V(t,n)):(me=e,e=i)}else me=e,e=i;else me=e,e=i;return e}function Ge(){var e,n;if(Ce++,e=[],W.test(t.charAt(me))?(n=t.charAt(me),me++):(n=i,0===Ce&&Oe(q)),n!==i)for(;n!==i;)e.push(n),W.test(t.charAt(me))?(n=t.charAt(me),me++):(n=i,0===Ce&&Oe(q));else e=i;return Ce--,e===i&&(n=i,0===Ce&&Oe(H)),e}function Xe(){var e,n,r;for(Ce++,e=me,n=[],r=Ge();r!==i;)n.push(r),r=Ge();return e=n!==i?t.substring(e,me):n,Ce--,e===i&&(n=i,0===Ce&&Oe(z)),e}function $e(){var e;return G.test(t.charAt(me))?(e=t.charAt(me),me++):(e=i,0===Ce&&Oe(X)),e}function Ye(){var e;return $.test(t.charAt(me))?(e=t.charAt(me),me++):(e=i,0===Ce&&Oe(Y)),e}function Je(){var e,n,r,o,a,s;if(e=me,48===t.charCodeAt(me)?(n=J,me++):(n=i,0===Ce&&Oe(K)),n===i){if(n=me,r=me,Q.test(t.charAt(me))?(o=t.charAt(me),me++):(o=i,0===Ce&&Oe(Z)),o!==i){for(a=[],s=$e();s!==i;)a.push(s),s=$e();a!==i?r=o=[o,a]:(me=r,r=i)}else me=r,r=i;n=r!==i?t.substring(n,me):r}return n!==i&&(be=e,n=ee(n)),e=n}function Ke(){var e,n,r,o,a,s,u,l;return te.test(t.charAt(me))?(e=t.charAt(me),me++):(e=i,0===Ce&&Oe(ne)),e===i&&(e=me,t.substr(me,2)===re?(n=re,me+=2):(n=i,0===Ce&&Oe(ie)),n!==i&&(be=e,n=oe()),(e=n)===i&&(e=me,t.substr(me,2)===ae?(n=ae,me+=2):(n=i,0===Ce&&Oe(se)),n!==i&&(be=e,n=ue()),(e=n)===i&&(e=me,t.substr(me,2)===le?(n=le,me+=2):(n=i,0===Ce&&Oe(ce)),n!==i&&(be=e,n=fe()),(e=n)===i&&(e=me,t.substr(me,2)===de?(n=de,me+=2):(n=i,0===Ce&&Oe(he)),n!==i&&(be=e,n=pe()),(e=n)===i&&(e=me,t.substr(me,2)===_e?(n=_e,me+=2):(n=i,0===Ce&&Oe(ge)),n!==i?(r=me,o=me,(a=Ye())!==i&&(s=Ye())!==i&&(u=Ye())!==i&&(l=Ye())!==i?o=a=[a,s,u,l]:(me=o,o=i),(r=o!==i?t.substring(r,me):o)!==i?(be=e,e=n=ve(r)):(me=e,e=i)):(me=e,e=i)))))),e}function Qe(){var e,t,n;if(e=me,t=[],(n=Ke())!==i)for(;n!==i;)t.push(n),n=Ke();else t=i;return t!==i&&(be=e,t=ye(t)),e=t}if((n=a())!==i&&me===t.length)return n;throw n!==i&&me<t.length&&Oe({type:"end",description:"end of input"}),Ae(null,Te,Se<t.length?t.charAt(Se):null,Se<t.length?Ee(Se,Se+1):Ee(Se,Se))}}}()},function(e,t,n){"use strict";t.default={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),r=!n[1],i=Number(n[0])==e,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&r?"one":"other"}}},function(e,t){},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.MonsWeblabTaskClient=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getTreatments=function(t){var n=this;return e.prototype.verifySellerCentralWeblab.call(this,t).then((function(){var r,i,o=null===(r=null===document||void 0===document?void 0:document.head)||void 0===r?void 0:r.querySelector('meta[name="a2z:mons_weblab_treatment"]'),a=(null===(i=null==o?void 0:o.content)||void 0===i?void 0:i.split(","))||[],s=new Map;a.forEach((function(e){var t=e.split("=",2),n=t[0],r=t[1];n&&r&&s.set(n,r)}));var u=new Map;return t.map((function(t){var r=s.get(t.id),i=!r,o=r||t.defaultTreatment;u.set(t,e.prototype.convertToTreatment.call(n,t,o,i))})),u}))},t}(n(128).KatalWebSellerCentralClient);t.MonsWeblabTaskClient=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBrowserStorageCache=void 0;var r=n(62);t.createBrowserStorageCache=function(e,t){void 0===t&&(t=600);var n=window.ue_mid||void 0;return new r.BrowserStorageCache(e,t,n)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(129)),a=n(132),s=n(312),u=n(313),l=n(314),c={cacheRefreshRateSeconds:600},f=function(){function e(e){this.weblabProxy=e.weblabProxy,this.errorHandler=e.errorHandler||u.DEFAULT_ERROR_HANDLER,e.metricsPublisher&&(this.metricsPublisher=e.metricsPublisher.newChildActionPublisherForMethod("KatalWeblab"),this.weblabProxy.setMetricsPublisher&&this.weblabProxy.setMetricsPublisher(this.metricsPublisher)),e.treatmentCache&&(this.cache=e.treatmentCache,this.cacheSettings=r(r({},c),e.cacheBehavior),this.cacheRefresher=new s.CacheRefresher(e.treatmentCache,this.cacheSettings,this.weblabProxy,this.errorHandler,this.metricsPublisher),this.cacheRefresher.run())}return e.prototype.getTreatment=function(e){if(!e||!e.id||!e.defaultTreatment)throw new Error("Invalid input: getTreatment must be passed a Weblab object");return this.getTreatments([e]).then((function(t){return t[e.id]}))},e.prototype.getTreatments=function(e){if(!e||!Array.isArray(e))throw new Error("Invalid input: getTreatments must be passed an array of Weblab objects");var t;t=this.cache?this.loadTreatmentsFromCache(e):this.getTreatmentsOrFallbackToDefaultValues(e);var n={};return t.then((function(e){return e.forEach((function(e){n[e.weblabId]=e})),n}))},e.prototype.triggerWeblab=function(e,t){var n,r,i=this;if(!(null===(n=t)||void 0===n?void 0:n.treatmentValue)||(null===(r=t)||void 0===r?void 0:r.assignmentMissing))return o.default.resolve();var s=new a.Metric.TimedAttempt("RecordTrigger.Promise").withMonitor();return this.weblabProxy.recordTrigger(e,t.treatmentValue).then((function(){s.setSuccess(),i.publishMetricsIfExists((function(e){return e.publish(s)}))})).catch((function(e){throw s.setFailure(),i.publishMetricsIfExists((function(e){return e.publish(s)})),e}))},e.prototype.loadTreatmentsFromCache=function(e){var t=this;return new o.default((function(n){var r=t.getTreatmentsFromCache(e),i=r.foundTreatments;if(!r.missingTreatments.length)return t.publishMetricsIfExists((function(e){e.publishCounterMonitor("TreatmentsCacheHit",1)})),void n(i);t.publishMetricsIfExists((function(e){e.publishCounterMonitor("TreatmentsCacheHit",0)})),t.getTreatmentsOrFallbackToDefaultValues(e).then((function(e){n(e)}))}))},e.prototype.getTreatmentsFromCache=function(e){var t=this,n=[],r=[],i=l.readWeblabCookie();return e.forEach((function(e){var o=e.id in i?void 0:t.cache.getTreatment(e.id);o?n.push(t.convertCachableTreatmentToTreatment(e,o)):r.push(t.convertWeblabToDefaultTreatment(e))})),{foundTreatments:n,missingTreatments:r}},e.prototype.publishMetricsIfExists=function(e){this.metricsPublisher&&e(this.metricsPublisher)},e.prototype.convertCachableTreatmentToTreatment=function(e,t){var n=this;return r(r({},t),{recordTrigger:function(){return n.triggerWeblab(e,t)}})},e.prototype.getTreatmentsOrFallbackToDefaultValues=function(e){var t=this,n=new a.Metric.TimedAttempt("GetTreatments.Promise").withMonitor();return this.weblabProxy.getTreatments(e).then((function(e){n.setSuccess(),t.publishMetricsIfExists((function(e){e.publish(n)}));var r=[];return e.forEach((function(e){r.push(e)})),t.updateCache(e),r})).catch((function(r){return n.setFailure(),t.publishMetricsIfExists((function(e){e.publish(n)})),t.errorHandler(r),e.map((function(e){return t.convertWeblabToDefaultTreatment(e)}))}))},e.prototype.convertWeblabToDefaultTreatment=function(e){return this.convertCachableTreatmentToTreatment(e,{treatmentValue:e.defaultTreatment,weblabId:e.id})},e.prototype.updateCache=function(e){var t=this;this.cache&&e.forEach((function(e,n){t.cache.addTreatment(e,n)}))},e}();t.KatalWeblabClient=f},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(290),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(130))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,u=1,l={},c=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,r(u),u++},d.clearImmediate=h}function h(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(130),n(131))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e){e.String="String",e.Counter="Counter",e.Timer="Timer",e.List="List"}(r||(r={}));var i=r;t.default=i},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=r(n(30)),s=r(n(31)),u=r(n(26)),l=r(n(294)),c=r(n(295));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var d=function(e){(0,a.default)(n,e);var t=f(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).namedMetrics={},r}return(0,o.default)(n,[{key:"metricList",get:function(){return(0,c.default)(this.namedMetrics)}},{key:"setNamedMetric",value:function(e,t){var n=t(this.getNameForSubMetric(e));n.canMonitor&&(n.isMonitor=this.isMonitor),this.namedMetrics[e]=n}},{key:"setOrDeleteNamedMetricValue",value:function(e,t,n){null==n?this.deleteNamedMetric(e):this.getOrCreateNamedMetric(e,(function(e){return new t(e,n)})).value=n}},{key:"getOrCreateNamedMetric",value:function(e,t){return this.namedMetrics[e]||this.setNamedMetric(e,t),this.namedMetrics[e]}},{key:"getNamedMetric",value:function(e){return this.namedMetrics[e]}},{key:"deleteNamedMetric",value:function(e){delete this.namedMetrics[e]}},{key:"getNamedMetricValue",value:function(e){var t=this.getNamedMetric(e);if(t)return t.value}},{key:"getNameForSubMetric",value:function(e){return"".concat(this.name,".").concat(e)}}]),n}(l.default);t.default=d},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=r(n(48)),s=r(n(142)),u=r(n(30)),l=r(n(31)),c=r(n(26)),f=r(n(47)),d=r(n(69));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,u.default)(n,e);var t=h(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"metricList",get:function(){throw new Error("Subclass of KatalMetricObjectList must implement metricList getter")}},{key:"isMonitor",get:function(){return(0,a.default)((0,c.default)(n.prototype),"isMonitor",this)},set:function(e){(0,s.default)((0,c.default)(n.prototype),"isMonitor",e,this,!0),this.metricList.forEach((function(t){t.canMonitor&&(t.isMonitor=e)}))}},{key:"canMonitor",get:function(){return!0}},{key:"type",get:function(){return f.default.Types.List}},{key:"validationError",value:function(){return(0,d.default)(this.metricList,(function(e){return e.validationError()}))}}]),n}(f.default);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.values?Object.values:function(e){return Object.keys(e).map((function(t){return e[t]}))};t.default=r},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(30)),a=r(n(31)),s=r(n(26)),u=r(n(34));function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var c=function(e){(0,o.default)(n,e);var t=l(n);function n(){return(0,i.default)(this,n),t.call(this,n.INITIALIZE_METRIC_NAME)}return n}(r(n(68)).default);t.default=c,(0,u.default)(c,"INITIALIZE_METRIC_NAME","Initialization")},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=r(n(30)),s=r(n(31)),u=r(n(26)),l=r(n(34)),c=r(n(68)),f=r(n(135));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var h=function(e){(0,a.default)(n,e);var t=d(n);function n(e){return(0,i.default)(this,n),t.call(this,"".concat(n.HTTP_REQUEST_PREFIX,".").concat(e))}return(0,o.default)(n,[{key:"url",get:function(){return this.getNamedMetricValue(n.URL_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.URL_SUFFIX,f.default,e)}},{key:"urlMetric",get:function(){return this.getNamedMetric(n.URL_SUFFIX)}},{key:"statusCode",get:function(){return this.getNamedMetricValue(n.STATUS_CODE_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.STATUS_CODE_SUFFIX,f.default,e)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(n.STATUS_CODE_SUFFIX)}},{key:"statusText",get:function(){return this.getNamedMetricValue(n.STATUS_TEXT_SUFFIX)},set:function(e){this.setOrDeleteNamedMetricValue(n.STATUS_TEXT_SUFFIX,f.default,e)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(n.STATUS_TEXT_SUFFIX)}}]),n}(c.default);t.default=h,(0,l.default)(h,"HTTP_REQUEST_PREFIX","HTTPRequest"),(0,l.default)(h,"URL_SUFFIX","URL"),(0,l.default)(h,"STATUS_CODE_SUFFIX","StatusCode"),(0,l.default)(h,"STATUS_TEXT_SUFFIX","StatusText")},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=r(n(34)),s=r(n(299)),u=r(n(143)),l=n(133),c=n(144),f=n(308),d=n(146),h=function(e){console.error("Error publishing metrics:"),console.error(e)},p=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new u.default;if((0,i.default)(this,e),(0,a.default)(this,"combinedErrorHandler",(function(e){try{n.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t),h(e)}})),o instanceof u.default.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");this.driver=t,this.errorHandler=r,this.context=o instanceof u.default?o:new u.default(o)}return(0,o.default)(e,[{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"getAdditionalRelatedMetrics",value:function(e){var t=e instanceof u.default?e.context:e,n=this.getBaseRelatedMetrics();return(0,c.mergeLists)(n,t.relatedMetrics)}},{key:"getBaseRelatedMetrics",value:function(){return(0,c.mergeLists)(this.context.context.relatedMetrics,this.context.context.relatedMetricsSingleAction)}},{key:"publish",value:function(e){var t=this;this.withErrorHandling((function(){if(!e)throw new Error("Cannot publish undefined/null metric object");if(l.Object.Types.List===e.type)e.metricList.forEach((function(e){t.publish(e)}));else{var n=t.context.driverContext(),r=n.validationError();if(r)throw r;var i=e.validationError();if(i)throw i;(0,f.dispatchMetricEvent)(e,n),t.driver.publish(e,n)}}))}},{key:"newChildPublisher",value:function(t){return new e(this.driver,this.errorHandler,this.context.merge(t))}},{key:"newChildActionPublisher",value:function(t){var n=this._generateActionid(t),r=this.context.withoutRelatedMetricsSingleAction().merge({actionId:n}).merge(t),i=new e(this.driver,this.errorHandler,r),o=!t||t instanceof u.default.Builder?this.getBaseRelatedMetrics():this.getAdditionalRelatedMetrics(t);return o&&o.forEach((function(e){i.publish(e)})),i}},{key:"newChildActionPublisherChained",value:function(e){var t=this._generateActionid(e),n=(0,d.embedRequestId)(t,this.context.context.requestId),r=[new l.String("parentActionId",n)],i=new u.default({actionId:t,relatedMetricsSingleAction:r}).merge(e);return this.newChildActionPublisher(i)}},{key:"newChildActionPublisherChainedForMethod",value:function(e,t){return this.newChildActionPublisherChained(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForMethod",value:function(e,t){return this.newChildActionPublisher(new u.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForInitialization",value:function(e){return this.newChildActionPublisherForMethod("Initialization",e)}},{key:"publishString",value:function(e,t){this.publish(new l.String(e,t))}},{key:"publishStringTruncate",value:function(e,t){var n=new l.String(e,t);n.truncate=!0,this.publish(n)}},{key:"publishCounter",value:function(e,t){this.publish(new l.Counter(e,t))}},{key:"publishTimer",value:function(e,t){this.publish(new l.Timer(e,t))}},{key:"publishCounterMonitor",value:function(e,t){this.publish(new l.Counter(e,t).withMonitor())}},{key:"publishTimerMonitor",value:function(e,t){this.publish(new l.Timer(e,t).withMonitor())}},{key:"_generateActionid",value:function(e){if(e){var t=function(e){return e.context?e.context:e}(e);if(t.actionId)return t.actionId}return(0,s.default)()}}]),e}();t.default=p},function(e,t,n){var r=n(300),i=n(301);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e,(function(e){return function(e,t){if(e.length>s)return new Error("Expected Dimension name for value ".concat(t," to be ").concat(s," characters or less, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected Dimension name for value ".concat(t," to be non-blank"));if(!o.test(e))return new Error("Expected Dimension name for value ".concat(t," to contain only ASCII characters, but it was ").concat(e));if(!a.test(e))return new Error("Expected Dimension name for value ".concat(t," to contain at least one non whitespace character, but it was ").concat(e));if(e.startsWith(":"))return new Error("Expected Dimension name for value ".concat(t,' to not start with a colon (":"), but it was ').concat(e));if(t.length>u)return new Error("Expected Dimension value for name ".concat(e," to be ").concat(u," characters or less, but it was ").concat(t.length," characters"));if(t.length<1)return new Error("Expected Dimension value for name ".concat(e," to be non-blank"));if(!o.test(t))return new Error("Expected Dimension value for name ".concat(e," to contain only ASCII characters, but it was ").concat(t));if(!a.test(t))return new Error("Expected Dimension value for name ".concat(e," to contain at least one non whitespace character, but it was ").concat(t,"}"))}(e.name,e.value)}))};var i=r(n(69)),o=/^[\x20-\x7E]+$/,a=/^.*\S+.*$/,s=255,u=1024},function(e,t,n){var r=n(304),i=n(305),o=n(306),a=n(307);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(145);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(145);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchMetricEvent=function(e,t){if("undefined"==typeof window)return;(function(e,t){if("function"!=typeof CustomEvent)return;var n=new CustomEvent("katal.metrics.publish",{detail:{metric:e,context:t.getFields()}});window.dispatchEvent(n)})(e,t),function(e,t){var n=window.__KATAL_METRICS_EXTENSION__;n&&n.publish(e,t.getFields())}(e,t)}},function(e,t,n){"use strict";var r=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(13)),o=r(n(16)),a=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"publish",value:function(e,t){throw new Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead")}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR_HANDLER=void 0;t.DEFAULT_ERROR_HANDLER=function(e){throw e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(132),i=function(){function e(e,t,n,r,i){this.treatmentCache=e,this.cacheSettings=t,this.client=n,this.errorHandler=r,this.publisher=i}return e.prototype.run=function(){var e=this,t=1e3*this.cacheSettings.cacheRefreshRateSeconds;setInterval((function(){var t=e.treatmentCache.getCachedWeblabs();if(t.length){var n=new r.Metric.TimedAttempt("GetTreatments").withMonitor();e.client.getTreatments(t).then((function(t){n.setSuccess(),e.publishMetricsIfExists((function(e){e.publish(n)}));var r=[];t.forEach((function(t,n){var i=e.treatmentCache.getTreatment(n.id);i&&i.treatmentValue===t.treatmentValue||(e.treatmentCache.addTreatment(t,n),r.push(t))})),e.cacheSettings.cacheListener&&r.length>0&&e.cacheSettings.cacheListener(r)})).catch((function(t){n.setFailure(),e.publishMetricsIfExists((function(e){e.publish(n)})),e.errorHandler(t)}))}}),t)},e.prototype.publishMetricsIfExists=function(e){this.publisher&&e(this.publisher)},e}();t.CacheRefresher=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR_HANDLER=function(){}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});function i(e){return e?e.replace(/["']/g,"").split("&").reduce((function(e,t){var n,i=t.split(":"),o=i[0],a=i[1];return o&&a?r(r({},e),((n={})[o.trim()]=a.trim(),n)):e}),{}):{}}function o(e){if("undefined"!=typeof document&&void 0!==document.cookie){var t=document.cookie.match("(^|[^;]+)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():void 0}}t.parseWeblabCookie=i,t.readWeblabCookie=function(){var e=o("experiment");return e?i(e):{}},t.readCookie=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(316);t.BrowserStorageCache=r.BrowserStorageCache},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.applicationName=e,this.ttl=t,this.namespace=n,this.cacheKey="Weblabs."+this.applicationName+(this.namespace?"."+this.namespace:"")}return e.prototype.getCachedWeblabs=function(){var e=this,t=[],n=this.getCachedData(),r=!1;return Object.keys(n.treatmentMap).forEach((function(i){var o=n.treatmentMap[i];e.isExpired(o)?(r=!0,delete n.treatmentMap[i]):t.push(o.weblab)})),r&&this.writeCachedData(n),t},e.prototype.getTreatment=function(e){var t=this.getCachedData().treatmentMap[e];if(t&&!this.isExpired(t))return t.treatment},e.prototype.addTreatment=function(e,t){var n=e.weblabId,r=this.getCachedData(),i=this.getExpirationTime();r.treatmentMap[n]={treatment:e,weblab:t,expirationTime:i},this.writeCachedData(r)},e.prototype.hasTreatment=function(e){var t=this.getCachedData(),n=t.treatmentMap[e];return null!=t.treatmentMap[e]&&!this.isExpired(n)},e.prototype.clearTreatment=function(e){var t=this.getCachedData();t.treatmentMap[e]&&(delete t.treatmentMap[e],this.writeCachedData(t))},e.prototype.clearAllTreatments=function(){sessionStorage.removeItem(this.cacheKey)},e.prototype.getExpirationTime=function(){var e=1e3*this.ttl;return(new Date).getTime()+e},e.prototype.isExpired=function(e){var t=(new Date).getTime();return e.expirationTime<=t},e.prototype.getCachedData=function(){var e=sessionStorage.getItem(this.cacheKey);return e?JSON.parse(e):{treatmentMap:{}}},e.prototype.writeCachedData=function(e){var t=JSON.stringify(e);sessionStorage.setItem(this.cacheKey,t)},e}();t.BrowserStorageCache=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(129)),o=function(){function e(e){this.treamentSettings=e}return e.prototype.setMetricsPublisher=function(){},e.prototype.getTreatments=function(e){var t=this,n=new Map;return e.forEach((function(e){var r=t.treamentSettings[e.id];n.set(e,{weblabId:e.id,treatmentValue:r,recordTrigger:function(){return t.recordTrigger(e,r)}})})),i.default.resolve(n)},e.prototype.recordTrigger=function(e,t){return i.default.resolve()},e}();t.TestWeblabClient=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WeblabRulesAsyncResolverImpl=t.WeblabRulesResolverImpl=t.WeblabContext=void 0;var i=n(319);Object.defineProperty(t,"WeblabContext",{enumerable:!0,get:function(){return r(i).default}});var o=n(320);Object.defineProperty(t,"WeblabRulesResolverImpl",{enumerable:!0,get:function(){return r(o).default}});var a=n(325);Object.defineProperty(t,"WeblabRulesAsyncResolverImpl",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WeblabContext=void 0;var r=function(e){void 0===e&&(e={}),this.marketplaceId=e.marketplaceId,this.sessionId=e.sessionId,this.customerId=e.customerId};t.WeblabContext=r,t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resolve=function(e,t,n){var r;if(!this.validateInput(t,n))return e;var i=this.getWeblabTreatments(this.getDistinctWeblabNames(n),t);return null!==(r=this.findMatchingValue(n,i))&&void 0!==r?r:e},t.prototype.getWeblabTreatments=function(e,t){var n=this,r=void 0!==t;return new Map(Array.from(e,(function(e){return[e,r?n.weblabWithContextTreatmentResolver.getTreatment(e,t):n.weblabTreatmentResolver.getTreatment(e)]})))},t}(o(n(147)).default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientStage=t.WeblabRuleOperator=t.ACSClientError=void 0;var i=n(322);Object.defineProperty(t,"ACSClientError",{enumerable:!0,get:function(){return r(i).default}});var o=n(323);Object.defineProperty(t,"WeblabRuleOperator",{enumerable:!0,get:function(){return r(o).default}});var a=n(324);Object.defineProperty(t,"ClientStage",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AND="AND",e.OR="OR"}(r||(r={})),t.default=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SANDBOX="SANDBOX",e.DEVO="DEVO",e.PROD="PROD"}(r||(r={})),t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resolve=function(e,t,n){var r;return o(this,void 0,void 0,(function(){var i;return a(this,(function(o){switch(o.label){case 0:return this.validateInput(t,n)?[4,this.getWeblabTreatments(this.getDistinctWeblabNames(n),t)]:[2,e];case 1:return i=o.sent(),[2,null!==(r=this.findMatchingValue(n,i))&&void 0!==r?r:e]}}))}))},t.prototype.getWeblabTreatments=function(e,t){return void 0!==t?this.weblabWithContextTreatmentResolver.getTreatments(e,t):this.weblabTreatmentResolver.getTreatments(e)},t}(s(n(147)).default);t.default=u},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientStage=t.WeblabRuleOperator=t.ACSClientError=void 0;var i=n(327);Object.defineProperty(t,"ACSClientError",{enumerable:!0,get:function(){return r(i).default}});var o=n(328);Object.defineProperty(t,"WeblabRuleOperator",{enumerable:!0,get:function(){return r(o).default}});var a=n(329);Object.defineProperty(t,"ClientStage",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AND="AND",e.OR="OR"}(r||(r={})),t.default=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SANDBOX="SANDBOX",e.DEVO="DEVO",e.PROD="PROD"}(r||(r={})),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(331),i=n(337),o=function(){function e(){this.interceptors=[]}return e.prototype.addInterceptor=function(e){return this.interceptors.push(e),this},e.prototype.getInterceptors=function(){return this.interceptors},e.prototype.setQueryContextProvider=function(e){return this.queryContextProvider=e,this},e.prototype.setWeblabContextProvider=function(e){return this.weblabContextProvider=e,this},e.prototype.createConfigSet=function(e){return new r.ConfigSetImpl(e,this.interceptors,this.queryContextProvider,this.weblabContextProvider)},e.prototype.createAsyncConfigSet=function(e){return new i.ConfigSetImplAsync(e,this.interceptors,this.queryContextProvider,this.weblabContextProvider)},e}();t.default=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigSetImpl=void 0;var a=o(n(54)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getBoolean=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getString=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getInteger=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getList=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getObject=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.listBoolean=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listInteger=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listList=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listObject=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listString=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t}(n(148).AbstractConfigSetImpl);t.ConfigSetImpl=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(333)),s=o(n(54)),u=function(e){function t(t,n){var r=e.call(this)||this;return r.queryContextProvider=t,r.weblabContextProvider=n,r}return i(t,e),t.prototype.after=function(){},t.prototype.before=function(e){var t,n,r;e.queryContext=function(e,t){var n;if(!t)return null!=e?e:new s.default;var r=null!==(n=null==e?void 0:e.getContextEntries())&&void 0!==n?n:new Map,i=t.getContextEntries(),o=new Map;return r.forEach((function(e,t){o.set(t,e)})),i.forEach((function(e,t){o.set(t,e)})),new s.default(o)}(null===(t=this.queryContextProvider)||void 0===t?void 0:t.get(),e.queryContext),e.weblabContext=(r=null===(n=this.weblabContextProvider)||void 0===n?void 0:n.get(),e.weblabContext||r)},t}(a.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.intercept=function(e,t){this.before(e);var n=t.proceed(e);return this.after(e,n),n},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.interceptor=t,this.next=e}return e.create=function(t){t||(t=[]);var n=e.END_OF_CHAIN;return t.reverse().forEach((function(t){n=new e(n,t)})),n},e.prototype.proceed=function(e){return this.isEndOfChain()?e.executeTarget():this.interceptor.intercept(e,this.next)},e.prototype.isEndOfChain=function(){return this===e.END_OF_CHAIN||!this.interceptor||!this.next},e.END_OF_CHAIN=new e,e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(336)),o=function(){function e(e,t){this.target=e,this.interceptorChain=t}return e.prototype.intercept=function(e,t,n){var r=new i.default(this.target,e,t,n);return this.interceptorChain.proceed(r)},e.prototype.getValue=function(e,t,n){return this.intercept(e,t,n)},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){this.target=e,this.key=t,this.queryContext=n,this.weblabContext=r}return e.prototype.executeTarget=function(){return this.target.getValue(this.key,this.queryContext,this.weblabContext)},e}();t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigSetImplAsync=void 0;var a=o(n(54)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getBoolean=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getString=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getInteger=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getList=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getObject=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.listBoolean=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listInteger=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listList=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listObject=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listString=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t}(n(148).AbstractConfigSetImpl);t.ConfigSetImplAsync=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(49),s=o(n(339)),u=o(n(149)),l=o(n(348)),c=o(n(351)),f=o(n(352)),d=o(n(370)),h=function(e){function t(){var t=e.call(this)||this;return t.configStorage=new c.default,t}return i(t,e),t.prototype.createClient=function(e,t){var n;void 0===t&&(t={});var r=this.createConfigStore(e,null!==(n=t.offlineClientSettings)&&void 0!==n?n:new u.default,t.configFiles),i=this.createConfigSet(r);return e.createTypeSafeClient(i)},t.prototype.createUntypedClient=function(e,t){var n;void 0===t&&(t={});var r=this.createConfigStore(e,null!==(n=t.offlineClientSettings)&&void 0!==n?n:new u.default,t.configFiles);return this.createConfigSet(r)},t.prototype.createConfigStore=function(e,t,n){var r=this;return new s.default(this.configStorage.computeIfAbsent(e.TABLE_NAME,t.getStage(),(function(){return r.getFeatureStorage(e,t.getStage(),n)})),e.CONTEXTUAL_PARAMETERS,t.getWeblabRulesResolver())},t.prototype.getFeatureStorage=function(e,t,n){return n||("undefined"!=typeof window&&void 0!==window.document&&console.warn("Please manually specify the offline configuration files if 'fs' node module is not supported in your application."),n=(new l.default).load(d.default[t]+e.TABLE_NAME)),(new f.default).parse(e,n)},t}(a.ConfigManager);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.featureStorage=e,this.contextualParameterNames=t,this.weblabRulesResolver=n}return e.prototype.executeQuery=function(e,t,n){var r=function(e,t){var n=new Map;return e.getContextEntries().forEach((function(e,r){t.includes(r)&&n.set(r,e)})),n}(t,this.contextualParameterNames),i=this.featureStorage.getRecord({contextualParameters:r,attributeName:e});return i?this.weblabRulesResolver.resolve(i.attributeValue,n,i.weblabRules):null},e.prototype.getValue=function(e,t,n){return this.executeQuery(e,t,n)},e.prototype.listValues=function(e,t,n){throw new Error("Please update the package to version 2 to be able to use the listing capability.")},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WeblabRulesAsyncResolverImpl=t.WeblabRulesResolverImpl=t.WeblabContext=void 0;var i=n(341);Object.defineProperty(t,"WeblabContext",{enumerable:!0,get:function(){return r(i).default}});var o=n(342);Object.defineProperty(t,"WeblabRulesResolverImpl",{enumerable:!0,get:function(){return r(o).default}});var a=n(347);Object.defineProperty(t,"WeblabRulesAsyncResolverImpl",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WeblabContext=void 0;var r=function(e){void 0===e&&(e={}),this.marketplaceId=e.marketplaceId,this.sessionId=e.sessionId,this.customerId=e.customerId};t.WeblabContext=r,t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resolve=function(e,t,n){var r;if(!this.validateInput(t,n))return e;var i=this.getWeblabTreatments(this.getDistinctWeblabNames(n),t);return null!==(r=this.findMatchingValue(n,i))&&void 0!==r?r:e},t.prototype.getWeblabTreatments=function(e,t){var n=this,r=void 0!==t;return new Map(Array.from(e,(function(e){return[e,r?n.weblabWithContextTreatmentResolver.getTreatment(e,t):n.weblabTreatmentResolver.getTreatment(e)]})))},t}(o(n(150)).default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientStage=t.WeblabRuleOperator=t.ACSClientError=void 0;var i=n(344);Object.defineProperty(t,"ACSClientError",{enumerable:!0,get:function(){return r(i).default}});var o=n(345);Object.defineProperty(t,"WeblabRuleOperator",{enumerable:!0,get:function(){return r(o).default}});var a=n(346);Object.defineProperty(t,"ClientStage",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AND="AND",e.OR="OR"}(r||(r={})),t.default=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SANDBOX="SANDBOX",e.DEVO="DEVO",e.PROD="PROD"}(r||(r={})),t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resolve=function(e,t,n){var r;return o(this,void 0,void 0,(function(){var i;return a(this,(function(o){switch(o.label){case 0:return this.validateInput(t,n)?[4,this.getWeblabTreatments(this.getDistinctWeblabNames(n),t)]:[2,e];case 1:return i=o.sent(),[2,null!==(r=this.findMatchingValue(n,i))&&void 0!==r?r:e]}}))}))},t.prototype.getWeblabTreatments=function(e,t){return void 0!==t?this.weblabWithContextTreatmentResolver.getTreatments(e,t):this.weblabTreatmentResolver.getTreatments(e)},t}(s(n(150)).default);t.default=u},function(e,t,n){"use strict";(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(349),o=r(n(350)),a=function(){function t(){this.EXACT_QUERIES_FILE="queries.json",this.HIERARCHICAL_QUERIES_FILE="hierarchical_queries.json",this.DOCUMENTS_FILE="documents.json"}return t.prototype.load=function(e){return{documents:this.getDocuments(e),exactQueries:this.getExactQueries(e),hierarchicalFallbackQueries:this.getHierarchicalFallbackQueries(e)}},t.prototype.getDocuments=function(e){return this.getJsonFile(this.getConfigurationPath(e,this.DOCUMENTS_FILE)).documents},t.prototype.getExactQueries=function(e){return this.getJsonFile(this.getConfigurationPath(e,this.EXACT_QUERIES_FILE)).queries},t.prototype.getHierarchicalFallbackQueries=function(e){var t=this.getJsonFile(this.getConfigurationPath(e,this.HIERARCHICAL_QUERIES_FILE),!1);return null==t?void 0:t.queries},t.prototype.getConfigurationPath=function(e,t){return"".concat(e,"/").concat(t)},t.prototype.getJsonFile=function(t,n){void 0===n&&(n=!0);try{return JSON.parse((0,i.readFileSync)(o.default.join(e,"../configuration/".concat(t)),{encoding:"utf-8"}))}catch(r){if(n)throw r}},t}();t.default=a}).call(this,"/")},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(131))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=function(){function e(){var e;this.FEATURE_STORAGES=((e={})[r.ClientStage.SANDBOX]=new Map,e[r.ClientStage.DEVO]=new Map,e[r.ClientStage.PROD]=new Map,e)}return e.prototype.computeIfAbsent=function(e,t,n){return void 0===this.FEATURE_STORAGES[t].get(e)&&this.FEATURE_STORAGES[t].set(e,n()),this.FEATURE_STORAGES[t].get(e)},e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),a=n(364),s=n(368),u=n(172),l=i(n(369)),c=function(){function e(){this.ATTRIBUTE_NAME="attribute_name"}return e.prototype.parse=function(e,t){var n,i=this,o=this.getDocumentMap(t.documents),a=this.getFeatureRecordMap(t.exactQueries,o),s=r(r([],t.exactQueries,!0),null!==(n=null==t?void 0:t.hierarchicalFallbackQueries)&&void 0!==n?n:[],!0).reduce((function(t,n){var r=i.getOrderedContextualParameters(e.CONTEXTUAL_PARAMETERS,n.keys);return n.sequenceIds.forEach((function(e){var n=a.get(e),i={contextualParameters:r,attributeName:n.attributeName};t.set((0,u.stringifyFeatureContext)(i),n)})),t}),new Map);return new l.default(s)},e.prototype.getDocumentMap=function(e){return e.reduce((function(e,t){return e.set(t.sequenceId,t)}),new Map)},e.prototype.getFeatureRecordMap=function(e,t){var n=this;return e.reduce((function(e,r){var i=n.getFeatureRecord(n.getSequenceId(r.sequenceIds),t,r.keys[n.ATTRIBUTE_NAME]);return e.set(n.getSequenceId(r.sequenceIds),i)}),new Map)},e.prototype.getSequenceId=function(e){if(1!==e.length)throw new a.ACSClientError("This query is not an exact query (more than one sequence id).");return e[0]},e.prototype.getOrderedContextualParameters=function(e,t){return e.reduce((function(e,n){return e.set(n,t[n])}),new Map)},e.prototype.getFeatureRecord=function(e,t,n){var r,i;if(void 0===t.get(e))throw new a.ACSClientError("No record exist for sequence Id ".concat(e));var u=t.get(e);return{attributeName:n,attributeValue:(0,s.ionValueToJsObject)((0,o.load)(u.attributeValue)),weblabRules:null!==(i=null===(r=u.weblabRules)||void 0===r?void 0:r.map((function(e){return{operands:e.operands,operator:e.operator,use:(0,s.ionValueToJsObject)((0,o.load)(e.use))}})))&&void 0!==i?i:[]}},e}();t.default=c},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ParserBinaryRaw=void 0;const s=a(n(17)),u=o(n(354)),l=n(55),c=n(56),f=n(57),d=n(14),h=n(42),p=n(75),_=n(32),g=a(n(355));function v(e){return e>>u.TYPE_SHIFT&u.NIBBLE_MASK}const y=[],m=l.IVM.sid,b=(l.IVM.binary[0],l.IVM.binary[1]),w=l.IVM.binary[2],S=l.IVM.binary[3];class T{constructor(e,t){this.type=e,this.length=t}}class C{constructor(e){this._raw_type=-1,this._len=-1,this._curr=void 0,this._null=!1,this._fid=null,this._as=-1,this._ae=-1,this._a=[],this._ts=[new T(20,0)],this._in_struct=!1,this._in=e}static _readFloatFrom(e,t){let n;switch(t){case 0:return 0;case 4:return n=new DataView(e.chunk(4).buffer),n.getFloat32(0,!1);case 8:return n=new DataView(e.chunk(8).buffer),n.getFloat64(0,!1);case 15:return null;default:throw new Error("Illegal float length: "+t)}}static _readVarUnsignedIntFrom(e){let t,n=0,r=0;for(;t=e.next(),r=r<<7|127&t,n+=7,!(128&t););if(n>31)throw new Error("VarUInt values larger than 31 bits must be read using SignAndMagnitudeInt.");return r}static _readVarSignedIntFrom(e){let t,n=e.next();const r=64&n;let i=128&n;n&=63;let o=6;for(;!i;)t=e.next(),i=128&t,t&=127,n<<=7,n|=t,o+=7;if(o>32)throw new Error("VarInt values larger than 32 bits must be read using SignAndMagnitudeInt");return r?-n:n}static _readSignedIntFrom(e,t){if(0==t)return new g.default(_.JsbiSupport.ZERO);const n=e.view(t),r=128==(128&n[0]),i=Array.prototype.slice.call(n);i[0]=127&n[0];const o=p.JsbiSerde.fromUnsignedBytes(i);return new g.default(o,r)}static _readUnsignedIntAsBigIntFrom(e,t){return p.JsbiSerde.fromUnsignedBytes(Array.prototype.slice.call(e.view(t)))}static _readUnsignedIntAsNumberFrom(e,t){let n=0,r=0;const i=e.getRemaining();let o;if(t<1)return 0;if(t>6)throw new Error(`Attempted to read a ${t}-byte unsigned integer, which is too large for a to be stored in a number without losing precision.`);if(i<t)throw new Error(`Attempted to read a ${t}-byte unsigned integer, but only ${i} bytes were available.`);for(;r<t;)o=e.next(),r++,t<4?n<<=8:n*=256,n+=o;return n}static readDecimalValueFrom(e,t){const n=e.position(),r=C._readVarSignedIntFrom(e),i=t-(e.position()-n),o=C._readSignedIntFrom(e,i),a=o.isNegative,u=a?s.default.unaryMinus(o.magnitude):o.magnitude;return c.Decimal._fromBigIntCoefficient(a,u,r)}source(){return this._in}next(){return void 0===this._curr&&this._len>0&&this._in.skip(this._len),this.clear_value(),this._in_struct&&(this._fid=this.readVarUnsignedInt()),this.load_next()}stepIn(){let e,t;const n=this;switch(n._raw_type){case u.TB_STRUCT:case u.TB_LIST:case u.TB_SEXP:break;default:throw new Error("you can only 'stepIn' to a container")}e=n._in.getRemaining()-n._len,t=new T(n._raw_type,e),n._ts.push(t),n._in_struct=n._raw_type===u.TB_STRUCT,n._in.setRemaining(n._len),n.clear_value()}stepOut(){let e,t,n,r;const i=this;if(i._ts.length<2)throw new Error("Cannot stepOut any further, already at top level");t=i._ts.pop(),n=t.length,e=i._ts[i._ts.length-1].type,i._in_struct=e===u.TB_STRUCT,i.clear_value(),r=i._in.getRemaining(),i._in.skip(r),i._in.setRemaining(n)}isNull(){return this._null}depth(){return this._ts.length-1}getFieldId(){return this._fid}hasAnnotations(){return this._as>=0}getAnnotations(){const e=this;return void 0!==e._a&&0!==e._a.length||e.load_annotation_values(),e._a}getAnnotation(e){const t=this;return void 0!==t._a&&0!==t._a.length||t.load_annotation_values(),t._a[e]}ionType(){return function(e){switch(e){case u.TB_NULL:return d.IonTypes.NULL;case u.TB_BOOL:return d.IonTypes.BOOL;case u.TB_INT:case u.TB_NEG_INT:return d.IonTypes.INT;case u.TB_FLOAT:return d.IonTypes.FLOAT;case u.TB_DECIMAL:return d.IonTypes.DECIMAL;case u.TB_TIMESTAMP:return d.IonTypes.TIMESTAMP;case u.TB_SYMBOL:return d.IonTypes.SYMBOL;case u.TB_STRING:return d.IonTypes.STRING;case u.TB_CLOB:return d.IonTypes.CLOB;case u.TB_BLOB:return d.IonTypes.BLOB;case u.TB_SEXP:return d.IonTypes.SEXP;case u.TB_LIST:return d.IonTypes.LIST;case u.TB_STRUCT:return d.IonTypes.STRUCT;default:throw new Error("Unrecognized type code "+e)}}(this._raw_type)}_getSid(){return this.load_value(),this._raw_type==u.TB_SYMBOL?void 0===this._curr||null===this._curr?null:this._curr:null}byteValue(){return this.uInt8ArrayValue()}uInt8ArrayValue(){switch(this._raw_type){case u.TB_NULL:return null;case u.TB_CLOB:case u.TB_BLOB:return this.isNull()?null:(this.load_value(),this._curr);default:throw new Error("Current value is not a blob or clob.")}}booleanValue(){switch(this._raw_type){case u.TB_NULL:return null;case u.TB_BOOL:return this.isNull()?null:this._curr}throw new Error("Current value is not a Boolean.")}decimalValue(){switch(this._raw_type){case u.TB_NULL:return null;case u.TB_DECIMAL:return this.isNull()?null:(this.load_value(),this._curr)}throw new Error("Current value is not a decimal.")}bigIntValue(){switch(this._raw_type){case u.TB_NULL:return null;case u.TB_INT:case u.TB_NEG_INT:if(this.isNull())return null;if(this.load_value(),!(this._curr instanceof s.default)){const e=this._curr;return s.default.BigInt(e)}return this._curr;default:throw new Error("bigIntValue() was called when the current value was not an int.")}}numberValue(){switch(this._raw_type){case u.TB_NULL:return null;case u.TB_INT:case u.TB_NEG_INT:if(this.isNull())return null;if(this.load_value(),this._curr instanceof s.default){const e=this._curr;return s.default.toNumber(e)}return this._curr;case u.TB_FLOAT:return this.isNull()?null:(this.load_value(),this._curr);default:throw new Error("Current value is not a float or int.")}}stringValue(){switch(this._raw_type){case u.TB_NULL:return null;case u.TB_STRING:case u.TB_SYMBOL:return this.isNull()?null:(this.load_value(),this._curr)}throw new Error("Current value is not a string or symbol.")}timestampValue(){switch(this._raw_type){case u.TB_NULL:return null;case u.TB_TIMESTAMP:return this.isNull()?null:(this.load_value(),this._curr)}throw new Error("Current value is not a timestamp.")}read_binary_float(){return C._readFloatFrom(this._in,this._len)}readVarUnsignedInt(){return C._readVarUnsignedIntFrom(this._in)}readVarSignedInt(){return C._readVarSignedIntFrom(this._in)}readUnsignedIntAsBigInt(){return C._readUnsignedIntAsBigIntFrom(this._in,this._len)}readUnsignedIntAsNumber(){return C._readUnsignedIntAsNumberFrom(this._in,this._len)}read_decimal_value(){return C.readDecimalValueFrom(this._in,this._len)}read_timestamp_value(){if(!(this._len>0))return null;let e,t,n=null,r=null,i=null,o=null,a=null,s=c.Decimal.ZERO,u=f.TimestampPrecision.YEAR;const l=this._in.position()+this._len;if(e=this.readVarSignedInt(),!(this._in.position()<l))throw new Error("Timestamps must include a year.");if(t=this.readVarUnsignedInt(),this._in.position()<l&&(n=this.readVarUnsignedInt(),u=f.TimestampPrecision.MONTH),this._in.position()<l&&(r=this.readVarUnsignedInt(),u=f.TimestampPrecision.DAY),this._in.position()<l){if(i=this.readVarUnsignedInt(),this._in.position()>=l)throw new Error("Timestamps with an hour must include a minute.");o=this.readVarUnsignedInt(),u=f.TimestampPrecision.HOUR_AND_MINUTE}if(this._in.position()<l&&(a=this.readVarUnsignedInt(),u=f.TimestampPrecision.SECONDS),this._in.position()<l){const e=this.readVarSignedInt();let t=_.JsbiSupport.ZERO,n=!1;if(this._in.position()<l){const e=C._readSignedIntFrom(this._in,l-this._in.position());n=e._isNegative,t=e._magnitude}const r=c.Decimal._fromBigIntCoefficient(n,t,e),[i,o]=f.Timestamp._splitSecondsDecimal(r);s=c.Decimal.parse(a+"."+o)}let d=Date.UTC(t,n?n-1:0,r||1,i||0,o||0,a||0,0);d=f.Timestamp._adjustMsSinceEpochIfNeeded(t,d);const h=new Date(d);return f.Timestamp._valueOf(h,e,s,u)}read_string_value(){return h.decodeUtf8(this._in.chunk(this._len))}clear_value(){this._raw_type=-1,this._curr=void 0,this._a=y,this._as=-1,this._null=!1,this._fid=null,this._len=-1}load_length(e){const t=this;switch(t._len=function(e){return e&u.NIBBLE_MASK}(e),t._len){case 1:v(e)===u.TB_STRUCT&&(t._len=this.readVarUnsignedInt()),t._null=!1;break;case u.LEN_VAR:t._null=!1,t._len=this.readVarUnsignedInt();break;case u.LEN_NULL:t._null=!0,t._len=0;break;default:t._null=!1}}load_next(){const e=this;let t,n;if(e._as=-1,!e._in.is_empty()){switch(n=e._in.next(),t=v(n),e.load_length(n),t===u.TB_ANNOTATION&&(t=e._len<1&&0===e.depth()?e.load_ivm():e.load_annotations()),t){case u.TB_NULL:e._null=!0;break;case u.TB_BOOL:0!==e._len&&1!==e._len||(e._curr=1===e._len,e._len=0)}return e._raw_type=t,t}e.clear_value()}load_annotations(){const e=this;let t,n,r;return e._len<1&&0===e.depth()?n=e.load_ivm():(r=this.readVarUnsignedInt(),e._as=e._in.position(),e._in.skip(r),e._ae=e._in.position(),t=e._in.next(),e.load_length(t),n=v(t)),n}load_ivm(){const e=this,t=e._in;if(t.next()!==b)throw new Error("invalid binary Ion at "+t.position());if(t.next()!==w)throw new Error("invalid binary Ion at "+t.position());if(t.next()!==S)throw new Error("invalid binary Ion at "+t.position());return e._curr=m,e._len=0,u.TB_SYMBOL}load_annotation_values(){const e=this;let t,n,r,i,o;if(!((r=e._as)<0)){for(o=[],i=e._ae,t=0;r<i;)if(n=e._in.valueAt(r),r++,t=t<<7|127&n,0!=(128&n)){if(0===t)throw new Error("Symbol ID zero is unsupported.");o.push(t),t=0}e._a=o}}_readIntegerMagnitude(){return 0===this._len?_.JsbiSupport.ZERO:this._len<6?this.readUnsignedIntAsNumber():this.readUnsignedIntAsBigInt()}load_value(){if(null==this._curr&&!this.isNull())switch(this._raw_type){case u.TB_BOOL:break;case u.TB_INT:this._curr=this._readIntegerMagnitude();break;case u.TB_NEG_INT:let e=this._readIntegerMagnitude();this._curr=e instanceof s.default?s.default.unaryMinus(e):-e;break;case u.TB_FLOAT:this._curr=this.read_binary_float();break;case u.TB_DECIMAL:0===this._len?this._curr=c.Decimal.ZERO:this._curr=this.read_decimal_value();break;case u.TB_TIMESTAMP:this._curr=this.read_timestamp_value();break;case u.TB_SYMBOL:this._curr=this.readUnsignedIntAsNumber();break;case u.TB_STRING:this._curr=this.read_string_value();break;case u.TB_CLOB:case u.TB_BLOB:if(this.isNull())break;this._curr=this._in.chunk(this._len);break;default:throw new Error("Unexpected type: "+this._raw_type)}}}t.ParserBinaryRaw=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TB_ANNOTATION=t.TB_STRUCT=t.TB_SEXP=t.TB_LIST=t.TB_BLOB=t.TB_CLOB=t.TB_STRING=t.TB_SYMBOL=t.TB_TIMESTAMP=t.TB_DECIMAL=t.TB_FLOAT=t.TB_NEG_INT=t.TB_INT=t.TB_BOOL=t.TB_NULL=t.LEN_NULL=t.LEN_VAR=t.LEN_MASK=t.BYTE_SHIFT=t.TYPE_SHIFT=t.BYTE_MASK=t.NIBBLE_MASK=void 0,t.NIBBLE_MASK=15,t.BYTE_MASK=255,t.TYPE_SHIFT=4,t.BYTE_SHIFT=8,t.LEN_MASK=15,t.LEN_VAR=14,t.LEN_NULL=15,t.TB_NULL=0,t.TB_BOOL=1,t.TB_INT=2,t.TB_NEG_INT=3,t.TB_FLOAT=4,t.TB_DECIMAL=5,t.TB_TIMESTAMP=6,t.TB_SYMBOL=7,t.TB_STRING=8,t.TB_CLOB=9,t.TB_BLOB=10,t.TB_LIST=11,t.TB_SEXP=12,t.TB_STRUCT=13,t.TB_ANNOTATION=14},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(17)),o=n(32);class a{constructor(e,t=o.JsbiSupport.isNegative(e)){this._magnitude=e,this._isNegative=t}get magnitude(){return this._magnitude}get isNegative(){return this._isNegative}static fromNumber(e){const t=e<0||Object.is(e,-0),n=Math.abs(e),r=i.default.BigInt(n);return new a(r,t)}equals(e){return i.default.equal(this._magnitude,e._magnitude)&&this._isNegative===e._isNegative}}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubstituteSymbolTable=void 0;const r=n(74);class i extends r.SharedSymbolTable{constructor(e){if(e<0)throw new Error("Cannot instantiate a SubstituteSymbolTable with a negative length. ("+e+")");super("_substitute",-1,[]),this._numberOfSymbols=e}getSymbolText(e){if(e<0)throw new Error(`Index ${e} is out of bounds for the SharedSymbolTable name=${this.name}, version=${this.version}`)}getSymbolId(e){}}t.SubstituteSymbolTable=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LowLevelBinaryWriter=void 0;const i=r(n(17)),o=n(75);class a{constructor(e){this.writeable=e}static getSignedIntSize(e){if(0===e)return 1;const t=Math.abs(e),n=Math.ceil(Math.log2(t+1))+1;return Math.ceil(n/8)}static getUnsignedIntSize(e){if(e instanceof i.default)return o.JsbiSerde.getUnsignedIntSizeInBytes(e);if(0===e)return 1;const t=Math.floor(Math.log2(e))+1;return Math.ceil(t/8)}static getVariableLengthSignedIntSize(e){const t=Math.abs(e);if(0===t)return 1;const n=Math.floor(Math.log2(t))+1,r=Math.floor(n/7);return Math.ceil((n+r+1+1)/8)}static getVariableLengthUnsignedIntSize(e){if(0===e)return 1;const t=Math.floor(Math.log2(e))+1,n=Math.ceil(t/7);return Math.ceil((t+n)/8)}writeSignedInt(e){const t=a.getSignedIntSize(e);let n=Math.abs(e);const r=new Uint8Array(t);let i=r.length;for(;n>=128;)r[--i]=255&n,n>>>=8;r[--i]=255&n,1/e<0&&(r[0]|=128),this.writeable.writeBytes(r)}writeUnsignedInt(e){if(e instanceof i.default){const t=o.JsbiSerde.toUnsignedIntBytes(e);return void this.writeable.writeBytes(t)}const t=a.getUnsignedIntSize(e),n=new Uint8Array(t);let r=e,s=n.length;for(;r>0;)n[--s]=r%256,r=Math.trunc(r/256);this.writeable.writeBytes(n)}writeVariableLengthSignedInt(e){const t=new Uint8Array(a.getVariableLengthSignedIntSize(e));let n=Math.abs(e),r=t.length-1;for(;n>=64;)t[r--]=127&n,n>>>=7;t[r]=n,1/e<0&&(t[r]|=64),t[t.length-1]|=128,this.writeable.writeBytes(t)}writeVariableLengthUnsignedInt(e){const t=new Uint8Array(a.getVariableLengthUnsignedIntSize(e));let n=e,r=t.length;for(t[--r]=127&n|128,n>>>=7;n>0;)t[--r]=127&n,n>>>=7;this.writeable.writeBytes(t)}writeByte(e){this.writeable.writeByte(e)}writeBytes(e){this.writeable.writeBytes(e)}getBytes(){return this.writeable.getBytes()}}t.LowLevelBinaryWriter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrettyTextWriter=void 0;const r=n(36),i=n(77),o=n(14);class a extends i.TextWriter{constructor(e,t=2){super(e),this.indentSize=t,this.indentCount=0}writeFieldName(e){if(this.currentContainer.containerType!==o.IonTypes.STRUCT)throw new Error("Cannot write field name outside of a struct");if(this.currentContainer.state!==i.State.STRUCT_FIELD)throw new Error("Expecting a struct value");this.currentContainer.clean||(this.writeable.writeByte(r.CharCodes.COMMA),this.writePrettyNewLine(0)),this.writePrettyIndent(0),this.writeSymbolToken(e),this.writeable.writeByte(r.CharCodes.COLON),this.writeable.writeByte(r.CharCodes.SPACE),this.currentContainer.state=i.State.VALUE}writeNull(e){null==e&&(e=o.IonTypes.NULL),this.handleSeparator(),this.writePrettyValue(),this.writeAnnotations(),this._writeNull(e),this.currentContainer.containerType===o.IonTypes.STRUCT&&(this.currentContainer.state=i.State.STRUCT_FIELD)}stepOut(){const e=this.containerContext.pop();if(!e||!e.containerType)throw new Error("Can't step out when not in a container");if(e.containerType===o.IonTypes.STRUCT&&e.state===i.State.VALUE)throw new Error("Expecting a struct value");switch(e.clean||this.writePrettyNewLine(0),this.writePrettyIndent(-1),e.containerType){case o.IonTypes.LIST:this.writeable.writeByte(r.CharCodes.RIGHT_BRACKET);break;case o.IonTypes.SEXP:this.writeable.writeByte(r.CharCodes.RIGHT_PARENTHESIS);break;case o.IonTypes.STRUCT:this.writeable.writeByte(r.CharCodes.RIGHT_BRACE);break;default:throw new Error("Unexpected container type")}}_serializeValue(e,t,n){if(this.currentContainer.state===i.State.STRUCT_FIELD)throw new Error("Expecting a struct field");null!==t?(this.handleSeparator(),this.writePrettyValue(),this.writeAnnotations(),n(t),this.currentContainer.containerType===o.IonTypes.STRUCT&&(this.currentContainer.state=i.State.STRUCT_FIELD)):this.writeNull(e)}writeContainer(e,t){this.currentContainer.containerType===o.IonTypes.STRUCT&&this.currentContainer.state===i.State.VALUE&&(this.currentContainer.state=i.State.STRUCT_FIELD),this.handleSeparator(),this.writePrettyValue(),this.writeAnnotations(),this.writeable.writeByte(t),this.writePrettyNewLine(1),this._stepIn(e)}handleSeparator(){if(0===this.depth())this.currentContainer.clean?this.currentContainer.clean=!1:this.writeable.writeByte(r.CharCodes.LINE_FEED);else if(this.currentContainer.clean)this.currentContainer.clean=!1;else switch(this.currentContainer.containerType){case o.IonTypes.LIST:this.writeable.writeByte(r.CharCodes.COMMA),this.writePrettyNewLine(0);break;case o.IonTypes.SEXP:this.writeable.writeByte(r.CharCodes.SPACE),this.writePrettyNewLine(0)}}writePrettyValue(){this.depth()>0&&this.currentContainer.containerType&&this.currentContainer.containerType!==o.IonTypes.STRUCT&&this.writePrettyIndent(0)}writePrettyNewLine(e){this.indentCount=this.indentCount+e,this.indentSize&&this.indentSize>0&&this.writeable.writeByte(r.CharCodes.LINE_FEED)}writePrettyIndent(e){if(this.indentCount=this.indentCount+e,this.indentSize&&this.indentSize>0)for(let t=0;t<this.indentCount*this.indentSize;t++)this.writeable.writeByte(r.CharCodes.SPACE)}}t.PrettyTextWriter=a},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ParserTextRaw=t.get_ion_type=void 0;const s=o(n(36)),u=n(36),l=a(n(17)),c=n(360),f=n(14),d=n(32),h=-1,p=-2,_=12,g=13,v=10,y=92,m="/".charCodeAt(0),b=39,w='"'.charCodeAt(0),S="{".charCodeAt(0),T=125,C=58,x=45,I=w,E=10,O=[105,110,102];function A(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 98:return 11;case 99:return 12;case 100:return 13;case 101:return 14;case 102:return 15;case 65:return 10;case 66:return 11;case 67:return 12;case 68:return 13;case 69:return 14;case 70:return 15}throw new Error("Unexpected bad hex digit in checked data.")}function k(e,t){return 13==e||e==v?t:!!s.is_whitespace(e)||!(e<32)}t.get_ion_type=function(e){switch(e){case h:case p:return null;case 1:return f.IonTypes.NULL;case 2:return f.IonTypes.BOOL;case 3:case 4:return f.IonTypes.INT;case 5:case 6:return f.IonTypes.FLOAT;case 7:return f.IonTypes.DECIMAL;case 8:return f.IonTypes.TIMESTAMP;case 9:case 10:case 11:return f.IonTypes.SYMBOL;case _:case g:return f.IonTypes.STRING;case 14:case 15:return f.IonTypes.CLOB;case 16:return f.IonTypes.BLOB;case 17:return f.IonTypes.SEXP;case 18:return f.IonTypes.LIST;case 19:return f.IonTypes.STRUCT;default:throw new Error("Unknown type: "+String(e)+".")}};t.ParserTextRaw=class{constructor(e){this._value_null=!1,this._curr_null=!1,this._read_value_helper_minus=function(e,t,n){let r,i=this._peek();105==i?(i=this._peek("inf"),s.isNumericTerminator(i)?r=this._read_minus_inf:t&&(r=this._read_operator_symbol)):s.is_digit(i)?r=this._read_number:t&&(r=this._read_operator_symbol),null!=r?(this._ops.unshift(r),this._unread(e)):this._error("operator symbols are not valid outside of sexps")},this._read_string_helper=function(e,t){let n;for(this._start=this._in.position();;)if(n=this._read(),n==y)this._read_string_escape_sequence();else{if(n==e)break;if(!k(n,t))throw new Error("invalid character "+n+" in string")}},this._in=e,this._ops=[this._read_datagram_values],this._value_type=p,this._value=[],this._start=-1,this._end=-1,this._esc_len=-1,this._curr=h,this._ann=[],this._msg="",this._fieldname=null,this._fieldnameType=null;const t={40:this._read_value_helper_paren,91:this._read_value_helper_square,123:this._read_value_helper_curly,43:this._read_value_helper_plus,45:this._read_value_helper_minus,39:this._read_value_helper_single,34:this._read_value_helper_double},n=function(e,n){let r,i=e.length;for(;i>0;)i--,r=e.charCodeAt(i),t[r]=n};n("0123456789",this._read_value_helper_digit),n("_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this._read_value_helper_letter),n("!#%&*+-./;<=>?@^`|~",this._read_value_helper_operator),t[43]=this._read_value_helper_plus,t[45]=this._read_value_helper_minus,this._read_value_helper_helpers=t}fieldName(){return this._fieldname}fieldNameType(){return this._fieldnameType}source(){return this._in}annotations(){return this._ann}clearFieldName(){this._fieldname=null,this._fieldnameType=null}isNull(){return this._curr_null}bigIntValue(){if(this.isNull())return null;const e=this.get_value_as_string(this._curr);switch(this._curr){case 3:case 4:return d.JsbiSupport.bigIntFromString(e);default:throw new Error("intValue() was called when the current value was not an integer.")}}numberValue(){if(this.isNull())return null;const e=this.get_value_as_string(this._curr);switch(this._curr){case 3:case 4:return l.default.toNumber(d.JsbiSupport.bigIntFromString(e));case 5:return Number(e);case 6:if("+inf"==e)return Number.POSITIVE_INFINITY;if("-inf"==e)return Number.NEGATIVE_INFINITY;if("nan"==e)return Number.NaN;default:throw new Error("can't convert to number")}}booleanValue(){if(this.isNull())return null;const e=this.get_value_as_string(2);if("true"===e)return!0;if("false"===e)return!1;throw new Error("Unrecognized Boolean value '"+e+"'")}get_value_as_string(e){let t,n,r="";switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:for(t=this._start;t<this._end;t++)r+=String.fromCharCode(this._in.valueAt(t));break;case 16:for(t=this._start;t<this._end;t++)n=this._in.valueAt(t),s.is_base64_char(n)&&(r+=String.fromCharCode(n));break;case 11:case _:case g:for(t=this._start;t<this._end;t++){let i=!1;if(n=this._in.valueAt(t),n==y&&(n=this._read_escape_sequence(t,this._end),t+=this._esc_len,i=!0),this.isHighSurrogate(n)){t++;let e=this._in.valueAt(t);if(e==y&&(e=this._read_escape_sequence(t,this._end),t+=this._esc_len),!this.isLowSurrogate(e))throw new Error("expected a low surrogate, but found: "+n);{const t=65536+((1023&n)<<10)+(1023&e);r+=String.fromCodePoint(t)}}else{if(this.isLowSurrogate(n))throw new Error("unexpected low surrogate: "+n);e===g&&n===b&&!i&&this.verifyTriple(t)?t=this._skip_triple_quote_gap(t,this._end,!0):n>=0&&(i?r+=String.fromCodePoint(n):(e===g&&13===n&&this._in.valueAt(t+1)===E&&(n=E,t++),r+=String.fromCharCode(n)))}}break;default:throw new Error("can't get this value as a string")}return r}get_value_as_uint8array(e){const t=[];switch(e){case 14:for(let e=this._start;e<this._end;e++){const n=this._in.valueAt(e);if(n===y)t.push(this.readClobEscapes(e,this._end)),e+=this._esc_len;else{if(!(n<128))throw new Error("Non-Ascii values illegal within clob.");t.push(n)}}break;case 15:for(let e=this._start;e<this._end;e++){const n=this._in.valueAt(e);if(n===y){const n=this.readClobEscapes(e,this._end);n>=0&&t.push(n),e+=this._esc_len}else if(n===b)this.verifyTriple(e)?e=this._skip_triple_quote_gap(e,this._end,!1):t.push(n);else{if(!(n<128))throw new Error("Non-Ascii values illegal within clob.");t.push(n)}}break;default:throw new Error("can't get this value as a Uint8Array")}return Uint8Array.from(t)}next(){let e;if(this.clearFieldName(),this._ann=[],this._value_type===p&&this._run(),this._curr=this._value_pop(),this._curr!==p)return e=this._curr,this._curr_null=this._value_null,this._value_null=!1,e;this._value.push(p)}_read_datagram_values(){this._peek()==h?this._value_push(h):(this._ops.unshift(this._read_datagram_values),this._ops.unshift(this._read_value))}_read_sexp_values(){const e=this._read_after_whitespace(!0);if(41==e)this._value_push(h);else{if(e===h)throw new Error("Expected closing ).");this._unread(e),this._ops.unshift(this._read_sexp_values),this._ops.unshift(this._read_sexp_value)}}_read_list_values(){const e=this._read_after_whitespace(!0);93==e?this._value_push(h):(this._unread(e),this._ops.unshift(this._read_list_comma),this._ops.unshift(this._read_value))}_read_struct_values(){let e=this._done_with_error,t=this._read_after_whitespace(!0);switch(t){case b:e=this._read_string1,this._peek("''")!=p&&(e=this._read_string3);break;case w:e=this._read_string2;break;case T:return void this._value_push(h);default:s.is_letter(t)&&(e=this._read_symbol)}if(e===this._done_with_error)this._error("expected field name (or close struct '}') not found");else{if(e.call(this),this._load_field_name(),t=this._read_after_whitespace(!0),t!=C)return void this._error("expected ':'");this._ops.unshift(this._read_struct_comma),this._ops.unshift(this._read_value)}}_read_list_comma(){let e=this._read_after_whitespace(!0);44==e?(e=this._read_after_whitespace(!0),93==e?this._value_push(h):(this._unread(e),this._ops.unshift(this._read_list_comma),this._ops.unshift(this._read_value))):93==e?this._value_push(h):this._error("expected ',' or ']'")}_read_struct_comma(){let e=this._read_after_whitespace(!0);44==e?(e=this._read_after_whitespace(!0),e==T?this._value_push(h):(this._unread(e),this._ops.unshift(this._read_struct_values))):e==T?this._value_push(h):this._error("expected ',' or '}'")}_load_field_name(){this._fieldnameType=this._value_pop();const e=this.get_value_as_string(this._fieldnameType);switch(this._fieldnameType){case 9:if(u.is_keyword(e))throw new Error("can't use '"+e+"' as a fieldname without quotes");case 11:case _:case g:this._fieldname=e;break;default:throw new Error("invalid fieldname"+e)}}_read_value(){this._read_value_helper(!1,this._read_value)}_read_sexp_value(){this._read_value_helper(!0,this._read_sexp_value)}_read_value_helper(e,t){const n=this._read_after_whitespace(!0);if(n==h)this._read_value_helper_EOF(n,e,t);else{const r=this._read_value_helper_helpers[n];null!=r?r.call(this,n,e,t):this._error("unexpected character '"+s.asAscii(n)+"'")}}_read_value_helper_EOF(e,t,n){this._ops.unshift(this._done)}_read_value_helper_paren(e,t,n){this._value_push(17),this._ops.unshift(this._read_sexp_values)}_read_value_helper_square(e,t,n){this._value_push(18),this._ops.unshift(this._read_list_values)}_read_value_helper_curly(e,t,n){let r;const i=this._read();i==S?(r=this._read_after_whitespace(!1),r==b?this._ops.unshift(this._read_clob_string3):r==w?this._ops.unshift(this._read_clob_string2):(this._unread(r),this._ops.unshift(this._read_blob))):(this._unread(i),this._value_push(19),this._ops.unshift(this._read_struct_values))}_read_value_helper_plus(e,t,n){const r=this._peek("inf");this._unread(e),s.isNumericTerminator(r)?this._ops.unshift(this._read_plus_inf):t?this._ops.unshift(this._read_operator_symbol):this._error("unexpected '+'")}_read_value_helper_digit(e,t,n){const r=this._peek_4_digits(e);this._unread(e),84==r||r==x?this._ops.unshift(this._readTimestamp):this._ops.unshift(this._read_number)}_read_value_helper_single(e,t,n){let r;this._peek("''")!=p?(r=this._read_string3,r.call(this)):(r=this._read_string1,r.call(this),this._test_string_as_annotation(r)&&this._ops.unshift(n))}_read_value_helper_double(e,t,n){this._ops.unshift(this._read_string2)}_read_value_helper_letter(e,t,n){this._read_symbol();const r=this._value_pop();if(9!=r)throw new Error("Expecting symbol here.");let i=this.get_value_as_string(r);if(u.is_keyword(i)){let e=function(e){if("null"===e)return 1;if("true"===e)return 2;if("false"===e)return 2;if("nan"===e)return 6;if("+inf"===e)return 6;if("-inf"===e)return 6;throw new Error("Unknown keyword: "+e+".")}(i);if(1===e){if(this._value_null=!0,46===this._peek()){this._read();const t=this._read();if(!0!==s.is_letter(t))throw new Error("Expected type name after 'null.'");if(this._read_symbol(),9!==this._value_pop())throw new Error("Expected type name after 'null.'");i=this.get_value_as_string(9),e=function(e){if("null"===e)return 1;if("bool"===e)return 2;if("int"===e)return 3;if("float"===e)return 5;if("decimal"===e)return 7;if("timestamp"===e)return 8;if("symbol"===e)return 9;if("string"===e)return _;if("clob"===e)return 14;if("blob"===e)return 16;if("sexp"===e)return 17;if("list"===e)return 18;if("struct"===e)return 19;throw new Error("Unknown type: "+e+".")}(i)}this._start=-1,this._end=-1}this._value_push(e)}else{const e=this._read_after_whitespace(!0);if(e==C&&this._peek()==C){this._read();const e=this._parseSymbolId(i);if(0===e)throw new Error("Symbol ID zero is not supported.");isNaN(e)?this._ann.push(new c.SymbolToken(i)):this._ann.push(new c.SymbolToken(null,e)),this._ops.unshift(n)}else{const t=9;this._unread(e),this._value_push(t)}}}_read_value_helper_operator(e,t,n){t?(this._unread(e),this._ops.unshift(this._read_operator_symbol)):this._error("unexpected operator character")}_done(){this._value_push(h)}_done_with_error(){throw this._value_push(p),new Error(this._error_msg)}_read_number(){let e,t;if(this._start=this._in.position(),e=this._read(),e==x&&(e=this._read()),48==e){if(e=this._peek(),120==e||88==e)return void this._read_hex_int();s.is_digit(e)&&this._error("leading zeros are not allowed"),e=48}t=3,e=this._read_required_digits(e),46==e&&(t=7,e=this._read_optional_digits(this._read())),s.isNumericTerminator(e)||(100==e||68==e?(t=7,e=this._read_exponent()):101!=e&&69!=e&&102!=e&&70!=e||(t=5,e=this._read_exponent())),s.isNumericTerminator(e)?(this._unread(e),this._end=this._in.position(),this._value_push(t)):this._error("invalid character after number")}_read_hex_int(){let e=this._read();120!=e&&88!=e||(e=this._read(),e=this._read_required_hex_digits(e)),s.isNumericTerminator(e)?(this._unread(e),this._end=this._in.position(),this._value_push(4)):this._error("invalid character after number")}_read_exponent(){let e=this._read();return e!=x&&43!=e||(e=this._read()),e=this._read_required_digits(e),e}_read_plus_inf(){this._start=this._in.position(),43==this._read()?this._read_inf_helper():this._error("expected +inf")}_read_minus_inf(){this._start=this._in.position(),this._read()==x?this._read_inf_helper():this._error("expected -inf")}_read_inf_helper(){let e,t;for(e=0;e<3;e++)if(t=this._read(),t!=O[e])return void this._error("expected 'inf'");s.isNumericTerminator(this._peek())?(this._end=this._in.position(),this._value_push(6)):this._error("invalid numeric terminator after 'inf'")}_readTimestamp(){this._start=this._in.position();let e=this._readPastNDigits(4);if(84===e)return this._end=this._in.position(),void this._value_push(8);if(e!==x)throw new Error("Timestamp year must be followed by '-' or 'T'.");if(e=this._readPastNDigits(2),84===e)return this._end=this._in.position(),void this._value_push(8);if(e!==x)throw new Error("Timestamp month must be followed by '-' or 'T'.");if(e=this._readPastNDigits(2),s.isNumericTerminator(e))return this._unread(e),this._end=this._in.position(),void this._value_push(8);if(84!==e)throw new Error("Timestamp day must be followed by a numeric stop character .");const t=this._in.peek();if(s.isNumericTerminator(t))return this._end=this._in.position(),void this._value_push(8);if(!s.is_digit(t))throw new Error("Timestamp DATE must be followed by numeric terminator or additional TIME digits.");if(e=this._readPastNDigits(2),e!==C)throw new Error("Timestamp time(hr:min) requires format of 00:00");if(e=this._readPastNDigits(2),e===C&&(e=this._readPastNDigits(2),46===e)){if(!s.is_digit(this._read()))throw new Error("W3C timestamp spec requires atleast one digit after decimal point.");for(;s.is_digit(e=this._read()););}if(90===e){if(!s.isNumericTerminator(this._peek()))throw new Error("Illegal terminator after Zulu offset.");return this._end=this._in.position(),void this._value_push(8)}if(43!==e&&e!==x)throw new Error("Timestamps require an offset.");if(e=this._readPastNDigits(2),e!==C)throw new Error("Timestamp offset(hr:min) requires format of +/-00:00.");if(this._readNDigits(2),e=this._peek(),!s.isNumericTerminator(e))throw new Error("Improperly formatted timestamp.");this._end=this._in.position(),this._value_push(8)}_read_symbol(){let e;for(this._start=this._in.position()-1;e=this._read(),s.is_letter_or_digit(e););this._unread(e),this._end=this._in.position(),this._value_push(9)}_read_operator_symbol(){let e;for(this._start=this._in.position();e=this._read(),s.is_operator_char(e););this._end=this._in.position()-1,this._unread(e),this._value_push(10)}_read_string1(){this._read_string_helper(b,!1),this._end=this._in.position()-1,this._value_push(11)}_read_string2(){this._read_string_helper(w,!1),this._end=this._in.position()-1,this._value_push(_)}_read_string3(e){let t;for(void 0===e&&(e=!0),this._unread(this._peek("")),this._start=this._in.position()+3;this._peek("'''")!==p;this._in.unread(this._read_after_whitespace(e))){for(let e=0;e<3;e++)this._read();for(;this._peek("'''")===p;){if(t=this._read(),t==y&&this._read_string_escape_sequence(),t===h)throw new Error("Closing triple quotes not found.");if(!k(t,!0))throw new Error("invalid character "+t+" in string")}this._end=this._in.position();for(let e=0;e<3;e++)this._read()}this._value_push(g)}verifyTriple(e){return this._in.valueAt(e)===b&&this._in.valueAt(e+1)===b&&this._in.valueAt(e+2)===b}_read_string_escape_sequence(){let e=this._read();switch(e){case 48:case 97:case 98:case 116:case 110:case 102:case 114:case 118:case I:case 39:case 63:case 92:case 47:case E:break;case 13:e=this._read(),e!=E&&this._unread(e);break;case 120:e=this._read_N_hexdigits(2),this._unread(e);break;case 117:e=this._read_N_hexdigits(4),this._unread(e);break;case 85:e=this._read_N_hexdigits(8),this._unread(e);break;default:this._error("unexpected character: "+e+" after escape slash")}}_test_string_as_annotation(e){let t,n,r;const i=this._value_pop();return 11!=i&&i!=g&&this._error("expecting quoted symbol here"),t=this.get_value_as_string(i),n=this._read_after_whitespace(!0),n==C&&this._peek()==C?(this._read(),this._ann.push(new c.SymbolToken(t)),r=!0):(this._unread(n),this._value_push(i),r=!1),r}_read_clob_string2(){let e;this._read_string2(),e=this._value_pop(),e!=_&&this._error("string expected"),this._value_push(14),this._ops.unshift(this._read_close_double_brace)}_read_clob_string3(){let e;this._read_string3(!1),e=this._value_pop(),e!=g&&this._error("string expected"),this._value_push(15),this._ops.unshift(this._read_close_double_brace)}_read_blob(){let e,t=0,n=0;for(this._start=this._in.position();;)if(e=this._read(),s.is_base64_char(e))t++,this._end=this._in.position();else if(!s.is_whitespace(e))break;for(;61==e;)n++,e=this._read_after_whitespace(!1);if(e!=T||this._read()!=T)throw new Error("Invalid blob");if(r=t,(i=n)>2||0!=(r+i&3))throw new Error("Invalid base64 value");var r,i;this._value_push(16)}_read_close_double_brace(){this._read_after_whitespace(!1)==T&&this._read()==T||this._error("expected '}}'")}isHighSurrogate(e){return e>=55296&&e<=56319}isLowSurrogate(e){return e>=56320&&e<=57343}indexWhiteSpace(e,t){let n=this._in.valueAt(e);if(t){for(;u.is_whitespace(n)||n===m;n=this._in.valueAt(e++))if(n===m)switch(n=this._in.valueAt(e++),n){case m:e=this.indexToNewLine(e);break;case 42:e=this.indexToCloseComment(e);break;default:e--}}else for(;u.is_whitespace(n);n=this._in.valueAt(e++));return e}indexToNewLine(e){let t=this._in.valueAt(e);for(;t!==h&&t!==v;){if(13===t&&this._in.valueAt(e+1)!==v)return e;t=this._in.valueAt(e++)}return e}indexToCloseComment(e){for(;42!==this._in.valueAt(e)&&this._in.valueAt(e+1)!==m;)e++;return e}_skip_triple_quote_gap(e,t,n){let r=e+3;return r=this.indexWhiteSpace(r,n),r+2<=t&&this.verifyTriple(r)?r+4:r+1}readClobEscapes(e,t){let n;if(e+1>=t)throw new Error("invalid escape sequence");switch(n=this._in.valueAt(e+1),this._esc_len=1,n){case 48:return 0;case 97:return 7;case 98:return 8;case 116:return 9;case 110:return 10;case 102:return 12;case 114:return 13;case 118:return 11;case I:return 34;case 39:return 39;case 63:return 63;case 92:return 92;case 47:return 47;case E:return-1;case 13:return e+2<t&&this._in.valueAt(e+2)==v&&(this._esc_len=2),s.ESCAPED_NEWLINE;case 120:if(e+3>=t)throw new Error("invalid escape sequence");n=this._get_N_hexdigits(e+2,e+4),this._esc_len=3;break;default:throw new Error("Invalid escape: /"+n)}return n}_read_escape_sequence(e,t){let n;if(e+1>=t)throw new Error("Invalid escape sequence.");switch(n=this._in.valueAt(e+1),this._esc_len=1,n){case 48:return 0;case 97:return 7;case 98:return 8;case 116:return 9;case 110:return 10;case 102:return 12;case 114:return 13;case 118:return 11;case I:return 34;case 39:return 39;case 63:return 63;case 92:return 92;case 47:return 47;case E:return-1;case 13:return e+2<t&&this._in.valueAt(e+2)==v&&(this._esc_len=2),s.ESCAPED_NEWLINE;case 120:if(e+3>=t)throw new Error("invalid escape sequence");n=this._get_N_hexdigits(e+2,e+4),this._esc_len=3;break;case 117:if(e+5>=t)throw new Error("invalid escape sequence");n=this._get_N_hexdigits(e+2,e+6),this._esc_len=5;break;case 85:if(e+9>=t)throw new Error("invalid escape sequence");n=this._get_N_hexdigits(e+2,e+10),this._esc_len=9;break;default:throw new Error("unexpected character after escape slash")}return n}_get_N_hexdigits(e,t){let n,r=0;for(;e<t;)n=this._in.valueAt(e),r=16*r+A(n),e++;return r}_value_push(e){this._value_type!==p&&this._error("unexpected double push of value type!"),this._value_type=e}_value_pop(){const e=this._value_type;return this._value_type=p,e}_run(){let e;for(;this._ops.length>0&&this._value_type===p;)e=this._ops.shift(),e.call(this)}_read(){return this._in.next()}_read_skipping_comments(){let e=this._read();return e==m&&(e=this._read(),e==m?(this._read_to_newline(),e=s.WHITESPACE_COMMENT1):42==e?(this._read_to_close_comment(),e=s.WHITESPACE_COMMENT2):(this._unread(e),e=m)),e}_read_to_newline(){let e;for(;(e=this._read(),e!=h)&&e!=v;)if(13==e){e=this._read(),e!=v&&this._unread(e);break}}_read_to_close_comment(){let e;for(;(e=this._read(),e!=h)&&(42!=e||(e=this._read(),e!=m)););}_unread(e){this._in.unread(e)}_read_after_whitespace(e){let t;if(e)for(t=this._read_skipping_comments();s.is_whitespace(t);)t=this._read_skipping_comments();else for(t=this._read();s.is_whitespace(t);)t=this._read();return t}_peek(e){let t,n=0;if(void 0===e||e.length<1)return this._in.valueAt(this._in.position());for(;n<e.length&&(t=this._read(),t==e.charCodeAt(n));)n++;for(n===e.length?t=this._peek():(this._unread(t),t=p);n>0;)n--,this._unread(e.charCodeAt(n));return t}_peek_4_digits(e){let t,n,r=!0;const i=[];if(!s.is_digit(e))return p;for(t=0;t<3;t++)if(n=this._read(),i.push(n),!s.is_digit(n)){r=!1;break}for(n=r&&3==t?this._peek():p;i.length>0;)this._unread(i.pop());return n}_read_required_digits(e){if(!s.is_digit(e))return p;for(;e=this._read(),s.is_digit(e););return e}_read_optional_digits(e){for(;s.is_digit(e);)e=this._read();return e}_readNDigits(e){let t;if(e<=0)throw new Error("Cannot read a lack of or negative number of digits.");for(;e--;)if(!s.is_digit(t=this._read()))throw new Error("Expected digit, got: "+String.fromCharCode(t));return t}_readPastNDigits(e){return this._readNDigits(e),this._read()}_read_required_hex_digits(e){if(!s.is_hex_digit(e))return p;for(;e=this._read(),s.is_hex_digit(e););return e}_read_N_hexdigits(e){let t,n=0;for(;n<e;){if(t=this._read(),!s.is_hex_digit(t))return this._error(e+" digits required "+n+" found"),p;n++}return t}_parseSymbolId(e){if("$"!==e[0])return NaN;for(let t=1;t<e.length;t++)if(e[t]<"0"||e[t]>"9")return NaN;return parseInt(e.substr(1,e.length))}_error(e){this._ops.unshift(this._done_with_error),this._error_msg=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SymbolToken=void 0;class r{constructor(e,t=r._UNKNOWN_SYMBOL_ID){this.text=e,this.sid=t}getText(){return this.text}getSid(){return this.sid}}t.SymbolToken=r,r._UNKNOWN_SYMBOL_ID=-1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Boolean=void 0;const r=n(5),i=n(22),o=n(78),a=n(18),s=(new i.FromJsConstructorBuilder).withPrimitives(i.Primitives.Boolean).withClassesToUnbox(o._NativeJsBoolean).build();class u extends(a.Value(o._NativeJsBoolean,r.IonTypes.BOOL,s)){constructor(e,t=[]){super(e),this._setAnnotations(t)}booleanValue(){return this.valueOf()}writeTo(e){e.setAnnotations(this.getAnnotations()),e.writeBoolean(this.booleanValue())}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}){let n=!1,r=null;return e instanceof u?(n=!0,r=e.booleanValue()):t.onlyCompareIon||("boolean"==typeof e||e instanceof o._NativeJsBoolean)&&(n=!0,r=e.valueOf()),!!n&&this.booleanValue()===r}}t.Boolean=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.String=void 0;const r=n(5),i=n(22),o=n(78),a=n(18),s=(new i.FromJsConstructorBuilder).withPrimitives(i.Primitives.String).withClassesToUnbox(o._NativeJsString).build();class u extends(a.Value(o._NativeJsString,r.IonTypes.STRING,s)){constructor(e,t=[]){super(e),this._setAnnotations(t)}stringValue(){return this.toString()}writeTo(e){e.setAnnotations(this.getAnnotations()),e.writeString(this.stringValue())}_valueEquals(e,t={epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}){let n=!1,r=null;return e instanceof u?(n=!0,r=e.stringValue()):t.onlyCompareIon||("string"==typeof e||e instanceof o._NativeJsString)&&(n=!0,r=e.valueOf()),!!n&&0===this.compareValue(r)}compareValue(e){return this.stringValue().localeCompare(e)}}t.String=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IonEventStream=void 0;const r=n(50),i=n(50),o=n(5),a=n(71),s=n(156),u=n(14),l=n(171),c=n(170);t.IonEventStream=class{constructor(e){this.events=[],this.reader=e,this.eventFactory=new c.IonEventFactory,this.isEventStream=!1,this.generateStream()}writeEventStream(e){e.writeSymbol("$ion_event_stream");for(let t=0;t<this.events.length;t++)this.events[t].write(e)}writeIon(e){try{let t,n=!1;for(let r=0;r<this.events.length;r++)switch(t=this.events[r],null!==t.fieldName&&e.writeFieldName(t.fieldName),t.ionType!=u.IonTypes.SEXP&&t.ionType!=u.IonTypes.LIST||!this.isEmbedded(t)||(n=!0),e.setAnnotations(t.annotations),t.eventType){case c.IonEventType.SCALAR:if(null==t.ionValue)return void e.writeNull(t.ionType);if(n){e.writeString(t.ionValue.toString());break}switch(t.ionType){case u.IonTypes.BOOL:e.writeBoolean(t.ionValue);break;case u.IonTypes.STRING:e.writeString(t.ionValue);break;case u.IonTypes.SYMBOL:e.writeSymbol(t.ionValue);break;case u.IonTypes.INT:e.writeInt(t.ionValue);break;case u.IonTypes.DECIMAL:e.writeDecimal(t.ionValue);break;case u.IonTypes.FLOAT:e.writeFloat64(t.ionValue);break;case u.IonTypes.NULL:e.writeNull(t.ionType);break;case u.IonTypes.TIMESTAMP:e.writeTimestamp(t.ionValue);break;case u.IonTypes.CLOB:e.writeClob(t.ionValue);break;case u.IonTypes.BLOB:e.writeBlob(t.ionValue);break;default:throw new Error("unexpected type: "+t.ionType.name)}break;case c.IonEventType.CONTAINER_START:e.stepIn(t.ionType);break;case c.IonEventType.CONTAINER_END:n&&(n=!1),e.stepOut();break;case c.IonEventType.STREAM_END:break;case c.IonEventType.SYMBOL_TABLE:throw new Error("Symboltables unsupported.");default:throw new Error("Unexpected event type: "+t.eventType)}e.close()}catch(t){throw new l.EventStreamError("WRITE",t.message,this.events.length,this.events)}}getEvents(){return this.events}equals(e){return this.compare(e).result==i.ComparisonResultType.EQUAL}compare(e){let t=0,n=0;if(this.events.length!=e.events.length)return new r.ComparisonResult(i.ComparisonResultType.NOT_EQUAL,"The event streams have different lengths");for(;t<this.events.length&&n<e.events.length;){const r=this.events[t],o=e.events[n];if(r.eventType===c.IonEventType.SYMBOL_TABLE&&t++,o.eventType===c.IonEventType.SYMBOL_TABLE&&n++,r.eventType!==c.IonEventType.SYMBOL_TABLE&&o.eventType!==c.IonEventType.SYMBOL_TABLE){switch(r.eventType){case c.IonEventType.SCALAR:{const e=r.compare(o);if(e.result==i.ComparisonResultType.NOT_EQUAL)return e.actualIndex=t,e.expectedIndex=n,e;break}case c.IonEventType.CONTAINER_START:{const e=r.compare(o);if(e.result==i.ComparisonResultType.NOT_EQUAL)return t+=e.actualIndex,n+=e.expectedIndex,e.actualIndex=t,e.expectedIndex=n,e;null!==r.ionValue&&null!==o.ionValue&&(t+=r.ionValue.length,n+=o.ionValue.length);break}case c.IonEventType.CONTAINER_END:case c.IonEventType.STREAM_END:break;default:throw new Error("Unexpected event type: "+r.eventType)}t++,n++}}return new r.ComparisonResult(i.ComparisonResultType.EQUAL)}isEmbedded(e){return"embedded_documents"===e.annotations[0]}generateStream(){try{let e=this.reader.next();if(e===u.IonTypes.SYMBOL&&"$ion_event_stream"===this.reader.stringValue())return this.marshalStream(),void(this.isEventStream=!0);const t=[],n=[];for(;;){if(this.reader.isNull())this.events.push(this.eventFactory.makeEvent(c.IonEventType.SCALAR,e,this.reader.fieldName(),this.reader.depth(),this.reader.annotations(),!0,this.reader.value()));else switch(e){case u.IonTypes.LIST:case u.IonTypes.SEXP:case u.IonTypes.STRUCT:{const r=this.eventFactory.makeEvent(c.IonEventType.CONTAINER_START,e,this.reader.fieldName(),this.reader.depth(),this.reader.annotations(),!1,null);this.events.push(r),t.push(r),n.push(this.events.length),this.reader.stepIn();break}case null:if(0===this.reader.depth())return void this.events.push(this.eventFactory.makeEvent(c.IonEventType.STREAM_END,u.IonTypes.NULL,null,this.reader.depth(),[],!1,void 0));this.reader.stepOut(),this.endContainer(t.pop(),n.pop());break;default:this.events.push(this.eventFactory.makeEvent(c.IonEventType.SCALAR,e,this.reader.fieldName(),this.reader.depth(),this.reader.annotations(),!1,this.reader.value()))}e=this.reader.next()}}catch(e){throw new l.EventStreamError("READ",e.message,this.events.length,this.events)}}endContainer(e,t){this.events.push(this.eventFactory.makeEvent(c.IonEventType.CONTAINER_END,e.ionType,null,e.depth,[],!1,null)),e.ionValue=this.events.slice(t,this.events.length)}marshalStream(){this.events=[];const e=[],t=[];for(let n=this.reader.next();n===u.IonTypes.STRUCT;n=this.reader.next()){this.reader.stepIn();const n=this.marshalEvent();if(n.eventType===c.IonEventType.CONTAINER_START)e.push(n),this.events.push(n),t.push(this.events.length);else if(n.eventType===c.IonEventType.CONTAINER_END)this.endContainer(e.pop(),t.pop());else{if(n.eventType!==c.IonEventType.SCALAR&&n.eventType!==c.IonEventType.STREAM_END)throw new Error("Unexpected eventType: "+n.eventType);this.events.push(n)}this.reader.stepOut()}}marshalEvent(){const e={};for(let i;i=this.reader.next();){const t=this.reader.fieldName();if(t&&void 0!==e[t])throw new Error("Repeated event field: "+t);switch(t){case"event_type":e[t]=this.reader.stringValue();break;case"ion_type":e[t]=this.parseIonType();break;case"field_name":e[t]=this.resolveFieldNameFromSerializedSymbolToken();break;case"annotations":e[t]=this.parseAnnotations();break;case"value_text":{let n=this.reader.stringValue();"$ion_"===n.substr(0,5)&&(n="$ion_user_value::"+n);const r=o.makeReader(n);r.next();const i=r.value();e.isNull=r.isNull(),e[t]=i;break}case"value_binary":e[t]=this.parseBinaryValue();break;case"imports":e[t]=this.parseImports();break;case"depth":e[t]=this.reader.numberValue();break;default:throw new Error("Unexpected event field: "+t)}}let t;switch(e.event_type){case"CONTAINER_START":t=c.IonEventType.CONTAINER_START;break;case"STREAM_END":t=c.IonEventType.STREAM_END;break;case"CONTAINER_END":t=c.IonEventType.CONTAINER_END;break;case"SCALAR":t=c.IonEventType.SCALAR;break;case"SYMBOL_TABLE":throw new Error("Symbol tables unsupported")}const n=void 0!==e.field_name?e.field_name:null;e.annotations||(e.annotations=[]);const r=this.eventFactory.makeEvent(t,e.ion_type,n,e.depth,e.annotations,e.isNull,e.value_text);if(t===c.IonEventType.SCALAR){const i=this.eventFactory.makeEvent(t,e.ion_type,n,e.depth,e.annotations,e.isNull,e.value_binary);if(!r.equals(i))throw new Error(`Text event ${e.value_text} does not equal binary event ${e.value_binary}`)}return r}parseIonType(){const e=this.reader.stringValue().toLowerCase();switch(e){case"null":return u.IonTypes.NULL;case"bool":return u.IonTypes.BOOL;case"int":return u.IonTypes.INT;case"float":return u.IonTypes.FLOAT;case"decimal":return u.IonTypes.DECIMAL;case"timestamp":return u.IonTypes.TIMESTAMP;case"symbol":return u.IonTypes.SYMBOL;case"string":return u.IonTypes.STRING;case"clob":return u.IonTypes.CLOB;case"blob":return u.IonTypes.BLOB;case"list":return u.IonTypes.LIST;case"sexp":return u.IonTypes.SEXP;case"struct":return u.IonTypes.STRUCT;default:throw new Error("i: "+e)}}parseAnnotations(){const e=[];if(this.reader.isNull())return e;this.reader.stepIn();for(let t;t=this.reader.next();)if(t==u.IonTypes.STRUCT){this.reader.stepIn();const t=this.reader.next();if("text"==this.reader.fieldName()&&t==u.IonTypes.STRING){const t=this.reader.stringValue();null!==t&&e.push(t)}else if("importLocation"==this.reader.fieldName()&&t==u.IonTypes.INT){const t=o.defaultLocalSymbolTable().getSymbolText(this.reader.numberValue());if(null==t)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");e.push(t)}this.reader.stepOut()}return this.reader.stepOut(),e}parseBinaryValue(){if(this.reader.isNull())return null;const e=[];this.reader.stepIn();let t=this.reader.next();for(;t;)e.push(this.reader.numberValue()),t=this.reader.next();this.reader.stepOut();const n=new Uint8Array(e),r=new a.BinaryReader(new s.BinarySpan(n));return r.next(),r.value()}parseImports(){return this.reader.value()}resolveFieldNameFromSerializedSymbolToken(){if(this.reader.isNull())return null;this.reader.stepIn();const e=this.reader.next();if("text"==this.reader.fieldName()&&e==u.IonTypes.STRING){const e=this.reader.stringValue();if(null!==e)return this.reader.stepOut(),e}else if("importLocation"==this.reader.fieldName()&&e==u.IonTypes.INT){const e=o.defaultLocalSymbolTable().getSymbolText(this.reader.numberValue());if(null==e)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return this.reader.stepOut(),e}return null}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientStage=t.WeblabRuleOperator=t.ACSClientError=void 0;var i=n(365);Object.defineProperty(t,"ACSClientError",{enumerable:!0,get:function(){return r(i).default}});var o=n(366);Object.defineProperty(t,"WeblabRuleOperator",{enumerable:!0,get:function(){return r(o).default}});var a=n(367);Object.defineProperty(t,"ClientStage",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AND="AND",e.OR="OR"}(r||(r={})),t.default=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SANDBOX="SANDBOX",e.DEVO="DEVO",e.PROD="PROD"}(r||(r={})),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ionValueToJsObject=void 0;var r=n(14);t.ionValueToJsObject=function(e){if(null==e)return null;switch(e.getType()){case r.IonTypes.BLOB:return e.toJSON();case r.IonTypes.BOOL:return e.booleanValue();case r.IonTypes.CLOB:return e.toJSON();case r.IonTypes.DECIMAL:case r.IonTypes.FLOAT:case r.IonTypes.INT:return e.numberValue();case r.IonTypes.LIST:return e.elements().map(t.ionValueToJsObject);case r.IonTypes.NULL:return null;case r.IonTypes.SEXP:return e.elements().map(t.ionValueToJsObject);case r.IonTypes.STRING:return e.stringValue();case r.IonTypes.STRUCT:return e.fields().reduce((function(e,n){var r=n[0],i=n[1];return e[r.replace(/_[a-z0-9]/g,(function(e){return e[1].toUpperCase()}))]=(0,t.ionValueToJsObject)(i),e}),{});case r.IonTypes.SYMBOL:return e.stringValue();case r.IonTypes.TIMESTAMP:return e.toJSON();default:return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(172),i=function(){function e(e){this.storage=new Map(e)}return e.prototype.getRecord=function(e){return this.storage.get((0,r.stringifyFeatureContext)(e))},e}();t.default=i},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var i=n(49),o=((r={})[i.ClientStage.SANDBOX]="sandbox/",r[i.ClientStage.DEVO]="devo/",r[i.ClientStage.PROD]="",r);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(372),i=function(){function e(e){this._marketplaceId=e}return e.prototype.toRawContext=function(){var e=new Map;return e.set("acs_marketplace_id",this._marketplaceId),new r.QueryContext(e)},Object.defineProperty(e.prototype,"marketplaceId",{get:function(){return this._marketplaceId},set:function(e){this._marketplaceId=e},enumerable:!1,configurable:!0}),e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryContext=t.ConfigManager=t.ClientStage=t.WeblabContext=void 0;var i=n(373);Object.defineProperty(t,"WeblabContext",{enumerable:!0,get:function(){return i.WeblabContext}});var o=n(381);Object.defineProperty(t,"ClientStage",{enumerable:!0,get:function(){return o.ClientStage}});var a=n(385);Object.defineProperty(t,"ConfigManager",{enumerable:!0,get:function(){return r(a).default}});var s=n(58);Object.defineProperty(t,"QueryContext",{enumerable:!0,get:function(){return r(s).default}})},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WeblabRulesAsyncResolverImpl=t.WeblabRulesResolverImpl=t.WeblabContext=void 0;var i=n(374);Object.defineProperty(t,"WeblabContext",{enumerable:!0,get:function(){return r(i).default}});var o=n(375);Object.defineProperty(t,"WeblabRulesResolverImpl",{enumerable:!0,get:function(){return r(o).default}});var a=n(380);Object.defineProperty(t,"WeblabRulesAsyncResolverImpl",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WeblabContext=void 0;var r=function(e){void 0===e&&(e={}),this.marketplaceId=e.marketplaceId,this.sessionId=e.sessionId,this.customerId=e.customerId};t.WeblabContext=r,t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resolve=function(e,t,n){var r;if(!this.validateInput(t,n))return e;var i=this.getWeblabTreatments(this.getDistinctWeblabNames(n),t);return null!==(r=this.findMatchingValue(n,i))&&void 0!==r?r:e},t.prototype.getWeblabTreatments=function(e,t){var n=this,r=void 0!==t;return new Map(Array.from(e,(function(e){return[e,r?n.weblabWithContextTreatmentResolver.getTreatment(e,t):n.weblabTreatmentResolver.getTreatment(e)]})))},t}(o(n(173)).default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientStage=t.WeblabRuleOperator=t.ACSClientError=void 0;var i=n(377);Object.defineProperty(t,"ACSClientError",{enumerable:!0,get:function(){return r(i).default}});var o=n(378);Object.defineProperty(t,"WeblabRuleOperator",{enumerable:!0,get:function(){return r(o).default}});var a=n(379);Object.defineProperty(t,"ClientStage",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AND="AND",e.OR="OR"}(r||(r={})),t.default=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SANDBOX="SANDBOX",e.DEVO="DEVO",e.PROD="PROD"}(r||(r={})),t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resolve=function(e,t,n){var r;return o(this,void 0,void 0,(function(){var i;return a(this,(function(o){switch(o.label){case 0:return this.validateInput(t,n)?[4,this.getWeblabTreatments(this.getDistinctWeblabNames(n),t)]:[2,e];case 1:return i=o.sent(),[2,null!==(r=this.findMatchingValue(n,i))&&void 0!==r?r:e]}}))}))},t.prototype.getWeblabTreatments=function(e,t){return void 0!==t?this.weblabWithContextTreatmentResolver.getTreatments(e,t):this.weblabTreatmentResolver.getTreatments(e)},t}(s(n(173)).default);t.default=u},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientStage=t.WeblabRuleOperator=t.ACSClientError=void 0;var i=n(382);Object.defineProperty(t,"ACSClientError",{enumerable:!0,get:function(){return r(i).default}});var o=n(383);Object.defineProperty(t,"WeblabRuleOperator",{enumerable:!0,get:function(){return r(o).default}});var a=n(384);Object.defineProperty(t,"ClientStage",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AND="AND",e.OR="OR"}(r||(r={})),t.default=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SANDBOX="SANDBOX",e.DEVO="DEVO",e.PROD="PROD"}(r||(r={})),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(386),i=n(392),o=function(){function e(){this.interceptors=[]}return e.prototype.addInterceptor=function(e){return this.interceptors.push(e),this},e.prototype.getInterceptors=function(){return this.interceptors},e.prototype.setQueryContextProvider=function(e){return this.queryContextProvider=e,this},e.prototype.setWeblabContextProvider=function(e){return this.weblabContextProvider=e,this},e.prototype.createConfigSet=function(e){return new r.ConfigSetImpl(e,this.interceptors,this.queryContextProvider,this.weblabContextProvider)},e.prototype.createAsyncConfigSet=function(e){return new i.ConfigSetImplAsync(e,this.interceptors,this.queryContextProvider,this.weblabContextProvider)},e}();t.default=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigSetImpl=void 0;var a=o(n(58)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getBoolean=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getString=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getInteger=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getList=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getObject=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.listBoolean=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listInteger=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listList=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listObject=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listString=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t}(n(174).AbstractConfigSetImpl);t.ConfigSetImpl=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(388)),s=o(n(58)),u=function(e){function t(t,n){var r=e.call(this)||this;return r.queryContextProvider=t,r.weblabContextProvider=n,r}return i(t,e),t.prototype.after=function(){},t.prototype.before=function(e){var t,n,r;e.queryContext=function(e,t){var n;if(!t)return null!=e?e:new s.default;var r=null!==(n=null==e?void 0:e.getContextEntries())&&void 0!==n?n:new Map,i=t.getContextEntries(),o=new Map;return r.forEach((function(e,t){o.set(t,e)})),i.forEach((function(e,t){o.set(t,e)})),new s.default(o)}(null===(t=this.queryContextProvider)||void 0===t?void 0:t.get(),e.queryContext),e.weblabContext=(r=null===(n=this.weblabContextProvider)||void 0===n?void 0:n.get(),e.weblabContext||r)},t}(a.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.intercept=function(e,t){this.before(e);var n=t.proceed(e);return this.after(e,n),n},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.interceptor=t,this.next=e}return e.create=function(t){t||(t=[]);var n=e.END_OF_CHAIN;return t.reverse().forEach((function(t){n=new e(n,t)})),n},e.prototype.proceed=function(e){return this.isEndOfChain()?e.executeTarget():this.interceptor.intercept(e,this.next)},e.prototype.isEndOfChain=function(){return this===e.END_OF_CHAIN||!this.interceptor||!this.next},e.END_OF_CHAIN=new e,e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(391)),o=function(){function e(e,t){this.target=e,this.interceptorChain=t}return e.prototype.intercept=function(e,t,n){var r=new i.default(this.target,e,t,n);return this.interceptorChain.proceed(r)},e.prototype.getValue=function(e,t,n){return this.intercept(e,t,n)},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){this.target=e,this.key=t,this.queryContext=n,this.weblabContext=r}return e.prototype.executeTarget=function(){return this.target.getValue(this.key,this.queryContext,this.weblabContext)},e}();t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigSetImplAsync=void 0;var a=o(n(58)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getBoolean=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getString=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getInteger=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getList=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.getObject=function(e,t,n){return this.configStoreProxy.getValue(e,null!=t?t:new a.default,n)},t.prototype.listBoolean=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listInteger=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listList=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listObject=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t.prototype.listString=function(e,t,n){throw new Error(this.LISTING_IS_NOT_SUPPORTED)},t}(n(174).AbstractConfigSetImpl);t.ConfigSetImplAsync=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(394)),o=function(){function e(){this.CONTEXTUAL_PARAMETERS=["acs_marketplace_id"],this.STAGE_VERSION_LABEL_NAME="AcsSidebarHelpPanelFeatureConfig",this.TABLE_NAME="acs_SidebarHelpPanelFeatureConfig"}return e.prototype.createTypeSafeClient=function(e){return new i.default(e)},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.configSet=e}return e.prototype.getFeatureConfigs=function(e,t){return this.configSet.getList("feature_configs",null==e?void 0:e.toRawContext(),t)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){void 0===e&&(e={}),this.precogEnabled=e.precogEnabled,this.opaFirstNavExperience=e.opaFirstNavExperience,this.firstTimeExperience=e.firstTimeExperience,this.opaIngressEnabled=e.opaIngressEnabled,this.urlRegex=e.urlRegex};t.default=r},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(6),i=n.n(r),o=n(4),a=n.n(o),s=n(3),u=n(1),l=n.n(u),c=n(2),f=n.n(c),d=n(0),h=n.n(d),p=n(19),_=n.n(p),g=function(e){return e.TRANSITION="Transition",e.INFORMATION="Information",e.ACTION="Action",e}({}),v=function(e){return e.COUNTER="Counter",e.TIMER="Timer",e}({}),y="SidebarHelpPanel",m="ShpBusinessMetric",b=n(175);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T="/help/center/inline/sidebar",C="/help/hub/inline/sidebar",x="sellercentral.amazon.dev",I=["mons_sel_mcid","mons_sel_dir_mcid","mons_sel_paid","mons_sel_dir_paid"],E=["mons_sel_locale","languageSwitched"];function O(e){var t=new Map;return k(e)&&e.replace("?","").split("&").forEach((function(e){var n=e.split("=",2);k(n[0])&&t.set(n[0],n.length>1?n[1]:"")})),t}function A(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}function k(e){return!!e&&""!==e.trim()}function M(e){return O(e.location.search).has("shpMetricsDebug")}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return e.location.hostname.endsWith(x)}function N(e){return e.replace(/\/$/,"")}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return R(N(e.location.pathname))}function R(e){var t=e.indexOf("/ref=");return t>=0?e.substring(0,t):e}function D(e){var t=O(e.location.search);return I.some((function(e){return t.has(e)}))||E.every((function(e){return t.has(e)}))}var j=function(){function e(t,n,r){l()(this,e),h()(this,"client",void 0),h()(this,"windowRef",void 0),h()(this,"katalMetricsPublisher",void 0),h()(this,"debugEnabled",void 0),this.client=t,this.windowRef=n,this.katalMetricsPublisher=r,this.debugEnabled=M(n),this.publishCommonMetricsData()}return f()(e,[{key:"publishCommonMetricsData",value:function(){var e=this.katalMetricsPublisher.getPublisher().newChildActionPublisherForMethod(m);e.publishStringTruncate("client",this.client),e.publishStringTruncate("client_language",this.windowRef.navigator.language),e.publishStringTruncate("server_language",document.documentElement.lang),e.publishStringTruncate("host",this.windowRef.location.hostname),e.publishStringTruncate("url",this.windowRef.location.pathname);var t=this.windowRef.navigator.userAgent,n=new b.UAParser(t),r=n.getOS().name,i=n.getDevice().type;e.publishStringTruncate("userAgent",t),e.publishStringTruncate("user_os",void 0!==r?r:""),e.publishStringTruncate("device_type",void 0!==i?i:"")}},{key:"publishBusinessMetric",value:function(e){this.debugEnabled&&console.info("SHP Metric published: ".concat(JSON.stringify(e)));var t=this.katalMetricsPublisher.getPublisher().newChildActionPublisherForMethod(m);t.publishStringTruncate("from",e.from),t.publishStringTruncate("where",e.where),t.publishStringTruncate("to",e.to),t.publishStringTruncate("type",e.type),t.publishStringTruncate("client_timestamp",Date.now()),t.publishStringTruncate("client",this.client);for(var n=Object.keys(e.additional),r=0;r<n.length;r++){var i=n[r],o=e.additional[i];t.publishStringTruncate(i,o)}}},{key:"publishOperationalMetric",value:function(e){this.debugEnabled&&console.info("SHP Metric published: ".concat(JSON.stringify(e)));var t=this.katalMetricsPublisher.getPublisher().newChildActionPublisherForMethod("".concat("ShpOpMetric",".").concat(this.client,".").concat(e.method));e.type===v.COUNTER&&t.publishCounterMonitor(e.key,e.value),e.type===v.TIMER&&t.publishTimerMonitor(e.key,e.value)}}]),e}(),B=n(59),F=n.n(B),U=n(43),V=n.n(U),H=n(20),W=n.n(H),q=n(60),z=n.n(q),G=function(){function e(t){l()(this,e),h()(this,"_metricsPublisher",void 0),this._metricsPublisher=t}return f()(e,[{key:"validateString",value:function(e){if(e.length<256)return e;throw new Error("Validation Exception: ".concat(e," has a length exceeding the maximum of 255 characters"))}},{key:"publisher",get:function(){return this._metricsPublisher}}]),e}();function X(e,t,n){return t=V()(t),F()(e,$()?Reflect.construct(t,n||[],V()(e).constructor):t.apply(e,n))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}var Y=function(e){function t(e){var n;return l()(this,t),n=X(this,t,[e]),h()(W()(n),"_from",void 0),h()(W()(n),"_where",void 0),h()(W()(n),"_to",void 0),h()(W()(n),"_type",void 0),h()(W()(n),"_additional",{}),n}return z()(t,e),f()(t,[{key:"from",value:function(e){return this._from=e,this}},{key:"where",value:function(e){return this._where=e,this}},{key:"to",value:function(e){return this._to=e,this}},{key:"type",value:function(e){return this._type=e,this}},{key:"additional",value:function(e,t){return this._additional[e]=t,this}},{key:"publish",value:function(){this.publisher.publishBusinessMetric(this.buildMetric())}},{key:"buildMetric",value:function(){var e=[];if(void 0===this._from&&e.push("from"),void 0===this._where&&e.push("where"),void 0===this._to&&e.push("to"),void 0===this._type&&e.push("type"),e.length>0)throw new Error("Invalid metric attempted to be built. Missing required keys [".concat(e.join(", "),"]"));return this.state}},{key:"state",get:function(){return{from:this._from,where:this._where,to:this._to,type:this._type,additional:this._additional}}}]),t}(G);function J(e,t,n){return t=V()(t),F()(e,K()?Reflect.construct(t,n||[],V()(e).constructor):t.apply(e,n))}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}var Q=function(e){function t(e){var n;return l()(this,t),n=J(this,t,[e]),h()(W()(n),"_key",void 0),h()(W()(n),"_value",void 0),h()(W()(n),"_method",void 0),h()(W()(n),"_type",void 0),n}return z()(t,e),f()(t,[{key:"key",value:function(e){return this._key=this.validateString(e),this}},{key:"value",value:function(e){return this._value=e,this}},{key:"type",value:function(e){return this._type=e,this}},{key:"method",value:function(e){return this._method=this.validateString(e),this}},{key:"publish",value:function(){this.publisher.publishOperationalMetric(this.buildMetric())}},{key:"buildMetric",value:function(){var e=[];if(void 0===this._key&&e.push("key"),void 0===this._value&&e.push("value"),void 0===this._type&&e.push("type"),void 0===this._method&&e.push("method"),e.length>0)throw new Error("Invalid metric attempted to be built. Missing required keys [".concat(e.join(", "),"]"));return this.state}},{key:"state",get:function(){return{type:this._type,key:this._key,value:this._value,method:this._method}}}]),t}(G),Z=(n(212),n(176)),ee=n.n(Z),te=(n(270),function(){function e(){l()(this,e),h()(this,"publisher",void 0),this.getPublisher=this.getPublisher.bind(this),this.getConcretePublisher=this.getConcretePublisher.bind(this),this.logErrorToConsole=this.logErrorToConsole.bind(this)}return f()(e,[{key:"getPublisher",value:function(){return void 0===this.publisher&&(this.publisher=this.getConcretePublisher()),this.publisher}},{key:"getConcretePublisher",value:function(){var e=ee.a.makePublisher(y);return e.driver.beforeUnload(wt),e}},{key:"logErrorToConsole",value:function(e){console.log(e,y)}}]),e}()),ne=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;l()(this,e),h()(this,"metricsPublisher",void 0),this.metricsPublisher=new j(t,n,new te)}return f()(e,[{key:"newBusinessMetrics",value:function(){return new Y(this.metricsPublisher)}},{key:"newOperationalMetrics",value:function(){return new Q(this.metricsPublisher)}}]),e}(),re=function(e){return e.ShpContainerId="sidebar-help-panel-container",e.ShpHeaderId="shp-header",e.ShpErrorMessageId="shp-content-container",e.ShpContentContainerId="shp-content-container",e.ShpContentContainerSpinnerClass="shp-content-container-spinner",e.ShpContentContainerSpinnerId="shp-content-container-spinnerId",e.ShpFooterId="shp-footer",e.ShpContentFrameId="shp-content-frame",e.ShpHeaderContainer="shp-headers-container",e.ShpHeaderTitleId="shp-header-title",e.ShpSubHeaderTitleId="shp-subheader-title",e.ShpBackButtonId="shp-button-back",e.ShpCloseButtonId="shp-button-close",e.ShpDockButtonId="shp-button-dock",e.ShpUnDockButtonId="shp-button-undock",e.ShpOpenButtonId="shp-button-open",e.ShpExpandButtonId="shp-button-expand",e.ShpSearchContainerId="shp-search",e.ShpSearchFormId="shp-search-form",e.ShpSearchInputId="shp-search-input",e.ShpSearchButtonId="shp-search-button",e.PageSquisherId="athena-controlled-width-area",e.AdditionalParamsId="shp-additional-params",e.ShpWindowContainerId="sidebar-help-panel-window-container",e.MonsBodyContainerId="mons-body-container",e.PageSquishAnimationStylesId="shp-page-squish-animation-styles",e.PageSquishedStylesId="shp-page-squished-styles",e.ExpandedActionMenuContainer="shp-expanded-action-menu-container",e.ActionExpander="shp-action-expander",e.CustomPrimaryAction="shp-custom-primary-button",e}({}),ie=function(e){return e.IngressHostId="shp-ingress-host",e.IngressContainerId="shp-ingress-container",e.IconContainerId="shp-ingress-icon-container",e.CounterContainerId="shp-ingress-counter-container",e.TooltipContainerId="shp-ingress-tooltip-container",e.MessageContainerId="shp-ingress-message-container",e.CloseBtnContainerId="shp-ingress-close-btn-container",e}({}),oe=function(e){return e.EnableMeldSidebar="data-enable-meld-sidebar",e.MarketplaceId="data-marketplace-id",e.SupportIngressEnabled="data-support-ingress-enabled",e}({}),ae="shp-hide",se="shp-active",ue="shp-docked",le="shp-undocked",ce="shp-force-docked",fe="shp-hide-ingress",de="shp-visibility-hidden",he="summoned",pe="meld-width",_e="moving",ge="shp",ve=function(e){return e.Click="click",e.Dismiss="Dismiss",e.Display="Display",e.SummonShp="SummonShp",e.UnloadWhileShpIsOpen="UnloadWhileShpIsOpen",e}({}),ye=function(e){return e.Page="Page",e.OnPageAssistantIngress="OnPageAssistantIngress",e.OpaFirstTimeExperience="OnPageAssistantFirstTimeExperience",e.Search="Search",e.OPAFirst="OPAFirst",e.TrimHandleHelpLink="TrimHandleHelpLink",e.Support="Support",e.ShpBackButton="shpBackButton",e.SearchSuggestionDisplayed="SearchSuggestionDisplayed",e.SearchSuggestionSelected="SearchSuggestionSelected",e.ShpDockButton="shpDockButton",e.ShpUnDockButton="shpUnDockButton",e.ShpCloseButton="shpCloseButton",e.ShpExpandButton="shpExpandButton",e.ShpIngress="shpIngress",e.ShpOpenButton="shpOpenButton",e.SolutionDisplay="SolutionDisplay",e.InvalidSolutionType="InvalidSolutionType",e.CustomPageDisplay="CustomPageDisplay",e.MeldHandshake="meldHandshake",e.Unknown="Unknown",e.NewConversation="NewConversation",e.LoadConversation="LoadConversation",e}({}),me=function(e){return e.SidebarVersion="sidebarVersion",e.SuggestionType="suggestionType",e.SuggestionText="suggestionText",e.SuggestionAdditionalData="suggestionAdditionalData",e.SuggestionWeight="suggestionWeight",e}({}),be=function(e){return e.HelpHub="helpHub",e.Meld="meld",e}({}),we=function(e){return e.Pull="pull",e.Push="push",e}({}),Se="410px",Te="400px",Ce="200ms",xe="".concat(300,"ms"),Ie="data-sidebar-version",Ee=function(e){return e[e.SetupFirstTime=0]="SetupFirstTime",e[e.SetupForSPA=1]="SetupForSPA",e}({});function Oe(e){return document.getElementById(e)}function Ae(){if(!document.getElementById(re.ShpContainerId)){var e=qe("div",re.ShpContainerId);e.setAttribute(oe.EnableMeldSidebar,"true"),e.style.setProperty("display","block","important"),e.style.setProperty("height","0px","important"),e.style.setProperty("width","0px","important"),e.style.setProperty("padding","0px","important"),e.style.setProperty("margin","0px","important"),e.style.setProperty("border","0px","important"),e.style.setProperty("line-height","0px","important"),e.style.setProperty("overflow","hidden","important"),document.body.append(e)}}function ke(e){(e===Ee.SetupFirstTime?[document,Le()]:e===Ee.SetupForSPA?[Le()]:[]).forEach((function(e){return null==e?void 0:e.dispatchEvent(new Event("shpReady"))}))}function Me(e){(e===Ee.SetupFirstTime?[window,Pe()]:e===Ee.SetupForSPA?[Pe()]:[]).forEach((function(e){e&&(e.ATHENA_DISABLE_EXTERNAL_LINK_ONCLICK=!0)}))}function Pe(){var e,t;return null!==(e=null===(t=Ne())||void 0===t?void 0:t.contentWindow)&&void 0!==e?e:null}function Ne(){return window.Mons&&document.getElementById(re.MonsBodyContainerId)}function Le(){var e;return null===(e=Pe())||void 0===e?void 0:e.document}function Re(){var e;return null!==(e=Le())&&void 0!==e?e:document}function De(e){return Re().getElementById(e)}function je(e){return document.getElementById(re.ShpContainerId).querySelector("#".concat(e))}function Be(){var e;return null===(e=document.getElementById(re.ShpWindowContainerId))||void 0===e?void 0:e.classList.contains(ue)}function Fe(){var e;return null===(e=document.getElementById(re.ShpWindowContainerId))||void 0===e?void 0:e.classList.contains(he)}function Ue(){var e;return null===(e=document.getElementById(re.ShpContainerId))||void 0===e?void 0:e.classList.contains(he)}function Ve(e){var t=e.documentElement,n=e.cssContent,r=e.styleId,i=t.createElement("style");t.head.appendChild(i),i.id=r,i.textContent=n}function He(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Ue()?Se:Fe()&&Be()?Te:null;if(null!==t&&Pe()){var n=Re(),r=n.head;r.querySelector("#".concat(re.PageSquishAnimationStylesId))||Ve({documentElement:n,styleId:re.PageSquishAnimationStylesId,cssContent:"\n      #athena-controlled-width-area {\n        width: 0;\n        transition: ".concat(xe,";\n      }\n      ")});var i=function(){return!r.querySelector("#".concat(re.PageSquishedStylesId))&&Ve({documentElement:n,styleId:re.PageSquishedStylesId,cssContent:"\n      #athena-controlled-width-area {\n        overflow: hidden;\n        width: ".concat(t,";\n        transition: ").concat(Ce,";\n      }\n      ")})};e?setTimeout(i,0):i()}}function We(){var e;null===(e=Re().head.querySelector("#".concat(re.PageSquishedStylesId)))||void 0===e||e.remove(),setTimeout((function(){var e;return null===(e=Re().head.querySelector("#".concat(re.PageSquishAnimationStylesId)))||void 0===e?void 0:e.remove()}),300)}function qe(e,t,n){var r=document.createElement(e);return t&&r.setAttribute("id",t),n&&r.setAttribute("class",n),r}function ze(e){var t;null===(t=Oe(re.ShpContainerId))||void 0===t||t.setAttribute(Ie,e)}function Ge(){var e;switch(null===(e=Oe(re.ShpContainerId))||void 0===e?void 0:e.getAttribute(Ie)){case be.HelpHub:return be.HelpHub;case be.Meld:return be.Meld;default:return null}}function Xe(e,t){var n=qe("iframe",re.ShpContentFrameId,re.ShpContentFrameId);n.setAttribute(Ie,t);var r=P()?".InternalSite":"",i="ContentFrame.".concat(t).concat(r);return n.setAttribute("sandbox","allow-scripts allow-forms allow-same-origin allow-popups allow-top-navigation"),n.setAttribute("frameborder","0"),n.setAttribute("name","spl-element-frame-wrapper"),n.onload=function(){var e,r;!function(){if(n.contentWindow){var e=n.contentWindow.location.pathname;(t!==be.HelpHub||e.startsWith("/help/hub"))&&(t!==be.Meld||e.startsWith("/help/center"))||yt(i,"LoadedWithNonHelpUrl",1)}}(),r=null===(e=n.contentWindow)||void 0===e||null===(e=e.location)||void 0===e?void 0:e.pathname,t===be.Meld&&(null==r?void 0:r.startsWith("/ap/signin"))&&window.location.reload()},n.setAttribute("src",e),yt(i,"Created",1),P()||yt("".concat(i,".").concat(Ke()),"Created",1),n}function $e(e){for(;null!=e&&e.firstChild;)e.removeChild(e.firstChild)}function Ye(e){null==e||e.classList.remove(ae)}function Je(e){null==e||e.classList.add(ae)}function Ke(){var e,t;return null!==(e=null===(t=document.querySelector("meta[name='a2z:mons_app_name']"))||void 0===t?void 0:t.getAttribute("content"))&&void 0!==e?e:"Unknown"}function Qe(e){e.tabIndex=0,function(e){e.onkeyup=function(t){"Enter"===t.key&&e.click()}}(e)}function Ze(e,t){return new Promise((function(n,r){var i=void 0;void 0!==t&&(i=window.setTimeout((function(){return r("Timeout of ".concat(t," expired while waiting for ").concat(e," to be dispatched"))}),t)),document.addEventListener(e,(function(){void 0!==i&&window.clearTimeout(i),n()}))}))}var et=void 0,tt=ye.Unknown;function nt(){return et||(et=new ne(ge)),et}function rt(e){tt=e}function it(e,t){yt("i18LoadFailure",e,t?1:0)}function ot(e){yt("cssLoad","Failure",e?1:0)}function at(){yt("searchEvent","SearchEvent",1)}function st(e){Tt().where(ye.ShpBackButton).to(ve.Click).type(g.ACTION).additional(me.SidebarVersion,e).publish()}function ut(e){Tt().where(ye.ShpDockButton).to(ve.Click).type(g.ACTION).additional(me.SidebarVersion,e).publish()}function lt(e){Tt().where(ye.ShpUnDockButton).to(ve.Click).type(g.ACTION).additional(me.SidebarVersion,e).publish()}function ct(e){Tt().where(ye.ShpExpandButton).to(ve.Click).type(g.ACTION).additional(me.SidebarVersion,e).publish()}function ft(e,t){yt(ye.Search,"Count",1),yt("sidebarVersion:".concat(t),"Search.Count",1),yt(e,"Search.Count",1),St(e,ye.Search,t)}function dt(e,t){yt(ye.TrimHandleHelpLink,"Count",1),yt("sidebarVersion:".concat(t),"TrimHandleHelpLink.Count",1),yt(e,"TrimHandleHelpLink.Count",1)}function ht(e,t,n,r){yt(ye.SolutionDisplay,"Count",1),yt(e,"".concat(t,".Count"),1),yt("sidebarVersion:".concat(r),"".concat(t,".Count"),1),St(e,ye.SolutionDisplay,r,{solutionType:t,solutionId:n})}function pt(e,t){yt(ye.Support,"Count",1),yt("sidebarVersion:".concat(t),"Support.Count",1),yt(e,"Support.Count",1),St(e,ye.Support,t)}function _t(e,t){yt(ye.CustomPageDisplay,"Count",1),yt(e,"CustomPage.Count",1),yt("sidebarVersion:".concat(t),"CustomPage.Count",1),yt("sidebarVersion:".concat(t,":").concat(e),"CustomPage.Count",1),St(e,ye.CustomPageDisplay,t)}function gt(e){Tt().where(ye.ShpCloseButton).to(ve.Click).type(g.ACTION).additional(me.SidebarVersion,e).publish()}function vt(){Tt().where(ye.ShpOpenButton).to(ve.Click).type(g.ACTION).publish()}function yt(e,t,n){bt(e,t,n,v.COUNTER)}function mt(e,t,n){bt(e,t,n,v.TIMER)}function bt(e,t,n,r){nt().newOperationalMetrics().method(e).key(t).value(n).type(r).publish()}function wt(){var e;(null===(e=Oe(re.ShpContainerId))||void 0===e?void 0:e.classList.contains(he))&&Tt().where(ye.Page).to(ve.UnloadWhileShpIsOpen).type(g.INFORMATION).additional("lastSummonIngress",tt).publish()}function St(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Tt().where(t).to(ve.SummonShp).type(g.ACTION).additional("shpClient",e).additional(me.SidebarVersion,n);Object.keys(r).forEach((function(e){return i.additional(e,r[e])})),i.publish(),rt(t)}function Tt(){return nt().newBusinessMetrics().from(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.pathname}())}function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e){var t=function(e,t){if("object"!=Ct(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ct(t)?t:String(t)}function It(e,t,n){return(t=xt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){It(e,t,n[t])}))}return e}function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xt(r.key),r)}}function kt(e,t,n){return t&&At(e.prototype,t),n&&At(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e,t){if(t&&("object"===Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mt(e)}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t){return(Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lt(e,t)}var Dt={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},jt=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ot(this,e),this.init(t,n)}return kt(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Dt,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,Et({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),Bt=function(){function e(){Ot(this,e),this.observers={}}return kt(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var i=[].concat(this.observers[e]);i.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Ft(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Ut(e){return null==e?"":""+e}function Vt(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function Ht(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return i()?{}:{obj:e,k:r(o.shift())}}function Wt(e,t,n){var r=Ht(e,t,Object);r.obj[r.k]=n}function qt(e,t){var n=Ht(e,t),r=n.obj,i=n.k;if(r)return r[i]}function zt(e,t,n){var r=qt(e,n);return void 0!==r?r:qt(t,n)}function Gt(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):Gt(e[r],t[r],n):e[r]=t[r]);return e}function Xt(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var $t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Yt(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return $t[e]})):e}var Jt="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Kt=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Ot(this,t),n=Pt(this,Nt(t).call(this)),Jt&&Bt.call(Mt(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return Rt(t,e),kt(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[e,t];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split(".")),qt(this.data,o)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),Wt(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var s=qt(this.data,a)||{};r?Gt(s,n,i):s=Et({},s,n),Wt(this.data,a,s),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Et({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(Bt),Qt={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))})),t}},Zt={},en=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ot(this,t),n=Pt(this,Nt(t).call(this)),Jt&&Bt.call(Mt(n)),Vt(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,Mt(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=jt.create("translator"),n}return Rt(t,e),kt(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var o=e.match(this.interpolator.nestingRegexp);if(o&&o.length>0)return{key:e,namespaces:i};var a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),e=a.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,r){var i=this;if("object"!==Ct(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],n),s=a.key,u=a.namespaces,l=u[u.length-1],c=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(f){var d=n.nsSeparator||this.options.nsSeparator;return l+d+s}return s}var h=this.resolve(e,n),p=h&&h.res,_=h&&h.usedKey||s,g=h&&h.exactUsedKey||s,v=Object.prototype.toString.apply(p),y=["[object Number]","[object Function]","[object RegExp]"],m=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,w="string"!=typeof p&&"boolean"!=typeof p&&"number"!=typeof p;if(b&&p&&w&&y.indexOf(v)<0&&("string"!=typeof m||"[object Array]"!==v)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(_,p,n):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(o){var S="[object Array]"===v,T=S?[]:{},C=S?g:_;for(var x in p)if(Object.prototype.hasOwnProperty.call(p,x)){var I="".concat(C).concat(o).concat(x);T[x]=this.translate(I,Et({},n,{joinArrays:!1,ns:u})),T[x]===I&&(T[x]=p[x])}p=T}}else if(b&&"string"==typeof m&&"[object Array]"===v)(p=p.join(m))&&(p=this.extendTranslation(p,e,n,r));else{var E=!1,O=!1,A=void 0!==n.count&&"string"!=typeof n.count,k=t.hasDefaultValue(n),M=A?this.pluralResolver.getSuffix(c,n.count):"",P=n["defaultValue".concat(M)]||n.defaultValue;!this.isValidLookup(p)&&k&&(E=!0,p=P),this.isValidLookup(p)||(O=!0,p=s);var N=k&&P!==p&&this.options.updateMissing;if(O||E||N){if(this.logger.log(N?"updateKey":"missingKey",c,l,s,N?P:p),o){var L=this.resolve(s,Et({},n,{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var R=[],D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&D&&D[0])for(var j=0;j<D.length;j++)R.push(D[j]);else"all"===this.options.saveMissingTo?R=this.languageUtils.toResolveHierarchy(n.lng||this.language):R.push(n.lng||this.language);var B=function(e,t,r){i.options.missingKeyHandler?i.options.missingKeyHandler(e,l,t,N?r:p,N,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,l,t,N?r:p,N,n),i.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&A?R.forEach((function(e){i.pluralResolver.getSuffixes(e).forEach((function(t){B([e],s+t,n["defaultValue".concat(t)]||P)}))})):B(R,s,P))}p=this.extendTranslation(p,e,n,h,r),O&&p===s&&this.options.appendNamespaceToMissingKey&&(p="".concat(l,":").concat(s)),O&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(p))}return p}},{key:"extendTranslation",value:function(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Et({},n,{interpolation:Et({},this.options.interpolation,n.interpolation)}));var a,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var u=e.match(this.interpolator.nestingRegexp);a=u&&u.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=Et({},this.options.interpolation.defaultVariables,l)),e=this.interpolator.interpolate(e,l,n.lng||this.language,n),s){var c=e.match(this.interpolator.nestingRegexp);a<(c&&c.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):o.translate.apply(o,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,d="string"==typeof f?[f]:f;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=Qt.handle(d,e,t,this.options&&this.options.postProcessPassResolved?Et({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!a.isValidLookup(t)){var u=a.extractFromKey(e,s),l=u.key;n=l;var c=u.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var f=void 0!==s.count&&"string"!=typeof s.count,d=void 0!==s.context&&"string"==typeof s.context&&""!==s.context,h=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach((function(e){a.isValidLookup(t)||(o=e,!Zt["".concat(h[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(Zt["".concat(h[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!a.isValidLookup(t)){i=n;var o,u,c=l,h=[c];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(h,l,n,e,s);else f&&(o=a.pluralResolver.getSuffix(n,s.count)),f&&d&&h.push(c+o),d&&h.push(c+="".concat(a.options.contextSeparator).concat(s.context)),f&&h.push(c+=o);for(;u=h.pop();)a.isValidLookup(t)||(r=u,t=a.getResource(n,e,u,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}(Bt);function tn(e){return e.charAt(0).toUpperCase()+e.slice(1)}var nn=function(){function e(t){Ot(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=jt.create("languageUtils")}return kt(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=tn(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=tn(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=tn(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&o(n.formatLanguageCode(e))})),i}}]),e}(),rn=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],on={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function an(){var e={};return rn.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:on[t.fc]}}))})),e}var sn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ot(this,e),this.languageUtils=t,this.options=n,this.logger=jt.create("pluralResolver"),this.rules=an()}return kt(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),un=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ot(this,e),this.logger=jt.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return kt(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:Yt,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Xt(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Xt(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Xt(t.nestingPrefix):t.nestingPrefixEscaped||Xt("$t("),this.nestingSuffix=t.nestingSuffix?Xt(t.nestingSuffix):t.nestingSuffixEscaped||Xt(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,a,s=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(e){return e.replace(/\$/g,"$$$$")}var c=function(e){if(e.indexOf(s.formatSeparator)<0){var i=zt(t,u,e);return s.alwaysFormat?s.format(i,void 0,n):i}var o=e.split(s.formatSeparator),a=o.shift().trim(),l=o.join(s.formatSeparator).trim();return s.format(zt(t,u,a),l,n,r)};this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return l(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?l(s.escape(e)):l(e)}}].forEach((function(t){for(a=0;i=t.regex.exec(e);){if(void 0===(o=c(i[1].trim())))if("function"==typeof f){var n=f(e,i,r);o="string"==typeof n?n:""}else{if(d){o=i[0];continue}s.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),o=""}else"string"==typeof o||s.useRawValueToEscape||(o=Ut(o));if(e=e.replace(i[0],t.safeValue(o)),t.regex.lastIndex=0,++a>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Et({},o);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,a)).replace(/'/g,'"');try{a=JSON.parse(i),t&&(a=Et({},t,a))}catch(o){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),o),"".concat(e).concat(n).concat(i)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var u=[],l=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=c.shift(),u=c,l=!0}if((r=t(s.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Ut(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=u.reduce((function(e,t){return i.format(e,t,o.lng,o)}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var ln=function(e){function t(e,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ot(this,t),i=Pt(this,Nt(t).call(this)),Jt&&Bt.call(Mt(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=o,i.logger=jt.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,o.backend,o),i}return Rt(t,e),kt(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o=[],a=[],s=[],u=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?a.indexOf(s)<0&&a.push(s):(i.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),o.indexOf(s)<0&&o.push(s),u.indexOf(t)<0&&u.push(t)))})),r||s.push(e)})),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:o,pending:a,toLoadLanguages:s,toLoadNamespaces:u}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var a={};this.queue.forEach((function(n){var r,s,u,l,c,f;r=n.loaded,s=o,l=Ht(r,[i],Object),c=l.obj,f=l.k,c[f]=c[f]||[],u&&(c[f]=c[f].concat(s)),u||c[f].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){a[e].indexOf(t)<0&&a[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,u){s&&u&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*o,a)}),o):a(s,u)})):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),a),t.loaded(e,r,a)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,Et({},o,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}(Bt);function cn(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===Ct(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===Ct(e[2])||"object"===Ct(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function fn(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function dn(){}var hn=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(Ot(this,t),e=Pt(this,Nt(t).call(this)),Jt&&Bt.call(Mt(e)),e.options=fn(n),e.services={},e.logger=jt,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),Pt(e,Mt(e));setTimeout((function(){e.init(n,r)}),0)}return e}return Rt(t,e),kt(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=Et({},cn(),this.options,fn(t)),this.format=this.options.interpolation.format,n||(n=dn),!this.options.isClone){this.modules.logger?jt.init(r(this.modules.logger),this.options):jt.init(null,this.options);var i=new nn(this.options);this.store=new Kt(this.options.resources,this.options);var o=this.services;o.logger=jt,o.resourceStore=this.store,o.languageUtils=i,o.pluralResolver=new sn(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new un(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new ln(r(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(o.languageDetector=r(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=r(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new en(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.length>0&&"dev"!==a[0]&&(this.options.lng=a[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var u=["addResource","addResources","addResourceBundle","removeResourceBundle"];u.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var l=Ft(),c=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),l.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn,r=n,i="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var o=[],a=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){o.indexOf(e)<0&&o.push(e)}))};if(i)a(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return a(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return a(e)})),this.services.backendConnector.load(o,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=Ft();return e||(e=this.languages),t||(t=this.options.ns),n||(n=dn),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Qt.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Ft();this.emit("languageChanging",e);var i=function(e){var i="string"==typeof e?e:n.services.languageUtils.getBestMatchFromCodes(e);i&&(n.language||(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i)),n.translator.language||n.translator.changeLanguage(i),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(i)),n.loadResources(i,(function(e){!function(e,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var i;if("object"!==Ct(r)){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];i=n.options.overloadTranslationOptionHandler([t,r].concat(a))}else i=Et({},r);return i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,n.t(t,i)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!a(r,e)||i&&!a(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Ft();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Ft();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn,i=Et({},this.options,n,{isClone:!0}),o=new t(i),a=["store","services","language"];return a.forEach((function(t){o[t]=e[t]})),o.services=Et({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new en(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))})),o.init(i,r),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}}]),t}(Bt)),pn=[],_n=pn.forEach,gn=pn.slice;function vn(e){return _n.call(gn.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}function yn(e,t){if(t&&"object"===Ct(t)){var n="",r=encodeURIComponent;for(var i in t)n+="&"+r(i)+"="+r(t[i]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e}function mn(e,t,n,r,i){r&&"object"===Ct(r)&&(i||(r._t=new Date),r=yn("",r).slice(1)),t.queryStringParams&&(e=yn(e,t.queryStringParams));try{var o;(o=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0")).open(r?"POST":"GET",e,1),t.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!t.withCredentials,r&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var a=t.customHeaders;if(a="function"==typeof a?a():a)for(var s in a)o.setRequestHeader(s,a[s]);o.onreadystatechange=function(){o.readyState>3&&n&&n(o.responseText,o)},o.send(r)}catch(u){console&&console.log(u)}}function bn(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,parsePayload:function(e,t,n){return It({},t,n||"")},crossDomain:!1,ajax:mn}}var wn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ot(this,e),this.init(t,n),this.type="backend"}return kt(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=vn(t,this.options||{},bn())}},{key:"readMulti",value:function(e,t,n){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath(e,t));var i=this.services.interpolator.interpolate(r,{lng:e.join("+"),ns:t.join("+")});this.loadUrl(i,n)}},{key:"read",value:function(e,t,n){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath([e],[t]));var i=this.services.interpolator.interpolate(r,{lng:e,ns:t});this.loadUrl(i,n)}},{key:"loadUrl",value:function(e,t){var n=this;this.options.ajax(e,this.options,(function(r,i){if(i.status>=500&&i.status<600)return t("failed loading "+e,!0);if(i.status>=400&&i.status<500)return t("failed loading "+e,!1);var o,a;try{o=n.options.parse(r,e)}catch(s){a="failed parsing "+e+" to json"}if(a)return t(a,!1);t(null,o)}))}},{key:"create",value:function(e,t,n,r){var i=this;"string"==typeof e&&(e=[e]);var o=this.options.parsePayload(t,n,r);e.forEach((function(e){var n=i.services.interpolator.interpolate(i.options.addPath,{lng:e,ns:t});i.options.ajax(n,i.options,(function(e,t){}),o)}))}}]),e}();wn.type="backend";var Sn=wn,Tn=n(177),Cn=n.n(Tn),xn=[],In=xn.forEach,En=xn.slice;function On(e){return In.call(En.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}var An=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,kn=function(e,t,n){var r=n||{};r.path=r.path||"/";var i=encodeURIComponent(t),o="".concat(e,"=").concat(i);if(r.maxAge>0){var a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(r.domain){if(!An.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(r.domain)}if(r.path){if(!An.test(r.path))throw new TypeError("option path is invalid");o+="; Path=".concat(r.path)}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");o+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},Mn=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*n*1e3)),r&&(i.domain=r),document.cookie=kn(e,encodeURIComponent(t),i)},Pn=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},Nn={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=Pn(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&Mn(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},Ln={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=n.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].indexOf("=");if(o>0)r[i].substring(0,o)===e.lookupQuerystring&&(t=r[i].substring(o+1))}}return t}},Rn=null,Dn=function(){if(null!==Rn)return Rn;try{Rn="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(t){Rn=!1}return Rn},jn={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&Dn()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&Dn()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Bn=null,Fn=function(){if(null!==Bn)return Bn;try{Bn="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(t){Bn=!1}return Bn},Un={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&Fn()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&Fn()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},Vn={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},Hn={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},Wn={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},qn={name:"subdomain",lookup:function(e){var t="number"==typeof e.lookupFromSubdomainIndex?e.lookupFromSubdomainIndex+1:1,n="undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}};var zn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ot(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return kt(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=On(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Nn),this.addDetector(Ln),this.addDetector(jn),this.addDetector(Un),this.addDetector(Vn),this.addDetector(Hn),this.addDetector(Wn),this.addDetector(qn)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n=[];return e.forEach((function(e){if(t.detectors[e]){var r=t.detectors[e].lookup(t.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}]),e}();zn.type="languageDetector";var Gn={"SidebarHelpPanelAssets-ar-AE":"i18n/SidebarHelpPanelAssets/ar-AE.5c713a2ca7289a347acc1ca33fc1f1a7.i18next.json","SidebarHelpPanelAssets-bn-IN":"i18n/SidebarHelpPanelAssets/bn-IN.998ecd55ef35789dd39928beb0384080.i18next.json","SidebarHelpPanelAssets-de-DE":"i18n/SidebarHelpPanelAssets/de-DE.26e8cd3af2272550e41c63120e94588d.i18next.json","SidebarHelpPanelAssets-en-AU":"i18n/SidebarHelpPanelAssets/en-AU.06039f1499006d3c3263b3ba86ae7c62.i18next.json","SidebarHelpPanelAssets-en-CA":"i18n/SidebarHelpPanelAssets/en-CA.06039f1499006d3c3263b3ba86ae7c62.i18next.json","SidebarHelpPanelAssets-en-GB":"i18n/SidebarHelpPanelAssets/en-GB.06039f1499006d3c3263b3ba86ae7c62.i18next.json","SidebarHelpPanelAssets-en-IE":"i18n/SidebarHelpPanelAssets/en-IE.c21181ab83f55185734336dfb75f5201.i18next.json","SidebarHelpPanelAssets-en-IN":"i18n/SidebarHelpPanelAssets/en-IN.c5ebc74e34b1c531b9a5c750f39e0601.i18next.json","SidebarHelpPanelAssets-en-SG":"i18n/SidebarHelpPanelAssets/en-SG.06039f1499006d3c3263b3ba86ae7c62.i18next.json","SidebarHelpPanelAssets-en-US":"i18n/SidebarHelpPanelAssets/en-US.06039f1499006d3c3263b3ba86ae7c62.i18next.json","SidebarHelpPanelAssets-en-ZA":"i18n/SidebarHelpPanelAssets/en-ZA.06039f1499006d3c3263b3ba86ae7c62.i18next.json","SidebarHelpPanelAssets-es-ES":"i18n/SidebarHelpPanelAssets/es-ES.6426311fa6433014a8be5f279285873c.i18next.json","SidebarHelpPanelAssets-es-MX":"i18n/SidebarHelpPanelAssets/es-MX.c828270ac80fd02d344c1ef5b92bcb50.i18next.json","SidebarHelpPanelAssets-fr-BE":"i18n/SidebarHelpPanelAssets/fr-BE.d890e82bf69abfc2eb1d217942ac64b1.i18next.json","SidebarHelpPanelAssets-fr-CA":"i18n/SidebarHelpPanelAssets/fr-CA.3ca6743b1b9b445a2ce43ed9fb22f354.i18next.json","SidebarHelpPanelAssets-fr-FR":"i18n/SidebarHelpPanelAssets/fr-FR.865c5404b7678d52213f004fff074ef8.i18next.json","SidebarHelpPanelAssets-gu-IN":"i18n/SidebarHelpPanelAssets/gu-IN.1f3b8730e6474a679e9e1340883902e4.i18next.json","SidebarHelpPanelAssets-hi-IN":"i18n/SidebarHelpPanelAssets/hi-IN.72b138129e8c7b0e9ec5f5e2b395eaf4.i18next.json","SidebarHelpPanelAssets-it-IT":"i18n/SidebarHelpPanelAssets/it-IT.ee32042aa651719e5b4286f872448c1e.i18next.json","SidebarHelpPanelAssets-ja-JP":"i18n/SidebarHelpPanelAssets/ja-JP.c0e405c7d8a25f54ba1bd6420caadce1.i18next.json","SidebarHelpPanelAssets-kn-IN":"i18n/SidebarHelpPanelAssets/kn-IN.4efe07cb1953e3bae3a96aceec3a1e61.i18next.json","SidebarHelpPanelAssets-ko-KR":"i18n/SidebarHelpPanelAssets/ko-KR.a59928fe51ef76c90ab03fc47d2e2568.i18next.json","SidebarHelpPanelAssets-ml-IN":"i18n/SidebarHelpPanelAssets/ml-IN.071e9e74b24691808e96ba59eace93be.i18next.json","SidebarHelpPanelAssets-mr-IN":"i18n/SidebarHelpPanelAssets/mr-IN.83c8de884f85c7a75f5ea6c161af748c.i18next.json","SidebarHelpPanelAssets-nl-BE":"i18n/SidebarHelpPanelAssets/nl-BE.7063b6aad125460a90aab3622113901f.i18next.json","SidebarHelpPanelAssets-nl-NL":"i18n/SidebarHelpPanelAssets/nl-NL.63aaff665b26624bc529f8f897214bc1.i18next.json","SidebarHelpPanelAssets-pl-PL":"i18n/SidebarHelpPanelAssets/pl-PL.abfdce86a096cfc43dcff01b3519c58a.i18next.json","SidebarHelpPanelAssets-pt-BR":"i18n/SidebarHelpPanelAssets/pt-BR.9d6ad104e956537fc14823b0d57d2f30.i18next.json","SidebarHelpPanelAssets-pt-PT":"i18n/SidebarHelpPanelAssets/pt-PT.2a9699d1338a4699bdb7d8d813a2264a.i18next.json","SidebarHelpPanelAssets-sv-SE":"i18n/SidebarHelpPanelAssets/sv-SE.20c0b93f505f02303c9cb015c15a7a39.i18next.json","SidebarHelpPanelAssets-ta-IN":"i18n/SidebarHelpPanelAssets/ta-IN.f8960317ca2139b6fd29e0dda3baf450.i18next.json","SidebarHelpPanelAssets-te-IN":"i18n/SidebarHelpPanelAssets/te-IN.ccf9ac44838a3e2331ef27e30a54d8b6.i18next.json","SidebarHelpPanelAssets-th-TH":"i18n/SidebarHelpPanelAssets/th-TH.45008f178e53c8cd317c15ec62d67561.i18next.json","SidebarHelpPanelAssets-tr-TR":"i18n/SidebarHelpPanelAssets/tr-TR.e05d6bbdc705d27e43fc360ce2036bf7.i18next.json","SidebarHelpPanelAssets-vi-VN":"i18n/SidebarHelpPanelAssets/vi-VN.18e7eb63f1d274aab821c4a7691534a0.i18next.json","SidebarHelpPanelAssets-zh-CN":"i18n/SidebarHelpPanelAssets/zh-CN.a70a7fe2a7de37a19fe1d70dc4c7b46d.i18next.json","SidebarHelpPanelAssets-zh-TW":"i18n/SidebarHelpPanelAssets/zh-TW.fbf90a438534a82ad937beb264e75e66.i18next.json"},Xn=void 0;function $n(){return void 0===Xn&&(Xn=hn.use(Sn).use(Cn.a).use(zn).init({debug:!1,fallbackLng:"en-US",load:"currentOnly",defaultNS:"SidebarHelpPanelAssets",ns:["SidebarHelpPanelAssets"],backend:{loadPath:function(e,t){return"/shp/"+Gn["".concat(t,"-").concat(e[0])]}},detection:{order:["htmlTag","navigator"]},nsSeparator:"|"})),Xn}hn.on("loaded",(function(){it(hn.language,!1)})),hn.on("failedLoading",(function(){it(hn.language,!0)}));var Yn=hn;function Jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Yn.t([e,t],n)}n(178);var Kn=n(61),Qn=n(62),Zn=new Qn.BrowserStorageCache("SidebarHelpPanel",600,"weblab"),er=new Qn.KatalWeblabClient({weblabProxy:new Kn.KatalWebSellerCentralClient,treatmentCache:Zn});var tr="RecordTriggerFailure",nr=function(e){return e.TestWeblab="TEST_WEBLAB_1234",e.UpdatedSearchSuggestions="SP_SERVICES_715612",e.SidebarContext="SCA_SIDEBAR_CONTEXT_1048964",e}({}),rr=function(e){return e.C="C",e.T1="T1",e.T2="T2",e.T3="T3",e}({});function ir(e){return or(e,!0)}function or(e,t){var n=!1;return er.getTreatment({defaultTreatment:rr.C,id:e,weblabType:Kn.WeblabType.Merchant}).then((function(r){var i=null==r?void 0:r.treatmentValue;return i?(n=!0,t&&function(e,t){var n=!1;t.recordTrigger().then((function(e){n=!0})).catch((function(e){n=!1})).finally((function(){return ar(e,tr,n)}))}(e,r),i):rr.C})).catch((function(e){return rr.C})).finally((function(){ar(e,"FetchFailure",n)}))}function ar(e,t,n){yt(e,t,n?0:1)}var sr={"^/test/disabled$":"false","^/test/weblab$":nr.TestWeblab,"^/shp/disableMeld$":"false"};function ur(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return t.shpCssLoaded?(e(),Promise.resolve()):Promise.all([t.loadShpCss(),$n()]).finally((function(){var n=t.shpCssLoaded;n&&e(),ot(!n)}))}function lr(e,t,n){try{s.SolutionType.of(e)}catch(r){throw function(e,t,n){yt(ye.InvalidSolutionType,"Count",1),yt(e,"".concat(t,".Count"),1),yt("sidebarVersion:".concat(n),"".concat(t,".Count"),1)}(t,e,n),r}}function cr(){return(e=oe.MarketplaceId,t=window.document.getElementById(re.ShpContainerId),(null==t?void 0:t.getAttribute(e))||"").split(".").pop()||"";var e,t}function fr(){return dr.apply(this,arguments)}function dr(){return(dr=i()(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=L(),!(n=Object.keys(sr).find((function(e){return null==t?void 0:t.match(e)})))){e.next=10;break}return e.next=5,hr(sr[n]);case 5:return yt("MeldSidebar","Enabled",(r=e.sent)?1:0),e.abrupt("return",r);case 10:return yt("MeldSidebar","Enabled",1),e.abrupt("return",Promise.resolve(!0));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hr(e){return pr.apply(this,arguments)}function pr(){return(pr=i()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=void 0!==t,!e.t0){e.next=13;break}if(e.t1="true"===t.toLowerCase(),e.t1){e.next=12;break}if(e.t2="false"!==t.toLowerCase(),!e.t2){e.next=11;break}return e.next=8,ir(t);case 8:e.t3=e.sent,e.t4=rr.C,e.t2=e.t3!==e.t4;case 11:e.t1=e.t2;case 12:e.t0=e.t1;case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _r=n.p+"assets/05b0a705.svg",gr="Help",vr=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;l()(this,e),h()(this,"_sidebarContainer",void 0),h()(this,"_lazyData",void 0),h()(this,"_isSummoned",!1),h()(this,"_banishMetricTimeoutMillis",void 0),h()(this,"_history",void 0),h()(this,"_currentHeaderText",void 0),h()(this,"_currentHeaderOpenUrl",void 0),h()(this,"setupHistoryPageHandler",(function(){t._lazyData.messageManager.subscriptToHistoryPage(t.saveHistoryPage)})),h()(this,"saveHistoryPage",(function(e){t._history.push(e),t.updateSidebarHeaderDisplay()})),h()(this,"goBack",(function(){var e=t._history.pop();e&&t._lazyData.contentFrameManager.loadHistoryPage(e),st(be.HelpHub),t.updateSidebarHeaderDisplay()})),h()(this,"openNewPage",(function(e){vt(),window.open(e)})),h()(this,"updateSidebarHeaderDisplay",(function(){var e=document.getElementById(re.ShpBackButtonId);t._history.length>0?null==e||e.classList.remove(ae):null==e||e.classList.add(ae)})),this._sidebarContainer=Oe(re.ShpContainerId),this._lazyData=n,this._banishMetricTimeoutMillis=r,this._history=[],this._currentHeaderText="",this._currentHeaderOpenUrl="",this.summon=this.summon.bind(this),this.banish=this.banish.bind(this),this.isSidebarDomCreated=this.isSidebarDomCreated.bind(this),this.createSidebarDom=this.createSidebarDom.bind(this),this.createHeader=this.createHeader.bind(this),this.logBanishMetric=this.logBanishMetric.bind(this),this.unhidePanelToMakeCssTransitionsWork(),this.setupHistoryPageHandler()}return f()(e,[{key:"destroy",value:function(){Ge()===be.HelpHub&&(this._isSummoned&&this.banish(),$e(this._sidebarContainer))}},{key:"summon",value:function(e,t,n){this.isSidebarDomCreated()?this.updateHeaderParams(t,n):this.createSidebarDom(t,n),ze(be.HelpHub);var r=De(re.PageSquisherId),i=Pe();this._lazyData.contentFrameManager.loadNewPage(e),this._sidebarContainer.classList.add(he),i?He():null==r||r.classList.add(he),this._isSummoned=!0}},{key:"history",get:function(){return _()(this._history)}},{key:"unhidePanelToMakeCssTransitionsWork",value:function(){this._sidebarContainer.style.display="flex",this._sidebarContainer.offsetHeight}},{key:"banish",value:function(){var e=this,t=De(re.PageSquisherId);this._isSummoned=!1,this._sidebarContainer.classList.remove(he),null==t||t.classList.remove(he),We(),this._history=[],this.updateSidebarHeaderDisplay(),gt(be.HelpHub),this.logBanishMetric().finally((function(){!0!==e._isSummoned&&e._lazyData.contentFrameManager.deleteContentFrame()}))}},{key:"logBanishMetric",value:function(){var e,t,n,r,i=je(re.ShpContentFrameId),o=null==i||null===(e=i.contentWindow)||void 0===e||null===(e=e.spl)||void 0===e?void 0:e.newMetric;if(o){var a=o().from("shpPanel").where("xButton").to("banish").type("Action"),s=new Promise((function(e){return a.publish(e)}));return t=s,n=this._banishMetricTimeoutMillis,r=new Promise((function(e,t){setTimeout((function(){t(new Error("Promise timed out!"))}),n)})),Promise.race([t,r])}return Promise.resolve()}},{key:"isSidebarDomCreated",value:function(){return!!je(re.ShpHeaderId)}},{key:"updateHeaderParams",value:function(e,t){var n=t||"";if((e||Jn("shp-help-title",gr))!==this._currentHeaderText||n!==this._currentHeaderOpenUrl){var r=this.createHeader(e,t);Oe(re.ShpHeaderId).replaceWith(r)}}},{key:"createSidebarDom",value:function(e,t){var n=this.createHeader(e,t),r=qe("div",re.ShpContentContainerId,re.ShpContentContainerId),i=qe("div",re.ShpFooterId,re.ShpFooterId);this._sidebarContainer.append(n,r,i)}},{key:"createHeader",value:function(e,t){var n=this,r=qe("div",re.ShpHeaderTitleId,"shp-header-item shp-header-text");r.innerText=e||Jn("shp-help-title",gr),this._currentHeaderText=r.innerText,this._currentHeaderOpenUrl=t||"";var i=qe("button",re.ShpBackButtonId,"".concat(ae," shp-header-text shp-button-back"));this._history.length>0&&i.classList.remove(ae),i.innerHTML="&lt;",i.addEventListener("click",this.goBack);var o=qe("div",re.ShpHeaderId,re.ShpHeaderId);if(o.append(i,r),t){var a=qe("img",re.ShpOpenButtonId,"shp-header-item ".concat(re.ShpOpenButtonId));a.src=_r,a.addEventListener("click",(function(){return n.openNewPage(t)})),o.append(a)}var s=qe("button",re.ShpCloseButtonId,"shp-header-item ".concat(re.ShpCloseButtonId));return s.innerHTML="&times;",s.type="button",s.addEventListener("click",this.banish),o.append(s),o}}]),e}(),yr=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri;l()(this,e),h()(this,"frame",void 0),h()(this,"lazyData",void 0),h()(this,"pendingHandshake",void 0),h()(this,"pendingLoadIndexFile",void 0),h()(this,"loadingStartTime",void 0),h()(this,"handshakeMetricMethodName",P()?"HelpHubHandshake.InternalSite":"HelpHubHandshake"),h()(this,"loadNewPage",(function(e){t.frame&&t.frame.contentWindow?t.lazyData.messageManager.sendLoadNewPageMessage(t.frame.contentWindow,e):t.createContentFrame(e)})),h()(this,"loadHistoryPage",(function(e){var n;null!==(n=t.frame)&&void 0!==n&&n.contentWindow&&t.lazyData.messageManager.sendLoadHistoryPageMessage(t.frame.contentWindow,e)})),h()(this,"deleteContentFrame",(function(){var e,n=Ge();n!==be.HelpHub&&null!==n||(null===(e=je(re.ShpContentFrameId))||void 0===e||e.remove());t.frame=void 0,t.pendingHandshake=!1,t.pendingLoadIndexFile=!1})),h()(this,"createContentFrame",(function(e){var n=Xe(e,be.HelpHub);t.frame=n,t.pendingHandshake=!0,t.pendingLoadIndexFile=!0,t.loadingStartTime=Date.now(),setTimeout((function(){return t.handleSummonHandshakeTimeout(n)}),1e4),je(re.ShpContentContainerId).appendChild(t.frame)})),h()(this,"onMessage",(function(e,n){var r;(null===(r=t.frame)||void 0===r?void 0:r.contentWindow)===n&&(t.pendingHandshake&&"@shp/contentPageReady"===e.type?(t.recordHandshakeTimeout(!1),t.loadingStartTime&&t.recordHandshakeLatency(t.loadingStartTime),t.pendingHandshake=!1):t.pendingLoadIndexFile&&"@shp/contentFrameLoading"===e.type&&(t.loadingStartTime&&t.recordFrameInit(t.loadingStartTime),t.pendingLoadIndexFile=!1))})),h()(this,"handleSummonHandshakeTimeout",(function(e){t.pendingHandshake&&t.frame===e&&t.recordHandshakeTimeout(!0)})),h()(this,"recordHandshakeLatency",(function(e){mt(t.handshakeMetricMethodName,"Latency",(new Date).getTime()-e)})),h()(this,"recordHandshakeTimeout",(function(e){yt(t.handshakeMetricMethodName,"Timeout",e?1:0)})),this.lazyData=n,this.lazyData.messageManager.subscriptToContentFrameMessages(this.onMessage),this.pendingHandshake=!1,this.pendingLoadIndexFile=!1}return f()(e,[{key:"recordFrameInit",value:function(e){mt(this.handshakeMetricMethodName,"FrameInitLatency",Date.now()-e)}}]),e}(),mr=function(e){return e.Tool="SellerCentralTool",e.Help="PredictiveHelpAuto",e.Merged="Merged",e.History="History",e.Assistant="Assistant",e}({}),br=new(function(){function e(t){l()(this,e),h()(this,"windowRef",void 0),this.windowRef=t}return f()(e,[{key:"debug",value:function(e,t){0}},{key:"info",value:function(e,t){0}},{key:"error",value:function(e,t){this.ueLogError(e,"ERROR",t),this.sendKatalLog("error",t,e)}},{key:"ueLogError",value:function(e,t,n){if(this.windowRef&&this.windowRef.ueLogError){var r={message:e},i={logLevel:t};n&&(i.attribution=n),this.windowRef.ueLogError(r,i)}}},{key:"sendKatalLog",value:function(e,t,n){var r,i=this.getKatalLoggerPayload(e,t,n);i&&null!==(r=navigator)&&void 0!==r&&r.sendBeacon&&navigator.sendBeacon("/spl/logger",i)}},{key:"getKatalLoggerPayload",value:function(e,t,n){try{var r={clientId:"SidebarHelpPanelAssets",pageURL:this.windowRef.location.href,logTime:Date.now()};return t&&(r.attribution=t),JSON.stringify({logs:[{level:e,message:n,context:r}]})}catch(i){return}}},{key:"logCountMetric",value:function(e,t){yt(e,"ErrorCount",t)}},{key:"logError",value:function(e,t){this.error(e,t)}}]),e}())(window);function wr(e){return e.ok?Promise.resolve(e):Promise.reject(new Error(e.statusText))}var Sr={suggestions:[],enabledSources:[]};function Tr(e,t){return Yn.t([e,t])}function Cr(e){return!!e&&""!==e.trim()}function xr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t;if(Cr(e)){e=e.replace(/(\W+|\s+)/g," ");var i=new Set(e.split(" ").filter((function(e){return""!==e}))),o=Array.from(i).join("|");r=t.replace(new RegExp("("+o+")","gi"),'<span class="text-highlight">$1</span>')}return n?'<span class="text truncate">'.concat(r,"</span>"):'<span class="text">'.concat(r,"</span>")}var Ir=function(){function e(){l()(this,e),h()(this,"searchForms",void 0),this.searchForms=new Map,this.addNewSearchForm=this.addNewSearchForm.bind(this),this.getQuery=this.getQuery.bind(this),this.setQuery=this.setQuery.bind(this),this.getSearchInput=this.getSearchInput.bind(this),this.setSearchInputValue=this.setSearchInputValue.bind(this),this.getHandlers=this.getHandlers.bind(this),this.getSelectedIndex=this.getSelectedIndex.bind(this),this.setSelectedIndex=this.setSelectedIndex.bind(this),this.getForm=this.getForm.bind(this)}return f()(e,[{key:"addNewSearchForm",value:function(e){var t=e.formId,n=e.searchForm,r=e.searchInput,i=e.searchButton,o=e.onSuggestionClick;this.searchForms.set(t,{searchForm:n,searchInput:r,searchButton:i,handlers:{onSuggestionClick:o},query:"",selectedSuggestionIndex:-1})}},{key:"getQuery",value:function(e){return this.getForm(e).query}},{key:"setQuery",value:function(e,t){this.getForm(e).query=t}},{key:"getSearchInput",value:function(e){return this.getForm(e).searchInput}},{key:"setSearchInputValue",value:function(e,t){this.getSearchInput(e).value=t}},{key:"getHandlers",value:function(e){return this.getForm(e).handlers}},{key:"getSelectedIndex",value:function(e){return this.getForm(e).selectedSuggestionIndex}},{key:"setSelectedIndex",value:function(e,t){this.getForm(e).selectedSuggestionIndex=t}},{key:"getForm",value:function(e){return this.searchForms.get(e)}}]),e}(),Er=n.p+"assets/6b45091c.svg",Or=n.p+"assets/60a95bed.svg",Ar=n.p+"assets/1c399a08.svg",kr=n.p+"assets/5bd989bc.svg",Mr="shp-help-search-suggestions-container";function Pr(e){return document.getElementById(e).querySelector("#".concat(Mr))}function Nr(e,t){var n,r,i,o;return t!==rr.C?null!==(n=null===(r=Pr(e))||void 0===r?void 0:r.querySelectorAll(".help-search-suggestion-item, .combined-help-search-suggestion-item"))&&void 0!==n?n:[]:null!==(i=null===(o=Pr(e))||void 0===o?void 0:o.querySelectorAll(".help-search-suggestion-item, .assistant-chip-container"))&&void 0!==i?i:[]}function Lr(){return Rr.apply(this,arguments)}function Rr(){return(Rr=i()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ir(nr.UpdatedSearchSuggestions);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dr=function(){function e(){l()(this,e),h()(this,"dismissed",void 0),h()(this,"boundSearchForms",void 0),h()(this,"weblabTreatment",rr.C),h()(this,"initialSuggestions",void 0),h()(this,"shpClient",void 0),h()(this,"assistantEnabledSuggestions",!1),h()(this,"isEmpty",(function(e){return 0===Object.keys(e).length})),this.dismissed=!1,this.boundSearchForms=new Ir,this.initialSuggestions=[],this.shpClient=void 0,this.fetchSearchSuggestions=this.fetchSearchSuggestions.bind(this),this.showSearchSuggestions=this.showSearchSuggestions.bind(this),this.hideSearchSuggestions=this.hideSearchSuggestions.bind(this),this.bindSearchForm=this.bindSearchForm.bind(this),this.bindSearchButton=this.bindSearchButton.bind(this),this.bindSearchInput=this.bindSearchInput.bind(this),this.setBoundSearchInput=this.setBoundSearchInput.bind(this),this.handleLinkClick=this.handleLinkClick.bind(this),this.submitSuggestionRequest=this.submitSuggestionRequest.bind(this),this.newSuggestionGroupSeparator=this.newSuggestionGroupSeparator.bind(this)}var t;return f()(e,[{key:"setBoundSearchInput",value:function(e,t){this.boundSearchForms.setSearchInputValue(e,t)}},{key:"newBind",value:(t=i()(a.a.mark((function e(t){var n,r,i,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formId,r=t.searchForm,i=t.searchInput,o=t.searchButton,s=t.shpClient,e.next=3,Lr();case 3:this.weblabTreatment=e.sent,this.boundSearchForms.addNewSearchForm(t),this.bindSearchForm(n,r),this.bindSearchInput(n,i),this.bindResize(i),this.bindSearchButton(n,o),this.initialSuggestions=[],this.shpClient=s;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"createAssistantSuggestion",value:function(e){return{additionalData:"",suggestionText:e,suggestionType:mr.Assistant,weight:1}}},{key:"fetchSearchSuggestions",value:function(e){var t,n=this,r=this.boundSearchForms.getSearchInput(e).value.trim(),i=function(t){n.boundSearchForms.setSelectedIndex(e,-1),n.appendSearchSuggestionsList(e,t)};Cr(r)?r===this.boundSearchForms.getQuery(e)?this.showSearchSuggestions(e):(this.boundSearchForms.setQuery(e,r),function(e,t){fetch(function(e){return"/help/hub/mons-api/SearchSuggestions?query=".concat(e)}(e)).then(wr).then((function(e){return e.json()})).then((function(e){return yt("SearchSuggestionFetch","Failure",0),t(e),e})).catch((function(e){return console.log("Error fetching search suggestions: ".concat(e.toString())),t({}),yt("SearchSuggestionFetch","Failure",1),Promise.resolve(Sr)}))}(r,(function(t){n.isEmpty(t)&&n.assistantEnabledSuggestions?i([n.createAssistantSuggestion(r)]):r===n.boundSearchForms.getQuery(e)&&(t.enabledSources&&t.enabledSources.includes(mr.Assistant)?(n.assistantEnabledSuggestions=!0,i([n.createAssistantSuggestion(r)].concat(_()(t.suggestions)))):(n.assistantEnabledSuggestions=!1,i(t.suggestions)))}))):0===this.initialSuggestions.length?(t=function(e){n.initialSuggestions=e,i(e)},fetch("/meld/conversation-api/v1/initialComposition").then((function(e){return e.json()})).then((function(e){var n=e.composition.suggestions.map((function(e){return{suggestionType:mr.Assistant,suggestionText:e.displayText,weight:1,additionalData:e.submissionText}}));return yt("SearchSuggestionForSCAFetch","Failure",0),t(n),n})).catch((function(e){return console.log("Error fetching search suggestions for SCA: ".concat(e.toString())),yt("SearchSuggestionForSCAFetch","Failure",1),Promise.reject(e)}))):i(this.initialSuggestions)}},{key:"showSearchSuggestions",value:function(e){var t=Nr(e,this.weblabTreatment);!this.dismissed&&t.length>0&&(yt("suggestionDisplayed","Displayed",1),Tt().where(ye.SearchSuggestionDisplayed).to(ve.Display).type(g.INFORMATION).publish(),Pr(e).classList.remove("help-suggestion-hide"))}},{key:"hideSearchSuggestions",value:function(e){var t;this.dismissed=!0,null===(t=Pr(e))||void 0===t||t.classList.add("help-suggestion-hide"),this.boundSearchForms.setSelectedIndex(e,-1)}},{key:"submitSuggestionRequest",value:function(e){var t,n,r,i,o=this;return t=function(){o.fetchSearchSuggestions(e)},n=300,r=function(){return o.dismissed=!1},i=0,function(){return clearTimeout(i),null==r||r(),i=setTimeout(t,n)}}},{key:"bindSearchForm",value:function(e,t){var n=this;t.addEventListener("submit",(function(){n.hideSearchSuggestions(e)}))}},{key:"bindSearchInput",value:function(e,t){var n=this;t.setAttribute("autocomplete","off"),t.addEventListener("keydown",this.handleKeyDown(e)),t.addEventListener("input",this.submitSuggestionRequest(e)),t.addEventListener("focus",this.submitSuggestionRequest(e)),t.addEventListener("blur",(function(t){var r,i=t.relatedTarget;null!==(r=document.getElementById(e))&&void 0!==r&&r.contains(i)||n.hideSearchSuggestions(e)})),document.addEventListener("click",(function(t){var r,i=t.target;null!==(r=document.getElementById(e))&&void 0!==r&&r.contains(i)||n.hideSearchSuggestions(e)}))}},{key:"bindSearchButton",value:function(e,t){var n=this;t.addEventListener("click",(function(){n.hideSearchSuggestions(e)}))}},{key:"bindResize",value:function(e){var t,n=this,r=null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView;r&&r.addEventListener("resize",(function(){var t=e.ownerDocument.getElementById(Mr);t&&n.updateSuggestionSize(e,t)}))}},{key:"clearSelected",value:function(e){var t;null===(t=Nr(e,this.weblabTreatment))||void 0===t||t.forEach((function(e){var t;e.classList.remove("selected"),null===(t=e.querySelector("a"))||void 0===t||t.classList.add("text-overflow-hide")}))}},{key:"updateSelected",value:function(e,t){this.clearSelected(e);var n=Nr(e,this.weblabTreatment);if(n){var r,i=this.boundSearchForms.getSelectedIndex(e);if(i=t?Math.max(-1,i-1):Math.min(n.length-1,i+1),this.boundSearchForms.setSelectedIndex(e,i),-1===i)this.setBoundSearchInput(e,this.boundSearchForms.getQuery(e)),this.boundSearchForms.getSearchInput(e).focus();else this.setBoundSearchInput(e,n[i].querySelector("a").text),n[i].classList.add("selected"),null===(r=n[i].querySelector("a"))||void 0===r||r.classList.remove("text-overflow-hide")}}},{key:"selectDown",value:function(e){this.updateSelected(e,!1)}},{key:"selectUp",value:function(e){this.updateSelected(e,!0)}},{key:"select",value:function(e){var t=this.boundSearchForms.getSelectedIndex(e);Nr(e,this.weblabTreatment)[t].querySelector("a").click(),this.hideSearchSuggestions(e)}},{key:"handleKeyDown",value:function(e){var t=this;return function(n){var r=!1;switch(n.code){case"ArrowDown":r=!0,t.selectDown(e);break;case"ArrowUp":r=!0,t.selectUp(e);break;case"Enter":-1!==t.boundSearchForms.getSelectedIndex(e)&&(r=!0,yt("suggestionEnterKeypress","EnterKeypress",1),t.select(e)),t.hideSearchSuggestions(e)}r&&(n.preventDefault(),n.stopImmediatePropagation())}}},{key:"appendSearchSuggestionsList",value:function(e,t){var n=this;ur((function(){var r;if(null===(r=Pr(e))||void 0===r||r.remove(),t&&t.length>0){var i,o=n.boundSearchForms.getSearchInput(e);null===(i=o.parentNode)||void 0===i||i.insertBefore(n.createSearchSuggestionsList(e,t),o.nextSibling),n.showSearchSuggestions(e)}}))}},{key:"handleLinkClick",value:function(e,t){var n=this;return function(r){!function(e){yt("suggestionSelected","Clicked-".concat(e.suggestionType),1),Tt().where(ye.SearchSuggestionSelected).to(ve.Click).type(g.ACTION).additional(me.SuggestionType,e.suggestionType).additional(me.SuggestionText,e.suggestionText).additional(me.SuggestionAdditionalData,e.additionalData).additional(me.SuggestionWeight,e.weight.toString()).publish()}(t),r.preventDefault(),n.hideSearchSuggestions(e),t.suggestionType!==mr.Merged&&t.suggestionType!==mr.History||n.setBoundSearchInput(e,t.suggestionText),n.boundSearchForms.getHandlers(e).onSuggestionClick(t)}}},{key:"createAnchor",value:function(e,t){var n=this.boundSearchForms.getSearchInput(e).value,r=document.createElement("a");r.setAttribute("suggestion-type",t.suggestionType),r.setAttribute("suggestion-data",t.additionalData),r.innerHTML=xr(n,t.suggestionText,!0),r.href="#";var i=document.createElement("li");if(this.weblabTreatment!==rr.C&&t.suggestionType!==mr.History)r.className="combined-help-search-suggestion text-overflow-hide",i.className="combined-help-search-suggestion-item",this.combinedSearchSuggestions(r,i,n,t);else if(t.suggestionType===mr.Assistant){r.className="assistant-chip",i.className="assistant-chip-container";var o=qe("img");o.src=kr,r.prepend(o),i.append(r)}else r.className="help-search-suggestion text-overflow-hide",i.className="help-search-suggestion-item",i.append(r);return i.addEventListener("click",this.handleLinkClick(e,t)),i}},{key:"combinedSearchSuggestions",value:function(e,t,n,r){var i=document.createElement("div");i.className="tooltip";var o=document.createElement("span");o.className="tooltip-text";var a=document.createElement("img");switch(a.className="tooltip-icon",r.suggestionType){case mr.Help:o.textContent=Tr("shp-help-header-title","HELP"),a.src=Er;break;case mr.Tool:o.textContent=Tr("shp-tools-header-title","TOOLS"),a.src=Or;break;case mr.Merged:o.textContent=Tr("shp-popular-header-title","POPULAR"),a.src=Ar}if(i.append(a),i.append(o),t.append(i),this.weblabTreatment===rr.T1||r.suggestionType===mr.Merged)t.append(e);else{var s=document.createElement("div");s.className="suggestion-container";var u=document.createElement("div");u.className="anchor-container",u.append(e),s.append(u);var l=document.createElement("div");l.className="content-container";var c=JSON.parse(r.additionalData),f=xr(n,r.suggestionType===mr.Help?c.Content:c.ToolDescription),d=f.indexOf("<span");if(-1!==d){var h=d-25<0?0:d-25;l.innerHTML=f.substring(h),s.append(l),t.append(s)}else t.append(s)}}},{key:"filterSuggestionAnchors",value:function(e,t){var n=t===mr.Assistant?4:3;return e.filter((function(e){return t===e.suggestion.suggestionType})).sort((function(e,t){return t.suggestion.weight-e.suggestion.weight})).map((function(e){return e.anchor})).slice(0,n)}},{key:"sortSuggestionAnchors",value:function(e){return{tools:this.filterSuggestionAnchors(e,mr.Tool),help:this.filterSuggestionAnchors(e,mr.Help),merged:this.filterSuggestionAnchors(e,mr.Merged),history:this.filterSuggestionAnchors(e,mr.History),assistant:this.filterSuggestionAnchors(e,mr.Assistant)}}},{key:"createSuggestionAnchors",value:function(e,t){var n=this;return t.map((function(t){return{suggestion:t,anchor:n.createAnchor(e,t)}}))}},{key:"createHeader",value:function(e){var t=document.createElement("span");switch(t.className="help-search-suggestion-header",e){case mr.History:t.textContent=Tr("shp-search-header-title","SEARCH");break;case mr.Merged:t.textContent=Tr("shp-popular-header-title","POPULAR");break;case mr.Help:t.textContent=Tr("shp-help-header-title","HELP");break;case mr.Tool:t.textContent=Tr("shp-tools-header-title","TOOLS");break;case mr.Assistant:t.textContent=Tr("shp-assistant-header-title","SELLER ASSISTANT (beta)")}return t}},{key:"newSuggestionGroupSeparator",value:function(){var e=document.createElement("div");return e.className="suggestion-group-separator",e}},{key:"handleAssistantHistoryLinkClick",value:function(e){var t=this;return function(n){n.preventDefault(),t.shpClient&&t.shpClient.loadConversation(),t.hideSearchSuggestions(e)}}},{key:"getAssistantHistoryElement",value:function(e){var t=document.createElement("li");t.className="assistant-history-item";var n=document.createElement("a");return n.href="#",n.className="assistant-history-link help-search-suggestion",n.text=Tr("shp-header-chat-history","Chat history"),n.addEventListener("click",this.handleAssistantHistoryLinkClick(e).bind(this)),t.append(n),t}},{key:"createSearchSuggestionsList",value:function(e,t){var n=document.createElement("ul");if(n.id=n.className="help-search-suggestions-list",this.weblabTreatment!==rr.C){var r=this.createSuggestionAnchors(e,t);r.length>0&&r[0].suggestion.suggestionType===mr.History&&n.append(this.createHeader(mr.History));var i=r.map((function(e){return e.anchor}));n.append.apply(n,_()(i))}else{var o=this.sortSuggestionAnchors(this.createSuggestionAnchors(e,t));o.assistant.length>0&&(n.classList.add("help-search-suggestions-assistant"),n.append(this.createHeader(mr.Assistant)),n.append.apply(n,_()(o.assistant)),n.append(this.getAssistantHistoryElement(e)),n.append(this.newSuggestionGroupSeparator())),o.history.length>0&&(n.append(this.createHeader(mr.History)),n.append.apply(n,_()(o.history)),n.append(this.newSuggestionGroupSeparator())),o.merged.length>0&&(n.append(this.createHeader(mr.Merged)),n.append.apply(n,_()(o.merged)),n.append(this.newSuggestionGroupSeparator())),o.help.length>0&&(n.append(this.createHeader(mr.Help)),n.append.apply(n,_()(o.help)),n.append(this.newSuggestionGroupSeparator())),o.tools.length>0&&(n.append(this.createHeader(mr.Tool)),n.append.apply(n,_()(o.tools)),n.append(this.newSuggestionGroupSeparator())),n.lastChild&&n.removeChild(n.lastChild)}var a=document.createElement("div");a.id=Mr,a.className=Mr+" help-suggestion-hide",a.tabIndex=0;var s=this.boundSearchForms.getSearchInput(e);return a.addEventListener("keydown",(function(e){e.preventDefault(),s.dispatchEvent(new KeyboardEvent(e.type,e))})),a.appendChild(n),this.updateSuggestionSize(s,a),a}},{key:"updateSuggestionSize",value:function(e,t){t.style.top=e.offsetHeight+e.offsetTop+"px",t.style.width="".concat(400,"px"),t.style.left=e.offsetLeft+"px"}}]),e}(),jr=new(function(){function e(){l()(this,e),h()(this,"searchSuggestions",void 0),this.searchSuggestions=new Dr}var t;return f()(e,[{key:"newBind",value:(t=i()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.searchSuggestions.newBind(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}());function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ur=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri;l()(this,e),h()(this,"lazyData",void 0),h()(this,"weblabTreatment",rr.C),this.lazyData=t,this.handleSuggestionClick=this.handleSuggestionClick.bind(this)}var t;return f()(e,[{key:"newBind",value:(t=i()(a.a.mark((function e(t,n){var r,i=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lr();case 2:return this.weblabTreatment=e.sent,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;i.handleSuggestionClick(e,n,t)},e.next=6,jr.newBind(Fr(Fr({},t),{},{onSuggestionClick:r,shpClient:n}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"handleSuggestionClick",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;switch(e.suggestionType){case mr.Help:if(this.weblabTreatment!==rr.C){var r=JSON.parse(e.additionalData);t.displayHelp(r.Id)}else t.displayHelp(e.additionalData);break;case mr.Merged:case mr.History:t.search(e.suggestionText);break;case mr.Assistant:var i={userReply:{messages:[{type:s.ApiMessageType.Text,text:{utterance:e.suggestionText}}]}};t.newConversation(i);break;default:if(this.weblabTreatment!==rr.C){var o=JSON.parse(e.additionalData);n.location.assign(o.Url)}else n.location.assign(e.additionalData)}}}]),e}(),Vr=f()((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;l()(this,e),h()(this,"windowRef",void 0),h()(this,"sendLoadNewPageMessage",(function(e,n){t.sendMessage(e,"@shp/loadNewPage",{url:n})})),h()(this,"sendLoadHistoryPageMessage",(function(e,n){t.sendMessage(e,"@shp/loadHistoryPage",{url:n})})),h()(this,"subscriptToHistoryPage",(function(e){t.windowRef.addEventListener("message",(function(n){if(n.origin===t.windowRef.location.origin){var r,i=t.deserialize(n.data),o=null==i||null===(r=i.content)||void 0===r?void 0:r.url;"@shp/newHistoryPage"===(null==i?void 0:i.type)&&o&&e(o)}}))})),h()(this,"subscriptToContentFrameMessages",(function(e){t.windowRef.addEventListener("message",(function(n){if(n.origin===t.windowRef.location.origin){var r,i=t.deserialize(n.data);if(i)e(i,null!==(r=n.source)&&void 0!==r?r:void 0)}}))})),h()(this,"sendMessage",(function(e,n,r){var i=t.serialize(n,r);e.postMessage(i,t.windowRef.location.origin)})),h()(this,"serialize",(function(e,t){return JSON.stringify({type:e,content:t})})),h()(this,"deserialize",(function(e){try{var n=JSON.parse(e);return t.isValidMessage(n)?n:void 0}catch(r){return}})),h()(this,"isValidMessage",(function(e){return e.type})),this.windowRef=n})),Hr=n.p+"assets/d6ecc15f.svg",Wr=n.p+"assets/67a210f3.svg",qr=n.p+"assets/405d793f.svg",zr=n.p+"assets/a1e579e6.svg",Gr=n.p+"assets/9e68fb9e.svg";function Xr(e){if(e.title)return e.title;switch(e.type){case s.InnerSidebarStateType.Search:return Jn("shp-search-title","Search");case s.InnerSidebarStateType.Solution:switch(e.solutionType){case s.SolutionType.InlineRevenueCalculator:return Jn("shp-irc-title","Revenue Calculator");case s.SolutionType.Help:return Jn("shp-search-title","Search");default:return Jn("shp-help-title","Help")}default:return Jn("shp-help-title","Help")}}var $r=["^/fba/sendtoamazon.*$","^/gp/fba/inbound-queue/index.html$","^/gp/ssof/shipping-queue.html$","^/fba/shippingqueue.*$","^/shp/test-jedi-page$"];function Yr(){var e=L();return!!$r.find((function(t){return e.match(t)}))}var Jr=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri;l()(this,e),h()(this,"lazyData",void 0),h()(this,"onDockedOnlyPage",Yr()),h()(this,"lastHeaderState",void 0),h()(this,"addPageSquish",(function(){if(Pe())He();else{var e=De(re.PageSquisherId);null==e||e.classList.add(he),null==e||e.classList.add(pe)}})),h()(this,"removePageSquish",(function(){var e=De(re.PageSquisherId);null==e||e.classList.remove(he),null==e||e.classList.remove(pe),We()})),h()(this,"handleDocumentClick",(function(e){var n,r,i=!(null!==(n=t.expandedActionMenu)&&void 0!==n&&n.classList.contains(ae)),o=null===(r=t.expandButton)||void 0===r?void 0:r.contains(e.target);i&&!o&&t.hideExpandedActionPanel()})),this.lazyData=n,this.attachActionMenuListener()}return f()(e,[{key:"showContent",value:function(e,t){var n=this;this.createDomIfNotCreated(),this.setHeaderText(t),this.setSubHeaderText(void 0),this.clearTheme(),this.onDockedOnlyPage&&this.dockPanel(),requestAnimationFrame((function(){n.windowContainer.classList.add(he),n.sidebarContainer.classList.add(fe),Be()?n.addPageSquish():n.lazyData.meldDragManager.stayInsideWindow()})),this.showElementInContentContainer(e)}},{key:"isPartnerPage",value:function(){var e;return"true"===(null===(e=this.sidebarContainer)||void 0===e?void 0:e.getAttribute("data-is-partner-page"))}},{key:"closePanel",value:function(){var e=this;this.lazyData.shpHistoryManager.clearHistory(),requestAnimationFrame((function(){Be()||e.resetPosition(),e.removePageSquish(),e.windowContainer.classList.remove(he),e.sidebarContainer.classList.remove(fe),e.resetHeader()})),this.showElementInContentContainer(void 0)}},{key:"isDocked",get:function(){return!!this.windowContainer&&(this.windowContainer.classList.contains(ue)||this.windowContainer.classList.contains(ce))}},{key:"dockButton",get:function(){return document.getElementById(re.ShpDockButtonId)}},{key:"undockButton",get:function(){return document.getElementById(re.ShpUnDockButtonId)}},{key:"hideBothDockAndUndock",value:function(){Je(this.dockButton),Je(this.undockButton)}},{key:"setAppropriateDockingState",value:function(){this.isDocked?(Je(this.dockButton),this.onDockedOnlyPage||Ye(this.undockButton)):(Je(this.undockButton),Ye(this.dockButton))}},{key:"dockPanel",value:function(){var e=this.windowContainer;e&&(e.style.bottom="0",e.style.right="0",e.classList.remove(le),e.classList.add(ue),this.onDockedOnlyPage&&e.classList.add(ce)),this.isSidebarOpen()&&this.addPageSquish(),Je(this.dockButton),this.onDockedOnlyPage||Ye(this.undockButton),this.lastHeaderState&&this.updateHeader(this.lastHeaderState)}},{key:"unDockPanel",value:function(){this.removePageSquish();var e=document.getElementById(re.ShpWindowContainerId);e&&(this.resetPosition(),e.classList.remove(ue),e.classList.add(le),this.lazyData.meldDragManager.stayInsideWindow()),Ye(this.dockButton),Je(this.undockButton),this.lastHeaderState&&this.updateHeader(this.lastHeaderState)}},{key:"updateHeader",value:function(e){var t=this.lastHeaderState;if(this.lastHeaderState=e,void 0!==e.backButtonVisible){var n=document.getElementById(re.ShpBackButtonId);e.backButtonVisible?null==n||n.classList.remove(ae):null==n||n.classList.add(ae)}e.latestState&&(this.setHeaderText(Xr(e.latestState)),this.setSubHeaderText(e.latestState.subtitle),this.setTheme(e.latestState,null==t?void 0:t.latestState)),e.actions&&e.actions.length>0?this.setHeaderActionState(e.actions):this.setHeaderActionDefaults()}},{key:"hideSpinnerAndShowIframe",value:function(){var e=document.getElementById(re.ShpContentContainerSpinnerId);null==e||e.classList.add(ae);var t=document.getElementById(re.ShpContentFrameId);null==t||t.classList.remove(de)}},{key:"toggleExpandedActionPanel",value:function(){var e,t,n,r,i;null!==(e=this.expandedActionMenu)&&void 0!==e&&e.classList.contains(ae)?(null===(t=this.expandedActionMenu)||void 0===t||t.classList.remove(ae),null===(n=this.expandButton)||void 0===n||n.classList.add(se)):(null===(r=this.expandedActionMenu)||void 0===r||r.classList.add(ae),null===(i=this.expandButton)||void 0===i||i.classList.remove(se))}},{key:"hideExpandedActionPanel",value:function(){var e,t,n;null!==(e=this.expandedActionMenu)&&void 0!==e&&e.classList.contains(ae)||(null===(t=this.expandedActionMenu)||void 0===t||t.classList.add(ae),null===(n=this.expandButton)||void 0===n||n.classList.remove(se))}},{key:"resetHeader",value:function(){this.updateHeader({backButtonVisible:!1}),this.setHeaderText(""),this.setSubHeaderText(void 0)}},{key:"setTheme",value:function(e,t){null!=t&&t.headerTheme&&this.windowContainer.classList.remove(this.getTheme(t.headerTheme)),null!=e&&e.headerTheme&&this.windowContainer.classList.add(this.getTheme(e.headerTheme))}},{key:"clearTheme",value:function(){var e;null!==(e=this.lastHeaderState)&&void 0!==e&&null!==(e=e.latestState)&&void 0!==e&&e.headerTheme&&this.windowContainer.classList.remove(this.getTheme(this.lastHeaderState.latestState.headerTheme))}},{key:"getTheme",value:function(e){return"shp-custom-theme-"+e}},{key:"header",get:function(){return document.getElementById(re.ShpHeaderTitleId)}},{key:"setHeaderText",value:function(e){this.header&&(this.header.textContent=e)}},{key:"subHeader",get:function(){return document.getElementById(re.ShpSubHeaderTitleId)}},{key:"setSubHeaderText",value:function(e){this.subHeader&&(e&&e.length>0?(this.subHeader.textContent=e,Ye(this.subHeader)):(Je(this.subHeader),this.subHeader.textContent=null))}},{key:"setHeaderActionDefaults",value:function(){var e,t;null===(e=this.expander)||void 0===e||e.classList.add(ae),null===(t=this.expandedActionMenu)||void 0===t||t.classList.add(ae),$e(this.expandedActionMenu),this.resetPrimaryCustomAction(),this.setAppropriateDockingState()}},{key:"setHeaderActionState",value:function(e){var t;(this.setActionsInActionMenu(e),e.length>0)&&(null===(t=this.expander)||void 0===t||t.classList.remove(ae))}},{key:"setActionsInActionMenu",value:function(e){var t,n=this,r=e.findIndex((function(e){return e.priority===s.HeaderActionPriority.Primary})),i=void 0,o=_()(e);r>=0?((i=e[r]).type!==s.HeaderActionType.DockUndock&&(this.setPrimaryCustomAction(i),this.hideBothDockAndUndock()),o.splice(r,1)):(this.resetPrimaryCustomAction(),this.setAppropriateDockingState());var a=o.findIndex((function(e){return e.type===s.HeaderActionType.DockUndock}));a<0&&void 0!==i&&(null===(t=i)||void 0===t?void 0:t.type)!==s.HeaderActionType.DockUndock&&!this.onDockedOnlyPage&&o.push({type:s.HeaderActionType.DockUndock,priority:s.HeaderActionPriority.Primary}),a>=0&&this.onDockedOnlyPage&&o.splice(a,1);var u=o.map((function(e){return n.createActionButton(e)}));this.resetExpandedActionMenu(u.length>0),u.forEach((function(e){var t;return null===(t=n.expandedActionMenu)||void 0===t?void 0:t.appendChild(e)}))}},{key:"createDomIfNotCreated",value:function(){if(!je(re.ShpHeaderId)){var e=this.createHeader(),t=qe("div",re.ShpContentContainerId,re.ShpContentContainerId);this.windowContainer.append(e,t),this.lazyData.meldDragManager.init(this.windowContainer,e)}}},{key:"windowContainer",get:function(){var e=je(re.ShpWindowContainerId);if(e)return e;var t=qe("div",re.ShpWindowContainerId,le);return this.sidebarContainer.append(t),t}},{key:"sidebarContainer",get:function(){return Oe(re.ShpContainerId)}},{key:"headerButtonClassWithAdditionalClasses",value:function(e){return"shp-header-item shp-header-button ".concat(e)}},{key:"expandedActionMenu",get:function(){return document.getElementById(re.ExpandedActionMenuContainer)}},{key:"expander",get:function(){return document.getElementById(re.ActionExpander)}},{key:"expandButton",get:function(){return document.getElementById(re.ShpExpandButtonId)}},{key:"createExpandedActionMenuContainer",value:function(){var e=qe("div",re.ExpandedActionMenuContainer,re.ExpandedActionMenuContainer);return e.classList.add(ae),e}},{key:"resetExpandedActionMenu",value:function(e){e?Ye(this.expander):Je(this.expander),$e(this.expandedActionMenu)}},{key:"closeExpandedPanelAndDock",value:function(){this.hideExpandedActionPanel(),this.dockPanel()}},{key:"closeExpandedPanelAndUnDock",value:function(){this.hideExpandedActionPanel(),this.unDockPanel()}},{key:"createActionButton",value:function(e){var t=qe("a",void 0,"shp-action-menu-item");if(e.type===s.HeaderActionType.DockUndock){var n=this.isDocked?Jn("shp-header-undock-panel-text","Undock panel"):Jn("shp-header-dock-panel-text","Dock panel");t.textContent=n,t.onclick=this.isDocked?this.closeExpandedPanelAndUnDock.bind(this):this.closeExpandedPanelAndDock.bind(this)}else{var r=e;t.textContent=r.displayText,t.onclick=this.fireCustomAction.bind(this)(e)}return t.addEventListener("mousedown",this.overlappedButtonMouseDown),Qe(t),t}},{key:"fireCustomAction",value:function(e){var t=this;return function(n){n.preventDefault(),t.hideExpandedActionPanel(),t.lazyData.meldSidebarManager.sendCustomMessage(e.actionDetails)}}},{key:"createExpandButton",value:function(){var e=qe("img",re.ShpExpandButtonId,this.headerButtonClassWithAdditionalClasses(re.ShpExpandButtonId));return e.src=Gr,e.addEventListener("click",this.lazyData.meldSidebarManager.onExpandButtonClick),e.addEventListener("mousedown",this.overlappedButtonMouseDown),Qe(e),e}},{key:"createActionExpander",value:function(){var e=qe("div",re.ActionExpander,this.headerButtonClassWithAdditionalClasses(re.ActionExpander));return e.classList.add(ae),e.append(this.createExpandButton(),this.createExpandedActionMenuContainer()),e}},{key:"attachActionMenuListener",value:function(){document.addEventListener("click",this.handleDocumentClick)}},{key:"createCloseButton",value:function(){var e=qe("img",re.ShpCloseButtonId,this.headerButtonClassWithAdditionalClasses(re.ShpCloseButtonId));return e.src=Wr,e.addEventListener("click",this.lazyData.meldSidebarManager.onCloseButtonClick),e.addEventListener("mousedown",this.overlappedButtonMouseDown),Qe(e),e}},{key:"createDockButton",value:function(){var e=qe("img",re.ShpDockButtonId,this.headerButtonClassWithAdditionalClasses(re.ShpDockButtonId));return e.src=qr,e.addEventListener("click",this.lazyData.meldSidebarManager.onDockButtonClick),e.addEventListener("mousedown",this.overlappedButtonMouseDown),Qe(e),e}},{key:"createUndockButton",value:function(){var e=qe("img",re.ShpUnDockButtonId,this.headerButtonClassWithAdditionalClasses(re.ShpUnDockButtonId));return e.src=zr,e.addEventListener("click",this.lazyData.meldSidebarManager.onUnDockButtonClick),e.addEventListener("mousedown",this.overlappedButtonMouseDown),e.classList.add(ae),Qe(e),e}},{key:"primaryCustomAction",get:function(){return document.getElementById(re.CustomPrimaryAction)}},{key:"createPrimaryCustomAction",value:function(){var e=qe("button",re.CustomPrimaryAction,ae);return e.onmousedown=this.overlappedButtonMouseDown,e}},{key:"resetPrimaryCustomAction",value:function(){this.primaryCustomAction&&(this.primaryCustomAction.textContent="",this.primaryCustomAction.classList.add(ae),this.primaryCustomAction.onclick=null)}},{key:"setPrimaryCustomAction",value:function(e){this.primaryCustomAction&&(this.primaryCustomAction.innerText=e.displayText,this.primaryCustomAction.onclick=this.fireCustomAction(e),this.primaryCustomAction.classList.remove(ae))}},{key:"createHeader",value:function(){var e=qe("div",re.ShpHeaderId,re.ShpHeaderId),t=qe("div",void 0,"shp-header-left"),n=qe("div",void 0,"shp-header-right");e.append(t,n),n.append(this.createPrimaryCustomAction(),this.createDockButton(),this.createUndockButton(),this.createActionExpander(),this.createCloseButton());var r=qe("img",re.ShpBackButtonId,"shp-header-button ".concat(re.ShpBackButtonId," ").concat(ae));r.src=Hr,r.addEventListener("click",this.lazyData.meldSidebarManager.onBackButtonClick),r.addEventListener("mousedown",this.overlappedButtonMouseDown),Qe(r),t.append(r);var i=qe("div",re.ShpHeaderContainer),o=qe("div",re.ShpHeaderTitleId),a=qe("div",re.ShpSubHeaderTitleId,ae);return i.append(o,a),t.append(i),e}},{key:"showElementInContentContainer",value:function(e){for(var t=this,n=je(re.ShpContentContainerId);null!=n&&n.lastChild;)n.removeChild(n.lastChild);if(e){var r=qe("div",re.ShpContentContainerSpinnerId,re.ShpContentContainerSpinnerClass);n.appendChild(r),e.classList.add(de),n.appendChild(e),setTimeout((function(){return t.hideSpinnerAndShowIframe()}),12e3)}}},{key:"overlappedButtonMouseDown",value:function(e){e.stopPropagation()}},{key:"resetPosition",value:function(){this.windowContainer.style.bottom=e.StartingBottomPosition,this.windowContainer.style.right=e.StartingRightPosition}},{key:"isSidebarOpen",value:function(){return this.windowContainer.classList.contains(he)}}]),e}();function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}h()(Jr,"StartingBottomPosition","50px"),h()(Jr,"StartingRightPosition","50px");var Zr=1e4,ei=function(e){return e[e.Loading=0]="Loading",e[e.Completed=1]="Completed",e[e.NotSummoned=2]="NotSummoned",e[e.Failure=3]="Failure",e}(ei||{});var ti=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri;l()(this,e),h()(this,"lazyData",void 0),h()(this,"handshakeMetricMethodName",P()?"MeldHandshake.InternalSite":"MeldHandshake"),h()(this,"summonState",{type:ei.NotSummoned,iframe:void 0}),h()(this,"pullIngressEnabled",!1),h()(this,"opaNavFirstEnabled",!1),h()(this,"sidebarHasBeenSummoned",(function(){return t.summonState.type===ei.Completed||t.summonState.type===ei.Loading&&Date.now()-t.summonState.summonStartTime>Zr})),h()(this,"onPullIngressEnabled",(function(){var e;t.pullIngressEnabled=!0,null===(e=t.summonState.iframe)||void 0===e||e.setAttribute(oe.SupportIngressEnabled,"true")})),h()(this,"setOpaNavFirstEnabled",(function(e){t.opaNavFirstEnabled=e})),h()(this,"isOpaNavFirstEnabled",(function(){return t.opaNavFirstEnabled})),h()(this,"onCloseButtonClick",(function(){gt(be.Meld),t.close()})),h()(this,"closeIfOpen",(function(){t.summonState.type!==ei.NotSummoned&&t.close()})),h()(this,"close",(function(){t.summonState={type:ei.NotSummoned,iframe:void 0},t.lazyData.meldDomManager.closePanel()})),h()(this,"onDockButtonClick",(function(){ut(be.Meld),t.lazyData.meldDomManager.dockPanel()})),h()(this,"onUnDockButtonClick",(function(){lt(be.Meld),t.lazyData.meldDomManager.unDockPanel()})),h()(this,"onBackButtonClick",(function(){t.summonState.type===ei.Completed&&t.summonState.iframe.contentWindow&&(st(be.Meld),t.lazyData.shpMessenger.sendMessage(t.summonState.iframe.contentWindow,{type:s.ShpMessageType.BackButtonClicked}))})),h()(this,"onExpandButtonClick",(function(){ct(be.Meld),t.lazyData.meldDomManager.toggleExpandedActionPanel()})),h()(this,"handleMessage",(function(e){if(t.summonState.type===ei.Loading&&e.source===t.summonState.iframe.contentWindow)if(e.message.type===s.ShpMessageType.ContentFrameReady){var n=t.summonState.iframe.contentWindow;t.summonState.summonArgsQueue.forEach((function(e){t.lazyData.shpMessenger.sendMessage(n,{type:s.ShpMessageType.SummonContent,payload:{summonArgs:e}})})),t.recordHandshakeLatency(t.summonState.summonStartTime),t.recordHandshakeTimeout(!1),t.summonState={type:ei.Completed,iframe:t.summonState.iframe}}else e.message.type!==s.ShpMessageType.ContentFrameLoading||t.summonState.receivedLoadingMessage?e.message.type!==s.ShpMessageType.ContentFrameLoaded||t.summonState.receivedLoadedMessage||(t.lazyData.meldDomManager.hideSpinnerAndShowIframe(),t.summonState=Qr(Qr({},t.summonState),{},{receivedLoadedMessage:!0}),t.recordFrameLoaded(t.summonState.summonStartTime)):(t.summonState=Qr(Qr({},t.summonState),{},{receivedLoadingMessage:!0}),t.recordFrameInit(t.summonState.summonStartTime));else e.message.type===s.ShpMessageType.UpdateHeader&&t.lazyData.meldDomManager.updateHeader(e.message.payload)})),h()(this,"handleSummonHandshakeTimeout",(function(e){t.summonState.type===ei.Loading&&t.summonState.iframe===e&&t.recordHandshakeTimeout(!0)})),this.lazyData=n,this.lazyData.shpMessenger.addMessageListener(this.handleMessage)}return f()(e,[{key:"destroy",value:function(){Ge()===be.Meld&&(this.closeIfOpen(),$e(Oe(re.ShpContainerId)))}},{key:"summon",value:function(e,t){var n=this;switch(this.summonState.type){case ei.Completed:return void(this.summonState.iframe.contentWindow&&this.lazyData.shpMessenger.sendMessage(this.summonState.iframe.contentWindow,{type:s.ShpMessageType.SummonContent,payload:{summonArgs:e}}));case ei.Loading:return void this.summonState.summonArgsQueue.push(e);case ei.NotSummoned:var r=Xe(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(s.getFallbackSummonArgsAsQueryParams)(e),i=M(n)?{metricsDebug:"1"}:{},o=A(S(S(S({},r),i),{},{client:t}));return T+"?"+o}(e,t),be.Meld);return this.pullIngressEnabled&&r.setAttribute(oe.SupportIngressEnabled,"true"),this.lazyData.meldDomManager.showContent(r,function(e){return e.type===s.SummonArgsType.Search?Xr({type:s.InnerSidebarStateType.Search}):e.type===s.SummonArgsType.Solution?Xr({type:s.InnerSidebarStateType.Solution,solutionType:e.solutionType}):Xr({type:s.InnerSidebarStateType.Default})}(e)),this.summonState={type:ei.Loading,iframe:r,summonArgsQueue:[e],summonStartTime:Date.now()},setTimeout((function(){return n.handleSummonHandshakeTimeout(r)}),Zr),void ze(be.Meld);default:this.summonState}}},{key:"sendCustomMessage",value:function(e){var t;(null===(t=this.summonState.iframe)||void 0===t?void 0:t.contentWindow)&&this.lazyData.shpMessenger.sendMessage(this.summonState.iframe.contentWindow,{type:s.ShpMessageType.CustomClientMessage,payload:e})}},{key:"recordHandshakeLatency",value:function(e){mt(this.handshakeMetricMethodName,"Latency",Date.now()-e)}},{key:"recordHandshakeTimeout",value:function(e){yt(this.handshakeMetricMethodName,"Timeout",e?1:0),e&&br.error("MeldHandshake timed out")}},{key:"recordFrameInit",value:function(e){mt(this.handshakeMetricMethodName,"FrameInitLatency",Date.now()-e)}},{key:"recordFrameLoaded",value:function(e){mt("MeldHandshake","FrameLoadedLatency",Date.now()-e)}}]),e}(),ni="#shp-ingress-container {\n  position: fixed;\n  bottom: 16px;\n  right: 16px;\n  width: auto;\n  border-radius: 1px;\n  visibility: visible;\n  z-index: 100;\n  font-size: 14px;\n  font-family: 'Amazon Ember';\n  color: #002f36;\n  background-color: unset;\n  padding: 0px;\n  width: fit-content;\n  display: inline-flex;\n  align-items: end;\n  pointer-events: none; }\n  #shp-ingress-container > * {\n    pointer-events: auto;\n    cursor: pointer; }\n  #shp-ingress-container #shp-ingress-icon-container {\n    width: 60px;\n    height: 60px;\n    display: flex;\n    margin-left: 10px; }\n    #shp-ingress-container #shp-ingress-icon-container img {\n      filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.4)); }\n    #shp-ingress-container #shp-ingress-icon-container #shp-ingress-counter-container {\n      color: #fff;\n      background-color: #cc0c39;\n      position: absolute;\n      right: 0;\n      width: 20px;\n      height: 20px;\n      border-radius: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      cursor: default; }\n  #shp-ingress-container #shp-ingress-tooltip-container {\n    --background-color: #002f36;\n    --font-color: white;\n    display: flex;\n    width: 367px;\n    align-items: stretch;\n    margin: auto 0;\n    border: 1.5px solid var(--background-color);\n    border-radius: 10px;\n    background-color: var(--background-color);\n    color: var(--font-color);\n    transition: width 2s ease; }\n    #shp-ingress-container #shp-ingress-tooltip-container::before {\n      content: '';\n      width: 0;\n      height: 0;\n      border-top: 7px solid transparent;\n      border-bottom: 7px solid transparent;\n      border-left: 9px solid var(--background-color);\n      position: absolute;\n      bottom: 23px;\n      left: 368px; }\n    #shp-ingress-container #shp-ingress-tooltip-container::after {\n      content: '';\n      width: 0;\n      height: 0;\n      border-top: 7px solid transparent;\n      border-bottom: 7px solid transparent;\n      border-left: 9px solid var(--background-color);\n      position: absolute;\n      bottom: 23px;\n      left: 368px; }\n    #shp-ingress-container #shp-ingress-tooltip-container .shp-tooltip-title-container {\n      display: flex; }\n      #shp-ingress-container #shp-ingress-tooltip-container .shp-tooltip-title-container #shp-ingress-close-btn-container {\n        display: flex;\n        margin-left: auto; }\n    #shp-ingress-container #shp-ingress-tooltip-container #shp-ingress-message-container {\n      padding: 16px;\n      min-height: 50px;\n      line-height: 1.2em; }\n      #shp-ingress-container #shp-ingress-tooltip-container #shp-ingress-message-container .shp-tooltip-description {\n        margin-top: 10px; }\n    #shp-ingress-container #shp-ingress-tooltip-container.opa-fte {\n      --background-color: #e3eced;\n      --font-color: #002f36;\n      size: 13px;\n      line-height: 18px; }\n      #shp-ingress-container #shp-ingress-tooltip-container.opa-fte .shp-tooltip-title {\n        font-weight: bold; }\n      #shp-ingress-container #shp-ingress-tooltip-container.opa-fte .shp-tooltip-title-divider {\n        border-bottom: 1.5px solid #aab7b8;\n        margin-top: 8px;\n        margin-bottom: 8px;\n        display: block; }\n  #shp-ingress-container.shp-hide,\n  #shp-ingress-container .shp-hide {\n    display: none !important; }\n";function ri(e){if(!document.querySelector("#".concat(re.ShpContainerId," > #").concat(ie.IngressHostId))){var t=document.getElementById(re.ShpContainerId),n=qe("div",ie.IngressHostId);t.append(n),function(e,t){var n=qe("style");if(n.textContent=ni,e.attachShadow){e.attachShadow({mode:"open"}).append(n,t)}else e.append(n,t)}(n,e)}}var ii=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri;l()(this,e),h()(this,"lazyData",void 0),h()(this,"isPullUiReady",void 0),h()(this,"preparePullUi",(function(){t.isPullUiReady||(t.iconContainer.addEventListener("click",t.lazyData.ingressManager.handleIngressClick),t.ingressContainer.append(t.iconContainer),ri(t.ingressContainer),t.isPullUiReady=!0)})),h()(this,"showIngress",(function(){var e=t.iconContainer.querySelector("img");null!=e&&e.complete?Ye(t.ingressContainer):null==e||e.addEventListener("load",(function(){return Ye(t.ingressContainer)}))})),h()(this,"hideIngress",(function(){Je(t.ingressContainer)})),this.lazyData=n,this.isPullUiReady=!1}return f()(e,[{key:"ingressContainer",get:function(){return this.lazyData.ingressDomContainerElementProvider.ingressContainer}},{key:"iconContainer",get:function(){return this.lazyData.ingressDomContainerElementProvider.iconContainer}}]),e}();function oi(e){Tt().where(ye.ShpIngress).to(ve.Display).type(g.INFORMATION).additional("mode",we.Pull).additional(me.SidebarVersion,e).publish(),yt("".concat(ye.ShpIngress,".").concat(e,".").concat(we.Pull),"Display",1),Tt().where(ye.OnPageAssistantIngress).to(ve.Display).type(g.INFORMATION).publish(),yt("OpaIngress","Display",1)}function ai(e){Tt().where(ye.ShpIngress).to(ve.Click).type(g.ACTION).additional("mode",we.Pull).additional(me.SidebarVersion,e).publish(),yt("".concat(ye.ShpIngress,".").concat(e,".").concat(we.Pull),"Click",1),Tt().where(ye.OnPageAssistantIngress).to(ve.Click).type(g.ACTION).publish(),yt("OpaIngress","Click",1)}var si=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri;l()(this,e),h()(this,"lazyData",void 0),h()(this,"reset",(function(){t.ingressDom.hideIngress()})),h()(this,"displayPullUi",(function(){t.ingressDom.preparePullUi(),t.ingressDom.showIngress(),oi(t.sidebarVersion)})),h()(this,"handleIngressClick",(function(){t.lazyData.internalShpClientAPI.displaySupport(),ai(t.sidebarVersion)})),this.lazyData=n}return f()(e,[{key:"ingressDom",get:function(){return this.lazyData.ingressDom}},{key:"sidebarVersion",get:function(){return this.lazyData.internalShpClientAPI.sidebarVersion()}}]),e}(),ui=n.p+"assets/9a71fe20.svg",li=n.p+"assets/e7473901.svg",ci=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri;l()(this,e),h()(this,"lazyData",void 0),h()(this,"_ingressContainer",void 0),h()(this,"_iconContainer",void 0),h()(this,"_counterContainer",void 0),h()(this,"_tooltipContainer",void 0),h()(this,"_messageContainer",void 0),h()(this,"_closeBtnContainer",void 0),this.lazyData=t}return f()(e,[{key:"ingressContainer",get:function(){return this._ingressContainer||(this._ingressContainer=qe("div",ie.IngressContainerId,ae)),this._ingressContainer}},{key:"iconContainer",get:function(){if(!this._iconContainer){this._iconContainer=qe("div",ie.IconContainerId);var e=qe("img",void 0,"icon");this.lazyData.internalShpClientAPI.isMeld()?e.setAttribute("src",li):e.setAttribute("src",ui),this.iconContainer.append(e)}return this._iconContainer}},{key:"counterContainer",get:function(){return this._counterContainer||(this._counterContainer=qe("div",ie.CounterContainerId)),this._counterContainer}},{key:"tooltipContainer",get:function(){return this._tooltipContainer||(this._tooltipContainer=qe("div",ie.TooltipContainerId,ae),this.tooltipContainer.append(this.messageContainer,this.closeBtnContainer)),this._tooltipContainer}},{key:"messageContainer",get:function(){return this._messageContainer||(this._messageContainer=qe("div",ie.MessageContainerId)),this._messageContainer}},{key:"closeBtnContainer",get:function(){if(!this._closeBtnContainer){this._closeBtnContainer=qe("div",ie.CloseBtnContainerId,ae);var e=qe("span",void 0,"close-btn");e.innerHTML="&#10005;",this._closeBtnContainer.append(e)}return this._closeBtnContainer}}]),e}(),fi=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ri;l()(this,e),h()(this,"_config",void 0),h()(this,"_lazyData",void 0),h()(this,"displaySupport",(function(){pt(n._config.clientId,be.Meld),n.summon({type:s.SummonArgsType.Support,clientId:n._config.clientId})})),h()(this,"isMeld",(function(){return!0})),this._config=t,this._lazyData=r}return f()(e,[{key:"summon",value:function(e){var t=this;ur((function(){t._lazyData.meldSidebarManager.summon(e,t._config.clientId)}))}},{key:"sidebarVersion",value:function(){return be.Meld}},{key:"close",value:function(){this._lazyData.meldSidebarManager.closeIfOpen()}}]),e}(),di=f()((function e(){l()(this,e),h()(this,"newClient",(function(e){return new fi(e)}))})),hi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ri;l()(this,e),h()(this,"_config",void 0),h()(this,"_lazyData",void 0),h()(this,"isMeld",(function(){return!1})),this._config=t,this._lazyData=n,this.displaySupport=this.displaySupport.bind(this)}return f()(e,[{key:"displaySupport",value:function(){pt(this._config.clientId,be.HelpHub),this.loadContentForSrc("/help/hub/inline/sidebar/assistant")}},{key:"sidebarVersion",value:function(){return be.HelpHub}},{key:"close",value:function(){}},{key:"loadContentForSrc",value:function(e,t,n){var r=this;ur((function(){r._lazyData.sidebarManager.summon(e,t,n)}))}}]),e}(),pi=function(){function e(){l()(this,e),this.newClient=this.newClient.bind(this)}return f()(e,[{key:"newClient",value:function(e){return new hi(e)}}]),e}(),_i=f()((function e(){var t=this;l()(this,e),h()(this,"internalManager",void 0),h()(this,"init",(function(e,n){t.internalManager=new gi(e,n)})),h()(this,"stayInsideWindow",(function(){var e;null===(e=t.internalManager)||void 0===e||e.stayInsideWindow()}))})),gi=function(){function e(t,n){var r=this;l()(this,e),h()(this,"dragContainer",void 0),h()(this,"dragSurface",void 0),h()(this,"draggingState",void 0),h()(this,"handleMouseDown",(function(e){Be()||(e.preventDefault(),r.dragContainer.classList.add(_e),r.dragSurface.remove(),r.dragContainer.append(r.dragSurface),r.draggingState={mouseOffsetX:r.dragContainer.offsetLeft-e.clientX,mouseOffsetY:r.dragContainer.offsetTop-e.clientY},document.addEventListener("mousemove",r.handleMouseMove),document.addEventListener("mouseup",r.handleMouseUp))})),h()(this,"handleMouseMove",(function(e){if(r.draggingState){e.preventDefault();var t=r.topToBottom(e.clientY+r.draggingState.mouseOffsetY),n=r.leftToRight(e.clientX+r.draggingState.mouseOffsetX);requestAnimationFrame((function(){r.dragContainer.style.bottom=r.getBoundedCoordinate(t,r.dragContainer.offsetHeight,window.innerHeight),r.dragContainer.style.right=r.getBoundedCoordinate(n,r.dragContainer.offsetWidth,window.innerWidth)}))}})),h()(this,"handleMouseUp",(function(e){e.preventDefault(),r.dragContainer.classList.remove(_e),r.dragSurface.remove(),r.draggingState=void 0,document.removeEventListener("mousemove",r.handleMouseMove),document.removeEventListener("mouseup",r.handleMouseUp)})),h()(this,"stayInsideWindow",(function(){var e=r.leftToRight(r.dragContainer.offsetLeft),t=r.topToBottom(r.dragContainer.offsetTop);(r.dragContainer.offsetLeft<0||e<0)&&requestAnimationFrame((function(){r.dragContainer.style.right=r.getBoundedCoordinate(e,r.dragContainer.offsetWidth,window.innerWidth)})),(r.dragContainer.offsetTop<0||t<0)&&requestAnimationFrame((function(){r.dragContainer.style.bottom=r.getBoundedCoordinate(t,r.dragContainer.offsetHeight,window.innerHeight)}))})),this.dragContainer=t,this.draggingState=void 0,this.dragSurface=qe("div",void 0,"shp-window-drag-surface"),window.addEventListener("resize",this.stayInsideWindow),n.addEventListener("mousedown",this.handleMouseDown)}return f()(e,[{key:"getBoundedCoordinate",value:function(e,t,n){var r=e+t<n?e:n-t;return r>0?this.getAsPixelLength(r):this.getAsPixelLength(0)}},{key:"leftToRight",value:function(e){return window.innerWidth-e-this.dragContainer.offsetWidth}},{key:"topToBottom",value:function(e){return window.innerHeight-e-this.dragContainer.offsetHeight}},{key:"getAsPixelLength",value:function(e){return e+"px"}}]),e}(),vi=n(180),yi=n(181),mi=n(182),bi=n(183),wi=n(51),Si=function(e){return e.onaIngressEnabled="opaIngressEnabled",e.opaFirstNav="opaFirstNavExperience",e}({});function Ti(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ci(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ci(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri;l()(this,e),h()(this,"lazyData",void 0),this.lazyData=t}var t;return f()(e,[{key:"isFeatureEnabled",value:(t=i()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getFeatureConfigValue(t),e.next=3,hr(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getFeatureConfigValue",value:function(e){var t=L(),n=this.lazyData.acsClient.getFeatureConfigs(new wi.SidebarHelpPanelFeatureConfigContext(cr())),r=this.lazyData.acsClient.getFeatureConfigs(new wi.SidebarHelpPanelFeatureConfigContext("ANY")),i=this.getFeatureValue(t,n,e);return i||this.getFeatureValue(t,r,e)}},{key:"getFeatureValue",value:function(e,t,n){if(null!==t){var r,i=Ti(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.urlRegex&&e.match(o.urlRegex))return o[n]}}catch(a){i.e(a)}finally{i.f()}}}}]),e}();var Ii=[/^\/help\/center\/?.*$/],Ei="missing",Oi={ConversationalAssistantEnabled:!1,CAFirstTimeExperienceEligible:!1,customerIdentifier:Ei},Ai="/meld/mons-api/GetSidebarContext";function ki(e,t){var n=e.enabledFeatures;return!(!n||!Array.isArray(n))&&n.includes(t)}function Mi(e,t){return function(e,t,n){return fetch(e,n).then(wr).then((function(e){return yt(t,"Failure",0),Promise.resolve(e)}),(function(e){return br.error("Unexpected failure on get request in ".concat(t," - ").concat(e)),yt(t,"Failure",1),Promise.reject(e)}))}(t?Ai+"?"+t.toString():Ai,"GetSidebarContext",e?{cache:"reload"}:void 0).then((function(e){return e.json()})).then((function(e){return{ConversationalAssistantEnabled:ki(e,"GeneralAssistant"),CAFirstTimeExperienceEligible:!!e.caFTEligible,customerIdentifier:e.customerIdentifier||Ei}}))}function Pi(){return ir(nr.SidebarContext).then((function(e){return e===rr.T1}))}function Ni(e){return window.Cypress&&!window._allowCypressExecution?(br.logCountMetric("CypressDisabled",1),!0):e&&(t=L(),!(void 0!==Ii.find((function(e){return e.test(t)}))));var t}function Li(){return(Li=i()(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ni(t)){e.next=2;break}return e.abrupt("return",Oi);case 2:return e.prev=2,e.next=5,Pi();case 5:if(!e.sent){e.next=9;break}return e.next=8,Mi(D(window),n);case 8:return e.abrupt("return",e.sent);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),br.error("Error retrieving sidebar context, failing closed to default context - ".concat(e.t0));case 14:return e.abrupt("return",Oi);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}var Ri=new(function(){function e(){l()(this,e),h()(this,"_sidebarManager",void 0),h()(this,"_acsClient",void 0),h()(this,"_sidebarFeatureConfigurator",void 0),h()(this,"_meldSidebarManager",void 0),h()(this,"_contentFrameManager",void 0),h()(this,"_searchSuggestionsManager",void 0),h()(this,"_messageManager",void 0),h()(this,"_messenger",void 0),h()(this,"_meldDomManager",void 0),h()(this,"_meldDragManager",void 0),h()(this,"_ingressDomContainerElementProvider",void 0),h()(this,"_ingressDom",void 0),h()(this,"_ingressManager",void 0),h()(this,"_internalShpClientAPI",void 0),h()(this,"_shouldUseMeld",void 0),h()(this,"_sidebarHistoryManager",void 0),h()(this,"_sidebarContext",void 0)}return f()(e,[{key:"sidebarManager",get:function(){return this._sidebarManager||(this._sidebarManager=new vr),this._sidebarManager}},{key:"acsClient",get:function(){if(!this._acsClient){var e=new vi.OfflineConfigManager;this._acsClient=e.createClient(new wi.SidebarHelpPanelFeatureConfigClientProvider,{configFiles:{documents:yi.a,exactQueries:mi.a,hierarchicalFallbackQueries:bi.a}})}return this._acsClient}},{key:"sidebarFeatureConfigurator",get:function(){return this._sidebarFeatureConfigurator||(this._sidebarFeatureConfigurator=new xi),this._sidebarFeatureConfigurator}},{key:"meldSidebarManager",get:function(){return this._meldSidebarManager||(this._meldSidebarManager=new ti),this._meldSidebarManager}},{key:"contentFrameManager",get:function(){return this._contentFrameManager||(this._contentFrameManager=new yr),this._contentFrameManager}},{key:"searchSuggestionsManager",get:function(){return this._searchSuggestionsManager||(this._searchSuggestionsManager=new Ur),this._searchSuggestionsManager}},{key:"messageManager",get:function(){return this._messageManager||(this._messageManager=new Vr),this._messageManager}},{key:"shpMessenger",get:function(){return this._messenger||(this._messenger=new s.ShpMessenger),this._messenger}},{key:"shpHistoryManager",get:function(){return this._sidebarHistoryManager||(this._sidebarHistoryManager=new s.ShpHistoryManager(br)),this._sidebarHistoryManager}},{key:"meldDomManager",get:function(){return this._meldDomManager||(this._meldDomManager=new Jr),this._meldDomManager}},{key:"meldDragManager",get:function(){return this._meldDragManager||(this._meldDragManager=new _i),this._meldDragManager}},{key:"ingressDomContainerElementProvider",get:function(){return this._ingressDomContainerElementProvider||(this._ingressDomContainerElementProvider=new ci),this._ingressDomContainerElementProvider}},{key:"ingressDom",get:function(){return this._ingressDom||(this._ingressDom=new ii),this._ingressDom}},{key:"ingressManager",get:function(){return this._ingressManager||(this._ingressManager=new si),this._ingressManager}},{key:"internalShpClientAPI",get:function(){if(!this._internalShpClientAPI)if(this._shouldUseMeld){var e=new di;this._internalShpClientAPI=e.newClient({clientId:ge})}else{var t=new pi;this._internalShpClientAPI=t.newClient({clientId:ge})}return this._internalShpClientAPI}},{key:"shouldUseMeld",get:function(){return!!this._shouldUseMeld},set:function(e){this._shouldUseMeld=e}},{key:"sidebarContext",get:function(){if(!this._sidebarContext)if(this._shouldUseMeld){var e=this.meldDomManager.isPartnerPage();this._sidebarContext=function(e,t){return Li.apply(this,arguments)}(e)}else this._sidebarContext=Promise.resolve(Oi);return this._sidebarContext}}]),e}());function Di(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ji(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ui=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ri;l()(this,e),h()(this,"_config",void 0),h()(this,"_lazyData",void 0),h()(this,"_ircIdentifier","/irc/widget?"),h()(this,"_actionPanelIdentifier","/myinventory/actions?"),h()(this,"displayHelp",(function(e,t){n.displaySolution(s.SolutionType.Help,e,t)})),h()(this,"displaySolution",(function(e,t,r,i){lr(e,n._config.clientId,be.Meld),ht(n._config.clientId,e,t,be.Meld),n.summon(Fi(Fi({},n.getBaseSummonArgs()),{},{type:s.SummonArgsType.Solution,solutionType:e,solutionId:t,solutionAdditionalArgs:r,scope:null==i?void 0:i.scope}))})),h()(this,"search",(function(e,t){ft(n._config.clientId,be.Meld),n.summon(Fi(Fi({},n.getBaseSummonArgs()),{},{type:s.SummonArgsType.Search,query:e,contentType:t}))})),h()(this,"handleHelpLinkClick",(function(){return dt(n._config.clientId,be.Meld),!1})),h()(this,"displayCustomPage",(function(e,t,r,i){if(e.indexOf(n._ircIdentifier)>=0){var o=e.slice(e.indexOf(n._ircIdentifier)+n._ircIdentifier.length);n.displaySolution(s.SolutionType.InlineRevenueCalculator,"IRCv1",n.getSolutionAdditionalArgsFromUrl(o),i)}else if(e.indexOf(n._actionPanelIdentifier)>=0){var a=e.slice(e.indexOf(n._actionPanelIdentifier)+n._actionPanelIdentifier.length);n.displaySolution(s.SolutionType.ActionPanel,"APv1",n.getSolutionAdditionalArgsFromUrl(a),i)}else _t(n._config.clientId,be.Meld),br.error("MeldSidebar Unexpected Custom Page Usage from client [".concat(n._config.clientId,"] with url [").concat(e,"]"))})),this._config=t,this._lazyData=r}return f()(e,[{key:"getBaseSummonArgs",value:function(){return{clientId:this._config.clientId}}},{key:"newConversation",value:function(e){var t,n;return t=this._config.clientId,n=be.Meld,yt(ye.NewConversation,"Count",1),yt(t,"NewConversation.Count",1),St(t,ye.NewConversation,n),this.summon(Fi(Fi({},this.getBaseSummonArgs()),{},{type:s.SummonArgsType.NewConversation,initialConversation:e})),!0}},{key:"loadConversation",value:function(e,t){return function(e,t,n){yt(ye.LoadConversation,"Count",1),yt(e,"LoadConversation.Count",1);var r=n?{conversationId:n}:void 0;St(e,ye.LoadConversation,t,r)}(this._config.clientId,be.Meld,e),this.summon(Fi(Fi({},this.getBaseSummonArgs()),{},{type:s.SummonArgsType.LoadConversation,conversationId:e,draftUtterance:t})),!0}},{key:"handleSidebarAction",value:function(e){switch(e.type){case s.SidebarPageType.Conversation:return void(this.onConversationalAssistantPage()||(void 0!==e.conversationId?this.loadConversation(e.conversationId,e.draftUtterance):this.loadConversation()));case s.SidebarPageType.EmptyConversation:if(!this.onConversationalAssistantPage()){var t={draftUtterance:e.draftUtterance};this.newConversation(t)}return;case s.SidebarPageType.Solution:var n=e.solutionType,r=e.solutionId,i=e.solutionAdditionalArgs,o=e.scope;return void this.displaySolution(n,r,i,{scope:o})}}},{key:"onConversationalAssistantPage",value:function(){return window.location.pathname.startsWith("/help/center/assistant")}},{key:"getSolutionAdditionalArgsFromUrl",value:function(e){var t,n={},r=Di(new URLSearchParams(e).entries());try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i[0].toLowerCase()]=encodeURIComponent(i[1])}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"summon",value:function(e){var t=this;ur((function(){t._lazyData.meldSidebarManager.summon(e,t._config.clientId)}))}}]),e}(),Vi=f()((function e(){l()(this,e),h()(this,"newClient",(function(e){return new Ui(e)}))})),Hi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ri;l()(this,e),h()(this,"_config",void 0),h()(this,"_lazyData",void 0),h()(this,"_newApi",void 0),h()(this,"handleHelpLinkClick",(function(){return!1})),this._config=t,this._lazyData=n,this.displayHelp=this.displayHelp.bind(this),this.displaySolution=this.displaySolution.bind(this),this.displayCustomPage=this.displayCustomPage.bind(this),this.search=this.search.bind(this),this.handleHelpLinkClick=this.handleHelpLinkClick.bind(this),this.loadContentForSrc=this.loadContentForSrc.bind(this),this._newApi=new Ui(t,n)}return f()(e,[{key:"displayHelp",value:function(e,t){this.displaySolution(s.SolutionType.Help,e,t)}},{key:"displaySolution",value:function(e,t,n){lr(e,this._config.clientId,be.HelpHub),ht(this._config.clientId,e,t,be.HelpHub),this._lazyData.meldSidebarManager.destroy();var r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i="".concat(C,"/solution?type=").concat(e,"&id=").concat(encodeURIComponent(t),"&client=").concat(n);return Object.keys(r).reduce((function(e,t){return"".concat(e,"&").concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t]))}),i)}(e,t,this._config.clientId);!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=je(re.AdditionalParamsId);t&&t.remove();var n=qe("div",re.AdditionalParamsId,re.AdditionalParamsId);n.style.display="none",n.setAttribute("data-additional-params",JSON.stringify(e)),Oe(re.ShpContainerId).append(n)}(n),this.loadContentForSrc(r)}},{key:"search",value:function(e,t){ft(this._config.clientId,be.HelpHub),this._lazyData.meldSidebarManager.destroy();var n=function(e,t,n){var r=n?"&content=".concat(n):"";return"".concat(C,"/search?query=").concat(encodeURIComponent(e)).concat(r,"&client=").concat(t)}(e,this._config.clientId,t);this.loadContentForSrc(n)}},{key:"displayCustomPage",value:function(e,t,n){_t(this._config.clientId,be.HelpHub),this._lazyData.meldSidebarManager.destroy(),this.loadContentForSrc(e,t,n)}},{key:"loadContentForSrc",value:function(e,t,n){var r=this;ur((function(){r._lazyData.sidebarManager.summon(e,t,n)}))}},{key:"newConversation",value:function(e){return this._lazyData.sidebarManager.destroy(),this._newApi.newConversation(e)}},{key:"loadConversation",value:function(e){return this._lazyData.sidebarManager.destroy(),this._newApi.loadConversation(e)}},{key:"handleSidebarAction",value:function(e){this._lazyData.sidebarManager.destroy(),this._newApi.handleSidebarAction(e)}}]),e}(),Wi=function(){function e(){l()(this,e),this.newClient=this.newClient.bind(this)}return f()(e,[{key:"newClient",value:function(e){return new Hi(e)}}]),e}(),qi="data-direct-answer-name-",zi=function(){function e(t){l()(this,e),h()(this,"_shpClient",void 0),this._shpClient=t,this.bindAllTriggers=this.bindAllTriggers.bind(this),this.handleTriggerClick=this.handleTriggerClick.bind(this),this.handleTriggerClickHelper=this.handleTriggerClickHelper.bind(this),this.handleLearnMoreClick=this.handleLearnMoreClick.bind(this),this.handleUniversalHelpClick=this.handleUniversalHelpClick.bind(this),this.parseDirectAnswerIdFromClass=this.parseDirectAnswerIdFromClass.bind(this)}return f()(e,[{key:"handleTriggerClick",value:function(e){var t;if(null!==(t=e.target)&&void 0!==t&&t.matches(".spaui-trigger")){var n=e.target;this.handleTriggerClickHelper(e,n)}}},{key:"bindAllTriggers",value:function(){var e=this;[document,Le()].forEach((function(t){return null==t?void 0:t.addEventListener("click",e.handleTriggerClick)}))}},{key:"rebindAllTriggersForSPAPostNagivation",value:function(){var e=Le();e&&(e.removeEventListener("click",this.handleTriggerClick),e.addEventListener("click",this.handleTriggerClick))}},{key:"handleTriggerClickHelper",value:function(e,t){t.classList.contains("spaui-athena-da")?this.handleUniversalHelpClick(e,t):t.hasAttribute("data-spaui")&&this.handleLearnMoreClick(e,t)}},{key:"handleLearnMoreClick",value:function(e,t){try{var n=JSON.parse(t.getAttribute("data-spaui")),r=n.type,i=n.data;"topic"===r&&k(i.id)?(this._shpClient.displayHelp(i.id),e.preventDefault()):"customPage"===r&&k(i.contentUrl)&&k(i.headerLabel)?(this._shpClient.displayCustomPage(i.contentUrl,i.headerLabel,i.headerOpenUrl),e.preventDefault()):"search"===r&&k(i.query)?(this._shpClient.search(decodeURIComponent(i.query)),e.preventDefault()):"solution"===r&&k(i.solutionType)&&k(i.solutionId)&&k(i.client)?(this._shpClient.displaySolution(s.SolutionType.of(i.solutionType),i.solutionId),e.preventDefault()):"conversation"===r?(this._shpClient.newConversation(i),e.preventDefault()):"conversationHistory"===r&&k(i.conversationId)?(this._shpClient.loadConversation(i.conversationId),e.preventDefault()):"conversationHistory"===r&&(this._shpClient.loadConversation(),e.preventDefault())}catch(o){}}},{key:"handleUniversalHelpClick",value:function(e,t){var n=t.getAttribute("data-direct-answer-name"),r=this.parseDirectAnswerIdFromClass(t),i=null!=n?n:r;k(i)&&(this._shpClient.displaySolution(s.SolutionType.DirectAnswer,i),e.preventDefault())}},{key:"parseDirectAnswerIdFromClass",value:function(e){var t=void 0;return e.classList.forEach((function(e){e.startsWith(qi)&&(t=e.replace(qi,""))})),t}}]),e}(),Gi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ri;l()(this,e),h()(this,"_shpClient",void 0),h()(this,"_lazyData",void 0),h()(this,"_searchBoxId","sc-global-search-form"),this._shpClient=t,this._lazyData=n,this.bindAllSearchBoxes=this.bindAllSearchBoxes.bind(this),this.bindNavBarSearch=this.bindNavBarSearch.bind(this)}var t;return f()(e,[{key:"bindAllSearchBoxes",value:(t=i()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.getElementById(this._searchBoxId)){e.next=4;break}return e.abrupt("return",this.bindNavBarSearch());case 4:return e.abrupt("return",Ze("sc-global-search-loaded").then(this.bindNavBarSearch));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"bindNavBarSearch",value:function(){var e=this,t=document.getElementById(this._searchBoxId),n=document.getElementById("sc-search-field"),r=document.querySelector("#sc-global-search-form .sc-search-button");if(t&&n&&r){this._lazyData.searchSuggestionsManager.newBind({formId:this._searchBoxId,searchForm:t,searchInput:n,searchButton:r},this._shpClient);var i=function(){var t=n.value;k(t)&&e._shpClient.search(t)};return t.addEventListener("submit",(function(e){e.preventDefault()})),r.addEventListener("click",(function(){at(),i()})),n.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),at(),i())})),this._lazyData.sidebarContext.then((function(e){if(e.ConversationalAssistantEnabled)return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $n().then((function(){return Jn(e,t,n)}))}("shp-assistant-enabled-search","Search or ask Seller Assistant").then((function(e){n.setAttribute("placeholder",e)}))}))}return Promise.reject("Navbar search experience changed structure. We cannot bind our search experience.")}}]),e}(),Xi="spaui-help-topic",$i="spaui-direct-answer",Yi=function(){function e(t){l()(this,e),h()(this,"_shpClient",void 0),this._shpClient=t,this.bindAllUrlParams=this.bindAllUrlParams.bind(this),this.handleDirectAnswerParamPresent=this.handleDirectAnswerParamPresent.bind(this),this.handleHelpTopicParamPresent=this.handleHelpTopicParamPresent.bind(this)}return f()(e,[{key:"bindAllUrlParams",value:function(){var e=O(window.location.search);e.has($i)?this.handleDirectAnswerParamPresent(e):e.has(Xi)&&this.handleHelpTopicParamPresent(e)}},{key:"handleDirectAnswerParamPresent",value:function(t){var n=t.get($i);k(n)&&(e.emitHelpArticleFallbackSolutionMetrics(t),this._shpClient.displaySolution(s.SolutionType.DirectAnswer,n))}},{key:"handleHelpTopicParamPresent",value:function(e){var t=e.get(Xi);k(t)&&this._shpClient.displayHelp(t)}}],[{key:"emitHelpArticleFallbackSolutionMetrics",value:function(e){k(e.get(Xi))?yt("HAFallbackSolutionPresent","Count",1):yt("HAFallbackSolutionPresent","Count",0)}}]),e}(),Ji=function(){},Ki="Access to the SHP API is restricted until you register with it by calling _sellerPartnerAthena.register([clientId], [context])",Qi=window,Zi="LegacyV1Api",eo=function(){function e(t){l()(this,e),h()(this,"_shpClientFactory",void 0),this._shpClientFactory=t,this.shim=this.shim.bind(this),this.shimApisOnWindow=this.shimApisOnWindow.bind(this),this.handleOnLoadCallbacks=this.handleOnLoadCallbacks.bind(this),this.shimmedRegister=this.shimmedRegister.bind(this),this.shimmedDisplayHelpArticle=this.shimmedDisplayHelpArticle.bind(this)}return f()(e,[{key:"shim",value:function(){this.shimApisOnWindow(),this.handleOnLoadCallbacks()}},{key:"shimApisOnWindow",value:function(){Qi._sellerPartnerAthena={register:this.shimmedRegister,displayHelpArticle:this.shimmedDisplayHelpArticle,displaySearchResults:this.shimmedSearch,displayBestContentFor:Ji,summon:Ji,banish:Ji,setClosable:Ji,setHomeCard:Ji,subscribeToEvent:Ji,enableHelpHub:Ji,isContentInsideAthena:Ji}}},{key:"shimmedRegister",value:function(e,t){Qi._shpClientForV1Shim=this._shpClientFactory.newClient({clientId:e}),yt("".concat(Zi,":").concat(Ke()),"ApiRegistered",1)}},{key:"shimmedDisplayHelpArticle",value:function(e){void 0===Qi._shpClientForV1Shim?console.error(Ki):k(e)&&Qi._shpClientForV1Shim.displayHelp(e),yt("".concat(Zi,":").concat(Ke(),".DisplayHelpArticle"),"Count",1)}},{key:"shimmedSearch",value:function(e){void 0===Qi._shpClientForV1Shim?console.error(Ki):k(e)&&Qi._shpClientForV1Shim.search(e),yt("".concat(Zi,":").concat(Ke(),".Search"),"Count",1)}},{key:"handleOnLoadCallbacks",value:function(){var e;null===(e=Qi._sellerPartnerAthenaLoaded)||void 0===e||e.forEach((function(e){e()}))}}]),e}(),to=function(){},no="LegacyV2Api",ro=window,io=function(){function e(t){l()(this,e),h()(this,"_shpClientFactory",void 0),this._shpClientFactory=t,this.shim=this.shim.bind(this),this.auiPresent=this.auiPresent.bind(this),this.registerShimsOnP=this.registerShimsOnP.bind(this),this.crossRegisterShimsOntoASPP=this.crossRegisterShimsOntoASPP.bind(this),this.wrapBehindRegister=this.wrapBehindRegister.bind(this),this.shimmedUIModule=this.shimmedUIModule.bind(this),this.shimmedHelpModule=this.shimmedHelpModule.bind(this),this.shimmedSearchModule=this.shimmedSearchModule.bind(this),this.shimmedCustomCardModule=this.shimmedCustomCardModule.bind(this)}return f()(e,[{key:"shim",value:function(){this.auiPresent()&&(this.registerShimsOnP(),this.crossRegisterShimsOntoASPP())}},{key:"auiPresent",value:function(){return ro.P&&ro.P.AUI_BUILD_DATE}},{key:"registerShimsOnP",value:function(){ro.P.register("spaui-external-ui",this.shimmedUIModule),ro.P.register("spaui-external-help",this.shimmedHelpModule),ro.P.register("spaui-external-search",this.shimmedSearchModule),ro.P.register("spaui-external-custom-card",this.shimmedCustomCardModule)}},{key:"crossRegisterShimsOntoASPP",value:function(){ro.ASPP||(ro.ASPP=ro.P)}},{key:"wrapBehindRegister",value:function(e){var t=this;return{register:function(n){var r=t._shpClientFactory.newClient({clientId:n});return yt("".concat(no,":").concat(Ke()),"ApiRegistered",1),e(r)}}}},{key:"shimmedUIModule",value:function(){return this.wrapBehindRegister((function(){return{summon:function(e,t){null==t||t(),yt("".concat(no,":").concat(Ke(),".Summon"),"Count",1)},banish:to,setFooterHighlight:to,setClosable:to,isSummoned:to}}))}},{key:"shimmedHelpModule",value:function(){return this.wrapBehindRegister((function(e){return{displayHelpTopic:function(t,n,r){k(t)?(e.displayHelp(t),null==n||n()):null==r||r(),yt("".concat(no,":").concat(Ke(),".DisplayHelpTopic"),"Count",1)}}}))}},{key:"shimmedSearchModule",value:function(){return this.wrapBehindRegister((function(e){return{search:function(t,n,r){k(t)?(e.search(t),null==n||n()):null==r||r(),yt("".concat(no,":").concat(Ke(),".Search"),"Count",1)},bindSearchToInput:to,bindSearchToInputSelector:to,bindSearchWithOptions:to}}))}},{key:"shimmedCustomCardModule",value:function(){return this.wrapBehindRegister((function(e){return{setCard:function(t,n,r,i){t&&"directAnswerCard"===t&&k(null==n?void 0:n.directAnswerName)?(e.displaySolution(s.SolutionType.DirectAnswer,n.directAnswerName),null==r||r()):null==i||i(),yt("".concat(no,":").concat(Ke(),".SetCard"),"Count",1)},setCardAsHome:to}}))}}]),e}(),oo=(n(396),f()((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri;l()(this,e),h()(this,"lazyData",void 0),h()(this,"init",i()(a.a.mark((function e(){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.lazyData.sidebarFeatureConfigurator.isFeatureEnabled(Si.onaIngressEnabled);case 2:return n=e.sent,e.next=5,t.lazyData.sidebarFeatureConfigurator.isFeatureEnabled(Si.opaFirstNav);case 5:if(r=e.sent,i=t.lazyData.internalShpClientAPI.isMeld(),n){e.next=10;break}return i&&t.lazyData.meldSidebarManager.setOpaNavFirstEnabled(r),e.abrupt("return");case 10:i&&(t.lazyData.meldSidebarManager.onPullIngressEnabled(),t.lazyData.meldSidebarManager.setOpaNavFirstEnabled(r)),ur((function(){t.lazyData.ingressManager.displayPullUi()}));case 12:case"end":return e.stop()}}),e)})))),this.lazyData=n})));function ao(){return(ao=i()(a.a.mark((function e(){var t,n,r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:Ri,n=i.length>1&&void 0!==i[1]?i[1]:window,e.next=4,t.sidebarContext;case 4:if(r=e.sent,!(so(n)||uo(r)&&!lo(r))){e.next=10;break}return fo(),e.abrupt("return",Promise.resolve(!0));case 10:return e.abrupt("return",Promise.resolve(!1));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function so(e){return new URLSearchParams(e.location.search).has("forceCAFTExperience")}function uo(e){return e.ConversationalAssistantEnabled&&e.CAFirstTimeExperienceEligible}function lo(e){return e.customerIdentifier===Ei||null!==function(e){try{return localStorage.getItem(e)}catch(t){return null}}(co(e.customerIdentifier))}function co(e){return"caFTEDismissed-".concat(e)}function fo(){0}yt("assetLoaded","BuildTime.".concat(1738681606038),1);var ho,po,_o,go,vo=new oo,yo=D(window);function mo(){To(),new io(ho).shim(),new eo(ho).shim(),po=new Yi(go),_o=new zi(go),po.bindAllUrlParams(),_o.bindAllTriggers(),new Gi(go).bindAllSearchBoxes(),Me(Ee.SetupFirstTime),ke(Ee.SetupFirstTime),vo.init(),function(){ao.apply(this,arguments)}(),function(){if(yo)return void Eo();if(0!==Io().length)return;var e=window.location.search,t=new URLSearchParams(e).get("shp-ca-cid");if(!t)return;var n={type:s.SidebarPageType.Conversation,conversationId:t};go.handleSidebarAction(n)}(),function(){if(yo)return void Eo();var e=Io().pop();e&&go.handleSidebarAction(e)}()}function bo(){mo(),window.Mons&&(window.addEventListener("popstate",Co),window.history.pushState=new Proxy(window.history.pushState,{apply:xo}),window.history.replaceState=new Proxy(window.history.replaceState,{apply:xo}))}function wo(){return So.apply(this,arguments)}function So(){return(So=i()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ae(),e.next=3,fr();case 3:t=e.sent,Ri.shouldUseMeld=t,ho=t?new Vi:new Wi,go=ho.newClient({clientId:ge}),Ne()?setTimeout(bo,2e3):mo();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function To(){var e={ClientFactory:ho,SolutionType:s.SolutionType,ContentType:s.ContentType};[window,Pe()].forEach((function(t){t&&(t.sidebarHelpPanel=e)}))}function Co(){var e=Pe();e&&!e.sidebarHelpPanel&&setTimeout((function(){var e,t;Ri.internalShpClientAPI.close(),To(),null===(e=po)||void 0===e||e.bindAllUrlParams(),null===(t=_o)||void 0===t||t.rebindAllTriggersForSPAPostNagivation(),Me(Ee.SetupForSPA),ke(Ee.SetupForSPA),Ri.ingressManager.reset(),vo.init()}))}function xo(e,t,n){return Co(),e.apply(t,n)}function Io(){return Ri.shpHistoryManager.getHistory()}function Eo(){Ri.shpHistoryManager.clearHistory()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",wo):wo()}]);