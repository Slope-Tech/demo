_insideGraph.registerModule("realtime",function(){/*!
* ASP.NET SignalR JavaScript Library 2.4.2
* http://signalr.net/
*
* Copyright (c) .NET Foundation. All rights reserved.
* Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
*
*/(function(n,t,i){function w(t,i){var u,f;if(n.isArray(t)){for(u=t.length-1;u>=0;u--)f=t[u],n.type(f)==="string"&&r.transports[f]||(i.log("Invalid transport: "+f+", removing it from the transports list."),t.splice(u,1));t.length===0&&(i.log("No transports remain within the specified transport array."),t=null)}else if(r.transports[t]||t==="auto"){if(t==="auto"&&r._.ieVersion<=8)return["longPolling"]}else i.log("Invalid transport: "+t.toString()+"."),t=null;return t}function b(n){return n==="http:"?80:n==="https:"?443:void 0}function a(n,t){return t.match(/:\d+$/)?t:t+":"+b(n)}function k(t,i){var u=this,r=[];u.tryBuffer=function(i){return t.state===n.signalR.connectionState.connecting?(r.push(i),!0):!1};u.drain=function(){if(t.state===n.signalR.connectionState.connected)while(r.length>0)i(r.shift())};u.clear=function(){r=[]}}var f={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorRedirectionExceedsLimit:"Negotiate redirection limit exceeded.",errorDuringStartRequest:"Error during start request. Stopping the connection.",errorFromServer:"Error message received from the server: '{0}'.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",aspnetCoreSignalrServer:"Detected a connection attempt to an ASP.NET Core SignalR Server. This client only supports connecting to an ASP.NET SignalR Server. See https://aka.ms/signalr-core-differences for details.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection.",jsonpNotSupportedWithAccessToken:"The JSONP protocol does not support connections that require a Bearer token to connect, such as the Azure SignalR Service."};if(typeof n!="function")throw new Error(f.nojQuery);var r,h,o=t.document.readyState==="complete",e=n(t),c="__Negotiate Aborted__",u={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},v=function(n,i){if(i!==!1){var r;typeof t.console!="undefined"&&(r="["+(new Date).toTimeString()+"] SignalR: "+n,t.console.debug?t.console.debug(r):t.console.log&&t.console.log(r))}},s=function(t,i,r){return i===t.state?(t.state=r,n(t).triggerHandler(u.onStateChanged,[{oldState:i,newState:r}]),!0):!1},y=function(n){return n.state===r.connectionState.disconnected},l=function(n){return n._.keepAliveData.activated&&n.transport.supportsKeepAlive(n)},p=function(i){var f,e;i._.configuredStopReconnectingTimeout||(e=function(t){var i=r._.format(r.resources.reconnectTimeout,t.disconnectTimeout);t.log(i);n(t).triggerHandler(u.onError,[r._.error(i,"TimeoutException")]);t.stop(!1,!1)},i.reconnecting(function(){var n=this;n.state===r.connectionState.reconnecting&&(f=t.setTimeout(function(){e(n)},n.disconnectTimeout))}),i.stateChanged(function(n){n.oldState===r.connectionState.reconnecting&&t.clearTimeout(f)}),i._.configuredStopReconnectingTimeout=!0)};if(r=function(n,t,i){return new r.fn.init(n,t,i)},r._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var i,n;return t.navigator.appName==="Microsoft Internet Explorer"&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(i=t.parseFloat(n[1]))),i}(),error:function(n,t,i){var r=new Error(n);return r.source=t,typeof i!="undefined"&&(r.context=i),r},transportError:function(n,t,r,u){var f=this.error(n,r,u);return f.transport=t?t.name:i,f},format:function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++)t=t.replace("{"+n+"}",arguments[n+1]);return t},firefoxMajorVersion:function(n){var t=n.match(/Firefox\/(\d+)/);return!t||!t.length||t.length<2?0:parseInt(t[1],10)},configurePingInterval:function(i){var f=i._.config,e=function(t){n(i).triggerHandler(u.onError,[t])};f&&!i._.pingIntervalId&&f.pingInterval&&(i._.pingIntervalId=t.setInterval(function(){r.transports._logic.pingServer(i).fail(e)},f.pingInterval))}},r.events=u,r.resources=f,r.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1},r.changeState=s,r.isDisconnecting=y,r.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},r.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'><\/script>.");}},typeof e.on=="function")e.on("load",function(){o=!0});else e.load(function(){o=!0});r.fn=r.prototype={init:function(t,i,r){var f=n(this);this.url=t;this.qs=i;this.lastError=null;this._={keepAliveData:{},connectingMessageBuffer:new k(this,function(n){f.triggerHandler(u.onReceived,[n])}),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0,redirectQs:null};typeof r=="boolean"&&(this.logging=r)},_parseResponse:function(n){var t=this;return n?typeof n=="string"?t.json.parse(n):n:n},_originalJson:t.JSON,json:t.JSON,isCrossDomain:function(i,r){var u;return(i=n.trim(i),r=r||t.location,i.indexOf("http")!==0)?!1:(u=t.document.createElement("a"),u.href=i,u.protocol+a(u.protocol,u.host)!==r.protocol+a(r.protocol,r.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:r.connectionState.disconnected,clientProtocol:"2.1",supportedProtocols:["1.5","2.0","2.1"],negotiateRedirectSupportedProtocols:["2.0","2.1"],reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(i,h){var a=this,v={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},g,y=a._deferral||n.Deferred(),b=t.document.createElement("a"),nt=function(i,u){i.url===u&&i.baseUrl||(i.url=u,b.href=i.url,b.protocol&&b.protocol!==":"?(i.protocol=b.protocol,i.host=b.host):(i.protocol=t.document.location.protocol,i.host=b.host||t.document.location.host),i.baseUrl=i.protocol+"//"+i.host,i.wsProtocol=i.protocol==="https:"?"wss://":"ws://",i.url.indexOf("//")===0&&(i.url=t.location.protocol+i.url,i.log("Protocol relative URL detected, normalizing it to '"+i.url+"'.")),i.isCrossDomain(i.url)&&(i.log("Auto detected cross domain url."),v.transport==="auto"&&(v.transport=["webSockets","serverSentEvents","longPolling"]),typeof i.withCredentials=="undefined"&&(i.withCredentials=!0),n.support.cors||(i.ajaxDataType="jsonp",i.log("Using jsonp because this browser doesn't support CORS.")),i.contentType=r._.defaultContentType))},d,k;if(a.lastError=null,a._deferral=y,!a.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if(n.type(i)==="function"?h=i:n.type(i)==="object"&&(n.extend(v,i),n.type(v.callback)==="function"&&(h=v.callback)),v.transport=w(v.transport,a),!v.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");return(a._.config=v,!o&&v.waitForPageLoad===!0)?(a._.deferredStartHandler=function(){a.start(i,h)},e.bind("load",a._.deferredStartHandler),y.promise()):a.state===r.connectionState.connecting?y.promise():s(a,r.connectionState.disconnected,r.connectionState.connecting)===!1?(y.resolve(a),y.promise()):(p(a),v.transport==="auto"&&v.jsonp===!0&&(v.transport="longPolling"),a.withCredentials=v.withCredentials,a._originalUrl=a.url,a.ajaxDataType=v.jsonp?"jsonp":"text",nt(a,a.url),n(a).bind(u.onStart,function(){n.type(h)==="function"&&h.call(a);y.resolve(a)}),a._.initHandler=r.transports._logic.initHandler(a),g=function(i,o){var c=r._.error(f.noTransportOnInit);if(o=o||0,o>=i.length){o===0?a.log("No transports supported by the server were selected."):o===1?a.log("No fallback transports were selected."):a.log("Fallback transports exhausted.");n(a).triggerHandler(u.onError,[c]);y.reject(c);a.stop();return}if(a.state!==r.connectionState.disconnected){var p=i[o],h=r.transports[p],v=function(){g(i,o+1)};a.transport=h;try{a._.initHandler.start(h,function(){var f=r._.firefoxMajorVersion(t.navigator.userAgent)>=11,i=!0;a.log("The start request succeeded. Transitioning to the connected state.");l(a)&&r.transports._logic.monitorKeepAlive(a);a._.keepAliveData.activated&&r.transports._logic.startHeartbeat(a);r._.configurePingInterval(a);s(a,r.connectionState.connecting,r.connectionState.connected)||a.log("WARNING! The connection was not in the connecting state.");a._.connectingMessageBuffer.drain();n(a).triggerHandler(u.onStart);e.bind("unload",function(){a.log("Window unloading, stopping the connection.");a.stop(i)});f&&e.bind("beforeunload",function(){t.setTimeout(function(){a.stop(i)},0)})},v)}catch(w){a.log(h.name+" transport threw '"+w.message+"' when attempting to start.");v()}}},d=a.url+"/negotiate",k=function(t,i){var e=r._.error(f.errorOnNegotiate,t,i._.negotiateRequest);n(i).triggerHandler(u.onError,e);y.reject(e);i.stop()},n(a).triggerHandler(u.onStarting),d=r.transports._logic.prepareQueryString(a,d),a.log("Negotiating with '"+d+"'."),a._.negotiateRequest=function(){var t,h=0,w=100,i,e,o=[],s=[],l=function(n,t){var u=r.transports._logic.prepareQueryString(n,n.url+"/negotiate"),i;return n.log("Negotiating with '"+u+"'."),i={url:u,error:function(t,i){i!==c?k(t,n):y.reject(r._.error(f.stoppedWhileNegotiating,null,n._.negotiateRequest))},success:t},n.accessToken&&(i.headers={Authorization:"Bearer "+n.accessToken}),r.transports._logic.ajax(n,i)},p=function(c){try{t=a._parseResponse(c)}catch(d){k(r._.error(f.errorParsingNegotiateResponse,d),a);return}if(t.availableTransports){e=r._.error(f.aspnetCoreSignalrServer);n(a).triggerHandler(u.onError,[e]);y.reject(e);return}if(!t.ProtocolVersion||a.supportedProtocols.indexOf(t.ProtocolVersion)===-1){e=r._.error(r._.format(f.protocolIncompatible,a.clientProtocol,t.ProtocolVersion));n(a).triggerHandler(u.onError,[e]);y.reject(e);return}if(a.negotiateRedirectSupportedProtocols.indexOf(t.ProtocolVersion)!==-1){if(t.Error){e=r._.error(r._.format(f.errorFromServer,t.Error));n(a).triggerHandler(u.onError,[e]);y.reject(e);return}if(t.RedirectUrl){if(h===w){k(r._.error(f.errorRedirectionExceedsLimit),a);return}v.transport==="auto"&&(v.transport=["webSockets","serverSentEvents","longPolling"]);a.log("Received redirect to: "+t.RedirectUrl);a.accessToken=t.AccessToken;var b=t.RedirectUrl.split("?",2);if(nt(a,b[0]),a._.redirectQs=b.length===2?b[1]:null,a.ajaxDataType==="jsonp"&&a.accessToken){k(r._.error(f.jsonpNotSupportedWithAccessToken),a);return}h++;l(a,p);return}}i=a._.keepAliveData;a.appRelativeUrl=t.Url;a.id=t.ConnectionId;a.token=t.ConnectionToken;a.webSocketServerUrl=t.WebSocketServerUrl;a._.pollTimeout=t.ConnectionTimeout*1e3+1e4;a.disconnectTimeout=t.DisconnectTimeout*1e3;a._.totalTransportConnectTimeout=a.transportConnectTimeout+t.TransportConnectTimeout*1e3;t.KeepAliveTimeout?(i.activated=!0,i.timeout=t.KeepAliveTimeout*1e3,i.timeoutWarning=i.timeout*a.keepAliveWarnAt,a._.beatInterval=(i.timeout-i.timeoutWarning)/3):i.activated=!1;a.reconnectWindow=a.disconnectTimeout+(i.timeout||0);n.each(r.transports,function(n){if(n.indexOf("_")===0||n==="webSockets"&&!t.TryWebSockets)return!0;s.push(n)});n.isArray(v.transport)?n.each(v.transport,function(t,i){n.inArray(i,s)>=0&&o.push(i)}):v.transport==="auto"?o=s:n.inArray(v.transport,s)>=0&&o.push(v.transport);g(o)};return l(a,p)}(),y.promise())},starting:function(t){var i=this;return n(i).bind(u.onStarting,function(){t.call(i)}),i},send:function(n){var t=this;if(t.state===r.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===r.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,n),t},received:function(t){var i=this;return n(i).bind(u.onReceived,function(n,r){t.call(i,r)}),i},stateChanged:function(t){var i=this;return n(i).bind(u.onStateChanged,function(n,r){t.call(i,r)}),i},error:function(t){var i=this;return n(i).bind(u.onError,function(n,r,u){i.lastError=r;t.call(i,r,u)}),i},disconnected:function(t){var i=this;return n(i).bind(u.onDisconnect,function(){t.call(i)}),i},connectionSlow:function(t){var i=this;return n(i).bind(u.onConnectionSlow,function(){t.call(i)}),i},reconnecting:function(t){var i=this;return n(i).bind(u.onReconnecting,function(){t.call(i)}),i},reconnected:function(t){var i=this;return n(i).bind(u.onReconnect,function(){t.call(i)}),i},stop:function(i,h){var a=this,v=a._deferral;if(a._.deferredStartHandler&&e.unbind("load",a._.deferredStartHandler),delete a._.config,delete a._.deferredStartHandler,!o&&(!a._.config||a._.config.waitForPageLoad===!0)){a.log("Stopping connection prior to negotiate.");v&&v.reject(r._.error(f.stoppedWhileLoading));return}if(a.state!==r.connectionState.disconnected)return a.log("Stopping connection."),t.clearTimeout(a._.beatHandle),t.clearInterval(a._.pingIntervalId),a.transport&&(a.transport.stop(a),h!==!1&&a.transport.abort(a,i),l(a)&&r.transports._logic.stopMonitoringKeepAlive(a),a.transport=null),a._.negotiateRequest&&(a._.negotiateRequest.abort(c),delete a._.negotiateRequest),a._.initHandler&&a._.initHandler.stop(),delete a._deferral,delete a.messageId,delete a.groupsToken,delete a.id,delete a._.pingIntervalId,delete a._.lastMessageAt,delete a._.lastActiveAt,a._.connectingMessageBuffer.clear(),n(a).unbind(u.onStart),delete a.accessToken,delete a.protocol,delete a.host,delete a.baseUrl,delete a.wsProtocol,delete a.contentType,a.url=a._originalUrl,a._.redirectQs=null,s(a,a.state,r.connectionState.disconnected),n(a).triggerHandler(u.onDisconnect),a},log:function(n){v(n,this.logging)}};r.fn.init.prototype=r.fn;r.noConflict=function(){return n.connection===r&&(n.connection=h),r};n.connection&&(h=n.connection);n.connection=n.signalR=r})(_insideGraph.jQuery,window),function(n,t,i){function s(n){n._.keepAliveData.monitoring&&l(n);u.markActive(n)&&(n._.beatHandle=t.setTimeout(function(){s(n)},n._.beatInterval))}function l(t){var i=t._.keepAliveData,u;t.state===r.connectionState.connected&&(u=(new Date).getTime()-t._.lastMessageAt,u>=i.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):u>=i.timeoutWarning?i.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),n(t).triggerHandler(f.onConnectionSlow),i.userNotified=!0):i.userNotified=!1)}function e(n,t){var i=n.url+t;return n.transport&&(i+="?transport="+n.transport.name),u.prepareQueryString(n,i)}function h(n){this.connection=n;this.startRequested=!1;this.startCompleted=!1;this.connectionStopped=!1}var r=n.signalR,f=n.signalR.events,c=n.signalR.changeState,o="__Start Aborted__",u;r.transports={};h.prototype={start:function(n,r,u){var f=this,e=f.connection,o=!1;if(f.startRequested||f.connectionStopped){e.log("WARNING! "+n.name+" transport cannot be started. Initialization ongoing or completed.");return}e.log(n.name+" transport starting.");n.start(e,function(){o||f.initReceived(n,r)},function(t){return o||(o=!0,f.transportFailed(n,t,u)),!f.startCompleted||f.connectionStopped});f.transportTimeoutHandle=t.setTimeout(function(){o||(o=!0,e.log(n.name+" transport timed out when trying to connect."),f.transportFailed(n,i,u))},e._.totalTransportConnectTimeout)},stop:function(){this.connectionStopped=!0;t.clearTimeout(this.transportTimeoutHandle);r.transports._logic.tryAbortStartRequest(this.connection)},initReceived:function(n,i){var u=this,f=u.connection;if(u.startRequested){f.log("WARNING! The client received multiple init messages.");return}u.connectionStopped||(u.startRequested=!0,t.clearTimeout(u.transportTimeoutHandle),f.log(n.name+" transport connected. Initiating start request."),r.transports._logic.ajaxStart(f,function(){u.startCompleted=!0;i()}))},transportFailed:function(i,u,e){var o=this.connection,h=o._deferral,s;this.connectionStopped||(t.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(s=r._.error(r.resources.errorDuringStartRequest,u),o.log(i.name+" transport failed during the start request. Stopping the connection."),n(o).triggerHandler(f.onError,[s]),h&&h.reject(s),o.stop()):(i.stop(o),o.log(i.name+" transport failed to connect. Attempting to fall back."),e()))}};u=r.transports._logic={ajax:function(t,i){return n.ajax(n.extend(!0,{},n.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:t.withCredentials},contentType:t.contentType,dataType:t.ajaxDataType},i))},pingServer:function(t){var e,f,i=n.Deferred();return t.transport?(e=t.url+"/ping",e=u.addQs(e,t.qs),f=u.ajax(t,{url:e,headers:t.accessToken?{Authorization:"Bearer "+t.accessToken}:{},success:function(n){var u;try{u=t._parseResponse(n)}catch(e){i.reject(r._.transportError(r.resources.pingServerFailedParse,t.transport,e,f));t.stop();return}u.Response==="pong"?i.resolve():i.reject(r._.transportError(r._.format(r.resources.pingServerFailedInvalidResponse,n),t.transport,null,f))},error:function(n){n.status===401||n.status===403?(i.reject(r._.transportError(r._.format(r.resources.pingServerFailedStatusCode,n.status),t.transport,n,f)),t.stop()):i.reject(r._.transportError(r.resources.pingServerFailed,t.transport,n,f))}})):i.reject(r._.transportError(r.resources.noConnectionTransport,t.transport)),i.promise()},prepareQueryString:function(n,i){var r;return r=u.addQs(i,"clientProtocol="+n.clientProtocol),r=typeof n._.redirectQs=="string"?u.addQs(r,n._.redirectQs):u.addQs(r,n.qs),n.token&&(r+="&connectionToken="+t.encodeURIComponent(n.token)),n.data&&(r+="&connectionData="+t.encodeURIComponent(n.data)),r},addQs:function(t,i){var r=t.indexOf("?")!==-1?"&":"?",u;if(!i)return t;if(typeof i=="object")return t+r+n.param(i);if(typeof i=="string")return u=i.charAt(0),(u==="?"||u==="&")&&(r=""),t+r+i;throw new Error("Query string property must be either a string or object.");},getUrl:function(n,i,r,f,e){var h=i==="webSockets"?"":n.baseUrl,o=h+n.appRelativeUrl,s="transport="+i;return!e&&n.groupsToken&&(s+="&groupsToken="+t.encodeURIComponent(n.groupsToken)),r?(o+=f?"/poll":"/reconnect",!e&&n.messageId&&(s+="&messageId="+t.encodeURIComponent(n.messageId))):o+="/connect",o+="?"+s,o=u.prepareQueryString(n,o),n.transport&&n.accessToken&&(n.transport.name==="serverSentEvents"||n.transport.name==="webSockets")&&(o+="&access_token="+t.encodeURIComponent(n.accessToken)),e||(o+="&tid="+Math.floor(Math.random()*11)),o},maximizePersistentResponse:function(n){return{MessageId:n.C,Messages:n.M,Initialized:typeof n.S!="undefined"?!0:!1,ShouldReconnect:typeof n.T!="undefined"?!0:!1,LongPollDelay:n.L,GroupsToken:n.G,Error:n.E}},updateGroups:function(n,t){t&&(n.groupsToken=t)},stringifySend:function(n,t){return typeof t=="string"||typeof t=="undefined"||t===null?t:n.json.stringify(t)},ajaxSend:function(t,i){var h=u.stringifySend(t,i),c=e(t,"/send"),o,s=function(t,u){n(u).triggerHandler(f.onError,[r._.transportError(r.resources.sendFailed,u.transport,t,o),i])};return o=u.ajax(t,{url:c,type:t.ajaxDataType==="jsonp"?"GET":"POST",contentType:r._.defaultContentType,headers:t.accessToken?{Authorization:"Bearer "+t.accessToken}:{},data:{data:h},success:function(n){var i;if(n){try{i=t._parseResponse(n)}catch(r){s(r,t);t.stop();return}u.triggerReceived(t,i)}},error:function(n,i){i!=="abort"&&i!=="parsererror"&&s(n,t)}})},ajaxAbort:function(n,i){if(typeof n.transport!="undefined"){i=typeof i=="undefined"?!0:i;var r=e(n,"/abort"),f=n.accessToken?{Authorization:"Bearer "+n.accessToken}:{};t.fetch?t.fetch(r,{method:"POST",keepalive:!0,headers:f}):u.ajax(n,{url:r,async:i,timeout:1e3,type:"POST",headers:f,dataType:"text"});n.log("Fired ajax abort async = "+i+".")}},ajaxStart:function(t,i){var h=function(n){var i=t._deferral;i&&i.reject(n)},s=function(i){t.log("The start request failed. Stopping the connection.");n(t).triggerHandler(f.onError,[i]);h(i);t.stop()};t._.startRequest=u.ajax(t,{url:e(t,"/start"),headers:t.accessToken?{Authorization:"Bearer "+t.accessToken}:{},success:function(n,u,f){var e;try{e=t._parseResponse(n)}catch(o){s(r._.error(r._.format(r.resources.errorParsingStartResponse,n),o,f));return}e.Response==="started"?i():s(r._.error(r._.format(r.resources.invalidStartResponse,n),null,f))},error:function(n,i,u){i!==o?s(r._.error(r.resources.errorDuringStartRequest,u,n)):(t.log("The start request aborted because connection.stop() was called."),h(r._.error(r.resources.stoppedDuringStartRequest,null,n)))}})},tryAbortStartRequest:function(n){n._.startRequest&&(n._.startRequest.abort(o),delete n._.startRequest)},tryInitialize:function(n,t,i){t.Initialized&&i?i():t.Initialized&&n.log("WARNING! The client received an init message after reconnecting.")},triggerReceived:function(t,i){t._.connectingMessageBuffer.tryBuffer(i)||n(t).triggerHandler(f.onReceived,[i])},processMessages:function(t,i,f){var e;if(i&&typeof i.I!="undefined"){u.triggerReceived(t,i);return}if(u.markLastMessage(t),i){if(e=u.maximizePersistentResponse(i),e.Error){t.log("Received an error message from the server: "+i.E);n(t).triggerHandler(r.events.onError,[r._.error(i.E,"ServerError")]);t.stop(!1,!1);return}u.updateGroups(t,e.GroupsToken);e.MessageId&&(t.messageId=e.MessageId);e.Messages&&(n.each(e.Messages,function(n,i){u.triggerReceived(t,i)}),u.tryInitialize(t,e,f))}},monitorKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring?t.log("Tried to monitor keep alive but it's already being monitored."):(i.monitoring=!0,u.markLastMessage(t),t._.keepAliveData.reconnectKeepAliveUpdate=function(){u.markLastMessage(t)},n(t).bind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+i.timeoutWarning+", keep alive timeout of "+i.timeout+" and disconnecting timeout of "+t.disconnectTimeout))},stopMonitoringKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring&&(i.monitoring=!1,n(t).unbind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t._.keepAliveData={},t.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(n){n._.lastActiveAt=(new Date).getTime();s(n)},markLastMessage:function(n){n._.lastMessageAt=(new Date).getTime();n._.lastActiveAt=n._.lastMessageAt},markActive:function(n){return u.verifyLastActive(n)?(n._.lastActiveAt=(new Date).getTime(),!0):!1},isConnectedOrReconnecting:function(n){return n.state===r.connectionState.connected||n.state===r.connectionState.reconnecting},ensureReconnectingState:function(t){return c(t,r.connectionState.connected,r.connectionState.reconnecting)===!0&&n(t).triggerHandler(f.onReconnecting),t.state===r.connectionState.reconnecting},clearReconnectTimeout:function(n){n&&n._.reconnectTimeout&&(t.clearTimeout(n._.reconnectTimeout),delete n._.reconnectTimeout)},verifyLastActive:function(t){if(!t._.keepAliveData.activated||(new Date).getTime()-t._.lastActiveAt<t.reconnectWindow)return!0;var i=r._.format(r.resources.reconnectWindowTimeout,new Date(t._.lastActiveAt),t.reconnectWindow);return t.log(i),n(t).triggerHandler(f.onError,[r._.error(i,"TimeoutException")]),t.stop(!1,!1),!1},reconnect:function(n,i){var f=r.transports[i];if(u.isConnectedOrReconnecting(n)&&!n._.reconnectTimeout){if(!u.verifyLastActive(n))return;n._.reconnectTimeout=t.setTimeout(function(){u.verifyLastActive(n)&&(f.stop(n),u.ensureReconnectingState(n)&&(n.log(i+" reconnecting."),f.start(n)))},n.reconnectDelay)}},handleParseFailure:function(t,i,u,e,o){var s=r._.transportError(r._.format(r.resources.parseFailed,i),t.transport,u,o);e&&e(s)?t.log("Failed to parse server response while attempting to connect."):(n(t).triggerHandler(f.onError,[s]),t.stop())},initHandler:function(n){return new h(n)},foreverFrame:{count:0,connections:{}}}}(_insideGraph.jQuery,window),function(n,t){var i=n.signalR,u=n.signalR.events,f=n.signalR.changeState,r=i.transports._logic;i.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,f){var e=r.stringifySend(t,f);try{t.socket.send(e)}catch(o){n(t).triggerHandler(u.onError,[i._.transportError(i.resources.webSocketsInvalidState,t.transport,o,t.socket),f])}},start:function(e,o,s){var h,c=!1,l=this,a=!o,v=n(e);if(!t.WebSocket){s();return}e.socket||(h=e.webSocketServerUrl?e.webSocketServerUrl:e.wsProtocol+e.host,h+=r.getUrl(e,this.name,a),e.log("Connecting to websocket endpoint '"+h+"'."),e.socket=new t.WebSocket(h),e.socket.onopen=function(){c=!0;e.log("Websocket opened.");r.clearReconnectTimeout(e);f(e,i.connectionState.reconnecting,i.connectionState.connected)===!0&&v.triggerHandler(u.onReconnect)},e.socket.onclose=function(t){var r;this===e.socket&&(c&&typeof t.wasClean!="undefined"&&t.wasClean===!1?(r=i._.transportError(i.resources.webSocketClosed,e.transport,t),e.log("Unclean disconnect from websocket: "+(t.reason||"[no reason given]."))):e.log("Websocket closed."),s&&s(r)||(r&&n(e).triggerHandler(u.onError,[r]),l.reconnect(e)))},e.socket.onmessage=function(n){var t;try{t=e._parseResponse(n.data)}catch(i){r.handleParseFailure(e,n.data,i,s,n);return}t&&r.processMessages(e,t,o)})},reconnect:function(n){r.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},stop:function(n){r.clearReconnectTimeout(n);n.socket&&(n.log("Closing the Websocket."),n.socket.close(),n.socket=null)},abort:function(n,t){r.ajaxAbort(n,t)}}}(_insideGraph.jQuery,window),function(n,t){var i=n.signalR,u=n.signalR.events,e=n.signalR.changeState,r=i.transports._logic,f=function(n){t.clearTimeout(n._.reconnectAttemptTimeoutHandle);delete n._.reconnectAttemptTimeoutHandle};i.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(o,s,h){var c=this,l=!1,a=n(o),v=!s,y;if(o.eventSource&&(o.log("The connection already has an event source. Stopping it."),o.stop()),!t.EventSource){h&&(o.log("This browser doesn't support SSE."),h());return}y=r.getUrl(o,this.name,v);try{o.log("Attempting to connect to SSE endpoint '"+y+"'.");o.eventSource=new t.EventSource(y,{withCredentials:o.withCredentials})}catch(p){o.log("EventSource failed trying to connect with error "+p.Message+".");h?h():(a.triggerHandler(u.onError,[i._.transportError(i.resources.eventSourceFailedToConnect,o.transport,p)]),v&&c.reconnect(o));return}v&&(o._.reconnectAttemptTimeoutHandle=t.setTimeout(function(){l===!1&&o.eventSource.readyState!==t.EventSource.OPEN&&c.reconnect(o)},c.timeOut));o.eventSource.addEventListener("open",function(){o.log("EventSource connected.");f(o);r.clearReconnectTimeout(o);l===!1&&(l=!0,e(o,i.connectionState.reconnecting,i.connectionState.connected)===!0&&a.triggerHandler(u.onReconnect))},!1);o.eventSource.addEventListener("message",function(n){var t;if(n.data!=="initialized"){try{t=o._parseResponse(n.data)}catch(i){r.handleParseFailure(o,n.data,i,h,n);return}r.processMessages(o,t,s)}},!1);o.eventSource.addEventListener("error",function(n){var r=i._.transportError(i.resources.eventSourceError,o.transport,n);this===o.eventSource&&(h&&h(r)||(o.log("EventSource readyState: "+o.eventSource.readyState+"."),n.eventPhase===t.EventSource.CLOSED?(o.log("EventSource reconnecting due to the server connection ending."),c.reconnect(o)):(o.log("EventSource error."),a.triggerHandler(u.onError,[r]))))},!1)},reconnect:function(n){r.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){r.ajaxSend(n,t)},stop:function(n){f(n);r.clearReconnectTimeout(n);n&&n.eventSource&&(n.log("EventSource calling close()."),n.eventSource.close(),n.eventSource=null,delete n.eventSource)},abort:function(n,t){r.ajaxAbort(n,t)}}}(_insideGraph.jQuery,window),function(n,t){var r=n.signalR,e=n.signalR.events,o=n.signalR.changeState,i=r.transports._logic,u=function(){var n=t.document.createElement("iframe");return n.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),n},f=function(){var i=null,f=1e3,n=0;return{prevent:function(){r._.ieVersion<=8&&(n===0&&(i=t.setInterval(function(){var n=u();t.document.body.appendChild(n);t.document.body.removeChild(n);n=null},f)),n++)},cancel:function(){n===1&&t.clearInterval(i);n>0&&n--}}}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(n,r,e){if(n.accessToken){e&&(n.log("Forever Frame does not support connections that require a Bearer token to connect, such as the Azure SignalR Service."),e());return}var l=this,s=i.foreverFrame.count+=1,h,o=u(),c=function(){n.log("Forever frame iframe finished loading and is no longer receiving messages.");e&&e()||l.reconnect(n)};if(t.EventSource){e&&(n.log("Forever Frame is not supported by SignalR on browsers with SSE support."),e());return}o.setAttribute("data-signalr-connection-id",n.id);f.prevent();h=i.getUrl(n,this.name);h+="&frameId="+s;t.document.documentElement.appendChild(o);n.log("Binding to iframe's load event.");o.addEventListener?o.addEventListener("load",c,!1):o.attachEvent&&o.attachEvent("onload",c);o.src=h;i.foreverFrame.connections[s]=n;n.frame=o;n.frameId=s;r&&(n.onSuccess=function(){n.log("Iframe transport started.");r()})},reconnect:function(n){var r=this;i.isConnectedOrReconnecting(n)&&i.verifyLastActive(n)&&t.setTimeout(function(){if(i.verifyLastActive(n)&&n.frame&&i.ensureReconnectingState(n)){var u=n.frame,t=i.getUrl(n,r.name,!0)+"&frameId="+n.frameId;n.log("Updating iframe src to '"+t+"'.");u.src=t}},n.reconnectDelay)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){i.ajaxSend(n,t)},receive:function(t,u){var f,e,o;if(t.json!==t._originalJson&&(u=t._originalJson.stringify(u)),o=t._parseResponse(u),i.processMessages(t,o,t.onSuccess),t.state===n.signalR.connectionState.connected&&(t.frameMessageCount=(t.frameMessageCount||0)+1,t.frameMessageCount>r.transports.foreverFrame.iframeClearThreshold&&(t.frameMessageCount=0,f=t.frame.contentWindow||t.frame.contentDocument,f&&f.document&&f.document.body)))for(e=f.document.body;e.firstChild;)e.removeChild(e.firstChild)},stop:function(n){var r=null;if(f.cancel(),n.frame){if(n.frame.stop)n.frame.stop();else try{r=n.frame.contentWindow||n.frame.contentDocument;r.document&&r.document.execCommand&&r.document.execCommand("Stop")}catch(u){n.log("Error occurred when stopping foreverFrame transport. Message = "+u.message+".")}n.frame.parentNode===t.document.documentElement&&t.document.documentElement.removeChild(n.frame);delete i.foreverFrame.connections[n.frameId];n.frame=null;n.frameId=null;delete n.frame;delete n.frameId;delete n.onSuccess;delete n.frameMessageCount;n.log("Stopping forever frame.")}},abort:function(n,t){i.ajaxAbort(n,t)},getConnection:function(n){return i.foreverFrame.connections[n]},started:function(t){o(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&n(t).triggerHandler(e.onReconnect)}}}(_insideGraph.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,e=n.signalR.changeState,f=n.signalR.isDisconnecting,i=r.transports._logic;r.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(o,s,h){var a=this,v=function(){v=n.noop;o.log("LongPolling connected.");s?s():o.log("WARNING! The client received an init message after reconnecting.")},y=function(n){return h(n)?(o.log("LongPolling failed to connect."),!0):!1},c=o._,l=0,p=function(i){t.clearTimeout(c.reconnectTimeoutId);c.reconnectTimeoutId=null;e(i,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(i.log("Raising the reconnect event"),n(i).triggerHandler(u.onReconnect))},w=36e5;o.pollXhr&&(o.log("Polling xhr requests already exists, aborting."),o.stop());o.messageId=null;c.reconnectTimeoutId=null;c.pollTimeoutId=t.setTimeout(function(){(function e(s,h){var g=s.messageId,nt=g===null,k=!nt,tt=!h,d=i.getUrl(s,a.name,k,tt,!0),b={};(s.messageId&&(b.messageId=s.messageId),s.groupsToken&&(b.groupsToken=s.groupsToken),f(s)!==!0)&&(o.log("Opening long polling request to '"+d+"'."),s.pollXhr=i.ajax(o,{xhrFields:{onprogress:function(){i.markLastMessage(o)}},url:d,type:"POST",contentType:r._.defaultContentType,data:b,timeout:o._.pollTimeout,headers:o.accessToken?{Authorization:"Bearer "+o.accessToken}:{},success:function(r){var h,w=0,u,a;o.log("Long poll complete.");l=0;try{h=o._parseResponse(r)}catch(b){i.handleParseFailure(s,r,b,y,s.pollXhr);return}(c.reconnectTimeoutId!==null&&p(s),h&&(u=i.maximizePersistentResponse(h)),i.processMessages(s,h,v),u&&n.type(u.LongPollDelay)==="number"&&(w=u.LongPollDelay),f(s)!==!0)&&(a=u&&u.ShouldReconnect,!a||i.ensureReconnectingState(s))&&(w>0?c.pollTimeoutId=t.setTimeout(function(){e(s,a)},w):e(s,a))},error:function(f,h){var v=r._.transportError(r.resources.longPollFailed,o.transport,f,s.pollXhr);if(t.clearTimeout(c.reconnectTimeoutId),c.reconnectTimeoutId=null,h==="abort"){o.log("Aborted xhr request.");return}if(!y(v)){if(l++,o.state!==r.connectionState.reconnecting&&(o.log("An error occurred using longPolling. Status = "+h+".  Response = "+f.responseText+"."),n(s).triggerHandler(u.onError,[v])),(o.state===r.connectionState.connected||o.state===r.connectionState.reconnecting)&&!i.verifyLastActive(o))return;if(!i.ensureReconnectingState(s))return;c.pollTimeoutId=t.setTimeout(function(){e(s,!0)},a.reconnectDelay)}}}),k&&h===!0&&(c.reconnectTimeoutId=t.setTimeout(function(){p(s)},Math.min(1e3*(Math.pow(2,l)-1),w))))})(o)},250)},lostConnection:function(n){n.pollXhr&&n.pollXhr.abort("lostConnection")},send:function(n,t){i.ajaxSend(n,t)},stop:function(n){t.clearTimeout(n._.pollTimeoutId);t.clearTimeout(n._.reconnectTimeoutId);delete n._.pollTimeoutId;delete n._.reconnectTimeoutId;n.pollXhr&&(n.pollXhr.abort(),n.pollXhr=null,delete n.pollXhr)},abort:function(n,t){i.ajaxAbort(n,t)}}}(_insideGraph.jQuery,window),function(n){function r(n){return n+s}function c(n,t,i){for(var f=n.length,u=[],r=0;r<f;r+=1)n.hasOwnProperty(r)&&(u[r]=t.call(i,n[r],r,n));return u}function l(t){return n.isFunction(t)?null:n.type(t)==="undefined"?null:t}function u(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}function f(n,t){var i=n._.invocationCallbacks,r,f;u(i)&&n.log("Clearing hub invocation callbacks with error: "+t+".");n._.invocationCallbackId=0;delete n._.invocationCallbacks;n._.invocationCallbacks={};for(f in i)r=i[f],r.method.call(r.scope,{E:t})}function e(t){return n.isFunction(t)&&t.toString().slice(0,256).indexOf("// Call the client hub method")>=0}function i(n,t){return new i.fn.init(n,t)}function t(i,r){var u={qs:null,logging:!1,useDefaultPath:!0};return n.extend(u,r),(!i||u.useDefaultPath)&&(i=(i||"")+"/signalr"),new t.fn.init(i,u)}var o=0,s=".hubProxy",h=n.signalR;i.fn=i.prototype={init:function(n,t){this.state={};this.connection=n;this.hubName=t;this._={callbackMap:{}}},constructor:i,hasSubscriptions:function(){return u(this._.callbackMap)},on:function(t,i,u){var c=this,l=c._.callbackMap,v=!u&&e(i),f,h,s,a;for(u=u||i,u._signalRGuid||(u._signalRGuid=o++),t=t.toLowerCase(),f=l[t],f||(f=[],l[t]=f),s=0;s<f.length;s++)(f[s].guid===u._signalRGuid||v&&f[s].isFromOldGeneratedHubProxy)&&(h=f[s]);return h||(h={guid:u._signalRGuid,eventHandlers:[],isFromOldGeneratedHubProxy:v},l[t].push(h)),a=function(n,t){i.apply(c,t)},h.eventHandlers.push(a),n(c).bind(r(t),a),c},off:function(t,i,u){var s=this,l=s._.callbackMap,f,a=!u&&e(i),h,v,o,c;if(u=u||i,t=t.toLowerCase(),f=l[t],f)if(i){for(o=0;o<f.length;o++)(f[o].guid===u._signalRGuid||a&&f[o].isFromOldGeneratedHubProxy)&&(v=o,h=f[o]);if(h){for(c=0;c<h.eventHandlers.length;c++)n(s).unbind(r(t),h.eventHandlers[c]);f.splice(o,1);f.length===0&&delete l[t]}}else i||(n(s).unbind(r(t)),delete l[t]);return s},invoke:function(t){var i=this,r=i.connection,e=n.makeArray(arguments).slice(1),o=c(e,l),f={H:i.hubName,M:t,A:o,I:r._.invocationCallbackId},u=n.Deferred(),s=function(f){var e=i._maximizeHubResponse(f),s,o;n.extend(i.state,e.State);e.Progress?u.notifyWith?u.notifyWith(i,[e.Progress.Data]):r._.progressjQueryVersionLogged||(r.log("A hub method invocation progress update was received but the version of jQuery in use ("+n.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),r._.progressjQueryVersionLogged=!0):e.Error?(e.StackTrace&&r.log(e.Error+"\n"+e.StackTrace+"."),s=e.IsHubException?"HubException":"Exception",o=h._.error(e.Error,s),o.data=e.ErrorData,r.log(i.hubName+"."+t+" failed to execute. Error: "+o.message),u.rejectWith(i,[o])):(r.log("Invoked "+i.hubName+"."+t),u.resolveWith(i,[e.Result]))};return r._.invocationCallbacks[r._.invocationCallbackId.toString()]={scope:i,method:s},r._.invocationCallbackId+=1,n.isEmptyObject(i.state)||(f.S=i.state),r.log("Invoking "+i.hubName+"."+t),r.send(f),u.promise()},_maximizeHubResponse:function(n){return{State:n.S,Result:n.R,Progress:n.P?{Id:n.P.I,Data:n.P.D}:null,Id:n.I,IsHubException:n.H,Error:n.E,StackTrace:n.T,ErrorData:n.D}}};i.fn.init.prototype=i.fn;t.fn=t.prototype=n.connection();t.fn.init=function(t,i){var e={qs:null,logging:!1,useDefaultPath:!0},u=this;n.extend(e,i);n.signalR.fn.init.call(u,t,e.qs,e.logging);u.proxies={};u._.invocationCallbackId=0;u._.invocationCallbacks={};u.received(function(t){var f,o,e,i,s,h;t&&(typeof t.P!="undefined"?(e=t.P.I.toString(),i=u._.invocationCallbacks[e],i&&i.method.call(i.scope,t)):typeof t.I!="undefined"?(e=t.I.toString(),i=u._.invocationCallbacks[e],i&&(u._.invocationCallbacks[e]=null,delete u._.invocationCallbacks[e],i.method.call(i.scope,t))):(f=this._maximizeClientHubInvocation(t),u.log("Triggering client hub event '"+f.Method+"' on hub '"+f.Hub+"'."),s=f.Hub.toLowerCase(),h=f.Method.toLowerCase(),o=this.proxies[s],n.extend(o.state,f.State),n(o).triggerHandler(r(h),[f.Args])))});u.error(function(n,t){var i,r;t&&(i=t.I,r=u._.invocationCallbacks[i],r&&(u._.invocationCallbacks[i]=null,delete u._.invocationCallbacks[i],r.method.call(r.scope,{E:n})))});u.reconnecting(function(){u.transport&&u.transport.name==="webSockets"&&f(u,"Connection started reconnecting before invocation result was received.")});u.disconnected(function(){f(u,"Connection was disconnected before invocation result was received.")})};t.fn._maximizeClientHubInvocation=function(n){return{Hub:n.H,Method:n.M,Args:n.A,State:n.S}};t.fn._registerSubscribedHubs=function(){var t=this;t._subscribedToHubs||(t._subscribedToHubs=!0,t.starting(function(){var i=[];n.each(t.proxies,function(n){this.hasSubscriptions()&&(i.push({name:n}),t.log("Client subscribed to hub '"+n+"'."))});i.length===0&&t.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to.");t.data=t.json.stringify(i)}))};t.fn.createHubProxy=function(n){n=n.toLowerCase();var t=this.proxies[n];return t||(t=i(this,n),this.proxies[n]=t),this._registerSubscribedHubs(),t};t.fn.init.prototype=t.fn;n.hubConnection=t}(_insideGraph.jQuery,window),function(n){n.signalR.version="2.4.2"}(_insideGraph.jQuery);/*!
* ASP.NET SignalR JavaScript Library v2.3.0-rtm
* http://signalr.net/
*
* Copyright (c) .NET Foundation. All rights reserved.
* Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
*
*/(function($,window,undefined){"use strict";if(typeof($.signalR)!=="function"){throw new Error("SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.");}
var signalR=$.signalR;function makeProxyCallback(hub,callback){return function(){callback.apply(hub,$.makeArray(arguments));};}
function registerHubProxies(instance,shouldSubscribe){var key,hub,memberKey,memberValue,subscriptionMethod;for(key in instance){if(instance.hasOwnProperty(key)){hub=instance[key];if(!(hub.hubName)){continue;}
if(shouldSubscribe){subscriptionMethod=hub.on;}else{subscriptionMethod=hub.off;}
for(memberKey in hub.client){if(hub.client.hasOwnProperty(memberKey)){memberValue=hub.client[memberKey];if(!$.isFunction(memberValue)){continue;}
subscriptionMethod.call(hub,memberKey,makeProxyCallback(hub,memberValue),memberValue);}}}}}
$.hubConnection.prototype.createHubProxies=function(){var proxies={};this.starting(function(){registerHubProxies(proxies,true);this._registerSubscribedHubs();}).disconnected(function(){registerHubProxies(proxies,false);});proxies['insideSocialHub']=this.createHubProxy('insideSocialHub');proxies['insideSocialHub'].client={};proxies['insideSocialHub'].server={acceptCoBrowseRequest:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["AcceptCoBrowseRequest"],$.makeArray(arguments)));},AcceptControlMode:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["AcceptControlMode"],$.makeArray(arguments)));},RejectControlMode:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["RejectControlMode"],$.makeArray(arguments)));},active:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["active"],$.makeArray(arguments)));},chat:function(chatid,text){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["chat"],$.makeArray(arguments)));},chatData:function(chatid,data,notifyToVisitor){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["chatData"],$.makeArray(arguments)));},chatAction:function(action){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["ChatAction"],$.makeArray(arguments)));},chatWithAttachments:function(chatid,text,fileids){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["chatWithAttachments"],$.makeArray(arguments)));},closeCoBrowseSession:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["CloseCoBrowseSession"],$.makeArray(arguments)));},coBrowseNotSupported:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["CoBrowseNotSupported"],$.makeArray(arguments)));},coBrowseRequestState:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["CoBrowseRequestState"],$.makeArray(arguments)));},coBrowseRequestData:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["CoBrowseRequestData"],$.makeArray(arguments)));},coBrowseSendToOperator:function(data){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["CoBrowseSendToOperator"],$.makeArray(arguments)));},externalChat:function(chatid,text,platform,platformKey){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["externalChat"],$.makeArray(arguments)));},getCurrentView:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["GetCurrentView"],$.makeArray(arguments)));},inactive:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["inactive"],$.makeArray(arguments)));},keepAlive:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["keepAlive"],$.makeArray(arguments)));},loadChat:function(chatid){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["loadChat"],$.makeArray(arguments)));},rejectCoBrowseRequest:function(){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["RejectCoBrowseRequest"],$.makeArray(arguments)));},relatedIntents:function(intentId,conversationId){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["RelatedIntents"],$.makeArray(arguments)));},startChat:function(text){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["startChat"],$.makeArray(arguments)));},stopChat:function(chatid){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["stopChat"],$.makeArray(arguments)));},unstick:function(stickyid){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["Unstick"],$.makeArray(arguments)));},updateCoBrowseSession:function(data){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["UpdateCoBrowseSession"],$.makeArray(arguments)));},updateDeliveryStatus:function(messageids,conversationid,status,message){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["updateDeliveryStatus"],$.makeArray(arguments)));},TriggerTimeOnPageEvent:function(eventId){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["TriggerTimeOnPageEvent"],$.makeArray(arguments)));},logVideoFeedAction:function(obj){return proxies['insideSocialHub'].invoke.apply(proxies['insideSocialHub'],$.merge(["logVideoFeedAction"],$.makeArray(arguments)));}};return proxies;};signalR.hub=$.hubConnection("/signalr",{useDefaultPath:false});$.extend(signalR,signalR.hub.createHubProxies());}(_insideGraph.jQuery,window));(function($,window){$.connection.hub.url=_insideSocialUrl+"signalr";var hub=$.connection.insideSocialHub;var _callback={};var _prebindings={};var _queueEvents=true;var _eventQueue=[];var _requestQueue=[];var _init=[];var _deinit=[];var _transports=["webSockets"];var disableLongPolling=window._insideDisableLongPolling||false;if(!disableLongPolling)
_transports.push("longPolling");hub.init=function(callback){_init[_init.length]=callback;};hub.deinit=function(callback){_deinit[_deinit.length]=callback;};hub.bind=function(name,callback){if(!_insideLive&&typeof(console)!="undefined"&&typeof(console.log)!="undefined"){console.log("[INSIDE]: bind :: "+name);}
if(typeof callback=="function"){if(!_callback[name])
_callback[name]=[];_callback[name][_callback[name].length]=callback;}};hub.prebindModule=function(name,module,source){_prebindings[name]=_prebindings[name]||[];_prebindings[name].push(function(){return _insideGraph.loadModule(module,source);});};hub.unbind=function(name,callback){if(typeof _callback[name]!="undefined"&&typeof callback=="function"){var index=_callback[name].indexOf(callback);if(index!=-1){if(name==="chat")console.log("unbind => chat event unbinded");_callback[name].splice(index,1);}}};hub.unbindAll=function(name){if(name==="chat")console.log("unbindAll => chat event unbinded");if(typeof _callback[name]!="undefined"){_callback[name]=[];}};hub.clearAllEvents=function(){_callback={};};hub.client.doEvent=function(name,data,stickyid){if(_queueEvents&&name!="connected"&&name!="disconnected"){_eventQueue.push({"name":name,"data":data,"stickyid":stickyid});return;}
if(!_insideLive&&typeof(console)!="undefined"&&typeof(console.log)!="undefined"){console.log("[INSIDE]: doEvent :: "+name+" :: "+(typeof(stickyid)!="undefined"?stickyid:"")+" :: ",data);}
var prebinds=_prebindings[name];if(prebinds){delete _prebindings[name];var promises=[];for(var i=0;i<prebinds.length;i++){promises.push(prebinds[i]());}
Promise.all(promises).then(function(){handleCallbacks(name,data,stickyid);});}else{handleCallbacks(name,data,stickyid);}};function handleCallbacks(name,data,stickyid){var eventCallbackList=_callback[name];if(eventCallbackList){for(var i=0;i<eventCallbackList.length;i++)
eventCallbackList[i](data,stickyid);}else{console.trace("Pushing to event queue...");_eventQueue.push({"name":name,"data":data,"stickyid":stickyid});}}
hub.flushQueue=function(){_queueEvents=false;var events=_eventQueue;_eventQueue=[];hub.client.doEvents(events);};hub.client.doEvents=function(events){for(var i=0;i<events.length;i++){hub.client.doEvent(events[i].name,events[i].data,events[i].stickyid);}};hub.client.stopInside=function(){$.connection.hub.stop();hub.client.doEvent("disconnected",null);for(var i=0;i<_deinit.length;i++)
_deinit[i]();_deinit=[];};hub.setCookie=function(cName,value){var exdate=new Date();exdate.setDate(exdate.getDate()+365*50);var c_value=escape(value)+";expires="+exdate.toUTCString()+";path=/";document.cookie=cName+"="+c_value;};function isNullOrWhiteSpace(str){return(!str||str.length===0||/^\s*$/.test(str));}
hub.ga=function(event){if(typeof(event)=="object"&&!isNullOrWhiteSpace(event.category)&&!isNullOrWhiteSpace(event.action))
{if(_insideGraph.hasEvent("googleAnalytics")){hub.unbind("ga",hub.ga);if(!_callback["ga"]||!_callback["ga"].length){hub.bind("ga",function(event){_insideGraph.doEvent("googleAnalytics",event);});}
_insideGraph.doEvent("googleAnalytics",event);}else{if(typeof(gtag)=="function")
gtag('event',event.action,{'event_category':event.category,'event_label':event.label,'value':event.value,'non_interaction':true});if(typeof(ga)=="function")
ga('send','event',event.category,event.action,event.label,event.value,true);if(typeof(_gaq)=="object")
_gaq.push('_trackEvent',event.category,event.action,event.label,event.value,true);if(typeof(google_tag_manager)!="undefined"&&typeof(dataLayer)=="object"){dataLayer.push({"event":"insideEvent","eventCategory":event.category,"eventAction":event.action,"eventLabel":event.label,"eventValue":event.value,"eventNI":true});}}}};hub.bind("ga",hub.ga);hub.resetting=false;hub.bind("reset",function(){if(hub.resetting){console.error("Cannot reset the connection when a reset it already in progress");return;}
hub.resetting=true;_insideGraph.reset();});hub.bind("connected",function(){hub.resetting=false;});hub.starts=0;hub.videoChat=false;var tryingToReconnect=false;var disconnected=false;$.connection.hub.reconnecting(function(){if(disconnected){console.log("reconnecting");}
tryingToReconnect=true;disconnected=false;});$.connection.hub.reconnected(function(){if(disconnected){console.log("reconnected");}
tryingToReconnect=false;disconnected=false;});$.connection.hub.disconnected(function(){hub.client.doEvent("disconnected",tryingToReconnect);if(!disconnected){disconnected=true;console.log("disconnected");if(hub.videoChat){setTimeout(function(){hub.start()},5000);}}});hub.start=function(callback){try{if(window.Prototype){delete Array.prototype.toJSON;}}catch(ex){}
if($.connection.hub.state!=$.connection.connectionState.disconnected)
$.connection.hub.stop();if(!_insideLive)
$.connection.hub.logging=true;$.connection.hub.qs={'k':_insideGraph.current.account+":"+_insideGraph.pid+":"+_insideGraph.accessKey,'c':_insideGraph.accessCheck,'nc':_insideGraph.current.noCookie?"1":"0"};$.connection.hub.start({transport:_transports,waitForPageLoad:!(window._insideConnectImmediately||false),pingInterval:0}).done(function(){hubStarted();if(typeof(callback)=="function"){callback();}});};hub.stop=function(){if($.connection.hub.state==$.connection.connectionState.disconnected){return;}
if(hub.connection.ajaxDataType=="jsonp"&&_insideGraph.ieVersion==9){hub.connection.ajaxDataType="text";$.connection.hub.stop();hub.connection.ajaxDataType="jsonp";}
else
$.connection.hub.stop();};function hubStarted(){if($.inside.starts==0){$(window).on('beforeunload',function(){$.connection.hub.url=_insideSocialUrl+"signalr";if($.connection.hub.state!=$.connection.connectionState.disconnected&&!(typeof insideWebApp!="undefined"&&insideWebApp))
$.connection.hub.stop();});_insideGraph.doEvent("onconnected",true);}
for(var i=0;i<_init.length;i++)
_init[i]();_init=[];$.inside.starts++;hub.videoChat=false;_insideGraph.setState(2);}
hub.keepAlive=function(){if(hub.isConnected())
hub.server.keepAlive();};hub.isConnected=function(){if($.connection.hub.state==$.connection.connectionState.connected)
return true;return false;};hub.isEnabled=function(func){var temp=$.inArray(func,_insideGraph.enabled);return typeof(temp)!="undefined"&&temp!=-1;};hub.sendCall=function(methodName,params,doneCallback,failCallback,deferCallback){if($.inside.isConnected()){hub.invokeServerMethod(methodName,params,doneCallback,failCallback);}else{if(typeof(deferCallback)=="function"){deferCallback();}
_requestQueue.push({methodName:methodName,params:params,doneCallback:doneCallback,failCallback:failCallback});$.inside.start(function(){for(var i=0;i<_requestQueue.length;i++){hub.invokeServerMethod(_requestQueue[i].methodName,_requestQueue[i].params,_requestQueue[i].doneCallback,_requestQueue[i].failCallback);}
_requestQueue=[];});}};hub.invokeServerMethod=function(methodName,params,doneCallback,failCallback){hub.invoke.apply(hub,$.merge([methodName],params)).done(function(response){if(typeof(doneCallback)=="function")doneCallback(response);}).fail(function(response){if(typeof(failCallback)=="function")failCallback(response);});};hub.reset=function(){tryingToReconnect=false;hub.videoChat=false;hub.stop();}
var lastViewId=null;var timeOnPageTimeouts=[];var timeOnPageBuffer={};function processTimeOnPageEvent(data){var currentTimeOnPage=_insideGraph.getTimeOnPage();var targetTimeOnPage=data.timeOnPage*1000;if(currentTimeOnPage>targetTimeOnPage){hub.server.TriggerTimeOnPageEvent(data.eventId,data.viewId);return;}
var timeoutId=setTimeout(function(){hub.server.TriggerTimeOnPageEvent(data.eventId,data.viewId);timeOnPageTimeouts.splice(timeOnPageTimeouts.indexOf(timeoutId),1);},targetTimeOnPage-currentTimeOnPage);timeOnPageTimeouts.push(timeoutId);}
hub.bind("registerTimeOnPageEvent",function(data){if(data.viewId!==_insideGraph.viewId){timeOnPageBuffer[data.viewId]=data;return;}
processTimeOnPageEvent(data);});_insideGraph.bind("view",function(){if(lastViewId!=_insideGraph.viewId){lastViewId=_insideGraph.viewId;var timeouts=timeOnPageTimeouts;timeOnPageTimeouts=[];for(var i=0;i<timeouts.length;i++){clearTimeout(timeouts[i]);}}
if(timeOnPageBuffer[lastViewId]){var data=timeOnPageBuffer[lastViewId];delete timeOnPageBuffer[lastViewId];processTimeOnPageEvent(data);}});$.inside=hub;})(_insideGraph.jQuery,window);(function($,window){var _keepAliveTimeout=120000;var _idleTimeout=180000;var _awayTimeout=300000;var _idleNow=false;var _idleTimestamp=null;var _idleTimer=null;var _awayNow=false;var _awayTimestamp=null;var _awayTimer=null;$.inside.bind("poke",function(){_active(true);});var agent=window.navigator.userAgent.toLowerCase();if(agent.indexOf("ipad")!=-1){var lastTime=new Date();setTimeout(checkTime,500);}
var _keepAliveTimer=setTimeout(keepAlive,_keepAliveTimeout);function keepAlive(){$.inside.keepAlive();_keepAliveTimer=setTimeout(keepAlive,_keepAliveTimeout);}
function checkTime(){var dt=(new Date()).valueOf()-lastTime.valueOf();if(dt>300000&&$.connection){$.inside.stop();}
if(dt>1000)
{_idleNow=true;_active();}
lastTime=new Date();setTimeout(checkTime,500);}
function setIdleTimeout(ms){_idleTimeout=ms;_idleTimestamp=new Date().getTime()+ms;if(_idleTimer!=null)
clearTimeout(_idleTimer);_idleTimer=setTimeout(_makeIdle,ms+50);}
function setAwayTimeout(ms){_awayTimeout=ms;_awayTimestamp=new Date().getTime()+ms;if(_awayTimer!=null)
clearTimeout(_awayTimer);_awayTimer=setTimeout(_makeAway,ms+50);}
function _makeIdle(override){if(_idleNow)
return;if(!override)
{var t=new Date().getTime();if(t<_idleTimestamp){_idleTimer=setTimeout(_makeIdle,_idleTimestamp-t+50);return;}}
if(_idleTimer!=null)
clearTimeout(_idleTimer);_idleNow=true;if($.inside.isConnected()){$.inside.server.inactive();_insideGraph.doEvent("idle",null);}}
function _makeAway(override)
{if(_awayNow)
return;if(!override)
{var t=new Date().getTime();if(t<_awayTimestamp||override){_awayTimer=setTimeout(_makeAway,_awayTimestamp-t+50);return;}}
if(_awayTimer!=null)
clearTimeout(_awayTimer);if(_keepAliveTimer!=null)
clearTimeout(_keepAliveTimer);_awayNow=true;$.inside.stop();}
function insideChatFrameInFocus(){if(typeof insideChatPane=="undefined"||typeof insideChatPane.frame=="undefined"){return false;}
return insideChatPane.frame.contentWindow.document.hasFocus();}
function _active(data)
{var poke=false;if(typeof(data)==="boolean")
poke=data;if(!poke&&(_idleNow||_awayNow)){if(typeof(window.document.hasFocus)!="undefined"&&!window.document.hasFocus()&&!window.top.document.hasFocus()&&!insideChatFrameInFocus()){return;}}
var t=new Date().getTime();_idleTimestamp=t+_idleTimeout;_awayTimestamp=t+_awayTimeout;try{if(_keepAliveTimer==null)
_keepAliveTimer=setTimeout(keepAlive,_keepAliveTimeout);if(_awayNow){setAwayTimeout(_awayTimeout);$.inside.start();}
if(_idleNow){setIdleTimeout(_idleTimeout);if(!_awayNow)
{if(!$.inside.isConnected())
$.inside.start();else{$.inside.server.active().done(function(connected){if(!connected)
$.inside.start();});}}}
if(poke)
$.inside.keepAlive();}catch(err){}
_idleNow=false;_awayNow=false;}
_inside._onFocusChange=_onchange;function _onchange(evt)
{evt=evt||window.event;if(evt.type=="blur"||evt.type=="focusout"||evt.type=="pagehide"){if(window.document.hasFocus()||insideChatFrameInFocus()){return;}
_makeIdle(true);}else{_active();}}
function getDevice(){var userAgent=navigator.userAgent.toLowerCase();$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase());var agent=window.navigator.userAgent.toLowerCase();var iPod=(agent.indexOf("ipod")>0);var iPhone=(agent.indexOf("iphone")>0);var iPad=(agent.indexOf("ipad")>0);var android=((agent.indexOf("android")>0)&&(agent.indexOf("mobile")>0));var androidTablet=!android&&(agent.indexOf("android")>0);var webOS=(agent.indexOf("webos")>0);var blackBerry=(agent.indexOf("blackberry")>0);var rimTablet=(agent.indexOf("rimtablet")>0);var device=1;if(iPod||iPhone||android||webOS||blackBerry){device=2;}else if(iPad||rimTablet||androidTablet){device=3;}
return device;}
function _init()
{var doc=$(window.document);doc.mousemove(_active);doc.mouseenter(_active);doc.scroll(_active);doc.keydown(_active);doc.click(_active);doc.dblclick(_active);if(doc.addEventListener){doc.addEventListener("touchstart",_active,false);doc.addEventListener("touchmove",_active,false);}
setIdleTimeout(180000);setAwayTimeout(300000);$(window).focus(_onchange);$(window).blur(_onchange);if(typeof(window.addEventListener)!="undefined"){window.addEventListener("pageshow",_onchange);window.addEventListener("pagehide",_onchange);}}
function _deinit()
{var doc=$(window.document);doc.unbind("mousemove",_active);doc.unbind("mouseenter",_active);doc.off("scroll",_active);doc.unbind("keydown",_active);doc.off("click",_active);doc.unbind("dblclick",_active);if(doc.removeEventListener){doc.removeEventListener("touchstart",_active,false);doc.removeEventListener("touchmove",_active,false);}
$(window).unbind("focus",_onchange);$(window).unbind("blur",_onchange);if(typeof(window.removeEventListener)!="undefined"){window.removeEventListener("pageshow",_onchange);window.removeEventListener("pagehide",_onchange);}}
$.inside.forceIdle=function(){_makeIdle(true);};$.inside.forceAway=function(){_makeAway(true);};$.inside.init(_init);$.inside.deinit(_deinit);})(_insideGraph.jQuery,window);});;insideFrontInterface.regexContainsHtmlTag=new RegExp(/<[a-z][\s\S]*/i);insideFrontInterface.smellsHTML=function(str){return insideFrontInterface.regexContainsHtmlTag.test(str);}
insideFrontInterface.escapeHtml=function(str,check,forceEscape){if(str==null||str==undefined){return str;}
if(typeof str!="string"&&(str!=null&&(str.type==="multilangstring"||str.type==="multilangobject"))){return str;}
if(forceEscape!=true&&str&&!insideFrontInterface.smellsHTML(str)){return str;}
var encode=true;if(check)
encode=regexContainsHtmlTag.test(str);if(encode){var div=document.createElement('div');div.appendChild(document.createTextNode(str));return div.innerHTML;}
return str;}
insideFrontInterface.updateLinkAttr=function(){var $=_insideGraph.jQuery;try{if($(this).attr('target')!='_blank'){if(insideFrontInterface.chat.version==1){$(this).attr('target',"_self");}
else if(insideFrontInterface.chat.version==2){$(this).attr('target',"_top");}}}
catch(e){console.log(e);}}
insideFrontInterface.openChatPane=function(force,readyCallback){if(typeof insideFrontInterface.loadTranslations=="undefined"){setTimeout(function(){insideFrontInterface.openChatPane(force,readyCallback);},100)
return;}
insideFrontInterface.loadTranslations(function(){_insideGraph.loadModule("chat","frontend-chat.js.bundle").then(function(){insideFrontInterface.openChatPane(force,readyCallback);}).catch(function(err){console.log("Error opening chat pane: ",err);});});}
if(!insideFrontInterface.chat){insideFrontInterface.chat={};insideFrontInterface.chat.open=insideFrontInterface.openChatPane;}
insideFrontInterface.chat.closeChatPane=function(){return;}
_insideGraph.registerModule("front",function(){(function(window,$){var jQuery=$;jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,a,c,b,d){return jQuery.easing[jQuery.easing.def](e,a,c,b,d)},easeInQuad:function(e,a,c,b,d){return b*(a/=d)*a+c},easeOutQuad:function(e,a,c,b,d){return-b*(a/=d)*(a-2)+c},easeInOutQuad:function(e,a,c,b,d){return 1>(a/=d/2)?b/2*a*a+c:-b/2*(--a*(a-2)-1)+c},easeInCubic:function(e,a,c,b,d){return b*(a/=d)*a*a+c},easeOutCubic:function(e,a,c,b,d){return b*((a=a/d-1)*a*a+1)+c},easeInOutCubic:function(e,a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a+c:b/2*((a-=2)*a*a+2)+c;},easeInQuart:function(e,a,c,b,d){return b*(a/=d)*a*a*a+c},easeOutQuart:function(e,a,c,b,d){return-b*((a=a/d-1)*a*a*a-1)+c},easeInOutQuart:function(e,a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a+c:-b/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(e,a,c,b,d){return b*(a/=d)*a*a*a*a+c},easeOutQuint:function(e,a,c,b,d){return b*((a=a/d-1)*a*a*a*a+1)+c},easeInOutQuint:function(e,a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a*a+c:b/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(e,a,c,b,d){return-b*Math.cos(a/d*(Math.PI/2))+b+c;},easeOutSine:function(e,a,c,b,d){return b*Math.sin(a/d*(Math.PI/2))+c},easeInOutSine:function(e,a,c,b,d){return-b/2*(Math.cos(Math.PI*a/d)-1)+c},easeInExpo:function(e,a,c,b,d){return 0==a?c:b*Math.pow(2,10*(a/d-1))+c},easeOutExpo:function(e,a,c,b,d){return a==d?c+b:b*(-Math.pow(2,-10*a/d)+1)+c},easeInOutExpo:function(e,a,c,b,d){return 0==a?c:a==d?c+b:1>(a/=d/2)?b/2*Math.pow(2,10*(a-1))+c:b/2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(e,a,c,b,d){return-b*(Math.sqrt(1-(a/=d)*a)-1)+c;},easeOutCirc:function(e,a,c,b,d){return b*Math.sqrt(1-(a=a/d-1)*a)+c},easeInOutCirc:function(e,a,c,b,d){return 1>(a/=d/2)?-b/2*(Math.sqrt(1-a*a)-1)+c:b/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(e,a,c,b,d){e=1.70158;var f=0,g=b;if(0==a)return c;if(1==(a/=d))return c+b;f||(f=.3*d);g<Math.abs(b)?(g=b,e=f/4):e=f/(2*Math.PI)*Math.asin(b/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f))+c},easeOutElastic:function(e,a,c,b,d){e=1.70158;var f=0,g=b;if(0==a)return c;if(1==(a/=d))return c+b;f||(f=.3*d);g<Math.abs(b)?(g=b,e=f/4):e=f/(2*Math.PI)*Math.asin(b/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/f)+b+c;},easeInOutElastic:function(e,a,c,b,d){e=1.70158;var f=0,g=b;if(0==a)return c;if(2==(a/=d/2))return c+b;f||(f=.3*d*1.5);g<Math.abs(b)?(g=b,e=f/4):e=f/(2*Math.PI)*Math.asin(b/g);return 1>a?-.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)+c:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)*.5+b+c},easeInBack:function(e,a,c,b,d,f){void 0==f&&(f=1.70158);return b*(a/=d)*a*((f+1)*a-f)+c;},easeOutBack:function(e,a,c,b,d,f){void 0==f&&(f=1.70158);return b*((a=a/d-1)*a*((f+1)*a+f)+1)+c},easeInOutBack:function(e,a,c,b,d,f){void 0==f&&(f=1.70158);return 1>(a/=d/2)?b/2*a*a*(((f*=1.525)+1)*a-f)+c:b/2*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)+c},easeInBounce:function(e,a,c,b,d){return b-jQuery.easing.easeOutBounce(e,d-a,0,b,d)+c},easeOutBounce:function(e,a,c,b,d){return(a/=d)<1/2.75?7.5625*b*a*a+c:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+.75)+c:a<2.5/2.75?b*(7.5625*(a-=2.25/2.75)*a+.9375)+c:b*(7.5625*(a-=2.625/2.75)*a+.984375)+c;},easeInOutBounce:function(e,a,c,b,d){return a<d/2?.5*jQuery.easing.easeInBounce(e,2*a,0,b,d)+c:.5*jQuery.easing.easeOutBounce(e,2*a-d,0,b,d)+.5*b+c}});var frontEnd={};var device;var insideScript=_insideCDN;var prevAccessKey;if(typeof _insideScriptUrl!="undefined"&&_insideScriptUrl!=null){insideScript=_insideScriptUrl;}
_insideGraph.jQuery.inside.insideScript=insideScript;insideFrontInterface.getAriaButtonAttribute=getAriaButtonAttribute;function getAriaButtonAttribute(label){return 'onkeydown="if(event&&(event.keyCode==32||event.keyCode==13)){insideFrontInterface.keyboardNavigation=true; event.target.click(); return false;}" role="button" aria-label="'+label+'" tabindex="0"';}
frontEnd.starSelector=starSelector;function starSelector(ob){var _this=this;init();var _value=0;var starSelect;function init(){let colorStyle="";if(ob.color&&ob.color!=""){colorStyle="style='color:"+ob.color+"'";}
var starHTML="";starHTML+="<div class='inside_starSelector'>";for(var i=0;i<5;i++){starHTML+="<div class='star icon-star' "+colorStyle+" val='"+(i+1)+"' tabindex='2' aria-label='"+(i+1)+" star"+(i+1>1?'s':'')+"'></div>";}
starHTML+="</div>";starSelect=$(starHTML).appendTo($(ob.holder));$(starSelect).find(".star").hover(function(){$(this).addClass("selected").removeClass("icon-star").addClass("icon-star-filled");var val=parseInt($(this).attr("val"));setValue(val);},function(){setValue(_value);});$(starSelect).find(".star").click(function(){_value=parseInt($(this).attr("val"));setValue(_value);});$(starSelect).find(".star").keydown(function(event){if(event.which==13||event.which==32){event.preventDefault();_value=parseInt($(this).attr("val"));setValue(_value);}});}
_this.value=value;function value(val){if(typeof(val)=="undefined"){return _value;}else{_value=val;setValue(val);}}
function setValue(val){starSelect.find(".star").removeClass("selected").removeClass("icon-star-filled").addClass("icon-star");starSelect.find(".star").each(function(){if(parseInt($(this).attr("val"))<=val){$(this).addClass("selected").removeClass("icon-star").addClass("icon-star-filled");}});}}
var standalone=window.navigator.standalone,userAgent=window.navigator.userAgent.toLowerCase(),safari=/safari/.test(userAgent),firefox=/firefox/.test(userAgent),ios=/iphone|ipod|ipad/.test(userAgent);_insideCDN=_insideCDN||"./";imageurl=_insideCDN+"images/";offerurl=_insideCDN+"offers/";if(typeof(_insideProtocol)=="undefined"){_insideProtocol="";}
frontEnd.imageurl=imageurl;frontEnd.offerurl=offerurl;insideFrontInterface.chat=insideFrontInterface.chat||{};var chatEnabled=true;var tabPosition="right";function getParameterByName(name,url){if(!url)url=window.location.href;name=name.replace(/[\[\]]/g,'\\$&');var regex=new RegExp('[?&]'+name+'(=([^&#]*)|&|#|$)'),results=regex.exec(url);if(!results)return null;if(!results[2])return '';return decodeURIComponent(results[2].replace(/\+/g,' '));}
function init(){var key=getParameterByName('key');if(key){insideFrontInterface.chat.isUrlSurvey=true;insideAPI.post("api/surveys/checkConversationSurveyResults",{key:key},function(response){if(response&&response.status=="Success"&&response.errorMessage==null&&response.data){var settings={surveyid:response.data.surveyid,visitorclosedchat:false,position:"6",text:"The survey has already been answered for this conversation!",message:"<div id='insideSurveyCheckMessage'></div>",margin:10};var surveyData={chatid:response.data.chatid,pid:response.data.visitorid,settings:settings,type:"chatsurvey"}
if(response.data.answeredQuestions&&response.data.answeredQuestions.length>0){surveyData.answeredQuestions=response.data.answeredQuestions;}
if(!response.data.success){insideAction(surveyData,undefined,true);}else if(response.data.linkedSurvey){surveyData.settings.surveyid=response.data.linkedSurvey;surveyData.settings.text="";insideAction(surveyData,undefined,true);}else if(response.data.success===true){insideAPI.post("api/surveys/getSurvey",{surveyId:settings.surveyid},function(response){if(response&&response.data&&response.data.settings){showSurveyResultsCheckPopup(surveyData,response.data.settings.completionMessage||"Thanks for the feedback!");}});}else{showSurveyResultsCheckPopup(surveyData);}}else{insideFrontInterface.chat.isUrlSurvey=false;}});}else{insideFrontInterface.chat.isUrlSurvey=false;}
showTabs();if(window.top!=window){if(!alreadyConnected){bindEvents();setTimeout(init,100);return;}
if(frontEnd.settings.allowIframes!=true){$("#inside_holder").remove();return;}}
if($("#inside_holder").length==0){setTimeout(init,1000);return;}
device=getDevice();frontEnd.device=device;bindEvents();chatEnabled=$.inside.isEnabled("chat");loadCssFile(_insideCDN+"/ig.css?dev="+device+"&_"+_insideScriptVersion);$("#inside_tabs").css("bottom",-getViewPortSize().height-$("#inside_liveChatTab").height()-300);setTimeout(function(){windowScale(500);},1000);IE11Quirks=isIE11Quirks();if(IE11Quirks){$(window).scroll(IE11ScrollFix);}
if(_insideGraph&&_insideGraph.triggerEvents&&_insideGraph.triggerEvents.length>0){for(var i=0;i<_insideGraph.triggerEvents.length;i++){triggerVisitorEvent(_insideGraph.triggerEvents[i].label);}}
initTabVisible();}
function showSurveyResultsCheckPopup(data,message){var popup=$("<div class='inside_visitorNotify'><div class='inside_closeButton fonticon icon-hclose'></div></div>").appendTo("#inside_holder");popup[0].data=data;viewport=getViewPortSize();if(data.settings.position=="1"||data.settings.position=="4"||data.settings.position=="7"){popup.css("left","10px");}else if(data.settings.position=="3"||data.settings.position=="6"||data.settings.position=="9"){popup.css("left","auto");popup.css("right","10px");}else{popup.css("left","10px");}
if(insideFrontInterface.visitorNotify){insideFrontInterface.visitorNotify.scalePopups();}
var popupMainContent=$("<div class='inside_notify_content'></div>").appendTo(popup);popupMainContent.append("<div class='inside_notify_content_message'>"+data.settings.message+"</div>");popup.find(".inside_closeButton").click(function(){popup.remove();$("#inside_holder .inside_windowBlack").remove();});visitorNotify(data,function(){insideFrontInterface.visitorNotify.slideInPopup(popup);});popup.find("#insideSurveyCheckMessage").html("<h3>"+(message||data.settings.text)+"</h3>");$(".inside_visitorNotify").css("background","rgba(255, 255, 255, 0.8)");}
var IE11Quirks=false;function isIE11Quirks(){var isIE11=!!navigator.userAgent.match(/Trident\/7/);var mode=document.documentMode;return(isIE11&&mode==5);}
function IE11ScrollFix(){viewport=getViewPortSize();$("#inside_holder").css("top",$(window).scrollTop()+"px");$(".inside_chatPane").css("top",viewport.height*0.5-$(".inside_chatPane").height()*0.5);}
frontEnd.showTabs=showTabs;function showTabs(){if(!device){device=getDevice();}
if($("#inside_holder").length>0){return;}
$("<div id='inside_holder'><div id='inside_overlay'></div></div>").appendTo("body");$("#inside_holder").css({display:"none",overflow:"visible",position:"fixed",width:"100%",right:0,left:0,top:0,height:0});$("#inside_holder").attr("pagetitle",$("title").text());$("#inside_holder").attr("pageurl",document.location.href);$("<div id='inside_tabs'></div>").appendTo("#inside_holder");$("#inside_holder").attr("device",device);$("#inside_tabs").css({position:"fixed"});if(device==2){$("#inside_holder").addClass("mobile-device");}
tabMouseDown=false;var mousex=0;var mousey=0;var count=0;$("#inside_tabs").unbind("mousedown");$("#inside_tabs").unbind("touchstart");$("#inside_tabs").on("mousedown",mouseDown);$("#inside_tabs").bind("touchstart",mouseDown);function mouseDown(e){tabMouseDown=true;count=0;var xmove=0;mousex=e.clientX;mousey=e.clientY+parseInt($("#inside_tabs").css("margin-bottom"));if(typeof(e.originalEvent.touches)!="undefined"){mousey=e.originalEvent.touches[0].clientY+parseInt($("#inside_tabs").css("margin-bottom"));mousex=e.originalEvent.touches[0].clientX;}
$(window).bind("mousemove",mouseMove);window.addEventListener("touchmove",mouseMove,{passive:false});function mouseMove(e){e.preventDefault();var clientY=e.clientY;var clientX=e.clientX;if(typeof(e.touches)!="undefined"){clientY=e.touches[0].clientY;clientX=e.touches[0].clientX;}
$("#inside_tabs").css("margin-bottom",((clientY-mousey)*-1)+"px");xmove=clientX-mousex;var tabs=$("#inside_tabs")[0];var rect=tabs.getBoundingClientRect();if(rect.top<0){mousey-=-rect.top;}
if(rect.top+rect.height>window.innerHeight){mousey-=window.innerHeight-(rect.top+rect.height);}
$("#inside_tabs").css("margin-bottom",((clientY-mousey)*-1)+"px");count++;e.preventDefault();}
$("#inside_tabs").unbind("mouseup");$("#inside_tabs").unbind("touchend");window.addEventListener("mouseup",mouseUp);window.addEventListener("touchend",mouseUp);function mouseUp(e){if(count>20){insideFrontInterface.chat.preventTabClick=true;setTimeout(function(){insideFrontInterface.chat.preventTabClick=false;},100);}
if(device!=1){if(tabPosition.indexOf("right")!=-1&&xmove>20){autohideTabs(100);}
if(tabPosition.indexOf("left")!=-1&&xmove<-20){autohideTabs(100);}}
window.removeEventListener("touchmove",mouseMove,{passive:false});window.removeEventListener("mouseup",mouseUp);window.removeEventListener("touchend",mouseUp);}}
$(window).bind("mouseup",windowMouseUp);$(window).bind("touchend",windowMouseUp);function windowMouseUp(e){$(window).unbind("mousemove");$(window).unbind("touchmove");tabMouseDown=false;}}
frontEnd.getDevice=getDevice;function getDevice(){var agent=window.navigator.userAgent.toLowerCase();var iPod=(agent.indexOf("ipod")>0);var iPhone=(agent.indexOf("iphone")>0);var iPad=(agent.indexOf("ipad")>0)||(navigator.platform==='MacIntel'&&navigator.maxTouchPoints>1);var android=((agent.indexOf("android")>0)&&(agent.indexOf("mobile")>0));var androidTablet=!android&&(agent.indexOf("android")>0);var webOS=(agent.indexOf("webos")>0);var blackBerry=(agent.indexOf("blackberry")>0);var rimTablet=(agent.indexOf("rimtablet")>0);var device=1;if(iPod||iPhone||android||webOS||blackBerry){device=2;}else if(iPad||rimTablet||androidTablet){device=3;}
return device;}
var eventsBound=false;function bindEvents(){if(eventsBound){return;}
eventsBound=true;$(window).resize(windowScale);$(window).bind('gestureend',windowScale);if(typeof $.inside!="object")
return;$.inside.bind("connected",connectedToInside);$.inside.bind("disconnected",disconnected);$.inside.bind("updateUsers",updateUsers);$.inside.bind("removeUsers",removeUsers);$.inside.bind("insideAction",insideAction);$.inside.bind("unstick",unstick);$.inside.bind("coBrowse",coBrowseCommandHandler);$.inside.prebindModule("chat","chat","frontend-chat.js.bundle");$.inside.prebindModule("workflow","chat","frontend-chat.js.bundle");$.inside.prebindModule("nextWorkflowAction","chat","frontend-chat.js.bundle");$.inside.prebindModule("workflowCanceled","chat","frontend-chat.js.bundle");$.inside.start();}
insideFrontInterface.connectSignalr=connectSignalr;function connectSignalr(){$.inside.start();}
insideFrontInterface.disconnectSignalr=disconnectSignalr;function disconnectSignalr(){$.inside.stop();return $.inside.isConnected();}
insideFrontInterface.checkForCoBrowseRequestState=checkForCoBrowseRequestState;function checkForCoBrowseRequestState(){$.inside.server.coBrowseRequestState().done(function(state){if(state=="Accept"){coBrowseCommandHandler("/load");}else if(state=="Request"&&$(".inside_cobrowseRequest").length==0){insideFrontInterface.chat.setCoBrowseHtml("request");}});$.inside.server.coBrowseRequestData().done(function(data){if(data&&typeof(data)=="string"){coBrowseCommandHandler(data)}});}
function coBrowseCommandHandler(command){loadInsideChat(function(){_insideGraph.loadModule("cobrowse","inside.front.cobrowse.js").then(function(){if(command=="/load"){frontEnd.Load();}
else if(command=="/open"){frontEnd.Open();}
else if(command=="/show_control_mode_confirmation"){if($("#insideChatFrame").contents().find(".inside_cobrowseRequest").closest(".notification .controlmoderequest").length==0){setTimeout(function(){frontEnd.CommandHandler(command);},2000);}}});})}
function unstick(stickyid){}
insideFrontInterface.getAccessKey=getAccessKey;function getAccessKey(){return _insideGraph.current.account+":"+_insideGraph.pid+":"+_insideGraph.accessKey;}
var waitingForConnected=false;function insideAction(data,stickyid,renderAsPopup){if(!data.settings.sticky&&data.type!="visitornotify"&&data.type!="chatsurvey"&&(waitingForConnected||(data.viewId&&_insideGraph.accessKey.indexOf(data.viewId)!==0))){waitingForConnected=true;setTimeout(function(){insideAction(data,stickyid,renderAsPopup);},100);return;}
data.stickyid=stickyid;if(data.type=="liveshownotify"){if(typeof insideStreamingCheck!="undefined"&&typeof insideStreaming=="undefined"){insideStreamingCheck.loadStreamingBundle(function(){insideStreaming.showLiveStreamNotification(data.settings);});}
else{insideStreaming.showLiveStreamNotification(data.settings);}}
else if(data.type=="visitornotify"){visitorNotify(data);}else if(data.type=="survey"){data.settings.message="<div id='insideSurveyHolder'></div>";showSurveyPopup(data);}else if(data.type=="chatsurvey"){var visitorHasDNDFlag=insideFrontInterface.chat&&insideFrontInterface.chat.data&&insideFrontInterface.chat.data.flags&&insideFrontInterface.chat.data.flags.indexOf("dnd")!==-1;if(visitorHasDNDFlag){$.inside.server.unstick(stickyid);return;}
if(typeof insideChatPane!="undefined"&&insideChatPane!=null&&typeof insideChatPane.showSurvey=="function"&&typeof insideFrontInterface.chat.isUrlSurvey!="undefined"&&insideFrontInterface.chat.isUrlSurvey!=null&&!insideFrontInterface.chat.isUrlSurvey){insideChatPane.showSurvey(data);return;}else{if(chatPaneVersion()===2){if(insideFrontInterface.chatSettings.postChatSurvey&&!insideFrontInterface.chat.isUrlSurvey){insideFrontInterface.openChatPane(true,function(){insideChatPane.showSurvey(data);});}
return;}}
data.settings.message="<div id='insideSurveyHolder'></div>";if($.inside.front.settings.showPostChatSurveyInChat&&!renderAsPopup){data.settings.useContainer=true;data.settings.containerid="#inside_chatWindow, #inside_chatPane_custom_chatHolder";if(!insideFrontInterface.chat.chatPaneOpen){insideFrontInterface.openChatPane();$('.inside_greeting_message').parent().remove();$(".inside_systemMessage.insideGreetingMessage").remove();setTimeout(function(){$(".inside_dept_selector").remove();$('.inside_greeting_message').parent().remove();$(".inside_systemMessage.insideGreetingMessage").remove();},250);}}
if($.inside.front.settings.postChatSurvey&&$.inside.front.settings.postChatSurvey!=""){if($.inside.front.settings.postChatSurvey&&$.inside.front.settings.postChatSurvey.toLowerCase()=="disable"){return;}else{data.settings.surveyid=$.inside.front.settings.postChatSurvey;}}
data.settings.position="6";if(!$.inside.front.settings.showPostChatSurveyInChat){showSurveyPopup(data);}else{if($("#inside_chatWindow, #inside_chatPane_custom_chatHolder").length>0){insideFrontInterface.chat.clearChatGrouping();showSurveyPopup(data);}else{chatSurveyQueue.push(data);frontEnd.chatSurveyQueue=chatSurveyQueue;checkChatSurveyQueue();}}}else if(data.type=="jointhecall"){insideFrontInterface.chat.joinTheCallSettings=data.settings||{};setTimeout(function(){insideFrontInterface.chat.canJoinTheCall=true;insideFrontInterface.chat.setupJoinTheCallTag(insideFrontInterface.chat.joinTheCallSettings);},insideFrontInterface.chat?0:5000);}else if(data.type=="clicktocall"){insideFrontInterface.onClickToCallChatTabImageLoad=onClickToCallChatTabImageLoad;insideFrontInterface.onClickToCallChatTabImageClick=onClickToCallChatTabImageClick;insideFrontInterface.showClickToCallRequestPopup=showClickToCallRequestPopup;insideFrontInterface.clickToCallScript=data.settings.script;if(typeof(data.settings.clickToCallSettings)!="undefined"){insideFrontInterface.chat.clickToCallSettings=data.settings.clickToCallSettings;}else{insideFrontInterface.chat.clickToCallSettings=data.settings;}
if(typeof(data.settings.clickToCallSettings)!="undefined"&&(data.settings.clickToCallSettings.script||"")!="")
insideFrontInterface.clickToCallScript=data.settings.clickToCallSettings.script;setupClickToCallTag(data.settings.clickToCallSettings,frontEnd.settings);}}
insideFrontInterface.triggerVisitorEvent=triggerVisitorEvent;function triggerVisitorEvent(label){if(label){insideAPI.post("/api/visitor/triggerevent",{label:label},function(){});}}
var clickToCallSettings;var isClickToCallRequestSent=false;function setupClickToCallTag(settings,frontEndSettings){if($("#inside_clickToCallChatTab").length){return;}
clickToCallSettings=settings;if(typeof clickToCallSettings!="undefined"){insideFrontInterface.chat.clickToCallSettings=clickToCallSettings;}
var src=clickToCallSettings&&clickToCallSettings.clickToCallTab&&clickToCallSettings.clickToCallTab.customTabImage?_insideCDN+"/custom/"+clickToCallSettings.clickToCallTab.customTabImage:imageurl+"click-to-call-tab.png";var html="<div id='inside_clickToCallChatTab' tabindex='2' class='noselect' ondragstart='return false;' ondrop='return false;'>"+
"<img id='inside_clickToCallImage' src='"+src+"' />"+
"</div>";var $html=$(html);$html.find("#inside_clickToCallChatTab").hide();$html.appendTo("#inside_tabs");$html.find("img").on("load",insideFrontInterface.onClickToCallChatTabImageLoad);if(tabPosition.indexOf("bottom")!=-1){$("#inside_liveChatTab").appendTo("#inside_tabs");}
setClickToCallTag(true);$("#inside_clickToCallChatTab").click(onClickToCallChatTabImageClick);if(clickToCallSettings&&clickToCallSettings.clickToCallTab&&clickToCallSettings.clickToCallTab.hideAmount&&clickToCallSettings.clickToCallTab.hideAmount!=0){$("#inside_clickToCallChatTab").attr("autohide",clickToCallSettings.clickToCallTab.hideAmount);}else{if(typeof(frontEnd.settings.autohideTabs)!="undefined"&&frontEnd.settings.autohideTabs==true){$("#inside_clickToCallChatTab").attr("autohide",30);}}
try{_insideGraph.doEvent("c2cavailable",true);}catch(e){}}
function setClickToCallTag(show){if($("#inside_clickToCallChatTab").length===0){return;}
if(show){$("#inside_clickToCallChatTab").show();}else{$("#inside_clickToCallChatTab").hide();}
if(insideFrontInterface&&insideFrontInterface.chatSettings&&insideFrontInterface.chatSettings.version=="2"&&typeof(insideChatPane)!="undefined"&&typeof(insideChatPane.setClickToCall)=="function"){insideChatPane.setClickToCall(show);}}
function onClickToCallChatTabImageLoad(){var hideAmount=30;if($.inside.front.settings.autoHideAmount){hideAmount=parseInt($.inside.front.settings.autoHideAmount);}
hideAmount=30;setTimeout(function(){$("#inside_tabs").show();},500);$("#inside_clickToCallChatTab").width(this.width);positionTabs();if(typeof(frontEnd.settings.autohideTabs)!="undefined"&&frontEnd.settings.autohideTabs==true){if(device>1&&frontEnd.settings.autohideOnMobile==false){positionTabs();}else{if(frontEnd.settings.autoHideTabOnLoad!=true){autohideTabs(0);}else{autohideTabs(0);}}}}
function isValidClickToCallRequestPopupData(){var firstname=$(".inside_clicktocall_firstname input").val().trim();var phonenum=$(".inside_clicktocall_phone_num input").val().trim();return firstname&&phonenum&&phonenum.length>3&&phonenum.match(/^\d+$/);}
function onClickToCallChatTabImageClick(args){if(insideFrontInterface.chat.preventTabClick){insideFrontInterface.chat.preventTabClick=false;return;}
if(device==2&&$("#inside_clickToCallChatTab").attr("tabHidden")=="true"){insideFrontInterface.hoverShowTabs($("#inside_clickToCallChatTab"));return;}
if(parseInt($("#inside_tabs").css("right"))<-30){return;}
if(!isClickToCallRequestSent){showClickToCallRequestPopup();}else{showClickToCallConnectingPopup(true);}}
function showClickToCallRequestPopup(){if(chatPaneVersion()==2){insideFrontInterface.openChatPane(true,function(){insideChatPane.clickToCall();});return;}else{$('#inside_holder').addClass('tabClicked');insideFrontInterface.openChatPane(true,showClickToCallRequestCont);}}
function showClickToCallRequestCont(){if($(".inside_chatPane, #inside_chatPane_custom").length==0){setTimeout(showClickToCallRequestCont,100);return;}
$(".inside_chatPane, #inside_chatPane_custom").addClass("clicktocall");$("#inside_holder .inside_clicktocall_connecting").hide();if($("#inside_holder .inside_clicktocall_request").length===0){var html="<div class='inside_clicktocall_request'>"+
"<div class='inside_clicktocall_header'>"+
"<table>"+
"<tr>"+
"<td class='inside_clicktocall_txt0'></td>"+
"<td class='inside_clicktocall_header_icons'><span class='icon-minimise'></span></td>"+
"<td class='inside_clicktocall_header_icons'><span class='fonticon icon-hclose'></span></td>"+
"</tr>"+
"</table>"+
"</div>"+
"<div class='inside_clicktocall_body'>"+
"<div class='inside_clicktocall_txt1'></div>"+
"<p><br/>"+
"<div class='inside_clicktocall_txt2'></div>"+
"<p><br/>"+
"<table class='inside_clicktocall_name'>"+
"<tr>"+
"<td>First Name</td>"+
"<td>Last Name</td>"+
"</tr>"+
"<tr>"+
"<td class='inside_clicktocall_firstname'><input></td>"+
"<td class='inside_clicktocall_lastname'><input></td>"+
"</tr>"+
"</table>"+
"<p><br/>"+
"<table class='inside_clicktocall_phone'>"+
"<tr>"+
"<td class='inside_clicktocall_phone_num_lbl' colspan='2'>Your Number</td>"+
"<td class='inside_clicktocall_phone_ext_lbl'>Ext</td>"+
"</tr>"+
"<tr>"+
"<td class='inside_clicktocall_phone_code'><input></td>"+
"<td class='inside_clicktocall_phone_num'><input></td>"+
"<td class='inside_clicktocall_phone_ext'><input></td>"+
"</tr>"+
"</table>"+
"<div class='inside_clicktocall_form_error'>&nbsp;</div>"+
"<div id='inside_clicktocall_button_holder'><button class='inside_clicktocall_btn'></button></div>"+
"</div>"+
"</div>";var $html=$(html);var c2c=$html.appendTo(".inside_chatPane, #inside_chatPane_custom");c2c.show();setClickToCallStyle();$(".inside_chatPane, #inside_chatPane_custom").removeClass("offline");}
$(".inside_chatPane_header_text_c2c").remove();$("<span class='inside_chatPane_header_text_c2c'>"+insideFrontInterface.chat.translate("Have us call you back")+"</span>").appendTo("#inside_siteLogo");var settings=clickToCallSettings&&clickToCallSettings.requestForm?clickToCallSettings.requestForm:{};var title=settings.title||"HAVE US CALL YOU BACK";var header=settings.heading||"Talk to an Expert now";var buttonlabel=settings.buttonlabel||"CALL ME NOW";var text="";if(firstname||lastname||phonenum){if(settings.text2){text=settings.text2;}
else{text="Please verify your name and phone number.";}}else{if(settings.text1){text=settings.text1;}
else{text="Please enter your name and phone number.";}}
$("#inside_holder .inside_clicktocall_request .inside_clicktocall_txt0").html(title);$("#inside_holder .inside_clicktocall_request .inside_clicktocall_txt1").html(header);$("#inside_holder .inside_clicktocall_request .inside_clicktocall_txt2").html(text);$("#inside_holder .inside_clicktocall_request .inside_clicktocall_btn").html(buttonlabel);var visitorDetails;try{visitorDetails=_insideGraph.getVisitorDetails()||{};}catch(e){visitorDetails={};}
var firstname=visitorDetails.firstname||"";var lastname=visitorDetails.lastname||"";var phone=visitorDetails.phone||"";var phonecode="";var phonenum="";var phoneext="";if(phone.length>10){phonecode=phone.substr(0,3);phonenum=phone.substr(3,7);phoneext=phone.substr(10);}else if(phone.length>7){phonecode=phone.substr(0,3);phonenum=phone.substr(3);}else{phonenum=phone;}
$("#inside_holder .inside_clicktocall_request .inside_clicktocall_firstname input").val(firstname);$("#inside_holder .inside_clicktocall_request .inside_clicktocall_lastname input").val(lastname);$("#inside_holder .inside_clicktocall_request .inside_clicktocall_phone_code input").val(phonecode);$("#inside_holder .inside_clicktocall_request .inside_clicktocall_phone_num input").val(phonenum);$("#inside_holder .inside_clicktocall_request .inside_clicktocall_phone_ext input").val(phoneext);$("#inside_holder .inside_clicktocall_request .inside_clicktocall_btn").off("click").on("click",function(e){if(!isValidClickToCallRequestPopupData()){$(".inside_clicktocall_form_error").text("Invalid name or phone number!");setTimeout(function(){$(".inside_clicktocall_form_error").html("&nbsp;");},5000);return;}
var args={script:insideFrontInterface.clickToCallScript,firstname:$(".inside_clicktocall_firstname input").val().trim(),lastname:$(".inside_clicktocall_lastname input").val().trim(),phonecode:$(".inside_clicktocall_phone_code input").val().trim(),phonenum:$(".inside_clicktocall_phone_num input").val().trim(),phoneext:$(".inside_clicktocall_phone_ext input").val().trim()};function onSuccess(e){if(e&&(e.status!="Success"||!e.data)){return onError(e);}
showClickToCallConnectingPopup(true);isClickToCallRequestSent=true;}
function onError(e){showClickToCallConnectingPopup(false);}
$("#inside_holder .inside_clicktocall_request").hide();showClickToCallConnectingPopup();$(".inside_clicktocall_header").hide();$("#insideOfferHolder").hide();insideAPI.post("/api/visitor/clicktocall",args,onSuccess,onerror);});$("#inside_holder .inside_clicktocall_request .inside_clicktocall_header_icons .icon-hclose").off("click").on("click",function(e){insideFrontInterface.chat.closeChatPane();windowScale();});$("#inside_holder .inside_clicktocall_request .inside_clicktocall_header_icons .icon-minimise").off("click").on("click",function(e){insideFrontInterface.chat.closeChatPane();});if(!isClickToCallRequestSent){$("#inside_clickToCallChatTab").hide();$("#inside_holder .inside_clicktocall_request").show();}else{showClickToCallConnectingPopup(true);}}
function setClickToCallStyle(){var cssString="";var headerBgColour="#02385a";cssString+=".inside_chatPane.clicktocall #inside_chatPaneHeader, .inside_chatPane.clicktocall #inside_chatPane_custom_chatHeader { background: "+headerBgColour+"}";cssString+="#inside_chatPane_custom.clicktocall #inside_chatPaneHeader, #inside_chatPane_custom.clicktocall #inside_chatPane_custom_chatHeader { background: "+headerBgColour+"}";var iconColour="#ffffff";cssString+="#inside_holder .inside_chatPane.clicktocall .inside_closeCross.fonticon, #inside_holder #inside_chatPane_custom.clicktocall .inside_closeCross.fonticon { color: "+iconColour+"}";addStyleString(cssString,"clicktocallstyles");}
function showClickToCallConnectingPopup(success){if($("#inside_holder .inside_clicktocall_connecting").length===0){var html="<div class='inside_clicktocall_connecting'>"+
"<div class='inside_clicktocall_header'>"+
"<table>"+
"<tr>"+
"<td class='inside_clicktocall_txt0'></td>"+
"<td class='inside_clicktocall_close'>X</td>"+
"</tr>"+
"</table>"+
"</div>"+
"<div class='inside_clicktocall_body'>"+
"<div class='inside_clicktocall_txt3'></div>"+
"<div>"+
"</div>";var $html=$(html);$(html).find(".inside_clicktocall_connecting").hide();$html.insertAfter(".inside_clicktocall_request");$(".inside_clicktocall_request").remove();}
var settings=clickToCallSettings&&clickToCallSettings.connectingForm?clickToCallSettings.connectingForm:{};var title=settings.title||insideFrontInterface.chat.translate("CONNECTING YOU");var text="";if(success===true){if(settings.text1){text=settings.text1;}
else{text="Thanks, please stand by. An expert will be calling you soon.";}}else if(success==false){if(settings.text2){text=settings.text2;}
else{text="Sorry, we could not place your request. Please try later.";}}else{text="Please wait, while we place your request.";}
$(".inside_chatPane_header_text_c2c").text(title);$("#inside_holder .inside_clicktocall_connecting .inside_clicktocall_txt3").html(text);$("#inside_holder .inside_clicktocall_connecting .inside_clicktocall_close").off("click").on("click",function(e){$("#inside_holder .inside_clicktocall_connecting").hide();$("#inside_clickToCallChatTab").show();});$("#inside_clickToCallChatTab").hide();$("#inside_holder .inside_clicktocall_connecting").show();insideFrontInterface.scale();}
var clickToCallAutoHideTimeout;function startAutoHideClickToCallTab(){$("#inside_clickToCallChatTab").bind("mouseenter",hoverShowClickToCallTab);$("#inside_clickToCallChatTab").bind("mouseleave",function(){clickToCallAutoHideTimeout=setTimeout(autohideClickToCallTab,100);});autohideClickToCallTab();}
function hoverShowClickToCallTab(){clearTimeout(autoHideTimeout);if(tabPosition=="left"||tabPosition=="topleft"||tabPosition=="bottomleft"){$("#inside_clickToCallChatTab").stop(true).animate({left:0},500);}else{$("#inside_clickToCallChatTab").stop(true).animate({right:0},500);}}
frontEnd.autohideClickToCallTab=autohideClickToCallTab;function autohideClickToCallTab(time){if(typeof(time)=="undefined"){time=1000;}
var hideAmount=20;if(typeof(frontEnd.settings.autoHideAmount)!="undefined"&&frontEnd.settings.autoHideAmount!=""&&!isNaN(frontEnd.settings.autoHideAmount)){hideAmount=parseInt(frontEnd.settings.autoHideAmount);}
$("#inside_clickToCallChatTab").show();var tabWidth=$("#inside_clickToCallChatTab").width();if(tabPosition=="left"||tabPosition=="topleft"||tabPosition=="bottomleft"){$("#inside_clickToCallChatTab").animate({left:-tabWidth+hideAmount},time);}else{if(time!=0){$("#inside_clickToCallChatTab").animate({right:-tabWidth+hideAmount},time);}else{$("#inside_clickToCallChatTab").show();setTimeout(function(){$("#inside_clickToCallChatTab").css({right:-tabWidth+hideAmount});},0);}}
if(insideFrontInterface.chat.chatPaneOpen){$("#inside_clickToCallChatTab").hide();}}
var chatSurveyQueue=[];frontEnd.chatSurveyQueue=chatSurveyQueue;function checkChatSurveyQueue(){if(typeof(insideFrontInterface)=="undefined"||typeof(insideFrontInterface.openChatPane)=="undefined"){setTimeout(checkChatSurveyQueue,1000);return;}
if(chatSurveyQueue.length>0){if(chatSurveyQueue[0].settings.surveyid&&chatSurveyQueue[0].settings.surveyid>0&&insideFrontInterface.getAvailableAssistants&&insideFrontInterface.getAvailableAssistants().length>0&&chatSurveyQueue[0].settings.containerid=="#inside_chatWindow, #inside_chatPane_custom_chatHolder"){insideFrontInterface.openChatPane(true);if($("#inside_chatWindow, #inside_chatPane_custom_chatHolder").length>0||typeof insideChatPane!=="undefined"){if(typeof insideFrontInterface.chat.clearChatGrouping=="function"){insideFrontInterface.chat.clearChatGrouping();}
for(var i=0;i<chatSurveyQueue.length;i++){showSurveyPopup(chatSurveyQueue[i]);}}else{setTimeout(checkChatSurveyQueue,1000);}}else{for(var i=0;i<chatSurveyQueue.length;i++){showSurveyPopup(chatSurveyQueue[i]);}}}}
frontEnd.showSurveyPopup=showSurveyPopup;function showSurveyPopup(data){_insideGraph.loadModule("visitornotify","inside.front.visitornotify.js").then(function(){if($("#insideSurveyHolder").length>0){return;}
if(!data||!data.settings||!data.settings.surveyid||isNaN(data.settings.surveyid)||data.settings.surveyid<1){return;}
$(".inside_visitorNotify[position='"+data.settings.position+"']").remove();if(typeof(data.settings.bg)=="undefined"||data.settings.bg==""){data.settings.bg="#ffffff";}
var popup=visitorNotify(data,function(popup){if(!popup)return;loadInsideSurvey(function(){showSurvey(data,popup);insideFrontInterface.visitorNotify.positionPopupOffScreen(popup);});});});}
var loadingSurvey=false;function showSurvey(data,popup){if(loadingSurvey){return;}
if(typeof insideSurvey=="undefined"){loadingSurvey=true;loadInsideSurvey(function(){loadingSurvey=false;showSurvey(data,popup);});return;}
var surveyInChat=data.settings.containerid=="#inside_chatWindow, #inside_chatPane_custom_chatHolder";if((surveyInChat&&insideFrontInterface.chatReady!=true)||(surveyInChat&&$("#inside_chatWindow, #inside_chatPane_custom_chatHolder").length==0)){setTimeout(function(){insideFrontInterface.openChatPane(true);},1000);setTimeout(function(){showSurvey(data);},1500);return;}
if(surveyInChat){if($("#inside_prechatForm").length>0){$("#inside_prechatForm").remove();}}
insideSurvey.showSurvey(data.settings.surveyid,"insideSurveyHolder",function(container){if(surveyInChat){if($("#inside_prechatForm").length>0){$("#inside_prechatForm").remove();}}
if(data.type=="survey"&&typeof(data.settings.headercolour)!="undefined"&&data.settings.headercolour!=""){popup.find(".inside_siteLogo, .inside_survey_header").css("background",data.settings.headercolour);if(getBrightnessOfColour(data.settings.headercolour)<120){popup.find(".inside_closeButton, .inside_survey_header").css("color","white");}}else{if(typeof(frontEnd.settings.headerColour)!="undefined"&&frontEnd.settings.headerColour!=null&&frontEnd.settings.headerColour!=""){popup.find(".inside_siteLogo").css("background",frontEnd.settings.headerColour);}
if(data.type=="survey"&&typeof(frontEnd.settings.iconColour)!="undefined"&&frontEnd.settings.iconColour!=""){popup.find(".inside_closeButton, .inside_survey_header").css("color",frontEnd.settings.iconColour);}}
if(data.settings.headerTextColour){addStyleString("#inside_holder .inside_visitorNotify.survey[eventid='"+data.eventId+"'] .inside_survey_header {color: "+data.settings.headerTextColour+" !important}");}
if(data.settings.iconColour){addStyleString(".inside_visitorNotify.survey .inside_closeButton {color: "+data.settings.iconColour+" !important}");}
if(data.settings.buttonColour){container.find(".inside_survey_header").css("color",data.settings.buttonColour);addStyleString("#inside_holder .inside_visitorNotify.survey[eventid='"+data.eventId+"'] .insideSubmitButton { background: "+data.settings.buttonColour+"}");}
if(data.settings.buttonTextColour){addStyleString("#inside_holder .inside_visitorNotify.survey[eventid='"+data.eventId+"'] .insideSubmitButton { color: "+data.settings.buttonTextColour+"}");}
if(popup.length==0){return;}
insideFrontInterface.visitorNotify.positionPopupOffScreen(popup);popup[0].ready=true;insideFrontInterface.visitorNotify.slideInPopup(popup);if(data.type=="chatsurvey"){if(data.settings.containerid=="#inside_chatWindow, #inside_chatPane_custom_chatHolder"){if($("#inside_chatWindow, #inside_chatPane_custom_chatHolder").find(".inside_visitorNotify.embed.survey").length==0){insideFrontInterface.chat.scrollChatToBottom();insideFrontInterface.openChatPane(true);insideFrontInterface.chat.positionChatPane();}}else{insideFrontInterface.chat.closeChatPane();}}
var surveyInputs=$("#insideSurveyHolder").find('input, textarea, select');for(var i=0;i<surveyInputs.length;i++){surveyInputs[i].setAttribute('tabindex',1);}},data);if(typeof(data.settings.headercolour)!="undefined"&&data.settings.headercolour!=""){var styleString="";if(data.settings.headercolour!="#ffffff"&&data.settings.headercolour!="white"){styleString+=".inside_visitorNotify.survey{border-bottom: 6px solid "+data.settings.headercolour+"}";}else{styleString+=".inside_visitorNotify.survey{border-bottom: 1px solid #cccccc}";}
if(getBrightnessOfColour(data.settings.headercolour)>150){styleString+="#insideSurveyHolder p.insideSurveyQuestion{ color: black; }";}
addStyleString(styleString,"insideSurvey");}}
function getBrightnessOfColour(colourString){var rgb=[];if(colourString.indexOf("#")==0){rgb.push(parseInt(colourString.substr(1,2),16));rgb.push(parseInt(colourString.substr(3,2),16));rgb.push(parseInt(colourString.substr(5,2),16));}else{var rgba=colourString.split("(")[1].split(")")[0].split(",");rgb.push(parseInt(rgba[0],16));rgb.push(parseInt(rgba[1],16));rgb.push(parseInt(rgba[2],16));}
return 0.213*rgb[0]+0.715*rgb[1]+0.072*rgb[2];}
frontEnd.users={};function updateUsers(data){for(var i=0;i<data.length;i++){if(typeof(frontEnd.users[data[i].id])!="undefined"&&frontEnd.users[data[i].id]!=null){$.extend(frontEnd.users[data[i].id],data[i]);}else{frontEnd.users[data[i].id]=data[i];}}
if(typeof insideFrontInterface.chat.setChatTab=="function"){insideFrontInterface.chat.setChatTab();}
triggerAssistantEvents();}
function removeUsers(arr){for(var i=0;i<arr.length;i++){delete frontEnd.users[arr[i]];}
insideFrontInterface.chat.setChatTab();triggerAssistantEvents();}
var assistantEvents=[];insideFrontInterface.assistantEvents=assistantEvents;insideFrontInterface.bind=function(type,callback){if(type=="assistants"){assistantEvents.push(callback);}}
function triggerAssistantEvents(){var availableAssistants=insideFrontInterface.getAvailableAssistants();try{_insideGraph.doEvent("chatavailable",availableAssistants.length>0);}catch(ex){}
var assistantEvents=insideFrontInterface.assistantEvents;if(assistantEvents&&assistantEvents.length>0){for(var i=0;i<assistantEvents.length;i++){assistantEvents[i](availableAssistants);}}}
frontEnd.bindEvent=bindEvent;function bindEvent(eventName,callback){$.inside.bind(eventName,callback);}
var assistantData=[];frontEnd.settings={};var alreadyConnected=false;var altChatSettingsSet=false;var savedAltChat;insideFrontInterface.getChatSettings=getChatSettings;function getChatSettings(){return chatPaneVersion()==2?$.inside.front.settingsData:$.inside.front.settingsData.settings;}
insideFrontInterface.mergeNewChatSettings=mergeNewChatSettings;function mergeNewChatSettings(_chatSettings){$.extend(true,insideChatPane.settings.chatSettings,_chatSettings);frontEnd.settings.chatSettings=insideChatPane.settings.chatSettings;insideChatPane.setStyling(insideChatPane.settings.chatSettings);}
function connectedToInside(data){console.log("front.js => connectedToInside");waitingForConnected=false;$.inside.videoChat=false;if(alreadyConnected){if(data.chatSettingsId==0){data=frontEnd.settingsData;}
frontEnd.settingsData=data;frontEnd.users=[];if(typeof(data.users)!="undefined"&&data.users.length>0){updateUsers(data.users);}
if(data.chatSettings){if(typeof(insideChatPane)!="undefined"){insideChatPane.settings=data.settings;insideChatPane.settings.chatSettings=data.chatSettings;insideChatPane.settings.mimeTypes=data.mimeTypes;}
$.extend(frontEnd.settings,data.chatSettings.chatTab);$.extend(frontEnd.settings,data.chatSettings.chatPane);$.extend(frontEnd.settings.offlineChat,data.chatSettings.offline);frontEnd.settings.chatSettings=data.chatSettings;if(typeof frontEnd.settings.chatSettings!=="undefined")frontEnd.settings.chatSettings.chatSettingsId=data.chatSettingsId;if(typeof(insideChatPane)!="undefined"&&typeof insideChatPane.setStyling=="function")insideChatPane.setStyling(data.chatSettings);if(typeof insideFrontInterface.updateChatSettings!="undefined")insideFrontInterface.updateChatSettings(data.chatSettings);setTabPosition();if(typeof data.preChat!="undefined"){frontEnd.settings.preChat=data.preChat;}}
if(typeof data.video=="undefined"&&typeof insideChatPane!="undefined"&&insideChatPane.videoChat&&insideChatPane.videoChat.state=="open"){insideChatPane.videoChat.close();}
var availableAssistants=getAvailableAssistants();_insideGraph.doEvent("chatavailable",availableAssistants.length>0);var urlChanged=_insideGraph.accessKey!=prevAccessKey;if(typeof insideFrontInterface.initVisitorNotifyModule!="undefined"){if(urlChanged){insideFrontInterface.initVisitorNotifyModule.clearNonStickyPopups();}
prevAccessKey=_insideGraph.accessKey;}
return;}
prevAccessKey=_insideGraph.accessKey;alreadyConnected=true;insideFrontInterface.chatReady=true;if(typeof(data.settings)!="undefined"&&data.settings!=null)
frontEnd.settings=data.settings;if(typeof data.preChat!="undefined")
frontEnd.settings.preChat=data.preChat;frontEnd.settingsData=data;frontEnd.nickname=data.nickname;frontEnd.settings.mimeTypes=data.mimeTypes;insideFrontInterface.chat=insideFrontInterface.chat||{};insideFrontInterface.chat.userid=data.userid;var chatSettings=data.chatSettings||getChatSettings();let language='en';if(data.lang&&data.lang!="visitorDataMappings"){language=data.lang;}else if(chatSettings.language&&chatSettings.language!=""&&chatSettings.language!="visitorDataMappings"){language=chatSettings.language;}else if(navigator.language){language=navigator.language;}
insideFrontInterface.language=language;isLanguageSet=true;setTimeout(checkChatVisible,0);if(frontEnd.settings.addCustomCSS!=false&&typeof(frontEnd.settings.insideCustomCSSFile)!="undefined"){loadCssFile(_insideCDN+frontEnd.settings.insideCustomCSSFile,windowScale);}
if(frontEnd.settings.addCustomJS!=false&&typeof(frontEnd.settings.insideCustomJSFile)!="undefined"){_insideGraph.loadJS(_insideCDN+frontEnd.settings.insideCustomJSFile+'?v='+_insideScriptVersion);}
if(altChatSettingsSet==true){$.extend(frontEnd.settings,savedAltChat.chatTab);$.extend(frontEnd.settings,savedAltChat.chatPane);$.extend(frontEnd.settings.offlineChat,savedAltChat.offline);$.inside.front.settingsData.settings=frontEnd.settings;frontEnd.settings.useCustomChatPane=(savedAltChat.chatPane.useCustomChatPane==true);frontEnd.settings.chatSettings=data.chatSettings;}else{if(typeof(data.chatSettings)!="undefined"&&data.chatSettings!=null){savedAltChat=data.chatSettings;savedAltChat.chatSettingsId=data.chatSettingsId;insideFrontInterface.chatSettings=savedAltChat;altChatSettingsSet=true;frontEnd.settings.chatSettings=data.chatSettings;if(data.chatSettings.preChat&&typeof(data.chatSettings.preChat)=="object"&&Object.keys(data.chatSettings.preChat).length>0){frontEnd.settings.preChat=data.chatSettings.preChat;}
if(frontEnd.settings.chatSettings.version=="2"&&typeof insideChatPaneFrame!="undefined"){if(data.chatSettings&&data.chatSettings.chatTab){delete frontEnd.settings.mobileTabWidth;}}
$.extend(frontEnd.settings,data.chatSettings.chatTab);$.extend(frontEnd.settings,data.chatSettings.chatPane);$.extend(frontEnd.settings.offlineChat,data.chatSettings.offline);if(data.chatSettings&&data.chatSettings.chatPane){frontEnd.settings.useCustomChatPane=(data.chatSettings.chatPane.useCustomChatPane==true);if(!data.chatSettings.chatPane.chatInputPlaceholder)
frontEnd.settings.chatInputPlaceholder="";if(!data.chatSettings.chatPane.chatInputDisabledPlaceholder)
frontEnd.settings.chatInputDisabledPlaceholder="";}
$("#inside_holder").attr("chatSettingsId",data.chatSettingsId);}}
insideFrontInterface.labelTranslations=data.labels;if(window.top!=window){if(frontEnd.settings.allowIframes!=true){$("#inside_holder").remove();return;}}
if(typeof(frontEnd.settingsData.users)!="undefined"&&frontEnd.settingsData.users.length>0){updateUsers($.inside.front.settingsData.users);}
if(frontEnd.settings.chatEnabled==false){chatEnabled=false;}
setTimeout(function(){$.inside.flushQueue();},1000);insideFrontInterface.videoChatRequested=data.videoChat;if(typeof(insideFrontInterface.videoChat)=="undefined"){insideFrontInterface.videoChat={disableChatOnVideoCall:data.disableChatOnVideoCall}}
else
insideFrontInterface.videoChat.disableChatOnVideoCall=data.disableChatOnVideoCall;if(data.video){frontEnd.settingsData.video=data.video;insideFrontInterface.videoChatRequested=false;}
if(chatEnabled){_insideGraph.initModule("tabs");setTabPosition();startautohideTabs();}
if(chatEnabled){if(frontEnd.settings.showChatPaneHeaderAsChatTab&&insideFrontInterface.showChatPaneHeaderForDevice()&&!insideFrontInterface.chat.isTabHiddenOnThisDevice()){$.inside.front.loadInsideChat();}}
var isAppointment=false;try{isAppointment=getQueryStringParameterByName("insidechatlinksrc").includes('appt');}catch(ex){isAppointment=false;}
if((data.chats&&data.chats.length)||(typeof(data.workflow)!="undefined"&&data.workflow!=null)||data.chatlinkvisitor!=null||isAppointment){loadInsideChat();}
if(typeof insideStreamingCheck!="undefined"){insideStreamingCheck.init($);}
insideFrontInterface.chat.data=insideFrontInterface.chat.data||{};insideFrontInterface.chat.data.flags=insideFrontInterface.chat.data.flags||data.flags;var availableAssistants=getAvailableAssistants();if(availableAssistants.length==0){_insideGraph.doEvent("chatavailable",false);}
var currentStream=sessionStorage.getItem('inside_currentStream');if(currentStream!=""&&currentStream!=null){if(!window.insideStreamingCheck.bundleLoaded){window.insideStreamingCheck.loadStreamingBundle();}}
if(typeof window.insideStreaming!=="undefined"){window.insideStreaming.refreshStreamList();}
var videoKey=getQueryStringParameterByName('vfvid');if(videoKey){insideAPI.post(_insideCDN+"api/operator/decodeSharedVideoKey",{key:videoKey},function(sharedVideo){if(!sharedVideo){return;}
$.inside.front.loadInsideChat(function(){_insideGraph.defer(function(){insideChatPane.frame.contentWindow.insideVideos.showVideoPopupFromLink(sharedVideo.fileLibrary,sharedVideo.shareId,sharedVideo.assignType);},function(){return typeof insideChatPane!=="undefined"&&insideChatPane.chatPane;});});},function(e){});}
var showId=getQueryStringParameterByName('showid');if(showId){insideAPI.post(_insideCDN+"api/videoshows/decodeSharedShowKey",{key:showId},function(sharedShow){if(!sharedShow){return;}
$.inside.front.loadInsideChat(function(){_insideGraph.defer(function(){insideChatPane.frame.contentWindow.insideVideos.showVideoShowPopup(sharedShow);},function(){return typeof insideChatPane!=="undefined"&&insideChatPane.chatPane;});});},function(e){});}}
insideFrontInterface.updateChatSettings=updateChatSettings;function updateChatSettings(_chatSettings){chatSettings=insideFrontInterface.chatSettings=_chatSettings;insideFrontInterface.chat.setChatTab();}
var languageTranslationsLoaded=false;var languagesLoading=false;var isLanguageSet=false;insideFrontInterface.languagesLoading=false;insideFrontInterface.languageTranslationsLoaded=false;insideFrontInterface.loadTranslations=loadTranslations;var labelCallbacks=[];function loadTranslations(callback){if(languageTranslationsLoaded){if(typeof callback=="function"){callback();}
return;};if(languagesLoading){if(typeof callback=="function")labelCallbacks.push(callback);return;}
languagesLoading=true;insideFrontInterface.languagesLoading=true;_insideGraph.defer(function(){insideAPI.get(_insideCDN+"/api/websites/labels/"+_insideGraph.current.account+"/"+insideFrontInterface.language+"?"+_insideScriptVersion,{},function(response){insideFrontInterface.labelTranslations=response;languageTranslationsLoaded=true;insideFrontInterface.languageTranslationsLoaded=true;insideFrontInterface.languagesLoading=languagesLoading=false;if(typeof callback=="function"){callback();}
for(var i=0;i<labelCallbacks.length;i++){labelCallbacks[i]();}},function(err){console.error("Error loading inside translation labels.");languageTranslationsLoaded=true;insideFrontInterface.languageTranslationsLoaded=true;if(typeof callback=="function"){callback();}
for(var i=0;i<labelCallbacks.length;i++){labelCallbacks[i]();}});},function(){return isLanguageSet;});}
insideFrontInterface.getLanguageValue=getLanguageValue;function getLanguageValue(ob){if(typeof(ob)=="undefined"||!ob){return "";}
if(typeof ob=="string"){return ob;}else if(typeof ob[insideFrontInterface.language]!="undefined"){return ob[insideFrontInterface.language]||ob["en"]||"";}else if(insideFrontInterface.language.indexOf("-")!==-1&&typeof ob[insideFrontInterface.language.split("-")[0]]=="string"){return ob[insideFrontInterface.language.split("-")[0]];}else if(Object.keys(ob).length>0){for(var property in ob){if(property==="type")continue;return ob[property];}
return "";}else{return "";}}
function checkChatVisible(){var chatSettings=getChatSettings();var chatIsVisible=true;var data=frontEnd.settingsData;try{if(chatSettings.useMinimiseButton===true&&(hasSessionStorage&&sessionStorage.getItem("insideChatClosed")==="True")||insideFrontInterface.chat.isTabHiddenOnThisDevice()){chatIsVisible=false;}}catch(e){}
if(typeof data.chats!="undefined"&&data.chats.length>0&&(chatSettings.showTabForActive===true||chatSettings.showPaneForActive===true)){chatIsVisible=true;}
_insideGraph.doEvent("chat_visible",chatIsVisible);}
insideFrontInterface.setTabPosition=setTabPosition;function setTabPosition(){if(device>=2&&typeof(frontEnd.settings.mobileTabPosition)!="undefined"){tabPosition=frontEnd.settings.mobileTabPosition||"9";}else if(typeof(frontEnd.settings.tabPosition)!="undefined"){tabPosition=frontEnd.settings.tabPosition||"6";}
var posNumbers={1:"topleft",2:"top",3:"topright",4:"left",5:"bottom",6:"right",7:"bottomleft",8:"bottom",9:"bottomright"};if(!isNaN(tabPosition)){tabPosition=posNumbers[tabPosition];}
if($("#inside_liveChatTab").hasClass("usingChatHeader")){if(tabPosition.indexOf("left")!=-1){tabPosition="bottomleft";}else{tabPosition="bottomright";}}
if(frontEnd.settings.chatSettings&&frontEnd.settings.chatSettings.version=="2"){tabPosition=posNumbers[frontEnd.settings.chatSettings.chatTab.position]||"right";if(device>=2){tabPosition=posNumbers[frontEnd.settings.chatSettings.chatTab.mobileTabPosition]||"right";}}else if(typeof(insideChatPane)!="undefined"&&insideChatPane.settings&&insideChatPane.settings.chatSettings.chatTab.position){if(device>=2){tabPosition=insideChatPane.settings.chatSettings.chatTab.mobileTabPosition||"9";}else{tabPosition=insideChatPane.settings.chatSettings.chatTab.position||"6";}
tabPosition=posNumbers[tabPosition];}
tabYScale=0.5;if(tabPosition.indexOf("right")!=-1){$("#inside_tabs").css("right","0px");}else{$("#inside_tabs").css("right","auto");}
if(tabPosition=="left"){$("#inside_tabs").css("left","0px").css("right","auto");$("#inside_tabs").css("text-align","left");tabYScale=0.5;}
if(tabPosition=="topleft"){$("#inside_tabs").css("left","0px");$("#inside_tabs").css("text-align","left");tabYScale=1.0;}
if(tabPosition=="bottomleft"){$("#inside_tabs").css("left","0px");$("#inside_tabs").css("text-align","left");tabYScale=0.0;}
if(tabPosition=="topright"){tabYScale=1.0;}
if(tabPosition=="bottomright"){tabYScale=0.0;}
insideFrontInterface.chat.setTabOffsetPosition();windowScale();}
function unquoteAttr(s,preserveCR){return(''+s).split('&amp;').join("&").replace(/&apos;/g,'').replace(/&quot;/g,'"').replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&#10;/g,"\r\n").replace(/&#39;/g,'"').replace(/&nbsp;/g,' ').replace(/&#13;/g,"\r\n");}
function loadFacebookSDK(){(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}
js=d.createElement(s);js.id=id;js.src='//connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));}
window.fbAppId=window.fbAppId||"";window.fbQueue=window.fbQueue||[];window.fbReady=window.fbReady||false;window.fbAsyncInit=window.fbAsyncInit||function(){FB.init({appId:window.fbAppId,xfbml:false,version:'v2.5'});window.fbReady=true;window.processFbQueue();};window.processFbQueue=window.processFbQueue||function(){if(!window.fbReady){return;}
if(window.fbQueue.length===0){return;}
fbQueue.shift().call(window);setTimeout(window.processFbQueue,0);};frontEnd.visitorNotify=visitorNotify;function visitorNotify(data,callback){if(insideFrontInterface.visitorNotify){var popup=insideFrontInterface.visitorNotify.show(data);if(typeof callback=="function"){callback(popup);}
return;}
loadCssFile(_insideCDN+"./fonts/insideicons/front/icoinside-front-surveys.css?"+_insideScriptVersion);_insideGraph.loadModule("visitornotify","inside.front.visitornotify.js").then(function(){var popup=insideFrontInterface.visitorNotify.show(data);if(typeof callback=="function"){callback(popup);}});}
function getSelectionText(){var text="";if(window.getSelection){text=window.getSelection().toString();}else if(document.selection&&document.selection.type!="Control"){text=document.selection.createRange().text;}
return text;}
function disconnected(){console.log("disconnected from inside");$("#inside_liveChatTab").hide();if(chatPaneVersion()===2&&typeof insideChatPane!=="undefined"&&typeof insideChatPane.disconnectedReceived==="function"){insideChatPane.disconnectedReceived();}}
var scaleinit=false;var chatPaneMode="";var tabYScale=0.5;var viewport;frontEnd.windowScale=windowScale;insideFrontInterface.windowScale=windowScale;function windowScale(animTime){if(typeof(animTime)=="undefined"){animTime=0;}
viewport=getViewPortSize();var offset=viewport.height*tabYScale;if(device==3&&(navigator.platform.indexOf("iPhone")!=-1||navigator.platform.indexOf("iPad")!=-1)){offset=viewport.height*tabYScale*getViewportScale();}
if(tabPosition=="left"||tabPosition=="right"){offset-=$("#inside_liveChatTab").height()*0.5;}
if(device>1&&tabPosition.startsWith('top')){if(typeof(document.documentElement)!='undefined'&&typeof(document.documentElement.clientHeight)!='undefined'&&offset>document.documentElement.clientHeight){if(device!==1&&document.documentElement.clientHeight<window.innerHeight){offset=window.innerHeight;}else{offset=document.documentElement.clientHeight;}}
if(!insideFrontInterface.chat.chatPaneOpen&&$("#inside_tabs").is(":visible")&&!$("#inside_tabs").is(':empty')&&$("#inside_liveChatTab").height()==0&&$(".inside-notification").length==0){setTimeout(windowScale,250);}}
if(tabPosition.startsWith('top')){offset-=$("#inside_liveChatTab").height();}
if(!animTime){if(!(ios&&!standalone&&safari&&$('input').is(":focus"))){$("#inside_tabs").css("bottom",offset+"px");}}
if(insideFrontInterface.visitorNotify){insideFrontInterface.visitorNotify.scalePopups();}
if(IE11Quirks){IE11ScrollFix();}
var disableChatOnVideoCall=insideFrontInterface.chat.settings&&insideFrontInterface.chat.settings.preChat&&insideFrontInterface.chat.settings.preChat.disableChatOnVideoCall==true&&typeof(insideChatPane)!="undefined"&&typeof(insideChatPane.videoChat)!="undefined"&&insideChatPane.videoChat.disableChatOnVideoCall==true;if(document.getElementById('inside_holder')!=null){if(window.innerHeight>window.innerWidth||disableChatOnVideoCall){document.getElementById('inside_holder').classList.add("portrait");}else document.getElementById('inside_holder').classList.remove("portrait");}}
insideFrontInterface.positionTabs=positionTabs;function positionTabs(){if(tabPosition.indexOf("right")!=-1){$("#inside_tabs").removeClass("leftTabPosition");}else{$("#inside_tabs").addClass("leftTabPosition");}
$("#inside_tabs > div").each(function(){$(this).css({"left":"","right":""});if(tabPosition.indexOf("right")!=-1){if(frontEnd.settings.autohideTabs&&(frontEnd.autoHideAllowed||frontEnd.settings.autoHideTabOnLoad)&&!(device>1&&frontEnd.settings.autohideOnMobile==false)&&!$(this).hasClass("noAutoHide")){hideAmount=20;if(typeof(frontEnd.settings.autoHideAmount)!="undefined"&&frontEnd.settings.autoHideAmount!=""&&!isNaN(frontEnd.settings.autoHideAmount)){hideAmount=parseInt(frontEnd.settings.autoHideAmount);}
$(this).css("right",hideAmount+"px");$(this).attr("tabHidden",true);}else{if($(this).hasClass("usingChatHeader")){$(this).css("right",$(this).outerWidth());}else if($(this).find("img, svg").length>0){$(this).css("right",$(this).find("img, svg").width());}else if($(this).find("svg").length>0){$(this).css("right",$(this).find("svg").width());}}}else{if(frontEnd.settings.autohideTabs&&(frontEnd.autoHideAllowed||frontEnd.settings.autoHideTabOnLoad)&&!(device>1&&frontEnd.settings.autohideOnMobile==false)){hideAmount=20;if(typeof(frontEnd.settings.autoHideAmount)!="undefined"&&frontEnd.settings.autoHideAmount!=""&&!isNaN(frontEnd.settings.autoHideAmount)){hideAmount=parseInt(frontEnd.settings.autoHideAmount);}
if($(this).find("img, svg").length>0){$(this).css("left",-$(this).find("img, svg").width()+hideAmount+"px");}}else{if($(this).find("img, svg").length>0)
$(this).css("left",0);}}});}
insideFrontInterface.setMetaViewport=setMetaViewPort;var siteViewport=$('meta[name="viewport"]:last'),siteViewportContent,siteViewportId,siteViewportClass;if(siteViewport.length>0){siteViewportContent=siteViewport.attr('content');siteViewportId=siteViewport.attr('id');siteViewportClass=siteViewport.attr('class');}
function setMetaViewPort(){if($('meta[name="viewport"]').length==0){var meta=document.createElement('meta');meta.name='viewport';document.head.appendChild(meta);}
var metaContent='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';var metaContentChanged=$('meta[name="viewport"]:last').attr("content")!=metaContent;$('meta[name="viewport"]:last').attr({'id':'inside-viewport','class':'inside-viewport','content':metaContent});if(metaContentChanged){if(typeof insideChatPane!="undefined"){setTimeout(insideChatPane.windowScale,0);setTimeout(insideChatPane.windowScale,500);}}}
insideFrontInterface.resetMetaViewport=resetMetaViewPort;function resetMetaViewPort(){if(siteViewport.length>0){$('meta[name="viewport"]:last').attr({'id':siteViewportId,'class':siteViewportClass,'content':siteViewportContent});if(typeof siteViewportClass=='undefined'||siteViewportClass.length==0)
$('meta[name="viewport"]:last').removeAttr('class');if(typeof siteViewportId=='undefined'||siteViewportId.length==0)
$('meta[name="viewport"]:last').removeAttr('id');}else $('meta[name="viewport"]:last').remove();}
frontEnd.getViewportScale=getViewportScale;function getViewportScale(){this.viewportScale=1;return this.viewportScale;}
var autoHideTimeout;frontEnd.autoHideAllowed=false;function startautohideTabs(){if(device>1&&frontEnd.settings&&frontEnd.settings.autohideOnMobile===false){return;}
if(frontEnd.settings.chatSettings){if(!frontEnd.settings.chatSettings.chatTab.autohideTabs){return;}}else{if(!frontEnd.settings.autohideTabs)return;}
$("#inside_tabs").off("mouseenter");$("#inside_tabs").off("mouseleave");if(device!=2&&device!=3){$("#inside_tabs").on("touchmove","> div[autohide]",autohideTabs);$("#inside_tabs").on("mouseenter","> div[autohide]",hoverShowTabs);$("#inside_tabs").on("mouseleave","> div[autohide]",function(){autoHideTimeout=setTimeout(autohideTabs,100);frontEnd.autoHideAllowed=true;});}
$("#inside_tabs").off("load").on("load","img",autohideTabs);if(frontEnd.settings.autoHideTabOnLoad!=true){positionTabs();frontEnd.autoHideAllowed=true;autohideTabs();setTimeout(function(){hoverShowTabs($("#inside_tabs > div[autohide]"));frontEnd.autoHideAllowed=false;},1000);setTimeout(function(){frontEnd.autoHideAllowed=true;autohideTabs();},5000);}else{autohideTabs(0);}}
frontEnd.autohideTabs=autohideTabs;function autohideTabs(time){if(device>1&&frontEnd.settings.autohideOnMobile==false){return;}
$("#inside_tabs").show();if(typeof(time)=="undefined"){time=1000;}
var hideAmount=20;if(typeof(frontEnd.settings.autoHideAmount)!="undefined"&&frontEnd.settings.autoHideAmount!=""&&!isNaN(frontEnd.settings.autoHideAmount)){hideAmount=parseInt(frontEnd.settings.autoHideAmount);}
$("#inside_tabs > div[autohide]").each(function(){autohideTab(this,time);});if(insideFrontInterface.chat.chatPaneOpen||(insideFrontInterface.getAvailableAssistants&&insideFrontInterface.getAvailableAssistants().length==0)){}}
frontEnd.autohideTab=autohideTab;function autohideTab(tab,time){if(!frontEnd.autoHideAllowed&&frontEnd.settings.autoHideTabOnLoad!=true)return;var $tab=$(tab);if($tab.hasClass("noAutoHide")){$tab.stop(true).animate({right:$tab.outerWidth()},0);return;}
if($tab.attr("autohide")){hideAmount=parseInt($tab.attr("autohide"));}
var tabImage=$tab.find("img, svg");var tabWidth=tabImage.width();if(tabPosition=="left"||tabPosition=="topleft"||tabPosition=="bottomleft"){$tab.stop(true,true).css("left","0px").animate({left:-tabWidth+hideAmount},time);}else{if(time!=0){$tab.stop(true,true).animate({right:hideAmount},time);}else{$tab.stop(true,true).css({right:hideAmount});}}
$tab.attr("tabHidden","true");}
insideFrontInterface.hoverShowTabs=hoverShowTabs;function hoverShowTabs(_tab){if(typeof(_tab.currentTarget)=="undefined"){tab=_tab;}else{tab=$(this);}
clearTimeout(autoHideTimeout);if(tabPosition=="left"||tabPosition=="topleft"||tabPosition=="bottomleft"){tab.css("right","");tab.stop(true).animate({left:0},250);}else{tab.css("left","");var tabImage=tab.find("img, svg");var tabWidth=tabImage.width();tab.stop(true).animate({right:tabWidth},250);}
tab.removeAttr("tabHidden","true");}
frontEnd.getViewPortSize=getViewPortSize;function getViewPortSize(){var viewportwidth;var viewportheight;if(device===2||device===3){var zoomLevel=document.documentElement.clientWidth/window.innerWidth;viewportheight=window.innerHeight*zoomLevel;viewportwidth=document.documentElement.clientWidth;if(window.innerWidth!==window.outerWidth){viewportheight=window.innerHeight;viewportwidth=window.innerWidth;}}else if(typeof document.documentElement!='undefined'&&typeof document.documentElement.clientWidth!='undefined'&&document.documentElement.clientWidth!=0&&document.documentElement.clientHeight<=window.innerHeight&&!firefox){viewportwidth=document.documentElement.clientWidth,viewportheight=document.documentElement.clientHeight;}else if(typeof window.innerWidth!='undefined'){viewportwidth=window.innerWidth,viewportheight=window.innerHeight;}else{viewportwidth=document.getElementsByTagName('body')[0].clientWidth,viewportheight=document.getElementsByTagName('body')[0].clientHeight;}
return{width:viewportwidth,height:viewportheight};}
frontEnd.setCookie=setCookie;frontEnd.getCookie=getCookie;function getCookie(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==c_name){return unescape(y);}}}
function setCookie(c_name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+((exdays==null)?"":"; expires="+exdate.toUTCString());document.cookie=c_name+"="+c_value;}
function trace(){var arr=Array.prototype.slice.call(arguments);if(typeof(console)!="undefined"){console.log(arr.join(","));}}
frontEnd.loadCssFile=loadCssFile;function loadCssFile(url,callback){_insideGraph.loadCSS(url,callback);}
frontEnd.loadInsideChat=loadInsideChat;function loadInsideChat(callback){loadTranslations(function(){if(insideFrontInterface.chatPaneVersion()!=2&&typeof insideLegacyChat!="undefined"){callback();return;}
_insideGraph.loadModule("chat","frontend-chat.js.bundle").then(function(){if(insideFrontInterface.chatPaneVersion()!=2&&typeof insideLegacyChat=="undefined"){_insideGraph.loadJS(insideScript+"/js/inside.front.legacychat.js?"+_insideScriptVersion,function(){return typeof insideLegacyChat!='undefined'},function(){insideLegacyChat.init($);if(typeof(callback)=="function"){callback();}});loadCssFile(_insideCDN+"/css/inside.front.legacychat.css?"+_insideScriptVersion,function(){console.log("legacy css loaded");});}else{console.log("chat bundle loaded")
if(typeof(callback)=="function"){callback();}}}).catch(function(err){console.error("Error loading chat module: ",err);});});}
function loadInsideSurvey(callback){loadCssFile(_insideCDN+"./fonts/insideicons/front/icoinside-front-surveys.css?"+_insideScriptVersion);_insideGraph.loadModule("survey","inside.front.survey.js").then(function(){_insideGraph.initModule("survey");if(typeof(callback)=="function")
callback();});}
insideFrontInterface.getAvailableAssistants=getAvailableAssistants;function getAvailableAssistants(){var assistants=[];for(var userid in $.inside.front.users){var user=$.inside.front.users[userid];if(typeof(user)!="function"&&typeof(user)!="string")
assistants.push(user);}
return assistants;}
insideFrontInterface.chatPaneVersion=chatPaneVersion;function chatPaneVersion(){if(insideFrontInterface&&insideFrontInterface.chatSettings&&insideFrontInterface.chatSettings.version=="2"){usingChatPanev2=true;insideFrontInterface.chat.version=2;return 2;}
insideFrontInterface.chat.version=1;return 1;}
insideFrontInterface.language="en";insideFrontInterface.chat.translate=translate;function translate(str){if(typeof(str)=="undefined"||str==null||str==""){return "";}
if(typeof str==="object"){str=str[insideFrontInterface.language]||str["en"];}
if(typeof(str)=="undefined"||str==null||str==""){return "";}
if(insideFrontInterface.labelTranslations&&insideFrontInterface.labelTranslations.translations[str]){return insideFrontInterface.labelTranslations.translations[str];}
if(insideFrontInterface.labelTranslations&&insideFrontInterface.labelTranslations.translations){var squareReplace=/\[(.*?)\]/gi;var squareReplace2=/\[(.*?)\]/i;var regExCharReplace=/[-[\]{}()*+?.,\\^$|#\s]/g;var clearStr=str.toString().replace(/<br\s*[\/]?>/gi," ").replace(/\[/g,"XOPENBRACKETX");for(var i in insideFrontInterface.labelTranslations.translations){if(i.indexOf("[")==-1)continue;var englishPhrase=i;var translation=insideFrontInterface.labelTranslations.translations[i];if(typeof(translation)=="undefined")continue;var toMatch="";toMatch=englishPhrase.replace(squareReplace,"XREPLACEX");toMatch=toMatch.replace(regExCharReplace,"\\$&");toMatch=toMatch.split("XREPLACEX").join("(.*)");toMatch="^"+toMatch+"(.)*"+"$";var regex=new RegExp(toMatch,"gi");var matches=clearStr.match(regex);if(matches!=null&&matches.length>0){var newStr=translation;if(typeof(translation)=="undefined"||translation==""){return str;}
var contentsOfBrackets;regex.lastIndex=0;var exec=regex.exec(clearStr);if(exec){contentsOfBrackets=exec[1];}
if(exec.length>1){for(var i=1;i<exec.length;i++){newStr=newStr.replace(squareReplace2,exec[i]);}}
return newStr.replace(/XOPENBRACKETX/g,'[');}}}
return str;}
frontEnd.addStyleString=addStyleString;function addStyleString(str,id){if(typeof(id)!="undefined"){$("style#"+id).remove();}
var styleNode=$("<style>"+str+"</style>").appendTo("body");if(typeof(id)!="undefined"){styleNode.attr("id",id);}}
insideFrontInterface.closePopups=closePopups;function closePopups(){$(".inside_windowBlack").remove();$(".inside_visitorNotify").remove();}
$.inside.front=frontEnd;if(_insideGraph.connectImmediately){setTimeout(init,0);}else{$(document).ready(init);}
function getQueryStringParameterByName(name,url){if(!url){url=window.location.href;}
name=name.replace(/[\[\]]/g,'\\$&');var regex=new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`,'i'),results=regex.exec(url);if(!results){return null;}
if(!results[2]){return '';}
return decodeURIComponent(results[2].replace(/\+/g,' '));}})(window,_insideGraph.jQuery);function initTabVisible(){_insideGraph.tabVisible=true;var hidden,visibilityChange;if(typeof document.hidden!=="undefined"){hidden="hidden";visibilityChange="visibilitychange";}else if(typeof document.msHidden!=="undefined"){hidden="msHidden";visibilityChange="msvisibilitychange";}else if(typeof document.webkitHidden!=="undefined"){hidden="webkitHidden";visibilityChange="webkitvisibilitychange";}
function handleVisibilityChange(){if(document[hidden]){_insideGraph.tabVisible=false;}else{_insideGraph.tabVisible=true;}}
if(typeof document.addEventListener==="undefined"||hidden===undefined){}else{document.addEventListener(visibilityChange,handleVisibilityChange,false);}}
this.destroy=destroy;function destroy(){delete window.insideFrontInterface;_insideGraph.jQuery.inside.unbindAll();}});;_insideGraph.registerModule("tabs",function(){var $=_insideGraph.jQuery;var settings=$.inside.front.settings;var chatSettings=$.inside.front.settings.chatSettings;var device=$.inside.front.device;var hasSessionStorage=false;try{hasSessionStorage=typeof(sessionStorage)!='undefined';}catch(e){}
var checkMessageReceived=true;var useMinimiseButton=false;insideFrontInterface.getUseMinimiseButton=function(){return useMinimiseButton;}
var getAriaButtonAttribute=insideFrontInterface.getAriaButtonAttribute;var translate=insideFrontInterface.chat.translate;var usingChatPanev2=false;var chatTabMode="offline";var tabPosition="right";var customimageurl=_insideCDN+"/custom/";insideFrontInterface.chatTabMode=chatTabMode;insideFrontInterface.chat.startOffline=true;var messageReceived=false;var defaultOnlineSVGs={"default1":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><g fill="none" fill-rule="evenodd"><circle cx="30" cy="30" r="30" fill="#1BB9DA"/><path fill="#FFF" d="M32.644 42.097l-.04 5.167-6.552-5.167h-9.3a5.64 5.64 0 0 1-5.64-5.64V21.543a5.64 5.64 0 0 1 5.64-5.64h25.495a5.64 5.64 0 0 1 5.64 5.64v14.914a5.64 5.64 0 0 1-5.64 5.64h-9.603z"/><path fill="#1BB9DA" d="M22.62 32c-1.085 0-1.965-.895-1.965-2s.88-2 1.966-2c1.085 0 1.965.895 1.965 2s-.88 2-1.965 2zm6.88 0c-1.086 0-1.966-.895-1.966-2s.88-2 1.966-2c1.086 0 1.966.895 1.966 2s-.88 2-1.966 2zm6.88 0c-1.086 0-1.966-.895-1.966-2s.88-2 1.965-2c1.086 0 1.966.895 1.966 2s-.88 2-1.966 2z"/></g></svg>',"default2":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><g fill="none" fill-rule="evenodd"><circle cx="30" cy="30" r="30" fill="#1BB9DA"/><path stroke="#F9F9F9" stroke-width="2" d="M32.644 42.097l-.04 5.167-6.552-5.167h-9.3a5.64 5.64 0 0 1-5.64-5.64V21.543a5.64 5.64 0 0 1 5.64-5.64h25.495a5.64 5.64 0 0 1 5.64 5.64v14.914a5.64 5.64 0 0 1-5.64 5.64h-9.603z"/></g></svg>',"default3":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 61 70" class="svgreplace replaced-svg"><g fill="none" fill-rule="evenodd"><path fill="#1BB9DA" d="M30.278 61.583a30.1 30.1 0 0 0 3.454-.198l10.339 8.398a1 1 0 0 0 1.63-.777V58.15c9.724-5.124 14.855-15.452 14.855-27.358C60.556 13.786 47 0 30.278 0S0 13.786 0 30.791c0 17.006 13.556 30.792 30.278 30.792z"></path><path fill="#FFF" d="M19.683 34c-1.629 0-2.95-1.343-2.95-3s1.321-3 2.95-3c1.63 0 2.95 1.343 2.95 3s-1.32 3-2.95 3zM30.5 34c-1.63 0-2.95-1.343-2.95-3s1.32-3 2.95-3c1.63 0 2.95 1.343 2.95 3s-1.32 3-2.95 3zm10.817 0c-1.63 0-2.95-1.343-2.95-3s1.32-3 2.95-3c1.629 0 2.95 1.343 2.95 3s-1.321 3-2.95 3z"></path></g></svg>',"default4":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="svgreplace replaced-svg"><g fill="none" fill-rule="evenodd"><circle cx="30" cy="30" r="30" fill="#1BB9DA" fill-rule="nonzero"></circle><path stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M38.28 39.548v6.52l-7.693-6.52H17.7a1.488 1.488 0 0 1-1.475-1.5V21c0-.828.66-1.5 1.475-1.5h23.787c.814 0 1.475.672 1.475 1.5v17.048c0 .828-.66 1.5-1.475 1.5H38.28z"></path></g></svg>',"default5":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="svgreplace replaced-svg"><g fill="none" fill-rule="nonzero"><circle cx="30" cy="30" r="30" fill="#1BB9DA"></circle><path fill="#FFF" d="M29.594 46c4.019 0 7.753-1.012 10.847-2.744l9.735 1.654-3.774-6.958C48.03 35.61 48.96 32.895 48.96 30c0-8.837-8.67-16-19.365-16C18.9 14 10.23 21.163 10.23 30s8.67 16 19.365 16z"></path></g></svg>',"default6":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><g fill="none" fill-rule="nonzero">  <circle cx="30" cy="30" r="30" fill="#1BB9DA"/><path fill="#FFF" d="M17.983 20H41.77c.543 0 .983.448.983 1v17.048c0 .552-.44 1-.983 1h-3.697V45l-7.024-5.952H17.983a.992.992 0 0 1-.983-1V21c0-.552.44-1 .983-1z"/></g></svg>',"default7":'<?xml version="1.0" encoding="UTF-8"?><svg width="119px" height="33px" viewBox="0 0 119 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>1B6F7EA9-2573-4783-86AD-15DD810AAACE</title><desc>Created with sketchtool.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">  <g id="Chat-Tab/Styling" transform="translate(-338.000000, -1202.000000)"><g id="chat-tab-2" transform="translate(338.000000, 1202.000000)"><rect id="Rectangle-2-Copy" fill="#1BB9DA" x="0" y="0" width="119" height="32.8999999" rx="4.69999999"></rect><path d="M25.9522868,22.2949544 L25.9224674,26.0257792 L21.3732377,22.4999999 L15.98,22.4999999 C12.865114,22.4999999 10.34,19.9748859 10.34,16.86 L10.34,14.04 C10.34,10.925114 12.865114,8.39999998 15.98,8.39999998 L24.4399999,8.39999998 C27.5548859,8.39999998 30.0799999,10.925114 30.0799999,14.04 L30.0799999,16.86 C30.0799999,19.4510416 28.3327885,21.6340001 25.9522868,22.2949544 Z" id="Combined-Shape-Copy-2" fill="#FFFFFF"></path><text id="LIVE-CHAT" font-family="Nunito-ExtraBold, Nunito" font-size="13.16" font-weight="600" fill="#FFFFFF"><tspan x="38.7199999" y="20.58">LIVE CHAT</tspan></text></g>  </g></g></svg>'}
var defaultOfflineSVGs={"default1":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><g fill="none" fill-rule="evenodd"><circle cx="30" cy="30" r="30" fill="#1BB9DA"/><path fill="#FFF" d="M32.644 42.097l-.04 5.167-6.552-5.167h-9.3a5.64 5.64 0 0 1-5.64-5.64V21.543a5.64 5.64 0 0 1 5.64-5.64h25.495a5.64 5.64 0 0 1 5.64 5.64v14.914a5.64 5.64 0 0 1-5.64 5.64h-9.603z"/><path fill="#1BB9DA" d="M22.62 32c-1.085 0-1.965-.895-1.965-2s.88-2 1.966-2c1.085 0 1.965.895 1.965 2s-.88 2-1.965 2zm6.88 0c-1.086 0-1.966-.895-1.966-2s.88-2 1.966-2c1.086 0 1.966.895 1.966 2s-.88 2-1.966 2zm6.88 0c-1.086 0-1.966-.895-1.966-2s.88-2 1.965-2c1.086 0 1.966.895 1.966 2s-.88 2-1.966 2z"/></g></svg>',"default2":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><g fill="none" fill-rule="evenodd"><circle cx="30" cy="30" r="30" fill="#1BB9DA"/><path stroke="#F9F9F9" stroke-width="2" d="M32.644 42.097l-.04 5.167-6.552-5.167h-9.3a5.64 5.64 0 0 1-5.64-5.64V21.543a5.64 5.64 0 0 1 5.64-5.64h25.495a5.64 5.64 0 0 1 5.64 5.64v14.914a5.64 5.64 0 0 1-5.64 5.64h-9.603z"/></g></svg>',"default3":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 61 70" class="svgreplace replaced-svg"><g fill="none" fill-rule="evenodd"><path fill="#1BB9DA" d="M30.278 61.583a30.1 30.1 0 0 0 3.454-.198l10.339 8.398a1 1 0 0 0 1.63-.777V58.15c9.724-5.124 14.855-15.452 14.855-27.358C60.556 13.786 47 0 30.278 0S0 13.786 0 30.791c0 17.006 13.556 30.792 30.278 30.792z"></path><path fill="#FFF" d="M19.683 34c-1.629 0-2.95-1.343-2.95-3s1.321-3 2.95-3c1.63 0 2.95 1.343 2.95 3s-1.32 3-2.95 3zM30.5 34c-1.63 0-2.95-1.343-2.95-3s1.32-3 2.95-3c1.63 0 2.95 1.343 2.95 3s-1.32 3-2.95 3zm10.817 0c-1.63 0-2.95-1.343-2.95-3s1.32-3 2.95-3c1.629 0 2.95 1.343 2.95 3s-1.321 3-2.95 3z"></path></g></svg>',"default4":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="svgreplace replaced-svg"><g fill="none" fill-rule="evenodd"><circle cx="30" cy="30" r="30" fill="#1BB9DA" fill-rule="nonzero"></circle><path stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M39.03 40.298v7.389l-8.718-7.389H17.7c-1.232 0-2.225-1.01-2.225-2.25V21c0-1.24.993-2.25 2.225-2.25h23.787c1.232 0 2.225 1.01 2.225 2.25v17.048c0 1.24-.993 2.25-2.225 2.25H39.03z"></path><path fill="#FFF" fill-rule="nonzero" d="M26.566 34h-6.028v-.973l4.248-6.392h-4.132v-1.201h5.796v.984l-4.263 6.38h4.379V34zm6.096 0H27.83v-.85l3.22-4.576h-3.024V27.52h4.546v.96l-3.152 4.465h3.244V34zm6.133 0h-4.834v-.85l3.222-4.576h-3.026V27.52h4.546v.96l-3.152 4.465h3.245V34z"></path></g></svg>',"default5":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" class="svgreplace replaced-svg"><g fill="none" fill-rule="nonzero"><circle cx="30" cy="30" r="30" fill="#1BB9DA"></circle><path fill="#FFF" d="M29.594 46c4.019 0 7.753-1.012 10.847-2.744l9.735 1.654-3.774-6.958C48.03 35.61 48.96 32.895 48.96 30c0-8.837-8.67-16-19.365-16C18.9 14 10.23 21.163 10.23 30s8.67 16 19.365 16z"></path><path fill="#1BB9DA" d="M26.346 36H18.8v-1.374l4.86-6.87h-4.728v-1.75h7.28v1.367L21.36 34.25h4.986V36zm7.35 0h-6.123v-1.23l3.59-4.82h-3.375v-1.593h5.781v1.354l-3.494 4.696h3.62V36h.001zm7.434 0h-6.122v-1.23l3.59-4.82h-3.375v-1.593h5.781v1.354l-3.494 4.696h3.62V36z"></path></g></svg>',"default6":'<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><g fill="none" fill-rule="nonzero"><circle cx="30" cy="30" r="30" fill="#1BB9DA"/><path fill="#FFF" d="M17.983 20H41.77c.543 0 .983.448.983 1v17.048c0 .552-.44 1-.983 1h-3.697V45l-7.024-5.952H17.983a.992.992 0 0 1-.983-1V21c0-.552.44-1 .983-1z"/></g></svg>'}
function init(){$("#inside_holder").show();setTimeout(setChatTab,1000);window.addEventListener("resize",windowScale);if(settings&&settings.chatSettings&&settings.chatSettings.videoFeed&&settings.chatSettings.videoFeed.enabled){}}
init();function showThemeVideosTab(){insideAPI.post("api/operator/getthemevideofeed",{lastFileLibraryId:0,lastFeaturedFileLibraryId:0,pageSize:10},function(response){if(response.videos.length>0){$("#inside_tabs").prepend("<div class='tab' id='themeVideosTab'></div>");}
insideChatPane.insideVideos.lastFileLibraryId=response.lastFileLibraryId;insideChatPane.insideVideos.lastFeaturedFileLibraryId=response.lastFeaturedFileLibraryId;var tabImage=document.createElement("img");tabImage.setAttribute("src",response.videos[0].thumbpath);$("#themeVideosTab")[0].style.opacity=0;$("#themeVideosTab").html("").append(tabImage);tabImage.addEventListener("load",function(){windowScale();$("#themeVideosTab")[0].style.opacity=1;});addCloseToChatTab($("#themeVideosTab"));$("#themeVideosTab").click(function(){insideFrontInterface.openChatPane(true,function(){insideChatPane.insideVideos.showChatPaneThemeVideos();});});});}
function windowScale(){scaleChatTab();}
var svgIconColourSet=false;function cloneSvgs(svgs,_colour){var colour=settings.chatSettings.generalStyles.brandColor;if(typeof _colour!="undefined"){colour=_colour;}
var newSVGs={};for(var i in svgs){newSVGs[i]=svgs[i].split("#1BB9DA").join(colour);}
return newSVGs;}
insideFrontInterface.chat.setChatTab=setChatTab;function setChatTab(t){if(chatSettings&&chatSettings.version=="2"){usingChatPanev2=true;}
if(usingChatPanev2&&!svgIconColourSet){chatSettings=_insideGraph.jQuery.inside.front.settings.chatSettings||_insideGraph.jQuery.inside.front.settings;defaultOnlineSVGs=cloneSvgs(defaultOnlineSVGs);defaultOfflineSVGs=cloneSvgs(defaultOfflineSVGs,settings.chatSettings.chatTab.offlineColor||"#cccccc");svgIconColourSet=true;}
try{if(insideFrontInterface.isBlocked||$('.inside-notification, #insideChatFrame.notificationMode').is(':visible')||(insideFrontInterface.chat.data&&insideFrontInterface.chat.data.flags.indexOf("dnd")!==-1)){$("#inside_liveChatTab").hide();return;}}catch(e){}
if(insideFrontInterface.getAvailableAssistants().length>0){if((typeof(t)!="undefined"&&!t)||!insideFrontInterface.chat.startOffline){checkMessageReceived=false;insideFrontInterface.chat.startOffline=false;}
else{checkMessageReceived=true;}
setOnlineChatTab();try{setJoinTheCallTag(false);}catch(e){}
$("#inside_clickToCallChatTab").show();}else{setOfflineChatTab();if($("#inside_joinTheCallChatTab").length!==0){setJoinTheCallTag(true);}
$("#inside_clickToCallChatTab").show();}
if(typeof chatSettings!="undefined"&&chatSettings&&chatSettings.chatTab&&chatSettings.chatTab.draggable===false){$(document.querySelector("#inside_tabs")).unbind("mousedown touchstart");}
setTimeout($.inside.front.windowScale,1000);}
function positionJoinTheCallTag(){if($("#inside_joinTheCallChatTab").length===0){return;}}
insideFrontInterface.setJoinTheCallTag=setJoinTheCallTag;function setJoinTheCallTag(show){if($("#inside_joinTheCallChatTab").length===0){return;}
positionJoinTheCallTag();if(show&&!insideFrontInterface.chat.chatPaneOpen){$("#inside_joinTheCallChatTab").show();}else{$("#inside_joinTheCallChatTab").hide();}}
insideFrontInterface.chat.setupJoinTheCallTag=setupJoinTheCallTag;function setupJoinTheCallTag(jtcsettings){if($("#inside_joinTheCallChatTab").length){return;}
var tabImg=imageurl+"assistance-tab.png";if(jtcsettings.tabImage){tabImg=customimageurl+jtcsettings.tabImage;}
var html="<div id='inside_joinTheCallChatTab' "+getAriaButtonAttribute(translate('Join the Call'))+" class='noselect' ondragstart='return false;' ondrop='return false;'>"+
"<img id='inside_joinTheCallImage' src='"+tabImg+"' alt='"+translate('Join the Call')+"' />"+
"<div id='inside_joinTheCallPasscode'></div>"+
"</div>";var $html=$(html);$(html).find("#inside_joinTheCallChatTab").hide();$html.appendTo("#inside_tabs");$html.find("img").on("load",insideFrontInterface.chat.onJoinTheCallChatTabImageLoad);if(tabPosition.indexOf("bottom")!=-1||$("#inside_liveChatTab.usingChatHeader").length!=0){$("#inside_liveChatTab").appendTo("#inside_tabs");}
var j2cImageIcon='<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15"><path fill="currentColor" fill-rule="nonzero" d="M11.198 4.5H2.007v3H0v-5h11.124l-1.092-1.092 1.415-1.414 3.547 3.547-1.414 1.415-2.121 2.121-1.42-1.419L11.199 4.5zm-7.396 5.991h9.191v-3H15v5H3.876l1.092 1.092-1.415 1.414L.006 11.45l1.414-1.415 2.121-2.12 1.42 1.418-1.159 1.158z"/></svg>';settings.showJoinTheCallIcon=jtcsettings.showJoinTheCallIcon;if(jtcsettings.showJoinTheCallIcon==true&&$("#inside_joinTheCallIcon").length==0){var jtcTooltip="Session Code: ";var jtcIcon="";try{jtcTooltip=insideFrontInterface.chat.settings.joinTheCallText||"Session Code: ";jtcIcon=insideFrontInterface.chat.settings.joinTheCallIcon||"";}catch(e){jtcTooltip="Session Code: ";}
if(jtcIcon){j2cImageIcon="<img src='"+(customimageurl+jtcIcon)+"' />";}
$("<div "+getAriaButtonAttribute(jtcTooltip)+" class='inside_icon_image_holder' id='inside_joinTheCallIcon' title-data='"+jtcTooltip+"'>"+j2cImageIcon+"</div>").prependTo("#chatHeaderIcons, #inside_chatPane_custom_chatHeader");}else{$("#inside_joinTheCallIcon").remove();}
if(jtcsettings.colour){$("#inside_joinTheCallPasscode").css("color",jtcsettings.colour);}
if(jtcsettings.textSize){$("#inside_joinTheCallPasscode").css("font-size",jtcsettings.textSize+"px");}
$("#inside_joinTheCallChatTab").hover(function(){if(this.codeLoaded!=true){this.codeLoaded=true;$.inside.front.loadInsideChat(function(){$.when(insideFrontInterface.chat.getVisitorCobrowsePasscode()).done(function(response){$("#inside_joinTheCallPasscode").text(response.data);}).fail(function(response){$("#inside_joinTheCallPasscode").text("????");});});}});$("#inside_joinTheCallChatTab").click(j2cTabClick);$('body').on('click','#inside_joinTheCallIcon',function(){$.inside.front.loadInsideChat(function(){$.when(insideFrontInterface.chat.getVisitorCobrowsePasscode()).done(function(response){var joinTheCallText="Session Code: ";var joinTheCallIcon=_insideCDN+"/images/icon-join-call-greeen.png";if(insideFrontInterface.chat&&insideFrontInterface.chat.settings&&insideFrontInterface.chat.settings.joinTheCallText&&typeof(insideFrontInterface.chat.settings.joinTheCallText)=="string")
joinTheCallText=insideFrontInterface.chat.settings.joinTheCallText;if(insideFrontInterface.chat.clickToCallSettings&&insideFrontInterface.chat.clickToCallSettings.joinTheCallMsg){joinTheCallText=insideFrontInterface.chat.clickToCallSettings.joinTheCallMsg;}
var msg='<div class="insideJoinTheCallSessionCodeHolder" style="max-width:150px;display:inline;">'+
'   <svg  class="icon-join-call" style="color:#39e039;vertical-align: middle;margin-left: 20px;" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15"><path fill="currentColor" fill-rule="nonzero" d="M11.198 4.5H2.007v3H0v-5h11.124l-1.092-1.092 1.415-1.414 3.547 3.547-1.414 1.415-2.121 2.121-1.42-1.419L11.199 4.5zm-7.396 5.991h9.191v-3H15v5H3.876l1.092 1.092-1.415 1.414L.006 11.45l1.414-1.415 2.121-2.12 1.42 1.418-1.159 1.158z"/></svg>'+
'   <span style="padding-left: 12px;vertical-align: middle;">'+joinTheCallText+'<b> '+response.data+'</b></span>'+
'</div>';if($(".inside_chatPane, #inside_chatPane_custom").hasClass("offline")){$("#inside_leaveMessageForm .insideJoinTheCallSessionCodeHolder").remove();$(msg).insertAfter("#inside_prechatForm .inside_sendButton, #inside_leaveMessageForm .inside_sendButton");}else if($(".inside_chatPane, #inside_chatPane_custom").hasClass("prechat")){$("#inside_prechatForm_form .insideJoinTheCallSessionCodeHolder").remove();$("#inside_prechatForm_form").append('<center style="margin: 20px 0 0 -20px;">'+msg+'</center>');}else{insideFrontInterface.chat.showSystemMessage(msg,false);}}).fail(function(response){var msg=settings.joinTheCallFailMsg||"Could not get Join the Call code!";insideFrontInterface.chat.showSystemMessage(msg,false);});});});setJoinTheCallTag(insideFrontInterface.getAvailableAssistants().length===0);}
insideFrontInterface.showChatPaneHeaderForDevice=showChatPaneHeaderForDevice;function showChatPaneHeaderForDevice(offline){if(typeof insideChatPane!="undefined"){activeChat=insideChatPane.activeChat;}
if(usingChatPanev2&&typeof insideChatPane!="undefined"&&insideChatPane.showHeaderForTab){return true;}
if(typeof(settings.showChatPaneHeaderAsChatTab)!="undefined"&&settings.showChatPaneHeaderAsChatTab){if(device===2){if(offline===true&&settings.showChatPaneHeaderAsChatTab.indexOf("mobile_offline")!==-1){return true;}
if(!offline&&!activeChat&&settings.showChatPaneHeaderAsChatTab.indexOf("mobile")!==-1){return true;}
if(!offline&&activeChat&&settings.showChatPaneHeaderAsChatTab.indexOf("mobile_active")!==-1){return true;}}else{if(offline===true&&settings.showChatPaneHeaderAsChatTab.indexOf("desktop_offline")!==-1){return true;}
if(!offline&&!activeChat&&settings.showChatPaneHeaderAsChatTab.indexOf("desktop")!==-1){return true;}
if(!offline&&activeChat&&settings.showChatPaneHeaderAsChatTab.indexOf("desktop_active")!==-1){return true;}}}
return false;}
function removeHeaderFromTab(){$("#inside_liveChatTab").removeClass("usingChatHeader").removeClass("noAutoHide");insideFrontInterface.setTabPosition();$("#inside_liveChatTab").css("background","");addTabContents();}
var hideChatTab=false;var showTabForActive=false;var showPaneForActive=false;var activeChat=false;insideFrontInterface.chat.getHideChatTab=function(){return hideChatTab;}
function customImage(_url){customImageUrl=_insideCDN+"custom/";return customImageUrl+_url+"?"+($.inside.front.settings.imageCacheVersion||"");}
function checkPrivacyOptIn(){if(_insideGraph.current.noCookie===true&&chatSettings&&chatSettings.version=="2"){if(typeof chatSettings.privacy=="undefined"||!chatSettings.privacy||chatSettings.privacy.enabled===false){return false;}}
return true;}
insideFrontInterface.chat.setOnlineChatTab=setOnlineChatTab;function setOnlineChatTab(t){$("#inside_holder").removeClass("offline");device=$.inside.front.device;chatSettings=_insideGraph.jQuery.inside.front.settings.chatSettings||_insideGraph.jQuery.inside.front.settings;if(chatSettings&&chatSettings.version=="2"){usingChatPanev2=true;if(typeof insideChatPane!="undefined"&&typeof insideChatPane.activeChat!="undefined"){activeChat=insideChatPane.activeChat;}}else{activeChat=insideFrontInterface.chat.activeChat;}
if(!checkPrivacyOptIn()){$("#inside_liveChatTab").hide();return;}
try{if(hasSessionStorage&&sessionStorage.getItem("insideChatClosed")==="True"){return;}}catch(e){}
if($("#inside_liveChatTab").length==0){addChatTab();$("#inside_liveChatTab").hide();}
if($(".inside_chatPane, #inside_chatPane_custom").is(":visible")){$("#inside_liveChatTab").hide();}
$("#inside_liveChatTab").removeClass("inside_chat_offline").addClass("inside_chat_online");chatTabMode="online";insideFrontInterface.chatTabMode=chatTabMode;if(activeChat){$("#inside_liveChatTab, #inside_tabs").addClass("inside_active_chat");}else{$("#inside_liveChatTab, #inside_tabs").removeClass("inside_active_chat");}
$("#inside_liveChatTab .chatHeaderIcons").remove();if(usingChatPanev2&&showChatPaneHeaderForDevice())return;if(typeof(settings)!="undefined"&&settings!=null){if(!usingChatPanev2&&settings.showChatPaneHeaderAsChatTab&&showChatPaneHeaderForDevice()){addChatPaneHeaderToTab();addCloseToChatTab();}else{if($("#inside_liveChatTab").hasClass("usingChatHeader")){removeHeaderFromTab();}
prevTabImage=$("#inside_liveChatTab .inside_chatTabImage").attr("src");if(!usingChatPanev2){var chatTabImageUrl;if(device===1){if($("#inside_liveChatTab .inside_chatTabImage").length==0)
addTabContents();if(activeChat&&chatSettings&&chatSettings.chatTab&&typeof(chatSettings.chatTab.activeChatTab)!="undefined"&&chatSettings.chatTab.activeChatTab!=""){chatTabImageUrl=customImage(chatSettings.chatTab.activeChatTab);}else if(chatSettings&&chatSettings.chatTab&&typeof(chatSettings.chatTab.onlineChatTab)!="undefined"&&chatSettings.chatTab.onlineChatTab!=""){chatTabImageUrl=customImage(chatSettings.chatTab.onlineChatTab);}else if(activeChat&&settings.activeChatTabImage){chatTabImageUrl=customImage(settings.activeChatTabImage);}else if(typeof(settings.customTabImage)!="undefined"&&settings.customTabImage!=""){chatTabImageUrl=customImage(settings.customTabImage);}else{if(!usingChatPanev2){chatTabImageUrl=$.inside.front.imageurl+"livechaticon.png";}}}else{if(activeChat&&settings.activeChatTabMobileImage){chatTabImageUrl=customImage(settings.activeChatTabMobileImage);}else if(typeof(settings.customMobileTabImage)!="undefined"&&settings.customMobileTabImage!=""){chatTabImageUrl=customImage(settings.customMobileTabImage);}else{if(!usingChatPanev2){chatTabImageUrl=$.inside.front.imageurl+"livechaticon_mobile.png";}}}
updateChatTabImage(chatTabImageUrl);}
if(device==1){if($.inside.front.settings.showCloseOnTab){if(activeChat&&$.inside.front.settings.showCloseOnTab.indexOf("desktop_active")!=-1){addCloseToChatTab();}else if(!activeChat&&$.inside.front.settings.showCloseOnTab.indexOf("desktop")!=-1){addCloseToChatTab();}}}else{if($.inside.front.settings.showCloseOnTab){if(activeChat&&$.inside.front.settings.showCloseOnTab.indexOf("mobile_active")!=-1){addCloseToChatTab();}else if(!activeChat&&$.inside.front.settings.showCloseOnTab.indexOf("mobile")!=-1){addCloseToChatTab();}}}
if(usingChatPanev2&&chatSettings&&chatSettings.chatTab){var chatTabImageUrl;if($("#inside_liveChatTab .inside_chatTabImage").length==0&&$("#inside_liveChatTab svg").length==0)addTabContents();if(device==1&&activeChat&&chatSettings&&chatSettings.chatTab&&chatSettings.chatTab.useAvatar&&chatSettings.chatTab.useAvatar.indexOf("desktop_active")!=-1&&chatSettings.chatTab.avatarChatTab){chatTabImageUrl=customImage(chatSettings.chatTab.avatarChatTab);}else if(device==1&&!activeChat&&chatSettings&&chatSettings.chatTab&&chatSettings.chatTab.useAvatar&&chatSettings.chatTab.useAvatar.indexOf("desktop")!=-1&&chatSettings.chatTab.avatarChatTab){chatTabImageUrl=customImage(chatSettings.chatTab.avatarChatTab);}else if(device>=2&&activeChat&&chatSettings&&chatSettings.chatTab&&chatSettings.chatTab.useAvatar&&chatSettings.chatTab.useAvatar.indexOf("mobile_active")!=-1&&chatSettings.chatTab.avatarChatTab){chatTabImageUrl=customImage(chatSettings.chatTab.avatarChatTab);}else if(device>=2&&!activeChat&&chatSettings&&chatSettings.chatTab&&chatSettings.chatTab.useAvatar&&chatSettings.chatTab.useAvatar.indexOf("mobile")!=-1&&chatSettings.chatTab.avatarChatTab){chatTabImageUrl=customImage(chatSettings.chatTab.avatarChatTab);}else if(device>=2&&activeChat&&chatSettings&&chatSettings.chatTab&&typeof(chatSettings.chatTab.activeChatTabMobile)!="undefined"&&chatSettings.chatTab.activeChatTabMobile!=""){chatTabImageUrl=customImage(chatSettings.chatTab.activeChatTabMobile);}else if(device>=2&&!activeChat&&chatSettings&&chatSettings.chatTab&&typeof(chatSettings.chatTab.onlineChatTabMobile)!="undefined"&&chatSettings.chatTab.onlineChatTabMobile!=""){chatTabImageUrl=customImage(chatSettings.chatTab.onlineChatTabMobile);}else if(device==1&&typeof insideChatPane!="undefined"&&insideChatPane.activeChat&&chatSettings&&chatSettings.chatTab&&typeof(chatSettings.chatTab.activeChatTab)!="undefined"&&chatSettings.chatTab.activeChatTab!=""){chatTabImageUrl=customImage(chatSettings.chatTab.activeChatTab);}else if(device==1&&chatSettings&&chatSettings.chatTab&&typeof(chatSettings.chatTab.onlineChatTab)!="undefined"&&chatSettings.chatTab.onlineChatTab!=""&&typeof chatSettings.chatTab.onlineChatTab!="object"){chatTabImageUrl=customImage(chatSettings.chatTab.onlineChatTab);}else{var headerIcons=$("#inside_liveChatTab .chatHeaderIcons");var notifIcon=$("#inside_liveChatTab .inside_chatNotification");$("#inside_liveChatTab").html(defaultOnlineSVGs[getLanguageValue(chatSettings.chatTab.onlineChatTabDefault)]);$("#inside_liveChatTab").width($("#inside_liveChatTab svg").width());scaleChatTab();if(headerIcons){$("#inside_liveChatTab").append(headerIcons);}
if(notifIcon){$("#inside_liveChatTab").append(notifIcon);}
insideFrontInterface.positionTabs();}
updateChatTabImage(chatTabImageUrl);}
if(prevTabImage==$("#inside_liveChatTab .inside_chatTabImage").attr("src")){setTabAutohide();}}}else{$("#inside_liveChatTab .inside_chatTabImage").attr("src",$.inside.front.imageurl+"livechaticon.png");}
hideChatTab=insideFrontInterface.chat.isTabHiddenOnThisDevice();if(typeof(settings)!="undefined"&&settings!=null&&typeof(settings.hideChatTab)!="undefined"&&settings.hideChatTab){if(hideChatTab){$("#inside_liveChatTab").hide();}else{$("#inside_liveChatTab").css("opacity",1).show();}}else{if(!hideChatTab&&tabPosition!="bottomright"||(tabPosition=="bottomright"&&$(".inside-notification:visible").length==0)){$("#inside_liveChatTab").show().css("opacity",1);}}
if(typeof(settings)!="undefined"&&settings!=null&&typeof settings.hideChatTabOnDevices!="undefined"&&settings.hideChatTabOnDevices!=null){hideChatTab=false;if(settings.hideChatTab==true&&settings.hideChatTabOnDevices.indexOf(device.toString())!=-1){hideChatTab=true;}}
if(typeof(settings)!="undefined"&&settings!=null&&typeof(settings.showTabForActive)!="undefined"&&settings.showTabForActive==true){showTabForActive=true;if(insideFrontInterface.currentChatId>0){if(usingChatPanev2&&typeof insideChatPane.isOpen!="undefined"&&!insideChatPane.isOpen()){$("#inside_liveChatTab").show();insideFrontInterface.positionTabs();}else if(!insideFrontInterface.chat.chatPaneOpen){if($(".inside-notification:visible").length==0){$("#inside_liveChatTab").show();insideFrontInterface.positionTabs();}}
checkMessageReceived=false;}
if(typeof insideLegacyChat!="undefined"&&insideLegacyChat.messageReceived&&!checkMessageReceived&&$(".inside_chatPane, #inside_chatPane_custom").is(":visible")&&typeof(t)!="undefined"&&!t){$("#inside_liveChatTab").hide();checkMessageReceived=false;}}
if(hideChatTab&&settings.showPaneForActive==true){showPaneForActive=true;showTabForActive=false;}
if(hideChatTab&&insideFrontInterface.currentChatId>0&&device==2&&insideFrontInterface.chat.num){$("#inside_liveChatTab").show();}
if($("#inside_liveChatTab img").length>0){$("#inside_liveChatTab img").css("width","auto");$("#inside_liveChatTab").css("width","auto");}
if($("#inside_liveChatTab").hasClass('usingChatHeader')){$("#inside_liveChatTab").outerWidth(settings.width||'');}
scaleChatTab();if(settings.autohideTabs==true){}else{insideFrontInterface.positionTabs();}
if(usingChatPanev2&&typeof insideChatPane!="undefined"&&typeof insideChatPane.isOpen!="undefined"&&insideChatPane.isOpen()){$("#inside_liveChatTab").hide();}else if(insideFrontInterface.chat.chatPaneOpen){$("#inside_liveChatTab").hide();}
if(usingChatPanev2&&chatSettings){if(chatSettings.chatTab.shadowOnTab==true||chatSettings.chatTab.shadowOnTab=="true"){$("#inside_liveChatTab").addClass("insideDropShadow");}else{$("#inside_liveChatTab").removeClass("insideDropShadow");}}
$("#inside_tabs").css('display','block');if(insideFrontInterface.getAvailableAssistants().length==0&&activeChat!==true){$("#inside_liveChatTab").hide();insideFrontInterface.positionTabs();}}
function updateChatTabImage(chatTabImageUrl){if(!chatTabImageUrl){return;}
$("#inside_liveChatTab svg").remove();if($("#inside_liveChatTab .inside_chatTabImage").length===0){addTabContents();}
const chatTabElement=$("#inside_liveChatTab .inside_chatTabImage");if(chatTabElement.attr("src")!==chatTabImageUrl){chatTabElement.attr("src",chatTabImageUrl);}}
function getLanguageValue(ob){if(typeof(ob)=="undefined"||!ob){return "";}
if(typeof ob=="string"){return ob;}else if(typeof ob[langCode]!="undefined"){return ob[langCode]||ob["en"]||"";}else if(langCode.indexOf("-")!==-1&&typeof ob[langCode.split("-")[0]]=="string"){return ob[langCode.split("-")[0]];}else if(Object.keys(ob).length>0){for(var property in ob){if(property==="type")continue;return ob[property];}
return "";}else{return "";}}
insideFrontInterface.chat.isTabHiddenOnThisDevice=isTabHiddenOnThisDevice;function isTabHiddenOnThisDevice(){device=$.inside.front.device;hideChatTab=false;if(usingChatPanev2&&chatSettings&&chatSettings.chatTab.hideChatTab){if(chatSettings.chatTab.hideChatTabOnDevices.indexOf(device.toString())!=-1){hideChatTab=true;}}else if($.inside.front.settings.hideChatTab==true&&typeof $.inside.front.settings.hideChatTabOnDevices!="undefined"&&$.inside.front.settings.hideChatTabOnDevices!=null){if($.inside.front.settings.hideChatTabOnDevices.indexOf(device.toString())!=-1){hideChatTab=true;}}else{if($.inside.front.settings.hideChatTab==true){hideChatTab=true;}}
return hideChatTab;}
insideFrontInterface.chat.isOfflineTabHiddenOnThisDevice=isOfflineTabHiddenOnThisDevice;function isOfflineTabHiddenOnThisDevice(){device=$.inside.front.device;if(typeof settings.offlineChat.hideOfflineChatTabOnDevices!="undefined"&&settings.offlineChat.hideOfflineChatTabOnDevices!=null){if(settings.offlineChat.hideOfflineChatTabOnDevices.indexOf(device.toString())!=-1){return true;}}else{if(settings.offlineChat.hideOfflineChatTab==true){return true;}}
return false;}
function addCloseToChatTab(tab){if(typeof tab=="undefined"){tab=$("#inside_liveChatTab");}
$(tab).find(".chatHeaderIcons").remove();$(tab).append("<div class='chatHeaderIcons'></div>");var headerIcons=$(tab).find(".chatHeaderIcons");var customCSS="";var expandIcon='<svg xmlns="http://www.w3.org/2000/svg" width="15" height="9" viewBox="0 0 15 9"><path fill="currentColor" fill-rule="nonzero" d="M5.996 1.5L0 7.494l1.5 1.5 5.995-5.997 5.997 5.996 1.499-1.499L7.495 0 5.996 1.5z"/></svg>';var closeIcon='<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15"><path fill="currentColor" fill-rule="nonzero" d="M6.085 7.5L0 1.415 1.415 0 7.5 6.085 13.585 0 15 1.415 8.915 7.5 15 13.585 13.585 15 7.5 8.915 1.415 15 0 13.585 6.085 7.5z"/></svg>';if(settings.expandChatTabIcon&&settings.expandChatTabIcon.length>0){expandIcon="<img src='"+(customImage(settings.expandChatTabIcon))+"' />";}
if(!usingChatPanev2){headerIcons.append("<div "+getAriaButtonAttribute(translate("Open"))+" class='inside_icon_image_holder icon-expand-image' title-data='"+translate("Open")+"'>"+expandIcon+"</div>");}
if(!usingChatPanev2&&settings.closeButtonImage&&settings.closeButtonImage.length>0){closeIcon="<img src='"+(customImage(settings.closeButtonImage))+"' />";}
setTimeout(function(){headerIcons.find(".inside_closeCross").remove();headerIcons.append("<div "+getAriaButtonAttribute(translate("Close"))+" class='inside_icon_image_holder inside_closeCross' title-data='"+translate("Close Chat Tab")+"'>"+closeIcon+"</div>");if(usingChatPanev2&&headerIcons.length>0){headerIcons.addClass("chatV2");}
if(tab.attr("id")=="inside_liveChatTab"){$(tab).find(".inside_closeCross").click(closeChatTab);}else{$(tab).find(".inside_closeCross").click(function(){$(tab).hide();windowScale();});}},0);setupTitleOnHover(headerIcons);$.inside.front.addStyleString(customCSS,"InsideChatTabCloseButton");}
function closeChatTab(e){e.stopPropagation();if(insideFrontInterface&&insideFrontInterface.chat&&insideFrontInterface.chat.doCloseAndHideChat){insideFrontInterface.chat.doCloseAndHideChat();}
$("#inside_liveChatTab").hide();_insideGraph.doEvent("tabclosed");windowScale();}
insideFrontInterface.chat.setupTitleOnHover=setupTitleOnHover;function setupTitleOnHover(selector){$(selector).find('[title-data]').hover(function(){$(this).attr('title',$(this).attr('title-data'));},function(){$(this).removeAttr('title');});}
function addChatPaneHeaderToTab(){if($("#inside_liveChatTab.usingChatHeader:visible").length>0){return;}
if(usingChatPanev2)return;$("#inside_liveChatTab").empty();if(usingChatPanev2)return;$("#inside_liveChatTab").append("<div class='chatTab_header'><div class='chatTab_siteLogo'></div></div>");if(typeof(settings.siteLogo)!="undefined"&&settings.siteLogo!=""&&settings.siteLogo!=null){$(".chatTab_siteLogo").html("<img src='"+_insideCDN+settings.siteLogo+"' />");}
if(typeof(settings.headerColour)!="undefined"){$("#inside_liveChatTab").css("background",settings.headerColour);}
if(typeof(settings.chatBorderColour)!="undefined"){$("#inside_liveChatTab").css("border","1px solid "+settings.chatBorderColour);}
if(typeof(settings.width)!="undefined"){$("#inside_liveChatTab").css("width",settings.width+"px");}
$("#inside_liveChatTab").addClass("usingChatHeader").addClass("noAutoHide");insideFrontInterface.setTabPosition();$("#inside_tabs").css('display','block');if(tabPosition.indexOf("bottom")!=-1){$("#inside_liveChatTab").appendTo("#inside_tabs");}
if(insideFrontInterface.chat&&insideFrontInterface.chat.setupChatPane){insideFrontInterface.chat.setupChatPane();}
if(insideFrontInterface.getAvailableAssistants().length==0){if(typeof insideOfflineForm!="undefined")insideOfflineForm.setOfflineFormStyles();if(settings.offlineChat&&settings.offlineChat.headerImage){$(".chatTab_siteLogo img").attr("src",customImage(settings.offlineChat.headerImage));}}
insideFrontInterface.positionTabs();}
insideFrontInterface.chat.setOfflineChatTab=setOfflineChatTab;function setOfflineChatTab(){$("#inside_holder").addClass("offline");device=$.inside.front.device;chatSettings=_insideGraph.jQuery.inside.front.settings.chatSettings||_insideGraph.jQuery.inside.front.settings;if(chatSettings&&chatSettings.version=="2"){usingChatPanev2=true;if(typeof insideChatPane!="undefined"&&insideChatPane.showHeaderForTab)return;if(chatSettings.offline.enabled!=true&&!insideFrontInterface.chatInProgress&&!activeChat){$("#inside_liveChatTab").hide();return;}}
if(!checkPrivacyOptIn()){$("#inside_liveChatTab").hide();return;}
if(settings&&settings.useMinimiseButton===true){useMinimiseButton=true;}
if(!useMinimiseButton){try{if(hasSessionStorage&&sessionStorage.getItem("insideChatClosed")==="True"){return;}}catch(e){}}
$(".inside-notification").remove();$("#inside_liveChatTab .chatHeaderIcons").remove();chatTabMode="offline";insideFrontInterface.chatTabMode=chatTabMode;$("#inside_liveChatTab").removeClass("inside_chat_online").addClass("inside_chat_offline");var hideOfflineChatTab=(settings.offlineChat&&settings.offlineChat.hideOfflineChatTab)&&isOfflineTabHiddenOnThisDevice();if(hideOfflineChatTab){$("#inside_liveChatTab").hide();}
if(activeChat==true&&settings.showTabForActive){$("#inside_liveChatTab").show().css("opacity","1");}
if(!usingChatPanev2&&activeChat==false&&$(".inside_dept_selector.selected").length==0&&typeof insideWebApp=="undefined"&&!$(".inside_chatPane").hasClass("offline")&&!$(".inside_chatPane").hasClass("clicktocall")){if(typeof insideFrontInterface.chat.closeChatPane!="undefined")
insideFrontInterface.chat.closeChatPane();if(!hideOfflineChatTab&&settings&&settings.offlineChat&&settings.offlineChat.enabled){$("#inside_liveChatTab").show().css("opacity","1");}}
if(usingChatPanev2){var chatPaneIsOpen=(typeof insideChatPane!="undefined"&&insideChatPane.isOpen&&insideChatPane.isOpen());if(typeof chatSettings=="undefined"||typeof chatSettings.chatTab=="undefined"||chatPaneIsOpen){return;}
if($("#inside_liveChatTab").length==0){addChatTab();}else if($("#inside_liveChatTab .inside_chatTabImage").length==0){addTabContents();}
if(typeof chatSettings.chatTab.offlineDesktopTab=='undefined'){chatSettings.chatTab.offlineDesktopTab='';}
if(typeof chatSettings.chatTab.offlineMobileTab=='undefined'){chatSettings.chatTab.offlineMobileTab='';}
var chatTabImageUrl;if(device===1&&chatSettings.chatTab.offlineDesktopTab!=""){chatTabImageUrl=customImage(chatSettings.chatTab.offlineDesktopTab);}else if(chatSettings.chatTab.offlineMobileTab!=""){chatTabImageUrl=customImage(chatSettings.chatTab.offlineMobileTab);}
if(device==1&&chatSettings&&chatSettings.chatTab&&chatSettings.chatTab.useAvatar&&chatSettings.chatTab.useAvatar.indexOf("desktop_offline")!=-1&&chatSettings.chatTab.avatarChatTab){chatTabImageUrl=customImage(chatSettings.chatTab.avatarChatTab);}else if(device>=2&&chatSettings&&chatSettings.chatTab&&chatSettings.chatTab.useAvatar&&chatSettings.chatTab.useAvatar.indexOf("mobile_offline")!=-1&&chatSettings.chatTab.avatarChatTab){chatTabImageUrl=customImage(chatSettings.chatTab.avatarChatTab);}
updateChatTabImage(chatTabImageUrl);if(chatSettings.offline.hideTab!=true){$("#inside_liveChatTab").css("width",$("#inside_liveChatTab").find("img, svg").width()+"px").css("opacity",1).show();}
if(chatSettings.chatTab.shadowOnOfflineTab==true||chatSettings.chatTab.shadowOnOfflineTab=="true"){$("#inside_liveChatTab").addClass("insideDropShadow");}else{$("#inside_liveChatTab").removeClass("insideDropShadow");}
if(chatSettings.chatTab.offlineChatTabDefault&&chatSettings.chatTab.offlineChatTabDefault!=""&&((device!=2&&chatSettings.chatTab.offlineDesktopTab=="")||(device==2&&chatSettings.chatTab.offlineMobileTab==""))){if(defaultOfflineSVGs){$("#inside_liveChatTab").html(defaultOfflineSVGs[chatSettings.chatTab.offlineChatTabDefault]);$("#inside_liveChatTab").width($("#inside_liveChatTab svg").width());scaleChatTab();insideFrontInterface.positionTabs();}else{return;}}
if(chatSettings.offline.hideTab==true&&chatSettings.offline.hideOnDevices.indexOf(device.toString())!=-1){$("#inside_liveChatTab").hide();}else{$("#inside_liveChatTab").show();}
if(chatSettings.chatTab.showCloseOnTab){if(device==1&&chatSettings.chatTab.showCloseOnTab.indexOf("desktop_offline")!=-1){addCloseToChatTab();}else if(device==2&&chatSettings.chatTab.showCloseOnTab.indexOf("mobile_offline")!=-1){addCloseToChatTab();}}
scaleChatTab();return;}
if(!usingChatPanev2){if(!usingChatPanev2&&settings!=null&&settings&&settings.offlineChat&&settings.offlineChat.enabled===true&&!hideOfflineChatTab||(activeChat===true&&settings&&settings.showTabForActive)){if($("#inside_liveChatTab").length==0){addChatTab();}
if(!usingChatPanev2&&settings.showChatPaneHeaderAsChatTab&&showChatPaneHeaderForDevice(true)){addChatPaneHeaderToTab();addCloseToChatTab();}else{$("#inside_liveChatTab").removeClass("usingChatHeader").removeClass("noAutoHide");insideFrontInterface.setTabPosition();if(!$(".inside_chatPane, #inside_chatPane_custom, .inside-notification, #insideChatFrame.notificationMode").is(":visible")){$("#inside_liveChatTab").show();}
if(hideOfflineChatTab){$("#inside_liveChatTab").hide();}
if(activeChat==true&&settings.showTabForActive&&(!settings.offlineChat||!settings.offlineChat.hideOfflineChatTab)){$("#inside_liveChatTab").show().css("opacity","1");}
var prevTabImage=$("#inside_liveChatTab .inside_chatTabImage").attr("src");var chatTabImageUrl;if(device===1){if(typeof(settings.offlineChat.chatTab)!="undefined"&&settings.offlineChat.chatTab!=null&&settings.offlineChat.chatTab!=""){chatTabImageUrl=customImage("/"+settings.offlineChat.chatTab);}else{if(tabPosition=="topright"||tabPosition=="right"||tabPosition=="bottomright"){chatTabImageUrl=imageurl+"livechat_offline.png";}else{chatTabImageUrl=imageurl+"livechat_offline_left.png";}}}else{if(typeof(settings.offlineChat.chatTabMobile)!="undefined"&&settings.offlineChat.chatTabMobile!=null&&settings.offlineChat.chatTabMobile!=""){chatTabImageUrl=customImage("/"+settings.offlineChat.chatTabMobile);}else{chatTabImageUrl=imageurl+"livechaticon_mobile.png";}}
updateChatTabImage(chatTabImageUrl);if(prevTabImage==$("#inside_liveChatTab .inside_chatTabImage").attr("src")){setTabAutohide();}}}else{if(insideFrontInterface.chatInProgress){$(".inside-notification").remove();setOnlineChatTab();}
if(activeChat==false){$("#inside_holder #inside_liveChatTab").hide();}}}
if(!hideOfflineChatTab&&settings&&settings.offlineChat&&settings.offlineChat.enabled){$("#inside_liveChatTab img").css("width","auto");$("#inside_liveChatTab").css("width","auto").css("opacity",1).show();if($("#inside_liveChatTab").hasClass('usingChatHeader')){$("#inside_liveChatTab").outerWidth(settings.width||'');}
scaleChatTab();setTimeout(scaleChatTab,0);}
if(!settings.autohideTabs){insideFrontInterface.positionTabs();}
if(activeChat&&settings.autohideTabs==true){setTimeout(function(){$.inside.front.autohideTabs(0);},1);setTimeout(function(){$.inside.front.autohideTabs(0);},250);}
if(chatTabMode=="offline"&&insideFrontInterface.chat.chatPaneOpen){$("#inside_liveChatTab").hide();}}
function addTabContents(){$("#inside_liveChatTab").html("<img class='inside_chatTabImage' src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==' alt='"+translate("Live chat icon, click to open the live chat pane.")+"' />");try{if($("img.inside_chatTabImage").length>0){$("img.inside_chatTabImage")[0].addEventListener("load",onChatTabImageLoad);}}catch(e){}}
insideFrontInterface.addChatTab=addChatTab;function addChatTab(){if(settings&&settings.useMinimiseButton===true){useMinimiseButton=true;}
if(useMinimiseButton){try{if(hasSessionStorage&&sessionStorage.getItem("insideChatClosed")==="True"){return;}}catch(e){}}
if($("#inside_tabs").length==0){$.inside.front.showTabs();}
var addTab=true;if(hideChatTab&&settings.showTabForActive!=true){addTab=false;}
if(hideChatTab&&settings.showTabForActive==true){addTab=true;}
if(settings.offlineChat&&settings.offlineChat.enabled&&!settings.offlineChat.hideOfflineChatTab&&!isOfflineTabHiddenOnThisDevice()){addTab=true;}
var offlineV2Settings=chatSettings.offline||{};var offlineV2Hidden=offlineV2Settings.hideTab&&offlineV2Settings.hideOnDevices&&offlineV2Settings.hideOnDevices.indexOf(device.toString())!=-1;if(offlineV2Settings.enabled&&!offlineV2Hidden){addTab=true;}
if(addTab){$("#inside_tabs").hide();$("#inside_tabs").prepend("<div id='inside_liveChatTab' "+getAriaButtonAttribute(translate("Chat"))+"></div>");addTabContents();}
$("#inside_liveChatTab").hide();$("#inside_liveChatTab").on("click enter",chatTabClick);$("#inside_liveChatTab").on('keypress',function(e){if(e.which===13){$(this).trigger('enter');}});const liveChatTab=document.getElementById('inside_liveChatTab');if(liveChatTab){liveChatTab.addEventListener('click',function(){if(typeof Notification!=='undefined'&&Notification.permission!=='granted'){Notification.requestPermission();}});}
try{if($("img.inside_chatTabImage").length>0){$("img.inside_chatTabImage")[0].addEventListener("load",onChatTabImageLoad);}}catch(e){}
if(insideFrontInterface.chatPaneVersion()==1&&settings!=null&&typeof(settings.tabCSSMargins)!="undefined"){var marginArr=settings.tabCSSMargins.split(" ");if(marginArr[0]){$("#inside_tabs").css("margin-bottom",+(-parseInt(marginArr[0]))+"px");}
if(marginArr[1]){$("#inside_tabs").css("margin-right",marginArr[1]);}
if(marginArr[2]){$("#inside_tabs").css("margin-top",+(-parseInt(marginArr[2]))+"px");}
if(marginArr[3]){$("#inside_tabs").css("margin-left",marginArr[3]);}}else{if(usingChatPanev2){setTabOffsetPosition();}}
var touchPosX;var moveXpos;if(device==2){var mobileTabPosition=chatSettings.chatTab?chatSettings.chatTab.mobileTabPosition:"";$("#inside_liveChatTab").on("touchstart",function(e){touchPosX=(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0?e.originalEvent.touches[0].pageX:e.pageX);moveXpos=null;});$("#inside_liveChatTab").on("touchmove",function(e){moveXpos=(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0?e.originalEvent.touches[0].pageX:e.pageX);});$("#inside_liveChatTab").on("touchend",function(e){if(moveXpos!=null&&$("#inside_liveChatTab").attr("tabHidden")!=="true"){if(Math.abs(touchPosX-moveXpos)>20){if(["3","6","9"].indexOf(mobileTabPosition)!=-1&&touchPosX<moveXpos){$.inside.front.autohideTabs();}else if(["1","4","7"].indexOf(mobileTabPosition)!=-1&&touchPosX<moveXpos){$.inside.front.autohideTabs();}}}});}
if($.inside.front.settingsData.chatlinkvisitor&&$.inside.front.settingsData.chatlinkvisitor.autoOpened!=true){insideFrontInterface.openChatPane();$.inside.front.settingsData.chatlinkvisitor.autoOpened=true;}
if(window.location.search.indexOf("inside_openchat")!=-1){insideFrontInterface.openChatPane();}}
insideFrontInterface.chat.setTabOffsetPosition=setTabOffsetPosition;function setTabOffsetPosition(){if(!usingChatPanev2)return;if(typeof chatSettings.chatTab==='undefined'||(typeof chatSettings.chatTab.offset==='undefined'&&device===1)||$.isEmptyObject(chatSettings.chatTab.offset)||(typeof chatSettings.chatTab.mobileOffset==='undefined'&&device>1))
return;var tabSideOffset=chatSettings.chatTab.offset.side;if(device>=2){tabSideOffset=chatSettings.chatTab.mobileOffset.side;}
if(tabSideOffset!=""){try{var inside_tabs=document.querySelector("#inside_tabs");$("#inside_tabs").stop();var tabPosition=chatSettings.chatTab.position||"6";if(device>=2){tabPosition=chatSettings.chatTab.mobileTabPosition||"9";}
if(!tabPosition||tabPosition=="3"||tabPosition=="6"||tabPosition=="9"){inside_tabs.style.right=tabSideOffset+"px";}else{inside_tabs.style.right="";inside_tabs.style.left=tabSideOffset+"px";}}catch(e){}}
var tabVerticalOffset=chatSettings.chatTab.offset.vertical;if(device>=2){tabVerticalOffset=chatSettings.chatTab.mobileOffset.vertical;}
if(tabVerticalOffset!=""){try{var inside_tabs=document.querySelector("#inside_tabs")
var bottomOrMiddle=["4","6","7","9"];if(bottomOrMiddle.indexOf(chatSettings.chatTab[device===1?'position':'mobileTabPosition'])!=-1){inside_tabs.style.marginBottom=parseInt(tabVerticalOffset)+"px";}else{inside_tabs.style.marginBottom=-parseInt(tabVerticalOffset)+"px";}}catch(e){}}}
function j2cTabClick(){if(device==2&&$("#inside_joinTheCallChatTab").attr("autohide")){insideFrontInterface.hoverShowTabs($("#inside_joinTheCallChatTab"));return;}}
insideFrontInterface.chat.chatTabClick=chatTabClick;function chatTabClick(force){insideFrontInterface.chat.num=0;if(device>1&&force!==true&&$("#inside_liveChatTab").attr("tabHidden")==="true"){insideFrontInterface.hoverShowTabs($("#inside_liveChatTab"));return;}
if(chatSettings&&chatSettings.version=="2"&&typeof insideChatPane=="undefined"){console.log("--- tabs add loading class");$('#inside_holder').addClass('loading tabClicked');}
$.inside.front.loadInsideChat(function(){if(insideFrontInterface.chat.preventTabClick){insideFrontInterface.chat.preventTabClick=false;return;}
if(usingChatPanev2||insideFrontInterface.chatPaneVersion()==2){if(typeof insideChatPane=="undefined"||typeof insideChatPane.open=="undefined"){if(typeof insideFrontInterface.chatPaneFrameReadyCallbacks=="undefined"){insideFrontInterface.chatPaneFrameReadyCallbacks=[];}
insideFrontInterface.chatPaneFrameReadyCallbacks.push(function(){chatTabClick(true)});return;}
try{if(!insideChatPane.isOpen()){insideChatPane.frame.contentWindow.insideVideos.backToChat(true);}}catch(e){}
insideChatPane.open();if(window!=window.top){window.parent.postMessage({'func':'openChat','message':'Message text from iframe.'},"*");}
return;}
if(typeof insideLegacyChat!="undefined"){insideLegacyChat.chatTabClick(force);}});try{if(force!==true){var chatSettingsId=chatSettings&&chatSettings.chatSettingsId;var tabValue=insideFrontInterface.getAvailableAssistants().length?'Online':'Offline';$.inside.ga({category:"Inside : Chat Tab",action:"Clicked",value:chatSettingsId,label:tabValue});_insideGraph.doEvent("tabclicked");}}catch(e){console.log(e);}}
function setTabAutohide(){if($.inside.front.settings.autohideTabs){if(device==2&&$.inside.front.settings.autohideOnMobile==false){}else if($.inside.front.settings.autoHideTabOnLoad==true||$("#inside_liveChatTab").attr("tabHidden")=="true"){$("#inside_liveChatTab").attr("autohide",$.inside.front.settings.autoHideAmount||20);$.inside.front.autohideTabs(0);}else{$("#inside_liveChatTab").attr("autohide",$.inside.front.settings.autoHideAmount||20);insideFrontInterface.positionTabs();setTimeout(function(){$.inside.front.autohideTabs(0);},1000);}}else{insideFrontInterface.positionTabs();}}
insideFrontInterface.chat.onChatTabImageLoad=onChatTabImageLoad;function onChatTabImageLoad(){if(!settings.autohideTabs){setTimeout(function(){insideFrontInterface.positionTabs();},0);}
$("#inside_tabs").css('display','block');try{var img=new Image();img.onload=function(){if(this.width==1)scaleChatTab();else scaleChatTab(this.width,this.height);}
img.src=this.src;}catch(e){scaleChatTab();}
setTabAutohide();$.inside.front.windowScale();_insideGraph.doEvent("chatTabReady");}
insideFrontInterface.chat.onJoinTheCallChatTabImageLoad=onJoinTheCallChatTabImageLoad;function onJoinTheCallChatTabImageLoad(){var hideAmount=23;if(insideFrontInterface.chat.joinTheCallSettings.autohideAmount){hideAmount=parseInt(insideFrontInterface.chat.joinTheCallSettings.autohideAmount);$("#inside_joinTheCallChatTab").attr("autohide",hideAmount);}else{hideAmount=23;if(settings.autohideTabs==true){$("#inside_joinTheCallChatTab").attr("autohide",hideAmount);}}
setTimeout(function(){$("#inside_tabs").css('display','block');insideFrontInterface.windowScale();insideFrontInterface.positionTabs();if(insideFrontInterface.chat.joinTheCallSettings.autohideAmount&&settings.autohideTabs!=true){$.inside.front.autohideTab($("#inside_joinTheCallChatTab"));}},500);if(insideFrontInterface.chat.joinTheCallSettings.tabSize==""&&!insideFrontInterface.chat.joinTheCallSettings.tabImage){$("#inside_joinTheCallChatTab, #inside_joinTheCallImage").css({width:181,height:115});$("#inside_joinTheCallPasscode").css("padding-left",23);}else{if(insideFrontInterface.chat.joinTheCallSettings.tabSize){var size=insideFrontInterface.chat.joinTheCallSettings.tabSize.split(",");$("#inside_joinTheCallChatTab, #inside_joinTheCallImage").css("width",parseInt(size[0])||this.width);$("#inside_joinTheCallChatTab, #inside_joinTheCallImage").css("height",parseInt(size[1])||this.height);}else{$("#inside_joinTheCallChatTab").css("width",this.width);$("#inside_joinTheCallChatTab").css("height",this.height);}
$("#inside_joinTheCallPasscode").css("padding-left",hideAmount);}}
insideFrontInterface.scaleChatTab=scaleChatTab;function scaleChatTab(width,height){settings=$.inside.front.settings;if(!$("#inside_liveChatTab").is(":visible")){return;}
if($("#inside_liveChatTab img").length==0&&$("#inside_liveChatTab svg").length==0)return;if($("#inside_liveChatTab svg").length==0){$("#inside_liveChatTab").css("width","");}
if($("#inside_liveChatTab").hasClass("usingChatHeader")){$("#inside_liveChatTab.usingChatHeader").css("width",settings.width+"px");}else{var w;if($("#inside_liveChatTab img").length>0){w=width||$("#inside_liveChatTab img")[0].naturalWidth||$("#inside_liveChatTab img")[0].width||100;}
if($("#inside_liveChatTab > svg").length>0){var attrWidth=parseInt($("#inside_liveChatTab > svg")[0].getAttribute("width"));if(width<=1&&attrWidth>1){w=attrWidth;}else{w=width||$("#inside_liveChatTab > svg")[0].naturalWidth||attrWidth||100;}}
var pr=1;try{pr=window.devicePixelRatio;}catch(e){}
if(device>1&&pr>1){var viewport=$.inside.front.getViewPortSize();if(usingChatPanev2&&typeof insideFrontInterface.chatSettings!="undefined"&&typeof insideFrontInterface.chatSettings.chatTab.mobileTabWidth=="undefined"){}else{if(settings!=null&&typeof(settings.mobileTabWidth)!="undefined"&&settings.mobileTabWidth!=""){var widthType=typeof settings.mobileTabWidthType!='undefined'?settings.mobileTabWidthType:'%';w=widthType=='%'?(viewport.width*settings.mobileTabWidth*0.01):settings.mobileTabWidth;}else{if(w>viewport.width){w=viewport.width;}
if(w<viewport.width*0.1){w=viewport.width*0.1;}}}
$("#inside_liveChatTab").width(w);$("#inside_liveChatTab img, #inside_liveChatTab > svg").css("width","100%");$("#inside_liveChatTab > svg").css("height","100%");}else{$("#inside_liveChatTab").width(w);}
if($("#inside_liveChatTab img").height()||height){$("#inside_liveChatTab img").attr({'width':w,'height':height||$("#inside_liveChatTab img").height()});}
if(typeof insideChatPane!=='undefined'&&insideChatPane.frame){insideChatPane.frame.contentDocument.querySelector(':root').style.setProperty("--chatTabWidth",w+'px');}}
$.inside.front.windowScale();insideFrontInterface.positionTabs();}
insideFrontInterface.setChatTabPosition=setChatTabPosition;function setChatTabPosition(pos){tabPosition=pos;insideFrontInterface.tabPosition=tabPosition;if(settings!=null&&(typeof(settings.customTabImage)=="undefined"||settings.customTabImage=="")){if(pos=="left"||pos=="middleleft"||pos=="bottomleft"||pos=="topleft"){$(".inside_chatPane, #inside_chatPane_custom").css("left","0px").css("right","auto");$("#inside_liveChatTab .inside_chatTabImage").attr("src",$.inside.front.imageurl+"livechaticon_left.png");}}}
insideFrontInterface.chat.clearUnreadChatNotifications=clearUnreadChatNotifications;function clearUnreadChatNotifications(){$("#inside_liveChatTab .inside_chatNotification").remove();}
insideFrontInterface.chat.showChatTabNotification=showChatNotification;function showChatNotification(target,setUnreadMessages,message,getLastMessageFromOperator){if(typeof(target)=="undefined"||target==null){target="#inside_liveChatTab";}
var $target=$(target);var chatNotif;var num=0;if(typeof setUnreadMessages==="function"){num=setUnreadMessages();}
if(num==0){$target.find(".inside_chatNotification").remove();return;}
if($target.find(".inside_chatNotification").length>0){chatNotif=$target.find(".inside_chatNotification").text(num);}else{chatNotif=$("<div class='inside_chatNotification'>"+num+"</div>").appendTo(target);}
if(usingChatPanev2&&chatSettings.chatPane.notifications.numberBgColor){chatNotif.css("background-color",chatSettings.chatPane.notifications.numberBgColor);}
chatNotif.addClass("notransition");chatNotif.css("transform","scale(0)");setTimeout(function(){chatNotif.removeClass("notransition");chatNotif.css("transform","scale(1)");},0);insideFrontInterface.chat.num=num;var msg=$.extend({},((typeof getLastMessageFromOperator=='function'&&getLastMessageFromOperator())||message||null));if(msg&&msg.text){if(msg.contentType=="text/inside.legacy"||msg.text.indexOf("&lt;")!=-1){msg.text=$("<span></span>").html(msg.text).text();}}
msg.text=htmlToPlainText(msg.text);_insideGraph.doEvent("chatnotification",{message:msg,unreadMessageCount:num});insideFrontInterface.chat.setOnlineChatTab();}
function htmlToPlainText(str){var p=document.createElement("p");p.innerHTML=str;return p.innerText;}});;var insideAPI={};(function(window,$){$.xhrPool=[];$.xhrPool.abortAll=function(){$(this).each(function(idx,jqXHR){jqXHR.abort();});$.xhrPool=[];};$.ajaxSetup({beforeSend:function(jqXHR){$.xhrPool.push(jqXHR);},complete:function(jqXHR){var index=$.xhrPool.indexOf(jqXHR);if(index>-1){$.xhrPool.splice(index,1);}}});function call(callName,args,success,error,async,type,dataType,contentType){if(typeof(async)=="undefined"){async=true;}
if(typeof(type)=="undefined"){type="POST";}
if(typeof(dataType)=="undefined"){dataType="json";}
if(typeof(contentType)=="undefined"){contentType="application/json";}
var urlVariables="";if(typeof(_insideGraph)!="undefined"){var accesskey=_insideGraph.current.account+":"+_insideGraph.pid+":"+_insideGraph.accessKey;var accesscheck=_insideGraph.accessCheck;args.accesskey=accesskey;args.accesscheck=accesscheck;var ob={};ob.accesskey=accesskey;ob.accesscheck=accesscheck;urlVariables=$.param(ob);}
var urlpath;if(typeof(_insideSocialUrl)!="undefined"){urlpath=_insideSocialUrl;}else{urlpath=_insideLive;}
var _preIE10=(function(){if(navigator.appVersion.indexOf("MSIE")!=-1){var v=parseFloat(navigator.appVersion.split("MSIE")[1]);if(v<10)
return true;}
return false;})();if(_preIE10&&'XDomainRequest'in window&&window.XDomainRequest!==null){var xdr=new XDomainRequest();xdr.open('post',urlpath+"api/api_call.aspx?call="+callName+((urlVariables!="")?"&"+urlVariables:""));xdr.onload=function(){var dom=new ActiveXObject('Microsoft.XMLDOM');var response=$.parseJSON(xdr.responseText);dom.async=async;if(response==null||typeof(response)=='undefined'){response=$.parseJSON(data.firstChild.textContent);}
if(typeof(success)=="function"){success(response);}};xdr.onerror=function(){_result=false;};args=JSON.stringify(args);xdr.onprogress=function(){};xdr.ontimeout=function(){};setTimeout(function(){xdr.send(args);},0);return xdr;}
else if(navigator.userAgent.indexOf('MSIE')!=-1&&parseInt(navigator.userAgent.match(/MSIE ([\d.]+)/)[1],10)<8){return false;}
else{if(type=="POST"){args=JSON.stringify(args);}
var headers={};if(typeof(_insideCsrfToken)!="undefined"&&_insideCsrfToken!=null)
headers['RequestVerificationToken']=_insideCsrfToken;var sessionid=getInsideSessionId()||"";if(sessionid!==""){headers.stoken=sessionid;}
var apiCall=$.ajax({type:type,url:urlpath+"api/api_call.aspx?call="+callName+((urlVariables!="")?"&"+urlVariables:""),dataType:dataType,data:args,contentType:contentType,async:async,headers:headers,success:function(response){if(!_insideIsLive){if(typeof($.inside)!="undefined"&&$.inside.logging==true){try{console.info("API CALL '"+callName+"' success");console.info("API args: ",args);console.info(response);}catch(e){console.log("API CALL '"+callName+"' success");console.log("API args: ",args);console.log(response);}}}
if(typeof(success)=="function"){success(response);}},error:function(response){if(!_insideIsLive){console.log(response);}
if(typeof(error)=="function"){try{console.log("API CALL '"+callName+"' error");console.log("API args: ",urlVariables);error(response);}catch(e){}}}});return apiCall;}}
function getApiPath(){var path=_insideLive;if(typeof(_insideLive)=="boolean"&&_insideSocialUrl){path=_insideSocialUrl;}
return path;}
insideAPI.prepareApiUrl=prepareApiUrl;function prepareApiUrl(call){var path=getApiPath();if(call.indexOf("http")==0){return call;}
return path+call;}
function setRequestHeaders(request){if(typeof _insideGraph!=="undefined"){request.setRequestHeader("accesskey",_insideGraph.current.account+":"+_insideGraph.pid+":"+_insideGraph.accessKey);request.setRequestHeader("accesscheck",_insideGraph.accessCheck);}else if(typeof assistantData!=="undefined"&&assistantData&&assistantData.sessionId){request.setRequestHeader("stoken",assistantData.sessionId);}}
function setFetchRequestHeaders(headers){if(typeof _insideGraph!=="undefined"){headers.append("accesskey",_insideGraph.current.account+":"+_insideGraph.pid+":"+_insideGraph.accessKey);headers.append("accesscheck",_insideGraph.accessCheck);}else if(typeof assistantData!=="undefined"&&assistantData&&assistantData.sessionId){headers.append("stoken",assistantData.sessionId);}
return headers;}
function parseJSONResponse(response){return new Promise(resolve=>{response.clone().json().then(resolve).catch(()=>{if(response.ok)resolve({success:true,status:200});response.text().then(res=>resolve(res||"FetchError"))});})}
function post(call,data,success,error,abortController,forceIgnoreFetch=false){if(typeof(error)=="undefined"){error=null;}
var url=prepareApiUrl(call);if(window.fetch&&!forceIgnoreFetch){const headers=new Headers();headers.append("Content-Type","application/json");setFetchRequestHeaders(headers);const controller=abortController||new AbortController();const signal=controller.signal;const fetchOptions={method:"POST",headers:headers,body:JSON.stringify(data),signal:signal,};const fetchPromise=fetch(url,fetchOptions).then(response=>{response.requestData=data;response.usingFetch=true;if(response.ok){return parseJSONResponse(response).then(success)}else{throw response;}}).catch(async err=>{let errorText=await parseJSONResponse(err)
var path=getApiPath();if(path==_insideLive&&err&&err.status===403&&(!$.connection||!$.connection.hub||$.connection.hub.state===$.signalR.connectionState.disconnected)){connected=false;if(typeof(virtualStore)!="undefined"&&virtualStore&&typeof(virtualStore.showLoadingDialog)=="function"){virtualStore.showLoadingDialog(insideLanguage.translatePhrase("You have been disconnected from INSIDE, redirecting to the login screen...")+"<span class='loadingIcon'></span>");}
setTimeout("window.location.reload()",4000);}else if(error){error(err,err.statusText,errorText);}});return{promise:fetchPromise,usingFetch:true,requestData:data,abort:()=>controller.abort(),};}else{return $.ajax({type:"post",url:url,beforeSend:function(request){setRequestHeaders(request);},dataType:"json",data:JSON.stringify(data),contentType:"application/json",async:true,success:success,error:function(jqXhr,textStatus,errorThrown){var path=getApiPath();if(path==_insideLive&&jqXhr&&jqXhr.status===403&&(!$.connection||!$.connection.hub||$.connection.hub.state===$.signalR.connectionState.disconnected)){connected=false;if(typeof(virtualStore)!="undefined"&&virtualStore&&typeof(virtualStore.showLoadingDialog)=="function"){virtualStore.showLoadingDialog(insideLanguage.translatePhrase("You have been disconnected from INSIDE, redirecting to the login screen...")+"<span class='loadingIcon'></span>");}
setTimeout("window.location.reload()",4000);}else if(error){error(jqXhr,textStatus,errorThrown);}},});}}
function get(call,data,success,error){if(typeof(error)=="undefined"){error=null;}
var url=prepareApiUrl(call);if(window.fetch){const headers=new Headers();headers.append("Content-Type","application/json");setFetchRequestHeaders(headers);return fetch(url,{method:"GET",headers:headers,}).then(response=>{if(response.ok){return response.json().then(success);}else{throw new Error(response.statusText);}}).catch(err=>{var path=getApiPath();if(path==_insideLive&&err&&err.status===403&&(!$.connection||!$.connection.hub||$.connection.hub.state===$.signalR.connectionState.disconnected)){connected=false;if(typeof(virtualStore)!="undefined"&&virtualStore&&typeof(virtualStore.showLoadingDialog)=="function"){virtualStore.showLoadingDialog(insideLanguage.translatePhrase("You have been disconnected from INSIDE, redirecting to login screen...")+"<span class='loadingIcon'></span>");}
setTimeout("window.location.reload()",4000);}else if(error){error(err,err.message,err.name);}});}else{return $.ajax({type:"get",url:url,dataType:"json",data:JSON.stringify(data),contentType:"application/json",async:true,success:success,error:function(jqXhr,textStatus,errorThrown){var path=getApiPath();if(path==_insideLive&&jqXhr&&jqXhr.status===403&&(!$.connection||!$.connection.hub||$.connection.hub.state===$.signalR.connectionState.disconnected)){connected=false;if(typeof(virtualStore)!="undefined"&&virtualStore&&typeof(virtualStore.showLoadingDialog)=="function"){virtualStore.showLoadingDialog(insideLanguage.translatePhrase("You have been disconnected from INSIDE, redirecting to login screen...")+"<span class='loadingIcon'></span>");}
setTimeout("window.location.reload()",4000);}
else if(error)error(jqXhr,textStatus,errorThrown);}});}}
insideAPI.handlePostError=handlePostError;function handlePostError(xhr,textStatus,errorThrown,alertTitle){if(textStatus==="abort"){return;}
var errorMessage;if(xhr.responseJSON&&xhr.responseJSON.msg&&xhr.responseJSON.msg!==""){errorMessage=xhr.responseJSON.msg;}else if(xhr.responseText&&xhr.responseText!==""){errorMessage=xhr.responseText;}else if(errorThrown){errorMessage=errorThrown;}else if(!window.navigator.onLine||(!$.connection||!$.connection.hub||$.connection.hub.state===$.signalR.connectionState.disconnected)){errorMessage=insideLanguage.translatePhrase("There has been an unexpected connection issue. Please try again.");}else{errorMessage=insideLanguage.translatePhrase("Invalid data provided");}
if(!alertTitle){alertTitle="";}
if(xhr.status===403){if(xhr.getResponseHeader("server")==="awselb/2.0"){insidePopup.showAlert("This action cannot be performed as it failed to satisfy security rules.","ok",null,true,{title:(alertTitle?alertTitle:"Denied"),anim:false});}else{insidePopup.showAlert("Access denied","ok",null,true,{title:(alertTitle?alertTitle:"Forbidden"),anim:false});setTimeout(location.reload.bind(location),5000);}}else{insidePopup.showAlert(errorMessage,"ok",null,true,{title:alertTitle,anim:false});}};function ajax(ajaxData){return $.ajax(ajaxData);}
insideAPI.call=call;insideAPI.post=post;insideAPI.get=get;insideAPI.ajax=ajax;})(window,typeof(_insideGraph)!="undefined"?_insideGraph.jQuery:$);;if(document.location.href.indexOf("dev.powerfront.com")!=-1||document.location.href.indexOf("staging.powerfront.com")!=-1||document.location.href.indexOf("staging2012.powerfront.com")!=-1){if(document.title.indexOf(" | ")==-1&&document.querySelector(".cell45, .cell34")){var holder=document.createElement("div");document.body.appendChild(holder);document.querySelector(".cell45, .cell34").prepend(holder);holder.id="insideStreamContainer";holder.style.height="600px";window.insideStreamingContainerId="insideStreamContainer";}}
var insideStreamingCheck=new function(){var _this=this;this.bundleLoaded=false;this.init=init;function init(){if(document.location.href.indexOf("insideshowid")!=-1||window.insideStreamingContainerId){if(typeof insideStreaming=="undefined"){loadStreamingBundle();}}}
function browserSupports(){if(isIE()||(browserType[0]=="Chrome"&&parseInt(browserType[1])<40)||(browserType[0]=="Firefox"&&parseInt(browserType[1])<34)||(browserType[0]=="Safari"&&parseFloat(browserType[1])<9.1)||(browserType[0]=="Opera"&&parseFloat(browserType[1])<29)||(browserType[0]=="Edge"&&parseFloat(browserType[1])<13)){return false;}
return true&&!!window.WebSocket;}
var browserType=(function(){var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(M[1])){tem=/\brv[ :]+(\d+)/g.exec(ua)||[];return 'IE '+(tem[1]||'');}
if(M[1]==='Chrome'){tem=ua.match(/\b(OPR|Edge)\/(\d+)/);if(tem!=null)return tem.slice(1).join(' ').replace('OPR','Opera');}
M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,'-?'];if((tem=ua.match(/version\/(\d+)/i))!=null)M.splice(1,1,tem[1]);return M})();function isIE(){var ua=navigator.userAgent;return ua.indexOf('MSIE')>-1||ua.indexOf('Trident')>-1;}
var streamingBundleLoading=false;var bundleLoadedCallbacks=[];this.loadStreamingBundle=loadStreamingBundle;function loadStreamingBundle(callback){if(typeof insideStreaming!="undefined"){if(typeof callback=="function"){callback();}
return;}
if(typeof callback=="function"){bundleLoadedCallbacks.push(callback);}
if(streamingBundleLoading)return;streamingBundleLoading=true;if(!browserSupports()){alert(getAlertMessage());return;}
var $=_insideGraph.jQuery;if(location.href.indexOf("dev.powerfront")!=-1||location.href.indexOf("localhost")!=-1||location.href.indexOf("inside-local")!=-1||(new RegExp("dev*.-live.inside-graph.com")).test(location.href)){_insideGraph.loadJS($.inside.insideScript+"/streaming/inside.front.streaming.js?v="+_insideScriptVersion,function(){return typeof insideStreaming!='undefined'},function(){_insideGraph.loadJS($.inside.insideScript+"/streaming/inside.front.showcase.js?v="+_insideScriptVersion,function(){return typeof insideShowcase!='undefined'},bundleLoaded);});_insideGraph.jQuery.inside.front.loadCssFile($.inside.insideScript+"/streaming/inside.front.streaming.css?v="+_insideScriptVersion,function(){console.log("streaming css loaded");});}
else{_insideGraph.loadJS($.inside.insideScript+"streaming_min.js?v="+_insideScriptVersion,function(){return typeof insideStreaming!='undefined'},bundleLoaded);_insideGraph.jQuery.inside.front.loadCssFile($.inside.insideScript+"streaming_min.css?v="+_insideScriptVersion,function(){console.log("streaming css loaded");});console.log('from streaming.check.js');}}
function bundleLoaded(){insideStreaming.init(_insideGraph.jQuery);_this.bundleLoaded=true;for(var i=0;i<bundleLoadedCallbacks.length;i++){if(typeof bundleLoadedCallbacks[i]=="function"){bundleLoadedCallbacks[i]();}}
bundleLoadedCallbacks=[];}
function getAlertMessage(){var iosMessage=""+
"Apologies, but the Show could not start.\n"+
"Your current iOS version is not supported.\n"+
"Please upgrade to iOS 13 (or above) or please join on another device.";var macMessage=""+
"Apologies, but the Show could not start.\n"+
"Your current web browser is not supported.\n"+
"Please try one of the following web browsers:\n"+
"Chrome (version 81 or above)\n"+
"Safari (version 12 or above)\n"+
"Firefox (version 77 or above)"
var windowsMessage=""+
"Apologies, but the Show could not start.\n"+
"Your current web browser is not supported.\n"+
"Please try one of the following web browsers:\n"+
"Chrome (version 81 or above)\n"+
"Edge (version 81 or above)\n"+
"Firefox (version 77 or above)";var androidMessage=""+
"Apologies, but the Show could not start.\n"+
"Your current web browser is not supported.\n"+
"Please try one of the following web browsers:\n"+
"Chrome (version 81 or above)\n"+
"Android Browser (version 81 or above)\n"+
"Firefox (version 77 or above)\n"+
"QQ Browser (version 10.4 or above)\n"+
"Baidu (version 7.12 or above)";var defaultMessage=windowsMessage;if(iOS()){return iosMessage;}else if(navigator.appVersion.indexOf("Win")!=-1){return windowsMessage;}else if(navigator.appVersion.indexOf("Mac")!=-1){return macMessage;}else if(userAgent.indexOf("android")>-1){return androidMessage;}else{return windowsMessage;}}
function iOS(){if(navigator.platform.indexOf("iPhone")!=-1||navigator.platform.indexOf("iPod")!=-1||navigator.platform.indexOf("iPhone")!=-1||navigator.platform.indexOf("iPad")!=-1){return true;}
return false;}};var insideCreditCard=new function(){var CreditCardData=[];insideFrontInterface.chat.checkForCreditCardNumbers=checkForCreditCardNumbers;function checkForCreditCardNumbers(str,settings){var regex="(\\d(\\D){0,4}){13,19}";var ccReg=new RegExp(regex,"g");var matches=str.match(ccReg);if(matches==null||matches.length<=0){return str;}
if(matchExclusions(str,settings))return str;var justNumber=str.replace(/(\D*)/g,"");var numbersArr=getPossibleCardNumbers(justNumber);numbersArr=numbersArr.sort((a,b)=>b.length-a.length);for(var j=0;j<numbersArr.length;j++){var val=numbersArr[j];if(!valid_credit_card(val)||!IsValidCard(val)){continue;}
if(settings.pciCreditMasking){val=val.substring(0,val.length-4);}
var reg=new RegExp(val.split("").join("(\\D{0,4})"),"g");var ccmatches=str.match(reg,val);if(ccmatches!=null&&ccmatches.length>0){mainloop:for(var i=0;i<ccmatches.length;i++){var match=ccmatches[i];if(settings.ccMaskExclusionsEnabled===true&&settings.ccMaskExclusions){for(var k=0;k<settings.ccMaskExclusions.length;k++){var regexExclusion=new RegExp(settings.ccMaskExclusions[k],"gi");if(match.match(regexExclusion)){continue mainloop;}}}
str=str.replace(match,match.replace(/\d/g,"*"));}}}
return str;}
insideFrontInterface.chat.checkForCreditCardExclusions=matchExclusions;function matchExclusions(str,settings){if(!(settings.ccMaskExclusionsEnabled===true&&settings.ccMaskExclusions)){return false}
for(var k=0;k<settings.ccMaskExclusions.length;k++){var regexExclusion=new RegExp(settings.ccMaskExclusions[k],"gi");if(str.match(regexExclusion)){return true;}}
return false}
function getPossibleCardNumbers(number)
{var result=[];if(number.length<13)return result;for(var i=13;i<=19;i++)
{for(var j=0;j<=number.length-i;j++)
{result.push(number.substring(j,i+j));}}
return result;}
insideFrontInterface.chat.strictReplaceNumbers=strictReplaceNumbers;function strictReplaceNumbers(str,settings){if(matchExclusions(str,settings)){return str;}
var ccReg=/\b([0-9](.?)){4,99}\b/g;var matches=str.match(ccReg);if(matches!=null&&matches.length>0){for(var i=0;i<matches.length;i++){var val=matches[i];matches[i]=matches[i].replace(/[0-9]/g,"*");str=str.replace(val,matches[i]);}}
return str;}
insideFrontInterface.chat.valid_credit_card=valid_credit_card;function valid_credit_card(value){var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n),nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)nDigit-=9;}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)==0;}
function IsValidCard(number)
{var foundCardType=false;brandloop:for(var brandData of CreditCardData)
{var brandInfo=brandData.BrandInfo;for(var rule of brandInfo.Rules)
{if(!rule.Lengths.includes(number.length)||typeof(rule.Prefixes.find(el=>number.startsWith(el)))=="undefined")continue;foundCardType=true;break brandloop;}}
return foundCardType;}
var IssuerIdentificationNumbers=["30","3746010","35","36","37","38","4","50","51","52","53","54","55","56","57","58","60"];const CardIssuer={AmericanExpress:0,ChinaUnionPay:1,Dankort:2,DinersClub:3,Discover:4,Hipercard:5,JCB:6,Laser:7,Maestro:8,MasterCard:9,RuPay:10,Switch:11,Visa:12,Unknown:13};var BrandInfo=function(rules,brandName,skipLuhn){var _this=this;_this.Rules=rules;_this.BrandName=brandName;if(typeof(skipLuhn)=="undefined"||typeof(skipLuhn)!="boolean"||typeof(skipLuhn)==null)
skipLuhn=false;_this.SkipLuhn=skipLuhn;}
var Rule=function(lengths,prefixes){var _this=this;_this.Lengths=lengths;_this.Prefixes=prefixes;}
var BrandData=function(cardIssuer,brandInfo){var _this=this;_this.CardIssuer=cardIssuer;_this.BrandInfo=brandInfo;}
function generateRange(start,end)
{var ret=[];for(var i=start;i<=end;i++)
{ret.push(i.toString());}
return ret;}
this.init=init;function init(){CreditCardData=[];CreditCardData.push(new BrandData(CardIssuer.Visa,new BrandInfo
([new Rule([13,16,19],["4"])],"Visa")));var prefixes=[];prefixes=prefixes.concat(generateRange(51,55));prefixes=prefixes.concat(generateRange(2221,2720));var masterCardRule1=[new Rule([16],prefixes)];var masterCard=new BrandInfo(masterCardRule1,"MasterCard");var brandData=new BrandData(CardIssuer.MasterCard,masterCard);CreditCardData.push(brandData);CreditCardData.push(new BrandData(CardIssuer.AmericanExpress,new BrandInfo
([new Rule([15],["34","37"])],"American Express")));CreditCardData.push(new BrandData(CardIssuer.Discover,new BrandInfo
([new Rule([16],["6011","644","645","646","647","648","649","65"])],"Discover")));CreditCardData.push(new BrandData(CardIssuer.DinersClub,new BrandInfo
([new Rule([14,16],["300","301","302","303","304","305","3095","36","38"])],"Diners Club")));CreditCardData.push(new BrandData(CardIssuer.JCB,new BrandInfo
([new Rule([15,16],["3528","3529","353","354","355","356","357","358"]),new Rule([15],["1800","2131"]),new Rule([19],["1800","357266"])],"JCB")));CreditCardData.push(new BrandData(CardIssuer.Laser,new BrandInfo
([new Rule([16,17,18,19],["6304"])],"Laser")));CreditCardData.push(new BrandData(CardIssuer.Switch,new BrandInfo
([new Rule([16,18,19],["633110","633312","633304","633303","633301","633300"])],"Switch")));var maestroPrefixes=[];maestroPrefixes=maestroPrefixes.concat(generateRange(56,58));maestroPrefixes=maestroPrefixes.concat(generateRange(500,500));maestroPrefixes=maestroPrefixes.concat(generateRange(502,509));maestroPrefixes=maestroPrefixes.concat(generateRange(602,605));maestroPrefixes=maestroPrefixes.concat(generateRange(670,679));maestroPrefixes=maestroPrefixes.concat(generateRange(5010,5018));maestroPrefixes=maestroPrefixes.concat(generateRange(6000,6060));maestroPrefixes=maestroPrefixes.concat(generateRange(6760,6769));var maestroRules=[new Rule([12,13,14,15,16,17,18,19],maestroPrefixes)];var maestro=new BrandInfo(maestroRules,"MasterCard");brandData=new BrandData(CardIssuer.Maestro,maestro);CreditCardData.push(brandData);CreditCardData.push(new BrandData(CardIssuer.ChinaUnionPay,new BrandInfo
([new Rule([16,17,18,19],["62"])],"China UnionPay")));CreditCardData.push(new BrandData(CardIssuer.Dankort,new BrandInfo
([new Rule([16],["5019"])],"Dankort")));CreditCardData.push(new BrandData(CardIssuer.RuPay,new BrandInfo
([new Rule([16],["6061","6062","6063","6064","6065","6066","6067","6068","6069","607","608"])],"RuPay")));CreditCardData.push(new BrandData(CardIssuer.Hipercard,new BrandInfo
([new Rule([19],["384"])],"Hipercard")));CreditCardData.push(new BrandData(CardIssuer.Unknown,new BrandInfo
([new Rule([15],["7","80","90"])],"Unknown")));}};_insideGraph.registerModule("framework",function(){_insideGraph.initModule("realtime");_insideGraph.initModule("front");});;