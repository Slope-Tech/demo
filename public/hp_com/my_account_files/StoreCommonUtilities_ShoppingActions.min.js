dojo.registerModulePath("wc","../wc");dojo.require("wc.service.common");dojo.require("dojo.io.iframe");dojo.require("dojo.io.script");dojo.require("dojo.parser");dojo.require("dijit.form.Button");dojo.require("wc.widget.WCMenu");dojo.require("wc.widget.WCDialog");dojo.require("wc.widget.ScrollablePane");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.Tooltip");dojo.require("wc.widget.WCDropDownButton");dojo.require("dijit.Dialog");dojo.require("dojo.currency");dojo.require("dijit.Tree");dojo.require("dojo.back");dojo.require("dijit.form.DateTextBox");dojo.require("wc.widget.RefreshArea");dojo.require("wc.render.RefreshController");dojo.require("wc.render.Context");dojo.require("dojo.cookie");dojo.require("dojox.fx.Shadow");dojo.subscribe("ajaxRequestInitiated","incrementNumAjaxRequest");dojo.subscribe("ajaxRequestCompleted","decrementNumAjaxRequest");dojo.subscribe("ajaxRequestCompleted","initializeInactivityWarning");var showDropdown=false;var dropDownDlg=null;var productAddedDropDownDlg=null;var originalMiniCartWidth=0;var isIE=(document.all)?true:false;var correctBrowser=false;var requestSubmitted=false;var currentId="";var numAjaxRequests=0;var widgetsList=[];var tabPressed=false;var currentPopup="";var android=null;var ios=null;function initializeInactivityWarning(){if(document.URL!=null){if((document.URL.indexOf("editRegistration=Y")!=-1)&&(document.URL.indexOf("UserRegistrationForm")!=-1)){inactivityTimeout=1800000}}if(storeUserType!="G"&&inactivityTimeout!=0){if(inactivityTimeoutTracker!=null){clearTimeout(inactivityTimeoutTracker)}inactivityTimeoutTracker=setTimeout(showInactivityWarningDialog,inactivityTimeout-inactivityWarningDialogBuffer)}}function showInactivityWarningDialog(){dijit.byId("inactivityWarningPopup").show();if(dialogTimeoutTracker!=null){clearTimeout(dialogTimeoutTracker)}dialogTimeoutTracker=setTimeout(hideInactivityWarningDialog,inactivityWarningDialogDisplayTimer)}function hideInactivityWarningDialog(){dijit.byId("inactivityWarningPopup").hide()}function resetServerInactivity(){dojo.xhrPost({url:getAbsoluteURL()+"Ping",handleAs:"json-comment-filtered",content:null,service:this,load:function(b,a){if(b.success){initializeInactivityWarning()}else{console.error("Ping service failed")}},error:function(b,a){console.error("Ping service failed")}})}function $dojo(a){return document.getElementById(a)}function focusSetter(){if(dojo.byId("MiniCartFocusReceiver1")){dojo.byId("MiniCartFocusReceiver1").focus()}else{dojo.byId("MiniCartFocusReceiver2").focus()}}function determineFocus(a){if(a.shiftKey&&a.keyCode==dojo.keys.TAB){if(a.srcElement){if(a.srcElement.id=="MiniCartFocusReceiver1"){if(dojo.byId("WC_MiniShopCartDisplay_link_5")){dojo.byId("WC_MiniShopCartDisplay_link_5").focus()}dojo.stopEvent(a)}else{if(a.srcElement.id=="MiniCartFocusReceiver2"){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(a)}}}else{if(a.target.id=="MiniCartFocusReceiver1"){if(dojo.byId("WC_MiniShopCartDisplay_link_5")){dojo.byId("WC_MiniShopCartDisplay_link_5").focus()}dojo.stopEvent(a)}else{if(a.target.id=="MiniCartFocusReceiver2"){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(a)}}}}}function destroyDialog(a){if(a==undefined){a="quick_cart_container"}dojo.query(".dijitDialog",document).forEach(function(b){if(dijit.byNode(b).id==a){dijit.byNode(b).destroyRecursive()}});if(a!=undefined&&a=="quick_cart_container"){dropDownDlg=null}else{productAddedDropDownDlg=null}}function hideUnderlayWrapper(){dojo.query(".dijitDialogUnderlayWrapper",document).forEach(function(a){a.style.display="none"})}function loadLink(a){document.location.href=a}function clearSearchField(){searchText=document.getElementById("SimpleSearchForm_SearchTerm").value;if(searchText==document.getElementById("searchTextHolder").innerHTML){document.getElementById("SimpleSearchForm_SearchTerm").value=""}else{document.getElementById("SimpleSearchForm_SearchTerm").select();showAutoSuggestIfResults();autoSuggestHover=false}}function fillSearchField(){if(document.getElementById("SimpleSearchForm_SearchTerm").value==""){document.getElementById("SimpleSearchForm_SearchTerm").className="searchBox left";document.getElementById("SimpleSearchForm_SearchTerm").value=document.getElementById("searchTextHolder").innerHTML}if(!autoSuggestHover){showAutoSuggest(false)}}function showDropDownMenu(){var b=document.getElementById("header_menu_dropdown");if(document.getElementById("header_menu_dropdown")!=null&&document.getElementById("header_menu_dropdown")!="undefined"){b.style.display="block"}if(document.getElementById("outerCartContainer")!=null&&document.getElementById("outerCartContainer")!="undefined"){var a=document.getElementById("outerCartContainer");a.style.display="block"}}function initShopcartTarget(){dojo.subscribe("/dnd/drop",function(d,a,f,e){if(d!=e){e.deleteSelectedNodes()}var c=new popupActionProperties();c.showProductCompare=showProductCompare;if(e.parent.id=="miniShopCart_dndTarget"){var b=d.parent.id.indexOf("_",0);if(b>=0){d.parent.id=d.parent.id.substring(b+1)}if(d.node.getAttribute("dndType")=="item"||d.node.getAttribute("dndType")=="package"){categoryDisplayJS.AddItem2ShopCartAjax(d.parent.id,1)}else{if(d.node.getAttribute("dndType")=="product"||d.node.getAttribute("dndType")=="bundle"){showPopup(d.parent.id,function(g){return g},"miniShopCart_dndTarget",null,c)}}}})}function cursor_wait(a){var b=true;if(a==true){if(dojo.isOpera>0){b=false}}if(b){setTimeout("showProgressBar()",500)}}function showProgressBar(){if(!requestSubmitted){return}displayProgressBar()}function displayProgressBar(){var b=dijit.byId("progress_bar_dialog");if(b!=null){b.closeButtonNode.style.display="none";var c=document.getElementById("progress_bar");c.style.display="block";if(this.currentId!=""){var a=document.getElementById(this.currentId);var d=dijit.placeOnScreenAroundElement(c,a,{TR:"TL"})}else{b.containerNode.innerHTML=="";c.style.left="";c.style.top="";b.containerNode.appendChild(c);b.show()}setTimeout("cursor_clear()",1800000)}}function setCurrentId(a){if(!requestSubmitted&&this.currentId==""){this.currentId=a}}function trim(c){word=c.toString();var b=0;var a=word.length-1;while(word.charAt(b)==" "){b++}while(word.charAt(a)==" "){a=a-1}if(b>a){return word.substring(b,b)}else{return word.substring(b,a+1)}}function cursor_clear(){requestSubmitted=false;var a=dijit.byId("progress_bar_dialog");var b=document.getElementById("progress_bar");if(a!=null){if(b!=null){b.style.display="none"}a.hide();this.currentId=""}}function submitRequest(){if(!requestSubmitted){requestSubmitted=true;return true}return false}function resetRequest(){requestSubmitted=false}function setPageLocation(a){if(!submitRequest()){return}document.location.href=a}function submitSpecifiedForm(a){if(!submitRequest()){return}console.debug("form.action == "+a.action);a.submit()}function parseWidget(a){}function parseAllWidgets(){for(var a=0;a<widgetsList.length;a++){parseWidget(widgetsList[a])}}function addToWidgetsList(a){widgetsList.push(a)}function parseWCCEAWidget(c){var a;var b=ceadijit.byId(c);if(b==null||b==undefined){if(c==null||c==undefined){a=ceadojo.body()}else{a=ceadojo.byId(c)}if(a!=null&&a!=undefined){if(a.getAttribute("ceadojoType")!=null&&a.getAttribute("ceadojoType")!=undefined){ceadojo.parser.instantiate([a])}else{ceadojo.parser.parse(a)}}}}function parseHeader(e){var d=dojo.byId("progress_bar_dialog");var b=document.getElementById("header_menu_loaded");var a=document.getElementById("header_menu_overlay");if(currentId.length==0&&document.getElementById("header_menu_loaded")!=null&&document.getElementById("header_menu_loaded")!="undefined"&&document.getElementById("header_menu_overlay")!=null&&document.getElementById("header_menu_overlay")!="undefined"&&document.getElementById("header_menu_loaded").style.display=="none"){setCurrentId((e!=null&&e!=undefined)?e:a.id);submitRequest();cursor_wait();a.style.display="none";parseWidget("header_menu_loaded");b.style.display="block";cursor_clear();try{if(window.top._ceaCollabDialog!=undefined||window.top._ceaCollabDialog!=null){dijit.registry.byClass("wc.widget.WCDropDownButton").forEach(function(f){dojo.connect(f,"_onDropDownClick",dojo.hitch(window.top._ceaCollabDialog,"topCategoryClicked",f.getURL()));dojo.connect(f,"onKeyPress",window.top._ceaCollabDialog,function(g){if(g.keyCode==dojo.keys.ENTER){window.top._ceaCollabDialog.topCategoryClicked(f.getURL())}})})}}catch(c){}}}function hideElementById(a){var b=dojo.byId(a);b.style.display="none"}function showElementById(a){var b=dojo.byId(a);b.style.display="block"}function hideBackgroundImage(a){a.style.backgroundImage="none"}function showBackgroundImage(a){a.style.backgroundImage="url("+getImageDirectoryPath()+getStyleDirectoryPath()+"product_hover_background.png)"}function checkIE8Browser(){if(dojo.isIE&&dojo.isIE<=8){correctBrowser=true}}function ApprovalToolLink(b,a){checkIE8Browser();if(correctBrowser){RFQwindow=window.open(a)}else{MessageHelper.formErrorHandleClient(b,MessageHelper.messages.ERROR_INCORRECT_BROWSER);return}}function updateViewAndBeginIndexForCurrencyChange(){if(document.getElementById("fastFinderResultControls")!=null&&document.getElementById("fastFinderResultControls")!=""){if(document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=document.FastFinderForm.pageView.value}if(document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=document.FastFinderForm.beginIndex.value}}else{if(document.getElementById("CategoryDisplay_Widget")!=null&&document.getElementById("CategoryDisplay_Widget")!=""){if(wc.render.getContextById("CategoryDisplay_Context").properties.pageView!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties.pageView}if(wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex}}else{if(document.getElementById("Search_Result_Summary")!=null&&document.getElementById("Search_Result_Summary")!=""){if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView}if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum}}else{if(document.getElementById("Search_Result_Summary2")!=null&&document.getElementById("Search_Result_Summary2")!=""){if(wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView}if(wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum}}}}}try{if(window.top._ceaCollabDialog!=undefined||window.top._ceaCollabDialog!=null){dojo.byId("SetCurrencyPreferenceForm").URL.value=dojo.byId("SetCurrencyPreferenceForm").URL.value+"&coshopChangeCurrency="+dojo.byId("currencySelection").options[dojo.byId("currencySelection").selectedIndex].value}}catch(a){}}function updateViewAndBeginIndexForLanguageChange(){if(document.getElementById("fastFinderResultControls")!=null&&document.getElementById("fastFinderResultControls")!=""){if(document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=document.FastFinderForm.pageView.value}if(document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=document.FastFinderForm.beginIndex.value}}else{if(document.getElementById("CategoryDisplay_Widget")!=null&&document.getElementById("CategoryDisplay_Widget")!=""){if(wc.render.getContextById("CategoryDisplay_Context").properties.pageView!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties.pageView}if(wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex}}else{if(document.getElementById("Search_Result_Summary")!=null&&document.getElementById("Search_Result_Summary")!=""){if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView}if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum}}else{if(document.getElementById("Search_Result_Summary2")!=null&&document.getElementById("Search_Result_Summary2")!=""){if(wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView}if(wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum}}}}}try{if(window.top._ceaCollabDialog!=undefined||window.top._ceaCollabDialog!=null){dojo.byId("LanguageSelectionForm").action=dojo.byId("LanguageSelectionForm").action+"&langId="+dojo.byId("languageSelection").options[dojo.byId("languageSelection").selectedIndex].value}}catch(a){}}function showHeaderLinksInTwoLines(){if(document.getElementById("header_links")!=null&&document.getElementById("header_links")!="undefined"){if(dojo.contentBox(document.getElementById("header_links")).w>750){if(document.getElementById("header_links1")!=null&&document.getElementById("header_links1")!="undefined"){document.getElementById("header_links1").style.display="block"}if(document.getElementById("headerHomeLink")!=null&&document.getElementById("headerHomeLink")!="undefined"){document.getElementById("headerHomeLink").style.display="none"}if(document.getElementById("headerShopCartLink")!=null&&document.getElementById("headerShopCartLink")!="undefined"){document.getElementById("headerShopCartLink").style.display="none"}}document.getElementById("header_links").style.visibility="visible"}}function showLinksInOneLine(){if(document.getElementById("header_links")!=null&&document.getElementById("header_links")!="undefined"){document.getElementById("header_links").style.visibility="visible"}}function isNonNegativeInteger(b){var a=new RegExp(/^\d*$/);return(b!=null&&b!=""&&a.test(b))}function isPositiveInteger(a){return(isNonNegativeInteger(a)&&a!=0)}function closeAllDialogs(){dijit.registry.byClass("dijit.Dialog").forEach(function(a){a.hide()})}function setWarningMessageCookie(a){dojo.cookie("signon_warning_cookie",a,{path:"/"})}function removeCookie(a){dojo.cookie(a,null,{expires:-1})}function getCookie(f){var e=document.cookie.split(";");for(var d=0;d<e.length;d++){var b=e[d].indexOf("=");var a=e[d].substr(0,b);a=a.replace(/^\s+|\s+$/g,"");if(a==f){return unescape(e[d].substr(b+1))}}}function isStorePreview(a,b){if(a.indexOf(b)>-1){return true}return false}function hideESpotInfoPopup(c,a){if(a!=null&&a.type=="keypress"&&a.keyCode!="27"){return}else{var b=dijit.byId(c);if(b!=null){b.hide()}}}function showESpotInfoPopup(c,a){if(a!=null&&a.type=="keypress"&&a.keyCode!="13"){return}else{var b=dijit.byId(c);if(b!=null){b.show()}}}function incrementNumAjaxRequest(){if(numAjaxRequests!="undefined"){numAjaxRequests++}}function decrementNumAjaxRequest(){if(numAjaxRequests!="undefined"){if(numAjaxRequests!=0){numAjaxRequests--}}}function updateParamObject(g,e,f,d,b){if(g==null){g=[]}if(g[e]!=null&&d){if(dojo.lang.isArrayLike(g[e])){if(b!=null&&b!=""){g[e][b]=f}else{g[e].push(f)}}else{var a=g[e];g[e]=[];g[e].push(a);g[e].push(f)}}else{if(b!=null&&b!=""&&b!=-1){g[e+"_"+b]=f}else{if(b==-1){var c=1;while(g[e+"_"+c]!=null){c++}g[e+"_"+c]=f}else{g[e]=f}}}return g}function showSection(b){var a=dojo.byId(b);if(a!=null&&a!="undefined"){a.style.visibility="visible"}}function hideSection(b){var a=dojo.byId(b);if(a!=null&&a!="undefined"){a.style.visibility=""}}function shiftTabHideSection(b,a){if(a.shiftKey&&(a.keyCode==dojo.keys.TAB)){hideSection(b)}}function tabHideSection(c,b,a){if(!b.shiftKey&&(b.keyCode==dojo.keys.TAB)){if(null!=a){dojo.byId(a).focus()}hideSection(c);dojo.stopEvent(b)}}function saveShiftTabPress(a){if(a.shiftKey==true&&a.keyCode==9){tabPressed=true}}function saveTabPress(a){if(a.shiftKey==false&&a.keyCode==9){tabPressed=true}}function setFocus(a){if(tabPressed){tabPressed=false;document.getElementById(a).focus()}}function increaseHeight(a,c){var b=document.getElementById(a).offsetHeight;document.getElementById(a).style.height=(b+c)+"px"}function redirectToSignOn(a){if(typeof(a)!="undefined"){var b=a}else{var b=location.href}b="OrderItemMove?continue=1&createIfEmpty=1&updatePrices=0&deleteIfEmpty=*&fromOrderId=*&toOrderId=.&page=&calculationUsageId=-1&URL="+encodeURIComponent("OrderCalculate?URL="+encodeURIComponent(b));document.location.href="LogonForm?myAcctMain=1&storeId="+WCParamJS.storeId+"&catalogId="+WCParamJS.catalogId+"&langId="+WCParamJS.langId+"&URL="+encodeURIComponent(b)}function handlePopup(b,a){if(currentPopup==a){document.location.href=b}else{currentPopup=a}}function isAndroid(){if(android==null){if(navigator!=null){if(navigator.userAgent!=null){var a=navigator.userAgent.toLowerCase();android=a.indexOf("android")>-1}}}return android}function isIOS(){if(ios==null){if(navigator!=null){if(navigator.userAgent!=null){var a=navigator.userAgent.toLowerCase();ios=(a.indexOf("ipad")>-1)||(a.indexOf("iphone")>-1)||(a.indexOf("ipod")>-1)}}}return ios}function outlineSpots(){dojo.addClass(document.body,"editMode");dojo.query(".ESpotInfo").style({display:"block"});dojo.query(".searchScore").style({display:"block"});var d=dojo.query(".genericESpot,.product,.searchResultSpot,.productDetail,.categorySpot");for(var b=0;b<d.length;b++){var a=d[b];if(dojo.hasClass(a,"emptyESpot")){var e=dojo.query(".ESpotInfo",a)[0].offsetWidth+4;var c=dojo.query(".ESpotInfo",a)[0].offsetHeight+4;dojo.attr(a,"_width",dojo.style(a,"width"));dojo.attr(a,"_height",dojo.style(a,"height"));dojo.style(a,{width:+e+"px",height:c+"px"})}if(dojo.query(".borderCaption",a).length==0){dojo.place("<div class='borderCaption'></div>",a,"first")}else{dojo.query(".borderCaption",a).style({display:"block"})}if(a.addEventListener){a.addEventListener("mouseover",function(f){if(!window.parent.frames[0].isSpotsShown()){return}dojo.query(".caption").style({display:"none"});dojo.style(dojo.query(".caption",this)[0],{display:"block"});f.stopPropagation()},false);a.addEventListener("mouseout",function(f){if(!window.parent.frames[0].isSpotsShown()){return}dojo.query(".caption",this).style({display:"none"});f.stopPropagation()},false)}else{if(a.attachEvent){a.onmouseover=((function(f){return(function(){if(!window.parent.frames[0].isSpotsShown()){return}dojo.query(".caption").style({display:"none"});dojo.style(dojo.query(".caption",f)[0],{display:"block"});window.event.cancelBubble=true})})(a));a.onmouseleave=((function(f){return(function(){if(!window.parent.frames[0].isSpotsShown()){return}dojo.query(".caption",f).style({display:"none"});window.event.cancelBubble=true})})(a))}}}}function hideSpots(){dojo.removeClass(document.body,"editMode");dojo.query(".ESpotInfo").style({display:"none"});dojo.query(".caption").style({display:"none"});dojo.query(".searchScore").style({display:"none"});dojo.query(".borderCaption").style({display:"none"});dojo.query(".emptyESpot").forEach(function(a){dojo.style(a,{width:dojo.attr(a,"_width")+"px"});dojo.style(a,{height:dojo.attr(a,"_height")+"px"})})}function logout(a){setDeleteCartCookie();document.location.href=a}function deleteFromMiniCart(b){var d=[];d.storeId=WCParamJS.storeId;d.catalogId=WCParamJS.catalogId;d.langId=WCParamJS.langId;d.orderId=".";var c="";var a="";if(b.indexOf("|")!=-1){a=b.split("|");for(i=0;i<a.length;i++){if(a[i]!=null&&a[i]!=""){c="orderItemId_"+i;d[c]=a[i]}}}else{d.orderItemId=b}if(this.shoppingCartPage){d.calculationUsage="-1,-2,-5,-6,-7"}else{d.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}d.check="*n";wc.service.invoke("AjaxDeleteOrderItemTcs",d)}function updateQtyInCart(a,b){var c=[];c.storeId=WCParamJS.storeId;c.catalogId=WCParamJS.catalogId;c.langId=WCParamJS.langId;c.orderId=".";c.orderItemId=a;c.inventoryValidation="true";c.quantity=b;if(this.shoppingCartPage){c.calculationUsage="-1,-2,-5,-6,-7"}else{c.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}c.check="*n";wc.service.invoke("AjaxUpdateOrderItemMC",c)}function updateQtyInCartFrCrPack(c,a,d,b){var e=[];e.storeId=WCParamJS.storeId;e.catalogId=WCParamJS.catalogId;e.langId=WCParamJS.langId;e.orderId=".";e.orderItemId_1=c;e.orderItemId_2=a;e.inventoryValidation="true";e.quantity_1=d;e.quantity_2=b;if(this.shoppingCartPage){e.calculationUsage="-1,-2,-5,-6,-7"}else{e.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}e.check="*n";wc.service.invoke("AjaxUpdateOrderItemMC",e)}function setShopCartRedirectCookie(){dojo.cookie("ShopCartRedirectCookie_"+WCParamJS.storeId,true,{path:"/"})}function resetShopCartRedirectCookie(){var a=getCookie("ShopCartRedirectCookie_"+WCParamJS.storeId);if(a!=null){dojo.cookie("ShopCartRedirectCookie_"+WCParamJS.storeId,null,{expires:-1,path:"/"})}}function updateCartCookie(){if(document.getElementById("currentOrderQuantity")!=null&&document.getElementById("currentOrderAmount")!=null&&document.getElementById("currentOrderCurrency")!=null&&document.getElementById("currentOrderId")!=null&&document.getElementById("currentOrderLanguage")!=null){var c=document.getElementById("currentOrderQuantity").value;var a=document.getElementById("currentOrderAmount").value;var g=document.getElementById("currentOrderCurrency").value;var b=document.getElementById("currentOrderLanguage").value;var f=document.getElementById("currentOrderId").value;var d=getCookie("WC_CartOrderId_"+WCParamJS.storeId);if(d!=null){dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,null,{expires:-1,path:"/"});var e=getCookie("WC_CartTotal_"+d);if(e!=null){dojo.cookie("WC_CartTotal_"+d,null,{expires:-1,path:"/"})}}dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,f,{path:"/"});if(f!=""){dojo.cookie("WC_CartTotal_"+f,c+";"+a+";"+g+";"+b,{path:"/"})}}}shoppingActionsJS={langId:"-1",storeId:"",catalogId:"",userType:"",baseItemAddedToCart:false,entitledItems:[],entitledItemJsonObject:null,selectedAttributesList:new Object(),moreInfoUrl:"",isPopup:false,displayPriceRange:true,itemPriceJsonOject:[],allSwatchesArrayList:new Object(),skuImageId:"",cookieKeyPrefix:"CompareItems_",cookieDelimiter:";",maxNumberProductsAllowedToCompare:4,minNumberProductsAllowedToCompare:2,baseCatalogEntryId:0,selectedProducts:new Object(),productList:new Object(),currencySymbol:"",compareReturnName:"",searchTerm:"",productAddedList:new Object(),setCompareReturnName:function(a){this.compareReturnName=a},setSearchTerm:function(a){this.searchTerm=a},setCommonParameters:function(e,a,d,c,b){this.langId=e;this.storeId=a;this.catalogId=d;this.userType=c;this.currencySymbol=b},setEntitledItems:function(a){this.entitledItems=a},getCatalogEntryId:function(a){var c=[];var b=this.selectedAttributesList[a];for(attribute in b){c.push(attribute+"_"+b[attribute])}return this.resolveSKU(c)},getCatalogEntryIdforProduct:function(a){var b=[];for(attribute in a){b.push(attribute+"_"+a[attribute])}return this.resolveSKU(b)},getEntitledItemJsonObject:function(){return this.entitledItemJsonObject},resolveSKU:function(e){console.debug("Resolving SKU >> "+e+">>"+this.entitledItems);var g="";var d=e.length;if(this.entitledItems.length==1){return this.entitledItems[0].catentry_id}for(x in this.entitledItems){var g=this.entitledItems[x].catentry_id;var f=this.entitledItems[x].Attributes;var a=0;for(index in f){a++}if(d==0&&a==0){return g}if(a!=0&&d>=a){var c=0;for(attributeName in e){var b=e[attributeName];if(b in f){c++}}if(a==c){console.debug("CatEntryId:"+g+" for Attribute: "+e);return g}}}return null},setSelectedAttribute:function(b,e,a,d,f){console.debug(b+" : "+e);var c=this.selectedAttributesList[a];if(c==null){c=new Object()}c[b]=e;this.moreInfoUrl=this.moreInfoUrl+"&"+b+"="+e;this.selectedAttributesList[a]=c;this.changeProdImage(a,b,e,d,f)},setSelectedAttributeOfProduct:function(productId,selectedAttributeName,selectedAttributeValue,isSingleSKU){var selectedAttributesForProduct=null;if(this.selectedProducts[productId]){selectedAttributesForProduct=this.selectedProducts[productId]}else{selectedAttributesForProduct=new Object()}if(null!=selectedAttributeName&&""!=selectedAttributeName){selectedAttributesForProduct[selectedAttributeName]=selectedAttributeValue}this.selectedProducts[productId]=selectedAttributesForProduct;var entitledItemJSON=eval("("+dojo.byId("entitledItem_"+productId).innerHTML+")");this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryIdforProduct(selectedAttributesForProduct);if(catalogEntryId==null){catalogEntryId=0}else{this.changePrice("entitledItem_"+productId,false,true,productId);if(MerchandisingAssociationJS!=null){if(MerchandisingAssociationJS.baseItemParams!=null){if(MerchandisingAssociationJS.baseItemParams.type=="BundleBean"){for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++){if(productId==MerchandisingAssociationJS.baseItemParams.components[idx].productId){MerchandisingAssociationJS.baseItemParams.components[idx].id=catalogEntryId}}}}}}var productDetails=null;if(this.productList[productId]){productDetails=this.productList[productId]}else{productDetails=new Object();this.productList[productId]=productDetails;productDetails.baseItemId=productId}productDetails.id=catalogEntryId;if(productDetails.quantity){dojo.publish("quantityChanged",[dojo.toJson(productDetails)])}if(!isSingleSKU){dojo.publish("attributesChanged_"+productId,[dojo.toJson(selectedAttributesForProduct)])}},Add2ShopCartAjax:function(entitledItemId,productId,quantity,isPopup,customParams){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}else{entitledItemJSON=this.getEntitledItemJsonObject()}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(entitledItemId);if(catalogEntryId!=null){var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1);this.AddItem2ShopCartAjax(catalogEntryId,quantity,customParams,productId);this.baseItemAddedToCart=true;if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup")}}else{if(isPopup==true){dojo.byId("second_level_category_popup").style.zIndex="1";MessageHelper.formErrorHandleClient("addToCartLinkAjax",storeNLS.ERR_RESOLVING_SKU)}else{MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);this.baseItemAddedToCart=false}}},AddItem2ShopCartAjax:function(k,e,b,f,g){var d=[];d.storeId=this.storeId;d.catalogId=this.catalogId;d.langId=this.langId;d.orderId=".";d.calculationUsage="-1,-2,-5,-6,-7";d.inventoryValidation="true";d.URL="";d.updatePrices="1";d.isGC="N";if($("#giftCardDetails #gift-form").length>0||$("#giftCardDetailsMobile #gift-form").length>0){d.isGC="Y";d.gcPrice=$("#gcPrice").val();d.gcMessage=$("#gc_message").val();d.gcToName=$("#gcToName").val();d.gcFromName=$("#gcFromName").val();d.gcType=$("#gcType").val();if(("#email_field").length){d.gcMail=$("#email_field").val()}d.gcPartNumber=$("#gcPartNumber").val();if($("#editGC").length){d.editGC=$("#editGC").val()}if($("#editGCOrderItem").length){d.editGCOrderItem=$("#editGCOrderItem").val()}}var l="AddToCartAjax";this.productAddedList=new Object();d.catEntryId=k;d.quantity=e;if(b!=null&&b!="undefined"){for(i in b){d[i]=b[i]}}if(!submitRequest()){}cursor_wait();shoppingActionsServicesDeclarationJS.setCommonParameters(this.langId,this.storeId,this.catalogId);if(b==true){wc.service.invoke(l,d)}else{wc.service.invoke(l,d)}this.baseItemAddedToCart=true;if(b!=null&&b!="undefined"&&b.catalogEntryType=="dynamicKit"){var c=this.storeId;var a=this.langId;var h=this.catalogId;dojo.xhrPost({url:"AjaxOrderChangeServiceAddPreConfigurationToCart",handleAs:"json-comment-filtered",content:d,load:function(n,m){var p=n.orderId;if(p!=null&&p!="undefined"){console.debug("response --> order ID: "+p+" - order item ID: "+n.orderItemId);console.debug("Calling Shopping Cart Display");this.baseItemAddedToCart=true;var o="OrderItemDisplay?storeId="+c+"&catalogId="+h+"&langId="+a;document.location.href=getAbsoluteURL()+o}else{console.debug("ERROR Adding DK/CTO-product to the Cart --> errorCode: "+n.errorCode+" - errorMessageKey: "+n.errorMessageKey+" - errorMessage: "+n.errorMessage);alert("ERROR Adding DK/CTO-product to the Cart. errorCode: "+n.errorCode+" - errorMessageKey: "+n.errorMessageKey+" - errorMessage: "+n.errorMessage)}},error:function(n,m){console.debug("errObj: "+n+" - ioArgs: "+m);console.debug("ShoppingActions.AddPreConfigurationToCart: Unexpected error occurred during an xhrPost request.")}})}else{this.baseItemAddedToCart=true;this.trackAnalyticsAddToCart(g)}},trackAnalyticsAddToCart:function(b){var a=new Array();a.push({name:b.prodName,id:b.partNumber,price:b.price.replace("$",""),quantity:"1",brand:b.productBrand,category:b.productCategory,variant:b.productVariant,xsellMethod:"cart-specialty-accessories",xsellProdInfo:b.highestPricePNum});dataLayer.push({event:"e_addToCart",cartID:b.cartID,ecommerce:{currencyCode:b.currency,add:{newCart:false,detail:{actionField:{list:"cart"}},products:a}}})},AddItem2ShopCartAjaxforfinder:function(){var f=[];var a={};var b=[];var e=$("input[name=chk]:checked");var d=1;j=0;for(d=1;d<(e.length+1);d++){f["catEntryId_"+d]=e[j].value;b[j]=e[j].value;f["quantity_"+d]=document.getElementById(b[j]+"_dropdown").value;j++}f.storeId=this.storeId;f.catalogId=this.catalogId;f.langId=this.langId;f.orderId=".";f.calculationUsage="-1,-2,-5,-6,-7";f.inventoryValidation="true";f.URL="";f.updatePrices="1";var c="AddToCartAjax";this.productAddedList=new Object();if(!submitRequest()){}cursor_wait();shoppingActionsServicesDeclarationJS.setCommonParameters(this.langId,this.storeId,this.catalogId);wc.service.invoke(c,f);this.baseItemAddedToCart=true},AddItem2ShopCartAjaxforfinderpaper:function(){var f=[];var a={};var b=[];var e=$("input[name=chk1]:checked");var d=1;j=0;for(d=1;d<(e.length+1);d++){f["catEntryId_"+d]=e[j].value;b[j]=e[j].value;f["quantity_"+d]=document.getElementById(b[j]+"_dropdown").value;j++}f.storeId=this.storeId;f.catalogId=this.catalogId;f.langId=this.langId;f.orderId=".";f.calculationUsage="-1,-2,-5,-6,-7";f.inventoryValidation="true";f.URL="";f.updatePrices="1";var c="AddToCartAjax";this.productAddedList=new Object();if(!submitRequest()){}cursor_wait();shoppingActionsServicesDeclarationJS.setCommonParameters(this.langId,this.storeId,this.catalogId);wc.service.invoke(c,f);this.baseItemAddedToCart=true},AddSKU2ShopCartAjax:function(f,c,e,b,d,a){if((f==null||f=="")&&$("#gcPartNumber").length){f=$("#gcPartNumber").val()}$("body").append("<div style:visibility='hidden'> <input type='hidden' id='PDPSku' value='"+f+"_"+c+"' /> </div>");cursor_wait();if(f!=null){this.AddItem2ShopCartAjax(f,e,d,c,a);this.baseItemAddedToCart=true}else{MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);this.baseItemAddedToCart=false;console.debug("Item ID is NULL --> "+f+"Product ID is -->"+c+"Add to cart is failed")}},AddBundle2ShopCartAjax:function(){var b="AddOrderItem";var e=[];e.storeId=this.storeId;e.catalogId=this.catalogId;e.langId=this.langId;e.orderId=".";e.calculationUsage="-1,-2,-5,-6,-7";e.inventoryValidation="true";var a=1;this.productAddedList=new Object();for(productId in this.productList){var c=this.productList[productId];if(c.id==0){MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);return}var d=dojo.number.parse(c.quantity);if(isNaN(d)||d<=0){MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);return}e["catEntryId_"+a]=c.id;e["quantity_"+a++]=d;this.baseItemAddedToCart=true;this.saveAddedProductInfo(d,productId,c.id,this.selectedProducts[productId])}if(!submitRequest()){return}cursor_wait();wc.service.invoke(b,e)},saveAddedProductInfo:function(h,c,a,g){var e="";if(document.getElementById("ProductInfoName_"+c)!=null){e=document.getElementById("ProductInfoName_"+c).value}else{if(document.getElementById("ProductInfoName_"+a)!=null){e=document.getElementById("ProductInfoName_"+a).value}}var b="";if(document.getElementById("ProductInfoImage_"+c)!=null){b=document.getElementById("ProductInfoImage_"+c).value}else{if(document.getElementById("ProductInfoImage_"+a)!=null){b=document.getElementById("ProductInfoImage_"+a).value}}var f="";if(document.getElementById("ProductInfoPrice_"+c)!=null){f=document.getElementById("ProductInfoPrice_"+c).value}else{if(document.getElementById("ProductInfoPrice_"+a)!=null){f=document.getElementById("ProductInfoPrice_"+a).value}}var d=[e,b,f,h,g];if(c!=a){this.productAddedList[a]=d}else{this.productAddedList[c]=d}},setSKUImageId:function(a){this.skuImageId=a},getImageForSKU:function(a,c){var d=[];var b=this.selectedAttributesList[a];for(attribute in b){d.push(attribute+"_"+b[attribute])}return this.resolveImageForSKU(d,c)},resolveImageForSKU:function(b,g){console.debug("Resolving SKU >> "+b+">>"+this.entitledItems);var h="";var c=b.length;for(x in this.entitledItems){if(null!=g){var h=this.entitledItems[x][g]}else{var h=this.entitledItems[x].ItemImage467}var e=this.entitledItems[x].Attributes;var a=0;for(index in e){a++}if(c==0&&a==0){return h}if(a!=0&&c>=a){var k=0;for(attributeName in b){var f=b[attributeName];if(f in e){k++}}if(a==k){console.debug("ItemImage:"+h+" for Attribute: "+b);var d=[];d.push(h);d.push(this.entitledItems[x].ItemThumbnailImage);if(this.entitledItems[x].ItemAngleThumbnail!=null&&this.entitledItems[x].ItemAngleThumbnail!=undefined){d.push(this.entitledItems[x].ItemAngleThumbnail);d.push(this.entitledItems[x].ItemAngleFullImage)}return d}}}return null},changeViewImages:function(d,a){var c=0;for(x in d){var b=c;c++;if(null!=dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+c)){dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+c).src=d[x]}if(null!=dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+c)){dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+c).href="JavaScript:changeThumbNail('productAngleLi"+b+"','"+a[x]+"');"}if(null!=dojo.byId("productAngleLi"+b)&&dojo.byId("productAngleLi"+b).className=="selected"){changeThumbNail("productAngleLi"+b,a[x])}}},changeProdImage:function(entitledItemId,swatchAttrName,swatchAttrValue,skuImageId,imageField){if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}this.setEntitledItems(entitledItemJSON);var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1);var skuImage=null;var imageArr=shoppingActionsJS.getImageForSKU(entitledItemId,imageField);if(imageArr!=null){skuImage=imageArr[0]}if(skuImageId!=undefined){this.setSKUImageId(skuImageId)}if(skuImage!=null){if(dojo.byId(this.skuImageId)!=null){document.getElementById(this.skuImageId).src=skuImage;if(document.getElementById("ProductInfoImage_"+productId)!=null){document.getElementById("ProductInfoImage_"+productId).value=skuImage}var itemAngleThumbnail=imageArr[2];var itemAngleFullImage=imageArr[3];if(itemAngleThumbnail!=null&&itemAngleThumbnail!=undefined){shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage)}}}else{var imageFound=false;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;if(null!=imageField){var itemImage=this.entitledItems[x][imageField]}else{var itemImage=this.entitledItems[x].ItemImage467}var itemAngleThumbnail=this.entitledItems[x].ItemAngleThumbnail;var itemAngleFullImage=this.entitledItems[x].ItemAngleFullImage;for(y in Attributes){var index=y.indexOf("_");var entitledSwatchName=y.substring(0,index);var entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){if(null!=dojo.byId(this.skuImageId)){dojo.byId(this.skuImageId).src=itemImage;if(document.getElementById("ProductInfoImage_"+productId)!=null){document.getElementById("ProductInfoImage_"+productId).value=itemImage}}if(itemAngleThumbnail!=null&&itemAngleThumbnail!=undefined){shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage)}imageFound=true;break}}if(imageFound){break}}}},updateSwatchListView:function(){var swatchArray=dojo.query("a[id^='swatch_array_']");for(var i=0;i<swatchArray.length;i++){var swatchArrayElement=swatchArray[i];eval(dojo.attr(swatchArrayElement,"href"))}var swatchSkuImage=dojo.query("a[id^='swatch_setSkuImage_']");for(var i=0;i<swatchSkuImage.length;i++){var swatchSkuImageElement=swatchSkuImage[i];eval(dojo.attr(swatchSkuImageElement,"href"))}var swatchDefault=dojo.query("a[id^='swatch_selectDefault_']");for(var i=0;i<swatchDefault.length;i++){var swatchDefaultElement=swatchDefault[i];eval(dojo.attr(swatchDefaultElement,"href"))}},selectSwatch:function(c,g,a,b,f,h){if(dojo.hasClass("swatch_"+a+"_"+g,"color_swatch_disabled")){return}var e=this.selectedAttributesList[a];for(attribute in e){if(attribute==c){if(e[attribute]!=g){var d=dojo.byId("swatch_"+a+"_"+e[attribute]);d.className="color_swatch";d.src=d.src.replace("_disabled.png","_enabled.png");dojo.byId("swatch_link_"+a+"_"+e[attribute]).title=d.alt}}if(document.getElementById("swatch_link_"+a+"_"+e[attribute])!=null){document.getElementById("swatch_link_"+a+"_"+e[attribute]).setAttribute("aria-checked","false")}}this.makeSwatchSelection(c,g,a,b,f,h)},makeSwatchSelection:function(f,e,a,b,c,d){this.setSelectedAttribute(f,e,a,c,d);document.getElementById("swatch_"+a+"_"+e).className="color_swatch_selected";document.getElementById("swatch_link_"+a+"_"+e).setAttribute("aria-checked","true");document.getElementById("swatch_selection_label_"+a+"_"+f).className="header color_swatch_label";if(document.getElementById("swatch_selection_"+a+"_"+f).style.display=="none"){document.getElementById("swatch_selection_"+a+"_"+f).style.display="inline"}document.getElementById("swatch_selection_"+a+"_"+f).innerHTML=e;this.updateSwatchImages(f,a,b,d)},addToAllSwatchsArray:function(d,f,b,a){var e=this.allSwatchesArrayList[a];if(e==null){e=new Array()}if(!this.existInAllSwatchsArray(d,f,e)){var c=new Array();c[0]=d;c[1]=f;c[2]=b;c[4]=document.getElementById("swatch_link_"+a+"_"+f).onclick;e.push(c);this.allSwatchesArrayList[a]=e}},existInAllSwatchsArray:function(c,f,e){for(var b=0;b<e.length;b++){var a=e[b][0];var d=e[b][1];if(a==c&&d==f){return true}}return false},makeDefaultSwatchSelection:function(entitledItemId,doNotDisable){if(this.entitledItems.length==0){if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}this.setEntitledItems(entitledItemJSON)}for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;for(y in Attributes){var index=y.indexOf("_");var swatchName=y.substring(0,index);var swatchValue=y.substring(index+1);this.makeSwatchSelection(swatchName,swatchValue,entitledItemId,doNotDisable,imageField)}break}},updateSwatchImages:function(c,C,s,M){var q=new Array();var m=this.selectedAttributesList[C];var n=m[c];var B=this.allSwatchesArrayList[C];for(var J=0;J<B.length;J++){var I=B[J][0];var A=B[J][1];var H=B[J][2];var F=B[J][3];var u=B[J][4];if(I!=s&&I!=c){var f=new Array();f[0]=I;f[1]=A;f[2]=H;f[4]=u;f[5]=false;q.push(f)}}for(x in this.entitledItems){var K=this.entitledItems[x].Attributes;for(y in K){var p=y.indexOf("_");var L=y.substring(0,p);var l=y.substring(p+1);if(L==c&&l==n){for(z in K){var h=z.indexOf("_");var w=z.substring(0,h);var a=z.substring(h+1);if(y!=z){for(J in q){var r=q[J][0];var g=q[J][1];if(w==r&&a==g){q[J][5]=true}}}}}}}var b=[];for(J in q){var r=q[J][0];var g=q[J][1];var o=q[J][2];var k=q[J][3];var e=q[J][4];var D=q[J][5];if(D){if(document.getElementById("swatch_"+C+"_"+g).className!="color_swatch_selected"){var G=dojo.byId("swatch_"+C+"_"+g);G.className="color_swatch";G.src=G.src.replace("_disabled.png","_enabled.png");dojo.byId("swatch_link_"+C+"_"+g).title=G.alt}document.getElementById("swatch_link_"+C+"_"+g).setAttribute("aria-disabled","false");document.getElementById("swatch_link_"+C+"_"+g).onclick=e}else{if(r!=s){var G=dojo.byId("swatch_"+C+"_"+g);var E=dojo.byId("swatch_link_"+C+"_"+g);G.className="color_swatch_disabled";E.onclick=null;G.src=G.src.replace("_enabled.png","_disabled.png");var v=storeNLS.INV_ATTR_UNAVAILABLE;E.title=dojo.string.substitute(v,{0:G.alt});document.getElementById("swatch_link_"+C+"_"+g).setAttribute("aria-disabled","true");if(m[r]==g){b.push(q[J])}}}}for(J in b){var d=b[J][0];var t=b[J][1];for(J in q){var r=q[J][0];var g=q[J][1];var D=q[J][5];if(r==d&&g!=t&&D){this.makeSwatchSelection(r,g,C,s,M);break}}}},changePrice:function(entitledItemId,isPopup,displayPriceRange,productId){this.displayPriceRange=displayPriceRange;this.isPopup=isPopup;var entitledItemJSON;if(dojo.byId(entitledItemId)!=null&&!this.isPopup){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}else{entitledItemJSON=this.getEntitledItemJsonObject()}var catalogEntryId=null;this.setEntitledItems(entitledItemJSON);if(this.selectedProducts[productId]){var catalogEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[productId])}else{var catalogEntryId=this.getCatalogEntryId(entitledItemId)}if(catalogEntryId!=null){if(this.itemPriceJsonOject[catalogEntryId]!=null&&this.itemPriceJsonOject[catalogEntryId]!="undefined"){this.displayPrice(this.itemPriceJsonOject[catalogEntryId].catalogEntry,productId);console.debug("ShoppingActions.changePrice: using stored json object.")}else{var parameters={};parameters.storeId=this.storeId;parameters.langId=this.langId;parameters.catalogId=this.catalogId;parameters.catalogEntryId=catalogEntryId;parameters.productId=productId;dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByIDView",handleAs:"json-comment-filtered",content:parameters,service:this,load:shoppingActionsJS.displayPriceServiceResponse,error:function(errObj,ioArgs){console.debug("ShoppingActions.changePrice: Unexpected error occurred during an xhrPost request.")}})}}else{console.debug("ShoppingActions.changePrice: all attributes are not selected.")}},displayPriceServiceResponse:function(b,a){var c=a.args.content.productId;shoppingActionsJS.itemPriceJsonOject[b.catalogEntry.catalogEntryIdentifier.uniqueID]=b;shoppingActionsJS.displayPrice(b.catalogEntry,c)},displayPrice:function(c,g){var e;var b=shoppingActionsJS.isPopup;if(b==true){document.getElementById("productPrice").innerHTML=c.offerPrice;document.getElementById("productName").innerHTML=c.description[0].name;document.getElementById("productSKUValue").innerHTML=c.catalogEntryIdentifier.externalIdentifier.partNumber}if(b==false){var l="";var d=dojo.currency.parse(c.listPrice,{symbol:this.currencySymbol});var k=dojo.currency.parse(c.offerPrice,{symbol:this.currencySymbol});this.setPriceInProductList(g,k);if(!c.listPriced||d<=k){l="<span id='offerPrice_"+c.catalogEntryIdentifier.uniqueID+"' class='price'>"+c.offerPrice+"</span>"}else{l="<span id='listPrice_"+c.catalogEntryIdentifier.uniqueID+"' class='old_price'>"+c.listPrice+"</span><span id='offerPrice_"+c.catalogEntryIdentifier.uniqueID+"' class='price'>"+c.offerPrice+"</span>"}document.getElementById("price_display_"+g).innerHTML=l+"<input type='hidden' id='ProductInfoPrice_"+c.catalogEntryIdentifier.uniqueID+"' value='"+c.offerPrice+"'/>";l="";if(shoppingActionsJS.displayPriceRange==true){for(var h in c.priceRange){if(c.priceRange[h].endingNumberOfUnits==c.priceRange[h].startingNumberOfUnits){e=storeNLS.PQ_PRICE_X;l=l+"<p>"+dojo.string.substitute(e,{0:c.priceRange[h].startingNumberOfUnits})}else{if(c.priceRange[h].endingNumberOfUnits!="null"){e=storeNLS.PQ_PRICE_X_TO_Y;l=l+"<p>"+dojo.string.substitute(e,{0:c.priceRange[h].startingNumberOfUnits,1:c.priceRange[h].endingNumberOfUnits})}else{e=storeNLS.PQ_PRICE_X_OR_MORE;l=l+"<p>"+dojo.string.substitute(e,{0:c.priceRange[h].startingNumberOfUnits})}}l=l+" <span class='price'>"+c.priceRange[h].localizedPrice+"</span></p>"}}var a=dojo.byId("productLevelPriceRange_"+g);var m=dojo.byId("itemLevelPriceRange_"+g);if(null!=a&&null==m){dojo.style(a,"display","")}else{if(""!=l&&null!=m){l=storeNLS.PQ_PURCHASE+l;m.innerHTML=l;dojo.style(m,"display","");if(null!=a){dojo.style(a,"display","none")}}else{if(""==l){if(null!=m){dojo.style(m,"display","none")}if(null!=a){dojo.style(a,"display","")}}}}var f=dojo.query("#product_name_"+g+" > a");if(f.length==1){f[0].innerHTML=c.description[0].name}else{if(dojo.byId("product_name_"+g)){dojo.byId("product_name_"+g).innerHTML=c.description[0].name}}if(document.getElementById("ProductInfoName_"+g)!=null){document.getElementById("ProductInfoName_"+g).value=c.description[0].name}if(document.getElementById("product_shortdescription_"+g)){document.getElementById("product_shortdescription_"+g).innerHTML=c.description[0].shortDescription}if(document.getElementById("product_SKU_"+g)){document.getElementById("product_SKU_"+g).innerHTML=storeNLS.SKU+" "+c.catalogEntryIdentifier.externalIdentifier.partNumber}}},showWCDialogPopup:function(b){var a=dijit.byId(b);if(a!=null){a.closeButtonNode.style.display="none";a.show()}else{console.debug(b+" does not exist")}},notifyAttributeChange:function(b){this.baseCatalogEntryId=b;var a=this.selectedAttributesList["entitledItem_"+b];dojo.publish("attributesChanged_"+b,[dojo.toJson(a)]);dojo.publish("attributesChanged",[dojo.toJson(a)])},notifyQuantityChange:function(a){dojo.publish("quantityChanged",[a])},initCompare:function(b){if(b=="compare"){this.checkForCompare()}else{var c=this.cookieKeyPrefix+this.storeId;var a="";dojo.cookie(c,a,{path:"/"})}},changeCompareBox:function(a,b){box=document.getElementById(a);box.checked=!box.checked;this.addOrRemoveFromCompare(b,box.checked)},addOrRemoveFromCompare:function(b,a){if(a){this.addToCompare(b)}else{this.removeFromCompare(b)}},addToCompare:function(d){var g=this.cookieKeyPrefix+this.storeId;var f=dojo.cookie(g);if(f!=null){if(f.indexOf(d)!=-1||d==null){MessageHelper.displayErrorMessage(storeNLS.COMPARE_ITEM_EXISTS);return}}var c=0;if(f!=null&&f!=""){c=f.split(this.cookieDelimiter).length}if(c<parseInt(this.maxNumberProductsAllowedToCompare)){var e="";if(f==null||f==""){e=d}else{e=f+this.cookieDelimiter+d}dojo.cookie(g,e,{path:"/"});document.getElementById("compare_"+d).style.visibility="visible";console.debug("Product added to cookie");c=c+1;if(c==this.minNumberProductsAllowedToCompare){var a=document.getElementById("compare_button_disabled");var b=document.getElementById("compare_button_enabled");a.style.display="none";b.style.display="block";dojo.removeClass("compare_button","disabled")}}else{this.showWCDialogPopup("widget_product_comparison_popup");document.getElementById("comparebox_"+d).checked=false;console.debug("You can only compare up to 4 products")}},removeFromCompare:function(e){var h=this.cookieKeyPrefix+this.storeId;var g=dojo.cookie(h);var d=0;if(g!=null){if(dojo.trim(g)==""){dojo.cookie(h,null,{expires:-1})}else{var b=g.split(this.cookieDelimiter);var f="";for(index in b){if(b[index]!=e){if(f==""){f=b[index]}else{f=f+this.cookieDelimiter+b[index]}}}dojo.cookie(h,f,{path:"/"});d=f.split(this.cookieDelimiter).length}document.getElementById("compare_"+e).removeAttribute("style");console.debug("Product removed from cookie");if(d<this.minNumberProductsAllowedToCompare){var a=document.getElementById("compare_button_disabled");var c=document.getElementById("compare_button_enabled");a.style.display="inline";c.style.display="none";dojo.addClass("compare_button","disabled")}}},compareProducts:function(b){var a="CompareProductsDisplayView?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId+"&compareReturnName="+this.compareReturnName+"&searchTerm="+this.searchTerm;if(""!=b.top_category){a=a+"&top_category="+b.top_category}if(""!=b.parent_category_rn){a=a+"&parent_category_rn="+b.parent_category_rn}if(""!=b.categoryId){a=a+"&categoryId="+b.categoryId}var d=this.cookieKeyPrefix+this.storeId;var c=dojo.cookie(d);if(c!=null&&dojo.trim(c)!=""){a=a+"&catentryId="+c}var e=location.href;if(e.indexOf("?")==-1){e=e+"?fromPage=compare"}else{if(e.indexOf("fromPage=compare")==-1){e=e+"&fromPage=compare"}}a=a+"&returnUrl="+encodeURIComponent(e);location.href=getAbsoluteURL()+a},setProductQuantity:function(e,c,d,b){var a=null;if(this.productList[c]){a=this.productList[c]}else{a=new Object();this.productList[c]=a;a.baseItemId=c;if("item"==e){a.id=c}else{a.id=0}}a.quantity=d;dojo.publish("quantityChanged",[dojo.toJson(a)]);a.price=dojo.number.parse(b)},quantityChanged:function(b,c){if(this.productList[b]){var a=this.productList[b];a.quantity=dojo.trim(c);dojo.publish("quantityChanged",[dojo.toJson(a)]);if(MerchandisingAssociationJS!=null){if(MerchandisingAssociationJS.baseItemParams!=null){if(MerchandisingAssociationJS.baseItemParams.type=="BundleBean"){for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++){if(b==MerchandisingAssociationJS.baseItemParams.components[idx].productId||b==MerchandisingAssociationJS.baseItemParams.components[idx].id){MerchandisingAssociationJS.baseItemParams.components[idx].quantity=a.quantity}}}}}}},setPriceInProductList:function(c,b){var a=this.productList[c];if(a){a.price=b}},selectBundleItemSwatch:function(s,r,n,f){if(dojo.hasClass("swatch_"+s+"_"+r+"_"+n,"color_swatch_disabled")){return false}if(dojo.byId("entitledItem_"+s)!=null){var g;var v=r+"_"+n;g=dojo.fromJson(dojo.byId("entitledItem_"+s).innerHTML);var u=new Array();for(idx in g){var d=false;var m=g[idx];for(attribute in m.Attributes){if(v==attribute){d=true;break}}if(d){for(attribute in m.Attributes){var q=attribute.substring(0,attribute.lastIndexOf("_"));if(q!=f&&q!=r){u.push(attribute)}}}}var c=new Array();var a=new Array();for(idx in g){var m=g[idx];for(attribute in m.Attributes){var q=attribute.substring(0,attribute.lastIndexOf("_"));if(q!=f&&q!=r){var p="swatch_"+s+"_"+attribute;var h=p.replace("swatch_","swatch_link_");if(dojo.indexOf(u,attribute)>-1){if(!dojo.hasClass(p,"color_swatch_selected")){dojo.byId(p).className="color_swatch";dojo.byId(p).src=dojo.byId(p).src.replace("_disabled.png","_enabled.png");dojo.byId(h).title=dojo.byId(p).alt;document.getElementById(h).setAttribute("aria-disabled","false")}}else{if(dojo.indexOf(c,attribute)==-1){c.push(attribute);if(dojo.hasClass(p,"color_swatch_selected")){a.push(p)}dojo.byId(p).className="color_swatch_disabled";dojo.byId(p).src=dojo.byId(p).src.replace("_enabled.png","_disabled.png");var k=storeNLS.INV_ATTR_UNAVAILABLE;var b=dojo.byId(p).alt;dojo.byId(h).title=dojo.string.substitute(k,{0:b});document.getElementById(h).setAttribute("aria-disabled","true")}}}if(document.getElementById("swatch_link_"+s+"_"+attribute)!=null){document.getElementById("swatch_link_"+s+"_"+attribute).setAttribute("aria-checked","false")}}}for(idx in a){var l=a[idx];var t=l.substring(0,l.lastIndexOf("_"));var w=false;dojo.query("[id^='"+t+"']").forEach(function(D,C,A){if(!w&&dojo.hasClass(D,"color_swatch")){var B=D.id.split("_");shoppingActionsJS.selectBundleItemSwatch(B[1],B[2],B[3],f);shoppingActionsJS.setSelectedAttributeOfProduct(B[1],B[2],B[3],false);w=true}})}}if(dojo.byId("swatch_selection_"+s+"_"+r).style.display=="none"){dojo.byId("swatch_selection_"+s+"_"+r).style.display="inline"}dojo.byId("swatch_selection_"+s+"_"+r).innerHTML=n;var o="swatch_"+s+"_"+r+"_";var e="swatch_link_"+s+"_"+r+"_";dojo.query("img[id^='"+o+"']").forEach(function(C,B,A){if(dojo.hasClass(C,"color_swatch_disabled")){dojo.removeClass(C,"color_swatch")}else{dojo.addClass(C,"color_swatch")}dojo.removeClass(C,"color_swatch_selected")});dojo.byId(o+n).className="color_swatch_selected";document.getElementById(e+n).setAttribute("aria-checked","true");this.setSelectedAttributeOfProduct(s,r,n,false);this.changeBundleItemImage(s,r,n,"productThumbNailImage_"+s)},changeBundleItemImage:function(catalogEntryId,swatchAttrName,swatchAttrValue,skuImageId){var entitledItemId="entitledItem_"+catalogEntryId;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}this.setEntitledItems(entitledItemJSON);var skuImage=null;var imageArr=shoppingActionsJS.getImageForBundleItem(catalogEntryId);if(imageArr!=null){skuImage=imageArr[1]}if(skuImageId!=undefined){this.setSKUImageId(skuImageId)}if(skuImage!=null){if(dojo.byId(this.skuImageId)!=null){document.getElementById(this.skuImageId).src=skuImage;if(document.getElementById("ProductInfoImage_"+catalogEntryId)!=null){document.getElementById("ProductInfoImage_"+catalogEntryId).value=skuImage}}}else{var imageFound=false;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;var itemImage=this.entitledItems[x].ItemThumbnailImage;for(y in Attributes){var index=y.indexOf("_");var entitledSwatchName=y.substring(0,index);var entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){document.getElementById(this.skuImageId).src=itemImage;if(document.getElementById("ProductInfoImage_"+catalogEntryId)!=null){document.getElementById("ProductInfoImage_"+catalogEntryId).value=itemImage}imageFound=true;break}}if(imageFound){break}}}},getImageForBundleItem:function(a){var c=[];var b=this.selectedProducts[a];for(attribute in b){c.push(attribute+"_"+b[attribute])}return this.resolveImageForSKU(c)},checkForCompare:function(){var g=this.cookieKeyPrefix+this.storeId;var f=dojo.cookie(g);var d=0;if(f!=null){var e=f.split(this.cookieDelimiter);for(idx=0;idx<e.length;idx++){var c=e[idx];if(null!=dojo.byId("compare_"+c)){dojo.byId("comparebox_"+c).checked=true;dojo.byId("compare_"+c).style.visibility="visible"}if(++d==this.minNumberProductsAllowedToCompare){var a=dojo.byId("compare_button_disabled");var b=dojo.byId("compare_button_enabled");a.style.display="none";b.style.display="block";dojo.removeClass("compare_button","disabled")}}}},replaceItemAjaxHelper:function(e,m,b,h,a,f){var c=[];c.storeId=WCParamJS.storeId;c.catalogId=WCParamJS.catalogId;c.langId=WCParamJS.langId;c.orderItemId=b;c.orderId=".";if(CheckoutHelperJS.shoppingCartPage){c.calculationUsage="-1,-2,-5,-6,-7"}else{c.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}var k=[];k.storeId=WCParamJS.storeId;k.catalogId=WCParamJS.catalogId;k.langId=WCParamJS.langId;k.catEntryId=e;k.quantity=m;k.orderId=".";if(CheckoutHelperJS.shoppingCartPage){k.calculationUsage="-1,-2,-5,-6,-7"}else{k.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}var g=[];g.storeId=WCParamJS.storeId;g.catalogId=WCParamJS.catalogId;g.langId=WCParamJS.langId;g.orderId=".";if(CheckoutHelperJS.shoppingCartPage){g.calculationUsage="-1,-2,-5,-6,-7"}else{g.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}var d=false;var l=true;if(h!=null&&h!=""){g.addressId=h}if(a!=null&&a!=""){g.shipModeId=a}if(f!=null&&f!=""){g.physicalStoreId=f;l=false}if(g.shipModeId!=null&&(g.addressId!=null||g.physicalStoreId!=null)){d=true}if(l){g.allocate="***";g.backorder="***";g.remerge="***";g.check="*n"}wc.service.declare({id:"AjaxReplaceItem",actionId:"AjaxReplaceItem",url:"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(n){if(!d){wc.service.invoke("AjaxAddOrderItem",k)}else{wc.service.invoke("AjaxAddOrderItemTemp",k)}},failureHandler:function(n){if(n.errorMessage){MessageHelper.displayErrorMessage(n.errorMessage)}else{if(n.errorMessageKey){MessageHelper.displayErrorMessage(n.errorMessageKey)}}cursor_clear()}});wc.service.declare({id:"AjaxAddOrderItemTemp",actionId:"AjaxAddOrderItemTemp",url:"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(n){if(l){g.orderItemId=n.orderItemId[0]}MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_ADDED);wc.service.invoke("OrderItemAddressShipMethodUpdate",g)},failureHandler:function(n){MessageHelper.displayErrorMessage(n.errorMessageKey)}});if(!submitRequest()){return}cursor_wait();wc.service.invoke("AjaxReplaceItem",c)},customizeDynamicKit:function(m,g,d,k){var e=[];e.catEntryId=m;e.quantity=g;if(k!=null&&k!="undefined"){e.dl=k}var h=document.querySelectorAll(".selectedSwatch")[0];if(h!=null&&h!="undefined"){var l=$(h).children().first();var f=$(l).get(0);var n=$(f).attr("title");if(n){var c=n.split(" ").join("+");e.color=c}}if(!isPositiveInteger(g)){MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);return}var a=document.getElementsByName("contractSelectForm_contractId");if(a!=null&&a!="undefined"){for(i=0;i<a.length;i++){if(a[i].checked){e.contractId=a[i].value;break}}}if(d!=null&&d!="undefined"&&d.length>0){for(i in d){e[i]=d[i]}}if(!submitRequest()){return}cursor_wait();var b=ctoURL;for(param in e){b+="&"+param+"="+e[param]}document.location.href=b}};