CallcenterCommonJS={manageOrderLock:function(b,a){var c=[];c.storeId=a;c.ccAction=b;cursor_wait();wc.service.invoke("CCManageOrderLock",c)},callOrderLockHelper:function(a,b){var c=[];if(a){c.storeId=a}if(b){c.takeoverlock=b}cursor_wait();wc.service.invoke("CCOrderLockHelper",c)},updateCartItemQty:function(e,a,b,f,k,c,d){if($("img#progress_bar_icon").length>0){$("img#progress_bar_icon").center()}var g=$("input#"+e)[0];var h=g.value;setCurrentId(e);CheckoutHelperJS.setPreviousValue(a,e);CheckoutHelperJS.setCommonParameters(f,k,c);if(d=="VGC"||d=="PGC"||d=="PROMO_GC"){CheckoutHelperJS.updateGiftCardTable(g,b,"update")}CheckoutHelperJS.updateCartWait(g,b)},toggleError:function(e,a,c){var d=e.parents(".inputWrapper");d.removeClass("errorHighlight");var b=d.find(".errorClass");d.find(".errorClass").text(c);d.find(".errorClass").css("display","block");if(a){d.addClass("errorHighlight")}},isValidEmail:function(a){return a!=null&&a.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/)},isEmptyString:function(a){return(!a||/^\s*$/.test(a))},validInput:function(d,b){var a=true;var c="";if(isEmptyString(d.val())){if(isMandatory(d)){a=false;c=d.data("errnull")}}else{a=isValidEmail(d.val());if(!a){c=d.data("errinv")}}if(b){toggleError(d,!a,c)}return a},sendEmailQuote:function(o){var b=document.forms[o];var t=[];var c="";var g="";var f="";var e="";var u="No";var q="No";var v="";var n="";var d="";var l="";var k="";var m="";var a="";var h="";var s="";if(b.emailTo.value){c=trim(b.emailTo.value)}if(b.quoteNo.value){g=trim(b.quoteNo.value)}if($("#emailTo").val().indexOf(";")>0){console.log("Email List!!!");var r=$("#emailTo").val().split(";");validEmail=true;for(var p=0;p<r.length;p++){if(!isValidEmail(r[p])){errMsg=$ele.data("errinv");validEmail=false}}if(!validEmail){console.log("Not a valid Email!!");toggleError($("#emailTo"),!validEmail,errMsg);return}}else{console.log(" Single Email Does not Exist!!!");if(!validInput($("#emailTo"),true)){return}}if(b.orderId.value){f=trim(b.orderId.value)}if(b.shipAddressId.value){e=trim(b.shipAddressId.value)}if(b.total.value){v=trim(b.total.value)}if(b.crs_id.value){n=trim(b.crs_id.value)}if(b.bp_id.value){d=trim(b.bp_id.value)}if(b.smb_type.value){l=trim(b.smb_type.value)}if($("#agentcontactcustomchkbox").hasClass("checked")){u="Yes"}if($("#pfFormcustomchkbox").hasClass("checked")){q="Yes"}if(b.subsidyAmount.value){k=trim(b.subsidyAmount.value)}if(b.subsidyAuthID.value){m=trim(b.subsidyAuthID.value)}if(b.subsidyFlag.value){a=trim(b.subsidyFlag.value)}if(b.jarvisDiscount.value){s=trim(b.jarvisDiscount.value)}t.emailTo=c;t.quoteNo=g;t.useAgentContactFlag=u;t.purchaseOrderForm=q;t.orderId=f;t.shipAddressId=e;t.total=v;t.subsidyAmt=k;t.subsidyAuthID=m;t.subsidyFlag=a;t.listPriceMap=b.listPrice.value;t.jarvisDisc=s;t.crs_id=n;t.bp_id=d;if(b.qcIdMap!=undefined){t.qcIdJson=b.qcIdMap.value}if(b.pstoreph!=undefined){t.pstoreph=b.pstoreph.value}cursor_wait();wc.service.invoke("CCSendEmailQuote",t)},reskinSendEmailQuote:function(o){var b=document.forms[o];var r=[];var c="";var g="";var f="";var e="";var s="No";var p="No";var t="";var n="";var d="";var l="";var k="";var m="";var a="";var h="";var q="";if(b.emailTo.value){c=trim(b.emailTo.value)}if(b.quoteNo.value){g=trim(b.quoteNo.value)}if(b.orderId.value){f=trim(b.orderId.value)}if(b.shipAddressId.value){e=trim(b.shipAddressId.value)}if(b.total.value){t=trim(b.total.value)}if(b.crs_id.value){n=trim(b.crs_id.value)}if(b.bp_id.value){d=trim(b.bp_id.value)}if(b.smb_type.value){l=trim(b.smb_type.value)}if($("#includeAgentInfo").is(":checked")){s="Yes"}if($("#includePurchaseOrderForm").is(":checked")){p="Yes"}if(b.subsidyAmount.value){k=trim(b.subsidyAmount.value)}if(b.subsidyAuthID.value){m=trim(b.subsidyAuthID.value)}if(b.subsidyFlag.value){a=trim(b.subsidyFlag.value)}if(b.jarvisDiscount.value){q=trim(b.jarvisDiscount.value)}r.emailTo=c;r.quoteNo=g;r.useAgentContactFlag=s;r.purchaseOrderForm=p;r.orderId=f;r.shipAddressId=e;r.total=t;r.subsidyAmt=k;r.subsidyAuthID=m;r.subsidyFlag=a;r.listPriceMap=b.listPrice.value;r.jarvisDisc=q;r.crs_id=n;r.bp_id=d;if(b.qcIdMap!=undefined){r.qcIdJson=b.qcIdMap.value}if(b.pstoreph!=undefined){r.pstoreph=b.pstoreph.value}cursor_wait();wc.service.invoke("CCReskinSendEmailQuote",r)},resetSendEmailQuote:function(){$("#emailTo").removeClass("error");$("#emailQuoteMessage").text("")},saveSubsidy:function(h,e){var b=document.forms[h];var d=[];if($("#SaveSubsidyForm #saveButton").hasClass("applyActive")){d.ordId=b.ordId.value;d.storeId=b.storeId.value;d.langId=b.langId.value;var f=b.subsidyAmount.value;var a=f.replace("$ ","").replace(/,/g,"");d.subsidyAmount=a;d.subsidyAuthNo=b.subsidyAuthNo.value;var l=b.subsidyAuthNo.value;d.subsidyIdentificationNo=b.subsidyIdentificationNo.value;d.agentId=b.agentId.value;d.subAccNumber=$("#subsidyAccountNumber").attr("value");var c=b.ordTotal.value;d.ordTotal=c.replace("$ ","").replace(/,/g,"");if(e=="Save"){d.action="save"}cursor_wait();wc.service.invoke("CCSaveSubsidy",d);var g=document.forms.EmailQuoteForm;g.subsidyAmount.value=a;g.subsidyAuthID.value=l;if(g.purchaseOrderForm!=undefined){if($("#pfFormcustomchkbox").hasClass("checked")){$("#pfFormcustomchkbox").removeClass("checked");g.purchaseOrderForm="No"}}var k=document.forms.downloadPdfForm;k.pdf_subsidyAmt.value=a;k.pdf_subsidyAuthID.value=b.subsidyAuthNo.value}},downloadQuoteAsPdf:function(){$("#downloadPdfForm").submit()}};dojo.require("wc.service.common");CCServicesDeclarationJS={};wc.service.declare({id:"CCManageOrderLock",actionId:"CCManageOrderLock",url:"ccAjaxManageOrderLock",formId:"",successHandler:function(a){if(a.lockAction=="R"){$("#callCenterDialog p#message").html("Cart is now unlocked");$("#callCenterDialog").foundation("reveal","open")}else{$("#callCenterDialog p#message").html("Cart is now locked");$("#callCenterDialog").foundation("reveal","open")}cursor_clear()},failureHandler:function(a){if(a.errorMessage){$("#callCenterDialog p#message").html(a.errorMessage);$("#callCenterDialog").foundation("reveal","open")}else{if(a.errorMessageKey){$("#callCenterDialog p#message").html(a.errorMessageKey);$("#callCenterDialog").foundation("reveal","open")}}cursor_clear()}}),wc.service.declare({id:"CCOrderLockHelper",actionId:"CCOrderLockHelper",url:"ccAjaxOrderLockHelper",formId:"",successHandler:function(a){cursor_clear();if(a.continueFlow=="N"){document.location.href="AjaxOrderItemDisplayView?storeId="+a.storeId+"&errType="+a.errType}},failureHandler:function(a){MessageHelper.hideAndClearMessage();cursor_clear()}}),wc.service.declare({id:"CCManageLVOFlag",actionId:"CCManageLVOFlag",url:"ccAjaxManageLVOFlag",formId:"",successHandler:function(a){cursor_clear()},failureHandler:function(a){if(a.errorMessage){alert(a.errorMessage)}else{if(a.errorMessageKey){alert(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxSubmitOrderComments",actionId:"AjaxSubmitOrderComments",url:"ccAjaxSubmitOrderComments",formId:"",successHandler:function(a){console.debug(" Successfully inserted the order comments")},failureHandler:function(a){console.debug("Failed to insert order comments ");cursor_clear()}}),wc.service.declare({id:"CCSendEmailQuote",actionId:"CCSendEmailQuote",url:"emailQuote",formId:"",successHandler:function(a){CallcenterCommonJS.resetSendEmailQuote();$("#emailTo").val("");$("#callCenterDialog p#message").html("Quote has been sent successfully");$("#callCenterDialog").foundation("reveal","open")},failureHandler:function(a){CallcenterCommonJS.resetSendEmailQuote();$("#emailTo").addClass("error");$("#emailQuoteMessage").text(a.errorMessage)}}),wc.service.declare({id:"CCReskinSendEmailQuote",actionId:"CCReskinSendEmailQuote",url:"emailQuote",formId:"",successHandler:function(a){CallcenterCommonJS.resetSendEmailQuote();$(".SENDQUOTE-box.modal-box .modal-send1").removeClass("show");$(".SENDQUOTE-box.modal-box .modal-send1").addClass("hide");$(".SENDQUOTE-box.modal-box #successQuoteMsg").removeClass("hide");if($("#punchoutFlow").val()=="yes"){modalFade("SENDQUOTE-box")}},failureHandler:function(a){CallcenterCommonJS.resetSendEmailQuote();$(".email.inputWrapper").addClass("error");$(".email.inputWrapper").removeClass("valid");$("#emailTo").addClass("error");$("#emailTo").addClass("filled");$("#email-error").text(a.errorMessage).show();$("#emailTo").focus();$("#sendbutton").addClass("Button-module_disabled__2R_Hv")}}),wc.service.declare({id:"CCSaveSubsidy",actionId:"CCSaveSubsidy",url:"saveSubsidy",formId:"",successHandler:function(b){if(b.ordAmtLess=="error"){$("#errorDiv").removeClass("hideComp");$("#errorDiv").text(b.errorMsg)}if(b.action=="Saved"){function c(h){h=parseFloat(h).toFixed(2);h+="";var d=h.split(".");var g=d[0];var e=d.length>1?"."+d[1]:"";var f=/(\d+)(\d{3})/;while(f.test(g)){g=g.replace(f,"$1,$2")}return g+e}$("#subsidy_container").toggle();$("#sub_applied").removeClass("hideComp");$("#hideCheckbox").addClass("hideComp");var a=c(b.subsidyAmt);$("#subDivText").html('Subsidy <span class="price">-$'+a+"</span>");$("#subsidyTotal").text("$"+c(b.newOrdTotal));$("#quote_total_amount").text("$"+c(b.newOrdTotal));if(b.subsidyAuthNo!=""){$("#subAuthorizationNumberTxt").text("Authorization Number");$("#subAuthorizationNumberVal").text(b.subsidyAuthNo)}else{$("#subAuthorizationNumberTxt").text("");$("#subAuthorizationNumberVal").text("")}$("#po_Form_check").addClass("hideComp");$("#poForm").addClass("hideComp");$("#errorDiv").addClass("hideComp");$("#subsidyAppliedCheck").val("Applied");$("#isSubsidyApplied").val("true");if(b.subsidyAuthNo==""){$("#subAuthorizationNumberTxt").text("");$("#subAuthorizationNumberVal").text("")}else{$("#subAuthorizationNumberTxt").text("Authorization Number");$("#subAuthorizationNumberVal").text(b.subsidyAuthNo)}}},failureHandler:function(a){}});dojo.require("wc.service.common");ServicesDeclarationJS={langId:"-1",storeId:"",catalogId:"",catentIdPST:"",OrderLevelCoupon:"",setCatentIdPST:function(a){catentIdPST=a},getCatentIdPST:function(){return catentIdPST},setCommonParameters:function(c,a,b){this.langId=c;this.storeId=a;this.catalogId=b},setOrderLevelcouponApplied:function(a){console.debug("OrderLevelCoupon"+a);this.OrderLevelCoupon=a},getOrderLevelcouponApplied:function(){return this.OrderLevelCoupon}};function nullCartTotalCookie(a){dojo.cookie("WC_CartTotal_"+a,null,{expires:-1,path:"/"});var e=document.cookie.split(";");for(var d=0;d<e.length;d++){var c=e[d].indexOf("=");var b=e[d].substr(0,c);var f=e[d].substr(c+1);b=b.replace(/^\s+|\s+$/g,"");f=f.replace(/^\s+|\s+$/g,"");if(f==a){dojo.cookie(b,null,{expires:-1,path:"/"});break}}}wc.service.declare({id:"AjaxInterestItemAddAndDeleteFromCart",actionId:"AjaxInterestItemAddAndDeleteFromCart",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();requestSubmitted=false;CheckoutHelperJS.deleteFromCart(a.orderItemId,true);MessageHelper.displayStatusMessage(MessageHelper.messages.WISHLIST_ADDED)},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxCarePackvalidation",actionId:"AjaxCarePackvalidation",url:getAbsoluteURL()+"AjaxCarePackvalidation",formId:"",successHandler:function(a){requestSubmitted=false;if(a.orderItemIDs.length!=0){carePackPopup(a.orderItemIDs,a.orderId,a.storeId,a.langId,a.catalogId,a.isCarePackAsFreeGiftExist)}},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxAddOrderItem",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(b){document.location.reload();cursor_clear();if(categoryDisplayJS){var a=document.getElementsByName("attrValue");var d=true;for(var c=0;c<a.length;c++){if(a[c].options.length>1){d=false}}if(!d){categoryDisplayJS.selectedAttributes=[];for(var c=0;c<a.length;c++){if(a[c]!=null){a[c].value=""}}}}if(typeof(ShipmodeSelectionExtJS)!=null&&typeof(ShipmodeSelectionExtJS)!="undefined"){ShipmodeSelectionExtJS.setOrderItemId(b.orderItemId[0])}},failureHandler:function(a){if(a.errorMessage){if(a.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER)}else{if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxAddOrderItem_shopCart",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(a){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId},failureHandler:function(a){if(a.errorMessage){if(a.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER)}else{if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxDeleteOrderItem",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(a){var d="empty";var b="empty";var c="empty";var e="";if(document.getElementById("orderLevelCouponApplied")!=null){e=document.getElementById("orderLevelCouponApplied").value}if(document.getElementById("couponAppliedPartNumber")!=null){b=document.getElementById("couponAppliedPartNumber").value}if(document.getElementById("partNumber")!=null){c=document.getElementById("partNumber").value}if(document.getElementById("appliedCode")!=null){d=document.getElementById("appliedCode").value}if(CheckoutHelperJS.shoppingCartPage){ServicesDeclarationJS.setOrderLevelcouponApplied(e)}if(e!="true"){if(b==c&&d!="empty"){CheckoutHelperJS.removeCouponCode()}else{if(b==""&&d!="empty"){CheckoutHelperJS.removeCouponCode()}}}MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_REMOVEITEM)},failureHandler:function(a){if(a.errorMessageKey=="_ERR_ORDER_IS_LOCKED"||a.errorMessageKey=="_ERR_ORDER_IS_NOT_LOCKED"){document.location.href="AjaxOrderItemDisplayView?storeId="+a.storeId+"&errType="+a.errType}if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxDeleteOrderItemForShippingBillingPage",actionId:"AjaxDeleteOrderItemForShippingBillingPage",url:"HPOrderItemRemoveUpdateCmd",formId:"",successHandler:function(u){SBControllersDeclarationJS.setRemoveClick("Y");var H="empty";var b="empty";var o="empty";var G="";if(document.getElementById("orderLevelCouponApplied")!=null){G=document.getElementById("orderLevelCouponApplied").value}if(document.getElementById("couponAppliedPartNumber")!=null){b=document.getElementById("couponAppliedPartNumber").value}if(document.getElementById("partNumber")!=null){o=document.getElementById("partNumber").value}if(document.getElementById("appliedCode")!=null){H=document.getElementById("appliedCode").value}if(G!="true"){if(b==o&&H!="empty"){CheckoutHelperJS.removeCouponCode()}else{if(b==""&&H!="empty"){CheckoutHelperJS.removeCouponCode()}}}dropdownInit=false;dropdownUpdated=false;setShopCartRedirectCookie();showMiniShopCartDropDown("widget_minishopcart","quick_cart_container","orderItemsListAutoClose1");updateCartCookie();wc.render.updateContext("MiniShoppingCartContext",{status:"load"});cursor_clear();CheckoutPayments.checkoutofstock();var l=u.CTOAvail;var d=u.PGCAvail;var v=u.VGCAvail;var F=u.STOAvail;var p=u.ShipPrices;var e=u.shipModes;var s=u.ordAmount;var h=u.residenceChk;var D=new Map;D=u.giftmap;var f="0.0";var k=p["Standard 3-5 Business Day"];var m=p["Two Business Days"];var C=p["Next Business Day"];if(parseFloat(k)==parseFloat(f)){$("#shippingmethodoption0").attr("Price","Free");document.getElementById("price0").innerHTML="Free"}else{$("#shippingmethodoption0").attr("Price","$"+k);document.getElementById("price0").innerHTML="$"+k}if(parseFloat(m)==parseFloat(f)){$("#shippingmethodoption1").attr("Price","Free");document.getElementById("price1").innerHTML="Free"}else{$("#shippingmethodoption1").attr("Price","$"+m);document.getElementById("price1").innerHTML="$"+m}if(v){var B=0;for(var A in D){var E="VGCMessage"+B;document.getElementById(E).innerHTML="Your HP-e-Gift Card will be sent to "+D[A];B++}E="VGCMessage"+B;document.getElementById(E).innerHTML=" "}if(!l){var n=document.getElementById("shippingmethodoption2");if(n==null){var J=document.getElementById("shippingoptionlist");var a=document.createElement("div");a.setAttribute("name","shippingmethodoption large-3 small-6 column");a.setAttribute("class","shippingmethodoption large-3 small-6 column");a.setAttribute("id","shippingmethodoptiondiv");J.appendChild(a);var w=document.getElementById("shippingmethodoptiondiv");var t=document.createElement("input");t.setAttribute("class","shippingoptionradio");t.setAttribute("type","radio");t.setAttribute("id","shippingmethodoption2");t.setAttribute("name","shippingmethodoption");if(parseFloat(C)==parseFloat(f)){t.setAttribute("price","Free")}else{t.setAttribute("price","$"+C)}t.setAttribute("onchange","displayPrice(this);shResidencediv();");w.appendChild(t);var r=document.createElement("span");r.setAttribute("class","custom radio");w.appendChild(r);var q=document.createElement("div");q.setAttribute("class","shippingoptiondetail");w.appendChild(q);var I=document.createElement("p");var c=document.createTextNode("  Next Business Day");I.appendChild(c);var y=document.createElement("BR");I.appendChild(y);if(parseFloat(C)==parseFloat(f)){var x=document.createTextNode("Free")}else{var x=document.createTextNode("$"+p["Next Business Day"])}I.appendChild(x);var z=document.createElement("input");z.setAttribute("type","hidden");z.setAttribute("id","shippingmethodoption2");z.setAttribute("name","shippingmethodoption");z.setAttribute("value","Next Business Day");I.appendChild(z);q.appendChild(I)}if(!F){if(d){document.getElementById("shippingmethodoption2").disabled=true;document.getElementById("shippingmethodoption1").disabled=true;$("#radiocheck0").attr("class","custom radio checked");$("#radiocheck1").attr("class","custom radio");$("#radiocheck2").attr("class","custom radio");$("#shippingmethodoption0").attr("checked",true);$("#shippingmethodoption1").attr("checked",false);$("#shippingmethodoption2").attr("checked",false)}else{alert("hide all shipmethods");document.getElementById("shippingoptionlist").style.display="none"}}}CheckoutPayments.getBmlPromotions();$(".securecheckout .progresschkt .shipping").removeClass("pendingstep completestep").addClass("activestep");$(".securecheckout .progresschkt .payment").removeClass("activestep completestep").addClass("pendingstep");$(".securecheckout .progresschkt .confirmation").removeClass("activestep completestep").addClass("pendingstep");$(".securecheckout .confirmation .context-area").css("display","none");$(".securecheckout .confirmation").addClass("nocontext");$(".securecheckout .confirmation .title-area h2").addClass("inactive");$(".securecheckout .confirmation .title-area .confirmstepicon").removeClass("active done").addClass("pending");$(".securecheckout .payment .paymentactive").css("display","none");$(".securecheckout .payment .paymentdone").css("display","none");$(".securecheckout .payment .title-area .editbuttonarea").css("display","none");$(".securecheckout .payment").addClass("nocontext");$(".securecheckout .payment .title-area h2").addClass("inactive");$(".securecheckout .payment .title-area .paymentstepicon").removeClass("active done").addClass("pending");$(".securecheckout .shipping .title-area .editbuttonarea").css("display","none");$(".securecheckout .shipping .context-area .shippingactive").css("display","block");$(".securecheckout .shipping .context-area .shippingdone").css("display","none");$(".securecheckout .shipping .title-area h2").removeClass("inactive");$(".securecheckout .shipping .title-area .shippingstepicon").removeClass("pending done").addClass("active");document.getElementById("displaywarningfn1").style.display="none";document.getElementById("displaywarningln1").style.display="none";document.getElementById("displaywarningad1").style.display="none";document.getElementById("displaywarningzc1").style.display="none";document.getElementById("displaywarningpn1").style.display="none";document.getElementById("displaywarningst1").style.display="none";document.getElementById("displaywarningct1").style.display="none"},failureHandler:function(a){if(a.errorMessageKey=="_ERR_ORDER_IS_LOCKED"||a.errorMessageKey=="_ERR_ORDER_IS_NOT_LOCKED"){document.location.href="AjaxOrderItemDisplayView?storeId="+a.storeId+"&errType="+a.errType}if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxDeleteOrderItemFromCart",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",failureHandler:function(a){if(a.errorMessageKey=="_ERR_ORDER_IS_LOCKED"||a.errorMessageKey=="_ERR_ORDER_IS_NOT_LOCKED"){document.location.href="AjaxOrderItemDisplayView?storeId="+a.storeId+"&errType="+a.errType}if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"DeleteCarePack",actionId:"DeleteCarePack",url:getAbsoluteURL()+"AjaxDeleteCarePack",formId:"",successHandler:function(a){if(a.hasItemsInCart=="True"){wc.render.getRefreshControllerById("currentOrderTotalsAreaController");wc.render.updateContext("currentOrder_Context",null);wc.render.getRefreshControllerById("currentOrderBoxController");wc.render.updateContext("currentOrderBox_Context",{shipmentSelectBoxval:""});$("#removeCarePack,.drkOverlay").css("display","none");$(".continuetopaymentbuttonarea").removeClass("disabled")}else{document.location.reload()}dojo.byId("loadingOverlay").style.display="none"},failureHandler:function(a){}}),wc.service.declare({id:"AjaxDeleteOrderItem1",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(a){document.location.reload();if(!CheckoutHelperJS.pendingOrderDetailsPage){setDeleteCartCookie();if(CheckoutHelperJS.shoppingCartPage){}}else{cursor_clear()}CheckoutPayments.checkoutofstockincartpage()},failureHandler:function(a){if(a.errorMessageKey=="_ERR_ORDER_IS_LOCKED"||a.errorMessageKey=="_ERR_ORDER_IS_NOT_LOCKED"){document.location.href="AjaxOrderItemDisplayView?storeId="+a.storeId+"&errType="+a.errType}if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxUpdateOrderItem",actionId:"AjaxUpdateOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(a){cursor_clear()},failureHandler:function(b){if(b.errorMessageKey=="_ERR_ORDER_IS_LOCKED"||b.errorMessageKey=="_ERR_ORDER_IS_NOT_LOCKED"){document.location.href="AjaxOrderItemDisplayView?storeId="+b.storeId+"&errType="+b.errType}else{if(b.errorMessage){if(b.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE_QTY_UPDATE)}else{var a=CheckoutHelperJS.getPreviousValue();var c=CheckoutHelperJS.getcurrentId();$("html, body").animate({scrollTop:0},$(window).scrollTop()/3);if(b.errorMessageKey=="_ERR_TOO_MANY_ITEMS_TOTAL"){dojo.byId("alertforqunatityupdate").style.display="block"}dojo.byId(c).value=a}}else{if(b.errorMessageKey){MessageHelper.displayErrorMessage(b.errorMessageKey)}}}cursor_clear()}}),wc.service.declare({id:"GiftCardTableUpdate",actionId:"GiftCardTableUpdate",url:getAbsoluteURL()+"GiftCardUpdateCmd",formId:"",successHandler:function(a){cursor_clear()},failureHandler:function(a){}}),wc.service.declare({id:"AjaxUpdateOrderItem1",actionId:"AjaxUpdateOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(a){if(!CheckoutHelperJS.pendingOrderDetailsPage){if(CheckoutHelperJS.shoppingCartPage){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId}}else{cursor_clear()}},failureHandler:function(a){if(a.errorMessageKey=="_ERR_ORDER_IS_LOCKED"||a.errorMessageKey=="_ERR_ORDER_IS_NOT_LOCKED"){document.location.href="AjaxOrderItemDisplayView?storeId="+a.storeId+"&errType="+a.errType}else{if(a.errorMessage){if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE_QTY_UPDATE)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}}cursor_clear()}}),wc.service.declare({id:"AjaxUpdateOrderShippingInfo",actionId:"AjaxUpdateOrderShippingInfo",url:getAbsoluteURL()+"AjaxOrderChangeServiceShipInfoUpdate",formId:"",successHandler:function(a){cursor_clear()},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxPrepareOrderForSubmit",actionId:"AjaxPrepareOrderForSubmit",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderPrepare",formId:"",successHandler:function(a){CheckoutHelperJS.setOrderPrepared("true");CheckoutHelperJS.checkoutOrder(CheckoutHelperJS.getSavedParameter("tempOrderId"),CheckoutHelperJS.getSavedParameter("tempUserType"),CheckoutHelperJS.getSavedParameter("tempEmailAddresses"),CheckoutHelperJS.getSavedParameter("tempIsQuote"))},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}if(a.errorMessageKey=="_ERR_REGEN_INVALID_CONFIGURATION_OF_DYNAMIC_KIT"){console.debug(a.errorMessageKey);alert(a.errorMessageKey);dojo.byId("loadingOverlay").style.display="none";dojo.byId("displaymessage").value="Your KIT has become invalid"+a.errorMessage}cursor_clear()}}),wc.service.declare({id:"AjaxSubmitOrder",actionId:"AjaxSubmitOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSubmit",formId:"",successHandler:function(c){nullCartTotalCookie(c.orderId);var b=CheckoutHelperJS.getShipmentTypeId();var a=CheckoutHelperJS.getSavedParameter("tempEmailAddresses");var e=document.getElementById("emailSender");var d=document.getElementById("shipmentTypeId");e.value=a;d.value=b;document.forms.sCheckoutPage.submit()},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}dojo.byId("loadingOverlay").style.display="none";dojo.byId("confirmationFailed2").style.display="block";dojo.byId("displaymessage1").value="We are unable to process your order at this time, please call 1-877-888-8235 to speak to one of our sales representatives";dojo.byId("commonLoadingOverlay").style.display="none"}}),wc.service.declare({id:"AjaxSubmitQuote",actionId:"AjaxSubmitQuote",url:getAbsoluteURL()+"AjaxSubmitQuote",formId:"",successHandler:function(a){var b="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+CheckoutHelperJS.getOrderId()+"&shipmentTypeId="+CheckoutHelperJS.getShipmentTypeId()+"&isQuote=true&quoteId="+a.outOrderId;if(a.outExternalQuoteId!=undefined&&a.outExternalQuoteId!=null){b+=b+"&externalQuoteId="+a.outExternalQuoteId}document.location.href=b},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxAddAddressForPerson",actionId:"AjaxAddAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(a){dojo.byId("addressId").value=a.addressId;CheckoutPayments.setAddressId(a.addressId);AddressHelper.updateOrderAfterAddressUpdate();setTimeout(function(){CheckoutPayments.updateAddressForOrderItems()},5000);console.debug("update shipping info");cursor_clear()},failureHandler:function(a){document.getElementById("displaywarning-ship").style.display="block";cursor_clear()}}),wc.service.declare({id:"AjaxUpdateAddressForPerson",actionId:"AjaxUpdateAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressUpdate",formId:"",successHandler:function(a){dojo.byId("addressId").value=a.addressId;CheckoutPayments.setAddressId(a.addressId);AddressHelper.updateOrderAfterAddressUpdate();setTimeout(function(){CheckoutPayments.updateAddressForOrderItems()},5000);console.debug("update shipping method info");cursor_clear()},failureHandler:function(a){document.getElementById("displaywarning-ship").style.display="block";cursor_clear()}}),wc.service.declare({id:"AjaxUpdateOrderAfterAddressUpdate",actionId:"AjaxUpdateOrderAfterAddressUpdate",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(a){CheckoutPayments.setItemsAsUpdated();CheckoutPayments.refreshOrderBox();cursor_clear()},failureHandler:function(a){document.getElementById("displaywarning-ship").style.display="block";cursor_clear()}}),wc.service.declare({id:"AjaxInterestItemAdd",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();cursor_clear();MessageHelper.displayStatusMessage(MessageHelper.messages.WISHLIST_ADDED);if(categoryDisplayJS){categoryDisplayJS.selectedAttributes=[]}},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxDynamicKitRuleValCmd",actionId:"AjaxDynamicKitRuleValCmd",url:getAbsoluteURL()+"ValidateConfigurationCmd",formId:"",successHandler:function(b){var f=b.CTOExceptionRule;var e=f;var d=f;var a=e.indexOf("The item or property")>-1;var c=d.indexOf("required option class")>-1;if(f!="NA"&&a!=true&&c!=true){document.getElementById("displaywarning-valrule").style.display="block";document.getElementById("ValidationRuleAlertDiv").innerHTML=f;dojo.addClass("shopcartCheckout","disabled")}},failureHandler:function(a){}}),wc.service.declare({id:"AjaxInterestItemAdd_shopCart",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(a){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxInterestItemDelete",actionId:"AjaxInterestItemDelete",url:getAbsoluteURL()+"AjaxInterestItemDelete",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage()},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxInterestItemListMessage",actionId:"AjaxInterestItemListMessage",url:getAbsoluteURL()+"AjaxInterestItemListMessage",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage()},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxPromotionCodeManage",actionId:"AjaxPromotionCodeManage",url:getAbsoluteURL()+"AjaxPromotionCodeManage",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.orderId=".";if(CheckoutHelperJS.shoppingCartPage){b.calculationUsage="-1,-2,-5,-6,-7"}else{b.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}b.orderid=a.orderId;b.promoCode=a.promoCode;b.tasktype=a.taskType;wc.service.invoke("AjaxUpdateOrderItem",b);if(b.tasktype=="A"){wc.service.invoke("AjaxPromotionCouponCodeManage",b)}},failureHandler:function(a){if(a.errorMessageKey=="_ERR_ORDER_IS_LOCKED"||a.errorMessageKey=="_ERR_ORDER_IS_NOT_LOCKED"){document.location.href="AjaxOrderItemDisplayView?storeId="+a.storeId+"&errType="+a.errType}else{$("#promotionMessage").text(a.errorMessage);$("#promoCode").addClass("error");$("#promotionMessage").addClass("error")}if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxPromotionCouponCodeManage",url:getAbsoluteURL()+"PromotionMessageCmd",formId:"",successHandler:function(a){var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.orderId=".";if(CheckoutHelperJS.shoppingCartPage){b.calculationUsage="-1,-2,-5,-6,-7"}else{b.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}displaycpntooltip=false;if(a.valuetodisplay==true){displaycpntooltip=true;if($("#tooltip_cpn").length){$("#tooltip_cpn").show()}}},failureHandler:function(a){$("#promotionMessage").text(a.errorMessage);$("#promoCode").addClass("error");$("#promotionMessage").addClass("error");if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxCouponsAddRemove",actionId:"AjaxCouponsAddRemove",url:getAbsoluteURL()+"AjaxCouponsAddRemove",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.orderId=a.orderId;if(CheckoutHelperJS.shoppingCartPage){b.calculationUsage="-1,-2,-5,-6,-7"}else{b.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}wc.service.invoke("AjaxUpdateOrderItem",b)},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AddBillingAddress",actionId:"AddBillingAddress",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage()},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"ScheduleOrder",actionId:"ScheduleOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSchedule",formId:"",successHandler:function(b){MessageHelper.hideAndClearMessage();var f=document.getElementById("orderIdToSchedule").value;var e=b.orderId;nullCartTotalCookie(b.orderId);var a=CheckoutHelperJS.getShipmentTypeId();var d="";if(document.forms.purchaseOrderNumberInfo.purchase_order_number.value!=null){d=document.forms.purchaseOrderNumberInfo.purchase_order_number.value}var c="OrderProcessServiceOrderCancel?orderId="+f+"&storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL=OrderShippingBillingConfirmationView%3ForderId%3D"+e+"%26originalOrderId%3D"+f+"%26shipmentTypeId%3D"+a+"%26purchaseOrderNumber%3D"+d;document.location.href=c},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"SubmitRecurringOrder",actionId:"SubmitRecurringOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceRecurringOrderSubmit",formId:"",successHandler:function(b){MessageHelper.hideAndClearMessage();nullCartTotalCookie(b.orderId);var a=CheckoutHelperJS.getShipmentTypeId();var c="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+b.orderId+"&shipmentTypeId="+a;document.location.href=c;cursor_clear()},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxUpdateRewardOption",actionId:"AjaxUpdateRewardOption",url:getAbsoluteURL()+"AjaxOrderChangeServiceRewardOptionUpdate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();cursor_clear()},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxOrderCreate",actionId:"AjaxOrderCreate",url:getAbsoluteURL()+"AjaxOrderCreate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_CREATED);cursor_clear()},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CREATED)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxSingleOrderCancel",actionId:"AjaxSingleOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDERS_CANCELLED);cursor_clear()},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CANCELLED)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxOrderCancel",actionId:"AjaxOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(a){savedOrdersJS.cancelSavedOrder(false)},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CANCELLED)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxSingleOrderSave",actionId:"AjaxSingleOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages.PENDING_ORDER_SAVED)}else{MessageHelper.displayStatusMessage(MessageHelper.messages.ORDERS_SAVED)}var b=document.getElementById("OrderDescription_input");if(b!=null&&b!="undefined"){dojo.removeClass(b,"savedOrderDetailsInputBorderWarning");dojo.addClass(b,"savedOrderDetailsInputBorder");document.getElementById("OldOrderDescription").value=b.value}cursor_clear();if(savedOrdersJS.updateCartRequired){savedOrdersJS.updateCartRequired=false;CheckoutHelperJS.updateShoppingCart(document.ShopCartForm)}},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"||a.errorCode=="CMN1024E"){if(a.errorCode=="CMN1024E"&&a.systemMessage!=""){MessageHelper.displayErrorMessage(a.systemMessage)}else{if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages.PENDING_ORDER_NOT_SAVED)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SAVED)}}}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxOrderSave",actionId:"AjaxOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(a){savedOrdersJS.saveOrder(false)},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SAVED)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxSetPendingOrder",actionId:"AjaxSetPendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_SET_CURRENT);savedOrdersJS.determinePageForward("AjaxSetPendingOrder");cursor_clear()},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"||a.errorCode=="CMN1024E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SET_CURRENT)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxUpdatePendingOrder",actionId:"AjaxUpdatePendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(a){savedOrdersJS.determinePageForward("AjaxUpdatePendingOrder");cursor_clear()},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SET_CURRENT)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxSingleOrderCopy",actionId:"AjaxSingleOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(a){var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.URL="";b.updatePrices="1";b.orderId=a.orderId;b.calculationUsageId="-1";wc.service.invoke("AjaxSingleOrderCalculate",b);MessageHelper.hideAndClearMessage()},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxOrderCopy",actionId:"AjaxOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(a){var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.URL="";b.updatePrices="1";b.orderId=a.orderId;b.calculationUsageId="-1";wc.service.invoke("AjaxOrderCalculate",b);MessageHelper.hideAndClearMessage()},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxSingleOrderCalculate",actionId:"AjaxSingleOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_COPIED);cursor_clear()},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxCurrentOrderCalculate",actionId:"AjaxCurrentOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_SET_CURRENT);cursor_clear()},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxOrderCalculate",actionId:"AjaxOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();savedOrdersJS.copyOrder(false)},failureHandler:function(a){if(a.errorMessage){if(a.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxPunchoutPay",actionId:"AjaxPunchoutPay",url:"PunchoutPaymentRepay",formId:"",successHandler:function(a){PunchoutJS.handleResponse(a.orderId);MessageHelper.hideAndClearMessage();cursor_clear()},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"FDPromotionCmd",actionId:"FDPromotionCmd",url:getAbsoluteURL()+"FDPromotionCmd",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();cursor_clear()},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxSetExpressCheckout",actionId:"AjaxSetExpressCheckout",url:getAbsoluteURL()+"PayPalSetExpressCheckout",formId:"",successHandler:function(c){var b=c.paypalURL;var d=c.paymentMessage;var a=c.shippingAddressMadatory;if(d=="NE"){$("#itemsoncart").css("display","none");window.location.href=b}else{if(a=="true"){$(".securecheckout .payment .title-area .paymentstepicon").removeClass("done").addClass("pending active");cursor_wait();dojo.byId("confirmationFailed2").style.display="none";dojo.byId("confirmationFailed1").style.display="none";dojo.byId("confirmationFailed").style.display="block";dojo.byId("displaymessage").value=d;cursor_clear()}else{if(a=="false"){dojo.byId("displaywarningpay").style.display="block";dojo.byId("displaymessagepayPal").innerHTML=d}}}},failureHandler:function(a){}}),wc.service.declare({id:"AjaxPayPalConfirmOrder",actionId:"AjaxPayPalConfirmOrder",url:"OAFPattern",formId:"",successHandler:function(a){var c=a.paymentMessage;var b="OrderDeclineView?storeId="+ServicesDeclarationJS.storeId+"&langId="+ServicesDeclarationJS.langId+"&catalogId="+ServicesDeclarationJS.catalogId+"&payMethod=payPal";if(c=="NE"){dojo.byId("confirmationFailed2").style.display="none";CheckoutPayments.confirmOrder();console.debug(" Success ")}else{if(c=="Order Decline"){cursor_wait();document.location.href=getAbsoluteURL()+b;cursor_clear()}else{console.debug(" Failed");dojo.byId("loadingOverlay").style.display="none";dojo.byId("confirmationFailed2").style.display="block";dojo.byId("displaymessage1").value=c}}},failureHandler:function(a){}}),wc.service.declare({id:"AjaxCategorySubscribe",actionId:"AjaxCategorySubscribe",url:"AjaxMarketingTriggerProcessServiceEvaluate",formId:"",successHandler:function(a){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SUBSCRIPTION_UPDATED)},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}});wc.service.declare({id:"AjaxOrderEmailConfirmation",actionId:"AjaxOrderEmailConfirmation",url:"OrderEmailConfirmControllerCmd",formId:"",successHandler:function(a){},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"AjaxCatentryUnavailabilitychk",actionId:"AjaxCatentryUnavailabilitychk",url:getAbsoluteURL()+"AjaxCatentryUnavailability",formId:"",successHandler:function(a){},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"MPRInkToner",actionId:"MPRInkTonerId",url:getAbsoluteURL()+"MPRInkTonerSetFlagcmd",formId:"",successHandler:function(a){location.reload(true)},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}}),wc.service.declare({id:"NewsLetterSubscriptionID",actionId:"NewsLetterSubscriptionActionID",url:getAbsoluteURL()+"ChkoutSubscription",formId:"",successHandler:function(a){},failureHandler:function(a){if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}});function shipMethodsDisplayAjax(){var temp="";var storId="";var catId="";var laId="";var giftcard="";var egiftcard="";var ctoSto="";if(document.getElementById("orderIDforcmd")!=null){temp=document.getElementById("orderIDforcmd").value}if(document.getElementById("storeId")!=null){storId=document.getElementById("storeId").value}if(document.getElementById("catalogId")!=null){catId=document.getElementById("catalogId").value}if(document.getElementById("langId")!=null){laId=document.getElementById("langId").value}if(document.getElementById("Giftcard")!=null){giftcard=document.getElementById("Giftcard").value}if(document.getElementById("Egiftcard")!=null){egiftcard=document.getElementById("Egiftcard").value}if(document.getElementById("CTOSTO")!=null){ctoSto=document.getElementById("CTOSTO").value}$.ajax({url:"/webapp/wcs/stores/servlet/cartPageShipMethodsDisplayView",data:{orderId:temp,storeId:storId,catalogId:catId,langId:laId,gift1:giftcard,eGift:egiftcard,cto_sto:ctoSto},success:function(result){var responseDiv=document.createElement("Div");responseDiv.innerHTML=result;responseDiv.id="shipMethodCharge";responseDiv.className="row";responseDiv.display="none";var referenceNode=document.getElementById("cartItemDetailsBox");referenceNode.parentNode.insertBefore(responseDiv,referenceNode.nextSibling);var strcode=document.getElementById("shipMethodCharge").innerHTML;parseScript(strcode);function parseScript(strcode){var scripts=new Array();while(strcode.indexOf("<script")>-1||strcode.indexOf("<\/script")>-1){var s=strcode.indexOf("<script");var s_e=strcode.indexOf(">",s);var e=strcode.indexOf("<\/script",s);var e_e=strcode.indexOf(">",e);scripts.push(strcode.substring(s_e+1,e));strcode=strcode.substring(0,s)+strcode.substring(e_e+1)}for(var i=0;i<scripts.length;i++){try{eval(scripts[i])}catch(ex){}}}eval(document.getElementById("sc123").innerHTML);cartShipCal();shippingAjaxNew()}})}dojo.require("dojox.collections.ArrayList");dojo.require("wc.widget.Tooltip");CheckoutHelperJS={langId:"-1",storeId:"",catalogId:"",orderId:"",shipmentTypeId:"",orderItemIds:[],updateWaitTimeOut:1500,keyPressCount:{},ajaxCheckOut:true,singlePageCheckout:true,selectedAddressesArray:{},dataDirty:{},fieldDirtyFlag:false,resetRequestedShipDateValue:"1970-01-01T00:00:00.000Z",shoppingCartPage:false,pendingOrderDetailsPage:false,RequestShippingDateAction:false,shipChargeEnabled:false,tempOrderId:"",tempUserType:"",tempEmailAddresses:"",tempIsQuote:false,tempOrderTotal:"0",cartCurrentId:"",previousQuantity:"",cartCurrentId:"",previousQuantity:"",tempPaymentInstructions:{},lastAddressLinkIdToFocus:"",lastFocusId:"",setLastFocus:function(a){this.lastFocusId=a},getLastFocus:function(){return this.lastFocusId},tabPressed:function(a){if(a.keyCode==9){tabPressed=true}},setLastAddressLinkIdToFocus:function(a){this.lastAddressLinkIdToFocus=a},getLastAddressLinkIdToFocus:function(){return this.lastAddressLinkIdToFocus},orderPrepared:"false",setOrderPrepared:function(a){this.orderPrepared=a},isOrderPrepared:function(){return this.orderPrepared},saveCheckoutOrderParameters:function(a,d,c,b){this.tempOrderId=a;this.tempUserType=d;this.tempEmailAddresses=c;this.tempIsQuote=b},setOrderPayments:function(b,a){this.tempOrderTotal=b+0;this.tempPaymentInstructions=a},isOrderPaymentFullyAllocated:function(){var b=0;if(this.tempPaymentInstructions.length>=1){for(var a=0;a<this.tempPaymentInstructions.length;a++){b=b+this.tempPaymentInstructions[a].amount.value}}if(b==this.tempOrderTotal){return true}else{if(b<this.tempOrderTotal){MessageHelper.displayErrorMessage(MessageHelper.messages.EDPPaymentMethods_CANNOT_RECONCILE_PAYMENT_AMT);return false}else{if(b>this.tempOrderTotal){MessageHelper.displayErrorMessage(MessageHelper.messages.EDPPaymentMethods_PAYMENT_AMOUNT_LARGER_THAN_ORDER_AMOUNT);return false}else{MessageHelper.displayErrorMessage(MessageHelper.messages.EDPPaymentMethods_PAYMENT_AMOUNT_PROBLEM);return false}}}},getSavedParameter:function(a){return this[a]},setShipChargeEnabled:function(a){this.shipChargeEnabled=a},updateParamObject:function(g,e,f,d,b){if(g==null){g=[]}if(g[e]!=null&&d){if(dojo.lang.isArrayLike(g[e])){if(b!=null&&b!=""){g[e][b]=f}else{g[e].push(f)}}else{var a=g[e];g[e]=[];g[e].push(a);g[e].push(f)}}else{if(b!=null&&b!=""&&b!=-1){g[e+"_"+b]=f}else{if(b==-1){var c=1;while(g[e+"_"+c]!=null){c++}g[e+"_"+c]=f}else{g[e]=f}}}return g},checkRequestShippingDateBox:function(e,f,m){var l;var b;if(m!=null&&m!=""){e=e+"_"+m;f=f+"_"+m}var g=dojo.byId(e);if(g.checked){dojo.byId(f).style.visibility="visible";dojo.byId(f).style.display="block"}else{dojo.byId(f).style.visibility="hidden";dojo.byId(f).style.display="none";if(this.shipmentTypeId=="1"){dojo.byId("requestedShippingDate").blur()}else{if(this.shipmentTypeId=="2"){dojo.byId("MS_requestedShippingDate_"+m).blur()}}}var k,a="";if(this.shipmentTypeId=="1"){k=document.getElementById("singleShipmentAddress").value;a=document.getElementById("singleShipmentShippingMode").value}else{if(this.shipmentTypeId=="2"){k=document.getElementById("MS_ShipmentAddress_"+m).value;a=document.getElementById("MS_ShippingMode_"+m).value}else{console.debug("shipmentTypeId is undefined. Single shipment has Id 1; multiple shipment has Id 2.")}}if(!g.checked&&this.isAjaxCheckOut()){var c=[];c.storeId=this.storeId;c.catalogId=this.catalogId;c.langId=this.langId;c.orderId=".";this.updateParamObject(c,"addressId",k,false,-1);this.updateParamObject(c,"shipModeId",a,false,-1);if(dijit.byId("requestedShippingDate")!=null||dijit.byId("MS_requestedShippingDate_"+m)!=null){this.updateParamObject(c,"requestedShipDate",this.resetRequestedShipDateValue,false,-1)}var h=null;var n=-1;var o=document.getElementById("totalNumberOfItems").value;for(var d=0;d<o;d++){if(document.getElementById("qty_"+(d+1))!=null){n=document.getElementById("qty_"+(d+1)).value}h=document.getElementById("orderItem_"+(d+1)).value;if(n!=-1){if(this.shipmentTypeId=="1"){this.updateParamObject(c,"orderItemId",h,false,-1);break}else{if(this.shipmentTypeId=="2"){if(m!=null&&m!=""&&h==m){this.updateParamObject(c,"orderItemId",h,false,-1);break}}else{console.debug("shipmentTypeId is undefined. Single shipment has Id 1; multiple shipment has Id 2.")}}}}if(!submitRequest()){return}cursor_wait();CheckoutHelperJS.RequestShippingDateAction=true;wc.service.invoke("OrderItemAddressShipMethodUpdate",c)}},checkShippingInstructionsBox:function(h,k,q){var p;var d;if(q!=null&&q!=""){p=h+"_"+q;d=k+"_"+q}else{p=h;d=k}var o=dojo.byId(p);if(o.checked){dojo.byId(d).style.visibility="visible";dojo.byId(d).style.display="block"}else{dojo.byId(d).style.visibility="hidden";dojo.byId(d).style.display="none"}var n,b="";if(this.shipmentTypeId=="1"){n=document.getElementById("singleShipmentAddress").value;b=document.getElementById("singleShipmentShippingMode").value}else{if(this.shipmentTypeId=="2"){var l,a,m="";n=document.getElementById("MS_ShipmentAddress_"+q).value;b=document.getElementById("MS_ShippingMode_"+q).value;var r=document.getElementById("totalNumberOfItems").value;for(var f=0;f<r;f++){if(document.getElementById("qty_"+(f+1))!=null&&document.getElementById("qty_"+(f+1)).value!=-1){l=document.getElementById("orderItem_"+(f+1)).value;a=document.getElementById("MS_ShipmentAddress_"+l).value;m=document.getElementById("MS_ShippingMode_"+l).value;if(m==b&&a==n){var g=k+"_"+l;var c=h+"_"+l;if(o.checked){dojo.byId(g).style.visibility="visible";dojo.byId(g).style.display="block";dojo.byId(c).checked="checked"}else{dojo.byId(g).style.visibility="hidden";dojo.byId(g).style.display="none";dojo.byId(c).checked=""}}}}}else{console.debug("shipmentTypeId is undefined. Single shipment has Id 1; multiple shipment has Id 2.")}}if(!o.checked&&this.isAjaxCheckOut()){var e=[];e.storeId=this.storeId;e.catalogId=this.catalogId;e.langId=this.langId;e.orderId=".";var l=null;if(this.shipmentTypeId=="1"){if(document.getElementById("shipInstructions")!=null){this.updateParamObject(e,"shipInstructions","",false);document.getElementById("shipInstructions").value=""}l=document.getElementById("orderItem_1").value;this.updateParamObject(e,"addressId",n,false);this.updateParamObject(e,"orderItemId",l,false)}else{if(this.shipmentTypeId=="2"){if(q!=null&&q!=""){if(document.getElementById("MS_shipInstructions_"+q)!=null){this.updateParamObject(e,"shipInstructions","",false);document.getElementById("MS_shipInstructions_"+q).value=""}this.updateParamObject(e,"addressId",n,false,-1);this.updateParamObject(e,"orderItemId",q,false);this.setShippingInstuctionsForAllOtherItems(n,b,"")}}else{console.debug("shipmentTypeId is undefined. Single shipment has Id 1; multiple shipment has Id 2.")}}if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",e)}},initializeShipmentPage:function(a){this.shipmentTypeId=a},setCommonParameters:function(c,a,b){this.langId=c;this.storeId=a;this.catalogId=b},deleteFromCart:function(c,b){var g=[];g.storeId=this.storeId;g.catalogId=this.catalogId;g.langId=this.langId;g.orderId=(this.orderId!=null&&this.orderId!="undefined"&&this.orderId!="")?this.orderId:".";g.orderItemId=c;if(this.shoppingCartPage){g.calculationUsage="-1,-2,-5,-6,-7"}else{g.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}g.check="*n";var a=document.getElementById("totalNumberOfItems").value;var h=a;for(var d=0;d<a;d++){var e=document.getElementById("freeGift_qty_"+(d+1));if(e!=null||e!=undefined){qty=e.value;if(qty!=null&&qty!=undefined&&qty==-1){h=h-1}}}if(!this.shoppingCartPage){var f=document.getElementById("lineOfItemsID").value}if(!submitRequest()){}cursor_wait();if(h==1&&this.shoppingCartPage){wc.service.invoke("AjaxDeleteOrderItem1",g)}else{if(b){wc.service.invoke("AjaxDeleteOrderItemFromCart",g)}else{if(this.shoppingCartPage||this.pendingOrderDetailsPage){wc.service.invoke("AjaxDeleteOrderItem",g)}else{if(f==1){wc.service.invoke("AjaxDeleteOrderItem1",g)}else{wc.service.invoke("AjaxDeleteOrderItemForShippingBillingPage",g)}}}}},addToWishListAndDeleteFromCart:function(b,a){if(!this.isAjaxCheckOut()){return}var c=[];c.catEntryId=b;c.URL="SuccessfulAJAXRequest";c.orderItemId=a;c.updateable=0;c.langId=this.langId;c.storeId=this.storeId;c.catalogId=this.catalogId;if(!submitRequest()){return}cursor_wait();wc.service.invoke("AjaxInterestItemAddAndDeleteFromCart",c)},updateAddressIdOFItemsOnCreateEditAddress:function(a){var d=[];d.orderId=".";d.storeId=this.storeId;d.catalogId=this.catalogId;d.langId=this.langId;d.calculationUsage="-1,-2,-3,-4,-5,-6,-7";d.allocate="***";d.backorder="***";d.remerge="***";d.check="*n";if(this.shipmentTypeId=="1"){d.addressId=a}else{var b=null;for(var c=0;c<this.orderItemIds.length;c++){b=this.orderItemIds[c];this.updateParamObject(d,"orderItemId",b,false,-1);this.updateParamObject(d,"addressId",a,false,-1)}}if(!submitRequest()){return}cursor_wait();wc.service.invoke("AjaxUpdateOrderItemsAddressId",d)},saveOrderItemsList:function(d,a){if(d=="-1"){var f=document.getElementById("totalNumberOfItems").value;for(var e=0;e<f;e++){this.orderItemIds[e]=document.getElementById("orderItem_"+(e+1)).value}}else{if(d==0&&this.shipmentTypeId=="1"){if(document.getElementById("singleShipmentAddress")){if(a==document.getElementById("singleShipmentAddress").value){var f=document.getElementById("totalNumberOfItems").value;for(var e=0;e<f;e++){this.orderItemIds[e]=document.getElementById("orderItem_"+(e+1)).value}}else{this.orderItemIds=[]}}else{this.orderItemIds=[]}return}else{var f=document.getElementById("totalNumberOfItems").value;var b=null;var d=null;var c=0;for(var e=0;e<f;e++){d=document.getElementById("orderItem_"+(e+1)).value;if(document.getElementById("MS_ShipmentAddress_"+d)){b=document.getElementById("MS_ShipmentAddress_"+d).value;if(b==a){this.orderItemIds[c++]=d}}}}}},setShippingInstuctionsForAllOtherItems:function(b,a,g){var e,d,c="";var h=document.getElementById("totalNumberOfItems").value;for(var f=0;f<h;f++){if(document.getElementById("qty_"+(f+1))!=null&&document.getElementById("qty_"+(f+1)).value!=-1){e=document.getElementById("orderItem_"+(f+1)).value;d=document.getElementById("MS_ShipmentAddress_"+e).value;c=document.getElementById("MS_ShippingMode_"+e).value;if(c==a&&d==b){document.getElementById("MS_shipInstructions_"+e).value=g}}}},shipAsComplete:function(a){if(!this.isAjaxCheckOut()){return}var b=[];b.orderId=".";b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(a.checked){this.updateParamObject(b,"ShipAsComplete","Y",true)}else{this.updateParamObject(b,"ShipAsComplete","N",true)}orderItemId=document.getElementById("orderItem_1").value;this.updateParamObject(b,"orderItemId",orderItemId,false);if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",b)},updateAddressIdForOrderItem:function(a){if(a==null||a.length==0){return true}CallcenterCommonJS.callOrderLockHelper(this.storeId,"N");var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.orderId=".";b.calculationUsage="-1,-2,-5,-6,-7";b.allocate="***";b.backorder="***";b.remerge="***";b.check="*n";this.updateParamObject(b,"addressId",a,false);wc.service.invoke("AjaxSetAddressIdOfOrderItems",b)},updateShipModeIdForOrder:function(a){CallcenterCommonJS.callOrderLockHelper(this.storeId,"N");var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.shipModeId=a;b.calculationUsage="-1,-2,-3,-4,-5,-6,-7";b.allocate="***";b.backorder="***";b.remerge="***";b.check="*n";wc.service.invoke("AjaxSetShipModeIdForOrder",b)},applyPromotionCode:function(c,e){var d=document.forms[c];var b=trim(d.promoCode.value);d.promoCode.value=b;if(trim(d.promoCode.value)==""){document.getElementById("promotionMessage").focus();$("#promoCode").addClass("error");$("#promotionMessage").text("Field is empty. Please enter your coupon code");return}if(d.promoCode.value.indexOf(",")!=-1||d.promoCode.value.indexOf(";")!=-1){$("#promoCode").addClass("error");$("#promotionMessage").text("Please enter a single coupon code");return}if(this.isAjaxCheckOut()){service=wc.service.getServiceById("AjaxPromotionCodeManage");service.formId=c;if(d.URL!=null){d.URL.value=""}if(!submitRequest()){}cursor_wait();wc.service.invoke("AjaxPromotionCodeManage")}else{if(e==null||e==""||e=="undefined"){e="OrderShippingBillingView"}var a=document.createElement("INPUT");a.setAttribute("type","hidden");a.setAttribute("name","errorViewName");a.setAttribute("value",e);d.appendChild(a);d.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&URL="+e;if(!submitRequest()){return}d.submit()}},removePromotionCode:function(a,c,d){var b=document.forms[a];b.taskType.value="R";b.promoCode.value=c;if(this.isAjaxCheckOut()){service=wc.service.getServiceById("AjaxPromotionCodeManage");service.formId=a;if(!submitRequest()){}cursor_wait();wc.service.invoke("AjaxPromotionCodeManage")}else{if(d==null||d==""||d=="undefined"){d="OrderShippingBillingView"}b.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&URL="+d;if(!submitRequest()){return}b.submit()}},applyCoupon:function(a,d,c){var b=document.forms[a];b.setAttribute("action","CouponsAddRemove");b.couponId.value=c;b.taskType.value="A";if(!submitRequest()){return}if(this.isAjaxCheckOut()){service=wc.service.getServiceById("AjaxCouponsAddRemove");service.formId=a;cursor_wait();wc.service.invoke("AjaxCouponsAddRemove")}else{b.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&URL="+d;b.submit()}},removeCouponFromOrder:function(a,d,c){var b=document.forms[a];b.setAttribute("action","CouponsAddRemove");b.couponId.value=c;b.taskType.value="R";if(!submitRequest()){return}if(this.isAjaxCheckOut()){service=wc.service.getServiceById("AjaxCouponsAddRemove");service.formId=a;cursor_wait();wc.service.invoke("AjaxCouponsAddRemove")}else{b.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7&URL="+d;b.submit()}},setAjaxCheckOut:function(a){this.ajaxCheckOut=a},isAjaxCheckOut:function(){return this.ajaxCheckOut},setSinglePageCheckout:function(a){this.singlePageCheckout=a},isSinglePageCheckout:function(){return this.singlePageCheckout},checkoutOrder:function(c,h,e,s){var a;CallcenterCommonJS.callOrderLockHelper(this.storeId,"N");if(s==undefined||s==null){s=false}if(e==""||e==undefined||e==null){e=document.getElementById("confirmationemailinput").value}if(this.isOrderPrepared()=="false"){if(this.isOrderPaymentFullyAllocated()){this.saveCheckoutOrderParameters(c,h,e,s);wc.service.invoke("AjaxPrepareOrderForSubmit");return}else{return}}params=[];params.orderId=c;params.notifyMerchant=1;params.notifyShopper=1;params.notifyOrderSubmitted=1;params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;var n=document.forms.purchaseOrderNumberInfo;if(n){var p=n.purchase_order_number.value;if(n.purchaseOrderNumberRequired.value=="true"&&n.purchase_order_number.value==""){MessageHelper.formErrorHandleClient(n.purchase_order_number,MessageHelper.messages.ERROR_PONumberEmpty);return}else{if(!MessageHelper.isValidUTF8length(n.purchase_order_number.value,128)){MessageHelper.formErrorHandleClient(n.purchase_order_number,MessageHelper.messages.ERROR_PONumberTooLong);return}}}params.purchaseorder_id=p;e=trim(e);var l=[];l=e.split(" ");var d=[];for(var g=0;g<l.length;g++){d[l[g]]=l[g]}var r=0;for(i in d){r=r+1}var q="";var f=0;for(i in d){f=f+1;q=q+d[i];if(f<r){q=q+","}}params.notify_EMailSender_recipient=q;var b=document.getElementById("sendMeSMSNotification");if(b!=null&&b!="undefined"){if(b.checked){var m=document.getElementById("mobileCountryCode");var o=document.getElementById("mobilePhone1");if(m!=null&&m!="undefined"&&o!=null&&o!="undefined"){params.SMS=m.value+o.value}}}ServicesDeclarationJS.setCommonParameters(this.langId,this.storeId,this.catalogId);if(!s){wc.service.invoke("AjaxSubmitOrder",params)}else{params.URL="";this.setOrderId(c);wc.service.invoke("AjaxSubmitQuote",params)}},prepareOrderSchedule:function(){if(document.getElementById("scheduleOrderInputSection")!=null){var f=dijit.byId("ScheduleOrderStartDate");if(!this.validateDate(f,"ScheduleOrderStartDate")){return}var a=dojo.byId("ScheduleOrderFrequency").value;var e="WC_ScheduleOrder_"+document.getElementById("orderIdToSchedule").value+"_strStartDate";var d="WC_ScheduleOrder_"+document.getElementById("orderIdToSchedule").value+"_interval";if((a=="undefined")&&(f.value==null)){dojo.cookie(e,null,{expires:-1});dojo.cookie(d,null,{expires:-1})}else{var c=dojo.date.stamp.fromISOString(f);var b=new Date();c.setHours(b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds());c=dojo.date.stamp.toISOString(c,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true});dojo.cookie(e,c,{path:"/"});dojo.cookie(d,a,{path:"/"})}}},scheduleOrder:function(a,b,f){if(f==="G"&&b){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_GUEST_USER_SUBMIT_RECURRING_ORDER);return}var e=[];e.storeId=this.storeId;e.catalogId=this.catalogId;e.langId=this.langId;e.orderId=a;if(b!=undefined&&b==true){e.startDate=dojo.cookie("WC_ScheduleOrder_"+a+"_strStartDate");if(dojo.cookie("WC_ScheduleOrder_"+a+"_interval")=="1"){e.fulfillmentInterval="1";e.fulfillmentIntervalUOM="DAY";e.timePeriod="1";e.timePeriodUOM="DAY"}else{if(dojo.cookie("WC_ScheduleOrder_"+a+"_interval")=="2"){e.fulfillmentInterval="1";e.fulfillmentIntervalUOM="DAY"}else{if(dojo.cookie("WC_ScheduleOrder_"+a+"_interval")=="3"){e.fulfillmentInterval="1";e.fulfillmentIntervalUOM="WEE"}else{if(dojo.cookie("WC_ScheduleOrder_"+a+"_interval")=="4"){e.fulfillmentInterval="2";e.fulfillmentIntervalUOM="WEE"}else{if(dojo.cookie("WC_ScheduleOrder_"+a+"_interval")=="5"){e.fulfillmentInterval="3";e.fulfillmentIntervalUOM="WEE"}else{if(dojo.cookie("WC_ScheduleOrder_"+a+"_interval")=="6"){e.fulfillmentInterval="4";e.fulfillmentIntervalUOM="WEE"}}}}}}}else{e.strStartDate=dojo.cookie("WC_ScheduleOrder_"+a+"_strStartDate");e.interval=dojo.cookie("WC_ScheduleOrder_"+a+"_interval")}var d=document.forms.purchaseOrderNumberInfo;if(d){var c=d.purchase_order_number.value;if(d.purchaseOrderNumberRequired.value=="true"&&d.purchase_order_number.value==""){MessageHelper.formErrorHandleClient(d.purchase_order_number,MessageHelper.messages.ERROR_PONumberEmpty);return}else{if(!MessageHelper.isValidUTF8length(d.purchase_order_number.value,128)){MessageHelper.formErrorHandleClient(d.purchase_order_number,MessageHelper.messages.ERROR_PONumberTooLong);return}}e.purchaseorder_id=c}if(!submitRequest()){return}cursor_wait();if(b!=undefined&&b==true){wc.service.invoke("SubmitRecurringOrder",e)}else{wc.service.invoke("ScheduleOrder",e)}},validateDate:function(a,b){var c=new Date();if(a.getValue()!=null&&(a.compare(a.getValue(),c)<0)){if(c.toDateString()===a.getValue().toDateString()){return true}if((b!=null)&&(document.getElementById(b)!=null)){MessageHelper.formErrorHandleClient(document.getElementById(b).id,MessageHelper.messages.PAST_DATE_ERROR)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.PAST_DATE_ERROR)}return false}else{return true}},validateDateOnBlur:function(a,b){var c=new Date();if(a.getValue()!=null&&(a.compare(a.getValue(),c)<0)){if(c.toDateString()===a.getValue().toDateString()){return true}if((b!=null)&&(document.getElementById(b)!=null)){MessageHelper.formErrorHandleClient(document.getElementById(b).id,MessageHelper.messages.PAST_DATE_ERROR)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.PAST_DATE_ERROR)}return false}else{if(a.state=="Error"){if((b!=null)&&(document.getElementById(b)!=null)){MessageHelper.formErrorHandleClient(document.getElementById(b).id,a.getErrorMessage(false))}else{MessageHelper.displayErrorMessage(dataObj.getErrorMessage(false))}return false}else{return true}}},createAddress:function(b,a){this.saveOrderItemsList(b,"-1");if(!submitRequest()){return}var c=true;cursor_wait(c);wc.render.updateContext("editShippingAddressContext",{shippingAddress:"-1",addressType:a});this.showHideDivs("editAddressContents","mainContents")},showHideDivs:function(a,b){document.getElementById(b).style.display="none";document.getElementById(a).style.display="block"},restorePreviousAddressDetails:function(){var a=false;if(!this.isAjaxCheckOut()){for(d in this.selectedAddressesArray){if(document.getElementById(d)!=null&&document.getElementById(d).value==-1){document.getElementById(d).value=this.selectedAddressesArray[d];a=true;if(this.shipmentTypeId=="1"){this.displayAddressDetails(document.getElementById("singleShipmentAddress").value,"Shipping")}}}}if(this.isAjaxCheckOut()||!a){if(this.shipmentTypeId=="2"){for(var d=0;d<this.orderItemIds.length;d++){var b=this.orderItemIds[d];var c=document.getElementById("MS_ShipmentAddress_"+b);if(c!=null&&c.value==-1){c.value=document.getElementById("addressId_"+b).value}}}else{if(this.shipmentTypeId=="1"){var c=document.getElementById("singleShipmentAddress");if(c!=null&&document.getElementById("addressId_all")){c.value=document.getElementById("addressId_all").value;if(!this.isAjaxCheckOut()){this.displayAddressDetails(c.value,"Shipping")}}}}}for(var d=1;d<4;d++){if(document.getElementById("PaymentForm"+d)!=null){var e=document.getElementById("PaymentForm"+d);if(e.billing_address_id.value==-1){e.billing_address_id.value=document.getElementById("selectedAddressId_"+d).value;if(!this.isAjaxCheckOut()){CheckoutPayments.displayBillingAddressDetailsWeb10(e.billing_address_id,d)}}if(wc.render.getContextById("billingAddressDropDownBoxContext").properties["billingAddress"+d]==-1){wc.render.getContextById("billingAddressDropDownBoxContext").properties["billingAddress"+d]=e.billing_address_id.value}}}},editAddress:function(a,b,d,e){var c=document.getElementById(a);this.saveOrderItemsList(b,c.value);if(c.options[c.selectedIndex].text==d||c.options[c.selectedIndex].text==e){if(a!=null){MessageHelper.formErrorHandleClient(a,MessageHelper.messages.ERROR_QUICKCHECKOUT_ADDRESS_CHANGE)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_QUICKCHECKOUT_ADDRESS_CHANGE)}return}if(!submitRequest()){return}cursor_wait();wc.render.updateContext("editShippingAddressContext",{shippingAddress:c.value});this.showHideDivs("editAddressContents","mainContents")},editBillingAddress:function(a,f,c,e){var d=document.forms["PaymentForm"+f];var b=d.billing_address_id;this.saveOrderItemsList(a,b.value);if(b.options[b.selectedIndex].text==c||b.options[b.selectedIndex].text==e){if(b!=null){MessageHelper.formErrorHandleClient(b,MessageHelper.messages.ERROR_QUICKCHECKOUT_ADDRESS_CHANGE)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_QUICKCHECKOUT_ADDRESS_CHANGE)}return}if(!submitRequest()){return}cursor_wait();wc.render.updateContext("editShippingAddressContext",{shippingAddress:b.value});this.showHideDivs("editAddressContents","mainContents")},cancelEditAddress:function(){this.showHideDivs("mainContents","editAddressContents");this.restorePreviousAddressDetails();if(this.getLastAddressLinkIdToFocus()!=null&&this.getLastAddressLinkIdToFocus()!="undefined"&&this.getLastAddressLinkIdToFocus()!=""){document.getElementById(this.getLastAddressLinkIdToFocus()).focus();this.setLastAddressLinkIdToFocus("")}},getShipmentTypeId:function(){return this.shipmentTypeId},paymentDataDirty:function(b,a){this.dataDirty[b]=a;console.debug("Information in payment area "+b+" has been modified.")},isPaymentDataDirty:function(a){return this.dataDirty[a]},displayStoreAddressDetails:function(a){var b=a.value;for(j=0;j<a.options.length;j++){if(a.options[j].value==b){dojo.byId("addressDetails_"+a.options[j].value).style.display="block"}else{dojo.byId("addressDetails_"+a.options[j].value).style.display="none"}}},updateStoreAddressForAllItems:function(d){if(!this.isAjaxCheckOut()){return}var a=d.value;params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var b=null;var e=document.getElementById("totalNumberOfItems").value;var a=document.getElementById("singleShipmentAddress").value;for(var c=0;c<e;c++){b=document.getElementById("orderItem_"+(c+1)).value;this.updateParamObject(params,"orderItemId",b,false,-1);this.updateParamObject(params,"physicalStoreId",a,false,-1)}if(!submitRequest()){return}cursor_wait();wc.service.invoke("AjaxUpdateOrderItem",params)},updateShippingModeAndAddressForOrderItem:function(d,c,f){if(!this.isAjaxCheckOut()){return}var e=d.value;if(f==e){document.getElementById("MS_ShipMode_Section_"+c).className="nodisplay";document.getElementById("MS_ShipAdvancedOptions_Section_"+c).className="nodisplay";document.getElementById("MS_ShippingAddress_Section_"+c).className="nodisplay";document.getElementById("MS_StoreAddress_Section_"+c).className=""}else{document.getElementById("MS_ShipMode_Section_"+c).className="";document.getElementById("MS_ShipAdvancedOptions_Section_"+c).className="";document.getElementById("MS_ShippingAddress_Section_"+c).className="";document.getElementById("MS_StoreAddress_Section_"+c).className="nodisplay"}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.orderItemId=c;params.shipModeId=e;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(f==e){var b=document.getElementById("MS_StoreSelectBox_"+c).value;params.physicalStoreId=b}else{if(document.getElementById("MS_ShipmentAddress_"+c)){var a=document.getElementById("MS_ShipmentAddress_"+c).value;params.addressId=a}}if(!submitRequest()){return}cursor_wait();wc.service.invoke("AjaxUpdateOrderItem",params)},updateStoreAddressForOrderItem:function(b,c){if(!this.isAjaxCheckOut()){return}var a=b.value;params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.orderItemId=c;params.physicalStoreId=a;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(!submitRequest()){return}cursor_wait();wc.service.invoke("AjaxUpdateOrderItem",params)},setFieldDirtyFlag:function(a){this.fieldDirtyFlag=a},getFieldDirtyFlag:function(){return this.fieldDirtyFlag},checkForDirtyFlag:function(){if(this.getFieldDirtyFlag()){if(document.getElementById("ShoppingCart_NonAjaxUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("ShoppingCart_NonAjaxUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return true}else{if(document.getElementById("MultipleShipment_NonAjaxShipInfoUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("MultipleShipment_NonAjaxShipInfoUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST);return true}else{if(document.getElementById("SingleShipment_NonAjaxShipInfoUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("SingleShipment_NonAjaxShipInfoUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST);return true}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_UPDATE_FIRST);return true}}}}return false},showHideCheckoutSMS:function(a,c){var b=document.getElementById(a);if(b!=null&&b!="undefined"){if(b.checked){showElementById(c)}else{hideElementById(c)}}},getCountryArray:function(){if(document.countries==null){countries=new Array();var theDiv=document.getElementById("countryListSelectionHelper");if(typeof theDiv=="undefined"){return null}var divJSON=eval("("+theDiv.innerHTML+")");var countriesObject=divJSON.countries;for(var i=0;i<countriesObject.length;i++){var countryObject=countriesObject[i];countries[countryObject.code]=new Object();countries[countryObject.code].name=countryObject.displayName;countries[countryObject.code].countryCallingCode=countryObject.callingCode;if(countryObject.states.length>0){countries[countryObject.code].states=new Object();for(var j=0;j<countryObject.states.length;j++){var state=countryObject.states[j];countries[countryObject.code].states[state.code]=state.displayName}}}}return countries},loadCountryCode:function(c,b){this.getCountryArray();var a=document.getElementById(c).value;document.getElementById(b).value=countries[a].countryCallingCode},expediteShipping:function(a,c){if(!this.isAjaxCheckOut()){return}var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;if(a.checked){this.updateParamObject(b,"isExpedited","Y",true)}else{this.updateParamObject(b,"isExpedited","N",true)}if(c!=null){this.updateParamObject(b,"orderItemId",c,false)}if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",b)},setPreviousValue:function(b,a){previousQuantity=b;cartCurrentId=a},getPreviousValue:function(){return previousQuantity},getcurrentId:function(){return cartCurrentId},updateCartWait:function(c,a,b){if(this.keyPressCount[a]==null&&isNaN(this.keyPressCount[a])){this.keyPressCount[a]=0}this.keyPressCount[a]=parseInt(this.keyPressCount[a])+1;setTimeout(dojo.hitch(this,"updateCart",c,a,this.keyPressCount[a]),this.updateWaitTimeOut)},updateCart:function(g,f,a){if(a<this.keyPressCount[f]){return}var c=(g.value);if(!isNonNegativeInteger(c)){TealeafWCJS.createExplicitChangeEvent(g.id);MessageHelper.formErrorHandleClient(g,MessageHelper.messages.QUANTITY_INPUT_ERROR)}else{if(!dojo.isChrome){TealeafWCJS.createExplicitChangeEvent(g.id)}var b=[];b.orderId=".";b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;this.shoppingCartPage="true";if(this.shoppingCartPage){b.calculationUsage="-1,-2,-5,-6,-7";b.inventoryValidation="true"}else{b.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}this.updateParamObject(b,"orderItemId",f,false,-1);this.updateParamObject(b,"quantity",c,false,-1);if(!submitRequest()){}cursor_wait();if(c==0){var k=document.getElementById("totalNumberOfItems").value;var h=k;for(var d=0;d<k;d++){var e=document.getElementById("freeGift_qty_"+(d+1));if(e!=null||e!=undefined){qty=e.value;if(qty!=null&&qty!=undefined&&qty==-1){h=h-1}}}if(h==1){wc.service.invoke("AjaxUpdateOrderItem1",b)}else{wc.service.invoke("AjaxUpdateOrderItem",b)}}else{wc.service.invoke("AjaxUpdateOrderItem",b)}}},updateGiftCardTable:function(e,a,b){var c=e.value;var d=[];d.orderId=".";d.orderitems_id=a;d.quantity=c;d.action=b;wc.service.invoke("GiftCardTableUpdate",d)},initDojoEventListenerShoppingCartPage:function(){if(document.getElementById("totalNumberOfItems")!=null){var c=document.getElementById("totalNumberOfItems").value;if(c!=null&&c>0){for(var b=0;b<c;b++){var a=dojo.byId("quantity_"+(b+1));if(a!=null){dojo.connect(a,"onchange",setDirtyFlag)}}}else{console.debug("error: element 'totalNumberOfItems' was expected but undefined.");return}}},updateShoppingCart:function(e,b){if(b!=undefined&&b==true&&!this.isAjaxCheckOut()){return true}var g=document.getElementById("totalNumberOfItems").value;if(g!=null){for(var c=0;c<g;c++){var f=null;if(e!=undefined){f=e["quantity_"+(c+1)]}else{if(dojo.byId("qty_"+(c+1))!=null){f=dojo.byId("qty_"+(c+1))}}if(f!=null||f!=undefined){var a=f.value;if(!isNonNegativeInteger(a)){MessageHelper.formErrorHandleClient(f.id,MessageHelper.messages.QUANTITY_INPUT_ERROR);return}}}if(b!=undefined&&b==true){return true}if(!submitRequest()){return}var d=wc.render.getContextById("ShopCartPaginationDisplay_Context").properties.beginIndex;if(d==null||d==""){d=0}e.URL.value=e.URL.value+"&beginIndex="+d;e.submit();this.setFieldDirtyFlag(false)}else{console.debug("error: element 'totalNumberOfItems' was expected but undefined.");return}},canCheckoutContinue:function(a){if((document.getElementById("recurringOrder")&&document.getElementById("recurringOrder").checked&&document.getElementById("shipTypeOnline")&&document.getElementById("shipTypeOnline").checked)||(document.getElementById("recurringOrder")&&document.getElementById("recurringOrder").checked&&document.getElementById("shipTypeOnline")==null)){if(document.getElementById("nonRecurringOrderItems")&&document.getElementById("nonRecurringOrderItems").value!=""){MessageHelper.displayErrorMessage(MessageHelper.messages.RECURRINGORDER_ERROR);return false}else{if(a!=undefined&&a==="G"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_GUEST_USER_SUBMIT_RECURRING_ORDER);return false}}}return true},updateCartWithQuickCheckoutProfile:function(a){var b=[];b.storeId=this.storeId;b.catalogId=this.catalogId;b.langId=this.langId;b.toOrderId=".";b.shippingAddressFromOrderProfile="1";b.shippingModeFromOrderProfile="1";b.URL="dummy";b.payInfoFrom=a;wc.service.declare({id:"QuickCheckOutOrderCopy",actionId:"QuickCheckOutOrderCopy",url:"AjaxOrderCopy",successHandler:function(c){cursor_clear();document.location.href="OrderProcessServiceOrderPrepare?storeId="+CheckoutHelperJS.storeId+"&catalogId="+CheckoutHelperJS.catalogId+"&langId="+CheckoutHelperJS.langId+"&orderId=.&URL=OrderShippingBillingView?langId="+CheckoutHelperJS.langId+"&storeId="+CheckoutHelperJS.storeId+"&catalogId="+CheckoutHelperJS.catalogId+"&quickCheckoutProfileForPayment=true"},failureHandler:function(c){if(c.errorMessage){MessageHelper.displayErrorMessage(c.errorMessage)}else{if(c.errorMessageKey){MessageHelper.displayErrorMessage(c.errorMessageKey)}}cursor_clear()}});if(!submitRequest()){return}cursor_wait();wc.service.invoke("QuickCheckOutOrderCopy",b)},addNewShippingAddress:function(a){this.displayAddressDetails(-1,a)},updateAddressForAllItems:function(c){if(c.value!=-1){this.selectedAddressesArray[c.name]=c.value}if(!this.isAjaxCheckOut()){return}var a=c.value;if(a==-1){return}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";var a=document.getElementById("singleShipmentAddress").value;this.updateParamObject(params,"addressId",a,false);if(typeof updateGiftRegistrantAddressForItemsExt!="undefined"&&typeof updateGiftRegistrantAddressForItemsExt!=null){params=updateGiftRegistrantAddressForItemsExt(params,a)}var b=false;var d;if(document.getElementById("shipInstructions")!=null){d=document.getElementById("shipInstructions").value;reWhiteSpace=new RegExp(/^\s+$/);if(reWhiteSpace.test(d)){d=""}b=true}if(!submitRequest()){return}cursor_wait();if(!b||d==undefined||d==""){wc.service.invoke("OrderItemAddressShipMethodUpdate",params)}else{wc.service.invoke("OrderItemAddressShipInstructionsUpdate",params)}},updateShipModeForAllItems:function(b){if(!this.isAjaxCheckOut()){return}var a=b.value;if(a==-1){return}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";this.updateParamObject(params,"shipModeId",a,false);if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params)},updateShipModeForAllItemsNew:function(c){if(!this.isAjaxCheckOut()){return}var a=c;if(a==-1){return}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";if(document.getElementById("zipcodeDisplayNumber")!=null&&document.getElementById("addressId")!=null){ZipCodeOnLoad=document.getElementById("zipcodeDisplayNumber").value;AddressIdOnLoad=document.getElementById("addressId").value;var b=document.getElementById("beanAddressType").value;if(AddressIdOnLoad!=null&&AddressIdOnLoad!=""&&ZipCodeOnLoad!=null&&ZipCodeOnLoad!=""&&b!=null&&b!=""&&b!="B"){params.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}}else{params.calculationUsage="-1,-2,-5,-6,-7"}params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";this.updateParamObject(params,"shipModeId",a,false);if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params);if(!CheckoutHelperJS.shoppingCartPage){wc.render.getRefreshControllerById("currentOrderBoxController");wc.render.updateContext("currentOrderBox_Context",{shipmentSelectBoxval:c});parseWidget("singleShipmentOrderBoxDetail")}},updateShipModeForAllItemsNewForCart:function(e,d,b,c){if(!this.isAjaxCheckOut()){return}var a=e;if(a==-1){return}params=[];params.storeId=d;params.catalogId=b;params.langId=c;params.orderId=".";ZipCodeOnLoad="";AddressIdOnLoad="";params.calculationUsage="-1,-2,-5,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";this.updateParamObject(params,"shipModeId",a,false);if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params);wc.render.getRefreshControllerById("currentOrderBoxController");wc.render.updateContext("currentOrderBox_Context",{shipmentSelectBoxval:e});parseWidget("singleShipmentOrderBoxDetail")},updateShipModeForCart:function(e,d,c,b){var a=e;if(a==-1){return}params=[];params.storeId=d;params.catalogId=c;params.langId=b;params.orderId=".";params.calculationUsage="-1,-2,-5,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";this.updateParamObject(params,"shipModeId",a,false);if(!submitRequest()){}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdateCart",params);return false},updateShippingInstructionsForAllItems:function(){if(!this.isAjaxCheckOut()){return}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";var a=null;var b=document.getElementById("shipInstructions").value;reWhiteSpace=new RegExp(/^\s+$/);if(reWhiteSpace.test(b)){b=""}if(!MessageHelper.isValidUTF8length(b,4000)){MessageHelper.formErrorHandleClient(document.getElementById("shipInstructions").id,MessageHelper.messages.ERROR_ShippingInstructions_TooLong);return}a=document.getElementById("orderItem_1").value;this.updateParamObject(params,"orderItemId",a,false);this.updateParamObject(params,"shipInstructions",b,false);if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",params)},updateShippingChargeForShipModeAjax:function(b,a,d,c){if(!this.isAjaxCheckOut()){return}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=b;params.URL="";params.shipModeId=a;params.shipChargTypeId=d;if(c!=null&&c!=undefined){params.shipCarrAccntNum=c}else{params.shipCarrAccntNum=""}if(!submitRequest()){return}cursor_wait();wc.service.invoke("AjaxOrderShipChargeUpdate",params)},updateShippingChargeForShipMode:function(a){if(this.isAjaxCheckOut()){return}a.URL.value="OrderProcessServiceOrderPrepare?storeId="+CheckoutHelperJS.storeId+"&catalogId="+CheckoutHelperJS.catalogId+"&langId="+CheckoutHelperJS.langId+"&orderId=.&URL=OrderShippingBillingView?forceShipmentType=2";a.submit()},hideShipChargeAccountField:function(b,a){if(document.getElementById(b).value.indexOf("ByCarrier")>-1){document.getElementById(a).style.display="block"}else{document.getElementById(a).style.display="none"}},updateRequestedShipDate:function(b){if(b==null||b.getDisplayedValue()==null){return}if(!b.isValid()){if(document.getElementById("requestedShippingDate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("requestedShippingDate").id,MessageHelper.messages.SHIP_REQUESTED_ERROR)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.SHIP_REQUESTED_ERROR)}return}var a=new Date();var d=dojo.byId("requestShippingDateCheckbox");if(d.checked&&b.compare(b.getValue(),a)<=0){if(document.getElementById("requestedShippingDate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("requestedShippingDate").id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR)}return}if(!this.isAjaxCheckOut()){return}var c="";if(b.getDisplayedValue()!=""){c=dojo.date.stamp.fromISOString(b);c.setHours(12);c=dojo.date.stamp.toISOString(c,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true})}else{if(b.getDisplayedValue()==""){c=this.resetRequestedShipDateValue}}this.updateShippingDateForAllItems(c)},updateShippingDateForAllItems:function(a){params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";this.updateParamObject(params,"requestedShipDate",a,false);if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params)},displayAddressDetails:function(c,a){if(!this.isAjaxCheckOut()){this.displayAddressDetailsWeb10(c,a)}else{if(c!=-1){if(!submitRequest()){return}var b=true;cursor_wait(b);wc.render.updateContext("shippingAddressContext",{shippingAddress:c})}else{this.createAddress(-1,a)}}},displayAddressDetailsWeb10:function(d,a){var c=d;var b=dojo.byId("singleShipmentAddress");for(j=0;j<b.options.length;j++){if(b.options[j].value==c){dojo.byId("addressDetails_"+b.options[j].value).style.display="block"}else{dojo.byId("addressDetails_"+b.options[j].value).style.display="none"}}if(c==-1){this.createAddress(-1,a)}},initDojoEventListenerSingleShipmentPage:function(){var c=document.getElementById("totalNumberOfItems").value;if(c!=null&&c>0){if(dojo.byId("singleShipmentAddress")!=null){dojo.connect(dojo.byId("singleShipmentAddress"),"onchange",setDirtyFlag)}if(dojo.byId("WC_ShippingAddressSelectSingle_div_2")!=null){dojo.connect(dojo.byId("WC_ShippingAddressSelectSingle_div_2"),"onclick",setDirtyFlag)}if(dojo.byId("singleShipmentShippingMode")!=null){dojo.connect(dojo.byId("singleShipmentShippingMode"),"onchange",setDirtyFlag)}if(dojo.byId("shipAsComplete")!=null){dojo.connect(dojo.byId("shipAsComplete"),"onclick",setDirtyFlag)}if(dojo.byId("shippingInstructionsCheckbox")!=null){dojo.connect(dojo.byId("shippingInstructionsCheckbox"),"onclick",setDirtyFlag)}if(dojo.byId("requestShippingDateCheckbox")!=null){dojo.connect(dojo.byId("requestShippingDateCheckbox"),"onclick",setDirtyFlag)}if(dojo.byId("shipInstructions")!=null){dojo.connect(dojo.byId("shipInstructions"),"onchange",setDirtyFlag)}if(dojo.byId("expediteShipping")!=null){dojo.connect(dojo.byId("expediteShipping"),"onchange",setDirtyFlag)}if(dojo.byId("expediteShipping_1")!=null){for(var b=0;b<c;b++){if(dojo.byId("qty_"+(b+1))!=null&&dojo.byId("qty_"+(b+1)).value!="-1"){var a=dojo.byId("expediteShipping_"+(b+1));dojo.connect(a,"onchange",setDirtyFlag)}}}}else{console.debug("error: element 'totalNumberOfItems' was expected but undefined.");return}},updateSingleShipmentShoppingCart:function(a){var o="OrderChangeServiceShipInfoUpdate?";var l="OrderChangeServiceShipInfoUpdate?";var e=null;var n=null;if(dojo.byId("shippingInstructionsCheckbox")!=null){if(dojo.byId("shippingInstructionsCheckbox").checked){if(document.getElementById("shipInstructions")!=null&&document.getElementById("shipInstructions").value!=null){if(MessageHelper.isValidUTF8length(document.getElementById("shipInstructions").value,4000)){e=document.getElementById("shipInstructions").value}else{MessageHelper.formErrorHandleClient(document.getElementById("shipInstructions").id,MessageHelper.messages.ERROR_ShippingInstructions_TooLong);return}}}else{if(document.getElementById("shipInstructions")!=null){e=""}}}if(dojo.byId("requestShippingDateCheckbox")!=null){var m=dijit.byId("requestedShippingDate");if(dojo.byId("requestShippingDateCheckbox").checked){if(m!=null&&m.getDisplayedValue()!=null){var b=new Date();if(m.compare(m.getValue(),b)<=0){if(document.getElementById("requestedShippingDate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("requestedShippingDate").id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR)}return}var n="";if(m.getDisplayedValue()!=""){n=dojo.date.stamp.fromISOString(m);n.setHours(12);n=dojo.date.stamp.toISOString(n,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true})}else{if(m.getDisplayedValue()==""){n=this.resetRequestedShipDateValue}}}}else{if(m!=null){n=this.resetRequestedShipDateValue}}}if(document.getElementById("singleShipmentAddress").value!=-1){l=l+"addressId="+document.getElementById("singleShipmentAddress").value}else{MessageHelper.formErrorHandleClient(document.getElementById("singleShipmentAddress").id,MessageHelper.messages.SHIPPING_INVALID_ADDRESS);return}o=o+"shipModeId="+document.getElementById("singleShipmentShippingMode").value;if(this.shipChargeEnabled){o=o+"&shippingChargeType="+document.getElementById("shipChargTypeId_1").value;o=o+"&shipCarrAccntNum="+document.getElementById("shipCarrAccntNum_1").value}var g="";if(e!=null){g="shipInstructions%3D"+e+"%26orderItemId_1%3D"+document.getElementById("orderItem_1").value}if(n!=null){o=o+"&requestedShipDate="+n}if(dojo.byId("shipAsComplete")!=null){if(dojo.byId("shipAsComplete").checked){o=o+"&ShipAsComplete=Y"}else{o=o+"&ShipAsComplete=N"}}if(document.getElementById("expediteShipping_1")!=null){var c=document.getElementById("totalNumberOfItems").value;for(var f=0;f<c;f++){if(document.getElementById("qty_"+(f+1))!=null&&document.getElementById("qty_"+(f+1)).value!="-1"){var k=document.getElementById("orderItem_"+(f+1)).value;if(document.getElementById("orderItemId_"+(f+1))!=null){document.getElementById("orderItemId_"+(f+1)).value=k}var d=document.getElementById("expediteShipping_"+(f+1));if(d.checked){document.getElementById("isExpedited_"+(f+1)).value="Y"}else{document.getElementById("isExpedited_"+(f+1)).value="N"}}}}a.action=o;var h=wc.render.getContextById("traditionalShipmentDetailsContext").properties.beginIndex;if(h==null||h==""){h=0}a.URL.value=l+"&requestedShipDate*=&shipModeId*=&orderItemId*=&URL=OrderChangeServiceShipInfoUpdate%3F"+g+"%26allocate%3D***%26backorder%3D***%26remerge%3D***%26check%3D*n%26URL%3DOrderShippingBillingView%3F%26beginIndex%3D"+h;if(!submitRequest()){return}a.submit()},moveAllItemsToSingleShipment:function(){var b=document.getElementById("orderItem_1").value;var a=document.getElementById("MS_ShipmentAddress_"+b).value;params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(a==-3){var e=document.getElementById("totalNumberOfItems").value;for(var d=2;d<=e;d++){if(document.getElementById("orderItem_"+d)!=null&&document.getElementById("orderItem_"+d)!="undefined"){var c=document.getElementById("orderItem_"+d).value;var f=document.getElementById("MS_ShipmentAddress_"+c).value;if(f!=-3){this.updateParamObject(params,"addressId",f,false);break}}else{break}}}else{this.updateParamObject(params,"addressId",a,false)}if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate1",params)},addNewShippingAddressForMS:function(a){this.updateAddressIdForThisItem(-1,a);this.orderItemIds.push(a)},updateAddressIdForThisItem:function(d,b){if(d!=-1){var c=dojo.byId("MS_ShipmentAddress_"+b);this.selectedAddressesArray[c.name]=d}if(d==-1){return}if(!this.isAjaxCheckOut()){return}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";var a=d;this.updateParamObject(params,"shipToRegistrant","0",false,-1);this.updateParamObject(params,"addressId",a,false,-1);this.updateParamObject(params,"orderItemId",b,false,-1);if(typeof updateGiftRegistrantAddressForThisItemExt!="undefined"&&typeof updateGiftRegistrantAddressForThisItemExt!=null){params=updateGiftRegistrantAddressForThisItemExt(params,a)}if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params)},updateShipModeForThisItem:function(c,b){var a=c.value;if(a==-1){return}if(!this.isAjaxCheckOut()){return}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";this.updateParamObject(params,"orderItemId",b,false,-1);this.updateParamObject(params,"shipModeId",a,false,-1);params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderItemAddressShipMethodUpdate",params)},updateShippingInstructionsForThisItem:function(e,c){var b=document.getElementById("MS_ShipmentAddress_"+c).value;var a=document.getElementById("MS_ShippingMode_"+c).value;var d=e.value;reWhiteSpace=new RegExp(/^\s+$/);if(reWhiteSpace.test(d)){d=""}if(this.isAjaxCheckOut()){if(!MessageHelper.isValidUTF8length(d,4000)){MessageHelper.formErrorHandleClient(e.id,MessageHelper.messages.ERROR_ShippingInstructions_TooLong);return}}this.setShippingInstuctionsForAllOtherItems(b,a,d);if(!this.isAjaxCheckOut()){return}params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";this.updateParamObject(params,"addressId",b,false,-1);this.updateParamObject(params,"shipModeId",a,false,-1);this.updateParamObject(params,"shipInstructions",d,false,-1);this.updateParamObject(params,"orderItemId",c,false,-1);if(!submitRequest()){return}cursor_wait();wc.service.invoke("OrderShippingInfoUpdate",params)},updateRequestedShipDateForThisItem:function(e,d){if(e==null||e.getDisplayedValue()==null){return}if(!e.isValid()){if(document.getElementById("MS_requestedShippingDate_"+d)!=null){MessageHelper.formErrorHandleClient(document.getElementById("MS_requestedShippingDate_"+d).id,MessageHelper.messages.SHIP_REQUESTED_ERROR)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.SHIP_REQUESTED_ERROR)}return}var c=new Date();var g=dojo.byId("MS_requestShippingDateCheckbox_"+d);if(g.checked&&e.compare(e.getValue(),c)<=0){if(document.getElementById("MS_requestedShippingDate_"+d)!=null){MessageHelper.formErrorHandleClient(document.getElementById("MS_requestedShippingDate_"+d).id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR)}return}if(!this.isAjaxCheckOut()){return}var f="";if(e.getDisplayedValue()!=""){f=dojo.date.stamp.fromISOString(e);f.setHours(12);f=dojo.date.stamp.toISOString(f,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true})}else{if(e.getDisplayedValue()==""){f=this.resetRequestedShipDateValue}}var b=document.getElementById("MS_ShipmentAddress_"+d).value;var a=document.getElementById("MS_ShippingMode_"+d).value;params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";this.updateParamObject(params,"orderItemId",d,false,-1);this.updateParamObject(params,"requestedShipDate",f,false,-1);params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.allocate="***";params.backorder="***";params.remerge="***";params.check="*n";if(!submitRequest()){return}cursor_wait();CheckoutHelperJS.RequestShippingDateAction=true;wc.service.invoke("OrderItemAddressShipMethodUpdate",params)},createAddressForMS:function(b,a){if(!submitRequest()){return}cursor_wait();wc.render.updateContext("editShippingAddressContext",{shippingAddress:"-1",addressType:a});this.showHideDivs("editAddressContents","mainContents")},displayAddressDetailsForMSHelper:function(b,a){this.displayAddressDetailsForMS(-1,b,a)},displayAddressDetailsForMS:function(d,c,b){if(this.isAjaxCheckOut()){if(d==-1){this.createAddressForMS(c,b)}}else{if(d==-1){this.createAddressForMS(c,b)}else{var a=dojo.byId("MS_shippingAddressDisplayArea_"+c);a.innerHTML=dojo.byId("addressDetails_"+d).innerHTML}}},initDojoEventListenerMultiShipmentPage:function(){var h=document.getElementById("totalNumberOfItems").value;if(h!=null&&h>0){var g=new dojox.collections.ArrayList([]);var d=new dojox.collections.ArrayList([]);for(var e=0;e<h;e++){var c=document.getElementById("orderItem_"+(e+1)).value;var b="";if(c!=null){b=dojo.byId("MS_shippingInstructionsCheckbox_"+c);if(b!=null){g.add(b)}b=dojo.byId("MS_requestShippingDateCheckbox_"+c);if(b!=null){g.add(b)}b=dojo.byId("shipAsComplete");if(b!=null){g.add(b)}b=dojo.byId("editAddressButton");if(b!=null){g.add(b)}b=dojo.byId("MS_expediteShipping_"+c);if(b!=null){g.add(b)}b=dojo.byId("MS_ShipmentAddress_"+c);if(b!=null){d.add(b)}b=dojo.byId("MS_ShippingMode_"+c);if(b!=null){d.add(b)}b=dojo.byId("MS_shipInstructions_"+c);if(b!=null){d.add(b)}b=dojo.byId("qty_"+(e+1));if(b!=null){d.add(b)}}else{var a=e+1;console.debug("error: element 'orderItem_'"+a+" was expected but undefined.")}}for(var e=0;e<g.count;e++){var f=g.item(e);dojo.connect(f,"onclick",setDirtyFlag)}for(var e=0;e<d.count;e++){var f=d.item(e);dojo.connect(f,"onchange",setDirtyFlag)}}else{console.debug("error: element 'totalNumberOfItems' was expected but undefined.");return}},updateMultiShipmentShoppingCart:function(b){var f="OrderChangeServiceShipInfoUpdate";var l="OrderShippingBillingView?";var q=document.getElementById("totalNumberOfItems").value;for(var e=0;e<q;e++){var k=document.getElementById("orderItem_"+(e+1)).value;if(document.getElementById("orderItemId_"+(e+1))!=null){document.getElementById("orderItemId_"+(e+1)).value=k}var n=document.getElementById("MS_ShipmentAddress_"+k).value;if(n!=-1){if(document.getElementById("addressId_"+(e+1))!=null){document.getElementById("addressId_"+(e+1)).value=n}}else{MessageHelper.formErrorHandleClient(document.getElementById("MS_ShipmentAddress_"+k).id,MessageHelper.messages.SHIPPING_INVALID_ADDRESS);return}if(b.elements["shipModeId_"+(e+1)]!=null){b.elements["shipModeId_"+(e+1)].value=document.getElementById("MS_ShippingMode_"+k).value}var d=null;var p=null;var c=dojo.byId("MS_shippingInstructionsCheckbox_"+k);if(c!=null){if(c.checked){if(document.getElementById("MS_shipInstructions_"+k)!=null&&document.getElementById("MS_shipInstructions_"+k).value!=null){if(MessageHelper.isValidUTF8length(document.getElementById("MS_shipInstructions_"+k).value,4000)){d=document.getElementById("MS_shipInstructions_"+k).value}else{MessageHelper.formErrorHandleClient(document.getElementById("MS_shipInstructions_"+k).id,MessageHelper.messages.ERROR_ShippingInstructions_TooLong);return}}}else{if(document.getElementById("MS_shipInstructions_"+k)!=null){d=""}}}var m=dojo.byId("MS_requestShippingDateCheckbox_"+k);if(m!=null){p=this.resetRequestedShipDateValue;var o=dijit.byId("MS_requestedShippingDate_"+k);if(m.checked){if(o!=null&&o.getDisplayedValue()!=null){var a=new Date();if(o.compare(o.getValue(),a)<=0){if(document.getElementById("MS_requestedShippingDate_"+k)!=null){MessageHelper.formErrorHandleClient(document.getElementById("MS_requestedShippingDate_"+k).id,MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR)}return}var p="";if(o.getDisplayedValue()!=""){p=dojo.date.stamp.fromISOString(o);p.setHours(12);p=dojo.date.stamp.toISOString(p,{selector:"%Y-%m-%dT%H:%m:%S.%SZ",zulu:true,milliseconds:true})}else{if(o.getDisplayedValue()==""){p=this.resetRequestedShipDateValue}}}}else{if(o!=null){p=this.resetRequestedShipDateValue}}}if(d!=null){if(document.getElementById("qty_"+(e+1))!=null&&document.getElementById("qty_"+(e+1)).value!=-1){if(document.getElementById("shipInstructions_"+(e+1))!=null){document.getElementById("shipInstructions_"+(e+1)).value=d}}}if(p!=null){if(document.getElementById("qty_"+(e+1))!=null&&document.getElementById("qty_"+(e+1)).value!=-1){if(document.getElementById("requestedShipDate_"+(e+1))!=null){document.getElementById("requestedShipDate_"+(e+1)).value=p}}}if(document.getElementById("MS_expediteShipping_"+k)!=null&&document.getElementById("isExpedited_"+(e+1))!=null){if(document.getElementById("qty_"+(e+1))!=null&&document.getElementById("qty_"+(e+1)).value!=-1){if(document.getElementById("MS_expediteShipping_"+k).checked){document.getElementById("isExpedited_"+(e+1)).value="Y"}else{document.getElementById("isExpedited_"+(e+1)).value="N"}}}}var h=document.getElementById("shipAsComplete");if(document.getElementById("ShipAsComplete")!=null){if(h.checked){document.getElementById("ShipAsComplete").value="Y"}else{document.getElementById("ShipAsComplete").value="N"}}l=l+"orderItemId*=";l=l+"&quantity*=";l=l+"&addressId*=";l=l+"&shipModeId*=";l=l+"&shipInstructions*=";l=l+"&requestedShipDate*=";l=l+"&isExpedited*=";l=l+"&ShipAsComplete*=";l=l+"&orderItem*=";l=l+"&MS_ShipmentAddress*=";l=l+"&MS_ShippingMode*=";l=l+"&MS_shippingInstructionsCheckbox*=";l=l+"&MS_shipInstructions*=";l=l+"&MS_requestShippingDateCheckbox*=";l=l+"&MS_requestedShippingDate*=";l=l+"&MS_expediteShipping*=";l=l+"&qty*=";l=l+"&shipAsComplete*=";var g=wc.render.getContextById("multipleShipmentDetailsContext").properties.beginIndex;if(g==null||g==""){g=0}l=l+"&beginIndex="+g;b.action=f;b.URL.value=l;if(!submitRequest()){return}b.submit()},showHideEditAddressLink:function(e,c){if(e.value=="-3"){if(dojo.byId("editAddressLink_"+c)!=null&&dojo.byId("editAddressLink_"+c)!="undefined"){dojo.byId("editAddressLink_"+c).style.display="none"}return}var b=document.getElementById("shippingOrganizationAddressList");if(b){var a=[];a=b.value.toString().split(",");for(var d=0;d<a.length;d++){if(dojo.byId("editAddressLink_"+c)!=null&&dojo.byId("editAddressLink_"+c)!="undefined"){if(e.value==a[d]){dojo.byId("editAddressLink_"+c).style.display="none";break}else{dojo.byId("editAddressLink_"+c).style.display="block"}}}}else{if(dojo.byId("editAddressLink_"+c)!=null&&dojo.byId("editAddressLink_"+c)!="undefined"){dojo.byId("editAddressLink_"+c).style.display="block"}}},showHideEditBillingAddressLink:function(e,c,f){if(e.value=="-2"){dojo.byId("editBillingAddressLink"+f+"_"+c).style.display="none";return}var b=document.getElementById("shippingOrganizationAddressList");if(b){var a=[];a=b.value.toString().split(",");for(var d=0;d<a.length;d++){if(dojo.byId("editBillingAddressLink"+f+"_"+c)!=null&&dojo.byId("editBillingAddressLink"+f+"_"+c)!="undefined"){if(e.value==a[d]){dojo.byId("editBillingAddressLink"+f+"_"+c).style.display="none";break}else{dojo.byId("editBillingAddressLink"+f+"_"+c).style.display="block"}}}}else{if(dojo.byId("editBillingAddressLink"+f+"_"+c)!=null&&dojo.byId("editBillingAddressLink"+f+"_"+c)!="undefined"){dojo.byId("editBillingAddressLink"+f+"_"+c).style.display="none"}}},setOrderId:function(a){this.orderId=a},getOrderId:function(){return this.orderId},showHideCreateBillingAddressLink:function(e,c,f){if(e.value=="-2"){dojo.byId("createBillingAddressLink"+f+"_"+c).style.display="none";return}var b=document.getElementById("shippingOrganizationAddressList");if(b){var a=[];a=b.value.toString().split(",");for(var d=0;d<a.length;d++){if(dojo.byId("createBillingAddressLink"+f+"_"+c)!=null&&dojo.byId("createBillingAddressLink"+f+"_"+c)!="undefined"){if(e.value==a[d]){dojo.byId("createBillingAddressLink"+f+"_"+c).style.display="none";break}else{dojo.byId("createBillingAddressLink"+f+"_"+c).style.display="block"}}}}else{if(dojo.byId("createBillingAddressLink"+f+"_"+c)!=null&&dojo.byId("createBillingAddressLink"+f+"_"+c)!="undefined"){dojo.byId("createBillingAddressLink"+f+"_"+c).style.display="none"}}},ShowEstimateButton:function(){var a=dojo.byId("shippingdone");if(a==null){$(".Noestimate").css("display","block");$(".Getestimate").css("display","none")}},paypalRedirect:function(h,a){var b=dojo.byId("returnURL").value;var d=window.location.href;var g=[];if($("#companyinput").val()!=null&&$("#companyinput").val()!=""){g.shipto_companyname=dojo.byId("companyinput").value}if(h=="yes"){g.shippingAddressMadatory="true";g.shipto_firstname=dojo.byId("firstnameinput").value;g.shipto_lastname=dojo.byId("lastnameinput").value;g.shipto_address1=dojo.byId("address1input").value;if(dojo.byId("address2input").value!=null&&dojo.byId("address2input").value!=""){g.shipto_address2=dojo.byId("address2input").value}g.shipto_city=dojo.byId("cityinput").value;g.shipto_stateprovince=dojo.byId("customDropdown").value;g.shipto_zipcode=dojo.byId("zipcodeinput").value;var f=dojo.byId("phonenumberinput_Prt1").value;var e=dojo.byId("phonenumberinput_Prt2").value;var c=dojo.byId("phonenumberinput_Prt3").value;var k=f+"-"+e+"-"+c;g.shipto_phonenumber=k;if(dojo.byId("phoneextinput").value!=null&&dojo.byId("phoneextinput").value!=""){g.shipto_extnumber=dojo.byId("phoneextinput").value}g.shipto_country="US"}else{g.shippingAddressMadatory="false"}g.orderId=dojo.byId("payPalOrderId").value;g.returnURL=b;g.cancelURL=d;g.storeId=this.storeId;g.catalogId=this.catalogId;g.langId=this.langId;g.pageSourceType=a;wc.service.invoke("AjaxSetExpressCheckout",g)},getCookie:function(d){var b=d+"=";var a=document.cookie.split(";");for(var e=0;e<a.length;e++){var f=a[e].trim();if(f.indexOf(b)==0){return f.substring(b.length,f.length)}}return""},paypalConfirmOrder:function(){dojo.byId("loadingOverlay").style.display="block";var e=[],c;c=getCookie("hpshopping2");if(c==undefined){e.aoID=""}else{e.aoID=c}e.shipto_firstname=dojo.byId("firstnameinput").value;e.shipto_lastname=dojo.byId("lastnameinput").value;e.shipto_address1=dojo.byId("address1input").value;if(dojo.byId("address2input").value!=null&&dojo.byId("address2input").value!=""){e.shipto_address2=dojo.byId("address2input").value}e.shipto_city=dojo.byId("cityinput").value;e.shipto_stateprovince=dojo.byId("customDropdown").value;e.shipto_zipcode=dojo.byId("zipcodeinput").value;var b=dojo.byId("phonenumberinput_Prt1").value;var a=dojo.byId("phonenumberinput_Prt2").value;var f=dojo.byId("phonenumberinput_Prt3").value;var d=b+a+f;e.shipto_phonenumber=d;if(dojo.byId("phoneextinput").value!=null&&dojo.byId("phoneextinput").value!=""){e.shipto_extnumber=dojo.byId("phoneextinput").value}e.shipto_country="US";e.confirmationEmail=dojo.byId("confirmationemailinput").value;if(dojo.byId("logonID").value!="guest"){e.logonID=dojo.byId("logonID").value}else{e.logonID=dojo.byId("confirmationemailinput").value}e.orderId=dojo.byId("payPalOrderId").value;e.ormorder=dojo.byId("ormOrderId").value;e.paymentType="payPal";e.isSmbOrder=document.getElementById("isSMBOrder").value;e.isPartnerAgentOrder=dojo.byId("partnerAgentCheck").checked;e.partnerLocId=document.getElementById("partnerLocId").value;e.partnerRepId=document.getElementById("partnerRepId").value;e.partnerPO=document.getElementById("partnerPO").value;e.partnerName=document.getElementById("partnerName").value;e.partnerCity=document.getElementById("partnerCity").value;e.partnerState=document.getElementById("partnerState").value;e.partnerZip=document.getElementById("partnerZip").value;wc.service.invoke("AjaxOrderSubmitService",e)},MPRAjax:function(c,e,b,a){var d=[];d.userId=c;d.LogonId=e;d.storeId=b;d.returnURL=a;wc.service.invoke("MPRInkToner",d)},getShippingMode:function(c){if(dojo.isString(c)){c=dojo.byId(c)}var b=null;for(var a=0;a<c.options.length;a++){if(c[a].selected){b=c[a]}}if(b){return{id:b.value,code:b.getAttribute("shipModeCode"),description:b.text}}},saveNewsLetterSubscription:function(){var c=document.getElementById("confirmationemailinputValue").value;var e=document.getElementById("eMailFlag").checked;var b=document.getElementById("phoneFlag").checked;var d=document.getElementById("mobileFlag").checked;var a=document.getElementById("phoneInput").value;params=[];params.eMailFlag=e;params.phoneFlag=b;params.mobileFlag=d;params.eMailId=c;params.phoneInput=a;wc.service.invoke("NewsLetterSubscriptionID",params)}};ShipmodeSelectionExtJS={langId:"-1",storeId:"",catalogId:"",storeLocatorEnabled:false,orderItemId:"",isPickUpInStore:function(){var a=this.getShipTypeValue();if(a=="pickUp"){return true}else{return false}},getShipTypeValue:function(){if(document.BOPIS_FORM!=undefined){for(var a=0;a<document.BOPIS_FORM.shipType.length;a++){if(document.BOPIS_FORM.shipType[a].checked){return document.BOPIS_FORM.shipType[a].value}}}},getShipTypeValueFromCookieForOrder:function(a){var b=dojo.cookie("WC_shipTypeValueOrderId");if(b==a){var c=dojo.cookie("WC_shipTypeValue");return c}else{return""}},setShipTypeValueToCookieForOrder:function(d,a){var c=d;if(c!=null&&c!="undefined"&&c!=""){var b=dojo.cookie("WC_shipTypeValueOrderId");if(b!=a){dojo.cookie("WC_shipTypeValueOrderId",null,{expires:-1});dojo.cookie("WC_shipTypeValueOrderId",a,{path:"/"})}var e=this.getShipTypeValueFromCookieForOrder(a);if(c!=e){dojo.cookie("WC_shipTypeValue",null,{expires:-1});dojo.cookie("WC_shipTypeValue",c,{path:"/"})}}if(c=="pickUp"){if(document.getElementById("scheduling_options")){document.getElementById("scheduling_options").style.display="none";dojo.cookie("WC_recurringOrder_"+a,"false",{path:"/"});if(document.getElementById("recurringOrder")){document.getElementById("recurringOrder").checked=false}this.hideShowNonRecurringOrderMsg(a)}}else{if(c=="shopOnline"){if(document.getElementById("scheduling_options")){document.getElementById("scheduling_options").style.display="block";this.hideShowNonRecurringOrderMsg(a)}}}},displaySavedShipmentTypeForOrder:function(a){var b=dojo.cookie("WC_shipTypeValueOrderId");if(b!=a){dojo.cookie("WC_shipTypeValueOrderId",null,{expires:-1});dojo.cookie("WC_shipTypeValue",null,{expires:-1})}else{var c=this.getShipTypeValueFromCookieForOrder(a);if(c=="pickUp"){if(document.getElementById("shipTypePickUp").disabled==false){document.getElementById("shipTypePickUp").checked=true;if(document.getElementById("scheduling_options")){document.getElementById("scheduling_options").style.display="none";dojo.cookie("WC_recurringOrder_"+a,"false",{path:"/"});if(document.getElementById("recurringOrder")){document.getElementById("recurringOrder").checked=false}}}else{document.getElementById("shipTypeOnline").checked=true;if(document.getElementById("scheduling_options")){document.getElementById("scheduling_options").style.display="block"}this.setShipTypeValueToCookieForOrder("shopOnline",a)}}else{if(c=="shopOnline"){document.getElementById("shipTypeOnline").checked=true;if(document.getElementById("scheduling_options")){document.getElementById("scheduling_options").style.display="block"}}}}this.hideShowNonRecurringOrderMsg(a,true)},hideShowNonRecurringOrderMsg:function(b,e){if((document.getElementById("recurringOrder")&&document.getElementById("recurringOrder").checked&&document.getElementById("shipTypeOnline")&&document.getElementById("shipTypeOnline").checked)||(document.getElementById("recurringOrder")&&document.getElementById("recurringOrder").checked&&document.getElementById("shipTypeOnline")==null)){dojo.cookie("WC_recurringOrder_"+b,"true",{path:"/"})}else{dojo.cookie("WC_recurringOrder_"+b,"false",{path:"/"})}if(document.getElementById("nonRecurringOrderItems")&&document.getElementById("nonRecurringOrderItems").value!=""){if(document.getElementById("nonRecurringOrderItemsCount")&&document.getElementById("numOrderItemsInOrder")){var g=document.getElementById("numOrderItemsInOrder").value;var f=document.getElementById("nonRecurringOrderItemsCount").value;if(g==f){if(document.getElementById("scheduling_options")){document.getElementById("scheduling_options").style.display="none";dojo.cookie("WC_recurringOrder_"+b,"false",{path:"/"});if(document.getElementById("recurringOrder")){document.getElementById("recurringOrder").checked=false}return}}}var c=document.getElementById("nonRecurringOrderItems").value;var a=c.split(",");for(var d=0;d<a.length;d++){if(document.getElementById("nonRecurringItem_"+a[d])){if((document.getElementById("recurringOrder")&&document.getElementById("recurringOrder").checked&&document.getElementById("shipTypeOnline")&&document.getElementById("shipTypeOnline").checked)||(document.getElementById("recurringOrder")&&document.getElementById("recurringOrder").checked&&document.getElementById("shipTypeOnline")==null)){document.getElementById("nonRecurringItem_"+a[d]).style.display="block"}else{document.getElementById("nonRecurringItem_"+a[d]).style.display="none"}}}if((document.getElementById("recurringOrder")&&document.getElementById("recurringOrder").checked&&document.getElementById("shipTypeOnline")&&document.getElementById("shipTypeOnline").checked&&!e)||(document.getElementById("recurringOrder")&&document.getElementById("recurringOrder").checked&&document.getElementById("shipTypeOnline")==null&&!e)){MessageHelper.displayErrorMessage(MessageHelper.messages.RECURRINGORDER_ERROR)}}},registeredUserContinue:function(d,g){if(CheckoutHelperJS.getFieldDirtyFlag()){if(document.getElementById("ShoppingCart_NonAjaxUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("ShoppingCart_NonAjaxUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return}}var b="";var c="";if(c!=""){var f=c.split(",");b="OrderChangeServicePIDelete?";for(var e=0;e<f.length;e++){if(e!=0){b=b+"&"}b=b+"piId="+f[e]}b=b+"&URL="}if(this.isStoreLocatorEnabled()&&this.isPickUpInStore()){document.location.href=g}else{var a="OrderChangeServiceItemUpdate?remerge=***&check=*n&allocate=***&backorder=***&calculationUsage=-1,-2,-5,-6,-7&orderItemId_0="+this.orderItemId+"&errorViewName=AjaxOrderItemDisplayView&orderId=.&URL=";document.location.href=a+d}},guestShopperContinue:function(c,f){if(CheckoutHelperJS.getFieldDirtyFlag()){if(document.getElementById("ShoppingCart_NonAjaxUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("ShoppingCart_NonAjaxUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return}}if(!submitRequest()){}var a="";var b="";if(b!=""){var e=b.split(",");a="OrderChangeServicePIDelete?";for(var d=0;d<e.length;d++){if(d!=0){a=a+"&"}a=a+"piId="+e[d]}a=a+"&URL="}if(this.isStoreLocatorEnabled()&&this.isPickUpInStore()){document.location.href=a+f}else{a="OrderChangeServiceItemUpdate?remerge=***&calculationUsage=-1,-2,-5,-6,-7&orderItemId_0="+this.orderItemId+"&errorViewName=AjaxOrderItemDisplayView&orderId=.&guestChkout=1&URL=";document.location.href=a+c}},guestShopperLogon:function(b,f,c,d){if(CheckoutHelperJS.getFieldDirtyFlag()){if(document.getElementById("ShoppingCart_NonAjaxUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("ShoppingCart_NonAjaxUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return}}var e=f;var a="";if(this.isStoreLocatorEnabled()&&this.isPickUpInStore()){a=d}else{a=c}e=e+"&URL=OrderCalculate%3FURL="+a+"&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-7";document.AjaxLogon.URL.value=e;document.location.href=b},updateCartWithQuickCheckoutProfile:function(a){if(this.isStoreLocatorEnabled()&&this.isPickUpInStore()){MessageHelper.displayErrorMessage(MessageHelper.messages.message_QUICK_CHKOUT_ERR)}else{if(CheckoutHelperJS.getFieldDirtyFlag()){if(document.getElementById("ShoppingCart_NonAjaxUpdate")!=null){MessageHelper.formErrorHandleClient(document.getElementById("ShoppingCart_NonAjaxUpdate"),MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_UPDATE_FIRST_SHOPPING_CART);return}}CheckoutHelperJS.setCommonParameters(this.langId,this.storeId,this.catalogId);CheckoutHelperJS.updateCartWithQuickCheckoutProfile(a)}},setCommonParameters:function(c,a,b){this.langId=c;this.storeId=a;this.catalogId=b},setOrderItemId:function(a){this.orderItemId=a},setStoreLocatorEnabled:function(a){this.storeLocatorEnabled=a},isStoreLocatorEnabled:function(){return this.storeLocatorEnabled},submitStoreSelectionForm:function(b){var a=PhysicalStoreCookieJS.getPickUpStoreIdFromCookie();if(a!=null&&a!=""){b.physicalStoreId.value=a;b.submit()}else{if(document.getElementById("storeSelection_NextButton")!=null){MessageHelper.formErrorHandleClient(document.getElementById("storeSelection_NextButton"),MessageHelper.messages.message_NO_STORE)}else{MessageHelper.displayErrorMessage(MessageHelper.messages.message_NO_STORE)}}},submitAddressForm:function(h,g,k){var b=document.forms[h];if(g!=""){AddressHelper.setStateDivName(g)}var a=false;if(document.getElementById("payInStorePaymentOption").checked){a=true}var e="";var c=b.existingPaymentInstructionId.value;if(c!=""){var f=c.split(",");e="OrderChangeServicePIDelete?";for(var d=0;d<f.length;d++){if(d!=0){e=e+"&"}e=e+"piId="+f[d]}e=e+"&URL="}if(k){document.location.href=e+"OrderChangeServiceItemUpdate?URL=DOMOrderShippingBillingView&remerge=***&check=*n&allocate=***&backorder=***&calculationUsage=-1,-2,-3,-4,-5,-6,-7&orderItemId_0="+this.orderItemId+"&storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId+"&payInStore="+a}else{if(AddressHelper.validateAddressForm(b)){b.URL.value=e+"OrderChangeServiceItemUpdate?remerge=***&check=*n&allocate=***&backorder=***&calculationUsage=-1,-2,-3,-4,-5,-6,-7&orderItemId_0="+this.orderItemId+"&URL=DOMOrderShippingBillingView?payInStore="+a;b.submit()}}}};TealeafWCJS={processDOMEvent:function(a){if(typeof TLT!="undefined"){TLT.processDOMEvent(a)}},rebind:function(b){if(typeof TLT!="undefined"&&TLT.rebind){var a=dojo.byId(b);if(a){TLT.rebind(a)}}},createExplicitChangeEvent:function(b){if(typeof TLT!="undefined"){if(document.createEventObject&&dojo.isIE<9){var a=document.createEventObject();dojo.byId(b).fireEvent("onchange",a)}else{var a=document.createEvent("HTMLEvents");a.initEvent("change",true,false);dojo.byId(b).dispatchEvent(a)}}}};(function(d,b,f){var e=b.Modernizr,c=d("body");d.DLMenu=function(g,h){this.$el=d(h);this._init(g)};d.DLMenu.defaults={animationClasses:{classin:"dl-animate-in-1",classout:"dl-animate-out-1"},onLevelClick:function(h,g){return false},onLinkClick:function(g,h){return false}};d.DLMenu.prototype={_init:function(h){this.options=d.extend(true,{},d.DLMenu.defaults,h);this._config();var g={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},k={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.animEndEventName=g[e.prefixed("animation")]+".dlmenu";this.transEndEventName=k[e.prefixed("transition")]+".dlmenu",this.supportAnimations=e.cssanimations,this.supportTransitions=e.csstransitions;this._initEvents()},_config:function(){this.open=false;this.$trigger=d(".dl-trigger");this.$menu=this.$el.children("ul.dl-menu");this.$menuitems=this.$menu.find("li:not(.dl-back)");this.$el.find("ul.dl-submenu").prepend('<li class="dl-back"><a href="#">Back</a></li>');this.$back=this.$menu.find("li.dl-back")},_initEvents:function(){var g=this;this.$trigger.on("click.dlmenu",function(){if(g.open){g._closeMenu()}else{g._openMenu()}return false});this.$menuitems.on("click.dlmenu",function(l){l.stopPropagation();var k=d(this),h=k.children("ul.dl-submenu");if(h.length>0){var n=h.clone().css("opacity",0).css("top",2).insertAfter(g.$menu),m=function(){g.$menu.off(g.animEndEventName).removeClass(g.options.animationClasses.classout).addClass("dl-subview");k.addClass("dl-subviewopen").parents(".dl-subviewopen:first").removeClass("dl-subviewopen").addClass("dl-subview");n.remove()};setTimeout(function(){n.addClass(g.options.animationClasses.classin);g.$menu.addClass(g.options.animationClasses.classout);if(g.supportAnimations){g.$menu.on(g.animEndEventName,m)}else{m.call()}g.options.onLevelClick(k,k.children("a:first").text())});return false}else{g.options.onLinkClick(k,l)}});this.$back.on("click.dlmenu",function(l){var m=d(this),k=m.parents("ul.dl-submenu:first"),h=k.parent(),o=k.clone().insertAfter(g.$menu);var n=function(){g.$menu.off(g.animEndEventName).removeClass(g.options.animationClasses.classin);o.remove()};setTimeout(function(){o.addClass(g.options.animationClasses.classout);g.$menu.addClass(g.options.animationClasses.classin);if(g.supportAnimations){g.$menu.on(g.animEndEventName,n)}else{n.call()}h.removeClass("dl-subviewopen");var p=m.parents(".dl-subview:first");if(p.is("li")){p.addClass("dl-subviewopen")}p.removeClass("dl-subview")});return false})},closeMenu:function(){if(this.open){this._closeMenu()}},_closeMenu:function(){var g=this,h=function(){g.$menu.off(g.transEndEventName);g._resetMenu()};this.$menu.removeClass("dl-menuopen");this.$menu.addClass("dl-menu-toggle");this.$trigger.removeClass("dl-active");d(".contenedor").removeClass("active");if(this.supportTransitions){this.$menu.on(this.transEndEventName,h)}else{h.call()}this.open=false},openMenu:function(){if(!this.open){this._openMenu()}},_openMenu:function(){var g=this;c.off("click").on("click.dlmenu",function(){g._closeMenu()});this.$menu.addClass("dl-menuopen dl-menu-toggle").on(this.transEndEventName,function(){d(this).removeClass("dl-menu-toggle")});this.$trigger.addClass("dl-active");this.open=true;d(".contenedor").addClass("active")},_resetMenu:function(){this.$menu.removeClass("dl-subview");this.$menuitems.removeClass("dl-subview dl-subviewopen")}};var a=function(g){if(b.console){b.console.error(g)}};d.fn.dlmenu=function(h){if(typeof h==="string"){var g=Array.prototype.slice.call(arguments,1);this.each(function(){var k=d.data(this,"dlmenu");if(!k){a("cannot call methods on dlmenu prior to initialization; attempted to call method '"+h+"'");return}if(!d.isFunction(k[h])||h.charAt(0)==="_"){a("no such method '"+h+"' for dlmenu instance");return}k[h].apply(k,g)})}else{this.each(function(){var k=d.data(this,"dlmenu");if(k){k._init()}else{k=d.data(this,"dlmenu",new d.DLMenu(h,this))}})}return this}})(jQuery,window);function carePackPopup(c,a,b,g,f,e){$("#removeCarePack,.drkOverlay").css("display","block");document.getElementById("carePack_removal").addEventListener("click",function(){d(c,a,b,g,f,e)});function d(m,q,h,p,o,l){var n=[];for(var k=0;k<m.length;k++){n["orderItemId_"+k]=m[k]}n.storeId=h;n.catalogId=o;n.langId=p;n.orderId=q;n.isCarePackAsFreeGiftExist=l;dojo.byId("loadingOverlay").style.display="block";wc.service.invoke("DeleteCarePack",n)}};