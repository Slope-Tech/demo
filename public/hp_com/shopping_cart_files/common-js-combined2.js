dojo.require("wc.service.common");shoppingActionsServicesDeclarationJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(c,a,b){this.langId=c;this.storeId=a;this.catalogId=b}};wc.service.declare({id:"AddOrderItem",actionId:"AddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(b){dropdownUpdated=false;showMiniShopCartDropDown("widget_minishopcart","quick_cart_container","orderItemsListAutoClose");$("html, body").animate({scrollTop:0},$(window).scrollTop()/3);cursor_clear();if(shoppingActionsJS){var a=document.getElementsByName("attrValue");var d=true;for(var c=0;c<a.length;c++){if(a[c].options.length>1){d=false}}if(!d){shoppingActionsJS.selectedAttributes=new Object();dojo.publish("attributesChanged_"+shoppingActionsJS.baseCatalogEntryId,[dojo.toJson(shoppingActionsJS.selectedAttributes)]);for(var c=0;c<a.length;c++){if(a[c]!=null){a[c].value="";a[c].onchange()}}}}if(typeof(ShipmodeSelectionExtJS)!=null&&typeof(ShipmodeSelectionExtJS)!="undefined"){ShipmodeSelectionExtJS.setOrderItemId(b.orderItemId[0])}dojo.publish("CMAddToCart")},failureHandler:function(a){if(a.errorMessage){if(a.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){}else{if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){var b=storeNLS.GENERICERR_MAINTEXT;b=dojo.string.substitute(b,{0:storeNLS.GENERICERR_CONTACT_US})}else{alert(a.errorMessage)}}}else{if(a.errorMessageKey){}}cursor_clear()}}),wc.service.declare({id:"MiniCartOrderCalculate",actionId:"MiniCartOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(c){var a=c.orderIdOrderItemAccessBean;var d=c.orderItemId;var e=[];e.storeId=WCParamJS.storeId;e.catalogId=WCParamJS.catalogId;e.langId=WCParamJS.langId;e.orderId=a;e.orderItemId=d;var b="PDPAccessoriesFinderView?storeId="+shoppingActionsServicesDeclarationJS.storeId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&langId="+shoppingActionsServicesDeclarationJS.langId+"&productId="+$("#PDPSku").val().split("_")[1]+"&SKU_ID="+$("#PDPSku").val().split("_")[0];$.ajax({url:getAbsoluteURL()+b,success:function(h){$("body").append("<div style:visibility='hidden'>"+h+"</div>");if($("#PDPAccessoriesAssociations").val()!=undefined&&$("#PDPAccessoriesAssociations").val().indexOf("Y")!=-1){var f=$("#PDPSku").val().split("_")[1];updateCartQuantityInAddtoCart(c.orderId);var g="AccessoriesView?storeId="+shoppingActionsServicesDeclarationJS.storeId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&langId="+shoppingActionsServicesDeclarationJS.langId+"&productId="+f+"&SKU_ID="+$("#PDPSku").val().split("_")[0];document.location.href=getAbsoluteURL()+g}else{updateCartQuantityInAddtoCart(c.orderId);var g="AjaxOrderItemDisplayView?storeId="+shoppingActionsServicesDeclarationJS.storeId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&langId="+shoppingActionsServicesDeclarationJS.langId+"&hashString="+c.hashString+"&catentDeletedName="+c.catentDeletedName;document.location.href=getAbsoluteURL()+g}}})},failureHandler:function(a){var b="AjaxOrderItemDisplayView?storeId="+shoppingActionsServicesDeclarationJS.storeId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&langId="+shoppingActionsServicesDeclarationJS.langId;document.location.href=getAbsoluteURL()+b}}),wc.service.declare({id:"AddToCartAjax",actionId:"AddToCartAjax",url:getAbsoluteURL()+"AddToCartAjax",formId:"",successHandler:function(b){var e;dropdownUpdated=false;cursor_clear();if(shoppingActionsJS){var a=document.getElementsByName("attrValue");var d=true;for(var c=0;c<a.length;c++){if(a[c].options.length>1){d=false}}if(!d){shoppingActionsJS.selectedAttributes=new Object();dojo.publish("attributesChanged_"+shoppingActionsJS.baseCatalogEntryId,[dojo.toJson(shoppingActionsJS.selectedAttributes)]);for(var c=0;c<a.length;c++){if(a[c]!=null){a[c].value="";a[c].onchange()}}}}if(typeof(ShipmodeSelectionExtJS)!=null&&typeof(ShipmodeSelectionExtJS)!="undefined"){ShipmodeSelectionExtJS.setOrderItemId(b.orderItemId[0])}setShopCartRedirectCookie();if($("#isAddtoCartFromPDPAttach").val()!=undefined&&$("#isAddtoCartFromPDPAttach").val().indexOf("Y")!=-1){}else{if((typeof(updateCartQuantityInAddtoCart)!="undefined")&&(typeof(updateCartQuantityInAddtoCart)=="function")){updateCartQuantityInAddtoCart(b.orderId)}e="AjaxOrderItemDisplayView?storeId="+shoppingActionsServicesDeclarationJS.storeId+"&catalogId="+shoppingActionsServicesDeclarationJS.catalogId+"&langId="+shoppingActionsServicesDeclarationJS.langId;e=getAbsoluteURL()+e}if(b.isPreOrder!=undefined){e=$("#preorder-checkout-url").val();window.location.href=e;return}$.publish(sfEvent.CART_ADDITEM,{redirectUrl:e});if(b.ecareOrdItem!=undefined&&b.ecareQty!=undefined){setTimeout(function(){$("#minicart-container").append($("<div/>",{"class":"minicart-overlay"}));$("#qty_"+b.ecareOrdItem[0]).addClass("busy");updateQtyInCart(b.ecareOrdItem[0],b.ecareQty[0])},500)}},failureHandler:function(a){if(a.errorMessage){if(a.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){}else{if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){var b=storeNLS.GENERICERR_MAINTEXT;b=dojo.string.substitute(b,{0:storeNLS.GENERICERR_CONTACT_US})}else{alert(a.errorMessage)}}}else{if(a.errorMessageKey){}}cursor_clear()}}),wc.service.declare({id:"AddOrderItem1",actionId:"AddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(b){dropdownUpdated=false;cursor_wait();if(shoppingActionsJS){var a=document.getElementsByName("attrValue");var d=true;for(var c=0;c<a.length;c++){if(a[c].options.length>1){d=false}}if(!d){shoppingActionsJS.selectedAttributes=new Object();dojo.publish("attributesChanged_"+shoppingActionsJS.baseCatalogEntryId,[dojo.toJson(shoppingActionsJS.selectedAttributes)]);for(var c=0;c<a.length;c++){if(a[c]!=null){a[c].value="";a[c].onchange()}}}}if(typeof(ShipmodeSelectionExtJS)!=null&&typeof(ShipmodeSelectionExtJS)!="undefined"){ShipmodeSelectionExtJS.setOrderItemId(b.orderItemId[0])}dojo.publish("CMAddToCart");setShopCartRedirectCookie();var e=[];e.storeId=WCParamJS.storeId;e.catalogId=WCParamJS.catalogId;e.langId=WCParamJS.langId;e.URL="";e.updatePrices="1";e.orderId=".";e.calculationUsageId="-1";wc.service.invoke("MiniCartOrderCalculate",e)},failureHandler:function(a){if(a.errorMessage){if(a.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){}else{if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){var b=storeNLS.GENERICERR_MAINTEXT;b=dojo.string.substitute(b,{0:storeNLS.GENERICERR_CONTACT_US})}else{alert(a.errorMessage)}}}else{if(a.errorMessageKey){}}cursor_clear()}}),wc.service.declare({id:"AjaxDeleteOrderItemTcs",actionId:"AjaxDeleteOrderItemTcs",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(a){setShopCartRedirectCookie();updateCartCookie();$.publish(sfEvent.CART_REMOVEITEM,{})},failureHandler:function(a){if(a.errorMessageKey=="_ERR_ORDER_IS_LOCKED"||a.errorMessageKey=="_ERR_ORDER_IS_NOT_LOCKED"){alert(a.errorMessage)}if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}}}),wc.service.declare({id:"AjaxUpdateOrderItemMC",actionId:"AjaxUpdateOrderItemMC",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(a){setShopCartRedirectCookie();updateCartCookie();$.publish(sfEvent.CART_UPDATEITEM,{})},failureHandler:function(a){if(a.errorMessageKey=="_ERR_ORDER_IS_LOCKED"||a.errorMessageKey=="_ERR_ORDER_IS_NOT_LOCKED"){alert(a.errorMessage)}if(a.errorMessage){MessageHelper.displayErrorMessage(a.errorMessage)}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}}}),wc.service.declare({id:"AddPreConfigurationToCart",actionId:"AddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceAddPreConfigurationToCart",formId:"",successHandler:function(b){MessageHelper.hideAndClearMessage();cursor_clear();if(shoppingActionsJS){var a=document.getElementsByName("attrValue");var d=true;for(var c=0;c<a.length;c++){if(a[c].options.length>1){d=false}}if(!d){shoppingActionsJS.selectedAttributes=new Object();for(var c=0;c<a.length;c++){if(a[c]!=null){a[c].value="";a[c].onchange()}}}}if(typeof(ShipmodeSelectionExtJS)!=null&&typeof(ShipmodeSelectionExtJS)!="undefined"){ShipmodeSelectionExtJS.setOrderItemId(b.orderItemId[0])}},failureHandler:function(a){if(a.errorMessage){if(a.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(storeNLS.ERROR_CONTRACT_EXPIRED_GOTO_ORDER)}else{if(a.errorMessageKey=="_ERR_RETRIEVE_PRICE"){var b=storeNLS.GENERICERR_MAINTEXT;b=dojo.string.substitute(b,{0:storeNLS.GENERICERR_CONTACT_US});MessageHelper.displayErrorMessage(b)}else{MessageHelper.displayErrorMessage(a.errorMessage)}}}else{if(a.errorMessageKey){MessageHelper.displayErrorMessage(a.errorMessageKey)}}cursor_clear()}});if(typeof(MessageHelper)=="undefined"||!MessageHelper||!MessageHelper.topicNamespace){MessageHelper={messages:{},identifier:"",getCurrentYear:function(){return new Date().getFullYear()},getCurrentMonth:function(){return new Date().getMonth()+1},getCurrentDay:function(){return new Date().getDate()},getRenderContextProperty:function(c,b){console.debug("enter getRenderContextProperty with propertyName = "+b);if(c==null){console.debug("context is null. Return null...");return null}var a=c.properties[b];console.debug("the found property value is: "+a);return a},setMessage:function(a,b){this.messages[a]=b},showHideMessageArea:function(b){cursor_clear();if(b==null||b==undefined){b=0}var d=dojo.byId("MessageArea");var a=new Array();a.node=d;a.duration=200;a.delay=0;var f=new Array();f.node=d;f.duration=500;f.delay=7000;f.onEnd=function(){dojo.style(d,"display","none");if(dijit.byId("MessageArea_ACCE_Title")!=null){dijit.byId("MessageArea_ACCE_Title").style.display="none"}dojo.style(d,"opacity",100)};dojo.style(d,"opacity",0);if(dijit.byId("MessageArea_ACCE_Title")!=null){dijit.byId("MessageArea_ACCE_Title").style.display="block"}dojo.style(d,"display","block");var h=dojo.fadeIn(a);var g=dojo.fadeOut(f);dojo.fx.chain([h,g]).play();var c=dojo.byId("msgpopup_content_wrapper");var e=new dojox.fx.Shadow({node:c});e.startup()},hideMessageArea:function(){},displayErrorMessage:function(b,a,c){},setMessageAreaStyle:function(a){if(dojo.byId(a)!=null){dojo.byId(a).style.display="inline"}},displayStatusMessage:function(b,a){},hideAndClearMessage:function(){},adjustCoordinates:function(a){if(dojo.style("MessageArea","display")!="none"){var e=dojo.byId("page");var c=dojo.byId("MessageArea");if(e!=null&&c!=null){var d=dojo.coords(e,true);var b=d.w;if(dojo.isSafari){b=dojo.style("page","width")}if(a==null||a==undefined){a=0}dojo.style(c,{width:b+20+"px",left:d.x-10+"px",top:(d.y+a)+"px"})}}},formErrorHandle:function(a,b){this.formErrorHandleClient(a.errorMessageParam,a.errorMessage)},formErrorHandleClient:function(h,c){var d=dojo.byId(h);if(c==null){console.debug("formErrorHandleClient: The error message is null.");return}if(d){if(this.identifier!=(h+"_tooltip")){this.identifier=h+"_tooltip";var e=document.createElement("span");var b=getImageDirectoryPath();if(dojo.isIE<7){e.innerHTML=c+"<iframe id='errorMessageIFrame' scrolling='no' frameborder='0' src='"+b+"images/empty.gif'></iframe>"}else{e.innerHTML=c}var f=new dijit.Tooltip({connectId:[h]},e);f.startup();d.focus();var a=document.createElement("div");a.setAttribute("class","spanacce");a.setAttribute("role","alert");a.setAttribute("id","alert");var g=document.createTextNode(c);a.appendChild(g);document.body.appendChild(a);d.setAttribute("aria-invalid","true");f.open(d);dojo.connect(d,"onblur",f,"close");dojo.connect(d,"onblur",f,"destroy");dojo.connect(d,"onblur",this,"clearCurrentIdentifier");f._onMouseOver=this.emptyFunc}}},clearCurrentIdentifier:function(){this.identifier=""},emptyFunc:function(a){},containsDoubleByte:function(c){var d=new String(c);var b=127;for(var a=0;a<d.length;a++){chr=d.charCodeAt(a);if(chr>b){return true}}return false},isValidEmail:function(a){if(this.containsDoubleByte(a)){return false}if(a.length==0){return true}else{if(a.length<5){return false}else{if(a.indexOf(" ")>0){return false}else{if(a.indexOf("@")<1){return false}else{if(a.lastIndexOf(".")<(a.indexOf("@")+2)){return false}else{if(a.lastIndexOf(".")>=a.length-2){return false}}}}}}return true},isValidUTF8length:function(b,a){if(this.utf8StringByteLength(b)>a){return false}else{return true}},utf8StringByteLength:function(e){if(e===null){return 0}var d=String(e);var b=127;var a=2047;var c=d.length;for(i=0;i<d.length;i++){chr=d.charCodeAt(i);if(chr>b){c=c+1}if(chr>a){c=c+1}}return c},IsNumeric:function(e,c){if(c){var d="0123456789."}else{var d="0123456789"}var b=true;var a;for(i=0;i<e.length&&b==true;i++){a=e.charAt(i);if(d.indexOf(a)==-1){b=false}}return b},IsValidPhone:function(d){var c="0123456789()-+ ";var b=true;var a;for(i=0;i<d.length&&b==true;i++){a=d.charAt(i);if(c.indexOf(a)==-1){b=false}}return b}}}dojo.registerModulePath("wc","../wc");dojo.require("wc.service.common");dojo.require("dojo.io.iframe");dojo.require("dojo.io.script");dojo.require("dojo.parser");dojo.require("dijit.form.Button");dojo.require("wc.widget.WCMenu");dojo.require("wc.widget.WCDialog");dojo.require("wc.widget.ScrollablePane");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.Tooltip");dojo.require("wc.widget.WCDropDownButton");dojo.require("dijit.Dialog");dojo.require("dojo.currency");dojo.require("dijit.Tree");dojo.require("dojo.back");dojo.require("dijit.form.DateTextBox");dojo.require("wc.widget.RefreshArea");dojo.require("wc.render.RefreshController");dojo.require("wc.render.Context");dojo.require("dojo.cookie");dojo.require("dojox.fx.Shadow");dojo.subscribe("ajaxRequestInitiated","incrementNumAjaxRequest");dojo.subscribe("ajaxRequestCompleted","decrementNumAjaxRequest");dojo.subscribe("ajaxRequestCompleted","initializeInactivityWarning");var showDropdown=false;var dropDownDlg=null;var productAddedDropDownDlg=null;var originalMiniCartWidth=0;var isIE=(document.all)?true:false;var correctBrowser=false;var requestSubmitted=false;var currentId="";var numAjaxRequests=0;var widgetsList=[];var tabPressed=false;var currentPopup="";var android=null;var ios=null;function initializeInactivityWarning(){if(document.URL!=null){if((document.URL.indexOf("editRegistration=Y")!=-1)&&(document.URL.indexOf("UserRegistrationForm")!=-1)){inactivityTimeout=1800000}}if(storeUserType!="G"&&inactivityTimeout!=0){if(inactivityTimeoutTracker!=null){clearTimeout(inactivityTimeoutTracker)}inactivityTimeoutTracker=setTimeout(showInactivityWarningDialog,inactivityTimeout-inactivityWarningDialogBuffer)}}function showInactivityWarningDialog(){dijit.byId("inactivityWarningPopup").show();if(dialogTimeoutTracker!=null){clearTimeout(dialogTimeoutTracker)}dialogTimeoutTracker=setTimeout(hideInactivityWarningDialog,inactivityWarningDialogDisplayTimer)}function hideInactivityWarningDialog(){dijit.byId("inactivityWarningPopup").hide()}function resetServerInactivity(){dojo.xhrPost({url:getAbsoluteURL()+"Ping",handleAs:"json-comment-filtered",content:null,service:this,load:function(b,a){if(b.success){initializeInactivityWarning()}else{console.error("Ping service failed")}},error:function(b,a){console.error("Ping service failed")}})}function $dojo(a){return document.getElementById(a)}function focusSetter(){if(dojo.byId("MiniCartFocusReceiver1")){dojo.byId("MiniCartFocusReceiver1").focus()}else{dojo.byId("MiniCartFocusReceiver2").focus()}}function determineFocus(a){if(a.shiftKey&&a.keyCode==dojo.keys.TAB){if(a.srcElement){if(a.srcElement.id=="MiniCartFocusReceiver1"){if(dojo.byId("WC_MiniShopCartDisplay_link_5")){dojo.byId("WC_MiniShopCartDisplay_link_5").focus()}dojo.stopEvent(a)}else{if(a.srcElement.id=="MiniCartFocusReceiver2"){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(a)}}}else{if(a.target.id=="MiniCartFocusReceiver1"){if(dojo.byId("WC_MiniShopCartDisplay_link_5")){dojo.byId("WC_MiniShopCartDisplay_link_5").focus()}dojo.stopEvent(a)}else{if(a.target.id=="MiniCartFocusReceiver2"){dojo.byId("MiniCartFocusReceiver2").focus();dojo.stopEvent(a)}}}}}function destroyDialog(a){if(a==undefined){a="quick_cart_container"}dojo.query(".dijitDialog",document).forEach(function(b){if(dijit.byNode(b).id==a){dijit.byNode(b).destroyRecursive()}});if(a!=undefined&&a=="quick_cart_container"){dropDownDlg=null}else{productAddedDropDownDlg=null}}function hideUnderlayWrapper(){dojo.query(".dijitDialogUnderlayWrapper",document).forEach(function(a){a.style.display="none"})}function loadLink(a){document.location.href=a}function clearSearchField(){searchText=document.getElementById("SimpleSearchForm_SearchTerm").value;if(searchText==document.getElementById("searchTextHolder").innerHTML){document.getElementById("SimpleSearchForm_SearchTerm").value=""}else{document.getElementById("SimpleSearchForm_SearchTerm").select();showAutoSuggestIfResults();autoSuggestHover=false}}function fillSearchField(){if(document.getElementById("SimpleSearchForm_SearchTerm").value==""){document.getElementById("SimpleSearchForm_SearchTerm").className="searchBox left";document.getElementById("SimpleSearchForm_SearchTerm").value=document.getElementById("searchTextHolder").innerHTML}if(!autoSuggestHover){showAutoSuggest(false)}}function showDropDownMenu(){var b=document.getElementById("header_menu_dropdown");if(document.getElementById("header_menu_dropdown")!=null&&document.getElementById("header_menu_dropdown")!="undefined"){b.style.display="block"}if(document.getElementById("outerCartContainer")!=null&&document.getElementById("outerCartContainer")!="undefined"){var a=document.getElementById("outerCartContainer");a.style.display="block"}}function initShopcartTarget(){dojo.subscribe("/dnd/drop",function(d,a,f,e){if(d!=e){e.deleteSelectedNodes()}var c=new popupActionProperties();c.showProductCompare=showProductCompare;if(e.parent.id=="miniShopCart_dndTarget"){var b=d.parent.id.indexOf("_",0);if(b>=0){d.parent.id=d.parent.id.substring(b+1)}if(d.node.getAttribute("dndType")=="item"||d.node.getAttribute("dndType")=="package"){categoryDisplayJS.AddItem2ShopCartAjax(d.parent.id,1)}else{if(d.node.getAttribute("dndType")=="product"||d.node.getAttribute("dndType")=="bundle"){showPopup(d.parent.id,function(g){return g},"miniShopCart_dndTarget",null,c)}}}})}function cursor_wait(a){var b=true;if(a==true){if(dojo.isOpera>0){b=false}}if(b){setTimeout("showProgressBar()",500)}}function showProgressBar(){if(!requestSubmitted){return}displayProgressBar()}function displayProgressBar(){var b=dijit.byId("progress_bar_dialog");if(b!=null){b.closeButtonNode.style.display="none";var c=document.getElementById("progress_bar");c.style.display="block";if(this.currentId!=""){var a=document.getElementById(this.currentId);var d=dijit.placeOnScreenAroundElement(c,a,{TR:"TL"})}else{b.containerNode.innerHTML=="";c.style.left="";c.style.top="";b.containerNode.appendChild(c);b.show()}setTimeout("cursor_clear()",1800000)}}function setCurrentId(a){if(!requestSubmitted&&this.currentId==""){this.currentId=a}}function trim(c){word=c.toString();var b=0;var a=word.length-1;while(word.charAt(b)==" "){b++}while(word.charAt(a)==" "){a=a-1}if(b>a){return word.substring(b,b)}else{return word.substring(b,a+1)}}function cursor_clear(){requestSubmitted=false;if($("img#progress_bar_icon").length>0){$("img#progress_bar_icon").hide()}var a=dijit.byId("progress_bar_dialog");var b=document.getElementById("progress_bar");if(a!=null){if(b!=null){b.style.display="none"}a.hide();this.currentId=""}}function submitRequest(){if(!requestSubmitted){requestSubmitted=true;return true}return false}function resetRequest(){requestSubmitted=false}function setPageLocation(a){if(!submitRequest()){return}document.location.href=a}function submitSpecifiedForm(a){if(!submitRequest()){return}console.debug("form.action == "+a.action);a.submit()}function parseWidget(a){}function parseAllWidgets(){for(var a=0;a<widgetsList.length;a++){parseWidget(widgetsList[a])}}function addToWidgetsList(a){widgetsList.push(a)}function parseWCCEAWidget(c){var a;var b=ceadijit.byId(c);if(b==null||b==undefined){if(c==null||c==undefined){a=ceadojo.body()}else{a=ceadojo.byId(c)}if(a!=null&&a!=undefined){if(a.getAttribute("ceadojoType")!=null&&a.getAttribute("ceadojoType")!=undefined){ceadojo.parser.instantiate([a])}else{ceadojo.parser.parse(a)}}}}function parseHeader(e){var d=dojo.byId("progress_bar_dialog");var b=document.getElementById("header_menu_loaded");var a=document.getElementById("header_menu_overlay");if(currentId.length==0&&document.getElementById("header_menu_loaded")!=null&&document.getElementById("header_menu_loaded")!="undefined"&&document.getElementById("header_menu_overlay")!=null&&document.getElementById("header_menu_overlay")!="undefined"&&document.getElementById("header_menu_loaded").style.display=="none"){setCurrentId((e!=null&&e!=undefined)?e:a.id);submitRequest();cursor_wait();a.style.display="none";parseWidget("header_menu_loaded");b.style.display="block";cursor_clear();try{if(window.top._ceaCollabDialog!=undefined||window.top._ceaCollabDialog!=null){dijit.registry.byClass("wc.widget.WCDropDownButton").forEach(function(f){dojo.connect(f,"_onDropDownClick",dojo.hitch(window.top._ceaCollabDialog,"topCategoryClicked",f.getURL()));dojo.connect(f,"onKeyPress",window.top._ceaCollabDialog,function(g){if(g.keyCode==dojo.keys.ENTER){window.top._ceaCollabDialog.topCategoryClicked(f.getURL())}})})}}catch(c){}}}function hideElementById(a){var b=dojo.byId(a);b.style.display="none"}function showElementById(a){var b=dojo.byId(a);b.style.display="block"}function hideBackgroundImage(a){a.style.backgroundImage="none"}function showBackgroundImage(a){a.style.backgroundImage="url("+getImageDirectoryPath()+getStyleDirectoryPath()+"product_hover_background.png)"}function checkIE8Browser(){if(dojo.isIE&&dojo.isIE<=8){correctBrowser=true}}function ApprovalToolLink(b,a){checkIE8Browser();if(correctBrowser){RFQwindow=window.open(a)}else{MessageHelper.formErrorHandleClient(b,MessageHelper.messages.ERROR_INCORRECT_BROWSER);return}}function updateViewAndBeginIndexForCurrencyChange(){if(document.getElementById("fastFinderResultControls")!=null&&document.getElementById("fastFinderResultControls")!=""){if(document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=document.FastFinderForm.pageView.value}if(document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=document.FastFinderForm.beginIndex.value}}else{if(document.getElementById("CategoryDisplay_Widget")!=null&&document.getElementById("CategoryDisplay_Widget")!=""){if(wc.render.getContextById("CategoryDisplay_Context").properties.pageView!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties.pageView}if(wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex}}else{if(document.getElementById("Search_Result_Summary")!=null&&document.getElementById("Search_Result_Summary")!=""){if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView}if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum}}else{if(document.getElementById("Search_Result_Summary2")!=null&&document.getElementById("Search_Result_Summary2")!=""){if(wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView!=""&&document.SetCurrencyPreferenceForm.pageView!=null){document.SetCurrencyPreferenceForm.pageView.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView}if(wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.SetCurrencyPreferenceForm.beginIndex!=null){document.SetCurrencyPreferenceForm.beginIndex.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum}}}}}try{if(window.top._ceaCollabDialog!=undefined||window.top._ceaCollabDialog!=null){dojo.byId("SetCurrencyPreferenceForm").URL.value=dojo.byId("SetCurrencyPreferenceForm").URL.value+"&coshopChangeCurrency="+dojo.byId("currencySelection").options[dojo.byId("currencySelection").selectedIndex].value}}catch(a){}}function updateViewAndBeginIndexForLanguageChange(){if(document.getElementById("fastFinderResultControls")!=null&&document.getElementById("fastFinderResultControls")!=""){if(document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=document.FastFinderForm.pageView.value}if(document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=document.FastFinderForm.beginIndex.value}}else{if(document.getElementById("CategoryDisplay_Widget")!=null&&document.getElementById("CategoryDisplay_Widget")!=""){if(wc.render.getContextById("CategoryDisplay_Context").properties.pageView!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("CategoryDisplay_Context").properties.pageView}if(wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("CategoryDisplay_Context").properties.beginIndex}}else{if(document.getElementById("Search_Result_Summary")!=null&&document.getElementById("Search_Result_Summary")!=""){if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsView}if(wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("catalogSearchResultDisplay_Context").properties.searchResultsPageNum}}else{if(document.getElementById("Search_Result_Summary2")!=null&&document.getElementById("Search_Result_Summary2")!=""){if(wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView!=""&&document.LanguageSelectionForm.pageView!=null){document.LanguageSelectionForm.pageView.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsView}if(wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum!=""&&document.LanguageSelectionForm.beginIndex!=null){document.LanguageSelectionForm.beginIndex.value=wc.render.getContextById("contentSearchResultDisplay_Context").properties.searchResultsPageNum}}}}}try{if(window.top._ceaCollabDialog!=undefined||window.top._ceaCollabDialog!=null){dojo.byId("LanguageSelectionForm").action=dojo.byId("LanguageSelectionForm").action+"&langId="+dojo.byId("languageSelection").options[dojo.byId("languageSelection").selectedIndex].value}}catch(a){}}function showHeaderLinksInTwoLines(){if(document.getElementById("header_links")!=null&&document.getElementById("header_links")!="undefined"){if(dojo.contentBox(document.getElementById("header_links")).w>750){if(document.getElementById("header_links1")!=null&&document.getElementById("header_links1")!="undefined"){document.getElementById("header_links1").style.display="block"}if(document.getElementById("headerHomeLink")!=null&&document.getElementById("headerHomeLink")!="undefined"){document.getElementById("headerHomeLink").style.display="none"}if(document.getElementById("headerShopCartLink")!=null&&document.getElementById("headerShopCartLink")!="undefined"){document.getElementById("headerShopCartLink").style.display="none"}}document.getElementById("header_links").style.visibility="visible"}}function showLinksInOneLine(){if(document.getElementById("header_links")!=null&&document.getElementById("header_links")!="undefined"){document.getElementById("header_links").style.visibility="visible"}}function isNonNegativeInteger(b){var a=new RegExp(/^\d*$/);return(b!=null&&b!=""&&a.test(b))}function isPositiveInteger(a){return(isNonNegativeInteger(a)&&a!=0)}function closeAllDialogs(){dijit.registry.byClass("dijit.Dialog").forEach(function(a){a.hide()})}function setWarningMessageCookie(a){dojo.cookie("signon_warning_cookie",a,{path:"/"})}function removeCookie(a){dojo.cookie(a,null,{expires:-1})}function getCookie(f){var e=document.cookie.split(";");for(var d=0;d<e.length;d++){var b=e[d].indexOf("=");var a=e[d].substr(0,b);a=a.replace(/^\s+|\s+$/g,"");if(a==f){return unescape(e[d].substr(b+1))}}}function isStorePreview(a,b){if(a.indexOf(b)>-1){return true}return false}function hideESpotInfoPopup(c,a){if(a!=null&&a.type=="keypress"&&a.keyCode!="27"){return}else{var b=dijit.byId(c);if(b!=null){b.hide()}}}function showESpotInfoPopup(c,a){if(a!=null&&a.type=="keypress"&&a.keyCode!="13"){return}else{var b=dijit.byId(c);if(b!=null){b.show()}}}function incrementNumAjaxRequest(){if(numAjaxRequests!="undefined"){numAjaxRequests++}}function decrementNumAjaxRequest(){if(numAjaxRequests!="undefined"){if(numAjaxRequests!=0){numAjaxRequests--}}}function updateParamObject(g,e,f,d,b){if(g==null){g=[]}if(g[e]!=null&&d){if(dojo.lang.isArrayLike(g[e])){if(b!=null&&b!=""){g[e][b]=f}else{g[e].push(f)}}else{var a=g[e];g[e]=[];g[e].push(a);g[e].push(f)}}else{if(b!=null&&b!=""&&b!=-1){g[e+"_"+b]=f}else{if(b==-1){var c=1;while(g[e+"_"+c]!=null){c++}g[e+"_"+c]=f}else{g[e]=f}}}return g}function showSection(b){var a=dojo.byId(b);if(a!=null&&a!="undefined"){a.style.visibility="visible"}}function hideSection(b){var a=dojo.byId(b);if(a!=null&&a!="undefined"){a.style.visibility=""}}function shiftTabHideSection(b,a){if(a.shiftKey&&(a.keyCode==dojo.keys.TAB)){hideSection(b)}}function tabHideSection(c,b,a){if(!b.shiftKey&&(b.keyCode==dojo.keys.TAB)){if(null!=a){dojo.byId(a).focus()}hideSection(c);dojo.stopEvent(b)}}function saveShiftTabPress(a){if(a.shiftKey==true&&a.keyCode==9){tabPressed=true}}function saveTabPress(a){if(a.shiftKey==false&&a.keyCode==9){tabPressed=true}}function setFocus(a){if(tabPressed){tabPressed=false;document.getElementById(a).focus()}}function increaseHeight(a,c){var b=document.getElementById(a).offsetHeight;document.getElementById(a).style.height=(b+c)+"px"}function redirectToSignOn(a){if(typeof(a)!="undefined"){var b=a}else{var b=location.href}b="OrderItemMove?continue=1&createIfEmpty=1&updatePrices=0&deleteIfEmpty=*&fromOrderId=*&toOrderId=.&page=&calculationUsageId=-1&URL="+encodeURIComponent("OrderCalculate?URL="+encodeURIComponent(b));document.location.href="LogonForm?myAcctMain=1&storeId="+WCParamJS.storeId+"&catalogId="+WCParamJS.catalogId+"&langId="+WCParamJS.langId+"&URL="+encodeURIComponent(b)}function handlePopup(b,a){if(currentPopup==a){document.location.href=b}else{currentPopup=a}}function isAndroid(){if(android==null){if(navigator!=null){if(navigator.userAgent!=null){var a=navigator.userAgent.toLowerCase();android=a.indexOf("android")>-1}}}return android}function isIOS(){if(ios==null){if(navigator!=null){if(navigator.userAgent!=null){var a=navigator.userAgent.toLowerCase();ios=(a.indexOf("ipad")>-1)||(a.indexOf("iphone")>-1)||(a.indexOf("ipod")>-1)}}}return ios}function outlineSpots(){dojo.addClass(document.body,"editMode");dojo.query(".ESpotInfo").style({display:"block"});dojo.query(".searchScore").style({display:"block"});var d=dojo.query(".genericESpot,.product,.searchResultSpot,.productDetail,.categorySpot");for(var b=0;b<d.length;b++){var a=d[b];if(dojo.hasClass(a,"emptyESpot")){var e=dojo.query(".ESpotInfo",a)[0].offsetWidth+4;var c=dojo.query(".ESpotInfo",a)[0].offsetHeight+4;dojo.attr(a,"_width",dojo.style(a,"width"));dojo.attr(a,"_height",dojo.style(a,"height"));dojo.style(a,{width:+e+"px",height:c+"px"})}if(dojo.query(".borderCaption",a).length==0){dojo.place("<div class='borderCaption'></div>",a,"first")}else{dojo.query(".borderCaption",a).style({display:"block"})}if(a.addEventListener){a.addEventListener("mouseover",function(f){if(!window.parent.frames[0].isSpotsShown()){return}dojo.query(".caption").style({display:"none"});dojo.style(dojo.query(".caption",this)[0],{display:"block"});f.stopPropagation()},false);a.addEventListener("mouseout",function(f){if(!window.parent.frames[0].isSpotsShown()){return}dojo.query(".caption",this).style({display:"none"});f.stopPropagation()},false)}else{if(a.attachEvent){a.onmouseover=((function(f){return(function(){if(!window.parent.frames[0].isSpotsShown()){return}dojo.query(".caption").style({display:"none"});dojo.style(dojo.query(".caption",f)[0],{display:"block"});window.event.cancelBubble=true})})(a));a.onmouseleave=((function(f){return(function(){if(!window.parent.frames[0].isSpotsShown()){return}dojo.query(".caption",f).style({display:"none"});window.event.cancelBubble=true})})(a))}}}}function hideSpots(){dojo.removeClass(document.body,"editMode");dojo.query(".ESpotInfo").style({display:"none"});dojo.query(".caption").style({display:"none"});dojo.query(".searchScore").style({display:"none"});dojo.query(".borderCaption").style({display:"none"});dojo.query(".emptyESpot").forEach(function(a){dojo.style(a,{width:dojo.attr(a,"_width")+"px"});dojo.style(a,{height:dojo.attr(a,"_height")+"px"})})}function logout(a){setDeleteCartCookie();document.location.href=a}function deleteFromMiniCart(a){var b=[];b.storeId=WCParamJS.storeId;b.catalogId=WCParamJS.catalogId;b.langId=WCParamJS.langId;b.orderId=".";b.orderItemId=a;if(this.shoppingCartPage){b.calculationUsage="-1,-2,-5,-6,-7"}else{b.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}b.check="*n";if(!submitRequest()){}cursor_wait();wc.service.invoke("AjaxDeleteOrderItemTcs",b)}function getCommonParametersQueryString(){return"storeId="+WCParamJS.storeId+"&langId="+WCParamJS.langId+"&catalogId="+WCParamJS.catalogId}function replaceAll(c,a,b){return c.replace(new RegExp(a,"g"),b)}function isEmptyString(a){return(!a||/^\s*$/.test(a))}if(typeof(ResponsiveJS)=="undefined"||ResponsiveJS==null||!ResponsiveJS){ResponsiveJS={init:function(){dojo.connect(dojo.byId("footerCustomerService"),"onclick",ResponsiveJS,ResponsiveJS._cSToggleAndShow);dojo.connect(dojo.byId("footerCorporateInfo"),"onclick",ResponsiveJS,ResponsiveJS._cIToggleAndShow);dojo.connect(dojo.byId("footerExplore"),"onclick",ResponsiveJS,ResponsiveJS._eToggleAndShow);dojo.connect(dojo.byId("footerFollowUs"),"onclick",ResponsiveJS,ResponsiveJS._FUToggleAndShow)},_cSToggleAndShow:function(a){this.toggle(dojo.byId("cSTog"));this.show(dojo.byId("expandCS"))},_cIToggleAndShow:function(a){this.toggle(dojo.byId("cITog"));this.show(dojo.byId("expandCI"))},_eToggleAndShow:function(a){this.toggle(dojo.byId("eTog"));this.show(dojo.byId("expandE"))},_FUToggleAndShow:function(a){this.toggle(dojo.byId("fUTog"));this.show(dojo.byId("expandFU"))},toggle:function(b){var a=b;if(a!=null){if(a.style.backgroundPosition=="-161px -1px"){a.style.backgroundPosition="-181px -1px";a.style.width="12px";a.style.height="6px";a.style.left="6px";a.style.top="14px"}else{a.style.backgroundPosition="-161px -1px";a.style.width="6px";a.style.height="12px";a.style.left="10px";a.style.top="10px"}}},show:function(a){srcElement=a;if(srcElement!=null){if(srcElement.style.display=="block"){close("searchDropdown");srcElement.style.display="none"}else{dojo.query(".subDeptDropdown ").forEach(function(b){close(b.id)});close("departmentsDropdown");close("qLinkDropdown");close("mobileSearchDropdown");close("searchDropdown");close("pageDropdown");close("sortDropdown");srcElement.style.display="block"}}}}}if(typeof(SearchJS)=="undefined"||SearchJS==null||!SearchJS){SearchJS={autoSuggestTimer:-1,autoSuggestKeystrokeDelay:400,autoSuggestHover:false,autoSuggestPreviousTerm:"",autoSuggestURL:"",autoSelectOption:-1,historyIndex:-1,retrievedCachedSuggestions:false,TOTAL_SUGGESTED:4,TOTAL_HISTORY:2,AUTOSUGGEST_THRESHOLD:1,DYNAMIC_AUTOSUGGEST_THRESHOLD:1,CACHED_AUTOSUGGEST_OFFSET:1000,END_OF_LIST:false,staticContentHeaderHistory:"",CachedSuggestionsURL:"",SearchAutoSuggestServletURL:"",searchDepartmentHoverTimeout:"",searchSuggestionHoverTimeout:"",searchDepartmentSelect:function(b,a){$dojo("searchDepartmentLabel").innerHTML=a.innerHTML;$dojo("search_categoryId").value=b;this.hideSearchDepartmentList();return false},cancelEvent:function(a){if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}a.cancelBubble=true;a.cancel=true;a.returnValue=false},searchDepartmentKeyPressed:function(c,e,a,d,b){if(c.keyCode==13){this.searchDepartmentSelect(d,b);dojo.byId("searchBox").focus()}else{if(c.keyCode==38){if(e!=0){dojo.byId("searchDepartmentList_"+(e-1)).focus();this.cancelEvent(c)}}else{if(c.keyCode==40){if(e!=a){dojo.byId("searchDepartmentList_"+(e+1)).focus();this.cancelEvent(c)}}else{if(c.keyCode==27){dojo.byId("searchBox").focus();this.hideSearchDepartmentList()}else{if(c.shiftKey&&c.keyCode==9){dojo.byId("searchBox").focus();this.cancelEvent(c);this.hideSearchDepartmentList()}else{if(c.keyCode==9){dojo.byId("search_submit").focus();this.cancelEvent(c);this.hideSearchDepartmentList()}}}}}}return false},hideSearchDepartmentList:function(){$dojo("searchDepartmentList").style.display="none"},init:function(){dojo.connect(dojo.byId("searchBox"),"onfocus",SearchJS,SearchJS._onFocus);dojo.connect(dojo.byId("searchBox"),"onblur",SearchJS,SearchJS._onBlur);dojo.connect(dojo.byId("searchBox"),"onkeyup",SearchJS,SearchJS._onKeyUp);dojo.connect(dojo.byId("search_submit"),"onclick",SearchJS,SearchJS._onClick);this.staticContentHeaderHistory=storeNLS.HISTORY},setCachedSuggestionsURL:function(a){this.CachedSuggestionsURL=getAbsoluteURL()+a},setAutoSuggestURL:function(a){this.SearchAutoSuggestServletURL=getAbsoluteURL()+a},_onFocus:function(a){},_onBlur:function(a){},_onKeyUp:function(a){return a.keyCode!=dojo.keys.ENTER},_onKeyPress:function(a){document.getElementById("search_submit").disabled=false;if(document.searchHP.searchTerm.value.length==""){document.getElementById("search_submit").disabled=true}this.doAutoSuggest(a,this.SearchAutoSuggestServletURL,dojo.byId("searchBox").value)},_handleEnterKey:function(){if(document.searchHP.searchTerm.value.length>0){document.getElementById("search_submit").disabled=false;if(this.END_OF_LIST){this.gotoAdvancedSearch($dojo("advancedSearch").href)}else{if(this.autoSuggestURL!=""){document.location.href=this.autoSuggestURL}else{document.searchHP.searchTerm.value=trim(document.searchHP.searchTerm.value);submitSpecifiedForm(document.searchHP)}}}else{if(document.searchHP.searchTerm.value==""){document.getElementById("search_submit").disabled=true}}},_onClick:function(a){},doDynamicAutoSuggest:function(b,a,c){if(this.autoSuggestTimer!=-1){clearTimeout(this.autoSuggestTimer);this.autoSuggestTimer=-1}this.autoSuggestTimer=setTimeout(function(){wc.render.getRefreshControllerById("AutoSuggestDisplayController").url=b+"&term="+encodeURIComponent(a)+"&showHeader="+c;wc.render.updateContext("AutoSuggest_Context",{});this.autoSuggestTimer=-1},this.autoSuggestKeystrokeDelay)},gotoAdvancedSearch:function(b){var a=$dojo("searchBox").value;document.location.href=b+"&searchTerm="+a},showAutoSuggest:function(c){var b=document.getElementById("autoSuggest_Result_div");if(dojo.isIE<7){var d=document.getElementById("autoSuggest_content_div");var a=document.getElementById("autoSuggestDropDownIFrame")}if(b!=null&&b!="undefined"){if(c){b.style.display="block";if(dojo.isIE<7){a.style.height=d.scrollHeight;a.style.display="block"}}else{if(dojo.isIE<7){a.style.display="none";a.style.height=0}b.style.display="none"}}},showAutoSuggestIfResults:function(){if(typeof(staticContent)!="undefined"&&document.getElementById("autoSuggestHistory").innerHTML==""&&document.getElementById("dynamicAutoSuggestTotalResults")==null){this.showAutoSuggest(false)}else{if(document.getElementById("searchBox").value.length<=this.AUTOSUGGEST_THRESHOLD){this.showAutoSuggest(false)}else{this.showAutoSuggest(true)}}},selectAutoSuggest:function(a){var b=document.getElementById("searchBox");b.value=a;b.focus();this.autoSuggestPreviousTerm=a;if(typeof TealeafWCJS!="undefined"){TealeafWCJS.createExplicitChangeEvent(b)}submitSpecifiedForm(document.searchHP)},highLightSelection:function(d,b){var c=document.getElementById("autoSelectOption_"+b);if(c!=null&&c!="undefined"){if(d){c.className="autoSuggestSelected";var e=document.getElementById("searchBox");e.setAttribute("aria-activedescendant","suggestionItem_"+b);var a=document.getElementById("dynamicAutoSuggestTotalResults");if((a!=null&&a!="undefined"&&b<a.value)||(b>=this.historyIndex)){e.value=c.title;this.autoSuggestPreviousTerm=c.title;this.autoSuggestURL=""}else{this.autoSuggestURL=c.href}}else{c.className=""}return true}else{return false}},enableAutoSelect:function(a){this.highLightSelection(false,this.autoSelectOption);var b=document.getElementById("autoSelectOption_"+a);b.className="autoSuggestSelected";this.autoSelectOption=a},resetAutoSuggestKeyword:function(){var a=document.getElementById("autoSuggestOriginalTerm");if(a!=null&&a!="undefined"){var b=document.getElementById("searchBox");b.value=a.value;this.autoSuggestPreviousTerm=a.value}},clearAutoSuggestResults:function(){this.autoSuggestPreviousTerm="";this.autoSuggestURL="";document.getElementById("autoSuggestDynamic_Result_div").innerHTML="";this.showAutoSuggest(false)},doAutoSuggest:function(e,d,b){if(b.length<=this.AUTOSUGGEST_THRESHOLD){this.showAutoSuggest(false)}if(e.keyCode==dojo.keys.ENTER){this._handleEnterKey();return}if(e.keyCode==dojo.keys.TAB){this.autoSuggestHover=true;return}if(e.keyCode==dojo.keys.ESCAPE){this.showAutoSuggest(false);return}if(e.keyCode==dojo.keys.UP_ARROW){var c=document.getElementById("dynamicAutoSuggestTotalResults");if(this.END_OF_LIST){dojo.removeClass("autoSuggestAdvancedSearch","autoSuggestSelected");this.END_OF_LIST=false;this.autoSelectOption--;if(!this.highLightSelection(true,this.autoSelectOption)){if(this.autoSelectOption==this.CACHED_AUTOSUGGEST_OFFSET&&c!=null&&c!="undefined"){this.autoSelectOption=c.value-1;this.highLightSelection(true,this.autoSelectOption)}}}else{if(this.highLightSelection(true,this.autoSelectOption-1)){this.highLightSelection(false,this.autoSelectOption);if(this.autoSelectOption==this.historyIndex){this.resetAutoSuggestKeyword()}this.autoSelectOption--}else{if(this.autoSelectOption==this.CACHED_AUTOSUGGEST_OFFSET&&c!=null&&c!="undefined"){this.highLightSelection(false,this.CACHED_AUTOSUGGEST_OFFSET);this.autoSelectOption=c.value-1;this.highLightSelection(true,this.autoSelectOption)}else{this.highLightSelection(false,this.autoSelectOption);this.autoSelectOption=-1;var a=document.getElementById("autoSuggestOriginalTerm");this.resetAutoSuggestKeyword()}}}return}if(e.keyCode==dojo.keys.DOWN_ARROW){if(this.highLightSelection(true,this.autoSelectOption+1)){this.highLightSelection(false,this.autoSelectOption);this.autoSelectOption++}else{if(this.autoSelectOption<this.CACHED_AUTOSUGGEST_OFFSET&&this.highLightSelection(true,this.CACHED_AUTOSUGGEST_OFFSET)){this.highLightSelection(false,this.autoSelectOption);this.autoSelectOption=this.CACHED_AUTOSUGGEST_OFFSET;this.resetAutoSuggestKeyword()}else{if(!this.END_OF_LIST){dojo.addClass("autoSuggestAdvancedSearch","autoSuggestSelected");this.highLightSelection(false,this.autoSelectOption);this.autoSelectOption++;this.END_OF_LIST=true;var h=document.getElementById("searchBox");h.setAttribute("aria-activedescendant","advancedSearch")}}}return}if(b.length>this.AUTOSUGGEST_THRESHOLD&&b==this.autoSuggestPreviousTerm){return}else{this.autoSuggestPreviousTerm=b}if(b.length<=this.AUTOSUGGEST_THRESHOLD){return}if(this.autoSuggestTimer!=-1){clearTimeout(this.autoSuggestTimer);this.autoSuggestTimer=-1}if(b!=""){document.getElementById("search_submit").disabled=false;this.autoSelectOption=-1;var g=this.doStaticAutoSuggest(b);if(b.length>this.DYNAMIC_AUTOSUGGEST_THRESHOLD){var f=true;this.doDynamicAutoSuggest(d,b,f)}else{document.getElementById("autoSuggestDynamic_Result_div").innerHTML=""}}else{document.getElementById("search_submit").disabled=true;this.clearAutoSuggestResults()}},tokenizeForBidi:function(k,a,c,d){var h=k.split(" > ");var e="";var g="";for(i=0;i<h.length;i++){if(i!=0){e=e+"<div class='category_list'><span class='gt'>&nbsp;>&nbsp;</span></div>"}if(i==h.length-1){var f=a.toLowerCase().indexOf(d);var b=a.substr(0,f);var l=a.substr(f+c.length);var j="<span class='highlight'>"+c+"</span>";g=b+j+l}else{g=h[i]}e=e+"<div class='category_list'>"+g+"</div>"}return e},doStaticAutoSuggest:function(v){var B=["","","","","",""];var C=0;var n=v.toLowerCase();var k=this.CACHED_AUTOSUGGEST_OFFSET;var q="<ul class='suggestedKeywordLinks'";var b="</ul>";if(typeof(staticContent)!="undefined"){for(var t=0;t<staticContent.length;t++){var l=0;for(var r=0;r<staticContent[t].length;r++){var f=staticContent[t][r][0];var w=staticContent[t][r][1];var h=staticContent[t][r][2];var m=f.toLowerCase().indexOf(n);if(m!=-1){var c=this.tokenizeForBidi(h,f,v,n);B[t]=B[t]+"<li id='suggestionItem_"+k+"' role='listitem' tabindex='-1'><a id='autoSelectOption_"+k+"' title='"+f+"' onmouseout='this.className=\"\"; this.autoSuggestURL=\"\";' onmouseover='SearchJS.enableAutoSelect("+k+"); this.autoSuggestURL=this.href;' href=\""+w+'">'+c+"</a></li>";l++;k++;if(l>=this.TOTAL_SUGGESTED){break}}}}}if(typeof(staticContent)!="undefined"){for(var t=0;t<staticContent.length;t++){}}if(typeof(document.getElementById("autoSuggestHistory"))!="undefined"){var s="";var p=document.getElementById("autoSuggestHistory");if(p!=null){p.innerHTML=""}var A=new Array();this.historyIndex=k;var u=getCookie("searchTermHistory");if(typeof(u)!="undefined"){var d=u.split("|");var l=0;for(var t=d.length-1;t>0;t--){var o=d[t];var a=o.toLowerCase();if(a.match("^"+n)==n){var g=false;for(var r=0;r<A.length;r++){if(A[r]==a){g=true;break}}if(!g){s=s+"<li id='suggestionItem_"+k+"' role='listitem' tabindex='-1'><a href='#' onmouseout='this.className=\"\"' onmouseover='SearchJS.enableAutoSelect("+k+");' onclick='SearchJS.selectAutoSuggest(this.title); return false;' title=\""+o+"\" id='autoSelectOption_"+k+"'><strong>"+v+"</strong>"+o.substring(v.length,o.length)+"</a></li>";A.push(a);l++;k++;if(l>=this.TOTAL_HISTORY){break}}}}}if(s!=""){var e="<h2>"+this.staticContentHeaderHistory+"</h2>";p.innerHTML=e+q+" title='"+this.staticContentHeaderHistory+"'>"+s+b;C++}if(C>0){this.showAutoSuggest(true);return true}}return false},retrieveCachedSuggestions:function(){if(!this.retrievedCachedSuggestions){wc.render.getRefreshControllerById("AutoSuggestCachedSuggestionsController").url=this.CachedSuggestionsURL;console.debug("update cache sugg "+this.CachedSuggestionsURL);wc.render.updateContext("CachedSuggestions_Context",{})}},clearSearchField:function(){if(document.getElementById("searchBox")!=null){if(document.getElementById("searchBox").value==""){document.getElementById("search_submit").disabled=true}}if(document.getElementById("searchBox")!=null){searchText=document.getElementById("searchBox").value;if(searchText==document.getElementById("searchTextHolder").innerHTML){document.getElementById("searchBox").value=""}else{document.getElementById("searchBox").select();this.showAutoSuggestIfResults();this.autoSuggestHover=false}}},fillSearchField:function(){if(document.getElementById("searchBox")!=null){if(document.getElementById("searchBox").value==""){document.getElementById("searchBox").className="searchBox left";document.getElementById("searchBox").value=document.getElementById("searchTextHolder").innerHTML}}if(!this.autoSuggestHover){this.showAutoSuggest(false)}},selectSearchResultsTab:function(a){document.getElementById("productsResultTab").setAttribute("class","tab_container inactive_tab");document.getElementById("productsResultTab_wrapper").setAttribute("aria-selected","false");document.getElementById("productsSearchBasedNavigationWidget").style.display="none";document.getElementById("contentsResultTab").setAttribute("class","tab_container inactive_tab");document.getElementById("contentsResultTab_wrapper").setAttribute("aria-selected","false");document.getElementById("contentsSearchBasedNavigationWidget").style.display="none";document.getElementById(a+"ResultTab").setAttribute("class","tab_container active_tab focused_tab");document.getElementById(a+"ResultTab_wrapper").setAttribute("aria-selected","true");document.getElementById(a+"SearchBasedNavigationWidget").style.display="block"},selectSearchResultsTabWithKeyboard:function(a,b){if(b.keyCode==dojo.keys.SPACE){this.selectSearchResultsTab(a);this.cancelEvent(b)}},focusSearchResultTab:function(a){if(document.getElementById(a).getAttribute("class").indexOf("inactive_tab")>0){document.getElementById(a).setAttribute("class","tab_container inactive_tab focused_tab")}else{document.getElementById(a).setAttribute("class","tab_container active_tab focused_tab")}},onBlurSearchResultTab:function(a){if(document.getElementById(a).getAttribute("class").indexOf("inactive_tab")>0){document.getElementById(a).setAttribute("class","tab_container inactive_tab")}else{document.getElementById(a).setAttribute("class","tab_container active_tab")}},updateSearchTermHistoryCookie:function(b){var d="searchTermHistory";var c="|"+b;var a=getCookie(d);if(typeof(a)!="undefined"){c=dojo.cookie(d)+c}dojo.cookie(d,c,{path:"/"})},updateSearchTermHistoryCookieAndRedirect:function(a,b){this.updateSearchTermHistoryCookie(a);document.location.href=b},isValidNumber:function(a){return !isNaN(parseFloat(a))&&isFinite(a)&&a>=0},validateForm:function(c){c.minPrice.value=trim(c.minPrice.value);c.maxPrice.value=trim(c.maxPrice.value);var d=c.minPrice.value;var e=c.maxPrice.value;var a=this.isValidNumber(d);var b=this.isValidNumber(e);if(d.length>0&&!a){MessageHelper.formErrorHandleClient(c.minPrice.id,MessageHelper.messages.EDPPaymentMethods_AMOUNT_NAN);return false}else{if(e.length>0&&!b){MessageHelper.formErrorHandleClient(c.maxPrice.id,MessageHelper.messages.EDPPaymentMethods_AMOUNT_NAN);return false}else{if(d.length>0&&e.length>0&&parseFloat(d)>parseFloat(e)){MessageHelper.formErrorHandleClient(c.maxPrice.id,MessageHelper.messages.ERROR_PRICE_RANGE);return false}}}c.submit()}};wc.render.declareContext("AutoSuggest_Context",null,"");wc.render.declareContext("CachedSuggestions_Context",null,"");wc.render.declareRefreshController({id:"AutoSuggestCachedSuggestionsController",renderContext:wc.render.getContextById("CachedSuggestions_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;d.refresh(b.properties)},postRefreshHandler:function(g){var h=this;var a=this.renderContext;var c=document.getElementById("cachedSuggestions");if(c==null){document.getElementById("autoSuggestCachedSuggestions_div").innerHTML=""}else{var d=c.getElementsByTagName("script");var e=d.length;for(var f=0;f<e;f++){var k=document.createElement("script");k.type="text/javascript";k.text=d[f].text;document.getElementById("autoSuggestCachedSuggestions_div").appendChild(k)}SearchJS.retrievedCachedSuggestions=true;if(document.getElementById("searchBox")!=null){var b=document.getElementById("searchBox").value;if(b.length>SearchJS.AUTOSUGGEST_THRESHOLD){SearchJS.doStaticAutoSuggest(b)}}}}});wc.render.declareRefreshController({id:"AutoSuggestDisplayController",renderContext:wc.render.getContextById("AutoSuggest_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;d.refresh(b.properties)},postRefreshHandler:function(d){var a=this;var c=this.renderContext;var b=document.getElementById("suggestedKeywordResults");if(b==null){document.getElementById("autoSuggestDynamic_Result_div").innerHTML=""}SearchJS.showAutoSuggestIfResults()}})}var order_updated={AjaxAddOrderItem:"AjaxAddOrderItem",AddOrderItem:"AddOrderItem",AjaxAddOrderItemWithShipingInfo:"AjaxAddOrderItemWithShipingInfo",AjaxDeleteOrderItem:"AjaxDeleteOrderItem",AjaxUpdateOrderItem:"AjaxUpdateOrderItem",AjaxUpdateOrderShippingInfo:"AjaxUpdateOrderShippingInfo",AjaxOrderCalculate:"AjaxOrderCalculate",AjaxLogoff:"AjaxLogoff",AjaxSetPendingOrder:"AjaxSetPendingOrder",AjaxUpdatePendingOrder:"AjaxUpdatePendingOrder",AjaxSingleOrderCancel:"AjaxSingleOrderCancel",AjaxDeleteOrderItemTcs:"AjaxDeleteOrderItemTcs",AjaxUpdateRewardOption:"AjaxUpdateRewardOption",NewsLetterSubscriptionID:"NewsLetterSubscriptionActionID",AddToCartAjax:"AddToCartAjax"};var dropdownUpdated=false;var dropdownInit=false;var timer;var quickInfoImgDimensions="330x330";var categoryDisplayImgDimensions="160x160";var productDetailImgDimensions="447x447";var miniCartImgDimensions="105x105";wc.render.declareContext("MiniShoppingCartContext",{status:"init"},"");wc.render.declareContext("MiniShopCartContentsContext",{status:"init",relativeId:"",contentId:"",contentType:""},"");wc.render.declareContext("MiniShopCartDropDownContext",null,"");wc.render.declareContext("PriceDisplayContext",{status:"init"},"");function setCartDropDownInit(){dropdownInit=false}function showMiniShopCartDropDownEvent(b,a,d,c){console.debug(b.keyCode);if(b.keyCode==dojo.keys.DOWN_ARROW||b.keyCode==dojo.keys.ENTER){showMiniShopCartDropDown(a,d,c);dojo.stopEvent(b)}}function showMiniShopCartDropDown(a,d,c){if(CheckoutHelperJS.shoppingCartPage){return}if(!dropdownInit){dropdownInit=true;if(!dropdownUpdated){destroyDialog();var b={};b.status="load";b.relativeId=a;b.contentId=d;if(c=="orderItemsListAutoClose1"){b.carticonclick="1"}else{b.contentType=c;b.carticonclick=""}b.page_view="dropdown";wc.render.updateContext("MiniShopCartContentsContext",b)}else{positionMiniShopCartDropDown(a,d,c)}}}function positionMiniShopCartDropDown(h,a,o){if(CheckoutHelperJS.shoppingCartPage){return}var j=null;var e=null;if(o=="orderItemsListAutoClose1"||o==""){dojo.query(".cartBlock").style("display","block");dropdownInit=false;return}else{if(o=="orderItemAdded"){j=productAddedDropDownDlg;e=dropDownDlg}}var p=dojo.byId(h);var k=dojo.coords(p,true);var b=k.x-130-k.l;var m=k.y+k.h;var n=dojo.coords(dojo.byId("widget_minishopcart"),true).w;if(dojo.isIE==8){n=dojo.coords(dojo.byId("widget_minishopcart"),true).w}else{if(dojo.isIE>=7&&dojo.isIE<8){n=dojo.coords(dojo.byId("miniShopCartBody"),true).w}else{if(dojo.isIE<7){n=originalMiniCartWidth}}}var l=b;if(dojo.isIE){l=b+dojo.contentBox(dojo.byId(h)).w-n}if(dojo.locale=="ar-eg"||dojo.locale=="iw-il"){l=l+126}if(j){j.y=m;j.x=l}if(!j){var d=document.getElementById(a);var g=document.getElementById(a+"_ACCE_Label");if(g!=null){j=new wc.widget.WCDialog({relatedSource:h,x:b,y:m,title:g.innerHTML},d)}else{j=new wc.widget.WCDialog({relatedSource:h,x:b,y:m},d)}j.x=l;if(o!="orderItemAdded"&&(dojo.locale!="ar-eg"&&dojo.locale!="iw-il")){j.x+=130}}var f=null;if(e){f=e.displayStatus}if(!j.displayStatus&&(f==null||!f)){j.closeOnTimeOut=false;j.autoClose=false;if(o=="orderItemsList"||o=="orderItemsListAutoClose"||o=="orderItemsListAutoClose1"){dropdownDisplayed=true;if(o=="orderItemsListAutoClose"||o=="orderItemsListAutoClose1"){j.autoClose=true}dropDownDlg=j;setTimeout(dojo.hitch(dropDownDlg,"show",null),5)}else{if(o=="orderItemAdded"){dojo.byId("MiniShopCartProductAddedWrapper").style.display="block";productAddedDropDownDlg=j;setTimeout(dojo.hitch(productAddedDropDownDlg,"show",null),5)}}setTimeout(dojo.hitch(this,"hideUnderlayWrapper",""),5)}if(dojo.isIE<7){j.style.display="block"}dropdownInit=false}function setMiniShopCartControllerURL(a){wc.render.getRefreshControllerById("MiniShoppingCartController").url=a}wc.render.declareRefreshController({id:"MiniShoppingCartController",renderContext:wc.render.getContextById("MiniShoppingCartContext"),url:"",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(c.actionId in order_updated||c.actionId=="AjaxDeleteOrderItemForShippingBillingPage"){var e=[];if(c.actionId=="AddOrderItem"){e.addedOrderItemId=c.orderItemId+"";showDropdown=true}e.deleteCartCookie=true;d.refresh(e)}},renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(a.testForChangedRC(["status"])){b.properties.deleteCartCookie=true;d.refresh(b.properties)}},postRefreshHandler:function(c){var a=this;var b=this.renderContext;destroyDialog("MiniShopCartProductAdded");if(showDropdown){positionMiniShopCartDropDown("widget_minishopcart","MiniShopCartProductAdded","orderItemAdded");showDropdown=false}updateCartCookie();populateProductAddedDropdown();resetDeleteCartCookie()}});wc.render.declareRefreshController({id:"MiniShopCartContentsController",renderContext:wc.render.getContextById("MiniShopCartContentsContext"),url:"",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;if(c.actionId in order_updated||c.actionId=="AjaxDeleteOrderItemForShippingBillingPage"){dropdownUpdated=false}},renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;var e=[];e.storeId=WCParamJS.storeId;e.catalogId=WCParamJS.catalogId;e.langId=WCParamJS.langId;e.URL="";e.updatePrices="1";e.orderId=".";e.calculationUsageId="-1";wc.service.declare({id:"MiniCartOrderCalculate",actionId:"MiniCartOrderCalculate",url:getAbsoluteURL()+"MiniOrderCalculate",formId:"",successHandler:function(j){var g=j.orderIdOrderItemAccessBean;var k=j.orderItemId;var l=[];l.storeId=WCParamJS.storeId;l.catalogId=WCParamJS.catalogId;l.langId=WCParamJS.langId;l.orderId=g;l.orderItemId=k;var h=j.catentDeletedName;var f=j.flag;if(!dropdownUpdated){loadMiniCart("USD","-1");b.properties.fetchCartContents=true;dropdownUpdated=false;d.refresh(b.properties)}},failureHandler:function(f){}});wc.service.invoke("MiniCartOrderCalculate",e)},postRefreshHandler:function(e){var b=this;var c=this.renderContext;checksubTotakPrice();if((document.getElementById("MiniShoppingCart").innerHTML=="")){var a=document.getElementById("orderQuantity").value;var f=a.split(".");var d=f[0];var g="<div id=\"widget_minishopcart\" role=\"button\" tabindex=\"0\" onclick=\"javascript:showMiniShopCartDropDown('widget_minishopcart','quick_cart_container','orderItemsListAutoClose1');\" onKeyPress=\"javascript:showMiniShopCartDropDownEvent(event,'widget_minishopcart','quick_cart_container','orderItemsList');\">";g+='<div id="miniShopCartBody" class="content row">';g+='<span id="minishopcart_total" class="cartcount">'+d+"</span>";g+="</div></div>";if(d!=0){dojo.place(g,dojo.byId("MiniShoppingCart"))}}positionMiniShopCartDropDown(c.properties.relativeId,c.properties.contentId,c.properties.contentType);PromPriceDisplayJS.miniCart();PromPriceDisplayJS.strikePricePost()}});wc.render.declareRefreshController({id:"priceDisplayController",renderContext:wc.render.getContextById("PriceDisplayContext"),url:getAbsoluteURL()+"PriceDisplayAjaxView",formId:"",modelChangedHandler:function(c,d){var a=this;var b=this.renderContext;d.refresh(b.properties)},renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;d.refresh(b.properties)},postRefreshHandler:function(h){if(document.getElementById("catentryIdList")!=null){var c=document.getElementById("catentryIdList").value;var c=c.split(",");var a="";var f="";var e="";for(f=0;f<c.length;f++){if(document.getElementById(c[f]+"|price")!=null){var g=document.getElementById(c[f]+"|price").value;var g=g.split("|");if(g!=""){if(g.length==1){if(g!="Price as configured"){a=document.getElementsByName(c[f]+"wholeprice");for(e=0;e<a.length;e++){a[e].innerHTML=g[0]}}else{a=document.getElementsByName(c[f]+"configPriceHolder");for(e=0;e<a.length;e++){a[e].style.display="none"}a=document.getElementsByName(c[f]+"wholepriceConfig");for(e=0;e<a.length;e++){a[e].innerHTML=g[0]}}}else{if(g.length==2){a=document.getElementsByName(c[f]+"wholeprice");for(e=0;e<a.length;e++){a[e].innerHTML=g[0]}a=document.getElementsByName(c[f]+"decimalprice");for(e=0;e<a.length;e++){a[e].innerHTML=g[1]}}else{if(g.length==3){a=document.getElementsByName(c[f]+"startingat");for(e=0;e<a.length;e++){a[e].innerHTML=g[0]}a=document.getElementsByName(c[f]+"wholeprice");for(e=0;e<a.length;e++){a[e].innerHTML=g[1]}a=document.getElementsByName(c[f]+"decimalprice");for(e=0;e<a.length;e++){a[e].innerHTML=g[2]}}else{if(g.length==4){if(typeof document.getElementsByName(c[f]+"wholeprice")!=="undefined"&&document.getElementsByName(c[f]+"wholeprice")!==null){a=document.getElementsByName(c[f]+"startingat");for(e=0;e<a.length;e++){a[e].innerHTML=g[0]}a=document.getElementsByName(c[f]+"wholeprice");for(e=0;e<a.length;e++){a[e].innerHTML=g[2]}a=document.getElementsByName(c[f]+"decimalprice");for(e=0;e<a.length;e++){a[e].innerHTML=g[3]}}}}}}}else{a=document.getElementsByName(c[f]+"priceDiv");for(e=0;e<a.length;e++){a[e].style.display="none"}}}else{document.getElementById(c[f]+"priceDiv").style.display="none"}}}var b=this;var d=this.renderContext;cursor_clear()}});function checksubTotakPrice(){var a=document.getElementById("priceLimit").value;var b;var c=parseFloat(a);var b=parseFloat("6000.00");if(document.getElementById("priceThreshold")!=null){b=document.getElementById("priceThreshold").value;b=parseFloat(b)}if(c>b||$("div#hiddenCallCenterDiv").length>0){if($("div#hiddenCallCenterDiv").length<=0){alert("Please complete this order through our sales center. Call 1-866-288-7366")}dojo.query("#chkredbn1").style({backgroundColor:"#C0C0C0","pointer-events":"none",cursor:"default"})}}function updateCartCookie(){if(document.getElementById("currentOrderQuantity")!=null&&document.getElementById("currentOrderAmount")!=null&&document.getElementById("currentOrderCurrency")!=null&&document.getElementById("currentOrderId")!=null&&document.getElementById("currentOrderLanguage")!=null){var c=document.getElementById("currentOrderQuantity").value;var a=document.getElementById("currentOrderAmount").value;var g=document.getElementById("currentOrderCurrency").value;var b=document.getElementById("currentOrderLanguage").value;var f=document.getElementById("currentOrderId").value;var d=getCookie("WC_CartOrderId_"+WCParamJS.storeId);if(d!=null){dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,null,{expires:-1,path:"/"});var e=getCookie("WC_CartTotal_"+d);if(e!=null){dojo.cookie("WC_CartTotal_"+d,null,{expires:-1,path:"/"})}}dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,f,{path:"/"});if(f!=""){dojo.cookie("WC_CartTotal_"+f,c+";"+a+";"+g+";"+b,{path:"/"})}}}function populateProductAddedDropdown(){for(productId in shoppingActionsJS.productAddedList){var a=shoppingActionsJS.productAddedList[productId];if(document.getElementById("MiniShopCartAddedProdName_"+productId)!=null&&a[0]!=null){document.getElementById("MiniShopCartAddedProdName_"+productId).innerHTML=a[0]}if(document.getElementById("MiniShopCartAddedProdImgSrc_"+productId)!=null&&a[1]!=null){if(a[1].indexOf(quickInfoImgDimensions)!=-1){document.getElementById("MiniShopCartAddedProdImgSrc_"+productId).src=a[1].replace(quickInfoImgDimensions,miniCartImgDimensions)}else{if(a[1].indexOf(categoryDisplayImgDimensions)!=-1){document.getElementById("MiniShopCartAddedProdImgSrc_"+productId).src=a[1].replace(categoryDisplayImgDimensions,miniCartImgDimensions)}else{if(a[1].indexOf(productDetailImgDimensions)!=-1){document.getElementById("MiniShopCartAddedProdImgSrc_"+productId).src=a[1].replace(productDetailImgDimensions,miniCartImgDimensions)}}}document.getElementById("MiniShopCartAddedProdImgSrc_"+productId).alt=a[0]}if(document.getElementById("MiniShopCartAddedProdPrice_"+productId)!=null&&a[2]!=null){document.getElementById("MiniShopCartAddedProdPrice_"+productId).innerHTML=a[2]}if(document.getElementById("MiniShopCartAddedProdQty_"+productId)!=null&&a[3]!=null){document.getElementById("MiniShopCartAddedProdQty_"+productId).innerHTML=a[3]}if(document.getElementById("MiniShopCartAddedProdAttr_"+productId)!=null&&a[4]!=null){document.getElementById("MiniShopCartAddedProdAttr_"+productId).innerHTML="";for(attrName in a[4]){document.getElementById("MiniShopCartAddedProdAttr_"+productId).innerHTML+="<div>"+attrName+": "+a[4][attrName]+"</div>"}}}shoppingActionsJS.productAddedList=new Object()}function loadMiniCart(b,f){var j=false;var a=getCookie("WC_CartOrderId_"+WCParamJS.storeId);var e=storeNLS.MSC_ITEM;if(checkDeleteCartCookie()){j=true}else{if(a!=undefined&&a==""){var g=document.getElementById("minishopcart_total");if(g!=null){var h=document.getElementById("currentOrderQuantity").value;if(e!=null){h=dojo.string.substitute(e,{0:document.getElementById("currentOrderQuantity").value})}if(h=="0"){hideCartCount()}if(h!="0"){g.innerHTML="\n "+h+"\n "}updateCartCookie();populateProductAddedDropdown();resetDeleteCartCookie()}}else{if(a!=undefined&&a!=""){var c=getCookie("WC_CartTotal_"+a);if(c!=undefined&&c!=null&&c!=""){var d=c.split(";");if(d!=null&&d.length==4){if(d[2]==b&&d[3]==f){var g=document.getElementById("minishopcart_total");if(g!=null){var h=d[0].toString();if(e!=null){h=dojo.string.substitute(e,{0:d[0].toString()})}if(h=="0"){hideCartCount()}if(h!="0"){g.innerHTML="\n "+h+"\n ";g.style.display="block"}}}else{j=true}}else{j=true}}else{j=true}}else{hideCartCount();updateCartCookie();populateProductAddedDropdown();resetDeleteCartCookie()}}}if(j==true){wc.render.updateContext("MiniShoppingCartContext",{status:"load"})}}function handleMiniCartHover(){dojo.connect(document.getElementById("widget_minishopcart"),"onmouseover",function(){timer=setTimeout(function(){showMiniShopCartDropDown("widget_minishopcart","quick_cart_container","orderItemsListAutoClose")},1000)});dojo.connect(document.getElementById("widget_minishopcart"),"onmouseout",function(){clearTimeout(timer)})}function setDeleteCartCookie(){dojo.cookie("WC_DeleteCartCookie_"+WCParamJS.storeId,true,{path:"/"})}function checkDeleteCartCookie(){var a=getCookie("WC_DeleteCartCookie_"+WCParamJS.storeId);if(a!=undefined&&a!=""){if(a=="true"){return true}}return false}function resetDeleteCartCookie(){var a=getCookie("WC_DeleteCartCookie_"+WCParamJS.storeId);if(a!=null){dojo.cookie("WC_DeleteCartCookie_"+WCParamJS.storeId,null,{expires:-1,path:"/"})}}function setShopCartRedirectCookie(){dojo.cookie("ShopCartRedirectCookie_"+WCParamJS.storeId,true,{path:"/"})}function resetShopCartRedirectCookie(){var a=getCookie("ShopCartRedirectCookie_"+WCParamJS.storeId);if(a!=null){dojo.cookie("ShopCartRedirectCookie_"+WCParamJS.storeId,null,{expires:-1,path:"/"})}}function updateCartQuantityInAddtoCart(a){var e=getCookie("WC_CartOrderId_"+WCParamJS.storeId);if(e!=undefined&&e!=""&&e==a){var b=getCookie("WC_CartTotal_"+a);if(b!=undefined&&b!=null&&b!=""){var c=b.split(";");if((c!=null)&&(c.length==4)){var d=parseInt(c[0])+1;dojo.cookie("WC_CartTotal_"+a,d+";"+c[1]+";"+c[2]+";"+c[3],{path:"/"})}}}else{dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,a,{path:"/"});if(a!=""){dojo.cookie("WC_CartTotal_"+a,"1;0.00;USD;"+WCParamJS.langId,{path:"/"})}}}if(typeof(DepartmentJS)=="undefined"||DepartmentJS==null||!DepartmentJS){DepartmentJS={index:-1,subCategoryIndex:0,subCatNodes:null,catNodes:null,activeLink:null,widgetId:"widget_departments",init:function(){dojo.connect(dojo.byId(this.widgetId),"onmouseover",DepartmentJS,DepartmentJS._onFocus);dojo.connect(dojo.byId(this.widgetId),"onmouseout",DepartmentJS,DepartmentJS._onBlur);if(!dojo.isIE||(dojo.isIE&&dojo.isIE>=8)){dojo.connect(dojo.byId(this.widgetId),"onfocus",DepartmentJS,DepartmentJS._onFocus);dojo.connect(dojo.byId(this.widgetId),"onblur",DepartmentJS,DepartmentJS._onBlur);dojo.connect(dojo.byId(this.widgetId),"onkeydown",DepartmentJS,DepartmentJS._onKeyDown)}},_onFocus:function(a){dojo.byId("drop_down").style.display="";if(wc.render.getRefreshControllerById("DepartmentDropdownController").url!=""&&wc.render.getContextById("DepartmentDropdown_Context").properties.isFirstRefresh=="false"){setCurrentId("widget_departments");if(submitRequest()){cursor_wait();wc.render.updateContext("DepartmentDropdown_Context",{isFirstRefresh:"true"})}}},_onKeyDown:function(c){if(c.keyCode==dojo.keys.UP_ARROW){dojo.stopEvent(c);var b=this.index+1;var e=document.getElementById("sub_categories_"+b);if(e!=null&&e.style.display=="block"){var d=this.subCategoryIndex;dojo.removeClass(subCatNodes[d],"dephighlight");if(d==0){d=subCatNodes.length}d--;dojo.addClass(subCatNodes[d],"dephighlight");dojo.byId(this.widgetId).setAttribute("aria-activedescendant",subCatNodes[d].id);activeLink=dojo.query(">a",subCatNodes[d]);this.subCategoryIndex=d}else{var a=this.index;if(a>=0){dojo.removeClass(catNodes[a],"dephighlight")}if(a<=0){a=catNodes.length}a--;dojo.addClass(catNodes[a],"dephighlight");dojo.byId(this.widgetId).setAttribute("aria-activedescendant",catNodes[a].id);activeLink=dojo.query("> .name_wrapper > .name > a, >a",catNodes[a]);this.index=a}}if(c.keyCode==dojo.keys.DOWN_ARROW){dojo.stopEvent(c);var b=this.index+1;var e=document.getElementById("sub_categories_"+b);if(e!=null&&e.style.display=="block"){var d=this.subCategoryIndex;dojo.removeClass(subCatNodes[d],"dephighlight");if(d>=subCatNodes.length-1){d=0}else{d++}dojo.addClass(subCatNodes[d],"dephighlight");dojo.byId(this.widgetId).setAttribute("aria-activedescendant",subCatNodes[d].id);activeLink=dojo.query(">a",subCatNodes[d]);this.subCategoryIndex=d}else{var a=this.index;if(a>=0){dojo.removeClass(catNodes[a],"dephighlight");catNodes[a].blur()}if(a>=catNodes.length-1){a=0}else{a++}dojo.addClass(catNodes[a],"dephighlight");dojo.byId(this.widgetId).setAttribute("aria-activedescendant",catNodes[a].id);activeLink=dojo.query("> .name_wrapper > .name > a, >a",catNodes[a]);this.index=a}}if(c.keyCode==dojo.keys.RIGHT_ARROW){dojo.stopEvent(c);var b=this.index+1;if(document.getElementById("sub_categories_"+b)){selection=document.getElementById("sub_categories_"+b);selection.style.backgroundColor="#ffffff";selection.style.display="block";var g="#sub_categories_"+b+"> .middle > .middle_tile > .sub_category > *";subCatNodes=dojo.query(g);var f="false";dojo.forEach(subCatNodes,function(h){if(dojo.hasClass(h,"dephighlight")){f="true"}});if(f=="false"){dojo.addClass(subCatNodes[0],"dephighlight");dojo.byId(this.widgetId).setAttribute("aria-activedescendant",subCatNodes[0].id);activeLink=dojo.query(">a",subCatNodes[0])}}}if(c.keyCode==dojo.keys.LEFT_ARROW){dojo.stopEvent(c);var b=this.index+1;var e=document.getElementById("sub_categories_"+b);if(e!=null){e.style.display=""}dojo.removeClass(subCatNodes[this.subCategoryIndex],"dephighlight");this.subCategoryIndex=0}if(c.keyCode==dojo.keys.ENTER){if(activeLink!=null&&activeLink!=""){document.location.href=activeLink}}if(c.keyCode==dojo.keys.ESCAPE){dojo.byId(this.widgetId).blur();this._onBlur(c)}if(c.keyCode==dojo.keys.TAB&&!c.shiftKey){if(document.getElementById("SimpleSearchForm_SearchTerm")){document.getElementById("SimpleSearchForm_SearchTerm").focus();dojo.stopEvent(c)}}},_onBlur:function(b){var a=this.index+1;var c=document.getElementById("sub_categories_"+a);if(c!=null){c.style.display=""}dojo.query(".dephighlight").forEach(function(d){dojo.removeClass(d,"dephighlight")});this.index=-1;this.subCategoryIndex=0;activeLink=null;dojo.byId("widget_departments").blur()},_onDepartmentFocus:function(b,a){var c=b.id.replace("department","sub_categories");if(document.getElementById(c)){document.getElementById(c).style.backgroundColor="#ffffff";document.getElementById(c).style.display="block"}},_onDepartmentNoFocus:function(b,a){var c=b.id.replace("department","sub_categories");if(document.getElementById(c)){if(dojo.isIE){setTimeout((function(d){return function(){document.getElementById(d).style.backgroundColor="";document.getElementById(d).style.display="none"}})(c),0)}else{document.getElementById(c).style.backgroundColor="";document.getElementById(c).style.display="none"}}},initializeCatNodes:function(){var a=".departments > *";catNodes=dojo.query(a)}};wc.render.declareContext("DepartmentDropdown_Context",{isFirstRefresh:"false"},"");wc.render.declareRefreshController({id:"DepartmentDropdownController",renderContext:wc.render.getContextById("DepartmentDropdown_Context"),url:"",formId:"",renderContextChangedHandler:function(c,d){var a=this;var b=this.renderContext;d.refresh(b.properties)},postRefreshHandler:function(a){DepartmentJS.initializeCatNodes();dojo.query("div#widget_departments > .drop_down > .middle > .left_border > .right_border > .departments > .department").forEach(function(b){dojo.connect(b,"onfocus",DepartmentJS,dojo.partial(DepartmentJS._onDepartmentFocus,b));dojo.connect(b,"onmouseover",DepartmentJS,dojo.partial(DepartmentJS._onDepartmentFocus,b));dojo.connect(b,"onblur",DepartmentJS,dojo.partial(DepartmentJS._onDepartmentNoFocus,b));if(dojo.isIE){dojo.connect(b,"onmouseleave",DepartmentJS,dojo.partial(DepartmentJS._onDepartmentNoFocus,b))}else{dojo.connect(b,"onmouseout",DepartmentJS,dojo.partial(DepartmentJS._onDepartmentNoFocus,b))}});cursor_clear()}})}shoppingActionsJS={langId:"-1",storeId:"",catalogId:"",userType:"",baseItemAddedToCart:false,entitledItems:[],entitledItemJsonObject:null,selectedAttributesList:new Object(),moreInfoUrl:"",isPopup:false,displayPriceRange:true,itemPriceJsonOject:[],allSwatchesArrayList:new Object(),skuImageId:"",cookieKeyPrefix:"CompareItems_",cookieDelimiter:";",maxNumberProductsAllowedToCompare:4,minNumberProductsAllowedToCompare:2,baseCatalogEntryId:0,selectedProducts:new Object(),productList:new Object(),currencySymbol:"",compareReturnName:"",searchTerm:"",productAddedList:new Object(),setCompareReturnName:function(a){this.compareReturnName=a},setSearchTerm:function(a){this.searchTerm=a},setCommonParameters:function(e,a,d,c,b){this.langId=e;this.storeId=a;this.catalogId=d;this.userType=c;this.currencySymbol=b},setEntitledItems:function(a){this.entitledItems=a},getCatalogEntryId:function(a){var c=[];var b=this.selectedAttributesList[a];for(attribute in b){c.push(attribute+"_"+b[attribute])}return this.resolveSKU(c)},getCatalogEntryIdforProduct:function(a){var b=[];for(attribute in a){b.push(attribute+"_"+a[attribute])}return this.resolveSKU(b)},getEntitledItemJsonObject:function(){return this.entitledItemJsonObject},resolveSKU:function(e){console.debug("Resolving SKU >> "+e+">>"+this.entitledItems);var g="";var d=e.length;if(this.entitledItems.length==1){return this.entitledItems[0].catentry_id}for(x in this.entitledItems){var g=this.entitledItems[x].catentry_id;var f=this.entitledItems[x].Attributes;var a=0;for(index in f){a++}if(d==0&&a==0){return g}if(a!=0&&d>=a){var c=0;for(attributeName in e){var b=e[attributeName];if(b in f){c++}}if(a==c){console.debug("CatEntryId:"+g+" for Attribute: "+e);return g}}}return null},setSelectedAttribute:function(b,e,a,d,f){console.debug(b+" : "+e);var c=this.selectedAttributesList[a];if(c==null){c=new Object()}c[b]=e;this.moreInfoUrl=this.moreInfoUrl+"&"+b+"="+e;this.selectedAttributesList[a]=c;this.changeProdImage(a,b,e,d,f)},setSelectedAttributeOfProduct:function(productId,selectedAttributeName,selectedAttributeValue,isSingleSKU){var selectedAttributesForProduct=null;if(this.selectedProducts[productId]){selectedAttributesForProduct=this.selectedProducts[productId]}else{selectedAttributesForProduct=new Object()}if(null!=selectedAttributeName&&""!=selectedAttributeName){selectedAttributesForProduct[selectedAttributeName]=selectedAttributeValue}this.selectedProducts[productId]=selectedAttributesForProduct;var entitledItemJSON=eval("("+dojo.byId("entitledItem_"+productId).innerHTML+")");this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryIdforProduct(selectedAttributesForProduct);if(catalogEntryId==null){catalogEntryId=0}else{this.changePrice("entitledItem_"+productId,false,true,productId);if(MerchandisingAssociationJS!=null){if(MerchandisingAssociationJS.baseItemParams!=null){if(MerchandisingAssociationJS.baseItemParams.type=="BundleBean"){for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++){if(productId==MerchandisingAssociationJS.baseItemParams.components[idx].productId){MerchandisingAssociationJS.baseItemParams.components[idx].id=catalogEntryId}}}}}}var productDetails=null;if(this.productList[productId]){productDetails=this.productList[productId]}else{productDetails=new Object();this.productList[productId]=productDetails;productDetails.baseItemId=productId}productDetails.id=catalogEntryId;if(productDetails.quantity){dojo.publish("quantityChanged",[dojo.toJson(productDetails)])}if(!isSingleSKU){dojo.publish("attributesChanged_"+productId,[dojo.toJson(selectedAttributesForProduct)])}},Add2ShopCartAjax:function(entitledItemId,productId,quantity,isPopup,customParams){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}else{entitledItemJSON=this.getEntitledItemJsonObject()}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(entitledItemId);if(catalogEntryId!=null){var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1);this.AddItem2ShopCartAjax(catalogEntryId,quantity,customParams,productId);this.baseItemAddedToCart=true;if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup")}}else{if(isPopup==true){dojo.byId("second_level_category_popup").style.zIndex="1";MessageHelper.formErrorHandleClient("addToCartLinkAjax",storeNLS.ERR_RESOLVING_SKU)}else{MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);this.baseItemAddedToCart=false}}},AddItem2ShopCartAjax:function(h,e,b,f){var d=[];d.storeId=this.storeId;d.catalogId=this.catalogId;d.langId=this.langId;d.orderId=".";d.calculationUsage="-1,-2,-5,-6,-7";d.inventoryValidation="true";d.URL="";d.updatePrices="1";d.isGC="N";if($("#giftCardDetails #gift-form").length){d.gcPrice=$("#gcPrice").val();if(d.gcPrice="undefined"){d.isGC="N"}else{d.isGC="Y"}d.gcMessage=$("#gc_message").val();d.gcToName=$("#gcToName").val();d.gcFromName=$("#gcFromName").val();d.gcType=$("#gcType").val();if(("#email_field").length){d.gcMail=$("#email_field").val()}d.gcPartNumber=$("#gcPartNumber").val();if($("#editGC").length){d.editGC=$("#editGC").val()}if($("#editGCOrderItem").length){d.editGCOrderItem=$("#editGCOrderItem").val()}}var j="AddToCartAjax";this.productAddedList=new Object();d.catEntryId=h;d.quantity=e;if(b!=null&&b!="undefined"){for(i in b){d[i]=b[i]}}if(!submitRequest()){}cursor_wait();shoppingActionsServicesDeclarationJS.setCommonParameters(this.langId,this.storeId,this.catalogId);if(b==true){wc.service.invoke(j,d)}else{wc.service.invoke(j,d)}this.baseItemAddedToCart=true;if(b!=null&&b!="undefined"&&b.catalogEntryType=="dynamicKit"){var c=this.storeId;var a=this.langId;var g=this.catalogId;dojo.xhrPost({url:"AjaxOrderChangeServiceAddPreConfigurationToCart",handleAs:"json-comment-filtered",content:d,load:function(l,k){var n=l.orderId;if(n!=null&&n!="undefined"){console.debug("response --> order ID: "+n+" - order item ID: "+l.orderItemId);console.debug("Calling Shopping Cart Display");this.baseItemAddedToCart=true;var m="OrderItemDisplay?storeId="+c+"&catalogId="+g+"&langId="+a;document.location.href=getAbsoluteURL()+m}else{console.debug("ERROR Adding DK/CTO-product to the Cart --> errorCode: "+l.errorCode+" - errorMessageKey: "+l.errorMessageKey+" - errorMessage: "+l.errorMessage);alert("ERROR Adding DK/CTO-product to the Cart. errorCode: "+l.errorCode+" - errorMessageKey: "+l.errorMessageKey+" - errorMessage: "+l.errorMessage)}},error:function(l,k){console.debug("errObj: "+l+" - ioArgs: "+k);console.debug("ShoppingActions.AddPreConfigurationToCart: Unexpected error occurred during an xhrPost request.")}})}else{this.baseItemAddedToCart=true}},AddItem2ShopCartAjaxforfinder:function(){var h=[];var a={};var b=[];var f=$("input[name=chk]:checked");var e=1;var d=0;var g=[];for(e=1;e<(f.length+1);e++){h["catEntryId_"+e]=f[d].value;b[d]=f[d].value;h["quantity_"+e]=document.getElementById(b[d]+"_dropdown").value;g.push($(f[d]).data("a2c"));d++}$.hpsfData.setRecentAddToCartData(g);if($("#isNewPrinter").val()=="Y"&&$("#addThePrinter").val()=="Y"){h.printerId=$("#SkuId").val()}h.storeId=this.storeId;h.catalogId=this.catalogId;h.langId=this.langId;h.orderId=".";h.calculationUsage="-1,-2,-5,-6,-7";h.inventoryValidation="true";h.URL="";h.updatePrices="1";var c="AddToCartAjax";this.productAddedList=new Object();if(!submitRequest()){}cursor_wait();shoppingActionsServicesDeclarationJS.setCommonParameters(this.langId,this.storeId,this.catalogId);wc.service.invoke(c,h);this.baseItemAddedToCart=true;addInkToCartOmniture()},AddItem2ShopCartAjaxforfinderpaper:function(){var h=[];var a={};var b=[];var f=$("input[name=chk1]:checked");var e=1;var d=0;var g=[];for(e=1;e<(f.length+1);e++){h["catEntryId_"+e]=f[d].value;b[d]=f[d].value;h["quantity_"+e]=document.getElementById(b[d]+"_dropdown").value;g.push($(f[d]).data("a2c"));d++}$.hpsfData.setRecentAddToCartData(g);if($("#isNewPrinter").val()=="Y"&&$("#addThePrinter").val()=="Y"){h.printerId=$("#SkuId").val()}h.storeId=this.storeId;h.catalogId=this.catalogId;h.langId=this.langId;h.orderId=".";h.calculationUsage="-1,-2,-5,-6,-7";h.inventoryValidation="true";h.URL="";h.updatePrices="1";var c="AddToCartAjax";this.productAddedList=new Object();if(!submitRequest()){}cursor_wait();shoppingActionsServicesDeclarationJS.setCommonParameters(this.langId,this.storeId,this.catalogId);wc.service.invoke(c,h);this.baseItemAddedToCart=true;addPaperToCartOmniture()},AddSKU2ShopCartAjax:function(e,b,d,a,c){if((e==null||e=="")&&$("#gcPartNumber").length){e=$("#gcPartNumber").val()}$("body").append("<div style:visibility='hidden'> <input type='hidden' id='PDPSku' value='"+e+"_"+b+"' /> </div>");cursor_wait();if(e!=null){this.AddItem2ShopCartAjax(e,d,c,b);this.baseItemAddedToCart=true}else{MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);this.baseItemAddedToCart=false;console.debug("Item ID is NULL --> "+e+"Product ID is -->"+b+"Add to cart is failed")}},AddBundle2ShopCartAjax:function(){var b="AddOrderItem";var e=[];e.storeId=this.storeId;e.catalogId=this.catalogId;e.langId=this.langId;e.orderId=".";e.calculationUsage="-1,-2,-5,-6,-7";e.inventoryValidation="true";var a=1;this.productAddedList=new Object();for(productId in this.productList){var c=this.productList[productId];if(c.id==0){MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);return}var d=dojo.number.parse(c.quantity);if(isNaN(d)||d<=0){MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);return}e["catEntryId_"+a]=c.id;e["quantity_"+a++]=d;this.baseItemAddedToCart=true;this.saveAddedProductInfo(d,productId,c.id,this.selectedProducts[productId])}if(!submitRequest()){return}cursor_wait();wc.service.invoke(b,e)},saveAddedProductInfo:function(h,c,a,g){var e="";if(document.getElementById("ProductInfoName_"+c)!=null){e=document.getElementById("ProductInfoName_"+c).value}else{if(document.getElementById("ProductInfoName_"+a)!=null){e=document.getElementById("ProductInfoName_"+a).value}}var b="";if(document.getElementById("ProductInfoImage_"+c)!=null){b=document.getElementById("ProductInfoImage_"+c).value}else{if(document.getElementById("ProductInfoImage_"+a)!=null){b=document.getElementById("ProductInfoImage_"+a).value}}var f="";if(document.getElementById("ProductInfoPrice_"+c)!=null){f=document.getElementById("ProductInfoPrice_"+c).value}else{if(document.getElementById("ProductInfoPrice_"+a)!=null){f=document.getElementById("ProductInfoPrice_"+a).value}}var d=[e,b,f,h,g];if(c!=a){this.productAddedList[a]=d}else{this.productAddedList[c]=d}},setSKUImageId:function(a){this.skuImageId=a},getImageForSKU:function(a,c){var d=[];var b=this.selectedAttributesList[a];for(attribute in b){d.push(attribute+"_"+b[attribute])}return this.resolveImageForSKU(d,c)},resolveImageForSKU:function(b,g){console.debug("Resolving SKU >> "+b+">>"+this.entitledItems);var h="";var c=b.length;for(x in this.entitledItems){if(null!=g){var h=this.entitledItems[x][g]}else{var h=this.entitledItems[x].ItemImage467}var e=this.entitledItems[x].Attributes;var a=0;for(index in e){a++}if(c==0&&a==0){return h}if(a!=0&&c>=a){var j=0;for(attributeName in b){var f=b[attributeName];if(f in e){j++}}if(a==j){console.debug("ItemImage:"+h+" for Attribute: "+b);var d=[];d.push(h);d.push(this.entitledItems[x].ItemThumbnailImage);if(this.entitledItems[x].ItemAngleThumbnail!=null&&this.entitledItems[x].ItemAngleThumbnail!=undefined){d.push(this.entitledItems[x].ItemAngleThumbnail);d.push(this.entitledItems[x].ItemAngleFullImage)}return d}}}return null},changeViewImages:function(d,a){var c=0;for(x in d){var b=c;c++;if(null!=dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+c)){dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+c).src=d[x]}if(null!=dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+c)){dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+c).href="JavaScript:changeThumbNail('productAngleLi"+b+"','"+a[x]+"');"}if(null!=dojo.byId("productAngleLi"+b)&&dojo.byId("productAngleLi"+b).className=="selected"){changeThumbNail("productAngleLi"+b,a[x])}}},changeProdImage:function(entitledItemId,swatchAttrName,swatchAttrValue,skuImageId,imageField){if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}this.setEntitledItems(entitledItemJSON);var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1);var skuImage=null;var imageArr=shoppingActionsJS.getImageForSKU(entitledItemId,imageField);if(imageArr!=null){skuImage=imageArr[0]}if(skuImageId!=undefined){this.setSKUImageId(skuImageId)}if(skuImage!=null){if(dojo.byId(this.skuImageId)!=null){document.getElementById(this.skuImageId).src=skuImage;if(document.getElementById("ProductInfoImage_"+productId)!=null){document.getElementById("ProductInfoImage_"+productId).value=skuImage}var itemAngleThumbnail=imageArr[2];var itemAngleFullImage=imageArr[3];if(itemAngleThumbnail!=null&&itemAngleThumbnail!=undefined){shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage)}}}else{var imageFound=false;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;if(null!=imageField){var itemImage=this.entitledItems[x][imageField]}else{var itemImage=this.entitledItems[x].ItemImage467}var itemAngleThumbnail=this.entitledItems[x].ItemAngleThumbnail;var itemAngleFullImage=this.entitledItems[x].ItemAngleFullImage;for(y in Attributes){var index=y.indexOf("_");var entitledSwatchName=y.substring(0,index);var entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){if(null!=dojo.byId(this.skuImageId)){dojo.byId(this.skuImageId).src=itemImage;if(document.getElementById("ProductInfoImage_"+productId)!=null){document.getElementById("ProductInfoImage_"+productId).value=itemImage}}if(itemAngleThumbnail!=null&&itemAngleThumbnail!=undefined){shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage)}imageFound=true;break}}if(imageFound){break}}}},updateSwatchListView:function(){var swatchArray=dojo.query("a[id^='swatch_array_']");for(var i=0;i<swatchArray.length;i++){var swatchArrayElement=swatchArray[i];eval(dojo.attr(swatchArrayElement,"href"))}var swatchSkuImage=dojo.query("a[id^='swatch_setSkuImage_']");for(var i=0;i<swatchSkuImage.length;i++){var swatchSkuImageElement=swatchSkuImage[i];eval(dojo.attr(swatchSkuImageElement,"href"))}var swatchDefault=dojo.query("a[id^='swatch_selectDefault_']");for(var i=0;i<swatchDefault.length;i++){var swatchDefaultElement=swatchDefault[i];eval(dojo.attr(swatchDefaultElement,"href"))}},selectSwatch:function(c,g,a,b,f,h){if(dojo.hasClass("swatch_"+a+"_"+g,"color_swatch_disabled")){return}var e=this.selectedAttributesList[a];for(attribute in e){if(attribute==c){if(e[attribute]!=g){var d=dojo.byId("swatch_"+a+"_"+e[attribute]);d.className="color_swatch";d.src=d.src.replace("_disabled.png","_enabled.png");dojo.byId("swatch_link_"+a+"_"+e[attribute]).title=d.alt}}if(document.getElementById("swatch_link_"+a+"_"+e[attribute])!=null){document.getElementById("swatch_link_"+a+"_"+e[attribute]).setAttribute("aria-checked","false")}}this.makeSwatchSelection(c,g,a,b,f,h)},makeSwatchSelection:function(f,e,a,b,c,d){this.setSelectedAttribute(f,e,a,c,d);document.getElementById("swatch_"+a+"_"+e).className="color_swatch_selected";document.getElementById("swatch_link_"+a+"_"+e).setAttribute("aria-checked","true");document.getElementById("swatch_selection_label_"+a+"_"+f).className="header color_swatch_label";if(document.getElementById("swatch_selection_"+a+"_"+f).style.display=="none"){document.getElementById("swatch_selection_"+a+"_"+f).style.display="inline"}document.getElementById("swatch_selection_"+a+"_"+f).innerHTML=e;this.updateSwatchImages(f,a,b,d)},addToAllSwatchsArray:function(d,f,b,a){var e=this.allSwatchesArrayList[a];if(e==null){e=new Array()}if(!this.existInAllSwatchsArray(d,f,e)){var c=new Array();c[0]=d;c[1]=f;c[2]=b;c[4]=document.getElementById("swatch_link_"+a+"_"+f).onclick;e.push(c);this.allSwatchesArrayList[a]=e}},existInAllSwatchsArray:function(c,f,e){for(var b=0;b<e.length;b++){var a=e[b][0];var d=e[b][1];if(a==c&&d==f){return true}}return false},makeDefaultSwatchSelection:function(entitledItemId,doNotDisable){if(this.entitledItems.length==0){if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}this.setEntitledItems(entitledItemJSON)}for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;for(y in Attributes){var index=y.indexOf("_");var swatchName=y.substring(0,index);var swatchValue=y.substring(index+1);this.makeSwatchSelection(swatchName,swatchValue,entitledItemId,doNotDisable,imageField)}break}},updateSwatchImages:function(c,B,r,L){var p=new Array();var l=this.selectedAttributesList[B];var m=l[c];var A=this.allSwatchesArrayList[B];for(var I=0;I<A.length;I++){var H=A[I][0];var w=A[I][1];var G=A[I][2];var E=A[I][3];var t=A[I][4];if(H!=r&&H!=c){var f=new Array();f[0]=H;f[1]=w;f[2]=G;f[4]=t;f[5]=false;p.push(f)}}for(x in this.entitledItems){var J=this.entitledItems[x].Attributes;for(y in J){var o=y.indexOf("_");var K=y.substring(0,o);var k=y.substring(o+1);if(K==c&&k==m){for(z in J){var h=z.indexOf("_");var v=z.substring(0,h);var a=z.substring(h+1);if(y!=z){for(I in p){var q=p[I][0];var g=p[I][1];if(v==q&&a==g){p[I][5]=true}}}}}}}var b=[];for(I in p){var q=p[I][0];var g=p[I][1];var n=p[I][2];var j=p[I][3];var e=p[I][4];var C=p[I][5];if(C){if(document.getElementById("swatch_"+B+"_"+g).className!="color_swatch_selected"){var F=dojo.byId("swatch_"+B+"_"+g);F.className="color_swatch";F.src=F.src.replace("_disabled.png","_enabled.png");dojo.byId("swatch_link_"+B+"_"+g).title=F.alt}document.getElementById("swatch_link_"+B+"_"+g).setAttribute("aria-disabled","false");document.getElementById("swatch_link_"+B+"_"+g).onclick=e}else{if(q!=r){var F=dojo.byId("swatch_"+B+"_"+g);var D=dojo.byId("swatch_link_"+B+"_"+g);F.className="color_swatch_disabled";D.onclick=null;F.src=F.src.replace("_enabled.png","_disabled.png");var u=storeNLS.INV_ATTR_UNAVAILABLE;D.title=dojo.string.substitute(u,{0:F.alt});document.getElementById("swatch_link_"+B+"_"+g).setAttribute("aria-disabled","true");if(l[q]==g){b.push(p[I])}}}}for(I in b){var d=b[I][0];var s=b[I][1];for(I in p){var q=p[I][0];var g=p[I][1];var C=p[I][5];if(q==d&&g!=s&&C){this.makeSwatchSelection(q,g,B,r,L);break}}}},changePrice:function(entitledItemId,isPopup,displayPriceRange,productId){this.displayPriceRange=displayPriceRange;this.isPopup=isPopup;var entitledItemJSON;if(dojo.byId(entitledItemId)!=null&&!this.isPopup){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}else{entitledItemJSON=this.getEntitledItemJsonObject()}var catalogEntryId=null;this.setEntitledItems(entitledItemJSON);if(this.selectedProducts[productId]){var catalogEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[productId])}else{var catalogEntryId=this.getCatalogEntryId(entitledItemId)}if(catalogEntryId!=null){if(this.itemPriceJsonOject[catalogEntryId]!=null&&this.itemPriceJsonOject[catalogEntryId]!="undefined"){this.displayPrice(this.itemPriceJsonOject[catalogEntryId].catalogEntry,productId);console.debug("ShoppingActions.changePrice: using stored json object.")}else{var parameters={};parameters.storeId=this.storeId;parameters.langId=this.langId;parameters.catalogId=this.catalogId;parameters.catalogEntryId=catalogEntryId;parameters.productId=productId;dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByIDView",handleAs:"json-comment-filtered",content:parameters,service:this,load:shoppingActionsJS.displayPriceServiceResponse,error:function(errObj,ioArgs){console.debug("ShoppingActions.changePrice: Unexpected error occurred during an xhrPost request.")}})}}else{console.debug("ShoppingActions.changePrice: all attributes are not selected.")}},displayPriceServiceResponse:function(b,a){var c=a.args.content.productId;shoppingActionsJS.itemPriceJsonOject[b.catalogEntry.catalogEntryIdentifier.uniqueID]=b;shoppingActionsJS.displayPrice(b.catalogEntry,c)},displayPrice:function(c,g){var e;var b=shoppingActionsJS.isPopup;if(b==true){document.getElementById("productPrice").innerHTML=c.offerPrice;document.getElementById("productName").innerHTML=c.description[0].name;document.getElementById("productSKUValue").innerHTML=c.catalogEntryIdentifier.externalIdentifier.partNumber}if(b==false){var k="";var d=dojo.currency.parse(c.listPrice,{symbol:this.currencySymbol});var j=dojo.currency.parse(c.offerPrice,{symbol:this.currencySymbol});this.setPriceInProductList(g,j);if(!c.listPriced||d<=j){k="<span id='offerPrice_"+c.catalogEntryIdentifier.uniqueID+"' class='price'>"+c.offerPrice+"</span>"}else{k="<span id='listPrice_"+c.catalogEntryIdentifier.uniqueID+"' class='old_price'>"+c.listPrice+"</span><span id='offerPrice_"+c.catalogEntryIdentifier.uniqueID+"' class='price'>"+c.offerPrice+"</span>"}document.getElementById("price_display_"+g).innerHTML=k+"<input type='hidden' id='ProductInfoPrice_"+c.catalogEntryIdentifier.uniqueID+"' value='"+c.offerPrice+"'/>";k="";if(shoppingActionsJS.displayPriceRange==true){for(var h in c.priceRange){if(c.priceRange[h].endingNumberOfUnits==c.priceRange[h].startingNumberOfUnits){e=storeNLS.PQ_PRICE_X;k=k+"<p>"+dojo.string.substitute(e,{0:c.priceRange[h].startingNumberOfUnits})}else{if(c.priceRange[h].endingNumberOfUnits!="null"){e=storeNLS.PQ_PRICE_X_TO_Y;k=k+"<p>"+dojo.string.substitute(e,{0:c.priceRange[h].startingNumberOfUnits,1:c.priceRange[h].endingNumberOfUnits})}else{e=storeNLS.PQ_PRICE_X_OR_MORE;k=k+"<p>"+dojo.string.substitute(e,{0:c.priceRange[h].startingNumberOfUnits})}}k=k+" <span class='price'>"+c.priceRange[h].localizedPrice+"</span></p>"}}var a=dojo.byId("productLevelPriceRange_"+g);var l=dojo.byId("itemLevelPriceRange_"+g);if(null!=a&&null==l){dojo.style(a,"display","")}else{if(""!=k&&null!=l){k=storeNLS.PQ_PURCHASE+k;l.innerHTML=k;dojo.style(l,"display","");if(null!=a){dojo.style(a,"display","none")}}else{if(""==k){if(null!=l){dojo.style(l,"display","none")}if(null!=a){dojo.style(a,"display","")}}}}var f=dojo.query("#product_name_"+g+" > a");if(f.length==1){f[0].innerHTML=c.description[0].name}else{if(dojo.byId("product_name_"+g)){dojo.byId("product_name_"+g).innerHTML=c.description[0].name}}if(document.getElementById("ProductInfoName_"+g)!=null){document.getElementById("ProductInfoName_"+g).value=c.description[0].name}if(document.getElementById("product_shortdescription_"+g)){document.getElementById("product_shortdescription_"+g).innerHTML=c.description[0].shortDescription}if(document.getElementById("product_SKU_"+g)){document.getElementById("product_SKU_"+g).innerHTML=storeNLS.SKU+" "+c.catalogEntryIdentifier.externalIdentifier.partNumber}}},showWCDialogPopup:function(b){var a=dijit.byId(b);if(a!=null){a.closeButtonNode.style.display="none";a.show()}else{console.debug(b+" does not exist")}},notifyAttributeChange:function(b){this.baseCatalogEntryId=b;var a=this.selectedAttributesList["entitledItem_"+b];dojo.publish("attributesChanged_"+b,[dojo.toJson(a)]);dojo.publish("attributesChanged",[dojo.toJson(a)])},notifyQuantityChange:function(a){dojo.publish("quantityChanged",[a])},initCompare:function(b){if(b=="compare"){this.checkForCompare()}else{var c=this.cookieKeyPrefix+this.storeId;var a="";dojo.cookie(c,a,{path:"/"})}},changeCompareBox:function(a,b){box=document.getElementById(a);box.checked=!box.checked;this.addOrRemoveFromCompare(b,box.checked)},addOrRemoveFromCompare:function(b,a){if(a){this.addToCompare(b)}else{this.removeFromCompare(b)}},addToCompare:function(d){var g=this.cookieKeyPrefix+this.storeId;var f=dojo.cookie(g);if(f!=null){if(f.indexOf(d)!=-1||d==null){MessageHelper.displayErrorMessage(storeNLS.COMPARE_ITEM_EXISTS);return}}var c=0;if(f!=null&&f!=""){c=f.split(this.cookieDelimiter).length}if(c<parseInt(this.maxNumberProductsAllowedToCompare)){var e="";if(f==null||f==""){e=d}else{e=f+this.cookieDelimiter+d}dojo.cookie(g,e,{path:"/"});document.getElementById("compare_"+d).style.visibility="visible";console.debug("Product added to cookie");c=c+1;if(c==this.minNumberProductsAllowedToCompare){var a=document.getElementById("compare_button_disabled");var b=document.getElementById("compare_button_enabled");a.style.display="none";b.style.display="block";dojo.removeClass("compare_button","disabled")}}else{this.showWCDialogPopup("widget_product_comparison_popup");document.getElementById("comparebox_"+d).checked=false;console.debug("You can only compare up to 4 products")}},removeFromCompare:function(e){var h=this.cookieKeyPrefix+this.storeId;var g=dojo.cookie(h);var d=0;if(g!=null){if(dojo.trim(g)==""){dojo.cookie(h,null,{expires:-1})}else{var b=g.split(this.cookieDelimiter);var f="";for(index in b){if(b[index]!=e){if(f==""){f=b[index]}else{f=f+this.cookieDelimiter+b[index]}}}dojo.cookie(h,f,{path:"/"});d=f.split(this.cookieDelimiter).length}document.getElementById("compare_"+e).removeAttribute("style");console.debug("Product removed from cookie");if(d<this.minNumberProductsAllowedToCompare){var a=document.getElementById("compare_button_disabled");var c=document.getElementById("compare_button_enabled");a.style.display="inline";c.style.display="none";dojo.addClass("compare_button","disabled")}}},compareProducts:function(b){var a="CompareProductsDisplayView?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId+"&compareReturnName="+this.compareReturnName+"&searchTerm="+this.searchTerm;if(""!=b.top_category){a=a+"&top_category="+b.top_category}if(""!=b.parent_category_rn){a=a+"&parent_category_rn="+b.parent_category_rn}if(""!=b.categoryId){a=a+"&categoryId="+b.categoryId}var d=this.cookieKeyPrefix+this.storeId;var c=dojo.cookie(d);if(c!=null&&dojo.trim(c)!=""){a=a+"&catentryId="+c}var e=location.href;if(e.indexOf("?")==-1){e=e+"?fromPage=compare"}else{if(e.indexOf("fromPage=compare")==-1){e=e+"&fromPage=compare"}}a=a+"&returnUrl="+encodeURIComponent(e);location.href=getAbsoluteURL()+a},setProductQuantity:function(e,c,d,b){var a=null;if(this.productList[c]){a=this.productList[c]}else{a=new Object();this.productList[c]=a;a.baseItemId=c;if("item"==e){a.id=c}else{a.id=0}}a.quantity=d;dojo.publish("quantityChanged",[dojo.toJson(a)]);a.price=dojo.number.parse(b)},quantityChanged:function(b,c){if(this.productList[b]){var a=this.productList[b];a.quantity=dojo.trim(c);dojo.publish("quantityChanged",[dojo.toJson(a)]);if(MerchandisingAssociationJS!=null){if(MerchandisingAssociationJS.baseItemParams!=null){if(MerchandisingAssociationJS.baseItemParams.type=="BundleBean"){for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++){if(b==MerchandisingAssociationJS.baseItemParams.components[idx].productId||b==MerchandisingAssociationJS.baseItemParams.components[idx].id){MerchandisingAssociationJS.baseItemParams.components[idx].quantity=a.quantity}}}}}}},setPriceInProductList:function(c,b){var a=this.productList[c];if(a){a.price=b}},selectBundleItemSwatch:function(r,q,m,f){if(dojo.hasClass("swatch_"+r+"_"+q+"_"+m,"color_swatch_disabled")){return false}if(dojo.byId("entitledItem_"+r)!=null){var g;var u=q+"_"+m;g=dojo.fromJson(dojo.byId("entitledItem_"+r).innerHTML);var t=new Array();for(idx in g){var d=false;var l=g[idx];for(attribute in l.Attributes){if(u==attribute){d=true;break}}if(d){for(attribute in l.Attributes){var p=attribute.substring(0,attribute.lastIndexOf("_"));if(p!=f&&p!=q){t.push(attribute)}}}}var c=new Array();var a=new Array();for(idx in g){var l=g[idx];for(attribute in l.Attributes){var p=attribute.substring(0,attribute.lastIndexOf("_"));if(p!=f&&p!=q){var o="swatch_"+r+"_"+attribute;var h=o.replace("swatch_","swatch_link_");if(dojo.indexOf(t,attribute)>-1){if(!dojo.hasClass(o,"color_swatch_selected")){dojo.byId(o).className="color_swatch";dojo.byId(o).src=dojo.byId(o).src.replace("_disabled.png","_enabled.png");dojo.byId(h).title=dojo.byId(o).alt;document.getElementById(h).setAttribute("aria-disabled","false")}}else{if(dojo.indexOf(c,attribute)==-1){c.push(attribute);if(dojo.hasClass(o,"color_swatch_selected")){a.push(o)}dojo.byId(o).className="color_swatch_disabled";dojo.byId(o).src=dojo.byId(o).src.replace("_enabled.png","_disabled.png");var j=storeNLS.INV_ATTR_UNAVAILABLE;var b=dojo.byId(o).alt;dojo.byId(h).title=dojo.string.substitute(j,{0:b});document.getElementById(h).setAttribute("aria-disabled","true")}}}if(document.getElementById("swatch_link_"+r+"_"+attribute)!=null){document.getElementById("swatch_link_"+r+"_"+attribute).setAttribute("aria-checked","false")}}}for(idx in a){var k=a[idx];var s=k.substring(0,k.lastIndexOf("_"));var v=false;dojo.query("[id^='"+s+"']").forEach(function(C,B,w){if(!v&&dojo.hasClass(C,"color_swatch")){var A=C.id.split("_");shoppingActionsJS.selectBundleItemSwatch(A[1],A[2],A[3],f);shoppingActionsJS.setSelectedAttributeOfProduct(A[1],A[2],A[3],false);v=true}})}}if(dojo.byId("swatch_selection_"+r+"_"+q).style.display=="none"){dojo.byId("swatch_selection_"+r+"_"+q).style.display="inline"}dojo.byId("swatch_selection_"+r+"_"+q).innerHTML=m;var n="swatch_"+r+"_"+q+"_";var e="swatch_link_"+r+"_"+q+"_";dojo.query("img[id^='"+n+"']").forEach(function(B,A,w){if(dojo.hasClass(B,"color_swatch_disabled")){dojo.removeClass(B,"color_swatch")}else{dojo.addClass(B,"color_swatch")}dojo.removeClass(B,"color_swatch_selected")});dojo.byId(n+m).className="color_swatch_selected";document.getElementById(e+m).setAttribute("aria-checked","true");this.setSelectedAttributeOfProduct(r,q,m,false);this.changeBundleItemImage(r,q,m,"productThumbNailImage_"+r)},changeBundleItemImage:function(catalogEntryId,swatchAttrName,swatchAttrValue,skuImageId){var entitledItemId="entitledItem_"+catalogEntryId;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")}this.setEntitledItems(entitledItemJSON);var skuImage=null;var imageArr=shoppingActionsJS.getImageForBundleItem(catalogEntryId);if(imageArr!=null){skuImage=imageArr[1]}if(skuImageId!=undefined){this.setSKUImageId(skuImageId)}if(skuImage!=null){if(dojo.byId(this.skuImageId)!=null){document.getElementById(this.skuImageId).src=skuImage;if(document.getElementById("ProductInfoImage_"+catalogEntryId)!=null){document.getElementById("ProductInfoImage_"+catalogEntryId).value=skuImage}}}else{var imageFound=false;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;var itemImage=this.entitledItems[x].ItemThumbnailImage;for(y in Attributes){var index=y.indexOf("_");var entitledSwatchName=y.substring(0,index);var entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){document.getElementById(this.skuImageId).src=itemImage;if(document.getElementById("ProductInfoImage_"+catalogEntryId)!=null){document.getElementById("ProductInfoImage_"+catalogEntryId).value=itemImage}imageFound=true;break}}if(imageFound){break}}}},getImageForBundleItem:function(a){var c=[];var b=this.selectedProducts[a];for(attribute in b){c.push(attribute+"_"+b[attribute])}return this.resolveImageForSKU(c)},checkForCompare:function(){var g=this.cookieKeyPrefix+this.storeId;var f=dojo.cookie(g);var d=0;if(f!=null){var e=f.split(this.cookieDelimiter);for(idx=0;idx<e.length;idx++){var c=e[idx];if(null!=dojo.byId("compare_"+c)){dojo.byId("comparebox_"+c).checked=true;dojo.byId("compare_"+c).style.visibility="visible"}if(++d==this.minNumberProductsAllowedToCompare){var a=dojo.byId("compare_button_disabled");var b=dojo.byId("compare_button_enabled");a.style.display="none";b.style.display="block";dojo.removeClass("compare_button","disabled")}}}},replaceItemAjaxHelper:function(e,l,b,h,a,f){var c=[];c.storeId=WCParamJS.storeId;c.catalogId=WCParamJS.catalogId;c.langId=WCParamJS.langId;c.orderItemId=b;c.orderId=".";if(CheckoutHelperJS.shoppingCartPage){c.calculationUsage="-1,-2,-5,-6,-7"}else{c.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}var j=[];j.storeId=WCParamJS.storeId;j.catalogId=WCParamJS.catalogId;j.langId=WCParamJS.langId;j.catEntryId=e;j.quantity=l;j.orderId=".";if(CheckoutHelperJS.shoppingCartPage){j.calculationUsage="-1,-2,-5,-6,-7"}else{j.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}var g=[];g.storeId=WCParamJS.storeId;g.catalogId=WCParamJS.catalogId;g.langId=WCParamJS.langId;g.orderId=".";if(CheckoutHelperJS.shoppingCartPage){g.calculationUsage="-1,-2,-5,-6,-7"}else{g.calculationUsage="-1,-2,-3,-4,-5,-6,-7"}var d=false;var k=true;if(h!=null&&h!=""){g.addressId=h}if(a!=null&&a!=""){g.shipModeId=a}if(f!=null&&f!=""){g.physicalStoreId=f;k=false}if(g.shipModeId!=null&&(g.addressId!=null||g.physicalStoreId!=null)){d=true}if(k){g.allocate="***";g.backorder="***";g.remerge="***";g.check="*n"}wc.service.declare({id:"AjaxReplaceItem",actionId:"AjaxReplaceItem",url:"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(m){if(!d){wc.service.invoke("AjaxAddOrderItem",j)}else{wc.service.invoke("AjaxAddOrderItemTemp",j)}},failureHandler:function(m){if(m.errorMessage){MessageHelper.displayErrorMessage(m.errorMessage)}else{if(m.errorMessageKey){MessageHelper.displayErrorMessage(m.errorMessageKey)}}cursor_clear()}});wc.service.declare({id:"AjaxAddOrderItemTemp",actionId:"AjaxAddOrderItemTemp",url:"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(m){if(k){g.orderItemId=m.orderItemId[0]}MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_ADDED);wc.service.invoke("OrderItemAddressShipMethodUpdate",g)},failureHandler:function(m){MessageHelper.displayErrorMessage(m.errorMessageKey)}});if(!submitRequest()){return}cursor_wait();wc.service.invoke("AjaxReplaceItem",c)},customizeDynamicKit:function(c,e,d,g){var f=[];f.catEntryId=c;f.quantity=e;if(g!=null&&g!="undefined"){f.dl=g}if(!isPositiveInteger(e)){MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);return}var a=document.getElementsByName("contractSelectForm_contractId");if(a!=null&&a!="undefined"){for(i=0;i<a.length;i++){if(a[i].checked){f.contractId=a[i].value;break}}}if(d!=null&&d!="undefined"&&d.length>0){for(i in d){f[i]=d[i]}}if(!submitRequest()){return}cursor_wait();var b=ctoURL;for(param in f){b+="&"+param+"="+f[param]}document.location.href=b}};