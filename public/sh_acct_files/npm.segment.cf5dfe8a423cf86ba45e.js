/*! For license information please see npm.segment.cf5dfe8a423cf86ba45e.js.LICENSE.txt */
(self.webpackChunksupplyhouse_react_app=self.webpackChunksupplyhouse_react_app||[]).push([[5649],{96908:(t,e,n)=>{"use strict";n.d(e,{b:()=>Pt});var r=n(3489);var i=n(99382),o=n(25869);function a(t){return"string"===typeof t}function s(t){return"number"===typeof t}function u(t){return"function"===typeof t}function c(t){return"object"===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var l=function(t){function e(e,n){var r=t.call(this,n)||this;return r.field=e,r}return(0,r.ZT)(e,t),e}(Error);function d(t){var e,n=t&&t.event&&t.event.type,r=t.event;if(void 0===r)throw new l("event","Event is missing");if(!a(n))throw new l("event","Event is not a string");if("track"===n&&!a(r.event))throw new l("event","Event is not a string");var i=null!==(e=r.properties)&&void 0!==e?e:r.traits;if("alias"!==n&&!c(i))throw new l("properties","properties is not an object");if(!function(t){var e,n,r;return a(null!==(r=null!==(n=null!==(e=t.userId)&&void 0!==e?e:t.anonymousId)&&void 0!==n?n:t.groupId)&&void 0!==r?r:t.previousId)}(r))throw new l("userId","Missing userId or anonymousId");return t}var p={name:"Event Validation",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:d,identify:d,page:d,alias:d,group:d,screen:d};function f(t,e,n,r){var i,o=[t,e,n,r],s=c(t)?t.event:t;if(!s||!a(s))throw new Error("Event missing");var l=c(t)?null!==(i=t.properties)&&void 0!==i?i:{}:c(e)?e:{},d={};return c(e)&&!u(n)&&(d=null!==n&&void 0!==n?n:{}),c(t)&&!u(e)&&(d=null!==e&&void 0!==e?e:{}),[s,l,d,o.find(u)]}function h(t,e,n,r,i){var o,s,l=null,d=null,p=[t,e,n,r,i],f=p.filter(a);void 0!==f[0]&&void 0!==f[1]&&(l=f[0],d=f[1]),1===f.length&&(l=null,d=f[0]);var h=p.find(u),v=p.filter((function(t){return null===d?c(t):c(t)||null===t})),y=null!==(o=v[0])&&void 0!==o?o:{},m=null!==(s=v[1])&&void 0!==s?s:{};return[l,d,y,m,h]}var v=function(t){return function(){for(var e,n,r,i,o,l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var p=null;p=null!==(r=null!==(e=l.find(a))&&void 0!==e?e:null===(n=l.find(s))||void 0===n?void 0:n.toString())&&void 0!==r?r:t.id();var f=l.filter((function(t){return null===p?c(t):c(t)||null===t})),h=null!==(i=f[0])&&void 0!==i?i:{},v=null!==(o=f[1])&&void 0!==o?o:{},y=l.find(u);return[p,h,v,y]}};function y(t,e,n,r){s(t)&&(t=t.toString()),s(e)&&(e=e.toString());var i=[t,e,n,r],o=i.filter(a),l=o[0],d=void 0===l?t:l,p=o[1],f=void 0===p?null:p,h=i.filter(c)[0];return[d,f,void 0===h?{}:h,i.find(u)]}var m=n(11942),g=n(65904),b=n(99306),w=n(74927),_=n(59108),k=n(96475),x=n(8322),P=n.n(x),j=function(){function t(t){this.user=t}return t.prototype.track=function(t,e,n,i){return this.normalize((0,r.pi)((0,r.pi)({},this.baseEvent()),{event:t,type:"track",properties:e,options:(0,r.pi)({},n),integrations:(0,r.pi)({},i)}))},t.prototype.page=function(t,e,n,i,o){var a,s={type:"page",properties:(0,r.pi)({},n),options:(0,r.pi)({},i),integrations:(0,r.pi)({},o)};return null!==t&&(s.category=t,s.properties=null!==(a=s.properties)&&void 0!==a?a:{},s.properties.category=t),null!==e&&(s.name=e),this.normalize((0,r.pi)((0,r.pi)({},this.baseEvent()),s))},t.prototype.screen=function(t,e,n,i,o){var a={type:"screen",properties:(0,r.pi)({},n),options:(0,r.pi)({},i),integrations:(0,r.pi)({},o)};return null!==t&&(a.category=t),null!==e&&(a.name=e),this.normalize((0,r.pi)((0,r.pi)({},this.baseEvent()),a))},t.prototype.identify=function(t,e,n,i){return this.normalize((0,r.pi)((0,r.pi)({},this.baseEvent()),{type:"identify",userId:t,traits:e,options:(0,r.pi)({},n),integrations:(0,r.pi)({},i)}))},t.prototype.group=function(t,e,n,i){return this.normalize((0,r.pi)((0,r.pi)({},this.baseEvent()),{type:"group",traits:e,options:(0,r.pi)({},n),integrations:(0,r.pi)({},i),groupId:t}))},t.prototype.alias=function(t,e,n,i){var o={userId:t,type:"alias",options:(0,r.pi)({},n),integrations:(0,r.pi)({},i)};return null!==e&&(o.previousId=e),void 0===t?this.normalize((0,r.pi)((0,r.pi)({},o),this.baseEvent())):this.normalize((0,r.pi)((0,r.pi)({},this.baseEvent()),o))},t.prototype.baseEvent=function(){var t={integrations:{},options:{}},e=this.user;return e.id()&&(t.userId=e.id()),e.anonymousId()&&(t.anonymousId=e.anonymousId()),t},t.prototype.context=function(t){var e,n,r,i=["integrations","anonymousId","timestamp","userId"],o=null!==(e=t.options)&&void 0!==e?e:{};delete o.integrations;var a=Object.keys(o),s=null!==(r=null===(n=t.options)||void 0===n?void 0:n.context)&&void 0!==r?r:{},u={};return a.forEach((function(t){"context"!==t&&(i.includes(t)?(0,k.N)(u,t,o[t]):(0,k.N)(s,t,o[t]))})),[s,u]},t.prototype.normalize=function(t){var e,n,i=Object.keys(null!==(e=t.integrations)&&void 0!==e?e:{}).reduce((function(e,n){var i,o;return(0,r.pi)((0,r.pi)({},e),((i={})[n]=Boolean(null===(o=t.integrations)||void 0===o?void 0:o[n]),i))}),{}),o=(0,r.pi)((0,r.pi)({},i),null===(n=t.options)||void 0===n?void 0:n.integrations),a=this.context(t),s=a[0],u=a[1],c=(t.options,(0,r._T)(t,["options"])),l=(0,r.pi)((0,r.pi)((0,r.pi)({timestamp:new Date},c),{context:s,integrations:o}),u),d="ajs-next-"+P().hash(JSON.stringify(l)+(0,_.v4)());return(0,r.pi)((0,r.pi)({},l),{messageId:d})},t}();var I=n(8213),S=n(65976),O=n(56815),M=function(t){function e(e){var n=t.call(this)||this;return n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=null!==e&&void 0!==e?e:new S.$(4,"event-queue"),n.queue.on(I.M,(function(){n.scheduleFlush(0)})),n}return(0,r.ZT)(e,t),e.prototype.register=function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,Promise.resolve(e.load(t,n)).then((function(){i.plugins.push(e)})).catch((function(n){if("destination"===e.type)return i.failedInitializations.push(e.name),console.warn(e.name,n),void t.log("warn","Failed to load destination",{plugin:e.name,error:n});throw n}))];case 1:return r.sent(),[2]}}))}))},e.prototype.deregister=function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e.unload?[4,Promise.resolve(e.unload(t,n))]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.plugins=this.plugins.filter((function(t){return t.name!==e.name})),[3,4];case 3:return i=r.sent(),t.log("warn","Failed to unload destination",{plugin:e.name,error:i}),[3,4];case 4:return[2]}}))}))},e.prototype.dispatch=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),e=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,e]}))}))},e.prototype.subscribeToDelivery=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e=this;return(0,r.Jh)(this,(function(n){return[2,new Promise((function(n,r){var i=function(o,a){o.isSame(t)&&(e.off("flush",i),a?n(o):r(o))};e.on("flush",i)}))]}))}))},e.prototype.dispatchSingle=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e=this;return(0,r.Jh)(this,(function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch((function(n){if(n instanceof b.Y&&!1===n.retry)return t;if(!e.enqueuRetry(n,t))throw n;return e.subscribeToDelivery(t)}))]}))}))},e.prototype.isEmpty=function(){return 0===this.queue.length},e.prototype.scheduleFlush=function(t){var e=this;void 0===t&&(t=500),this.flushing||(this.flushing=!0,setTimeout((function(){e.flush().then((function(){setTimeout((function(){e.flushing=!1,e.queue.length&&e.scheduleFlush(0)}),0)}))}),t))},e.prototype.deliver=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=Date.now(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.flushOne(t)];case 2:return t=r.sent(),n=Date.now()-e,t.stats.gauge("delivered",n),t.log("debug","Delivered",t.event),[2,t];case 3:throw i=r.sent(),t.log("error","Failed to deliver",i),t.stats.increment("delivery_failed"),i;case 4:return[2]}}))}))},e.prototype.enqueuRetry=function(t,e){return!(t instanceof b.Y&&!1===t.retry)&&this.queue.pushWithBackoff(e)},e.prototype.flush=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.queue.length||!(0,g.G)())return[2,[]];if(!(t=this.queue.pop()))return[2,[]];t.attempts=this.queue.getAttempts(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=n.sent(),this.emit("flush",t,!0),[3,4];case 3:return e=n.sent(),this.enqueuRetry(e,t)||this.emit("flush",t,!1),[2,[]];case 4:return[2,[t]]}}))}))},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var e,n,i=this.plugins.filter((function(e){var n;return"destination"!==e.type&&"Segment.io"!==e.name||(null!==(n=t[e.name])&&void 0!==n?n:!1!==("Segment.io"===e.name||t.All))})),o=(e="type",n={},i.forEach((function(t){var i,o=void 0;if("string"===typeof e){var a=t[e];o="string"!==typeof a?JSON.stringify(a):a}else e instanceof Function&&(o=e(t));void 0!==o&&(n[o]=(0,r.ev)((0,r.ev)([],null!==(i=n[o])&&void 0!==i?i:[],!0),[t],!1))})),n),a=o.before,s=void 0===a?[]:a,u=o.enrichment,c=void 0===u?[]:u,l=o.destination,d=void 0===l?[]:l,p=o.after;return{before:s,enrichment:c,destinations:d,after:void 0===p?[]:p}},e.prototype.flushOne=function(t){var e,n;return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,d,p,f,h,v,y,m;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(!this.isReady())throw new Error("Not ready");i=this.availableExtensions(null!==(e=t.event.integrations)&&void 0!==e?e:{}),o=i.before,a=i.enrichment,s=0,u=o,r.label=1;case 1:return s<u.length?(c=u[s],[4,(0,O.z)(t,c)]):[3,4];case 2:void 0!==(f=r.sent())&&(t=f),r.label=3;case 3:return s++,[3,1];case 4:l=0,d=a,r.label=5;case 5:return l<d.length?(p=d[l],[4,(0,O.a)(t,p)]):[3,8];case 6:(f=r.sent())instanceof b._&&(t=f),r.label=7;case 7:return l++,[3,5];case 8:return h=this.availableExtensions(null!==(n=t.event.integrations)&&void 0!==n?n:{}),v=h.destinations,y=h.after,[4,new Promise((function(e,n){setTimeout((function(){var r=v.map((function(e){return(0,O.a)(t,e)}));Promise.all(r).then(e).catch(n)}),0)}))];case 9:return r.sent(),t.stats.increment("message_delivered"),m=y.map((function(e){return(0,O.a)(t,e)})),[4,Promise.all(m)];case 10:return r.sent(),[2,t]}}))}))},e}(w.Q),E=n(66027),A=n(78437);function F(t){for(var e=t.constructor.prototype,n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var i=r[n];if("constructor"!==i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);o&&"function"===typeof o.value&&(t[i]=t[i].bind(t))}}return t}var T={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},J=function(){function t(){this.cache={}}return t.prototype.get=function(t){return this.cache[t]},t.prototype.set=function(t,e){return this.cache[t]=e,e},t.prototype.remove=function(t){delete this.cache[t]},t}(),C=function(t){function e(n){void 0===n&&(n=e.defaults);var i=t.call(this)||this;return i.options=(0,r.pi)((0,r.pi)({},e.defaults),n),i}return(0,r.ZT)(e,t),e.available=function(){var t=window.navigator.cookieEnabled;return t||(E.Z.set("ajs:cookies","test"),t=document.cookie.includes("ajs:cookies"),E.Z.remove("ajs:cookies")),t},Object.defineProperty(e,"defaults",{get:function(){return{maxage:365,domain:(0,A.P)(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),e.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path}},e.prototype.get=function(t){try{var e=E.Z.get(t);if(!e)return null;try{return JSON.parse(e)}catch(t){return e}}catch(t){return null}},e.prototype.set=function(t,e){return"string"===typeof e?E.Z.set(t,e,this.opts()):null===e?E.Z.remove(t,this.opts()):E.Z.set(t,JSON.stringify(e),this.opts()),e},e.prototype.remove=function(t){return E.Z.remove(t,this.opts())},e}(J),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.get=function(t){return null},e.set=function(t,e){return null},e.remove=function(t){},e}return(0,r.ZT)(e,t),e}(J),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.available=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return!1}},e.prototype.get=function(t){var e=localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return JSON.parse(JSON.stringify(e))}return null},e.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){console.warn("Unable to set ".concat(t," in localStorage, storage may be full."))}return e},e.prototype.remove=function(t){return localStorage.removeItem(t)},e}(J),N=function(){function t(t,e){void 0===t&&(t=T);var n,r,i,o,a=this;this.options={},this.id=function(t){var e,n;if(a.options.disable)return null;var r=a.chainGet(a.idKey);void 0!==t&&(a.trySet(a.idKey,t),t!==r&&null!==r&&null!==t&&a.anonymousId(null));return null!==(n=null!==(e=a.chainGet(a.idKey))&&void 0!==e?e:a.cookies.get(T.cookie.oldKey))&&void 0!==n?n:null},this.anonymousId=function(t){var e,n;if(a.options.disable)return null;if(void 0===t){var r=null!==(e=a.chainGet(a.anonKey))&&void 0!==e?e:null===(n=a.legacySIO())||void 0===n?void 0:n[0];if(r)return r}return null===t?(a.trySet(a.anonKey,null),a.chainGet(a.anonKey)):(a.trySet(a.anonKey,null!==t&&void 0!==t?t:(0,_.v4)()),a.chainGet(a.anonKey))},this.traits=function(t){var e,n;if(!a.options.disable)return null===t&&(t={}),t&&(a.mem.set(a.traitsKey,null!==t&&void 0!==t?t:{}),a.localStorage.set(a.traitsKey,null!==t&&void 0!==t?t:{})),null!==(n=null!==(e=a.localStorage.get(a.traitsKey))&&void 0!==e?e:a.mem.get(a.traitsKey))&&void 0!==n?n:{}},this.options=t,this.cookieOptions=e,this.idKey=null!==(r=null===(n=t.cookie)||void 0===n?void 0:n.key)&&void 0!==r?r:T.cookie.key,this.traitsKey=null!==(o=null===(i=t.localStorage)||void 0===i?void 0:i.key)&&void 0!==o?o:T.localStorage.key,this.anonKey="ajs_anonymous_id";var s=!0===t.disable,u=!1!==t.persist;this.localStorage=s||t.localStorageFallbackDisabled||!u||!G.available()?new D:new G,this.cookies=!s&&u&&C.available()?new C(e):new D,this.mem=s?new D:new J;var c=this.cookies.get(T.cookie.oldKey);c&&(c.id&&this.id(c.id),c.traits&&this.traits(c.traits)),F(this)}return t.prototype.chainGet=function(t){var e,n,r,i=null!==(r=null!==(n=null!==(e=this.localStorage.get(t))&&void 0!==e?e:this.cookies.get(t))&&void 0!==n?n:this.mem.get(t))&&void 0!==r?r:null;return this.trySet(t,"number"===typeof i?i.toString():i)},t.prototype.trySet=function(t,e){return this.localStorage.set(t,e),this.cookies.set(t,e),this.mem.set(t,e),e},t.prototype.chainClear=function(t){this.localStorage.remove(t),this.cookies.remove(t),this.mem.remove(t)},t.prototype.legacySIO=function(){var t=this.cookies.get("_sio");if(!t)return null;var e=t.split("----");return[e[0],e[1]]},t.prototype.identify=function(t,e){if(!this.options.disable){e=null!==e&&void 0!==e?e:{};var n=this.id();null!==n&&n!==t||(e=(0,r.pi)((0,r.pi)({},this.traits()),e)),t&&this.id(t),this.traits(e)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.chainClear(this.idKey),this.chainClear(this.anonKey),this.chainClear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.defaults=T,t}(),q={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},R=function(t){function e(e,n){void 0===e&&(e=q);var r=t.call(this,e,n)||this;return r.anonymousId=function(t){},F(r),r}return(0,r.ZT)(e,t),e}(N),L=n(39821),z="This is being deprecated and will be not be available in future releases of Analytics JS",B="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:null,V=null===B||void 0===B?void 0:B.analytics;var Z=function(t){function e(e,n,i,o,a){var s,u,c,l=this;(l=t.call(this)||this)._debug=!1,l.initialized=!1,l.user=function(){return l._user},l.init=l.initialize.bind(l);var d=null===n||void 0===n?void 0:n.cookie,p=null!==(s=null===n||void 0===n?void 0:n.disableClientPersistence)&&void 0!==s&&s;return l.settings=e,l.settings.timeout=null!==(u=l.settings.timeout)&&void 0!==u?u:300,l.queue=null!==i&&void 0!==i?i:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=t?4:1,r=e?new I.Z(n,[]):new S.$(n,"event-queue");return new M(r)}(null===n||void 0===n?void 0:n.retryQueue,p),l._user=null!==o&&void 0!==o?o:new N(p?(0,r.pi)((0,r.pi)({},null===n||void 0===n?void 0:n.user),{persist:!1}):null===n||void 0===n?void 0:n.user,d).load(),l._group=null!==a&&void 0!==a?a:new R(p?(0,r.pi)((0,r.pi)({},null===n||void 0===n?void 0:n.group),{persist:!1}):null===n||void 0===n?void 0:n.group,d).load(),l.eventFactory=new j(l._user),l.integrations=null!==(c=null===n||void 0===n?void 0:n.integrations)&&void 0!==c?c:{},l.options=null!==n&&void 0!==n?n:{},F(l),l}return(0,r.ZT)(e,t),e.prototype.track=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,a,s,u=this;return(0,r.Jh)(this,(function(r){return e=f.apply(void 0,t),n=e[0],i=e[1],o=e[2],a=e[3],s=this.eventFactory.track(n,i,o,this.integrations),[2,this.dispatch(s,a).then((function(t){return u.emit("track",n,t.event.properties,t.event.options),t}))]}))}))},e.prototype.page=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,a,s,u,c=this;return(0,r.Jh)(this,(function(r){return e=h.apply(void 0,t),n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=this.eventFactory.page(n,i,o,a,this.integrations),[2,this.dispatch(u,s).then((function(t){return c.emit("page",n,i,t.event.properties,t.event.options),t}))]}))}))},e.prototype.identify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,a,s,u=this;return(0,r.Jh)(this,(function(r){return e=v(this._user).apply(void 0,t),n=e[0],i=e[1],o=e[2],a=e[3],this._user.identify(n,i),s=this.eventFactory.identify(this._user.id(),this._user.traits(),o,this.integrations),[2,this.dispatch(s,a).then((function(t){return u.emit("identify",t.event.userId,t.event.traits,t.event.options),t}))]}))}))},e.prototype.group=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)return this._group;var r=v(this._group).apply(void 0,e),i=r[0],o=r[1],a=r[2],s=r[3];this._group.identify(i,o);var u=this._group.id(),c=this._group.traits(),l=this.eventFactory.group(u,c,a,this.integrations);return this.dispatch(l,s).then((function(e){return t.emit("group",e.event.groupId,e.event.traits,e.event.options),e}))},e.prototype.alias=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,a,s,u=this;return(0,r.Jh)(this,(function(r){return e=y.apply(void 0,t),n=e[0],i=e[1],o=e[2],a=e[3],s=this.eventFactory.alias(n,i,o,this.integrations),[2,this.dispatch(s,a).then((function(t){return u.emit("alias",n,i,t.event.options),t}))]}))}))},e.prototype.screen=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,a,s,u,c=this;return(0,r.Jh)(this,(function(r){return e=h.apply(void 0,t),n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=this.eventFactory.screen(n,i,o,a,this.integrations),[2,this.dispatch(u,s).then((function(t){return c.emit("screen",n,i,t.event.properties,t.event.options),t}))]}))}))},e.prototype.trackClick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return[4,n.e(5649).then(n.bind(n,4802))];case 1:return e=o.sent(),[2,(i=e.link).call.apply(i,(0,r.ev)([this],t,!1))]}}))}))},e.prototype.trackLink=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return[4,n.e(5649).then(n.bind(n,4802))];case 1:return e=o.sent(),[2,(i=e.link).call.apply(i,(0,r.ev)([this],t,!1))]}}))}))},e.prototype.trackSubmit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return[4,n.e(5649).then(n.bind(n,4802))];case 1:return e=o.sent(),[2,(i=e.form).call.apply(i,(0,r.ev)([this],t,!1))]}}))}))},e.prototype.trackForm=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return[4,n.e(5649).then(n.bind(n,4802))];case 1:return e=o.sent(),[2,(i=e.form).call.apply(i,(0,r.ev)([this],t,!1))]}}))}))},e.prototype.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return e=b._.system(),n=t.map((function(t){return i.queue.register(e,t,i)})),[4,Promise.all(n)];case 1:return r.sent(),[2,e]}}))}))},e.prototype.deregister=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i=this;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return e=b._.system(),n=t.map((function(t){return(0,r.mG)(i,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){return(n=this.queue.plugins.find((function(e){return e.name===t})))?[2,this.queue.deregister(e,n,this)]:(e.log("warn","plugin ".concat(t," not found")),[2])}))}))})),[4,Promise.all(n)];case 1:return o.sent(),[2,e]}}))}))},e.prototype.debug=function(t){return!1===t&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset()},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype.dispatch=function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,a,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=new b._(t),(0,g.s)()&&!this.options.retryQueue?[2,n]:(i=Date.now(),this.queue.isEmpty()?[4,this.queue.dispatchSingle(n)]:[3,2]);case 1:return o=r.sent(),[3,4];case 2:return[4,this.queue.dispatch(n)];case 3:o=r.sent(),r.label=4;case 4:return a=Date.now()-i,s=this.settings.timeout,e?[4,(0,m.U)(o,e,Math.max((null!==s&&void 0!==s?s:300)-a,0),s)]:[3,6];case 5:o=r.sent(),r.label=6;case 6:return this._debug&&o.flush(),[2,o]}}))}))},e.prototype.addSourceMiddleware=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,n.e(5649).then(n.bind(n,66170))];case 1:return e=r.sent().sourceMiddlewarePlugin,i={},this.queue.plugins.forEach((function(t){if("destination"===t.type)return i[t.name]=!0})),o=e(t,i),[4,this.register(o)];case 2:return r.sent(),[2,this]}}))}))},e.prototype.addDestinationMiddleware=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.queue.plugins.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}));return r.forEach((function(t){t.addMiddleware.apply(t,e)})),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,n.e(5649).then(n.bind(n,53694))];case 1:return[2,(0,e.sent().queryString)(this,t)]}}))}))},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return void 0===t&&(t=function(t){return t}),(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return[2,Promise.all(this.queue.plugins.map((function(t){return t.ready?t.ready():Promise.resolve()}))).then((function(e){return t(e),e}))]}))}))},e.prototype.noConflict=function(){return console.warn(z),window.analytics=null!==V&&void 0!==V?V:this,this},e.prototype.normalize=function(t){return console.warn(z),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(z),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return L.i},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return console.warn(z),[2,Promise.resolve(this)]}))}))},e.prototype.pageview=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return console.warn(z),[4,this.page({path:t})];case 1:return e.sent(),[2,this]}}))}))},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(z),null!==(t=this._plugins)&&void 0!==t?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){return console.warn(z),this.queue.plugins.filter((function(t){return"destination"===t.type})).reduce((function(t,e){var n="".concat(e.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),r=window[n];if(!r)return t;var i=r.Integration;return i?(t[e.name]=i,t):(t[e.name]=r,t)}),{})},enumerable:!1,configurable:!0}),e.prototype.log=function(){console.warn(z)},e.prototype.addIntegrationMiddleware=function(){console.warn(z)},e.prototype.listeners=function(){console.warn(z)},e.prototype.addEventListener=function(){console.warn(z)},e.prototype.removeAllListeners=function(){console.warn(z)},e.prototype.removeListener=function(){console.warn(z)},e.prototype.removeEventListener=function(){console.warn(z)},e.prototype.hasListeners=function(){console.warn(z)},e.prototype.addIntegration=function(){console.warn(z)},e.prototype.add=function(){console.warn(z)},e.prototype.push=function(t){var e=t.shift();e&&!this[e]||this[e].apply(this,t)},e}(w.Q),K=n(913);function U(){var t=document.getElementsByTagName("link"),e="";return Array.prototype.slice.call(t).forEach((function(t){"canonical"===t.getAttribute("rel")&&(e=t.getAttribute("href"))})),e}function Y(){var t=U();if(!t)return window.location.pathname;var e=document.createElement("a");return e.href=t,e.pathname.startsWith("/")?e.pathname:"/"+e.pathname}function H(t){void 0===t&&(t="");var e=U();if(e)return e.includes("?")?e:"".concat(e).concat(t);var n=window.location.href,r=n.indexOf("#");return-1===r?n:n.slice(0,r)}function Q(){return{path:Y(),referrer:document.referrer,search:location.search,title:document.title,url:H(location.search)}}function W(t){var e,n=t.event;n.context=n.context||{};var r=Q(),i=null!==(e=n.properties)&&void 0!==e?e:{};return Object.keys(r).forEach((function(t){i[t]&&(r[t]=i[t])})),n.context.page&&(r=Object.assign({},r,n.context.page)),n.context=Object.assign({},n.context,{page:r}),t.event=n,t}var $={name:"Page Enrichment",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},type:"before",page:function(t){return t.event.properties=Object.assign({},Q(),t.event.properties),t.event.name&&(t.event.properties.name=t.event.name),W(t)},alias:W,track:W,identify:W,group:W},X=n(67289),tt=n(66548);function et(t,e,n,o){var a;return(0,r.mG)(this,void 0,void 0,(function(){var s,u,c,l=this;return(0,r.Jh)(this,(function(d){switch(d.label){case 0:return s=[],u=(0,i.Vl)(),c=(null!==(a=t.remotePlugins)&&void 0!==a?a:[]).map((function(t){return(0,r.mG)(l,void 0,void 0,(function(){var i,a,c,l,d,p,f,h;return(0,r.Jh)(this,(function(v){switch(v.label){case 0:if(!1===e.All&&!e[t.name]||!1===e[t.name])return[2];v.label=1;case 1:if(v.trys.push([1,12,,13]),!o)return[3,7];i=t.url.split("/"),a=i[i.length-2],c=t.url.replace(a,btoa(a).replace(/=/g,"")),v.label=2;case 2:return v.trys.push([2,4,,6]),[4,(0,tt.v)(c.replace("https://cdn.segment.com",u))];case 3:return v.sent(),[3,6];case 4:return v.sent(),[4,(0,tt.v)(t.url.replace("https://cdn.segment.com",u))];case 5:return v.sent(),[3,6];case 6:return[3,9];case 7:return[4,(0,tt.v)(t.url.replace("https://cdn.segment.com",u))];case 8:v.sent(),v.label=9;case 9:return l=t.libraryName,"function"!==typeof window[l]?[3,11]:(d=window[l],[4,(0,X.O)(d((0,r.pi)((0,r.pi)({},t.settings),n[t.name])))]);case 10:p=v.sent(),function(t){if(!Array.isArray(t))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];t.forEach((function(t){e.forEach((function(e){var n;if(void 0===t[e])throw new Error("Plugin: ".concat(null!==(n=t.name)&&void 0!==n?n:"unknown"," missing required function ").concat(e))}))}))}(f=Array.isArray(p)?p:[p]),s.push.apply(s,f),v.label=11;case 11:return[3,13];case 12:return h=v.sent(),console.warn("Failed to load Remote Plugin",h),[3,13];case 13:return[2]}}))}))})),[4,Promise.all(c)];case 1:return d.sent(),[2,s.filter(Boolean)]}}))}))}var nt=n(23888),rt=o.Z;"undefined"!==typeof window&&(rt=window.fetch||o.Z);function it(t){return(encodeURI(JSON.stringify(t)).split(/%..|./).length-1)/1024}function ot(t,e){var n,i,o,a=[],s=!1,u=null!==(n=null===e||void 0===e?void 0:e.size)&&void 0!==n?n:10,c=null!==(i=null===e||void 0===e?void 0:e.timeout)&&void 0!==i?i:5e3;function l(e){var n;if(0!==e.length){var r=null===(n=e[0])||void 0===n?void 0:n.writeKey;return rt("https://".concat(t,"/b"),{keepalive:s,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({batch:e,writeKey:r})})}}function d(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){return a.length?(t=a,a=[],[2,l(t)]):[2]}))}))}return window.addEventListener("beforeunload",(function(){if(s=!0,a.length){var t=function(t){var e=[],n=0;return t.forEach((function(t){it(e[n])>=64&&n++,e[n]?e[n].push(t):e[n]=[t]})),e}(a).map(l);Promise.all(t).catch(console.error)}})),{dispatch:function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return a.push(e),[2,a.length>=u||function(t){return it(t)>=450}(a)||s?d():void(o||(o=setTimeout((function(){o=void 0,d().catch(console.error)}),c)))]}))}))}}}var at=o.Z;"undefined"!==typeof window&&(at=window.fetch||o.Z);var st=n(10788),ut=n(56749);function ct(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return n=[],(0,g.s)()?[2,e]:[4,(0,ut.x)((function(){return e.length>0&&!(0,g.s)()}),(function(){return(0,r.mG)(i,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(i=e.pop())?[4,(0,O.a)(i,t)]:[2];case 1:return o=r.sent(),o instanceof b._||n.push(i),[2]}}))}))}))];case 1:return o.sent(),n.map((function(t){return e.pushWithBackoff(t)})),[2,e]}}))}))}function lt(t,e,n,i){var o=this;t||setTimeout((function(){return(0,r.mG)(o,void 0,void 0,(function(){var t,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return t=!0,[4,ct(n,e)];case 1:return o=r.sent(),t=!1,e.todo>0&&i(t,o,n,i),[2]}}))}))}),5e3*Math.random())}function dt(t,e,n){var i,o,a,s,u=t.options.disableClientPersistence?new I.Z(t.queue.queue.maxAttempts,[]):new S.$(t.queue.queue.maxAttempts,"dest-Segment.io"),c=null!==(i=null===e||void 0===e?void 0:e.apiHost)&&void 0!==i?i:"api.segment.io/v1",l=null!==(o=null===e||void 0===e?void 0:e.protocol)&&void 0!==o?o:"https",d="".concat(l,"://").concat(c),p="batching"===(null===(a=null===e||void 0===e?void 0:e.deliveryStrategy)||void 0===a?void 0:a.strategy)?ot(c,null===(s=null===e||void 0===e?void 0:e.deliveryStrategy)||void 0===s?void 0:s.config):{dispatch:function(t,e){return at(t,{headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(e)})}};function f(i){return(0,r.mG)(this,void 0,void 0,(function(){var o,a;return(0,r.Jh)(this,(function(r){return(0,g.s)()?(u.push(i),lt(!1,u,h,lt),[2,i]):(o=i.event.type.charAt(0),a=(0,nt.D)(i.event).json(),"track"===i.event.type&&delete a.traits,"alias"===i.event.type&&(a=function(t,e){var n,r,i,o,a=t.user();return e.previousId=null!==(i=null!==(r=null!==(n=e.previousId)&&void 0!==n?n:e.from)&&void 0!==r?r:a.id())&&void 0!==i?i:a.anonymousId(),e.userId=null!==(o=e.userId)&&void 0!==o?o:e.to,delete e.from,delete e.to,e}(t,a)),[2,p.dispatch("".concat(d,"/").concat(o),(0,st.Fv)(t,a,e,n)).then((function(){return i})).catch((function(t){return"error"!==t.type&&"Failed to fetch"!==t.message||(u.push(i),lt(!1,u,h,lt)),i}))])}))}))}var h={name:"Segment.io",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:f,identify:f,page:f,alias:f,group:f};return h}var pt=function(t,e,n){n.getCalls(t).forEach((function(t){mt(e,t).catch(console.error)}))},ft=function(t,e){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=0,i=e.getCalls("addSourceMiddleware"),r.label=1;case 1:return n<i.length?(o=i[n],[4,mt(t,o).catch(console.error)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},ht=pt.bind(void 0,"on"),vt=pt.bind(void 0,"setAnonymousId"),yt=function(){function t(){this._value={}}return t.prototype.toArray=function(){return Object.values(this._value).reduce((function(t,e){return t.concat.apply(t,e)}),[])},t.prototype.getCalls=function(t){var e;return null!==(e=this._value[t])&&void 0!==e?e:[]},t.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach((function(e){t._value[e.method]?t._value[e.method].push(e):t._value[e.method]=[e]})),this},t.prototype.clear=function(){return this._value={},this},t}();function mt(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,n=t[e.method].apply(t,e.args),"object"===typeof(o=n)&&null!==o&&"then"in o&&"function"===typeof o.then?[4,n]:[3,2]);case 1:r.sent(),r.label=2;case 2:return e.resolve(n),[3,4];case 3:return i=r.sent(),e.reject(i),[3,4];case 4:return[2]}var o}))}))}var gt=function(){function t(t){var e=this;this._preInitBuffer=new yt,this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this._promise=t(this._preInitBuffer),this._promise.then((function(t){var n=t[0],r=t[1];e.instance=n,e.ctx=r})).catch((function(){}))}return t.prototype.then=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).then.apply(t,e)},t.prototype.catch=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).catch.apply(t,e)},t.prototype.finally=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).finally.apply(t,e)},t.prototype._createMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?(n=e.instance)[t].apply(n,r):new Promise((function(n,i){e._preInitBuffer.push({method:t,args:r,resolve:n,reject:i,called:!1})}))}},t.prototype._createChainableMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?((n=e.instance)[t].apply(n,r),e):(e._preInitBuffer.push({method:t,args:r,resolve:function(){},reject:console.error,called:!1}),e)}},t}();function bt(t){var e=t[0],n=t.slice(1);return{method:e,resolve:function(){},reject:console.error,args:n,called:!1}}var wt=function(){var t=window.analytics;if(!Array.isArray(t))return[];var e=t.splice(0,t.length);return e.map(bt)};function _t(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e.push.apply(e,wt()),[4,ft(t,e)];case 1:return n.sent(),e.push.apply(e,wt()),function(t,e){e.toArray().forEach((function(e){setTimeout((function(){mt(t,e).catch(console.error)}),0)}))}(t,e),e.clear(),[2]}}))}))}function kt(t,e,i,o,a){var s,u,c;return(0,r.mG)(this,void 0,void 0,(function(){var l,d,f,h,v,y,m,g,b=this;return(0,r.Jh)(this,(function(w){switch(w.label){case 0:return _=t,"test"!=={}.NODE_ENV&&Object.keys(_.integrations).length>1?[4,Promise.all([n.e(5649),n.e(6014),n.e(7099),n.e(3647),n.e(5155)]).then(n.bind(n,16786)).then((function(n){return n.ajsDestinations(t,e.integrations,i)}))]:[3,2];case 1:return d=w.sent(),[3,3];case 2:d=[],w.label=3;case 3:return l=d,t.legacyVideoPluginsEnabled?[4,n.e(5649).then(n.bind(n,66352)).then((function(t){return t.loadLegacyVideoPlugins(e)}))]:[3,5];case 4:w.sent(),w.label=5;case 5:return(null===(s=i.plan)||void 0===s?void 0:s.track)?[4,n.e(5649).then(n.bind(n,70527)).then((function(e){var n;return e.schemaFilter(null===(n=i.plan)||void 0===n?void 0:n.track,t)}))]:[3,7];case 6:return h=w.sent(),[3,8];case 7:h=void 0,w.label=8;case 8:return f=h,v=(0,K.o)(t,o),[4,et(t,e.integrations,v,o.obfuscate).catch((function(){return[]}))];case 9:return y=w.sent(),m=(0,r.ev)((0,r.ev)((0,r.ev)([p,$],a,!0),l,!0),y,!0),f&&m.push(f),!1===(null===(u=i.integrations)||void 0===u?void 0:u.All)&&!i.integrations["Segment.io"]||i.integrations&&!1===i.integrations["Segment.io"]||m.push(dt(e,v["Segment.io"],t.integrations)),[4,e.register.apply(e,m)];case 10:return g=w.sent(),Object.entries(null!==(c=t.enabledMiddleware)&&void 0!==c?c:{}).some((function(t){return t[1]}))?[4,n.e(5649).then(n.bind(n,14783)).then((function(n){var i=n.remoteMiddlewares;return(0,r.mG)(b,void 0,void 0,(function(){var n,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,i(g,t,o.obfuscate)];case 1:return n=r.sent(),a=n.map((function(t){return e.addSourceMiddleware(t)})),[2,Promise.all(a)]}}))}))}))]:[3,12];case 11:w.sent(),w.label=12;case 12:return[2,g]}var _}))}))}function xt(t,e,n){var a,s,u,c,l,d;return void 0===e&&(e={}),(0,r.mG)(this,void 0,void 0,(function(){var p,f,h,v,y,m,g,w,_,k;return(0,r.Jh)(this,(function(x){switch(x.label){case 0:return t.cdnURL&&(0,i.UH)(t.cdnURL),null===(a=t.cdnSettings)||void 0===a?[3,1]:(f=a,[3,3]);case 1:return[4,(P=t.writeKey,j=t.cdnURL,I=null!==j&&void 0!==j?j:(0,i.Vl)(),(0,o.Z)("".concat(I,"/v1/projects/").concat(P,"/settings")).then((function(t){return t.json()})).catch((function(t){throw console.warn("Failed to load settings",t),t})))];case 2:f=x.sent(),x.label=3;case 3:return h=null===(u=null===(s=(p=f).integrations["Segment.io"])||void 0===s?void 0:s.retryQueue)||void 0===u||u,v=(0,r.pi)({retryQueue:h},e),y=new Z(t,v),m=null!==(c=t.plugins)&&void 0!==c?c:[],b._.initMetrics(p.metrics),function(t,e){e.push.apply(e,wt()),vt(t,e),ht(t,e)}(y,n),[4,kt(p,y,v,e,m)];case 4:return g=x.sent(),w=null!==(l=window.location.search)&&void 0!==l?l:"",_=null!==(d=window.location.hash)&&void 0!==d?d:"",(k=w.length?w:_.replace(/(?=#).*(?=\?)/,"")).includes("ajs_")?[4,y.queryString(k).catch(console.error)]:[3,6];case 5:x.sent(),x.label=6;case 6:return y.initialized=!0,y.emit("initialize",t,e),e.initialPageview&&y.page().catch(console.error),[4,_t(y,n)];case 7:return x.sent(),[2,[y,g]]}var P,j,I}))}))}var Pt=function(t){function e(e){return t.call(this,e)||this}return(0,r.ZT)(e,t),e.load=function(t,e){return void 0===e&&(e={}),new this((function(n){return xt(t,e,n)}))},e.standalone=function(t,n){return e.load({writeKey:t},n).then((function(t){return t[0]}))},e}(gt)},4802:(t,e,n)=>{"use strict";n.r(e),n.d(e,{form:()=>o,link:()=>i});var r=n(11942);function i(t,e,n,i){var o=this;return t?((t instanceof Element?[t]:"toArray"in t?t.toArray():t).forEach((function(t){t.addEventListener("click",(function(a){var s,u,c=e instanceof Function?e(t):e,l=n instanceof Function?n(t):n,d=t.getAttribute("href")||t.getAttributeNS("http://www.w3.org/1999/xlink","href")||t.getAttribute("xlink:href")||(null===(s=t.getElementsByTagName("a")[0])||void 0===s?void 0:s.getAttribute("href")),p=(0,r.F)(o.track(c,l,null!==i&&void 0!==i?i:{}),null!==(u=o.settings.timeout)&&void 0!==u?u:500);(function(t,e){return!("_blank"!==t.target||!e)})(t,d)||function(t){var e=t;return!!(e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1==e.button)}(a)||d&&(a.preventDefault?a.preventDefault():a.returnValue=!1,p.catch(console.error).then((function(){window.location.href=d})).catch(console.error))}),!1)})),this):this}function o(t,e,n,i){var o=this;return t?(t instanceof HTMLFormElement&&(t=[t]),t.forEach((function(t){if(!(t instanceof Element))throw new TypeError("Must pass HTMLElement to trackForm/trackSubmit.");var a=function(a){var s;a.preventDefault?a.preventDefault():a.returnValue=!1;var u=e instanceof Function?e(t):e,c=n instanceof Function?n(t):n;(0,r.F)(o.track(u,c,null!==i&&void 0!==i?i:{}),null!==(s=o.settings.timeout)&&void 0!==s?s:500).catch(console.error).then((function(){t.submit()})).catch(console.error)},s=window.jQuery||window.Zepto;s?s(t).submit(a):t.addEventListener("submit",a,!1)})),this):this}},11942:(t,e,n)=>{"use strict";n.d(e,{F:()=>i,U:()=>o});var r=n(67289);function i(t,e){return new Promise((function(n,r){var i=setTimeout((function(){r(Error("Promise timed out"))}),e);t.then((function(t){return clearTimeout(i),n(t)})).catch(r)}))}function o(t,e,n,o){var a;return(a=n,new Promise((function(t){return setTimeout(t,a)}))).then((function(){return i(function(){try{return(0,r.O)(e(t))}catch(t){return Promise.reject(t)}}(),null!==o&&void 0!==o?o:1e3)})).catch((function(e){null===t||void 0===t||t.log("warn","Callback Error",{error:e}),null===t||void 0===t||t.stats.increment("callback_error")})).then((function(){return t}))}},65904:(t,e,n)=>{"use strict";n.d(e,{G:()=>i,s:()=>o});var r=n(69699);function i(){return!(0,r.j)()||window.navigator.onLine}function o(){return!i()}},99306:(t,e,n)=>{"use strict";n.d(e,{_:()=>h,Y:()=>f});var r=n(59108),i=n(96475),o=n(3489);const a=function(){function t(){var t=this;this._logs=[],this.log=function(e,n,r){var i=new Date;t._logs.push({level:e,message:n,time:i,extras:r})}}return Object.defineProperty(t.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),t.prototype.flush=function(){if(this.logs.length>1){var t=this._logs.reduce((function(t,e){var n,r,i,a=(0,o.pi)((0,o.pi)({},e),{json:JSON.stringify(e.extras,null," "),extras:e.extras});delete a.time;var s=null!==(i=null===(r=e.time)||void 0===r?void 0:r.toISOString())&&void 0!==i?i:"";return t[s]&&(s="".concat(s,"-").concat(Math.random())),(0,o.pi)((0,o.pi)({},t),((n={})[s]=a,n))}),{});console.table?console.table(t):console.log(t)}else this.logs.forEach((function(t){var e=t.level,n=t.message,r=t.extras;"info"===e||"debug"===e?console.log(n,null!==r&&void 0!==r?r:""):console[e](n,null!==r&&void 0!==r?r:"")}));this._logs=[]},t}();const s=function(){function t(t){this.metrics=[],this.remoteMetrics=t}return t.prototype.increment=function(t,e,n){var r;void 0===e&&(e=1),this.metrics.push({metric:t,value:e,tags:null!==n&&void 0!==n?n:[],type:"counter",timestamp:Date.now()}),null===(r=this.remoteMetrics)||void 0===r||r.increment(t,null!==n&&void 0!==n?n:[])},t.prototype.gauge=function(t,e,n){this.metrics.push({metric:t,value:e,tags:null!==n&&void 0!==n?n:[],type:"gauge",timestamp:Date.now()})},t.prototype.flush=function(){var t=this.metrics.map((function(t){return(0,o.pi)((0,o.pi)({},t),{tags:t.tags.join(",")})}));console.table?console.table(t):console.log(t),this.metrics=[]},t.prototype.serialize=function(){return this.metrics.map((function(t){return{m:t.metric,v:t.value,t:t.tags,k:(e=t.type,{gauge:"g",counter:"c"}[e]),e:t.timestamp};var e}))},t}();var u,c=n(25869),l=n(39821),d=n(10788),p=function(){function t(t){var e,n,r,i,o=this;if(this.host=null!==(e=null===t||void 0===t?void 0:t.host)&&void 0!==e?e:"api.segment.io/v1",this.sampleRate=null!==(n=null===t||void 0===t?void 0:t.sampleRate)&&void 0!==n?n:1,this.flushTimer=null!==(r=null===t||void 0===t?void 0:t.flushTimer)&&void 0!==r?r:3e4,this.maxQueueSize=null!==(i=null===t||void 0===t?void 0:t.maxQueueSize)&&void 0!==i?i:20,this.queue=[],this.sampleRate>0){var a=!1,s=function(){a||(a=!0,o.flush().catch((function(t){console.error(t)})),a=!1,setTimeout(s,o.flushTimer))};s()}}return t.prototype.increment=function(t,e){if(t.includes("analytics_js.")&&0!==e.length&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=e.reduce((function(t,e){var n=e.split(":"),r=n[0],i=n[1];return t[r]=i,t}),{});n.library="analytics.js";var r=(0,d.Bz)();n.library_version="web"===r?"next-".concat(l.i):"npm:next-".concat(l.i),this.queue.push({type:"Counter",metric:t,value:1,tags:n}),t.includes("error")&&this.flush().catch((function(t){return console.error(t)}))}},t.prototype.flush=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t=this;return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch((function(e){console.error(e),t.sampleRate=0}))];case 1:return e.sent(),[2]}}))}))},t.prototype.send=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e,n;return(0,o.Jh)(this,(function(r){return t={series:this.queue},this.queue=[],e={"Content-Type":"text/plain"},n="https://".concat(this.host,"/m"),[2,(0,c.Z)(n,{headers:e,body:JSON.stringify(t),method:"POST"})]}))}))},t}(),f=function(t){var e,n,r;this.retry=null===(e=t.retry)||void 0===e||e,this.type=null!==(n=t.type)&&void 0!==n?n:"plugin Error",this.reason=null!==(r=t.reason)&&void 0!==r?r:""},h=function(){function t(t,e){this.logger=new a,this.cancel=function(t){if(t)throw t;throw new f({reason:"Context Cancel"})},this._attempts=0,this._event=t,this._id=null!==e&&void 0!==e?e:(0,r.v4)(),this.stats=new s(u)}return t.initMetrics=function(t){u=new p(t)},t.system=function(){return new t({type:"track",event:"system"})},t.prototype.isSame=function(t){return t._id===this._id},t.prototype.log=function(t,e,n){this.logger.log(t,e,n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this._event},set:function(t){this._event=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attempts",{get:function(){return this._attempts},set:function(t){this._attempts=t},enumerable:!1,configurable:!0}),t.prototype.updateEvent=function(t,e){var n;if("integrations"===t.split(".")[0]){var r=t.split(".")[1];if(!1===(null===(n=this._event.integrations)||void 0===n?void 0:n[r]))return this._event}return(0,i.N)(this._event,t,e),this._event},t.prototype.logs=function(){return this.logger.logs},t.prototype.flush=function(){this.logger.flush(),this.stats.flush()},t.prototype.toJSON=function(){return{id:this._id,event:this._event,logs:this.logger.logs,metrics:this.stats.metrics}},t}()},74927:(t,e,n)=>{"use strict";n.d(e,{Q:()=>i});var r=n(3489),i=function(){function t(){this.callbacks={}}return t.prototype.on=function(t,e){var n;return this.callbacks[t]=(0,r.ev)((0,r.ev)([],null!==(n=this.callbacks[t])&&void 0!==n?n:[],!0),[e],!1),this},t.prototype.once=function(t,e){var n=this,r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];n.off(t,r),e.apply(n,i)};return this.on(t,r),this},t.prototype.off=function(t,e){var n,r=(null!==(n=this.callbacks[t])&&void 0!==n?n:[]).filter((function(t){return t!==e}));return this.callbacks[t]=r,this},t.prototype.emit=function(t){for(var e,n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(e=this.callbacks[t])&&void 0!==e?e:[];return o.forEach((function(t){t.apply(n,r)})),this},t}()},69699:(t,e,n)=>{"use strict";function r(){return"undefined"!==typeof window}function i(){return!r()}n.d(e,{j:()=>r,s:()=>i})},67475:(t,e,n)=>{"use strict";function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}}n.d(e,{a:()=>r})},53694:(t,e,n)=>{"use strict";function r(t,e){return Object.keys(e).reduce((function(n,r){r.startsWith(t)&&(n[r.substr(t.length)]=e[r]);return n}),{})}n.r(e),n.d(e,{queryString:()=>o});var i=n(67475);function o(t,e){var n=document.createElement("a");n.href=e;var o=n.search.slice(1).split("&").reduce((function(t,e){var n=e.split("="),r=n[0],o=n[1];return t[r]=(0,i.a)(o),t}),{}),a=[],s=o.ajs_uid,u=o.ajs_event;if(o.ajs_aid){var c=Array.isArray(o.ajs_aid)?o.ajs_aid[0]:o.ajs_aid;t.setAnonymousId(c)}if(s){var l=Array.isArray(o.ajs_uid)?o.ajs_uid[0]:o.ajs_uid,d=r("ajs_trait_",o);a.push(t.identify(l,d))}if(u){var p=Array.isArray(o.ajs_event)?o.ajs_event[0]:o.ajs_event,f=r("ajs_prop_",o);a.push(t.track(p,f))}return Promise.all(a)}},56815:(t,e,n)=>{"use strict";n.d(e,{a:()=>o,z:()=>a});var r=n(3489),i=n(99306);function o(t,e){t.log("debug","plugin",{plugin:e.name});var n=(new Date).getTime(),o=e[t.event.type];return void 0===o?Promise.resolve(t):function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:return[2,n.sent()];case 2:return e=n.sent(),[2,Promise.reject(e)];case 3:return[2]}}))}))}((function(){return o.apply(e,[t])})).then((function(t){var r=(new Date).getTime()-n;return t.stats.gauge("plugin_time",r,["plugin:".concat(e.name)]),t})).catch((function(n){if(n instanceof i.Y&&"middleware_cancellation"===n.type)throw n;if(!(n instanceof i.Y))return t.log("error","plugin Error",{plugin:e.name,error:n}),t.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),n;t.log("warn",n.type,{plugin:e.name,error:n})}))}function a(t,e){return o(t,e).then((function(e){return void 0===e||e instanceof Error?(t.log("debug","Context canceled"),t.stats.increment("context_canceled"),void t.cancel(e)):e}))}},78437:(t,e,n)=>{"use strict";n.d(e,{P:()=>i});var r=n(66027);function i(t){var e=function(t){try{return new URL(t)}catch(t){return}}(t);if(e)for(var n=function(t){var e=t.hostname.split("."),n=e[e.length-1],r=[];if(4===e.length&&parseInt(n,10)>0)return r;if(e.length<=1)return r;for(var i=e.length-2;i>=0;--i)r.push(e.slice(i).join("."));return r}(e),i=0;i<n.length;++i){var o=n[i],a={domain:"."+o};try{if(r.Z.set("__tld__","1",a),r.Z.get("__tld__"))return r.Z.remove("__tld__",a),o}catch(t){return}}}},39821:(t,e,n)=>{"use strict";n.d(e,{i:()=>r});var r="1.39.1"},67289:(t,e,n)=>{"use strict";function r(t){return Promise.resolve(t)}n.d(e,{O:()=>r})},18598:(t,e,n)=>{"use strict";function r(t,e){var n,r;return"boolean"===typeof(null===e||void 0===e?void 0:e.enabled)?e.enabled:null===(r=null===(n=null===t||void 0===t?void 0:t.__default)||void 0===n?void 0:n.enabled)||void 0===r||r}n.d(e,{n:()=>r})},66548:(t,e,n)=>{"use strict";function r(t){return Array.prototype.slice.call(window.document.querySelectorAll("script")).find((function(e){return e.src===t}))}function i(t,e){var n=r(t);if(void 0!==n){var i=null===n||void 0===n?void 0:n.getAttribute("status");if("loaded"===i)return Promise.resolve(n);if("loading"===i)return new Promise((function(t,e){n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(t){return e(t)}))}))}return new Promise((function(n,r){var i,o=window.document.createElement("script");o.type="text/javascript",o.src=t,o.async=!0,o.setAttribute("status","loading");for(var a=0,s=Object.entries(null!==e&&void 0!==e?e:{});a<s.length;a++){var u=s[a],c=u[0],l=u[1];o.setAttribute(c,l)}o.onload=function(){o.onerror=o.onload=null,o.setAttribute("status","loaded"),n(o)},o.onerror=function(){o.onerror=o.onload=null,o.setAttribute("status","error"),r(new Error("Failed to load ".concat(t)))};var d=window.document.getElementsByTagName("script")[0];null===(i=d.parentElement)||void 0===i||i.insertBefore(o,d)}))}function o(t){var e=r(t);return void 0!==e&&e.remove(),Promise.resolve()}n.d(e,{t:()=>o,v:()=>i})},913:(t,e,n)=>{"use strict";n.d(e,{o:()=>i});var r=n(3489);function i(t,e){var n,i=Object.entries(null!==(n=e.integrations)&&void 0!==n?n:{}).reduce((function(t,e){var n,i,o=e[0],a=e[1];return"object"===typeof a?(0,r.pi)((0,r.pi)({},t),((n={})[o]=a,n)):(0,r.pi)((0,r.pi)({},t),((i={})[o]={},i))}),{});return Object.entries(t.integrations).reduce((function(t,e){var n,o=e[0],a=e[1];return(0,r.pi)((0,r.pi)({},t),((n={})[o]=(0,r.pi)((0,r.pi)({},a),i[o]),n))}),{})}},56749:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(3489),i=function(t,e){return(0,r.mG)(void 0,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(i){return[2,(n=function(i){return(0,r.mG)(void 0,void 0,void 0,(function(){var o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return t(i)?(o=n,[4,e()]):[3,2];case 1:return[2,o.apply(void 0,[r.sent()])];case 2:return[2]}}))}))})(void 0)]}))}))}},99382:(t,e,n)=>{"use strict";n.d(e,{Kg:()=>s,UH:()=>o,Vl:()=>a});var r,i=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,o=function(t){window.analytics&&(window.analytics._cdn=t),r=t},a=function(){var t,e=null!==r&&void 0!==r?r:null===(t=window.analytics)||void 0===t?void 0:t._cdn;if(e)return e;var n,o=(Array.prototype.slice.call(document.querySelectorAll("script")).forEach((function(t){var e,r=null!==(e=t.getAttribute("src"))&&void 0!==e?e:"",o=i.exec(r);o&&o[1]&&(n=o[1])})),n);return o||"https://cdn.segment.com"},s=function(){var t=a();return"".concat(t,"/next-integrations")}},8213:(t,e,n)=>{"use strict";n.d(e,{M:()=>o,Z:()=>a});var r=n(3489),i=n(74927);var o="onRemoveFromFuture",a=function(t){function e(e,n,r){var i=t.call(this)||this;return i.future=[],i.maxAttempts=e,i.queue=n,i.seen=null!==r&&void 0!==r?r:{},i}return(0,r.ZT)(e,t),e.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map((function(e){return!(t.updateAttempts(e)>t.maxAttempts||t.includes(e))&&(t.queue.push(e),!0)}));return this.queue=this.queue.sort((function(e,n){return t.getAttempts(e)-t.getAttempts(n)})),r},e.prototype.pushWithBackoff=function(t){var e=this;if(0===this.getAttempts(t))return this.push(t)[0];var n=this.updateAttempts(t);if(n>this.maxAttempts||this.includes(t))return!1;var r=function(t){var e=Math.random()+1,n=t.minTimeout,r=void 0===n?500:n,i=t.factor,o=void 0===i?2:i,a=t.attempt,s=t.maxTimeout,u=void 0===s?1/0:s;return Math.min(e*r*Math.pow(o,a),u)}({attempt:n-1});return setTimeout((function(){e.queue.push(t),e.future=e.future.filter((function(e){return e.id!==t.id})),e.emit(o)}),r),this.future.push(t),!0},e.prototype.getAttempts=function(t){var e;return null!==(e=this.seen[t.id])&&void 0!==e?e:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||Boolean(this.queue.find((function(e){return e.id===t.id})))||Boolean(this.future.find((function(e){return e.id===t.id})))},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}(i.Q)},65976:(t,e,n)=>{"use strict";n.d(e,{$:()=>p});var r=n(3489),i=n(8213),o=n(99306),a=n(69699),s={getItem:function(){},setItem:function(){},removeItem:function(){}};try{s=(0,a.j)()&&window.localStorage?window.localStorage:s}catch(t){console.warn("Unable to access localStorage",t)}function u(t){var e=s.getItem(t);return(e?JSON.parse(e):[]).map((function(t){return new o._(t.event,t.id)}))}function c(t){var e=s.getItem(t);return e?JSON.parse(e):{}}function l(t){s.removeItem(t)}function d(t,e,n){void 0===n&&(n=0);var r="persisted-queue:v1:".concat(t,":lock"),i=s.getItem(r),o=i?JSON.parse(i):null,a=null===o||function(t){return(new Date).getTime()>t}(o);if(a)return s.setItem(r,JSON.stringify((new Date).getTime()+50)),e(),void s.removeItem(r);!a&&n<3?setTimeout((function(){d(t,e,n+1)}),50):console.error("Unable to retrieve lock")}var p=function(t){function e(e,n){var i=t.call(this,e,[])||this,o="persisted-queue:v1:".concat(n,":items"),a="persisted-queue:v1:".concat(n,":seen"),p=[],f={};return d(n,(function(){try{p=u(o),f=c(a),l(o),l(a),i.queue=(0,r.ev)((0,r.ev)([],p,!0),i.queue,!0),i.seen=(0,r.pi)((0,r.pi)({},f),i.seen)}catch(t){console.error(t)}})),window.addEventListener("beforeunload",(function(){if(i.todo>0){var t=(0,r.ev)((0,r.ev)([],i.queue,!0),i.future,!0);try{d(n,(function(){!function(t,e){var n=u(t),i=(0,r.ev)((0,r.ev)([],e,!0),n,!0).reduce((function(t,e){var n;return(0,r.pi)((0,r.pi)({},t),((n={})[e.id]=e,n))}),{});s.setItem(t,JSON.stringify(Object.values(i)))}(o,t),function(t,e){var n=c(t);s.setItem(t,JSON.stringify((0,r.pi)((0,r.pi)({},n),e)))}(a,i.seen)}))}catch(t){console.error(t)}}})),i}return(0,r.ZT)(e,t),e}(i.Z)},23888:(t,e,n)=>{"use strict";n.d(e,{D:()=>i});var r=n(49969);function i(t,e){var n=new r.Facade(t,e);return"track"===t.type&&(n=new r.Track(t,e)),"identify"===t.type&&(n=new r.Identify(t,e)),"page"===t.type&&(n=new r.Page(t,e)),"alias"===t.type&&(n=new r.Alias(t,e)),"group"===t.type&&(n=new r.Group(t,e)),"screen"===t.type&&(n=new r.Screen(t,e)),Object.defineProperty(n,"obj",{value:t,writable:!0}),n}},16786:(t,e,n)=>{"use strict";n.r(e),n.d(e,{LegacyDestination:()=>x,ajsDestinations:()=>P});var r=n(3489),i=n(49969),o=n(65904),a=n(99306),s=n(69699),u=n(56815),c=n(67289),l=n(18598),d=n(913),p=n(56749),f=n(8213),h=n(65976),v=n(66170),y=n(35130),m=n(99382),g=n(66548);function b(t){return t.toLowerCase().replace(".","").replace(/\s+/g,"-")}function w(t,e){return void 0===e&&(e=!1),e?btoa(t).replace(/=/g,""):void 0}function _(t,e,n,i,o,a){return(0,r.mG)(this,void 0,void 0,(function(){var s,u,c,l,d,p,f,h;return(0,r.Jh)(this,(function(v){switch(v.label){case 0:s=b(n),u=w(s,a),c=(0,m.Kg)(),l="".concat(c,"/integrations/").concat(null!==u&&void 0!==u?u:s,"/").concat(i,"/").concat(null!==u&&void 0!==u?u:s,".dynamic.js.gz"),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,(0,g.v)(l)];case 2:return v.sent(),function(t,e,n){var i,o;try{var a=(null!==(o=null===(i=null===window||void 0===window?void 0:window.performance)||void 0===i?void 0:i.getEntriesByName(t,"resource"))&&void 0!==o?o:[])[0];a&&e.stats.gauge("legacy_destination_time",Math.round(a.duration),(0,r.ev)([n],a.duration<100?["cached"]:[],!0))}catch(t){}}(l,t,n),[3,4];case 3:throw d=v.sent(),t.stats.gauge("legacy_destination_time",-1,["plugin:".concat(n),"failed"]),d;case 4:return p=window["".concat(s,"Deps")],[4,Promise.all(p.map((function(t){return(0,g.v)(c+t+".gz")})))];case 5:return v.sent(),window["".concat(s,"Loader")](),(f=window["".concat(s,"Integration")]).Integration&&(f({user:function(){return e.user()},addIntegration:function(){}}),f=f.Integration),(h=new f(o)).analytics=e,[2,h]}}))}))}function k(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(s){switch(s.label){case 0:return n=[],(0,o.s)()?[2,e]:[4,(0,p.x)((function(){return e.length>0&&(0,o.G)()}),(function(){return(0,r.mG)(i,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(i=e.pop())?[4,(0,u.a)(i,t)]:[2];case 1:return o=r.sent(),o instanceof a._||n.push(i),[2]}}))}))}))];case 1:return s.sent(),n.map((function(t){return e.pushWithBackoff(t)})),[2,e]}}))}))}var x=function(){function t(t,e,n,i){void 0===n&&(n={}),this.options={},this.type="destination",this.middleware=[],this._ready=!1,this._initialized=!1,this.flushing=!1,this.name=t,this.version=e,this.settings=(0,r.pi)({},n),this.settings.type&&"browser"===this.settings.type&&delete this.settings.type,this.options=i,this.buffer=i.disableClientPersistence?new f.Z(4,[]):new h.$(4,"dest-".concat(t)),this.scheduleFlush()}return t.prototype.isLoaded=function(){return this._ready},t.prototype.ready=function(){var t;return null!==(t=this.onReady)&&void 0!==t?t:Promise.resolve()},t.prototype.load=function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this._ready||void 0!==this.onReady?[2]:(n=this,[4,_(t,e,this.name,this.version,this.settings,this.options.obfuscate)]);case 1:n.integration=r.sent(),this.onReady=new Promise((function(t){i.integration.once("ready",(function(){i._ready=!0,t(!0)}))})),this.onInitialize=new Promise((function(t){i.integration.on("initialize",(function(){i._initialized=!0,t(!0)}))}));try{t.stats.increment("analytics_js.integration.invoke",1,["method:initialize","integration_name:".concat(this.name)]),this.integration.initialize()}catch(e){throw t.stats.increment("analytics_js.integration.invoke.error",1,["method:initialize","integration_name:".concat(this.name)]),e}return[2]}}))}))},t.prototype.unload=function(t,e){return function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,a,s;return(0,r.Jh)(this,(function(r){return i=(0,m.Kg)(),o=b(t),a=w(t,n),s="".concat(i,"/integrations/").concat(null!==a&&void 0!==a?a:o,"/").concat(e,"/").concat(null!==a&&void 0!==a?a:o,".dynamic.js.gz"),[2,(0,g.t)(s)]}))}))}(this.name,this.version,this.options.obfuscate)},t.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.middleware=(t=this.middleware).concat.apply(t,e)},t.prototype.shouldBuffer=function(t){return"page"!==t.event.type&&((0,o.s)()||!1===this._ready||!1===this._initialized)},t.prototype.send=function(t,e,n){var i,o;return(0,r.mG)(this,void 0,void 0,(function(){var s,u,d,p,f,h;return(0,r.Jh)(this,(function(y){switch(y.label){case 0:if(this.shouldBuffer(t))return this.buffer.push(t),this.scheduleFlush(),[2,t];if(s=null===(o=null===(i=this.options)||void 0===i?void 0:i.plan)||void 0===o?void 0:o.track,u=t.event.event,s&&u&&"Segment.io"!==this.name){if(d=s[u],!(0,l.n)(s,d))return t.updateEvent("integrations",(0,r.pi)((0,r.pi)({},t.event.integrations),{All:!1,"Segment.io":!0})),t.cancel(new a.Y({retry:!1,reason:"Event ".concat(u," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"})),[2,t];if(t.updateEvent("integrations",(0,r.pi)((0,r.pi)({},t.event.integrations),null===d||void 0===d?void 0:d.integrations)),(null===d||void 0===d?void 0:d.enabled)&&!1===(null===d||void 0===d?void 0:d.integrations[this.name]))return t.cancel(new a.Y({retry:!1,reason:"Event ".concat(u," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"})),[2,t]}return[4,(0,v.applyDestinationMiddleware)(this.name,(m=t.event,JSON.parse(JSON.stringify(m))),this.middleware)];case 1:if(null===(p=y.sent()))return[2,t];f=new e(p,{}),t.stats.increment("analytics_js.integration.invoke",1,["method:".concat(n),"integration_name:".concat(this.name)]),y.label=2;case 2:return y.trys.push([2,5,,6]),this.integration?[4,(0,c.O)(this.integration.invoke.call(this.integration,n,f))]:[3,4];case 3:y.sent(),y.label=4;case 4:return[3,6];case 5:throw h=y.sent(),t.stats.increment("analytics_js.integration.invoke.error",1,["method:".concat(n),"integration_name:".concat(this.name)]),h;case 6:return[2,t]}var m}))}))},t.prototype.track=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return[2,this.send(t,i.Track,"track")]}))}))},t.prototype.page=function(t){var e;return(0,r.mG)(this,void 0,void 0,(function(){var n=this;return(0,r.Jh)(this,(function(r){return(null===(e=this.integration)||void 0===e?void 0:e._assumesPageview)&&!this._initialized&&this.integration.initialize(),[2,this.onInitialize.then((function(){return n.send(t,i.Page,"page")}))]}))}))},t.prototype.identify=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return[2,this.send(t,i.Identify,"identify")]}))}))},t.prototype.alias=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return[2,this.send(t,i.Alias,"alias")]}))}))},t.prototype.group=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return[2,this.send(t,i.Group,"group")]}))}))},t.prototype.scheduleFlush=function(){var t=this;this.flushing||setTimeout((function(){return(0,r.mG)(t,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return this.flushing=!0,t=this,[4,k(this,this.buffer)];case 1:return t.buffer=e.sent(),this.flushing=!1,this.buffer.todo>0&&this.scheduleFlush(),[2]}}))}))}),5e3*Math.random())},t}();function P(t,e,n){var r,i;if(void 0===e&&(e={}),void 0===n&&(n={}),(0,s.s)())return[];t.plan&&((n=null!==n&&void 0!==n?n:{}).plan=t.plan);var o,a=null!==(i=null===(r=t.middlewareSettings)||void 0===r?void 0:r.routingRules)&&void 0!==i?i:[],u=(o=a,function(t){var e=t.payload,n=t.integration,r=t.next;new y.Store(o).getRulesByDestinationName(n).forEach((function(t){for(var n=t.matchers,i=t.transformers,o=0;o<n.length;o++)if(y.matches(e.obj,n[o])&&(e.obj=y.transform(e.obj,i[o]),null===e.obj))return r(null)})),r(e)}),c=(0,d.o)(t,null!==n&&void 0!==n?n:{});return Object.entries(t.integrations).map((function(t){var r,i=t[0],o=t[1];if(!i.startsWith("Segment")){var s=!1===e.All&&void 0===e[i];if(!1!==e[i]&&!s){var l=o.type,d=o.bundlingStatus,p=o.versionSettings;if(("unbundled"!==d&&("browser"===l||(null===(r=null===p||void 0===p?void 0:p.componentTypes)||void 0===r?void 0:r.includes("browser")))||"Segment.io"===i)&&"Iterable"!==i){var f=function(t){var e,n,r,i;return null!==(i=null!==(n=null===(e=t.versionSettings)||void 0===e?void 0:e.override)&&void 0!==n?n:null===(r=t.versionSettings)||void 0===r?void 0:r.version)&&void 0!==i?i:"latest"}(o),h=new x(i,f,c[i],n);return a.filter((function(t){return t.destinationName===i})).length>0&&h.addMiddleware(u),h}}}})).filter((function(t){return void 0!==t}))}},66352:(t,e,n)=>{"use strict";n.r(e),n.d(e,{loadLegacyVideoPlugins:()=>i});var r=n(3489);function i(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,n.e(5649).then(n.t.bind(n,64572,23))];case 1:return e=r.sent(),t._plugins=e,[2]}}))}))}},66170:(t,e,n)=>{"use strict";n.r(e),n.d(e,{applyDestinationMiddleware:()=>s,sourceMiddlewarePlugin:()=>u});var r=n(3489),i=n(99306),o=n(67289),a=n(23888);function s(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){function i(e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,s,u;return(0,r.Jh)(this,(function(c){switch(c.label){case 0:return i=!1,s=null,[4,(0,o.O)(n({payload:(0,a.D)(e,{clone:!0,traverse:!1}),integration:t,next:function(t){i=!0,null===t&&(s=null),t&&(s=t.obj)}}))];case 1:return c.sent(),i||null===s||((s=s).integrations=(0,r.pi)((0,r.pi)({},e.integrations),((u={})[t]=!1,u))),[2,s]}}))}))}var s,u,c,l;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:s=0,u=n,t.label=1;case 1:return s<u.length?(c=u[s],[4,i(e,c)]):[3,4];case 2:if(null===(l=t.sent()))return[2,null];e=l,t.label=3;case 3:return s++,[3,1];case 4:return[2,e]}}))}))}function u(t,e){function n(n){return(0,r.mG)(this,void 0,void 0,(function(){var s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return s=!1,[4,(0,o.O)(t({payload:(0,a.D)(n.event,{clone:!0,traverse:!1}),integrations:null!==e&&void 0!==e?e:{},next:function(t){s=!0,t&&(n.event=t.obj)}}))];case 1:if(r.sent(),!s)throw new i.Y({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}}))}))}return{name:"Source Middleware ".concat(t.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(t){return Promise.resolve(t)},track:n,page:n,identify:n,alias:n,group:n}}},14783:(t,e,n)=>{"use strict";n.r(e),n.d(e,{remoteMiddlewares:()=>s});var r=n(3489),i=n(69699),o=n(66548),a=n(99382);function s(t,e,n){var s;return(0,r.mG)(this,void 0,void 0,(function(){var u,c,l,d,p=this;return(0,r.Jh)(this,(function(f){switch(f.label){case 0:return(0,i.s)()?[2,[]]:(u=(0,a.Kg)(),c=null!==(s=e.enabledMiddleware)&&void 0!==s?s:{},l=Object.entries(c).filter((function(t){t[0];return t[1]})).map((function(t){return t[0]})),d=l.map((function(e){return(0,r.mG)(p,void 0,void 0,(function(){var i,a,s,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=e.replace("@segment/",""),a=i,n&&(a=btoa(i).replace(/=/g,"")),s="".concat(u,"/middleware/").concat(a,"/latest/").concat(a,".js.gz"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,o.v)(s)];case 2:return r.sent(),[2,window["".concat(i,"Middleware")]];case 3:return c=r.sent(),t.log("error",c),t.stats.increment("failed_remote_middleware"),[3,4];case 4:return[2]}}))}))})),[4,Promise.all(d)]);case 1:return[2,f.sent().filter(Boolean)]}}))}))}},70527:(t,e,n)=>{"use strict";n.r(e),n.d(e,{schemaFilter:()=>o});var r=n(3489),i=n(18598);function o(t,e){function n(n){var o=t,a=n.event.event;if(o&&a){var s=o[a];if(!(0,i.n)(o,s))return n.updateEvent("integrations",(0,r.pi)((0,r.pi)({},n.event.integrations),{All:!1,"Segment.io":!0})),n;var u=function(t,e){var n,r;if(!t||!Object.keys(t))return{};var i=Object.keys(t.integrations).filter((function(e){return!1===t.integrations[e]})),o=[];return(null!==(n=e.remotePlugins)&&void 0!==n?n:[]).forEach((function(t){i.forEach((function(e){(t.name.includes(e)||e.includes(t.name))&&o.push(t.name)}))})),(null!==(r=e.remotePlugins)&&void 0!==r?r:[]).reduce((function(t,e){return e.settings.subscriptions&&o.includes(e.name)&&e.settings.subscriptions.forEach((function(n){return t["".concat(e.name," ").concat(n.partnerAction)]=!1})),t}),{})}(s,e);n.updateEvent("integrations",(0,r.pi)((0,r.pi)((0,r.pi)({},n.event.integrations),null===s||void 0===s?void 0:s.integrations),u))}return n}return{name:"Schema Filter",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},type:"before",page:n,alias:n,track:n,identify:n,group:n}}},10788:(t,e,n)=>{"use strict";n.d(e,{Bz:()=>l,Fv:()=>p});var r,i=n(3489),o=n(66027),a=n(67475),s=n(78437),u=n(39821);var c="npm";function l(){return c}function d(t,e,n){var a=o.Z.get("s:context.referrer"),u=function(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1));for(var n=0,r=(t=t.replace(/\?/g,"&")).split("&");n<r.length;n++){var i=r[n].split("="),o=i[0],a=i[1];if(e[o])return{id:a,type:e[o]}}}(t);a=a?JSON.parse(a):void 0,(u=null!==u&&void 0!==u?u:a)&&(e&&(e.referrer=(0,i.pi)((0,i.pi)({},e.referrer),u)),n||o.Z.set("s:context.referrer",JSON.stringify(u),function(){if(r)return r;var t=(0,s.P)(window.location.href);return r={expires:31536e6,secure:!1,path:"/"},t&&(r.domain=t),r}()))}function p(t,e,n,r){var s,c,p,f,h=t.user(),v=window.location.search;e.context=null!==(c=null!==(s=e.context)&&void 0!==s?s:e.options)&&void 0!==c?c:{};var y=e.context,m=e.anonymousId;delete e.options,e.writeKey=null===n||void 0===n?void 0:n.apiKey,y.userAgent=window.navigator.userAgent;var g=navigator.userLanguage||navigator.language;if("undefined"===typeof y.locale&&"undefined"!==typeof g&&(y.locale=g),!y.library){var b=l();y.library="web"===b?{name:"analytics.js",version:"next-".concat(u.i)}:{name:"analytics.js",version:"npm:next-".concat(u.i)}}v&&!y.campaign&&(y.campaign=function(t){return t.startsWith("?")&&(t=t.substring(1)),(t=t.replace(/\?/g,"&")).split("&").reduce((function(t,e){var n=e.split("="),r=n[0],i=n[1],o=void 0===i?"":i;if(r.includes("utm_")&&r.length>4){var s=r.substr(4);"campaign"===s&&(s="name"),t[s]=(0,a.a)(o)}return t}),{})}(v)),d(v,y,null!==(p=t.options.disableClientPersistence)&&void 0!==p&&p),e.userId=e.userId||h.id(),e.anonymousId=h.anonymousId(m),e.sentAt=new Date;var w=t.queue.failedInitializations||[];w.length>0&&(e._metadata={failedInitializations:w});var _=[],k=[];for(var x in r){var P=r[x];"Segment.io"===x&&_.push(x),"bundled"===P.bundlingStatus&&_.push(x),"unbundled"===P.bundlingStatus&&k.push(x)}for(var j=0,I=(null===n||void 0===n?void 0:n.unbundledIntegrations)||[];j<I.length;j++){var S=I[j];k.includes(S)||k.push(S)}var O=null!==(f=null===n||void 0===n?void 0:n.maybeBundledConfigIds)&&void 0!==f?f:{},M=[];_.sort().forEach((function(t){var e;(null!==(e=O[t])&&void 0!==e?e:[]).forEach((function(t){M.push(t)}))})),!1!==(null===n||void 0===n?void 0:n.addBundledMetadata)&&(e._metadata=(0,i.pi)((0,i.pi)({},e._metadata),{bundled:_.sort(),unbundled:k.sort(),bundledIds:M}));var E=function(){var t=o.Z.get("_ga");if(t&&t.startsWith("amp"))return t}();return E&&(y.amp={id:E}),e}},3489:(t,e,n)=>{"use strict";n.d(e,{Jh:()=>u,ZT:()=>i,_T:()=>a,ev:()=>c,mG:()=>s,pi:()=>o});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function c(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},64572:t=>{window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";n.r(e);var r="function"==typeof fetch?fetch.bind():function(t,e){return e=e||{},new Promise((function(n,r){var i=new XMLHttpRequest;for(var o in i.open(e.method||"get",t,!0),e.headers)i.setRequestHeader(o,e.headers[o]);function a(){var t,e=[],n=[],r={};return i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(i,o,a){e.push(o=o.toLowerCase()),n.push([o,a]),t=r[o],r[o]=t?t+","+a:a})),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:a,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return e},entries:function(){return n},get:function(t){return r[t.toLowerCase()]},has:function(t){return t.toLowerCase()in r}}}}i.withCredentials="include"==e.credentials,i.onload=function(){n(a())},i.onerror=r,i.send(e.body)}))};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pluginName=e}return r(t,[{key:"track",value:function(t,e){window.analytics.track(t,e,{integration:{name:this.pluginName}})}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.YouTubeAnalytics=e.VimeoAnalytics=void 0;var r=o(n(3)),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}e.VimeoAnalytics=r.default,e.YouTubeAnalytics=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"VimeoAnalytics"));return r.authToken=n,r.player=t,r.metadata={content:{},playback:{videoPlayer:"Vimeo"}},r.mostRecentHeartbeat=0,r.isPaused=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"initialize",value:function(){var t=this,e={loaded:this.retrieveMetadata,play:this.trackPlay,pause:this.trackPause,ended:this.trackEnded,timeupdate:this.trackHeartbeat};for(var n in e)this.registerHandler(n,e[n]);this.player.getVideoId().then((function(e){t.retrieveMetadata({id:e})})).catch(console.error)}},{key:"registerHandler",value:function(t,e){var n=this;this.player.on(t,(function(t){n.updateMetadata(t),e.call(n,t)}))}},{key:"trackPlay",value:function(){this.isPaused?(this.track("Video Playback Resumed",this.metadata.playback),this.isPaused=!1):(this.track("Video Playback Started",this.metadata.playback),this.track("Video Content Started",this.metadata.content))}},{key:"trackEnded",value:function(){this.track("Video Playback Completed",this.metadata.playback),this.track("Video Content Completed",this.metadata.content)}},{key:"trackHeartbeat",value:function(){var t=this.mostRecentHeartbeat,e=this.metadata.playback.position;e!==t&&e-t>=10&&(this.track("Video Content Playing",this.metadata.content),this.mostRecentHeartbeat=Math.floor(e))}},{key:"trackPause",value:function(){this.isPaused=!0,this.track("Video Playback Paused",this.metadata.playback)}},{key:"retrieveMetadata",value:function(t){var e=this;return new Promise((function(n,r){var o=t.id;(0,i.default)("https://api.vimeo.com/videos/"+o,{headers:{Authorization:"Bearer "+e.authToken}}).then((function(t){return t.ok?t.json():r(t)})).then((function(t){e.metadata.content.title=t.name,e.metadata.content.description=t.description,e.metadata.content.publisher=t.user.name,e.metadata.playback.position=0,e.metadata.playback.totalLength=t.duration})).catch((function(t){return console.error("Request to Vimeo API Failed with: ",t),r(t)}))}))}},{key:"updateMetadata",value:function(t){var e=this;return new Promise((function(n,r){e.player.getVolume().then((function(r){r&&(e.metadata.playback.sound=100*r),e.metadata.playback.position=t.seconds,n()})).catch(r)}))}}]),e}(o(n(1)).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"YoutubeAnalytics"));return r.player=t,r.apiKey=n,r.playerLoaded=!1,r.playbackStarted=!1,r.contentStarted=!1,r.isPaused=!1,r.isBuffering=!1,r.isSeeking=!1,r.lastRecordedTime={timeReported:Date.now(),timeElapsed:0},r.metadata=[{playback:{video_player:"youtube"},content:{}}],r.playlistIndex=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"initialize",value:function(){window.segmentYoutubeOnStateChange=this.onPlayerStateChange.bind(this),window.segmentYoutubeOnReady=this.onPlayerReady.bind(this),this.player.addEventListener("onReady","segmentYoutubeOnReady"),this.player.addEventListener("onStateChange","segmentYoutubeOnStateChange")}},{key:"onPlayerReady",value:function(t){this.retrieveMetadata()}},{key:"onPlayerStateChange",value:function(t){var e=this.player.getCurrentTime();switch(this.metadata[this.playlistIndex]&&(this.metadata[this.playlistIndex].playback.position=this.metadata[this.playlistIndex].content.position=e,this.metadata[this.playlistIndex].playback.quality=this.player.getPlaybackQuality(),this.metadata[this.playlistIndex].playback.sound=this.player.isMuted()?0:this.player.getVolume()),t.data){case-1:if(this.playerLoaded)break;this.retrieveMetadata(),this.playerLoaded=!0;break;case YT.PlayerState.BUFFERING:this.handleBuffer();break;case YT.PlayerState.PLAYING:this.handlePlay();break;case YT.PlayerState.PAUSED:this.handlePause();break;case YT.PlayerState.ENDED:this.handleEnd()}this.lastRecordedTime={timeReported:Date.now(),timeElapsed:1e3*this.player.getCurrentTime()}}},{key:"retrieveMetadata",value:function(){var t=this;return new Promise((function(e,n){var r=t.player.getVideoData(),o=t.player.getPlaylist()||[r.video_id],a=o.join();(0,i.default)("https://www.googleapis.com/youtube/v3/videos?id="+a+"&part=snippet,contentDetails&key="+t.apiKey).then((function(t){if(!t.ok){var e=new Error("Segment request to Youtube API failed (likely due to a bad API Key. Events will still be sent but will not contain video metadata)");throw e.response=t,e}return t.json()})).then((function(n){t.metadata=[];for(var r=0,i=0;i<o.length;i++){var a=n.items[i];t.metadata.push({content:{title:a.snippet.title,description:a.snippet.description,keywords:a.snippet.tags,channel:a.snippet.channelTitle,airdate:a.snippet.publishedAt}}),r+=s(a.contentDetails.duration)}for(i=0;i<o.length;i++)t.metadata[i].playback={total_length:r,video_player:"youtube"};e()})).catch((function(e){t.metadata=o.map((function(t){return{playback:{video_player:"youtube"},content:{}}})),n(e)}))}))}},{key:"handleBuffer",value:function(){var t=this.determineSeek();this.playbackStarted||(this.playbackStarted=!0,this.track("Video Playback Started",this.metadata[this.playlistIndex].playback)),t&&!this.isSeeking&&(this.isSeeking=!0,this.track("Video Playback Seek Started",this.metadata[this.playlistIndex].playback)),this.isSeeking&&(this.track("Video Playback Seek Completed",this.metadata[this.playlistIndex].playback),this.isSeeking=!1);var e=this.player.getPlaylist();e&&0===this.player.getCurrentTime()&&this.player.getPlaylistIndex()!==this.playlistIndex&&(this.contentStarted=!1,this.playlistIndex===e.length-1&&0===this.player.getPlaylistIndex()&&(this.track("Video Playback Completed",this.metadata[this.player.getPlaylistIndex()].playback),this.track("Video Playback Started",this.metadata[this.player.getPlaylistIndex()].playback))),this.track("Video Playback Buffer Started",this.metadata[this.playlistIndex].playback),this.isBuffering=!0}},{key:"handlePlay",value:function(){this.contentStarted||(this.playlistIndex=this.player.getPlaylistIndex(),-1===this.playlistIndex&&(this.playlistIndex=0),this.track("Video Content Started",this.metadata[this.playlistIndex].content),this.contentStarted=!0),this.isBuffering&&(this.track("Video Playback Buffer Completed",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused&&(this.track("Video Playback Resumed",this.metadata[this.playlistIndex].playback),this.isPaused=!1)}},{key:"handlePause",value:function(){var t=this.determineSeek();this.isBuffering&&(this.track("Video Playback Buffer Completed",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused||(t?(this.track("Video Playback Seek Started",this.metadata[this.playlistIndex].playback),this.isSeeking=!0):(this.track("Video Playback Paused",this.metadata[this.playlistIndex].playback),this.isPaused=!0))}},{key:"handleEnd",value:function(){this.track("Video Content Completed",this.metadata[this.playlistIndex].content),this.contentStarted=!1;var t=this.player.getPlaylistIndex(),e=this.player.getPlaylist();(e&&t===e.length-1||-1===t)&&(this.track("Video Playback Completed",this.metadata[this.playlistIndex].playback),this.playbackStarted=!1)}},{key:"determineSeek",value:function(){var t=this.isPaused||this.isBuffering?0:Date.now()-this.lastRecordedTime.timeReported,e=1e3*this.player.getCurrentTime()-this.lastRecordedTime.timeElapsed;return Math.abs(t-e)>2e3}}]),e}(o(n(1)).default);function s(t){var e=t.match(/PT(\d+H)?(\d+M)?(\d+S)?/);return e=e.slice(1).map((function(t){if(null!=t)return t.replace(/\D/,"")})),3600*(parseInt(e[0])||0)+60*(parseInt(e[1])||0)+(parseInt(e[2])||0)}e.default=a}])},16025:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(53410));function o(t,e){return function(){var n=this.traits(),r=this.properties?this.properties():{};return i.default(n,"address."+t)||i.default(n,t)||(e?i.default(n,"address."+e):null)||(e?i.default(n,e):null)||i.default(r,"address."+t)||i.default(r,t)||(e?i.default(r,"address."+e):null)||(e?i.default(r,e):null)}}e.default=function(t){t.zip=o("postalCode","zip"),t.country=o("country"),t.street=o("street"),t.state=o("state"),t.city=o("city"),t.region=o("region")}},36576:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Alias=void 0;var i=r(n(35717)),o=n(40747);function a(t,e){o.Facade.call(this,t,e)}e.Alias=a,i.default(a,o.Facade),a.prototype.action=function(){return"alias"},a.prototype.type=a.prototype.action,a.prototype.previousId=function(){return this.field("previousId")||this.field("from")},a.prototype.from=a.prototype.previousId,a.prototype.userId=function(){return this.field("userId")||this.field("to")},a.prototype.to=a.prototype.userId},83948:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clone=void 0,e.clone=function t(e){if("[object Object]"===Object.prototype.toString.call(e)){var n={};for(var r in e)n[r]=t(e[r]);return n}return Array.isArray(e)?e.map(t):e}},85655:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=void 0;var i=r(n(35717)),o=n(40747);function a(t,e){o.Facade.call(this,t,e)}e.Delete=a,i.default(a,o.Facade),a.prototype.type=function(){return"delete"}},40747:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Facade=void 0;var i=r(n(16025)),o=n(83948),a=r(n(2530)),s=r(n(18013)),u=r(n(53410)),c=r(n(28595));function l(t,e){e=e||{},this.raw=o.clone(t),"clone"in e||(e.clone=!0),e.clone&&(t=o.clone(t)),"traverse"in e||(e.traverse=!0),t.timestamp="timestamp"in t?s.default(t.timestamp):new Date,e.traverse&&c.default(t),this.opts=e,this.obj=t}e.Facade=l;var d=l.prototype;function p(t){return o.clone(t)}d.proxy=function(t){var e=t.split("."),n=this[t=e.shift()]||this.field(t);return n?("function"===typeof n&&(n=n.call(this)||{}),0===e.length||(n=u.default(n,e.join("."))),this.opts.clone?p(n):n):n},d.field=function(t){var e=this.obj[t];return this.opts.clone?p(e):e},l.proxy=function(t){return function(){return this.proxy(t)}},l.field=function(t){return function(){return this.field(t)}},l.multi=function(t){return function(){var e=this.proxy(t+"s");if(Array.isArray(e))return e;var n=this.proxy(t);return n&&(n=[this.opts.clone?o.clone(n):n]),n||[]}},l.one=function(t){return function(){var e=this.proxy(t);if(e)return e;var n=this.proxy(t+"s");return Array.isArray(n)?n[0]:void 0}},d.json=function(){var t=this.opts.clone?o.clone(this.obj):this.obj;return this.type&&(t.type=this.type()),t},d.rawEvent=function(){return this.raw},d.options=function(t){var e=this.obj.options||this.obj.context||{},n=this.opts.clone?o.clone(e):e;if(!t)return n;if(this.enabled(t)){var r=this.integrations(),i=r[t]||u.default(r,t);return"object"!==typeof i&&(i=u.default(this.options(),t)),"object"===typeof i?i:{}}},d.context=d.options,d.enabled=function(t){var e=this.proxy("options.providers.all");"boolean"!==typeof e&&(e=this.proxy("options.all")),"boolean"!==typeof e&&(e=this.proxy("integrations.all")),"boolean"!==typeof e&&(e=!0);var n=e&&a.default(t),r=this.integrations();if(r.providers&&r.providers.hasOwnProperty(t)&&(n=r.providers[t]),r.hasOwnProperty(t)){var i=r[t];n="boolean"!==typeof i||i}return!!n},d.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},d.active=function(){var t=this.proxy("options.active");return null!==t&&void 0!==t||(t=!0),t},d.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},d.sessionId=d.anonymousId,d.groupId=l.proxy("options.groupId"),d.traits=function(t){var e=this.proxy("options.traits")||{},n=this.userId();for(var r in t=t||{},n&&(e.id=n),t){var i=null==this[r]?this.proxy("options.traits."+r):this[r]();null!=i&&(e[t[r]]=i,delete e[r])}return e},d.library=function(){var t=this.proxy("options.library");return t?"string"===typeof t?{name:t,version:null}:t:{name:"unknown",version:null}},d.device=function(){var t=this.proxy("context.device");"object"===typeof t&&null!==t||(t={});var e=this.library().name;return t.type||(e.indexOf("ios")>-1&&(t.type="ios"),e.indexOf("android")>-1&&(t.type="android")),t},d.userAgent=l.proxy("context.userAgent"),d.timezone=l.proxy("context.timezone"),d.timestamp=l.field("timestamp"),d.channel=l.field("channel"),d.ip=l.proxy("context.ip"),d.userId=l.field("userId"),i.default(d)},63789:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var i=r(n(35717)),o=r(n(66243)),a=r(n(18013)),s=n(40747);function u(t,e){s.Facade.call(this,t,e)}e.Group=u,i.default(u,s.Facade);var c=u.prototype;c.action=function(){return"group"},c.type=c.action,c.groupId=s.Facade.field("groupId"),c.created=function(){var t=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(t)return a.default(t)},c.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.groupId();return o.default(e)?e:void 0},c.traits=function(t){var e=this.properties(),n=this.groupId();for(var r in t=t||{},n&&(e.id=n),t){var i=null==this[r]?this.proxy("traits."+r):this[r]();null!=i&&(e[t[r]]=i,delete e[r])}return e},c.name=s.Facade.proxy("traits.name"),c.industry=s.Facade.proxy("traits.industry"),c.employees=s.Facade.proxy("traits.employees"),c.properties=function(){return this.field("traits")||this.field("properties")||{}}},98649:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Identify=void 0;var i=n(40747),o=r(n(53410)),a=r(n(35717)),s=r(n(66243)),u=r(n(18013)),c=function(t){return t.trim()};function l(t,e){i.Facade.call(this,t,e)}e.Identify=l,a.default(l,i.Facade);var d=l.prototype;d.action=function(){return"identify"},d.type=d.action,d.traits=function(t){var e=this.field("traits")||{},n=this.userId();for(var r in t=t||{},n&&(e.id=n),t){var i=null==this[r]?this.proxy("traits."+r):this[r]();null!=i&&(e[t[r]]=i,r!==t[r]&&delete e[r])}return e},d.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.userId();return s.default(e)?e:void 0},d.created=function(){var t=this.proxy("traits.created")||this.proxy("traits.createdAt");if(t)return u.default(t)},d.companyCreated=function(){var t=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(t)return u.default(t)},d.companyName=function(){return this.proxy("traits.company.name")},d.name=function(){var t=this.proxy("traits.name");if("string"===typeof t)return c(t);var e=this.firstName(),n=this.lastName();return e&&n?c(e+" "+n):void 0},d.firstName=function(){var t=this.proxy("traits.firstName");if("string"===typeof t)return c(t);var e=this.proxy("traits.name");return"string"===typeof e?c(e).split(" ")[0]:void 0},d.lastName=function(){var t=this.proxy("traits.lastName");if("string"===typeof t)return c(t);var e=this.proxy("traits.name");if("string"===typeof e){var n=c(e).indexOf(" ");if(-1!==n)return c(e.substr(n+1))}},d.uid=function(){return this.userId()||this.username()||this.email()},d.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},d.age=function(){var t=this.birthday(),e=o.default(this.traits(),"age");return null!=e?e:t instanceof Date?(new Date).getFullYear()-t.getFullYear():void 0},d.avatar=function(){var t=this.traits();return o.default(t,"avatar")||o.default(t,"photoUrl")||o.default(t,"avatarUrl")},d.position=function(){var t=this.traits();return o.default(t,"position")||o.default(t,"jobTitle")},d.username=i.Facade.proxy("traits.username"),d.website=i.Facade.one("traits.website"),d.websites=i.Facade.multi("traits.website"),d.phone=i.Facade.one("traits.phone"),d.phones=i.Facade.multi("traits.phone"),d.address=i.Facade.proxy("traits.address"),d.gender=i.Facade.proxy("traits.gender"),d.birthday=i.Facade.proxy("traits.birthday")},49969:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=e.Screen=e.Page=e.Track=e.Identify=e.Group=e.Alias=e.Facade=void 0;var i=n(40747);Object.defineProperty(e,"Facade",{enumerable:!0,get:function(){return i.Facade}});var o=n(36576);Object.defineProperty(e,"Alias",{enumerable:!0,get:function(){return o.Alias}});var a=n(63789);Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return a.Group}});var s=n(98649);Object.defineProperty(e,"Identify",{enumerable:!0,get:function(){return s.Identify}});var u=n(27286);Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return u.Track}});var c=n(83070);Object.defineProperty(e,"Page",{enumerable:!0,get:function(){return c.Page}});var l=n(69860);Object.defineProperty(e,"Screen",{enumerable:!0,get:function(){return l.Screen}});var d=n(85655);Object.defineProperty(e,"Delete",{enumerable:!0,get:function(){return d.Delete}}),e.default=r(r({},i.Facade),{Alias:o.Alias,Group:a.Group,Identify:s.Identify,Track:u.Track,Page:c.Page,Screen:l.Screen,Delete:d.Delete})},66243:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/.+\@.+\..+/;e.default=function(t){return n.test(t)}},2530:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={Salesforce:!0};e.default=function(t){return!n[t]}},83070:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Page=void 0;var i=r(n(35717)),o=n(40747),a=n(27286),s=r(n(66243));function u(t,e){o.Facade.call(this,t,e)}e.Page=u,i.default(u,o.Facade);var c=u.prototype;c.action=function(){return"page"},c.type=c.action,c.category=o.Facade.field("category"),c.name=o.Facade.field("name"),c.title=o.Facade.proxy("properties.title"),c.path=o.Facade.proxy("properties.path"),c.url=o.Facade.proxy("properties.url"),c.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},c.properties=function(t){var e=this.field("properties")||{},n=this.category(),r=this.name();for(var i in t=t||{},n&&(e.category=n),r&&(e.name=r),t){var o=null==this[i]?this.proxy("properties."+i):this[i]();null!=o&&(e[t[i]]=o,i!==t[i]&&delete e[i])}return e},c.email=function(){var t=this.proxy("context.traits.email")||this.proxy("properties.email");if(t)return t;var e=this.userId();return s.default(e)?e:void 0},c.fullName=function(){var t=this.category(),e=this.name();return e&&t?t+" "+e:e},c.event=function(t){return t?"Viewed "+t+" Page":"Loaded a Page"},c.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new a.Track(e,this.opts)}},69860:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Screen=void 0;var i=r(n(35717)),o=n(83070),a=n(27286);function s(t,e){o.Page.call(this,t,e)}e.Screen=s,i.default(s,o.Page),s.prototype.action=function(){return"screen"},s.prototype.type=s.prototype.action,s.prototype.event=function(t){return t?"Viewed "+t+" Screen":"Loaded a Screen"},s.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new a.Track(e,this.opts)}},27286:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var i=r(n(35717)),o=n(40747),a=n(98649),s=r(n(66243)),u=r(n(53410));function c(t,e){o.Facade.call(this,t,e)}e.Track=c,i.default(c,o.Facade);var l=c.prototype;l.action=function(){return"track"},l.type=l.action,l.event=o.Facade.field("event"),l.value=o.Facade.proxy("properties.value"),l.category=o.Facade.proxy("properties.category"),l.id=o.Facade.proxy("properties.id"),l.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},l.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},l.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},l.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},l.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},l.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},l.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},l.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},l.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},l.sku=o.Facade.proxy("properties.sku"),l.tax=o.Facade.proxy("properties.tax"),l.name=o.Facade.proxy("properties.name"),l.price=o.Facade.proxy("properties.price"),l.total=o.Facade.proxy("properties.total"),l.repeat=o.Facade.proxy("properties.repeat"),l.coupon=o.Facade.proxy("properties.coupon"),l.shipping=o.Facade.proxy("properties.shipping"),l.discount=o.Facade.proxy("properties.discount"),l.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},l.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},l.description=o.Facade.proxy("properties.description"),l.plan=o.Facade.proxy("properties.plan"),l.subtotal=function(){var t=u.default(this.properties(),"subtotal"),e=this.total()||this.revenue();if(t)return t;if(!e)return 0;if(this.total()){var n=this.tax();n&&(e-=n),(n=this.shipping())&&(e-=n),(n=this.discount())&&(e+=n)}return e},l.products=function(){var t=this.properties(),e=u.default(t,"products");return Array.isArray(e)?e.filter((function(t){return null!==t})):[]},l.quantity=function(){return(this.obj.properties||{}).quantity||1},l.currency=function(){return(this.obj.properties||{}).currency||"USD"},l.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},l.query=o.Facade.proxy("options.query"),l.properties=function(t){var e=this.field("properties")||{};for(var n in t=t||{}){var r=null==this[n]?this.proxy("properties."+n):this[n]();null!=r&&(e[t[n]]=r,delete e[n])}return e},l.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},l.email=function(){var t=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(t)return t;var e=this.userId();return s.default(e)?e:void 0},l.revenue=function(){var t=this.proxy("properties.revenue"),e=this.event();return!t&&e&&e.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(t=this.proxy("properties.total")),function(t){if(!t)return;if("number"===typeof t)return t;if("string"!==typeof t)return;if(t=t.replace(/\$/g,""),t=parseFloat(t),!isNaN(t))return t}(t)},l.cents=function(){var t=this.revenue();return"number"!==typeof t?this.value()||0:100*t},l.identify=function(){var t=this.json();return t.traits=this.traits(),new a.Identify(t,this.opts)}},28595:(t,e,n)=>{"use strict";var r=n(28336);function i(t,e){return void 0===e&&(e=!0),t&&"object"===typeof t?function(t,e){return Object.keys(t).forEach((function(n){t[n]=i(t[n],e)})),t}(t,e):Array.isArray(t)?function(t,e){return t.forEach((function(n,r){t[r]=i(n,e)})),t}(t,e):r.is(t,e)?r.parse(t):t}t.exports=i},28336:(t,e)=>{"use strict";var n=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;e.parse=function(t){var e=[1,5,6,7,11,12],r=n.exec(t),i=0;if(!r)return new Date(t);for(var o,a=0;o=e[a];a++)r[o]=parseInt(r[o],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0," "===r[4]?i=(new Date).getTimezoneOffset():"Z"!==r[9]&&r[10]&&(i=60*r[11]+r[12],"+"===r[10]&&(i=0-i));var s=Date.UTC(r[1],r[2],r[3],r[5],r[6]+i,r[7],r[8]);return new Date(s)},e.is=function(t,e){return"string"===typeof t&&((!e||!1!==/^\d{4}-\d{2}-\d{2}/.test(t))&&n.test(t))}},35130:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Store=e.matches=e.transform=void 0;var i=n(2764);Object.defineProperty(e,"transform",{enumerable:!0,get:function(){return r(i).default}});var o=n(20714);Object.defineProperty(e,"matches",{enumerable:!0,get:function(){return r(o).default}});var a=n(14372);Object.defineProperty(e,"Store",{enumerable:!0,get:function(){return r(a).default}})},20714:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(26905));function o(t,e){if(!Array.isArray(t))return!0===a(t,e);var n=t[0];switch(n){case"!":return!o(t[1],e);case"or":for(var r=1;r<t.length;r++)if(o(t[r],e))return!0;return!1;case"and":for(r=1;r<t.length;r++)if(!o(t[r],e))return!1;return!0;case"=":case"!=":return function(t,e,n,r){s(t)&&(t=o(t,r));s(e)&&(e=o(e,r));"object"===typeof t&&"object"===typeof e&&(t=JSON.stringify(t),e=JSON.stringify(e));switch(n){case"=":return t===e;case"!=":return t!==e;default:throw new Error("Invalid operator in compareItems: ".concat(n))}}(a(t[1],e),a(t[2],e),n,e);case"<=":case"<":case">":case">=":return function(t,e,n,r){s(t)&&(t=o(t,r));s(e)&&(e=o(e,r));if("number"!==typeof t||"number"!==typeof e)return!1;switch(n){case"<=":return t<=e;case">=":return t>=e;case"<":return t<e;case">":return t>e;default:throw new Error("Invalid operator in compareNumbers: ".concat(n))}}(a(t[1],e),a(t[2],e),n,e);case"contains":return function(t,e){if("string"!==typeof t||"string"!==typeof e)return!1;return-1!==t.indexOf(e)}(a(t[1],e),a(t[2],e));case"match":return function(t,e){if("string"!==typeof t||"string"!==typeof e)return!1;return function(t,e){var n,r;t:for(;t.length>0;){var i,o;if(n=u(t),i=n.star,o=n.chunk,t=n.pattern,i&&""===o)return!0;var a=c(o,e),s=a.t,l=a.ok,d=a.err;if(d)return!1;if(!l||!(0===s.length||t.length>0)){if(i)for(var p=0;p<e.length;p++){if(r=c(o,e.slice(p+1)),s=r.t,l=r.ok,d=r.err,l){if(0===t.length&&s.length>0)continue;e=s;continue t}if(d)return!1}return!1}e=s}return 0===e.length}(e,t)}(a(t[1],e),a(t[2],e));case"lowercase":var i=a(t[1],e);return"string"!==typeof i?null:i.toLowerCase();case"typeof":return typeof a(t[1],e);case"length":return function(t){if(null===t)return 0;if(!Array.isArray(t)&&"string"!==typeof t)return NaN;return t.length}(a(t[1],e));default:throw new Error("FQL IR could not evaluate for token: ".concat(n))}}function a(t,e){return Array.isArray(t)?t:"object"===typeof t?t.value:(0,i.default)(e,t)}function s(t){return!!Array.isArray(t)&&(("lowercase"===t[0]||"length"===t[0]||"typeof"===t[0])&&2===t.length||("contains"===t[0]||"match"===t[0])&&3===t.length)}function u(t){for(var e={star:!1,chunk:"",pattern:""};t.length>0&&"*"===t[0];)t=t.slice(1),e.star=!0;var n,r=!1;t:for(n=0;n<t.length;n++)switch(t[n]){case"\\":n+1<t.length&&n++;break;case"[":r=!0;break;case"]":r=!1;break;case"*":if(!r)break t}return e.chunk=t.slice(0,n),e.pattern=t.slice(n),e}function c(t,e){for(var n,r,i={t:"",ok:!1,err:!1};t.length>0;){if(0===e.length)return i;switch(t[0]){case"[":var o=e[0];e=e.slice(1);var a=!0;(t=t.slice(1)).length>0&&"^"===t[0]&&(a=!1,t=t.slice(1));for(var s=!1,u=0;;){if(t.length>0&&"]"===t[0]&&u>0){t=t.slice(1);break}var c,d="";if(c=(n=l(t)).char,t=n.newChunk,n.err)return i;if(d=c,"-"===t[0]&&(d=(r=l(t.slice(1))).char,t=r.newChunk,r.err))return i;c<=o&&o<=d&&(s=!0),u++}if(s!==a)return i;break;case"?":e=e.slice(1),t=t.slice(1);break;case"\\":if(0===(t=t.slice(1)).length)return i.err=!0,i;default:if(t[0]!==e[0])return i;e=e.slice(1),t=t.slice(1)}}return i.t=e,i.ok=!0,i.err=!1,i}function l(t){var e={char:"",newChunk:"",err:!1};return 0===t.length||"-"===t[0]||"]"===t[0]||"\\"===t[0]&&0===(t=t.slice(1)).length?(e.err=!0,e):(e.char=t[0],e.newChunk=t.slice(1),0===e.newChunk.length&&(e.err=!0),e)}e.default=function(t,e){if(!e)throw new Error("No matcher supplied!");switch(e.type){case"all":return!0;case"fql":return function(t,e){if(!t)return!1;try{t=JSON.parse(t)}catch(e){throw new Error('Failed to JSON.parse FQL intermediate representation "'.concat(t,'": ').concat(e))}var n=o(t,e);if("boolean"!==typeof n)return!1;return n}(e.ir,t);default:throw new Error("Matcher of type ".concat(e.type," unsupported."))}}},14372:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.rules=[],this.rules=t||[]}return t.prototype.getRulesByDestinationName=function(t){for(var e=[],n=0,r=this.rules;n<r.length;n++){var i=r[n];i.destinationName!==t&&void 0!==i.destinationName||e.push(i)}return e},t}();e.default=n},2764:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(42766)),o=r(n(26905)),a=r(n(36652)),s=n(86651),u=n(54195);function c(t,e){for(var n in e.drop)if(e.drop.hasOwnProperty(n)){var r=""===n?t:(0,o.default)(t,n);if("object"===typeof r&&null!==r)for(var i=0,a=e.drop[n];i<a.length;i++){delete r[a[i]]}}}function l(t,e){for(var n in e.allow)if(e.allow.hasOwnProperty(n)){var r=""===n?t:(0,o.default)(t,n);if("object"===typeof r&&null!==r)for(var i in r)r.hasOwnProperty(i)&&-1===e.allow[n].indexOf(i)&&delete r[i]}}function d(t,e){var n=JSON.parse(JSON.stringify(t));for(var r in e.map)if(e.map.hasOwnProperty(r)){var i=e.map[r],a=r.split("."),c=void 0;if(a.length>1?(a.pop(),c=(0,o.default)(n,a.join("."))):c=t,"object"===typeof c){if(i.copy){var l=(0,o.default)(n,i.copy);void 0!==l&&(0,s.dset)(t,r,l)}else if(i.move){var d=(0,o.default)(n,i.move);void 0!==d&&(0,s.dset)(t,r,d),(0,u.unset)(t,i.move)}else i.hasOwnProperty("set")&&(0,s.dset)(t,r,i.set);if(i.to_string){var p=(0,o.default)(t,r);if("string"===typeof p||"object"===typeof p&&null!==p)continue;void 0!==p?(0,s.dset)(t,r,JSON.stringify(p)):(0,s.dset)(t,r,"undefined")}}}}function p(t,e){return!(e.sample.percent<=0)&&(e.sample.percent>=1||(e.sample.path?function(t,e){var n=(0,o.default)(t,e.sample.path),r=(0,i.default)(JSON.stringify(n)),s=-64,u=[];f(r.slice(0,8),u);for(var c=0,l=0;l<64&&1!==u[l];l++)c++;if(0!==c){var d=[];f(r.slice(9,16),d),s-=c,u.splice(0,c),d.splice(64-c),u=u.concat(d)}return u[63]=0===u[63]?1:0,(0,a.default)(parseInt(u.join(""),2),s)<e.sample.percent}(t,e):(n=e.sample.percent,Math.random()<=n)));var n}function f(t,e){for(var n=0;n<8;n++)for(var r=t[n],i=128;i>=1;i/=2)r-i>=0?(r-=i,e.push(1)):e.push(0)}e.default=function(t,e){for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];switch(o.type){case"drop":return null;case"drop_properties":c(n,o.config);break;case"allow_properties":l(n,o.config);break;case"sample_event":if(p(n,o.config))break;return null;case"map_properties":d(n,o.config);break;case"hash_properties":break;default:throw new Error('Transformer of type "'.concat(o.type,'" is unsupported.'))}}return n}},54195:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.unset=void 0;var i=r(n(26905));e.unset=function(t,e){if((0,i.default)(t,e)){for(var n=e.split("."),r=n.pop();n.length&&"\\"===n[n.length-1].slice(-1);)r=n.pop().slice(0,-1)+"."+r;for(;n.length;)t=t[e=n.shift()];return delete t[r]}return!0}},66027:(t,e,n)=>{"use strict";function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}n.d(e,{Z:()=>i});const i=function t(e,n){function i(t,i,o){if("undefined"!==typeof document){"number"===typeof(o=r({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in o)o[s]&&(a+="; "+s,!0!==o[s]&&(a+="="+o[s].split(";")[0]));return document.cookie=t+"="+e.write(i,t)+a}}return Object.create({set:i,get:function(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=e.read(a,s),t===s)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){i(t,"",r({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,r({},this.attributes,e))},withConverter:function(e){return t(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);