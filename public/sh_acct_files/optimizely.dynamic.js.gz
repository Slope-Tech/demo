window['optimizelyDeps'] = ["/integrations/vendor/commons.c42222c4cb2f8913500f.js"];window['optimizelyLoader'] = function() { return window.optimizelyIntegration=function(e){function t(t){for(var r,o,p=t[0],s=t[1],d=t[2],m=0,f=[];m<p.length;m++)o=p[m],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(c&&c(t);f.length;)f.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],r=!0,p=1;p<i.length;p++){var s=i[p];0!==n[s]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var r={},n={99:0},a=[];function o(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=r,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var p=window.webpackJsonp_name_Integration=window.webpackJsonp_name_Integration||[],s=p.push.bind(p);p.push=t,p=p.slice();for(var d=0;d<p.length;d++)t(p[d]);var c=s;return a.push(["4NXe",0]),i()}({"4NXe":function(e,t,i){"use strict";var r=i("XWve"),n=i("BL+C"),a=i("LUFQ"),o=i("6YGp"),p=i("hjHq"),s=i("5mDK")("optimizely",{wrap:!1}),d=i("n/l8"),c=e.exports=p("Optimizely").option("trackCategorizedPages",!0).option("trackNamedPages",!0).option("variations",!1).option("listen",!0).option("nonInteraction",!1).option("sendRevenueOnlyForOrderCompleted",!0).option("customExperimentProperties",{}).option("customCampaignProperties",{}),m={name:"optimizely",version:"2.0.0"};c.prototype.initialize=function(){var e=this;s({type:"integration",OAuthClientId:"5360906403"}),d((function(){c.initOptimizelyIntegration({referrerOverride:e.setEffectiveReferrer.bind(e),sendExperimentData:e.sendClassicDataToSegment.bind(e),sendCampaignData:e.sendNewDataToSegment.bind(e)})})),this.ready()},c.prototype.track=function(e){var t=this.options,i=e.properties();i.revenue&&t.sendRevenueOnlyForOrderCompleted?"Order Completed"===e.event()?i.revenue=Math.round(100*i.revenue):"Order Completed"!==e.event()&&delete i.revenue:!1===t.sendRevenueOnlyForOrderCompleted&&i.revenue&&(i.revenue=Math.round(100*i.revenue));var r=e.event().replace(/:/g,"_"),n={type:"event",eventName:r,tags:i};s(n);var a=window.optimizelyClientInstance;if(a&&a.track){var o=e.options("Optimizely"),p=o.userId||e.userId()||this.analytics.user().id(),d=o.attributes||e.traits()||this.analytics.user().traits();p&&a.track(r,p,d,n.tags)}},c.prototype.page=function(e){var t=e.category(),i=e.fullName(),r=this.options;t&&r.trackCategorizedPages&&this.track(e.track(t)),i&&r.trackNamedPages&&this.track(e.track(i))},c.prototype.sendClassicDataToSegment=function(e){var t=e.experiment,i=e.variations,p=e.sections,s={integration:m},d=a((function(e,t){var i=e;return i[t.id]=t.name,i}),{},i),c=r(d).sort(),f=n(d).sort();if(this.options.listen){var l={experimentId:t.id,experimentName:t.name,variationId:c.join(),variationName:f.join(", ")};if(t.referrer&&(l.referrer=t.referrer,s.page={referrer:t.referrer}),p){for(var u={},v=a((function(e,t,i){var r=e;return o((function(e){r[e]={id:i,name:t.name}}),t.variation_ids),r}),{},p),y=0;y<c.length;y++){var g=v[c[y]];g&&(u[g.id]=g.name)}l.sectionId=r(u).sort().join(),l.sectionName=n(u).sort().join(", ")}this.options.nonInteraction&&(l.nonInteraction=1);var w=this.options.customExperimentProperties,h=Object.keys(w),x=window.optimizely&&window.optimizely.data;if(x&&h.length)for(var z=0;z<h.length;z++){var O=h[z],I=w[O];void 0!==x[I]&&(l[O]=x[I])}this.analytics.track("Experiment Viewed",l,s)}if(this.options.variations){var b={};b["Experiment: "+t.name]=f.join(", "),this.analytics.identify(b)}},c.prototype.sendNewDataToSegment=function(e){var t=e.experiment,i=e.variation,o={integration:m},p=a((function(e,t){var i=e;return i[t.id]=t.name,i}),{},e.audiences),s=r(p).sort().join(),d=n(p).sort().join(", ");if(this.options.listen){var c={campaignName:e.campaignName,campaignId:e.id,experimentId:t.id,experimentName:t.name,variationName:i.name,variationId:i.id,audienceId:s,audienceName:d,isInCampaignHoldback:e.isInCampaignHoldback};t.referrer&&(c.referrer=t.referrer,o.page={referrer:t.referrer}),this.options.nonInteraction&&(c.nonInteraction=1);var f=this.options.customCampaignProperties,l=Object.keys(f),u=window.optimizely&&window.optimizely.newMockData;if(u&&l.length)for(var v=0;v<l.length;v++){var y=l[v],g=f[y];void 0!==u[g]&&(c[y]=u[g])}this.analytics.track("Experiment Viewed",c,o)}if(this.options.variations){var w={};w["Experiment: "+t.name]=i.name,this.analytics.identify(w)}},c.prototype.setEffectiveReferrer=function(e){if(e)return window.optimizelyEffectiveReferrer=e,e},c.initOptimizelyIntegration=function(e){var t,i,r,n;!function(e,t){var i=window.optimizely&&window.optimizely.data,r=i&&i.state;if(r){var n=r.activeExperiments;if(r.redirectExperiment){for(var a=r.redirectExperiment.experimentId,o=-1,p=0;p<r.activeExperiments.length;p++)if(r.activeExperiments[p]===a){o=p;break}-1===o&&n.push(a),e(r.redirectExperiment.referrer)}for(var s=0;s<n.length;s++){var d=n[s],c={experiment:{id:d,name:i.experiments[d].name},variations:[],sections:i.sections};r.redirectExperiment&&d===r.redirectExperiment.experimentId&&r.redirectExperiment.referrer&&(c.experiment.referrer=r.redirectExperiment.referrer);for(var m=r.variationIdsMap[c.experiment.id],f=0;f<m.length;f++){var l=m[f],u=i.variations[l].name;c.variations.push({id:l,name:u})}t(c)}}}(e.referrerOverride,e.sendExperimentData),t=e.referrerOverride,i=e.sendCampaignData,r=function(e,t){var r=window.optimizely.get&&window.optimizely.get("state");if(r){var n=r.getCampaignStates({isActive:!0})[e];t&&(n.experiment.referrer=t),i(n)}},n=function(){var e=window.optimizely.get&&window.optimizely.get("state");if(e){var i=e.getRedirectInfo()&&e.getRedirectInfo().referrer;if(i)return t(i),i}},function(){window.optimizely=window.optimizely||[];var e=window.optimizely.get&&window.optimizely.get("state");if(e){var t=n(),i=e.getCampaignStates({isActive:!0});for(var a in i)({}).hasOwnProperty.call(i,a)&&(t?r(a,t):r(a))}else window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"initialized"},handler:function(){n()}})}(),window.optimizely=window.optimizely||[],window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:function(e){var t=e.data.campaign.id;r(t)}})}}});
//# sourceMappingURL=optimizely.js.map
};