(()=>{"use strict";var e={115:(e,t)=>{function r(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function n(e,t,n){e(null,{verifier:t,challenge:r(String.fromCharCode.apply(null,new Uint8Array(n)))})}t.Z=function(e,t){e||(e=43);for(var i=window.msCrypto||window.crypto,o=r(Array.prototype.map.call(i.getRandomValues(new Uint8Array(e)),(function(e){return String.fromCharCode(e)})).join("")).substring(0,e),a=new Uint8Array(o.length),c=0;c<o.length;c++)a[c]=o.charCodeAt(c);var u=i.subtle.digest("SHA-256",a);window.CryptoOperation?(u.onerror=t,u.oncomplete=function(e){n(t,o,e.target.result)}):u.then((function(e){n(t,o,e)})).catch(t)}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}(()=>{const e=crypto;var t=function(e){return e instanceof CryptoKey};function n(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}const i=function(){var t,r=(t=function*(t,r){var n=`SHA-${t.slice(-3)}`;return new Uint8Array(yield e.subtle.digest(n,r))},function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function c(e){n(a,i,o,c,u,"next",e)}function u(e){n(a,i,o,c,u,"throw",e)}c(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();function o(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}var a=new TextEncoder,c=new TextDecoder,u=2**32;function s(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){var{length:r}=t;return e+r}),0),i=new Uint8Array(n),o=0;return t.forEach((function(e){i.set(e,o),o+=e.length})),i}function l(e,t,r){if(t<0||t>=u)throw new RangeError(`value must be >= 0 and <= ${u-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function f(e){var t=new Uint8Array(4);return l(t,e),t}function p(e){return s(f(e.length),e)}function y(){var e;return e=function*(e,t,r){for(var n=Math.ceil((t>>3)/32),o=new Uint8Array(32*n),a=0;a<n;a++){var c=new Uint8Array(4+e.length+r.length);c.set(f(a+1)),c.set(e,4),c.set(r,4+e.length),o.set(yield i("sha256",c),32*a)}return o.slice(0,t>>3)},y=function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function c(e){o(a,n,i,c,u,"next",e)}function u(e){o(a,n,i,c,u,"throw",e)}c(void 0)}))},y.apply(this,arguments)}var h=function(e){return function(e){var t=e;"string"==typeof t&&(t=a.encode(t));for(var r=[],n=0;n<t.length;n+=32768)r.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return btoa(r.join(""))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},d=function(e){var t=e;t instanceof Uint8Array&&(t=c.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return function(e){for(var t=atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}(t)}catch(e){throw new TypeError("The input to be decoded is not correctly encoded.")}};function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function m(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}function E(e){var t=C();return function(){var r,n=H(e);if(t){var i=H(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,r)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){var t="function"==typeof Map?new Map:void 0;return S=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return P(e,arguments,H(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),K(r,e)},S(e)}function P(e,t,r){return P=C()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&K(i,r.prototype),i},P.apply(null,arguments)}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var k=function(e){A(r,e);var t=E(r);function r(e){var n,i;return v(this,r),(n=t.call(this,e)).code="ERR_JOSE_GENERIC",n.name=n.constructor.name,null===(i=Error.captureStackTrace)||void 0===i||i.call(Error,b(n),n.constructor),n}return m(r,null,[{key:"code",get:function(){return"ERR_JOSE_GENERIC"}}]),r}(S(Error)),_=function(e){A(r,e);var t=E(r);function r(){var e;return v(this,r),(e=t.apply(this,arguments)).code="ERR_JOSE_NOT_SUPPORTED",e}return m(r,null,[{key:"code",get:function(){return"ERR_JOSE_NOT_SUPPORTED"}}]),r}(k),U=function(e){A(r,e);var t=E(r);function r(){var e;return v(this,r),(e=t.apply(this,arguments)).code="ERR_JWE_INVALID",e}return m(r,null,[{key:"code",get:function(){return"ERR_JWE_INVALID"}}]),r}(k);Symbol.asyncIterator;const W=e.getRandomValues.bind(e);function O(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new _(`Unsupported JWE Algorithm: ${e}`)}}const R=function(e){return W(new Uint8Array(O(e)>>3))},T=function(e,t){var r=e.byteLength<<3;if(r!==t)throw new U(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)};function j(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}var x=function(){var e,t=(e=function*(){throw new _('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){j(o,n,i,a,c,"next",e)}function c(e){j(o,n,i,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();const M=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function D(e){return new TypeError(`CryptoKey does not support this operation, its ${arguments.length>1&&void 0!==arguments[1]?arguments[1]:"algorithm.name"} must be ${e}`)}function B(e,t){return e.name===t}function $(e,t){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":if(!B(e.algorithm,"AES-GCM"))throw D("AES-GCM");var r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw D(r,"algorithm.length");break;case"A128KW":case"A192KW":case"A256KW":if(!B(e.algorithm,"AES-KW"))throw D("AES-KW");var n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw D(n,"algorithm.length");break;case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw D("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!B(e.algorithm,"PBKDF2"))throw D("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(!B(e.algorithm,"RSA-OAEP"))throw D("RSA-OAEP");var i=parseInt(t.slice(9),10)||1;if(o=e.algorithm.hash,parseInt(o.name.slice(4),10)!==i)throw D(`SHA-${i}`,"algorithm.hash");break;default:throw new TypeError("CryptoKey does not support this operation")}for(var o,a=arguments.length,c=new Array(a>2?a-2:0),u=2;u<a;u++)c[u-2]=arguments[u];!function(e,t){if(t.length&&!t.some((function(t){return e.usages.includes(t)}))){var r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){var n=t.pop();r+=`one of ${t.join(", ")}, or ${n}.`}else 2===t.length?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}(e,c)}function I(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(n.length>2){var o=n.pop();e+=`one of type ${n.join(", ")}, or ${o}.`}else 2===n.length?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const G=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return I("Key must be ",e,...r)};function J(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return I(`Key for the ${e} algorithm must be `,t,...n)}const z=function(e){return t(e)};var F=["CryptoKey"];function V(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}var X=function(){var r,n=(r=function*(r,n,i){var o=yield function(r,n,i){if(t(r))return $(r,n,i),r;if(r instanceof Uint8Array)return e.subtle.importKey("raw",r,"AES-KW",!0,[i]);throw new TypeError(G(r,...F,"Uint8Array"))}(n,r,"wrapKey");!function(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}(o,r);var a=yield e.subtle.importKey("raw",i,...M);return new Uint8Array(yield e.subtle.wrapKey("raw",a,o,"AES-KW"))},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){V(o,n,i,a,c,"next",e)}function c(e){V(o,n,i,a,c,"throw",e)}a(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}();function N(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){N(o,n,i,a,c,"next",e)}function c(e){N(o,n,i,a,c,"throw",e)}a(void 0)}))}}function q(){return q=L((function(r,n,i,o){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Uint8Array(0),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Uint8Array(0);return function*(){if(!t(r))throw new TypeError(G(r,...F));if($(r,"ECDH"),!t(n))throw new TypeError(G(n,...F));$(n,"ECDH","deriveBits");var l,h=s(p(a.encode(i)),p(c),p(u),f(o));return l="X25519"===r.algorithm.name?256:"X448"===r.algorithm.name?448:Math.ceil(parseInt(r.algorithm.namedCurve.substr(-3),10)/8)<<3,function(e,t,r){return y.apply(this,arguments)}(new Uint8Array(yield e.subtle.deriveBits({name:r.algorithm.name,public:r},n,l)),o,h)}()})),q.apply(this,arguments)}function Z(){return(Z=L((function*(r){if(!t(r))throw new TypeError(G(r,...F));return e.subtle.generateKey(r.algorithm,!0,["deriveBits"])}))).apply(this,arguments)}function Y(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function Q(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Y(o,n,i,a,c,"next",e)}function c(e){Y(o,n,i,a,c,"throw",e)}a(void 0)}))}}function ee(e,t,r,n){return te.apply(this,arguments)}function te(){return(te=Q((function*(r,n,i,o){!function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new U("PBES2 Salt Input must be 8 or more octets")}(r);var c=function(e,t){return s(a.encode(e),new Uint8Array([0]),t)}(n,r),u=parseInt(n.slice(13,16),10),l={hash:`SHA-${n.slice(8,11)}`,iterations:i,name:"PBKDF2",salt:c},f={length:u,name:"AES-KW"},p=yield function(r,n){if(r instanceof Uint8Array)return e.subtle.importKey("raw",r,"PBKDF2",!1,["deriveBits"]);if(t(r))return $(r,n,"deriveBits","deriveKey"),r;throw new TypeError(G(r,...F,"Uint8Array"))}(o,n);if(p.usages.includes("deriveBits"))return new Uint8Array(yield e.subtle.deriveBits(l,p,u));if(p.usages.includes("deriveKey"))return e.subtle.deriveKey(l,p,f,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}))).apply(this,arguments)}var re=function(){var e=Q((function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2048,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:W(new Uint8Array(16));return function*(){var o=yield ee(i,e,n,t);return{encryptedKey:yield X(e.slice(-6),o,r),p2c:n,p2s:h(i)}}()}));return function(t,r,n){return e.apply(this,arguments)}}();function ne(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new _(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function ie(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}var oe=function(){var r,n=(r=function*(r,n,i){if(!t(n))throw new TypeError(G(n,...F));if($(n,r,"encrypt","wrapKey"),function(e,t){if(e.startsWith("RS")||e.startsWith("PS")){var{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}}(r,n),n.usages.includes("encrypt"))return new Uint8Array(yield e.subtle.encrypt(ne(r),n,i));if(n.usages.includes("wrapKey")){var o=yield e.subtle.importKey("raw",i,...M);return new Uint8Array(yield e.subtle.wrapKey("raw",o,n,ne(r)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){ie(o,n,i,a,c,"next",e)}function c(e){ie(o,n,i,a,c,"throw",e)}a(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}();function ae(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new _(`Unsupported JWE Algorithm: ${e}`)}}const ce=function(e){return W(new Uint8Array(ae(e)>>3))};function ue(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}const se=function(){var t,r=(t=function*(t){var r,n;if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');var{algorithm:i,keyUsages:o}=function(e){var t,r;switch(e.kty){case"oct":switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new _(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},r=["deriveBits"];break;default:throw new _('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new _('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new _('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new _('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new _('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(t),a=[i,null!==(r=t.ext)&&void 0!==r&&r,null!==(n=t.key_ops)&&void 0!==n?n:o];if("PBKDF2"===i.name)return e.subtle.importKey("raw",d(t.k),...a);var c={...t};return delete c.alg,delete c.use,e.subtle.importKey("jwk",c,...a)},function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){ue(o,n,i,a,c,"next",e)}function c(e){ue(o,n,i,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();function le(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function fe(){return(e=function*(e,t,r){var n;if(!function(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=r||(r=!0!==e.ext),r?se({...e,alg:t,ext:null!==(n=e.ext)&&void 0!==n&&n}):d(e.k);case"RSA":if(void 0!==e.oth)throw new _('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return se({...e,alg:t});default:throw new _('Unsupported "kty" (Key Type) Parameter value')}},fe=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){le(o,n,i,a,c,"next",e)}function c(e){le(o,n,i,a,c,"throw",e)}a(void 0)}))}).apply(this,arguments);var e}function pe(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function ye(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){pe(o,n,i,a,c,"next",e)}function c(e){pe(o,n,i,a,c,"throw",e)}a(void 0)}))}}function he(){return(he=ye((function*(t,r,n,i,o){if(!(n instanceof Uint8Array))throw new TypeError(G(n,"Uint8Array"));var a,c,f,p,y=parseInt(t.slice(1,4),10),h=yield e.subtle.importKey("raw",n.subarray(y>>3),"AES-CBC",!1,["encrypt"]),d=yield e.subtle.importKey("raw",n.subarray(0,y>>3),{hash:"SHA-"+(y<<1),name:"HMAC"},!1,["sign"]),v=new Uint8Array(yield e.subtle.encrypt({iv:i,name:"AES-CBC"},h,r)),w=s(o,i,v,(a=o.length<<3,c=Math.floor(a/u),f=a%u,l(p=new Uint8Array(8),c,0),l(p,f,4),p));return{ciphertext:v,tag:new Uint8Array((yield e.subtle.sign("HMAC",d,w)).slice(0,y>>3))}}))).apply(this,arguments)}function de(){return(de=ye((function*(t,r,n,i,o){var a;n instanceof Uint8Array?a=yield e.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]):($(n,t,"encrypt"),a=n);var c=new Uint8Array(yield e.subtle.encrypt({additionalData:o,iv:i,name:"AES-GCM",tagLength:128},a,r)),u=c.slice(-16);return{ciphertext:c.slice(0,-16),tag:u}}))).apply(this,arguments)}const ve=function(){var e=ye((function*(e,r,n,i,o){if(!(t(n)||n instanceof Uint8Array))throw new TypeError(G(n,...F,"Uint8Array"));switch(function(e,t){if(t.length<<3!==O(e))throw new U("Invalid Initialization Vector length")}(e,i),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n instanceof Uint8Array&&T(n,parseInt(e.slice(-3),10)),function(e,t,r,n,i){return he.apply(this,arguments)}(e,r,n,i,o);case"A128GCM":case"A192GCM":case"A256GCM":return n instanceof Uint8Array&&T(n,parseInt(e.slice(1,4),10)),function(e,t,r,n,i){return de.apply(this,arguments)}(e,r,n,i,o);default:throw new _("Unsupported JWE Content Encryption Algorithm")}}));return function(t,r,n,i,o){return e.apply(this,arguments)}}();function we(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function me(){return(e=function*(e,t,r,n){var i=e.slice(0,7);n||(n=R(i));var{ciphertext:o,tag:a}=yield ve(i,r,t,n,new Uint8Array(0));return{encryptedKey:o,iv:h(n),tag:h(a)}},me=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){we(o,n,i,a,c,"next",e)}function c(e){we(o,n,i,a,c,"throw",e)}a(void 0)}))}).apply(this,arguments);var e}function ge(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}const Ae=function(){var r,n=(r=function*(r){if(r instanceof Uint8Array)return{kty:"oct",k:h(r)};if(!t(r))throw new TypeError(G(r,...F,"Uint8Array"));if(!r.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");var{ext:n,key_ops:i,alg:o,use:a,...c}=yield e.subtle.exportKey("jwk",r);return c},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){ge(o,n,i,a,c,"next",e)}function c(e){ge(o,n,i,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();function Ee(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function be(){return(e=function*(e){return Ae(e)},be=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Ee(o,n,i,a,c,"next",e)}function c(e){Ee(o,n,i,a,c,"throw",e)}a(void 0)}))}).apply(this,arguments);var e}function Se(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function Pe(){var e;return e=function(e,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function*(){var a,c,u;switch(function(e,t,r){e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?function(e,t){if(!(t instanceof Uint8Array)){if(!z(t))throw new TypeError(J(e,t,...F,"Uint8Array"));if("secret"!==t.type)throw new TypeError(`${F.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}}(e,t):function(e,t,r){if(!z(t))throw new TypeError(J(e,t,...F));if("secret"===t.type)throw new TypeError(`${F.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw new TypeError(`${F.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw new TypeError(`${F.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw new TypeError(`${F.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw new TypeError(`${F.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)}(e,t,r)}(e,n,"encrypt"),e){case"dir":u=n;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":if(!function(e){if(!t(e))throw new TypeError(G(e,...F));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||"X25519"===e.algorithm.name||"X448"===e.algorithm.name}(n))throw new _("ECDH with the provided key is not allowed or not supported by your javascript runtime");var{apu:s,apv:l}=o,{epk:f}=o;f||(f=(yield function(e){return Z.apply(this,arguments)}(n)).privateKey);var{x:p,y,crv:d,kty:v}=yield function(e){return be.apply(this,arguments)}(f),w=yield function(e,t,r,n){return q.apply(this,arguments)}(n,f,"ECDH-ES"===e?r:e,"ECDH-ES"===e?ae(r):parseInt(e.slice(-5,-2),10),s,l);if(c={epk:{x:p,crv:d,kty:v}},"EC"===v&&(c.epk.y=y),s&&(c.apu=h(s)),l&&(c.apv=h(l)),"ECDH-ES"===e){u=w;break}u=i||ce(r);var m=e.slice(-6);a=yield X(m,w,u);break;case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":u=i||ce(r),a=yield oe(e,n,u);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":u=i||ce(r);var{p2c:g,p2s:A}=o;({encryptedKey:a,...c}=yield re(e,n,u,g,A));break;case"A128KW":case"A192KW":case"A256KW":u=i||ce(r),a=yield X(e,n,u);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":u=i||ce(r);var{iv:E}=o;({encryptedKey:a,...c}=yield function(e,t,r,n){return me.apply(this,arguments)}(e,n,u,E));break;default:throw new _('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:u,encryptedKey:a,parameters:c}}()},Pe=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Se(o,n,i,a,c,"next",e)}function c(e){Se(o,n,i,a,c,"throw",e)}a(void 0)}))},Pe.apply(this,arguments)}function Ce(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,He(n.key),n)}}function He(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var ke=Symbol(),_e=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}var t,r,n,i;return t=e,r=[{key:"setKeyManagementParameters",value:function(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}},{key:"setProtectedHeader",value:function(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}},{key:"setSharedUnprotectedHeader",value:function(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}},{key:"setUnprotectedHeader",value:function(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}},{key:"setAdditionalAuthenticatedData",value:function(e){return this._aad=e,this}},{key:"setContentEncryptionKey",value:function(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}},{key:"setInitializationVector",value:function(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}},{key:"encrypt",value:(n=function*(e,t){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new U("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=t.filter(Boolean);if(0===i.length||1===i.length)return!0;for(var o of i){var a=Object.keys(o);if(n&&0!==n.size)for(var c of a){if(n.has(c))return!1;n.add(c)}else n=new Set(a)}return!0}(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new U("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");var r={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(function(e,t,r,n,i){if(void 0!==i.crit&&void 0===n.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some((function(e){return"string"!=typeof e||0===e.length})))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');var o;for(var a of(o=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!o.has(a))throw new _(`Extension Header Parameter "${a}" is not recognized`);if(void 0===i[a])throw new e(`Extension Header Parameter "${a}" is missing`);if(o.get(a)&&void 0===n[a])throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}new Set(n.crit)}(U,new Map,null==t?void 0:t.crit,this._protectedHeader,r),void 0!==r.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new U('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==r.zip)throw new _('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}var n,i,o,u,l,f,p,y,{alg:d,enc:v}=r;if("string"!=typeof d||!d)throw new U('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof v||!v)throw new U('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===d){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===d&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");if(({cek:i,encryptedKey:n,parameters:o}=yield function(e,t,r,n){return Pe.apply(this,arguments)}(d,v,e,this._cek,this._keyManagementParameters)),o&&(t&&ke in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...o}:this.setUnprotectedHeader(o):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...o}:this.setProtectedHeader(o)),this._iv||(this._iv=R(v)),l=this._protectedHeader?a.encode(h(JSON.stringify(this._protectedHeader))):a.encode(""),this._aad?(f=h(this._aad),u=s(l,a.encode("."),a.encode(f))):u=l,"DEF"===r.zip){var w=yield((null==t?void 0:t.deflateRaw)||x)(this._plaintext);({ciphertext:p,tag:y}=yield ve(v,w,i,this._iv,u))}else({ciphertext:p,tag:y}=yield ve(v,this._plaintext,i,this._iv,u));var m={ciphertext:h(p),iv:h(this._iv),tag:h(y)};return n&&(m.encrypted_key=h(n)),f&&(m.aad=f),this._protectedHeader&&(m.protected=c.decode(l)),this._sharedUnprotectedHeader&&(m.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(m.header=this._unprotectedHeader),m},i=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){Ce(o,r,i,a,c,"next",e)}function c(e){Ce(o,r,i,a,c,"throw",e)}a(void 0)}))},function(e,t){return i.apply(this,arguments)})}],r&&Ke(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ue(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Oe(n.key),n)}}function Oe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var Re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._flattened=new _e(t)}var t,r,n,i;return t=e,r=[{key:"setContentEncryptionKey",value:function(e){return this._flattened.setContentEncryptionKey(e),this}},{key:"setInitializationVector",value:function(e){return this._flattened.setInitializationVector(e),this}},{key:"setProtectedHeader",value:function(e){return this._flattened.setProtectedHeader(e),this}},{key:"setKeyManagementParameters",value:function(e){return this._flattened.setKeyManagementParameters(e),this}},{key:"encrypt",value:(n=function*(e,t){var r=yield this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")},i=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){Ue(o,r,i,a,c,"next",e)}function c(e){Ue(o,r,i,a,c,"throw",e)}a(void 0)}))},function(e,t){return i.apply(this,arguments)})}],r&&We(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Te=r(115);window.lpTag=window.lpTag||{},window.lpTag.pkce={importJWK:function(e,t,r){return fe.apply(this,arguments)},getPkce:Te.Z,CompactEncrypt:Re}})()})();;function SurveyManager(a){function b(){for(var a=0;a<Q.length;a++){var b=Q[a];try{i(b.e,b.ev,b.cb)}catch(c){}}Q=[]}function c(){this.dispose();for(var a=0;a<R.length;a++)try{R[a].innerHTML="";R[a].parentNode&&R[a].parentNode.removeChild(R[a])}catch(b){}R=[]}function d(){if(N.childNodes)for(var a=0;a<N.childNodes.length;a++)N.removeChild(N.childNodes[a]);N.className=V.info;N.style.display="none"}function e(b){u(b||a.successText,V.success)}function f(b){u(b||a.errorText,V.error)}function g(){var b,c=S.validateSurvey(!0);if(c.surveyValid){d();b=S.getJSONSurvey();if(a.callback&&"function"==typeof a.callback)try{a.callback(b)}catch(e){}}else{t(c.questionsNeeded);f()}return b}function h(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c);Q.push({e:a,ev:b,cb:c})}function i(a,b,c){a.addEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)}function j(a,b){var c=document.getElementById(a);if(c&&k(b,c.className)){for(var d=c.className.split(" "),e="",f=0;f<d.length;f++){d[f]=d[f].replace(/^[\s*\n*\r*\t\*]$[\s*\n*\r*\t\*]/g,"");if(d[f]!=b&&d){f>0&&(e+=" ");e+=d[f]}}c.className=e}}function k(a,b){var c=b.split(" "),d=!1;a=a.replace(/^[\s*\n*\r*\t\*]$[\s*\n*\r*\t\*]/g,"");for(var e=0;e<c.length;e++)d||a!=c[e]||(d=!0);return d}function l(a){for(var b=0;b<a.length;b++)m(a[b])}function m(a){var b=document.getElementById(T.question+a);b&&(b.style.display="block")}function n(a){for(var b=0;b<a.length;b++)m(a[b].id)}function o(a){for(var b=0;b<a.length;b++)p(a[b].id)}function p(a){var b=document.getElementById(T.question+a);b&&(b.style.display="none")}function q(a){return a+Math.floor(1e4*Math.random())+"_"+Math.floor(1e4*Math.random())}function r(a,b){S.submitTextAnswer(b,a.value);j(T.question+b,U)}function s(a,b){var c=S.submitAnswerGetNextQuestions(a,b);c.questionsToShow&&n(c.questionsToShow);c.questionIdsToHide&&o(c.questionIdsToHide);j(T.question+a,U)}function t(a){for(var b=0;b<a.length;b++){var c=document.getElementById(T.question+a[b].id),d=c.className;k(U,d)||(c.className+=" "+U)}}function u(a,b){N.className=V.info+" "+b;if(N.childNodes)for(var c=0;c<N.childNodes.length;c++)N.removeChild(N.childNodes[c]);N.appendChild(document.createTextNode(a));N.style.display="block";N.focus()}function v(){a.rootElem&&1!==a.rootElem.nodeType&&"string"==typeof a.rootElem&&(M=document.getElementById(a.rootElem));B(S.header);x();y(a.buttonText||"Submit",a.buttonContainer);A();l(S.getActiveQuestionsIds());setTimeout(w,100)}function w(){var a=S.getQuestionByIndex(0);if(a&&a.id){var b=document.getElementById(T.question+a.id);switch(a.type){case S.questionTypes.SELECT:b.getElementsByTagName("SELECT")[0].focus();break;case S.questionTypes.RADIOH:case S.questionTypes.RADIO:case S.questionTypes.CHECKBOX:case S.questionTypes.TEXTF:b.getElementsByTagName("INPUT")[0].focus();break;case S.questionTypes.TEXT:b.getElementsByTagName("TEXTAREA")[0].focus()}b=null}}function x(){N=M.querySelector("."+V.info);N.setAttribute("tabIndex",P);N.style.display="none"}function y(a,b){b&&1!==b&&"string"==typeof b&&(b=document.getElementById(b));var c=b.getElementsByTagName("BUTTON")[0];c.setAttribute("tabIndex",z());c.innerHTML=a;h(c,"click",g);R.push(c)}function z(){var a=O;O+=1;return a}function A(){M.appendChild(W)}function B(a){if("undefined"!=typeof a){var b=M.getElementsByTagName("H2")[0];b.innerHTML=a}}function C(b){var c=document.createElement("SELECT");c.className="select-field";c.setAttribute("tabIndex",z());c.setAttribute("aria-labelledby",T.label+b.id);if(b.mandatory){c.setAttribute("aria-required","true");c.setAttribute("required","true")}var d=[{value:a.defaultSelect||"pick one..."}];d=d.concat(b.entry);for(var e=0;e<d.length;e++){var f=d[e],g=document.createElement("OPTION");g.setAttribute("value",f.value);g.innerHTML=this.sanitizeText(f.value).text;(f.checked===!0||"true"==f.checked)&&g.setAttribute("selected","selected");c.appendChild(g)}h(c,"change",function(a){D(a,c,b.id)});return c}function D(a,b,c){var d=b.value;s(c,d)}function E(a,b){for(var c=0;c<a.entry.length;c++){var d=a.entry[c],e=document.createElement("div");e.className="radio-button";var f=q("rb"),g=document.createElement("input");g.setAttribute("type","radio");g.setAttribute("value",d.value);g.setAttribute("name",T.radioButton+a.id);g.setAttribute("id",f);g.setAttribute("aria-describedby",T.label+a.id);g.setAttribute("tabIndex",z());(d.checked===!0||"true"==d.checked)&&g.setAttribute("checked","checked");if(a.mandatory){g.setAttribute("aria-required","true");g.setAttribute("required","true")}e.appendChild(g);var i=document.createElement("LABEL");void 0!==d.displayValue?i.innerHTML=d.displayValue:i.innerHTML=this.sanitizeText(d.value).text;i.setAttribute("for",f);e.appendChild(i);b.appendChild(e)}h(b,"click",function(b){F(b,a.id)});return b}function F(a,b){a=a||event;var c,d=a.target||a.srcElement;d.value?c=d.value:"LABEL"===d.nodeName&&(c=document.getElementById(d.getAttribute("for")).value);c&&s(b,c)}function G(a){var b=document.createElement("TEXTAREA");b.className="textarea-field";b.setAttribute("tabIndex",z());b.setAttribute("aria-labelledby",T.label+a.id);if(a.mandatory){b.setAttribute("aria-required","true");b.setAttribute("required","true")}a.lastKnownValue&&(b.value=a.lastKnownValue);h(b,"keyup",function(){r(b,a.id)});return b}function H(a){var b=document.createElement("INPUT");b.className="input-field";b.setAttribute("tabIndex",z());b.setAttribute("aria-labelledby",T.label+a.id);if(a.mandatory){b.setAttribute("aria-required","true");b.setAttribute("required","true")}a.validationType===S.validationTypes.EMAIL?b.setAttribute("type","email"):b.setAttribute("type","text");a.lastKnownValue&&(b.value=a.lastKnownValue);h(b,"keyup",function(){r(b,a.id)});return b}function I(a,b){for(var c=0;c<a.entry.length;c++){var d=a.entry[c],e=document.createElement("div");e.className="checkbox-button";var f=q("cb"),g=document.createElement("input");g.setAttribute("type","checkbox");g.setAttribute("value",d.value);g.setAttribute("name",T.checkbox+a.id);g.setAttribute("id",f);g.setAttribute("aria-describedby",T.label+a.id);g.setAttribute("tabIndex",z());if(a.mandatory){g.setAttribute("aria-required","true");g.setAttribute("required","true")}(d.checked===!0||"true"==d.checked)&&g.setAttribute("checked","checked");e.appendChild(g);var i=document.createElement("LABEL");i.innerHTML=this.sanitizeText(d.value).text;i.setAttribute("for",f);e.appendChild(i);b.appendChild(e)}h(b,"click",function(b){J(a.id)});return b}function J(a){for(var b=[],c=document.getElementsByName(T.checkbox+a),d=0;d<c.length;d++)(c[d].checked||c[d].getAttribute("checked")===!0||"checked"==c[d].getAttribute("checked"))&&b.push(c[d].value);s(a,b)}function K(a){var b=document.createElement("DIV");b.style.display="none";b.className="lp_question";b.setAttribute("id",T.question+a.id);var c=document.createElement("LABEL");c.setAttribute("id",T.label+a.id);c.className="lp_question_label";c.appendChild(document.createTextNode(a.label));if(a.mandatory){var d=document.createElement("SPAN");d.innerHTML="*";d.className="mandatory";c.appendChild(d)}b.appendChild(c);R.push(b);return b}function L(a){for(var b=document.createDocumentFragment(),c=0;c<a.length;c++){var d=a[c],e=K(d);switch(d.type){case S.questionTypes.SELECT:e.appendChild(C(d));break;case S.questionTypes.CHECKBOX:I(d,e);break;case S.questionTypes.RADIO:case S.questionTypes.RADIOH:E(d,e);break;case S.questionTypes.TEXT:e.appendChild(G(d));break;case S.questionTypes.TEXTF:e.appendChild(H(d))}b.appendChild(e)}return b}if(this===window||!a||!a.rootElem||!a.survey)return!1;var M,N,O=a&&a.startTabIndex||500,P=z(),Q=[],R=[],S=new lpTag.taglets.SurveyLogic(a.survey),T={question:"q_",checkbox:"cb_",radioButton:"rb_",select:"sel_",textArea:"txar_",input:"txt_",label:"lbl_"},U="error",V={info:"lp_survey_info",error:"lp_error",success:"lp_success"},W=L(S.getAllQuestions());document&&"complete"===document.readyState?v():h(window,"load",v);return{validateSurvey:g,showErrorMessage:f,showSuccessMessage:e,hideMessage:d,dispose:b,clearSurveyDOM:c}}function _stateChanged(a){var b=this.getFirstElement(this.LPViewMap.confirmButton),c=a.newValue;c===lpTag.unifiedWindow.State.CONNECTION_ISSUE?b.setAttribute("disabled","disabled"):b.removeAttribute("disabled")}window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.log=lpTag.unifiedWindow.log||function(){function a(a){l=lpTag.taglets.lpUtil;r=l.cloneExtend(a.loggosLogging||{},r,!0);s="https://"+lpTag.csds.getDomain("loggos")+"/api/loggos/log/";var b=l.getURLParams(window.location.search),c=b.lpDebug;if(c){q.isEnabled=!0;f("2"===c&&"true"===b.debugLevel?"DEBUG":Object.keys(n).reduce(function(a,b){n[b]===+c&&(a=b);return a},p))}else if(a.debug){q.isEnabled=!0;f("INFO")}h()}function b(){var a=new Date;return a.getHours()+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())+":"+(a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds())}function c(a,b){j(a,"ERROR",b||m)}function d(a,b){j(a,"INFO",b||m)}function e(a,b){j(a,"DEBUG",b||m)}function f(a){n[a]&&(p=n[a])}function g(a){switch(a){case u.APP_STARTED:v=!0;break;case u.APP_ENDED:v=!1}}function h(){window.lpTaglogListeners=window.lpTaglogListeners||[];q.isEnabled&&window.lpTaglogListeners.push(function(a,c,d){window.console&&c&&n[c]<=p&&-1===l.indexOf(o,d)&&console.log(b()+" "+d+" : "+a+" LEVEL: "+c)});if(r.level>0){r.inSample=!r.samplingPercentage||1e3*r.samplingPercentage>(new Date).getMilliseconds()?!0:!1;if(r.inSample){window.lpTaglogListeners.push(function(a,b,c){b&&n[b]<=r.level&&v&&-1===l.indexOf(o,c)&&k(a,b,c)});i()}}}function i(){if(r.level>0&&r.queueSubmissionIntervalMilliseconds&&!isNaN(r.queueSubmissionIntervalMilliseconds)){var a=this,b=t.splice(0,r.queueSubmissionMaximum||t.length);if(b.length>0){var d=new XMLHttpRequest;d.open("POST",s,!0);d.setRequestHeader("Content-Type","application/json");d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status);else{t=t.concat(b);c("There was an error sending logs to Loggos: "+d.statusText,m)}setTimeout(function(){i.call(a)},r.queueSubmissionIntervalMilliseconds)}};d.send(JSON.stringify(b))}else setTimeout(function(){i.call(a)},r.queueSubmissionIntervalMilliseconds)}}function j(a,b,c){window.lpTag&&lpTag.log&&a&&lpTag.log(a,b,c||m)}function k(a,b,c){var d={accountId:lpTag.site,appVersion:lpTag.taglets.lpUnifiedWindow.v,context:"webMessaging",immediate:!0,logLevel:b,msg:b+" : "+c+" : "+a,time:(new Date).toISOString(),trace:!1,url:window.location.href};t.push(d)}var l,m="UnifiedWindowLogger",n={ERROR:1,INFO:2,DEBUG:3},o=["lp_SMT","lp_monitoringSDK","LP_OFFER"],p=n.ERROR,q={isEnabled:!1},r={level:0},s="",t=[],u={APP_STARTED:"appStarted",APP_ENDED:"appEnded"},v=!1;return{init:a,error:c,info:d,debug:e,setLogLevel:f,logLevels:n,events:u,triggerEvent:g,loggosLogging:r,loggosLogQueue:t}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.apps={AUTHENTICATION:"authenticationDelegate",STEP_UP:"stepUpManager",CHAT:"API",CHAT_STATE:"ChatStateManager",APPLICATION:"EmbeddedWindowApplication",HEARTBEAT:"HeartBeatManager",UISTATE:"UIStateManager",UNIFIED_WINDOW:"lpUnifiedWindow",SECURE_FORM:"leSecureForm",WINDOW_SDK:"windowSDK",COBROWSE:"cobrowse",RICH_CONTENT:"richContent",FILE_SHARE:"fileShare",QUICK_REPLIES:"quickReplies",MAVEN_PAY:"mavenPay",DATE_PICKER:"datePicker",SCHEDULE_LIST:"scheduleList"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.events={chat:{ERROR:"error",INITIALIZED:"initialized",BLOD:"blueLightOfDeath(Ended)",CHATTING:"chatting",STATE:"state",CONVERSATION_STATE:"conversationState",DIALOG_STATE:"dialogState",CONVERSATION_CLOSED:"conversationClosed",CHAT_INFO:"chatInfo",USER_INFO:"userInfo",USER_LEFT:"userLeft",ENGAGEMENT_DATA:"engagementData",LINE:"line",COLLABORATION:"collaboration",SECURE_FORM:"leSecureForm",FINISHED_EVENTS_BULK:"finishEventsBulk",AGENT_TYPING:"agentIsTyping",AVAILABILITY:"availability",SURVEY_ERROR:"surveyError",SURVEY_SERVER_ERROR:"surveyServerError",EMAIL_TRANSCRIPT_SUCCESS:"emailTranscriptSuccess",EMAIL_TRANSCRIPT_ERROR:"emailTranscriptError",AUTHENTICATION_ERROR:"authenticationError",START_CHAT_INFO:"startChatInfo",TTR_INFO:"ttrInfo",CSAT_INFO:"csatInfo",BRAND_INFO:"brandInfoReceived",CONVERSATION_OWNER_BRAND_INFO:"conversationOwnerBrandInfoReceived",CONVERSATION_CONTENT:"conversationContent",SUBSCRIBE_MESSAGING_EVENTS_RESPONSE:"subscribeMessagingEventsResponse",CONVERSATION_HISTORY:"conversationHistory",NEW_CONVERSATION_REQUESTED:"newConversationRequested",NEW_CONVERSATION_CREATED:"newConversationCreated",MULTIPLE_CHANNELS_REQUESTED:"multipleChannelsRequested",SESSION_DATA:"sessionData",NO_SESSION:"noSession",FAILED_START_CONVERSATION:"failedStartConversation",FORGET_ME:"forgetMe",SET_REFRESH_MODEL_DELAY:"setRefreshModelDelaySec",CLOSE_WINDOW_FORGET_ME:"closeWindowForgetMe",DELETE_CONVERSATION_SUBSCRIPTION:"onDeletedSubscriptionFromConversation",CONVERSATION_STEP_UP:"onConversationStepUp"},socket:{CONNECTED:"socketConnected",INITIALIZED:"socketInitialized",DISCONNECTED:"socketDisconnected",NON_RESPONSIVE:"socketNonResponsive",PING_SUCCESS:"pingSuccess"},application:{PROCESSING:"processing",OFFLINE_SURVEY:"offlineSurvey",PRE_CHAT_SURVEY:"preChatSurvey",POST_CHAT_SURVEY:"postChatSurvey",PRE_SMS_FORM:"preSmsForm",PRE_SMS_FORM_EXIT:"preSmsFormExit",END_CHAT:"endChat",END_SURVEY:"endSurvey",ENDED:"appEnded",DO_HARAKIRI:"doHaraKiri(Seppuku)"},heartBeat:{INIT:"init",FAILED:"failed",RESUMED:"resumed"},uiState:{POP_OUT:"popOut",EMBEDDED_CHANGED:"embeddedChanged",MAXIMIZED:"maximized",MINIMIZED:"minimized",ACTIONS_TOGGLE:"actionsToggle",SEND_BUTTON:"sendButton",INPUT:"input",PAPER_PLANE_BUTTON:"paperPlaneButton",FOCUS_CHANGE_EVENT:"focusChanged",EMOJI_FOCUS_ON_CLICK:"emojiFocus"},chatState:{ENDED:"ended"},unifiedWindow:{MAXIMIZE:"maximize"},viewController:{INITIATE_END_CHAT:"endChatInitiate",CLICKED:"clicked",DIALOG:"dialog",DIALOG_CLOSED:"dialogClosed",DIALOG_STATE_CHANGED:"dialogStateChanged",SLIDER_CLOSED:"sliderClosed",PREPARE_SLIDER_CLOSED_TIMEOUT:"prepareSliderCloseTimeout",SLIDER_VIEW_CHANGE:"sliderViewChange",CLOSE_ACTIONS:"closeActions",VISITOR_HAS_TYPED:"visitorHasTyped",MAXIMIZE_VISIBLE:"maximizeVisible",MINIMIZE_VISIBLE:"minimizeVisible",LINE_ADDED:"lineAdded",LINES_VIEWED:"linesViewed",CONVERSATIONS_VIEWED:"conversationsViewed",RETRY_GET_HISTORY:"retryGetHistory",END_OF_HISTORY:"endOfHistory",CB_OFFER:"cbOffer",THANK_YOU_PAGE:"thankYouPage",SHOW_FORGET_ME:"forgetMeDialog",CLOSE_WINDOW_FORGET_ME:"closeWindowForgetMe",LINE_UPDATE:"lineUpdate",UPDATE_TIME_STAMP:"updateTimeStamp",UPDATE_ACCESSIBILITY_MESSAGE:"updateAccessibilityMessage",SCROLL_CONVERSATION_TO_BOTTOM:"scrollConversationToBottom",FLUTTER_OPEN:"flutterOpen",FLUTTER_CLOSE:"flutterClose",FLUTTER_IS_CLOSED:"flutterIsClosed",FLUTTER_STYLE_UPDATE:"flutterStyleUpdate",DATE_PICKER_SHOW:"DatePickerShow",ADD_PRODUCT_DETAILS:"addProductDetails",SCHEDULE_LIST_SHOW:"ScheduleListShow",HISTORY_TRY_NEXT:"historyTryNext"},coBrowseEvents:{OFFERED:"cobrowseOffered",ACCEPTED:"cobrowseAccepted",DECLINE:"cobrowseDeclined",TIMEOUT:"cobrowseTimeout",INVITED:"cobrowseInvited",STARTED:"sessionStarted",RESUME:"sessionResume",ERROR:"sessionError",CANCELED:"cobrowseCanceled",DIALOG_CREATED:"cobrowseDialogCreated",RENDER_CALL_SCREEN:"cobrowseRenderCallScreen",SLIDER_OPENED:"sliderOpened",MAXIMIZE:"maximize"},widgetSDK:{INIT:"init",PARTICIPANTS:"participants",MESSAGES:"messages",WIDGET_AREA_STATE:"widgetAreaState",CONVERSATION_STATE:"conversationState",CONVERSATION_INFO:"conversationInfo",ENGAGEMENT_INFO:"engagementInfo",NOTIFICATION:"notification",VISITOR_TYPING:"visitorTyping",AGENT_TYPING:"agentTyping",DISPOSED_WIDGET_ID:"disposedWidgetID",INITIATED_WIDGET_ID:"initiatedWidgetID",WIDGET_NOTIFICATION:"widgetNotification"},imageShare:{IMAGE_SELECTED:"imageSelected",FILE_UPLOAD_URL_READY:"fileUrlGenerated",FILE_DONE_UPLOADED:"fileUploaded",FILE_UPLOAD_RETRY:"fileUploadRetry",FILE_DOWNLOAD_REQUEST:"fileDownloadRequest",SHOW_PREVIEW:"showPreview",OVERLAY_CLOSED:"overlayClosed",IMAGE_PREVIEW_CLOSED:"ImagePreviewClosed",IMAGE_PREVIEW_SHOW:"ImagePreviewShow",FILE_VALIDATION:"fileValidation"},richContent:{DISABLE_RICH_CONTENT:"disableRichContent",UPDATE_RICH_CONTENT_LINE:"updateRCLine"},wrapperWindowExtender:{WINDOW_SCALE_SET:"windowScaleSet"}};lpTag.unifiedWindow.publicEvents=lpTag.unifiedWindow.publicEvents||{API:{state:[{appName:"lpUnifiedWindow",eventName:"state",data:{state:"data"}},{appName:"ChatAPIV3",eventName:"state",data:"data"}],chatInfo:{appName:"lpUnifiedWindow",eventName:"conversationInfo",data:{agentName:"data.agentName",agentId:"data.agentId",conversationId:"data.rtSessionId",state:"data.chatState",monitoringSessionId:"data.monitoringSessionId",visitorId:"data.visitorId",skill:"data.skill",skillName:"data.skillName",engagementId:"data.engagementId",campaignId:"data.campaignId",language:"data.language",engagementName:"data.engagementName"}}}};lpTag.unifiedWindow.SurveyType={PRE_CHAT:"PreChatSurvey",EXIT_CHAT:"ExitSurvey",OFFLINE:"OfflineSurvey",CSAT:"CSAT",PRE_SMS:"PreSmsSurvey"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.consts={dialog:{actions:{CONFIRM:"confirm",CANCEL:"cancel"}},views:{TOP_MENU:"topMenu",ACTION_MENU:"actionMenu"},chatEvents:{LINE:"line",INFO:"info",COBROWSE:"cobrowse",SECURE_FORM:"leSecureForm",RICH_CONTENT:"richContent",FILE_SHARING:"hosted/file",MAVEN_PAY:"mavenPay"},errorTypes:{CONNECTION_UNAVAILABLE:"CONNECTION_UNAVAILABLE",AUTH_ERROR:"AUTH_ERROR",FAILED_START_CONVERSATION_ERROR:"FAILED_START_CONVERSATION_ERROR"},authErrorsTypes:{EXPIRED:"expired",INVALID_SESSION:"invalidSession",LOGOUT:"logout"},SecureForm:{LINK_CLICKED:"secureFormClicked",HIDE_CONVO:"hideMessagingConversation"},RichContent:{ACTION:"richContentAction",RICH_CONTENT_LINE:"rich-content",RICH_CONTENT_TYPE:"richcontent",LINK_CLICKED:"richContentLinkClicked"},engagementContainerClass:"LPMcontainer",reCaptchaContainerClass:"reCaptchaContainer",authConnectorTypes:{S2S:0,OAUTH_IMPLICIT:1,OAUTH_CODE:2,STEP_UP:3},defaultRedirectUri:"https://liveperson.net",slider:{viewType:{widgetSDKView:"widgetSDKView",PCIFormView:"pciFormView",CoBrowseInvite:"cobrowseInviteView",CoBrowseCallConnecting:"cobrowseCallConnectingView",RichContentLinkAction:"richContentLinkAction",MavenPayLinkView:"MavenPayLinkView"}},widgetSDK:{WIDGET_NAME:"widgetName",AGENT:"agent",AGENT_ID:"agentId",VISITOR:"visitor",VISITOR_ID:"visitorId",SESSION_ID:"sessionId",MONTORING_SESSION_ID:"monitoringSessionId",ACCOUNT_ID:"accountId",CHANNEL_TYPE_MESSAGING:"messaging",CHANNEL_TYPE_CHAT:"chat",contentType:{text:"text/message",richContent:"text/richContent"}},csatStatus:{FILLED:"FILLED",PARTIALLY_FILLED:"PARTIALLY_FILLED",SKIPPED:"SKIPPED",EMPTY:"EMPTY"},coBrowse:{acceptedCoBrowseModes:["view","shared","follow","VIDEO_CALL","VOICE_CALL"],coBrowseChannelName:"COBROWSE"},engagementTypes:{CHAT_ENGAGEMENT:"chat",MESSAGING_ENGAGEMENT:"messaging"},richContentActionTypes:{LINK:"link",NAVIGATE:"navigate",PUBLISH_TEXT:"publishText",CAROUSEL_OFFSET_CHANGE:"carouselOffsetChange",CHECKED:"checked",SUBMIT_AS_TEXT:"submitAsText",DATE_PICKER:"datePicker",SCHEDULE_SLOT_LIST:"scheduleSlotList",ADD_TO_CART:"addToCart"},fileSharing:{fileAttributes:{TYPE:"type",SIZE:"size"},fallbackThumbnail:{URI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABaCAYAAAAFOiBkAAAAAXNSR0IArs4c6QAACf9JREFUeAHtXelzFMcVf7u6FnQAlkDoQAe7qwuBHISQQSIFCGRIikDssp2kqLjs2FWO+ZB/If9CPqeKipNUOR9CiEOEAVsWBowBGxuD0YEudEvoAq/uA/J+rZ3JaLSjnVnNrIw0jxptT0/P6+5fv37d/fpN4yAVNTU1Fc7MzLzL0ceePXuWwpdLlWRF3Docjgm+ergy5yIjI//s8Xi+V1bMId0wAFENDQ1/4vu3ExMTI+Pj4yOio6OJX5aSrKhfri9NTU2Rz+ebHRwcnOHKnc7Nzf0D13caFRW19oNS7XK5StLS0lyM4IoCIVhluIdQV1fXBNNXDE4FwHHiJUgKQMnMzFx1oKD+EATUHRj4ew05/Drla7fbHbPaJAWgKAmS09zcPMk47HJC0UKnrHZQABAwABbABF3pGBStErnVHPZjcczJijcFo49NcwgAC2ACYFwrdUgOpbGBBTARo1IoDFb6OzYwGi1sA2MDo4GARrQtMTYwGghoRNsSowGMZcvop0+f0hfXv6Ta2loaGRnVyD706Li4WCooKKCyvXvI6TS/fS0DBqDcuvVV6DUP8ibAlvjvKy8Lktr4Y/Oh9pcBkhIOsiofy4CxovsEAtqqfCzrSoEqoY7LyMigA/t/KqJrLl+h9vZ2dZJlu7dMYvTUCKDExcWJSwJIz3vhSLOswISjgqHmsazAoPuMjIyIC+EfEy2rjoFO+eCvf/8x4SGXZVmBkUsRIBAREUGvvnJC7Gv988xZmp2dDZDKuqhl6UpZWZm0YcOGRWu1c+dPaOPGjZSUlEQIh5vCDozX66Gf/+wovf7aq7R169aA9U1IiKdiBRgIIy6cFFZg0D32vFQq6oetiqNHKqm4eOeC+u7bV05IKxHCiAsnhRWYF4t2EG9PzKvfS6W7qeLgAXkhmJWZSbjUpBWvTmfWfdiAWbNmjaauyMvLpePHj1FsbOyikqGWJLNACMQnbMCU7i6hxfavUlNS6Ne/emNRXaLWPYEqZFZcWIBBhQoK8oOWOSYm+MYfRiiXKyYor6UmCAsws7NPaWxsbKllFe+PjY+bwicYE8smeLCwSSaB0dFR+ssHfwtWlpCeIx8ryDKJgdkxHGRVPpZJDGyxoHDYfK1oAMuAgYEatlgr7LFWAKHmaVlXUmf0vN3bwGi0mA2MDYwGAhrRtsTYwGggoBFtS4wNjAYCGtG2xNjAaCCgEW1LjAYwpq+VsLPY3d1DcBzasiVdmCuRd29vH01MTgS058Is0ffoEW1OTqa1a9fKRTXCq7X1ofgWAHmaQaYCc+fOd3T58yvzNscqKg4SjODXv7xBPT09dOr99xaUu6Ozk6qqPqZfnjjOWyrZ4rkRXjfZQenatS+o8vAh0RgLMgghwjRgWlpaqfqzGsrI2EIAIyY6hh62PSSvx2O4WEZ4QRKvs/dWbk4Obd9eaDgvrRdMA+YqtxjoyMuV8hbJthCNVXp5TU9PU9X5j4UbyeHDFVp1DCneFOU7MzNL/F2h2E5V7xsZLZURXpDQx48fU2XlIYqJMddAbgow4+Nj+GKDkpM3GcVhQXq9vCYnJ+n+/Tk/v+am5gV8lhphCjDwioLFrrOza6nlEd1CDy80BHQKlPWd7+7iY88l561kYAow+MYnmYfaJ0+eiC4lZYDCQw8YIb28oqKi6OCB/XToUAUhfPHSp4RuaBZFnDp16o9wt1gqJSQkUG1dHTXz6ORg6RkYGKDPr1ylwYFBys7Oorr6BqEPIA1d3d3ylZSUKOIbG5soPy9PuIfo4YW5D/a9Y/iLNGzA1dbWiWlCoH1vo3VD2U0blTIzM+jE8V/QZzWXqYYvEBRxEc9hJMJXqlevXpNuxW9ujnfePW708FK+VLRjB9Uz8Ldvf8PDtpc2b96sfBxS2MHbG8/y84Nvnxrhzh92c3KHKVupZvLSW4c6lnzTJEaZKX/YrbxdUthMXkYKYoryNZLh85LWBkajpWxgNIDRpWM6OjppeibwfCQ6KprS09MEe5gaunkoHhwcYgegBEpNTdGcqrexj6+D/2HRqSQM5VOTU2KIb2ltpXiePGI64WNzRn9/vzKpCK9ft46POhkRJoe0tFT5OcwYL7BnKOY4ILih9Pb10Ub2AtWzbNEFzMVLn4jJm5yrIgB30zd/e5Iwr/j3R+fY7tIrP4XrGDw0A9lI7t69Rw8eNNK777wtQMRLOM/lzJl/UQp7V8Hl9ezZj4TD0dEjL1N7WztduHhJ5i0FdhUX09DwEHV0dND7v39PAIRn/+Gy7C3bQ9JC9ls2idy4cZNOnvyNecDA9XSWpQH04Yf/4EnYC3SEPS5BkX7vygsXLtHQ0JCwqUAK+rh1qs5foP9Wnad3fveW3HLiJf6DAgOYhoYHVFKyS0Rjkjc9PUPbC7XNB8g3NfX/kuHixWNzSwvBVPGwrY08brew+/zg8wneEjB8yodogORN+tZzunQMusWG9evF5XA4KYpdUaV7iGVf3yNRKLd7q1i7wFWVD+ihMm4xiHA9V15NkAhY65TPMHPG8Oz1etTJ5fv4uHg5b5QBTo8AAzPqJv9iEmCD2ljKMA/CUqW/f4BtQ26ZT7CArq4UjEn/wFzfT0+fb1ZElwA9Hh5ewAIVyWdvzdvffEvD/DySdQF0GWbK8OvFOisQwVYDMEClu3eJBgCYWzhvSA303IPGRtEdYTFsZLCmpiZF+sUAFwkUf3RJjCJ9wODkxFzGUJRKkhTf1FRgxS15Q0Fq6urqBRiFhduULBaEcWSWdPlPkhJpvDkeGmf/PHwnCWVcWloilDafICQkCdIJKdZLpkiMpOWh9bOzs+S8fT/4RHjdugQ5ThnYtAnfCiQKXYB43AfTAeVlZQtGMrzrcXuourqGbty8JUZCLCaxgMVHq5C+7UEABw8lmSIxMDnAXKC2iXx//77Ia7GWgnKE9Q9X4bbFpUVZcHU4NnatmB7gKxXoOnRHPohLdC0AY6QbgbcpEgOJyONC1NXX0yefVlM6iyzmKbCwQTGmpGivdvPz8+gKr7hRET2L2XruGpBMiTCHgvM0KMfr5cbpphz/ih3lQt5DQ8MsZRnSK7p+TQEGOVVWHiZnhFPYRTBHgRf4i0VFtN//MahWaTDXgdjDZqvHsfnevXnn+FF5+V4ZGEgFtmmUNpnc3Bzq630kf6ugVQ51vOlmB4jt6OgYmyhj1Xlp3sN+i664mEu95suqB5geKDft0LVwGeFtidkBFTQCCuplpoVfCQp4o4viMkqmKF+jmT4P6W1gNFrJBsYGRgMBjWhbYmxgNBDQiHby8DqBuYdNcwgAC2ACYHpgObNpDgFgAUygY875+HhoG5g5BPxYnHNG8kHiODMb26ernYABsAAmTv/p6qdxZvZqB8aPwWlgYh+mztIASQEoTPJh6gIYSAprY/v4ffXx+8ouZP+HDXNo/A/VKuq403VhBwAAAABJRU5ErkJggg==",TYPE:"image/png",HEIGHT:90,WIDTH:70}},googleMapsUrl:"https://www.google.com/maps/search/?api=1&",externalTargets:{SMS:0},MavenPay:{LINK_CLICKED:"mavenPayClicked"},stepUpInWaitingState:{appName:"stepUpInWaitingState",storageKey:"-stepUpDataInWaitingState"},messageTypes:{secureForm:"leSecureForm"},fifteenMinutesInMS:9e5};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.hooks={BEFORE_SUBMIT_SURVEY:"BEFORE_SUBMIT_SURVEY",BEFORE_WELCOME_MESSAGE:"BEFORE_WELCOME_MESSAGE",AFTER_GET_SURVEY:"AFTER_GET_SURVEY",BEFORE_SEND_VISITOR_LINE:"BEFORE_SEND_VISITOR_LINE",AFTER_GET_LINES:"AFTER_GET_LINES",AFTER_LOAD_SURVEY:"AFTER_LOAD_SURVEY",AFTER_SUBMIT_SURVEY:"AFTER_SUBMIT_SURVEY",AFTER_ABANDONED_SURVEY:"AFTER_ABANDONED_SURVEY",ON_WINDOW_CLOSED:"ON_WINDOW_CLOSED",ON_ADD_TO_CART:"ON_ADD_TO_CART"};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.CsatDataGenerator=function(a){return{id:0,title:"",header:"",questions:{question:[{type:"CSAT",validationType:"csat",label:a.translate("csatRatingQuestion"),id:0,order:0,mandatory:!1}]}}};lpTag.unifiedWindow.contentTypes={TEXT_PLAIN:"text/plain",EXTERNAL_FILE:"external/file",HOSTED_FILE:"hosted/file",SECURE_FORM_INVITATION:"forms/secure-invitation",SECURE_FORM_SUBMISSION:"forms/secure-submission",SECURE_FORM_UPDATE:"forms/secure-update"};lpTag.unifiedWindow.MessageTypes={CONTENT:"ContentEvent",RICH_CONTENT:"RichContentEvent"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.structuredContentTypes=lpTag.unifiedWindow.structuredContentTypes||{QUICK_REPLIES:"quickReplies",BUTTON:"button",LIST:"list"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.State={INIT:"init",INITIALIZED:"initialised",PRE_CHAT:"preChat",REQUESTED:"startChat",CHATTING:"chatting",POST_CHAT:"postChat",PRE_SMS:"preSms",OFFLINE:"offline",WAITING:"waiting",PENDING:"pending",ENDED:"ended",NOT_FOUND:"notfound",APP_ENDED:"applicationEnded",ERROR:"error",RESUME:"resume",PAUSED:"paused",RESUME_PAUSED:"resumepaused",AUTH_ERROR:"authenticationError",CONNECTION_ISSUE:"connectionIssue",RESTART_AUTHENTICATION:"restartAuthentication",STEP_UP_AUTH:"stepUpAuth",INTERACTIVE:"interactive"};lpTag.unifiedWindow.Priority=function(){var a=lpTag.unifiedWindow.State,b={},c=0;b[a.INIT]=c++;b[a.INITIALIZED]=c++;b[a.PRE_CHAT]=c;b[a.OFFLINE]=c++;b[a.REQUESTED]=c++;b[a.WAITING]=c;b[a.PENDING]=c;b[a.RESUME]=c;b[a.PAUSED]=c;b[a.RESUME_PAUSED]=c;b[a.CHATTING]=c++;b[a.ENDED]=c++;b[a.POST_CHAT]=c++;b[a.NOT_FOUND]=c++;b[a.ERROR]=c++;b[a.APP_ENDED]=c;return b}();lpTag.unifiedWindow.MessageState={ERROR:"ERROR",PENDING:"PENDING",SENT:"SENT",VIEWED:"VIEWED",ACCEPT:"ACCEPT",READ:"READ",FAILED:"FAILED"};lpTag.unifiedWindow.MessagePriority=function(){var a=lpTag.unifiedWindow.MessageState,b={},c=0;b[a.ERROR]=c;b[a.PENDING]=c++;b[a.SENT]=c++;b[a.VIEWED]=c++;b[a.ACCEPT]=c++;b[a.READ]=c++;b[a.READ]=c++;b[a.FAILED]=c++;return b}();lpTag.unifiedWindow.secureFormStates={SEND:"send",RECEIVED:"received",VIEWED:"viewed",VIEWED_ON_ANOTHER_TAB:"viewedOnAnotherTab",ABORTED:"aborted",SUBMIT:"submit",ERROR:"error"};lpTag.unifiedWindow.richContentStates={ACTION_EVENT:"actionEvent",PUBLISH_TEXT:"publishText",DISPLAYED:"contentDisplayed",SUBMIT_AS_TEXT:"submitAsText"};lpTag.unifiedWindow.quickRepliesStates={ACTION_EVENT:"actionEvent",PUBLISH_TEXT:"publishText"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.welcomeMessageStates=lpTag.unifiedWindow.welcomeMessageStates||{showTiming:{FIRST_TIME:"FIRST_TIME",EVERY_TIME:"EVERY_TIME"}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ChatModelPath=lpTag.unifiedWindow.ChatModelPath||function(){if(!lpTag.unifiedWindow.chatModelPath){var a={name:"chatModel"},b=window.liveperson.uiframework.latest.LPModel;a.LINES=b.createPath("chat.lines",null,a.name);a.SECURE_FORMS=b.createPath("chat.secureForms",null,a.name);a.AGENT_NAME=b.createPath("chat.agentName",null,a.name);a.VISITOR_NAME=b.createPath("chat.visitorName",null,a.name);a.PARTICIPANTS=b.createPath("chat.participants",null,a.name);a.AGENT_ID=b.createPath("chat.agentId",null,a.name);a.CHAT_ID=b.createPath("chat.chatId",null,a.name);a.CURRENT_DIALOG_TYPE=b.createPath("chat.currentDialogType",null,a.name);a.AGENT_IS_TYPING=b.createPath("chat.agentIsTyping",null,a.name);a.SURVEYS_PRECHAT=b.createPath("chat.surveys.preChat",null,a.name);a.SURVEYS_EXIT=b.createPath("chat.surveys.exit",null,a.name);a.SURVEYS_OFFLINE=b.createPath("chat.surveys.offline",null,a.name);a.TTR=b.createPath("chat.ttr",null,a.name);a.TRANSCRIPT_LOADED=b.createPath("chat.transcriptLoaded",null,a.name);a.SDK_NOTIFICATIONS=b.createPath("windowsdk.notifications",null,a.name);a.SDK_BUTTON_ENABLE=b.createPath("windowsdk.buttonEnable",null,a.name);a.SURVEYS_PRESMS=b.createPath("chat.surveys.preSms",null,a.name);lpTag.unifiedWindow.chatModelPath=a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.UIModelPath=lpTag.unifiedWindow.UIModelPath||function(){if(!lpTag.unifiedWindow.uiModelPath){var a={name:"uiModel"},b=window.liveperson.uiframework.latest.LPModel;a.STATE=b.createPath("chat.state",null,a.name);a.CONVERSATION_DATA=b.createPath("chat.conversationData",null,a.name);a.AGENT_PICTURE_URL=b.createPath("chat.agentPicUrl",null,a.name);a.VISITOR_TYPING=b.createPath("chat.isVisitorTyping",null,a.name);a.WINDOW_MAXIMIZED=b.createPath("window.maximized",null,a.name);a.ACTIONS_VISIBLE=b.createPath("window.actionsVisible",null,a.name);a.EMOJI_VISIBLE=b.createPath("window.emojisVisible",null,a.name);a.TOP_MENU_VISIBLE=b.createPath("window.topMenuVisible",null,a.name);a.WINDOW_POSITION=b.createPath("window.position",null,a.name);a.WINDOW_SOUND=b.createPath("window.sound",null,a.name);a.EMOJI_MENU=b.createPath("window.emojiMenu",null,a.name);a.WINDOW_EMBEDDED=b.createPath("window.embedded",null,a.name);a.LAST_LINE_VIEWED=b.createPath("window.lastLineViewed",null,a.name);a.ACTION_POPOUT_ENABLE=b.createPath("popout.enable",null,a.name);a.SECURE_FORMS_TAB_HANDLER=b.createPath("collaboration.secureFormsTabHandler",null,a.name);a.IDNV_DATA=b.createPath("collaboration.idnvData",null,a.name);a.WIDGET_SLIDER_VISIBLE=b.createPath("windowsdk.sliderVisible",null,a.name);a.SELECTED_WIDGET_ID=b.createPath("windowsdk.selectedWidgetId",null,a.name);a.DISPOSED_WIDGETS_IDS=b.createPath("windowsdk.disposedWidgetsIds",null,a.name);a.INITIATED_WIDGETS_IDS=b.createPath("windowsdk.InitiatedWidgetsIds",null,a.name);a.WIDGETS_NOTIICATIONS=b.createPath("windowsdk.widgetsNotifications",null,a.name);a.STEP_UP_STATE=b.createPath("chat.stepUpState",null,a.name);a.PRE_SMS_CONTEXT=b.createPath("chat.preSmsContext",null,a.name);a.LAST_VIEWED_TAB=b.createPath("tabs.lastViewedTab",null,a.name);a.TAB_LIST=b.createPath("tabs.list",null,a.name);a.SECURE_FORMS_INVITATIONS=b.createPath("collaboration.sfInvMapping",null,a.name);lpTag.unifiedWindow.uiModelPath=a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.WidgetModelPath=lpTag.unifiedWindow.WidgetModelPath||function(){if(!lpTag.unifiedWindow.widgetModelPath){var a={name:"WidgetModelPath"},b=window.liveperson.uiframework.latest.LPModel;a.CONVERSATION_ID=b.createPath("conversation.id",null,a.name);a.SESSION_ID=b.createPath("conversation.sessionId",null,a.name);a.DIALOGS=b.createPath("conversation.dialogs",null,a.name);a.WINDOW_UI=b.createPath("ui.window",null,a.name);lpTag.unifiedWindow.widgetModelPath=a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ChatDelegate=lpTag.unifiedWindow.ChatDelegate||function(a,b){function c(){var b=window.location.hostname.indexOf("liveperson.net")>0?["xhr","postmessage","rest2jsonp"]:["postmessage","rest2jsonp"],c={transportOrder:b,lpNumber:a.accountId,appKey:a.appKey,domain:a.domain||"",secureStorageLocation:a.secureStorageLocation,sessionUID:a.sessionId,useSecureStorage:a.useSecureStorage,failureTolerance:a.failureTolerance,reconnectTimeout:a.reconnectTimeout,onInfo:G,onInit:I,onState:O,onEventList:J,onSessionData:L,onAgentTyping:K,onAuthentication:h,onAuthenticationFail:i,firstParty:!0};a.chatPollInterval&&(c.chatPollInterval=a.chatPollInterval);a.chatExitSurveyInterval&&(c.chatExitSurveyInterval=a.chatExitSurveyInterval);M();V=new lpTag.taglets.ChatOverRestAPI(c);aa.info("createChatInstance",Z)}function d(){V=null;ga={}}function e(c,d){var e={};if(a.agent&&"string"==typeof a.agent)e.agent=a.agent;else{a.skill&&"string"==typeof a.skill&&(e.skill=a.skill);a.maxWaitTime&&"number"==typeof a.maxWaitTime&&(e.maxWaitTime=a.maxWaitTime)}e.success=function(a){b.trigger({appName:$,eventName:ca.AVAILABILITY,data:a});c&&c(a)};e.error=P(d);V.getAvailabilty(e)}function f(b,c){var d={};a.preSurveyId?d.surveyApiId=a.preSurveyId:a.visitorProfile?d.visitorProfile=a.visitorProfile:a.surveyName?d.surveyName=a.surveyName:a.visitorIp&&(d.visitorIp=a.visitorIp);
a.skill&&(d.skill=a.skill);k(d);aa.info("getPreChatSurvey, configuration="+JSON.stringify(d),Z);d.success=function(a){F(ba.PRE_CHAT,!0);b&&b(a)};d.error=P(c,!0);V.getPreChatSurvey(d)}function g(a,b,c){X=b;Y=c;V.authenticate({authChatConnId:a.connectorId,ssoKey:a.ssoKey,redirectUri:a.redirectUri,engagementId:a.engConf.eid,contextId:a.engConf.scid,sessionId:a.engConf.ssid,visitorId:a.engConf.svid})}function h(a){X&&X(a||{})}function i(a){Y&&Y(a||{})}function j(b,c,d){var e=b&&b.surveyData,f=b&&b.conversationData,g={};if(a||e||f){if(a.agent)g.agent=a.agent;else if(a.skill)g.skill=a.skill;else if(a.serviceQueue&&!isNaN(a.maxWaitTime)){g.serviceQueue=a.serviceQueue;g.maxWaitTime=a.maxWaitTime}a.interactionTimeout&&(g.interactionTimeout=a.interactionTimeout);a.queuePriority&&(g.queuePriority=a.queuePriority);(a.availabilityPolicy===da.OFFLINE||a.availabilityPolicy===da.CHAT)&&(g.availabilityPolicy=a.availabilityPolicy);a.preChatLines&&"object"==typeof a.preChatLines&&(g.preChatLines=Object.keys(a.preChatLines).map(function(b){return a.preChatLines[b]}));"string"==typeof a.ssoKey&&(g.ssoKey=a.ssoKey);e&&"object"==typeof e&&e.survey&&e.survey.question&&e.survey.question.length>0&&(g.survey=e.survey);if(f&&"object"==typeof f){g.participantId=f.participantId;g.conversationId=f.conversationId}k(g);g.engagementId=a.eid;g.campaignId=a.cid;g.language=a.lang;Q()&&T(g)}aa.info("startChat="+JSON.stringify(g),Z);g.success=function(a){c&&c(a)};g.error=P(d);V.requestChat(g)}function k(b){if(a){"string"==typeof a.svid&&(b.LETagVisitorId=a.svid);"string"==typeof a.ssid&&(b.LETagSessionId=a.ssid);"string"==typeof a.scid&&(b.LETagContextId=a.scid)}}function l(a,b,c){V.addLine({text:a.text,success:b,error:c});aa.info("sendLine="+JSON.stringify(ka.excludeAttributes(ka.clone(a),["text"])),Z)}function m(a,b,c,d){var e={subType:ca.SECURE_FORM,command:a,info:c};d&&(e.text=d);S(o).call(this,e)}function n(a,b){lpTag.taglets.lpUtil.runCallback(b,null,{submitOtk:a&&a.submitOtk,formOtk:a&&a.getOtk})}function o(a,b,c){if(a){a.success=b;a.error=c;V.sendCollaboration(a)}aa.info("sendCollaboration="+JSON.stringify(a),Z)}function p(a,b,c){if(W&&(W===ba.CHATTING||W===ba.INTERACTIVE)){V.setVisitorTyping({typing:a,success:b,error:c});aa.info("setVisitorTyping="+a,Z)}}function q(a,b,c,d){var e=6e4*(new Date).getTimezoneOffset();V.requestTranscript({email:a,subject:b,success:c,error:d,timezoneOffset:e});aa.info("emailTranscript="+JSON.stringify(a),Z)}function r(){aa.info("resumingPauseChat",Z);V.getState()===V.chatStates.PAUSECHAT&&V.resumePausedChat()}function s(){aa.info("pausingChat",Z);V.pauseChat()}function t(a,b){V.endChat({success:function(b){a&&a(b)},error:b});aa.info("endChat",Z)}function u(a,b,c){if(a&&a.survey&&a.survey.question&&a.survey.question.length>0)V.submitExitSurvey({survey:a.survey,success:function(a){F(ba.APP_ENDED,!0);b&&b(a)},error:c});else{c({error:"Missing survey data"});aa.error("submitExitChatSurvey, No Survey Data",Z);v()}}function v(){V.cancelSurvey()}function w(b,c){var d={windowSurveyEnabled:!0,success:function(a){F(ba.OFFLINE,!0);b&&b(a)},error:P(c)};a.surveyOfflineId?d.surveyApiId=a.surveyOfflineId:a.visitorProfile?d.visitorProfile=a.visitorProfile:a.visitorId?d.visitorId=a.visitorId:a.surveyName&&(d.surveyName=a.surveyName);a.skill&&(d.skill=a.skill);a.skillId&&(d.engSkillId=a.skillId);k(d);V.getOfflineSurvey(d)}function x(b,c,d){var e={success:function(a){F(ba.APP_ENDED,!0);c&&c(a)},error:d};if(b&&b.survey&&b.survey.question&&b.survey.question.length>0){"string"==typeof a.svid&&(e.LETagVisitorId=a.svid);"string"==typeof a.ssid&&(e.LETagSessionId=a.ssid);"string"==typeof a.scid&&(e.LETagContextId=a.scid);"string"==typeof a.offsiteEngContext&&(e.offsiteEngContext=a.offsiteEngContext);"string"==typeof a.skill&&(e.skill=a.skill);Q()&&T(e);e.survey=b.survey;V.submitOfflineSurvey(e);aa.info("submitOfflineSurvey, survey"+JSON.stringify(b.survey),Z)}else{d({error:"Missing survey data"});e=null;aa.error("submitOfflineSurvey, ERROR",Z);v()}}function y(b,c,d){var e={windowSurveyEnabled:!!b,success:function(a){F(ba.POST_CHAT,!0);c&&c(a)},error:P(d,!0)};a.exitSurveyId?e.surveyApiId=a.exitSurveyId:a.surveyName&&(e.surveyName=a.surveyName);a.skillId&&(e.engSkillId=a.skillId);V.getExitSurvey(e);aa.info("getExitSurvey, id="+a.exitSurveyId,Z)}function z(){V.disposeVisitor()}function A(){V.reInit()}function B(){return V.getSessionKey()}function C(){return ea}function D(){return fa.visitor}function E(a,b){aa.info("richContentRequest with body: "+JSON.stringify(a)+" and data: "+JSON.stringify(b),Z);a&&a.sequenceId&&a.state&&V.addLineStatusEvent({status:a.state,metadata:b,refSequenceId:a.sequenceId})}function F(c,d){W=c;ba.NOT_FOUND===W&&(W=ba.APP_ENDED);b.trigger({appName:$,eventName:ca.STATE,data:W,global:!0});ba.CHATTING===W&&b.trigger({appName:_,eventName:ca.ENGAGEMENT_DATA,global:!0,data:{engagementName:a.ename,state:W}});if(d||ba.WAITING===W||ba.ENDED===W){ga.chatState=W;H()}ba.ENDED===W&&b.trigger({appName:$,eventName:ca.BLOD,data:{engagementName:a.ename}})}function G(b){if("object"==typeof b){ga=ga||{};ga.agentName=b&&b.agentName||"";ga.agentId=b&&b.agentId||"";ga.agentPictureUrl=b&&b.agentPictureUrl||"";ga.skillName=b&&b.skillName||"";ga.rtSessionId=b&&b.rtSessionId||ga.rtSessionId||"";ga.chatState=b&&b.chatState||ga.chatState||"";ga.monitoringSessionId=a&&a.ssid||ga.monitoringSessionId||"";ga.visitorId=a&&a.svid||ga.visitorId||"";ga.visitorName=b&&b.visitorName||ga.visitorName||"";ga.skill=a&&a.skill||ga.skill||"";ga.engagementId=a&&a.eid||ga.engagementId||"";ga.campaignId=a&&a.cid||ga.campaignId||"";ga.language=a&&a.lang||ga.language||"";ga.engagementName=a&&a.ename||ga.engagementName||"";ga.lastUpdate=b.lastUpdate||ga.lastUpdate||"";H()}}function H(){b.trigger({appName:$,eventName:ca.CHAT_INFO,data:ga})}function I(a){if(!a||a.error||"ERROR"===a)b.trigger({appName:$,eventName:ca.ERROR,data:{errorType:la.CONNECTION_UNAVAILABLE}});else if(!ea){R();F(ba.INIT);b.trigger({appName:$,eventName:ca.INITIALIZED});ea=!0}}function J(a){for(var c,d=Array.isArray(a)?a:[a],e=0;e<d.length;e++){c=d[e];ka.indexOf(ha,c[ia])>=0&&b.trigger({appName:$,eventName:c[ia]===ja?c.subType:c[ia],data:c})}b.trigger({appName:$,eventName:ca.FINISHED_EVENTS_BULK})}function K(a){b.trigger({appName:$,eventName:ca.AGENT_TYPING,data:a})}function L(a){b.trigger({appName:$,eventName:ca.SESSION_DATA,data:a})}function M(){fa.bindId=b.bind({appName:$,eventName:ca.LINE,func:N})}function N(a){switch(a.source){case"visitor":fa.visitor=!0;break;case"agent":fa.agent=!0}if(fa.agent&&fa.visitor){F(fa.state,!0);b.unbind(fa.bindId)}}function O(a){F(a.state)}function P(a,c){return function(d){a&&a(d);c||d&&d.error&&(5===d.error.internalCode||32===d.error.internalCode||Q()&&10===d.error.internalCode)||b.trigger({appName:$,eventName:ca.ERROR,data:{errorType:la.CONNECTION_UNAVAILABLE}})}}function Q(){return window.recaptchaRenderer}function R(){if(window.recaptchaRendererV2&&V.isCaptchaV2Supported&&V.isCaptchaV2Supported()){window.recaptchaRenderer=window.recaptchaRendererV2;window.recaptchaRenderer.renderCaptcha(a);window.recaptchaRendererV1.removeFromPage()}else window.recaptchaRendererV1&&(window.recaptchaRenderer=window.recaptchaRendererV1)}function S(a){return function(){V&&a.apply(null,arguments)}}function T(a){var b=window.recaptchaRenderer.getRecaptchaProps()||{};Object.keys(b).forEach(function(c){a[c]=b[c]})}function U(){}var V,W,X,Y,Z="ChatDelegate",$=lpTag.unifiedWindow.apps.CHAT,_=lpTag.unifiedWindow.apps.UNIFIED_WINDOW,aa=lpTag.unifiedWindow.log,ba=lpTag.unifiedWindow.State,ca=lpTag.unifiedWindow.events.chat,da=(lpTag.taglets.postmessage,{OFFLINE:0,CHAT:1}),ea=!1,fa={state:ba.INTERACTIVE,agent:!1,visitor:!1,bindId:null},ga={},ha=["line","leCollaboration"],ia="@type",ja="leCollaboration",ka=lpTag.unifiedWindow.applicationUtils,la=lpTag.unifiedWindow.consts.errorTypes;return{createChatInstance:c,isInitialized:C,isInteractive:D,dispose:d,resumePolling:S(r),stopPolling:S(s),getAvailability:S(e),getPreChatSurvey:S(f),startConversation:S(g),startChat:S(j),sendLine:S(l),sendCollaboration:S(o),sendStatesUpdate:S(U),setVisitorTyping:S(p),emailTranscript:S(q),endChat:S(t),getExitSurvey:S(y),submitExitChatSurvey:S(u),getOfflineSurvey:S(w),submitOfflineSurvey:S(x),cancelSurvey:S(v),disposeVisitor:S(z),reInit:S(A),getSessionKey:B,secureFormRequest:m,getSecureFormOTKs:n,richContentRequest:S(E)}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.MessagingDelegate=lpTag.unifiedWindow.MessagingDelegate||function(a,b){function c(b){b.authType===Za&&lpTag.taglets.lp_monitoringSDK&&!a.isExternalWindow?d(b):e(b)}function d(a){if(lpTag.identities&&lpTag.identities.length)if(Ya||lpTag.identitiesObjects&&lpTag.identitiesObjects.length){f();e(a)}else lpTag.events.once({eventName:"SP_SENT",appName:"*",func:function(){Ya=!0;f();e(a)}});else e(a)}function e(a){xa=D(a);wa=!0;if(a.forceNewConfig){K();va=new lpTag.UMSClientAPI(xa)}else va?va.reInit(xa):va=new lpTag.UMSClientAPI(xa);Ca.info("createMessagingInstance",Aa)}function f(){var b,c=lpTag.identitiesObjects.filter(function(a){return a.tkn&&a.redirect_uri});if(c.length){b={connectorsJwt:c[0].tkn,isSecureIdentity:!0};a.connectorsSfConfig=a.connectorsSfConfig||b}}function g(){xa&&(va=new lpTag.UMSClientAPI(xa));Ca.info("amsClient::reInit",xa)}function h(){var a={};a.success=function(){};a.error=function(){};va.getMyUserProfile(a);Ca.info("getMyUserProfile, configuration="+JSON.stringify(a),Aa)}function i(a,b){Ca.info("getOTK "+JSON.stringify(a),Aa);var c={uploadable:{dialogId:Va.id}};"object"==typeof a&&(c.uploadable=Ma.cloneExtend(c.uploadable,a));va.generateUploadToken({success:b,error:b},c)}function j(b){if(b)if(b.contentType){va.sendPCIMessage(b);"submit"===b.state&&a.connectorsSfConfig&&(a.connectorsSfConfig.isFormSubmitted=!0)}else va.markMessagesState(b)}function k(a){Ca.info("richContentRequest with body: "+JSON.stringify(a),Aa);a&&va.markMessagesState(a)}function l(a){Ca.info("quickRepliesRequest with body: "+JSON.stringify(a),Aa);a&&va.markMessagesState(a)}function m(a){Ca.info("imageShareGenerateUrlRequest with body: "+JSON.stringify(a),Aa);a&&va.generateURLForUploadFile(a)}function n(a){Ca.info("imageShareDownloadUrlRequest with body: "+JSON.stringify(a),Aa);a&&va.generateURLForDownloadFile(a)}function o(){var b={brandId:a.accountId};va.getBrandProfile(b);Ca.info("getBrandProfile, brandId= "+b.brandId,Aa);if(a.subscription&&a.subscription.conversationowneraccountid){b={brandId:a.subscription.conversationowneraccountid};va.getBrandProfile(b);Ca.info("getBrandProfile, brandId= "+b.brandId,Aa)}}function p(c){Ca.info("_onBrandProfile, info="+JSON.stringify(c),Aa);a.subscription&&c.brandId===a.subscription.conversationowneraccountid?b.trigger({appName:Ba,eventName:Ka.CONVERSATION_OWNER_BRAND_INFO,data:c}):b.trigger({appName:Ba,eventName:Ka.BRAND_INFO,data:c})}function q(a,b){var c={};c.success=a;c.error=b;va.subscribeConversations(c);Ca.info("subscribeConversations, configuration="+JSON.stringify(c),Aa)}function r(a){va.updateConversationParticipantForStepUp(a)}function s(a,b,c){var d={};d.subscriptionId=a;d.success=b;d.error=c;va.unsubscribeConversations(d);Ca.info("unsubscribeConversations, configuration="+JSON.stringify(d),Aa)}function t(a){var b={};if(Va.isActive){b.dialogId=Va.id;b.success=a;b.error=a;va.closeDialog(b)}else Ma.runCallback(a);Ca.info("closeDialog, configuration="+JSON.stringify(b),Aa)}function u(a,b,c){var d={};d.conversationId=Ua.id;d.success=function(){x(a,b,c)};d.error=function(){};va.closeConversation(d);Ca.info("_closeConversation, configuration="+JSON.stringify(d),Aa)}function v(a,b,c){Ua.isActive?Ua.isActive&&!Va.isActive?u(a,b,c):A(a,b,c):x(a,b,c)}function w(a,b,c){Ua.isActive?Ua.isActive&&!Va.isActive?u(a,b,c):B(a,b,c):x(a,b,c)}function x(b,c,d){a.subscription&&a.subscription.conversationowneraccountid!==lpTag.site?y(b,c,d):z(b,c,d)}function y(b,c,d){var e=!1;lpTag.taglets.providerSubscription.getSharkSession(a.subscription.conversationowneraccountid,function(f){if(!e){e=!0;a.ssid=f;z(b,c,d)}});setTimeout(function(){if(!e){e=!0;z(b,c,d)}},3e3)}function z(c,d,e){var f={conversationContext:{type:"SharkContext",lang:a.lang||Ra},campaignInfo:{}};f.channelType=Ja.MESSAGING;if(a.skillId&&"number"==typeof a.skillId){f.skillId=a.skillId;Ta.skill=a.skillId}if("string"==typeof a.svid){f.conversationContext.visitorId=a.svid;Ta.visitorId=a.svid}"string"==typeof a.ssid&&(f.conversationContext.sessionId=a.ssid);"string"==typeof a.scid&&(f.conversationContext.interactionContextId=a.scid);f.conversationContext.subscription=a.subscription;f.campaignInfo.campaignId=a.cid;Ta.campaignId=a.cid;f.campaignInfo.engagementId=a.eid;f.success=function(a){b.trigger({appName:Ba,eventName:Ka.NEW_CONVERSATION_CREATED,data:a});if(Ua&&a&&Ua.id===a.conversationId)c&&c.type&&c.type===Qa?B(c,d,e):A(c,d,e);else{na(a&&a.conversationId);Wa.push({line:c,success:d,error:e})}};f.error=e;b.trigger({appName:Ba,eventName:Ka.NEW_CONVERSATION_REQUESTED});Z();C("createConversation",f,this);Ca.info("createConversation, configuration="+JSON.stringify(f),Aa)}function A(a,b,c){if(a){var d={};d.dialogId=Va.id;d.success=F(b);d.error=c;d.text=a.text;if(a.contentType&&a.contentType==lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING){d.text=a.fileData;d.contentType=a.contentType}a.metadata&&(d.metadata=a.metadata);va.sendMessage(d);Ca.info("_sendLine="+JSON.stringify(a),Aa)}}function B(a,b,c){if(a){var d={};d.dialogId=Va.id;d.success=F(b);d.error=c;d.json=a.json;va.sendStructuredContentMessage(d);Ca.info("_sendStructuredContentLine="+JSON.stringify(a),Aa)}}function C(a,b,c){var d="function"==typeof va.isConnected?va.isConnected():!wa;if(d)"function"==typeof va[a]&&va[a].apply(c||this,!b||b instanceof Array?b:[b]);else{Xa.push(C.bind(this,a,b,c));g()}}function D(b){var c={connectorsSfConfig:a.connectorsSfConfig,domain:a.asyncMessagingDomain,IDPDomain:a.idpDomain,connectorId:a.connectorId,historyDomain:a.messagingHistoryDomain,blockHistory:b.blockHistory,emptyHistoryConvoMaxRetries:1,emptyHistoryConvoRetryTimeout:200,authCode:b.authCode,redirect_uri:b.redirect_uri||a.redirect_uri,authType:b.authType,hasAuthentication:!0,accountId:a.subscription?a.subscription.conversationowneraccountid||a.accountId:a.accountId,subscription:a.subscription,memberType:Ea.USER||"",storageConf:{useSecureStorage:a.useSecureStorage,secureStorageLocation:a.secureStorageLocation,lpNumber:a.accountId,appName:Aa},queryParameters:{appName:"webAsync",features:["AUTO_MESSAGES","RICH_CONTENT","CO_BROWSE","PHOTO_SHARING","QUICK_REPLIES","MULTI_DIALOG","FILE_SHARING","MARKDOWN_HYPERLINKS"],timeZone:E()},isStepUpEnabled:a.isStepUpEnabled,isFetchEnabled:a.isFetchEnabled,directOrderForPendingContent:!0,onSocketConnected:L,onSocketInitialized:M,onConversationStepUp:N,onSubscribeMessagingResponse:ba,onUserInfo:U,onConversationList:W,onParticipantJoined:$,onParticipantLeft:_,onContent:aa,onConversationState:da,onDialogChatStateChanged:ea,onDialogUpdated:fa,onTTRUpdated:ha,onCSATUpdated:ia,onBrandProfile:p,onSessionInvalidated:P,onSocketClosed:O,onAuthenticationError:Q,onServiceNonResponsive:R,onPingSuccess:S,onDeletedSubscriptionFromConversation:T,pingTimeout:b.pingTimeout,resendTimedOutRequests:!0,restRecoveryPolicy:lpTag.AMSStatics.RECOVERY_POLICY.MODERATE,throttlingSupportEnabled:a.throttlingSupportEnabled||!0,throttlingTimeoutValue:a.throttlingTimeoutValue,appVersion:lpTag.unifiedWindow.Application.v,historySource:"unifiedWindow"};a.amsClientConfig&&(c=lpTag.taglets.lpUtil.cloneExtend(a.amsClientConfig,c));b.codeVerifier&&(c.code_verifier=b.codeVerifier);return c}function E(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone||null}catch(a){Ca.info("_getCustomerTimezone, Intl API not supported");return null}}function F(a){return function(b){var c;"function"==typeof a&&b&&!isNaN(b.sequence)&&(c={"@id":b.sequence,convId:Va.id});a(c)}}function G(a){var b={dialogId:Va.id,chatState:a?Ia.COMPOSING:Ia.ACTIVE};va.setDialogChatState(b)}function H(a){va.setTTR({conversationId:Ua.id,ttrType:a?Ha.urgent:Ha.normal})}function I(a){return va.subscribeMessagingEvents(a)}function J(a,b,c){var d,e={success:b,error:c,conversationId:Ua.id||a.convId,CSAT:{}};a=a||{};e.CSAT.status=a.status;d=a.survey&&a.survey.question[0]&&a.survey.question[0].answer;d&&(e.CSAT.csatRate=+d||0);va.setCSAT(e)}function K(a){va&&va.dispose();a||(va=null)}function L(a){if(a&&200===a.statusCode){wa=!1;b.trigger({appName:Ba,eventName:La.CONNECTED,data:a})}else V();Ca.info("_onSocketConnected, data="+JSON.stringify(a),Aa)}function M(a){if(a&&200===a.code){b.trigger({appName:Ba,eventName:La.INITIALIZED,data:a});b.trigger({appName:Ba,eventName:Ka.STATE,data:Da.INIT,global:!0})}else V();if(Xa.length){var c=[].concat(Xa);Xa=[];c.forEach(function(a){"function"==typeof a&&a()})}Ca.info("_onSocketInitialized, data="+JSON.stringify(a),Aa)}function N(a){b.trigger({appName:"AMSClient",eventName:"onConversationStepUp",data:a});Ca.info("_onConversationStepUp, data="+JSON.stringify(a),Aa)}function O(a){wa=!0;Ca.info("_onSocketClosed, data="+JSON.stringify(a),Aa);b.trigger({appName:Ba,eventName:La.DISCONNECTED,data:a})}function P(a){b.trigger({appName:Ba,eventName:Ka.AUTHENTICATION_ERROR,data:{error:Oa.EXPIRED,data:a}});Ca.info("_onSessionInvalidated, data="+JSON.stringify(a),Aa)}function Q(a){b.trigger({appName:"*",eventName:Ka.AUTHENTICATION_ERROR,data:{error:Oa.INVALID_SESSION,data:a}});Ca.info("_onAuthenticationError, data="+JSON.stringify(a),Aa)}function R(a){Ca.info("_onServiceNonResponsive, data="+JSON.stringify(a),Aa);b.trigger({appName:Ba,eventName:La.NON_RESPONSIVE,data:a})}function S(a){b.trigger({appName:Ba,eventName:La.PING_SUCCESS,data:a})}function T(a){b.trigger({appName:Ba,eventName:Ka.DELETE_CONVERSATION_SUBSCRIPTION,data:a})}function U(a){b.trigger({appName:Ba,eventName:Ka.USER_INFO,data:a});Ca.info("_onUserInfo, info="+JSON.stringify(a),Aa)}function V(){b.trigger({appName:Ba,eventName:Ka.ERROR,data:{errorType:Na.CONNECTION_UNAVAILABLE}})}function W(c){var d=c&&c.data||c,e=d.filter(function(a){return a.conversationDetails.state===Fa.OPEN}),f=e[0]&&e[0].convId;if(f){na(f,e[0]);oa({conversation:e[0]});pa()}else Pa!=c.subscriptionId&&(Ua={id:null,isActive:!1});ya=ya||d.length>0;b.trigger({appName:Ba,eventName:Ka.CONVERSATION_HISTORY,data:d});Ta.language=a.lang||Ra;b.trigger({appName:Ba,eventName:Ka.CHAT_INFO,data:Ta});ya?Z():X()}function X(){if(va.isWebSocketConnection()&&!za){var b=3e4;a.connectionTimeoutValue&&(a.connectionTimeoutValue<0?b=void 0:a.connectionTimeoutValue>1e4&&(b=a.connectionTimeoutValue));b&&(za=setTimeout(Y,b))}}function Y(){K(!0)}function Z(){if(za){clearTimeout(za);za=void 0}}function $(a){for(var c=a.data||a,d=0;d<c.length;d++)b.trigger({appName:Ba,eventName:Ka.USER_INFO,data:c[d]})}function _(a){for(var c=a.data||a,d=0;d<c.length;d++)b.trigger({appName:Ba,eventName:Ka.USER_LEFT,data:c[d]})}function aa(a){b.trigger({appName:Ba,eventName:Ka.CONVERSATION_CONTENT,data:a})}function ba(a){b.trigger({appName:Ba,eventName:Ka.SUBSCRIBE_MESSAGING_EVENTS_RESPONSE,data:a})}function ca(b,c){var d=Ma.groupByKeyValue(b,"convId");for(var e in d)"undefined"!==e&&(a.connectorsSfConfig&&a.connectorsSfConfig.isSecureIdentity||la(d[e],c,e))}function da(a){var c;a=a&&a.data||a;for(var d=0;d<a.length;d++)if(a[d].convId===Ua.id){if(a[d].state===Fa.OPEN)c=Da.CHATTING;else{c=Da.ENDED;Ua.isActive=!1}b.trigger({appName:Ba,eventName:Ka.CONVERSATION_STATE,data:{state:a[d].state,time:a[d].ts,closeReason:a[d].closeReason,convId:a[d].convId}});b.trigger({appName:Ba,eventName:Ka.STATE,data:c,global:!0})}}function ea(a){var c;a=Array.isArray(a)?a:[];for(var d=0;d<a.length;d++)if(a[d].dialogId===Va.id){c=Ma.getPropertyFromObject(a[d],"event.chatState");b.trigger({appName:Ba,eventName:Ka.AGENT_TYPING,data:{agentTyping:c===Ia.COMPOSING.toUpperCase(),originatorId:a[d].originatorId}})}}function fa(a){if(a&&a.data)for(var c=0;c<a.data.length;c++){var d=a.data[c];d&&d.channelType===lpTag.unifiedWindow.consts.coBrowse.coBrowseChannelName?b.trigger({appName:Ba,eventName:lpTag.unifiedWindow.events.coBrowseEvents.DIALOG_CREATED,data:d}):ga(d)}}function ga(a){var c;a&&a.state===Ga.OPEN&&a.dialogId!==Va.id&&oa({dialogId:a.dialogId});if(a&&a.dialogId===Va.id){if(a.state===Ga.OPEN)c=Da.CHATTING;else{c=Da.ENDED;Va.isActive=!1}b.trigger({appName:Ba,eventName:Ka.DIALOG_STATE,data:{state:a.state,time:a.metaDataLastUpdateTs,closedBy:a.closedBy,dialogId:a.dialogId,endTime:a.endTs,closeReason:a.closedBy,dialogType:a.dialogType,channelType:a.channelType,participants:a.participants,conversationId:Ua.isActive?Ua.id:null}});b.trigger({appName:Ba,eventName:Ka.STATE,data:c,global:!0})}}function ha(a){ka(a,"ttr","TTR_INFO")}function ia(a){var c=ja(a.data||a);c&&c.csat&&b.trigger({appName:Ba,eventName:Ka.CSAT_INFO,data:c})}function ja(a){var b,c=0;a=a.data||a;for(var d=0;d<a.length;d++)if(Ma.getPropertyFromObject(a[d],"csat.endTs")>c){c=a[d].csat.endTs;b=a[d]}return b}function ka(a,c,d){a=a&&a.data||a;for(var e=0;e<a.length;e++)a[e].convId===Ua.id&&b.trigger({appName:Ba,eventName:Ka[d],data:a[e][c]})}function la(a,b,c){var d=ma(a),e={dialogId:c,state:b,sequenceList:d};va.markMessagesState(e)}function ma(a){var b=a.map(function(a){return a["@id"]});return b}function na(a,b){Ua.id=a;Ua.isActive=!0;Ta.rtSessionId=Ua.id;if(b&&b.conversationDetails){var c=b.conversationDetails.skillId;c&&"-1"!==c?Ta.skill=c:"number"==typeof Ta.skill?Ta.skill=Ta.skill+"":Ta.skill=void 0}}function oa(a){if(a.dialogId){Va.id=a.dialogId;Va.isActive=!0}else if(a.conversation){var b,c=a.conversation.conversationDetails&&a.conversation.conversationDetails.dialogs;if(c&&c.length>0){b=c.filter(function(a){return a.channelType!==lpTag.unifiedWindow.consts.coBrowse.coBrowseChannelName&&a.state===Ga.OPEN});Va.id=b.length>0?b[0].dialogId:null;Va.isActive=b.length>0}}}function pa(){if(Wa.length>0){for(var a=0;a<Wa.length;a++)Wa[a].line&&Wa[a].line.type&&Wa[a].line.type===Qa?B(Wa[a].line,Wa[a].success,Wa[a].error):A(Wa[a].line,Wa[a].success,Wa[a].error);Wa=[]}}function qa(a){return function(){return va?a.apply(null,arguments):void 0}}function ra(){return Va&&Va.id}function sa(){return va.getTimeDiff()}function ta(b){b.skillId=a.skillId&&"number"==typeof a.skillId?a.skillId:Sa;va.sendShiftStatus(b)}function ua(){return Ua&&Ua.isActive}var va,wa,xa,ya,za,Aa="MessagingDelegate",Ba=lpTag.unifiedWindow.apps.CHAT,Ca=lpTag.unifiedWindow.log,Da=lpTag.unifiedWindow.State,Ea=lpTag.AMSStatics.memberTypes,Fa=lpTag.AMSStatics.conversation.states,Ga=lpTag.AMSStatics.dialog.states,Ha=lpTag.AMSStatics.effectiveTTRTypes,Ia=lpTag.AMSStatics.chatStates,Ja=lpTag.AMSStatics.channelTypes,Ka=lpTag.unifiedWindow.events.chat,La=lpTag.unifiedWindow.events.socket,Ma=lpTag.unifiedWindow.applicationUtils,Na=lpTag.unifiedWindow.consts.errorTypes,Oa=lpTag.unifiedWindow.consts.authErrorsTypes,Pa=(lpTag.unifiedWindow.consts,"historyAPI"),Qa="richContent",Ra="en-US",Sa=-1,Ta={},Ua={id:null,isActive:!1},Va={id:null,isActive:!1},Wa=[],Xa=[],Ya=!1,Za=2;return{createMessagingInstance:c,getMyUserProfile:qa(h),getBrandProfile:qa(o),updateStepUpParticipants:r,subscribeConversations:qa(q),unsubscribeConversations:qa(s),createConversation:qa(x),closeDialog:qa(t),sendLine:qa(v),sendStructuredContentLine:qa(w),sendStatesUpdate:qa(ca),setVisitorTyping:G,setConversationUrgency:qa(H),subscribeMessagingEvents:qa(I),submitExitChatSurvey:qa(J),getOTK:qa(i),secureFormRequest:qa(j),richContentRequest:qa(k),quickRepliesRequest:qa(l),getTimeDiff:qa(sa),imageShareGenerateUrlRequest:qa(m),imageShareDownloadUrlRequest:qa(n),getShiftStatus:qa(ta),getSessionKey:ra,currentConversationActive:ua,dispose:K}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.SMSDelegate=lpTag.unifiedWindow.SMSDelegate||function(a,b){function c(){setTimeout(function(){b.trigger({appName:j,eventName:l.INITIALIZED})})}function d(){return a.smsPreFormId}function e(b,c){if(a.smsPreFormId)h(p,"loadSMSForm",c)&&(o?p.loadSMSForm(a.smsPreFormId,b,c,o.provideraccountid):p.loadSMSForm(a.smsPreFormId,b,c));else{k.error("SMSDelegate:getPreSMSForm failed: no smsPreFormId on window");c()}}function f(a,b,c){h(p,"submitSMSForm",c)&&p.submitSMSForm(a,b,c,{sessionId:m,connectorId:n,subscription:o})}function g(){}function h(a,b,c){if(!a||"function"!=typeof a[b]){c("taglet not exists or initilized");return!1}return!0}function i(){o&&o.conversationowneraccountid&&p.setAccount?p.setAccount(o.conversationowneraccountid):p.setAccount(lpTag.site)}var j=lpTag.unifiedWindow.apps.CHAT,k=lpTag.unifiedWindow.log,l=lpTag.unifiedWindow.events.chat,m=a.sessionId,n=a.connectorId,o=a.subscription,p=lpTag.taglets.lp_sms_client_api;i();return{initialize:c,getPreSMSFormId:d,getPreSMSForm:e,submitPreSMSForm:f,dispose:g}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ChatStateManager=lpTag.unifiedWindow.ChatStateManager||function(a,b,c,d){function e(a,b,c,d){Ea.info("init",Ca);pa=c||{};qa=pa.engConf||{};y(a);ua=b.uiModel;va=b.chatModel;p(d);var e=sa.conf.authConf;e&&(Pa=!0);wa=ua.get(lpTag.unifiedWindow.uiModelPath.STATE);var g=wa===Ia.CHATTING||wa===Ia.PRE_CHAT||wa===Ia.OFFLINE||wa===Ia.WAITING;oa()&&Pa&&g&&!sa.conf.unifiedConf.external?sa.authenticationManager.authenticate(function(a){sa.unAuthUserTriesAuth=!a||!a.ssoKey;f()},function(){sa.unAuthUserTriesAuth=!0;f()}):f()}function f(){F();E()}function g(){return xa}function h(a,b){a&&ta.emailTranscript(a,b,C,D)}function i(a){if(a){Aa=a;var b={surveyData:a};fa()?j(b):ta.startChat(b,V,B)}else{u(null,Ia.APP_ENDED);n()}}function j(a){var b=k();if(!b||sa.authenticationManager.isErroneous()){Y();Ea.info("_submitPreChatSurveyForAuthenticatedSession:getOfflineSurvey. convData: "+!!b+", isErroneous: "+!!sa.authenticationManager.isErroneous(),Ca)}else{N({context:"prechat"});if(b)ta.startChat(Ga.cloneExtend(a,{conversationData:b}),V,B);else{za=function(b){ta.startChat(Ga.cloneExtend(a,{conversationData:b.newValue}),V,B)};ua.bind(La.CONVERSATION_DATA,za)}}}function k(){return ua.get(La.CONVERSATION_DATA)}function l(a){if(a){if(!Na){Na=!0;ta.submitExitChatSurvey(a,z,A)}}else{u(null,Ia.APP_ENDED);n()}}function m(a){if(a){if(!Na){Na=!0;ta.submitOfflineSurvey(a,z,A)}}else{u(null,Ia.APP_ENDED);n()}}function n(){ta.cancelSurvey()}function o(){ua.unbind(La.STATE,v);try{ua.unbind(La.CONVERSATION_DATA,za)}catch(a){}ra.unbind({appName:Da,eventName:Ha.STATE,func:ba});ra.unbind({appName:Da,eventName:Ha.INITIALIZED,func:s});ra.unbind({appName:Da,eventName:Ha.BLOD,func:t});ra.unbind({appName:"SessionManager",eventName:Ha.NO_SESSION,func:q});ra.unbind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.END_CHAT,func:ga});ra.unbind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.END_SURVEY,func:n});ra.unbind({appName:Ja.UISTATE,eventName:Fa.uiState.EMBEDDED_CHANGED,func:J});ra.unbind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.PRE_CHAT_SURVEY,func:i});ra.unbind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.POST_CHAT_SURVEY,func:l});ra.unbind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.OFFLINE_SURVEY,func:m});ra.unbind({appName:Da,eventName:Ha.CHAT_INFO,func:K})}function p(a){ta=a.apiDelegate;sa=a.appContext;ra=a.events}function q(){u(null,Ia.APP_ENDED)}function r(a){Ea.info("_tryResume",Ca);var b=ua.get(La.STATE);(!ya||b&&Ka[b]>Ka[ya])&&a(Ka[b],Ka[Ia.ENDED])&&w(null,b,!0)}function s(){Ea.info("_tryInitResume",Ca);r(function(a,b){return b>=a})}function t(){Ea.info("_tryEndResume",Ca);r(function(a,b){return a>b})}function u(a,b){Ea.info("_handleNewState newState= "+b+" err= "+JSON.stringify(a),Ca);var c=ua.get(La.STATE);if(Pa&&oa()&&sa.unAuthUserTriesAuth){b===Ia.APP_ENDED&&sa.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.application.END_CHAT});"init"===b&&"chatting"===c&&(c=null)}if(!c||Ka[c]<=Ka[b]&&c!==b){ya=b;ua.modify({splitKey:La.STATE,updateData:b,onSuccess:function(){(!xa||Ka[b]>=Ka[xa]&&xa!==b)&&w(a,b)}})}}function v(a){Ea.info("_handleNewStateFromModel newState= "+a.newValue,Ca);var b=xa;ya&&xa!==ya&&(b=ya);if(ta.isInitialized()){var c=!1;if(b){if(b!==a.newValue){if(Ka[b]>Ka[a.newValue])return;if(b===Ia.PRE_CHAT){ta.reInit();return}}}else c=!0;w(null,a.newValue,c)}}function w(a,b,c){if(xa!==b){xa=b;switch(b){case Ia.INIT:break;case Ia.INITIALIZED:G();break;case Ia.PRE_CHAT:x(c);break;case Ia.WAITING:case Ia.RESUME:case Ia.PAUSED:case Ia.RESUME_PAUSED:case Ia.CHATTING:break;case Ia.ENDED:da();break;case Ia.POST_CHAT:c&&da();break;case Ia.OFFLINE:x(c);break;case Ia.NOT_FOUND:ia(a);break;case Ia.ERROR:ia(a);break;case Ia.APP_ENDED:ha();break;default:x(c)}}}function x(a){a&&G({resuming:!0})}function y(a){Oa=a.surveyPreChatEnabled||!1;Qa=a.surveyPostChatEnabled||!1;Ea.info("_initSurveyParameters usePreChat= "+Oa+" useExitSurvey= "+Qa,Ca)}function z(a){Ea.info("_submitFinalSurveyCallback: data="+JSON.stringify(a),Ca);Na=!1;a&&a.error&&5===a.error.internalCode?ra.trigger({appName:Ca,eventName:Fa.chat.SURVEY_ERROR,data:a}):a&&a.error&&10===a.error.internalCode?na()&&H({isInvalid:!0}):u(null,Ia.APP_ENDED)}function A(a){Ea.info("_submitFinalSurveyError: data="+JSON.stringify(a),Ca);Na=!1;ra.trigger({appName:"survey",eventName:Fa.chat.SURVEY_SERVER_ERROR,data:a})}function B(a){if(a&&a.error){if(32===a.error.internalCode){Y();Ea.info("_startChatChatError:getOfflineSurvey. internalCode: 32",Ca);return}if(5===a.error.internalCode){ra.trigger({appName:Ca,eventName:Fa.chat.SURVEY_ERROR,data:a});return}if(10===a.error.internalCode){na()&&H({isInvalid:!0});return}}ca(a)}function C(a){ra.trigger({appName:Ca,eventName:Fa.chat.EMAIL_TRANSCRIPT_SUCCESS,data:a})}function D(a){ra.trigger({appName:Ca,eventName:Fa.chat.EMAIL_TRANSCRIPT_ERROR,data:a})}function E(){Ea.info("_startFlow",Ca);ta.createChatInstance()}function F(){ra.bind({appName:Da,eventName:Ha.STATE,func:ba});ra.bind({appName:Da,eventName:Ha.INITIALIZED,func:s});ra.bind({appName:Da,eventName:Ha.BLOD,func:t});ra.bind({appName:"SessionManager",eventName:Ha.NO_SESSION,func:q});ra.bind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.PRE_CHAT_SURVEY,func:i});ra.bind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.POST_CHAT_SURVEY,func:l});ra.bind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.OFFLINE_SURVEY,func:m});ra.bind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.END_CHAT,func:ga});ra.bind({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.END_SURVEY,func:n});pa.window&&pa.window.embedded&&ra.bind({appName:Ja.UISTATE,eventName:Fa.uiState.EMBEDDED_CHANGED,func:J});ra.bind({appName:Da,eventName:Ha.CHAT_INFO,func:K});ua.bind(La.STATE,v)}function G(a){a=a||{};Ea.info("_handleInit",Ca);!a.resuming&&na()?H():I()}function H(a){a=a||{};window.recaptchaRenderer.showCaptcha({isInvalid:a.isInvalid,themer:sa.themer,translator:sa.translator,callback:I})}function I(){if(c.engConf.isOffline){Y();Ea.info("_handleInitContinue:getOfflineSurvey. uiState.engConf.isOffline: true",Ca)}else sa.conf.unifiedConf.skipAvailabilityCheck?L({availability:!0}):ta.getAvailability(L,ca)}function J(a){if(a){Ea.info("resumingPolling",Ca);ta.resumePolling()}else{Ea.info("stopPolling",Ca);ta.stopPolling()}}function K(a){var b;if(a.agentPictureUrl&&a.agentName){b=ua.get(La.AGENT_PICTURE_URL)||{};b[a.agentName]=a.agentPictureUrl;ua.modify(La.AGENT_PICTURE_URL,b)}a.skillName&&(Ba=a.skillName)}function L(a){Ea.info("_availabilitySuccess data="+JSON.stringify(a),Ca);if(a&&a.availability)if(fa()&&!M())O();else{if(oa()&&sa.unAuthUserTriesAuth){R(void 0);return}Oa?ta.getPreChatSurvey(W,X):ta.startChat(null,V,B)}else{Y();Ea.info("_availabilitySuccess:getOfflineSurvey. availability: false",Ca)}}function M(){return ua.get(La.STATE)===Ia.PRE_CHAT&&ua.get(La.CONVERSATION_DATA)}function N(a){Ea.info("_triggerProcessingEvent data="+JSON.stringify(a),Ca);ra.trigger({appName:Ja.UNIFIED_WINDOW,eventName:Fa.application.PROCESSING,data:a})}function O(){Ea.info("_startAuthentication",Ca);N({context:"onload"});sa.authenticationManager.authenticate(P,R)}function P(a){
Ea.info("_startConversation data="+JSON.stringify(a),Ca);var b;if(a&&a.ssoKey){var c=k();Oa&&ta.getPreChatSurvey(W,ca);if(c&&wa!==Ia.OFFLINE&&!M())ta.startChat({conversationData:c},V,B);else{b={domain:sa.conf.unifiedConf.domain,appKey:sa.keys.appKey,connectorId:sa.conf.authConf.connector.id,ssoKey:a.ssoKey,redirectUri:a.redirect_uri||null,engConf:sa.conf.engConf};ta.startConversation(b,Q(),S)}}}function Q(){return Oa?function(a){Ea.info("_startConversationSuccess data="+JSON.stringify(a),Ca);ua.modify(La.CONVERSATION_DATA,a)}:function(a){Ea.info("_startConversationSuccess data="+JSON.stringify(a),Ca);ta.startChat({conversationData:a},V,B)}}function R(a){Ea.info("_ssoKeyError data="+JSON.stringify(a),Ca);T()}function S(a){Ea.info("_startConversationError data="+JSON.stringify(a),Ca);T()}function T(){(g()!==Ia.PRE_CHAT||oa()&&sa.unAuthUserTriesAuth)&&U()}function U(){Y();Ea.info("_authenticationErrorCallback:getOfflineSurvey.",Ca)}function V(a){ra.trigger({appName:Ca,eventName:Fa.chat.START_CHAT_INFO,data:a.info});Ea.info("_startChatSuccess data="+JSON.stringify(a),Ca)}function W(a){Ea.info("_getPreChatSuccess data="+JSON.stringify(a),Ca);a&&a.survey?aa(Fa.application.PRE_CHAT_SURVEY,Ma.SURVEYS_PRECHAT,a.survey):ta.startChat(null,V,B)}function X(a){Ea.info("_getPreChatError data="+JSON.stringify(a),Ca);ta.startChat(null,V,B)}function Y(){ta.getOfflineSurvey(Z,ca)}function Z(a){Ea.info("_getOfflineSurveyCallback data="+JSON.stringify(a),Ca);a&&!a.error&&a.survey?aa(Fa.application.OFFLINE_SURVEY,Ma.SURVEYS_OFFLINE,a.survey):ca()}function $(a){Ea.info("_getPostChatSurveyCallback, survey="+JSON.stringify(a),Ca);a&&!a.error&&a.survey?aa(Fa.application.POST_CHAT_SURVEY,Ma.SURVEYS_EXIT,a.survey):ca()}function _(a){Ea.info("_getExitSurveyError, survey="+JSON.stringify(a),Ca);u(null,Ia.APP_ENDED)}function aa(a,b,c){var d;c&&c.questions&&c.questions.question&&c.questions.question.forEach(function(a){a.label=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.label).cleanText;a.entry&&a.entry.forEach(function(a){a.displayValue=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.displayValue).cleanText})});if(lpTag.hooks&&lpTag.hooks.exec){d=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_GET_SURVEY,data:{surveyType:a,surveyData:c}});c=d&&d.data&&d.data.surveyData||c}va.modify(b,c)}function ba(a){Ea.info("_stateListener state="+a,Ca);u(null,a)}function ca(a){Ea.info("_changeToError err= "+JSON.stringify(a),Ca);u(a,Ha.ERROR)}function da(){Ea.info("_checkForPostChatSurvey",Ca);ea()?ta.getExitSurvey(Qa,$,_):u(null,Ia.APP_ENDED)}function ea(){var b;b=Qa||qa.skill!==Ba?a.postChatSurveyOnNonInteractiveChat===!0||ta.isInteractive():!1;return b}function fa(){return Pa}function ga(){ta.setVisitorTyping(!1);ta.endChat(null,ca)}function ha(){Ea.info("_disposeApplication",Ca);ta.disposeVisitor();ra.trigger({appName:Ca,eventName:Fa.chatState.ENDED});o()}function ia(){Ea.info("_handleError",Ca);u(null,Ia.APP_ENDED)}function ja(a,b){return ta.getOTK(a,b)}function ka(a,b,c,d){return ta.secureFormRequest(a,b,c,d)}function la(a){return JSON.stringify({siteId:lpTag.site,chatId:ta.getSessionKey&&ta.getSessionKey()})}function ma(a,b){Ea.info("richContentRequest info: "+JSON.stringify(a),Ca);b=b||[];ta.richContentRequest(a,b)}function na(){return window.recaptchaRenderer}function oa(){var a=sa&&sa.conf&&sa.conf.unifiedConf,b=a&&a.external,c=a&&a.authPostVerificationLiveChat;return!b&&c}var pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca="ChatStateManager",Da=lpTag.unifiedWindow.apps.CHAT,Ea=lpTag.unifiedWindow.log,Fa=lpTag.unifiedWindow.events,Ga=lpTag.unifiedWindow.applicationUtils,Ha=Fa.chat,Ia=lpTag.unifiedWindow.State,Ja=lpTag.unifiedWindow.apps,Ka=lpTag.unifiedWindow.Priority,La=lpTag.unifiedWindow.uiModelPath,Ma=lpTag.unifiedWindow.chatModelPath,Na=!1,Oa=!1,Pa=!1,Qa=!1;e(a,b,c,d);this.emailTranscript=h;this.getCurrentState=g;this.getOTK=ja;this.richContentRequest=ma;this.secureFormRequest=ka;this.getOtkJson=la;this.dispose=o};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.SMSDeflectionManager=lpTag.unifiedWindow.SMSDeflectionManager||function(a,b,c,d){function e(){r=new lpTag.unifiedWindow.helpers.SMSFormHelper;f(d);g();o.initialize()}function f(a){o=a.apiDelegate;p=a.appContext;q=a.events}function g(){q.bind({appName:s,eventName:t.INITIALIZED,func:i});q.bind({appName:w.UNIFIED_WINDOW,eventName:x.application.PRE_SMS_FORM,func:j});q.bind({appName:w.UNIFIED_WINDOW,eventName:x.application.PRE_SMS_FORM_EXIT,func:k})}function h(){q.unbind({appName:s,eventName:t.INITIALIZED,func:i});q.unbind({appName:w.UNIFIED_WINDOW,eventName:x.application.PRE_SMS_FORM,func:j})}function i(){o.getPreSMSForm(function(a){if(a.error)l();else{z.modify(v.STATE,lpTag.unifiedWindow.State.PRE_SMS);y.modify(u.SURVEYS_PRESMS,r.transform(a))}},function(a){l()})}function j(a){if(a&&a.survey){var b=A.externalTargets&&A.externalTargets[B.externalTargets.SMS]&&A.externalTargets[B.externalTargets.SMS].brandIdentifier,c=y.get(u.SURVEYS_PRESMS),d=r.getAnswerOfType(c,a.survey.question,r.TYPES.PHONE_NUMBER),e=r.getAnswerOfType(c,a.survey.question,r.TYPES.FIRST_NAME),f=r.getAnswerOfType(c,a.survey.question,r.TYPES.LAST_NAME),g=r.getAnswerOfType(c,a.survey.question,r.TYPES.MESSAGE);if(!d||!b){l();return}var h={Body:g?C(g.answer).cleanText:"",From:d.answer,To:b,context:{engagementId:A.eid,campaignId:A.cid,visitorId:A.svid,visitorFirstName:C(e).cleanText?e.answer:"",visitorLastName:f?C(f.answer).cleanText:""}};A.skillId&&(h.context.skillId=A.skillId);o.submitPreSMSForm(h,function(b){z.modify(v.PRE_SMS_CONTEXT,h);z.modify(v.STATE,lpTag.unifiedWindow.State.APP_ENDED);n(a.survey,"success");m()},function(){l();n(a.survey,"fail")})}else{z.modify(v.STATE,lpTag.unifiedWindow.State.APP_ENDED);m()}}function k(){m();q.trigger({appName:s,eventName:x.viewController.INITIATE_END_CHAT})}function l(){z.modify(v.STATE,lpTag.unifiedWindow.State.CONNECTION_ISSUE)}function m(){h()}function n(a,b){lpTag.hooks&&lpTag.hooks.exec&&lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_SUBMIT_SURVEY,data:{context:p,surveyType:lpTag.unifiedWindow.SurveyType.PRE_SMS,surveyData:a,status:b}})}var o,p,q,r,s=lpTag.unifiedWindow.apps.CHAT,t=lpTag.unifiedWindow.events.chat,u=lpTag.unifiedWindow.chatModelPath,v=lpTag.unifiedWindow.uiModelPath,w=lpTag.unifiedWindow.apps,x=lpTag.unifiedWindow.events,y=b.chatModel,z=b.uiModel,A=c.engConf||{},B=lpTag.unifiedWindow.consts,C=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml||function(a){return{cleanText:a}};e()};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ConversationManager=lpTag.unifiedWindow.ConversationManager||function(a,b,c,d){function e(a){ic.info("init",gc);Ub=b.uiModel;Vb=b.chatModel;Jb=a.stepUpManager;dc=a.canEnableOfflineFlow;l(a);m();p();dc?nb():g($b);var c=Tb&&Tb.conf&&Tb.conf.unifiedConf;Kb=c&&c.isWelcomeMessageForAgentEnabled||!0;fc=Number(c&&c.timePeriodToLoadHistoryFromUMS);Pc=Number(c&&c.messagingNotificationTimeout)||5e3}function f(){Sb.unbind({appName:"SessionManager",eventName:mc.NO_SESSION,func:vb});Sb.unbind({appName:hc,eventName:sc.CONNECTED,func:q});Sb.unbind({appName:hc,eventName:sc.INITIALIZED,func:r});Sb.unbind({appName:hc,eventName:sc.DISCONNECTED,func:u});Sb.unbind({appName:hc,eventName:sc.NON_RESPONSIVE,func:v});Sb.unbind({appName:hc,eventName:sc.PING_SUCCESS,func:s});Sb.unbind({appName:hc,eventName:mc.USER_INFO,func:E});Sb.unbind({appName:hc,eventName:mc.USER_LEFT,func:F});Sb.unbind({appName:pc.UNIFIED_WINDOW,eventName:jc.application.POST_CHAT_SURVEY,func:ob});Sb.unbind({appName:pc.UNIFIED_WINDOW,eventName:jc.application.END_CHAT,func:rb});Sb.unbind({appName:hc,eventName:mc.CONVERSATION_STATE,func:X});Sb.unbind({appName:hc,eventName:mc.DIALOG_STATE,func:Y});Sb.unbind({appName:hc,eventName:mc.CONVERSATION_CONTENT,func:pa});Sb.unbind({appName:hc,eventName:mc.SUBSCRIBE_MESSAGING_EVENTS_RESPONSE,func:ra});Sb.unbind({appName:hc,eventName:mc.CONVERSATION_HISTORY,func:db});Sb.unbind({appName:hc,eventName:mc.CSAT_INFO,func:R});Sb.unbind({appName:"*",eventName:mc.AUTHENTICATION_ERROR,func:U});Sb.unbind({appName:hc,eventName:mc.NEW_CONVERSATION_REQUESTED,func:ub});Sb.unbind({appName:"*",eventName:nc.CONVERSATIONS_VIEWED,func:eb});Sb.unbind({appName:"*",eventName:nc.RETRY_GET_HISTORY,func:va});Sb.unbind({appName:"*",eventName:mc.FORGET_ME,func:S});Sb.unbind({appName:"*",eventName:"pendingLineSet",func:n});Sb.unbind({appName:"AMSClient",eventName:mc.CONVERSATION_STEP_UP,func:o})}function g(a){$b=a;if($b){ic.info("authenticate with data: "+JSON.stringify($b),gc);$b.type=$b.type||_c.getPropertyFromObject(d,"appContext.conf.authConf.stepUpConnector.type")||_c.getPropertyFromObject(d,"appContext.conf.authConf.connector.type");D($b)}else{ic.info("authenticate - error - no authentication data",gc);V()}}function h(a){Wb.setConversationUrgency(a)}function i(a){var b=Wc[a];return Vc[b]&&Vc[b].dialogs[a].state===uc.states.OPEN}function j(){return Lb}function k(){return Kc===(Lb&&Lb.length-1)}function l(a){Wb=a.apiDelegate;Tb=a.appContext;Sb=a.events;$b=a.authenticationData;bc=a.appContext.featureStateManager;cc=a.appContext.uiStateManager;jd=bc.checkSetting(Cc.BLOCK_CONSUMER,"true")}function m(){Sb.bind({appName:"SessionManager",eventName:mc.NO_SESSION,func:vb});Sb.bind({appName:hc,eventName:sc.CONNECTED,func:q});Sb.bind({appName:hc,eventName:sc.INITIALIZED,func:r});Sb.bind({appName:hc,eventName:sc.DISCONNECTED,func:u});Sb.bind({appName:hc,eventName:sc.NON_RESPONSIVE,func:v});Sb.bind({appName:hc,eventName:sc.PING_SUCCESS,func:s});Sb.bind({appName:hc,eventName:mc.USER_INFO,func:E});Sb.bind({appName:hc,eventName:mc.USER_LEFT,func:F});Sb.bind({appName:pc.UNIFIED_WINDOW,eventName:jc.application.POST_CHAT_SURVEY,func:ob});Sb.bind({appName:pc.UNIFIED_WINDOW,eventName:jc.application.END_CHAT,func:rb});Sb.bind({appName:hc,eventName:mc.CONVERSATION_STATE,func:X});Sb.bind({appName:hc,eventName:mc.DIALOG_STATE,func:Y});Sb.bind({appName:hc,eventName:mc.CSAT_INFO,func:R});Sb.bind({appName:hc,eventName:mc.CONVERSATION_CONTENT,func:pa});Sb.bind({appName:hc,eventName:mc.SUBSCRIBE_MESSAGING_EVENTS_RESPONSE,func:ra});Sb.bind({appName:hc,eventName:mc.CONVERSATION_HISTORY,func:db});Sb.bind({appName:"*",eventName:mc.AUTHENTICATION_ERROR,func:U});Sb.bind({appName:hc,eventName:mc.NEW_CONVERSATION_REQUESTED,func:ub});Sb.bind({appName:"*",eventName:nc.CONVERSATIONS_VIEWED,func:eb});Sb.bind({appName:"*",eventName:nc.RETRY_GET_HISTORY,func:va});Sb.bind({appName:"*",eventName:mc.FORGET_ME,func:S});Sb.bind({appName:"API",eventName:mc.DELETE_CONVERSATION_SUBSCRIPTION,func:wb});Sb.once({appName:hc,eventName:mc.CONVERSATION_OWNER_BRAND_INFO,func:Fb});Sb.bind({appName:"*",eventName:"pendingLineSet",func:n});Sb.bind({appName:"AMSClient",eventName:mc.CONVERSATION_STEP_UP,func:o})}function n(a){ec=!!a.serverPendingLineExists}function o(){var a=Tb&&Tb.conf&&Tb.conf.unifiedConf;a&&(a.isConvoSteppedUp=!0)}function p(){Xb={agent:!1,visitor:!1}}function q(){ic.info("_handleSocketConnected",gc);Jb.sendStepUp();s();w()}function r(){ic.info("_handleSocketInitialized",gc);if(Sc)y(Rb);else if(!Nc){Nc=!0;Q()}}function s(){if(Mc){Mc=!1;t()}}function t(){if(Mb&&Ub.get(kc.STATE)===oc.CONNECTION_ISSUE){Pb.dialogId=Ob;Y(Pb);fa(Mb)}}function u(){ic.info("_handleSocketDisconnected",gc);ed=!0;Xc={};Rb=null;Qb||Mc||(Qb=setTimeout(function(){v()},Oc))}function v(){if(!Mc){Mc=!0;Xc={};Nb=da();Ob=ca();Vc[Nb]&&Vc[Nb].dialogs&&Vc[Nb].dialogs[Ob]&&(Pb=lpTag.unifiedWindow.applicationUtils.clone(Vc[Nb].dialogs[Ob]));X({convId:da(),state:oc.CONNECTION_ISSUE});Y({dialogId:ca(),state:oc.CONNECTION_ISSUE});w();Mb=Ub.get(kc.STATE);Tc?fa(oc.CONNECTION_ISSUE):W()}}function w(){clearTimeout(Qb);Qb=null}function x(a){var b,c;if(a){b=Wc[a];if(Tb.conf.unifiedConf.connectorsSfConfig&&Tb.conf.unifiedConf.connectorsSfConfig.conversationId&&Tb.conf.unifiedConf.connectorsSfConfig.dialogId){var d=Tb.conf.unifiedConf.connectorsSfConfig.conversationId,e=Tb.conf.unifiedConf.connectorsSfConfig.dialogId;return e===a&&d===b?!0:!1}if(Vc[b].dialogs[a].channelType!==uc.channelTypes.COBROWSE){c=Vc[b].dialogs[a].dialogType;switch(c){case uc.types.MAIN:case uc.types.POST_SURVEY:return!0;default:var f=Vc[b].dialogs[a].participants.some(function(a){return a.role===wc.CONSUMER});if(f)return!0}}}return!1}function y(a){a&&Wb.unsubscribeConversations(a);Wb.subscribeConversations(I)}function z(){!Tb.conf.unifiedConf.poppedOut&&!Tb.conf.unifiedConf.external||Tb.conf.unifiedConf.connectorsSfConfig&&Tb.conf.unifiedConf.connectorsSfConfig.isFormSubmitted?A(D):B()}function A(a){if(Gc>=Hc)V();else{Gc++;ic.info("_restartAuthentication",gc);Tb.authenticationManager.reAuthenticate(a,A.bind(this,a))}}function B(){Sc?fa(oc.RESTART_AUTHENTICATION,null):window.location.href=Tb.appConfigurationManager.getExternalResourceURL(Tb.conf.engConf,Tb.conf.unifiedConf,Tb.conf.unifiedConf.poppedOut)}function C(){Gc=0;A(function(){Gc=0;var a=Ub.get(kc.STATE);a===oc.AUTH_ERROR&&Sb.trigger({appName:"*",eventName:"knockout"})})}function D(a){ic.info("_ssoKeySuccess data="+JSON.stringify(a),gc);var b=a&&a.ssoKey||null,c=a&&a.redirect_uri||null,d=a&&a.type||_c.getPropertyFromObject(Tb,"conf.authConf.stepUpConnector.type")||_c.getPropertyFromObject(Tb,"conf.authConf.connector.type")||null,e=a&&a.code_verifier,f=Jb&&Jb.getStepUpFailedStatus(),g=_c.getPropertyFromObject(Tb,"conf.engConf.allowUnauthMsg");g?Wb.createMessagingInstance({authCode:b,redirect_uri:c,authType:d,pingTimeout:Oc,forceNewConfig:f,blockHistory:jd}):Wb.createMessagingInstance({authCode:b,redirect_uri:c,authType:d,pingTimeout:Oc,forceNewConfig:f,codeVerifier:e})}function E(a){L(a);if(!Sc){y(Rb);Sc=!0;Nc=!1}}function F(a){G(a)&&M();if(a&&a.dialogId){var b=Wc[a.dialogId];if(b&&Vc[b]){var c=Vc[b].dialogs[a.dialogId];if(c&&c.participants){var d=c.participants.some(function(b){return b.id===a.pid});if(d){var e=c.participants.indexOf(d);"number"==typeof e&&c.participants.splice(e,1)}}}}}function G(a){return!!a&&(a.type===wc.ASSIGNED_AGENT||a.type===wc.AGENT)&&!!a.dialogId&&i(a.dialogId)}function H(a){var b=Wc[a];return Vc[b].state===tc.OPEN}function I(a){Gc=0;Rb=a.subscriptionId}function J(){var a=Tb.themer&&Tb.themer.getStyle("openingMessage","text"),b={source:Lc.AGENT,by:Tb.translator.translate("info"),isWelcomeMessage:!0},c={brandName:{type:"sitesettings",value:"account.profile.brand.name"}};ac=Tb.conf.windowConf&&Tb.conf.windowConf.welcomeMessage;if(ac){Tb.shouldWelcomeMessageBeSent=!0;b.text=ac.text;if(ac.quickReplies&&ac.quickReplies.length>0){var d=K(ac.quickReplies);if(d){b.quickReplies=d;ac.quickRepliesState={isRequired:!0,isRenedered:!1,isRemoved:!1}}}}else a?b.text=a:b.textKey="welcomeMessage";if("string"==typeof b.text){var e=Tb.conf.unifiedConf.welcomeMessageTemplate||{},f=_c.cloneExtend(e,c);for(var g in f)if(g){var h=new RegExp("{"+g+"}","gi");if(h.test(b.text)){var i=f[g]||{};if("sitesettings"===i.type){var j;if(Tb.conf.engConf.subscription)try{j=JSON.parse(Tb.conf.engConf.subscription.conversationownerSettings||"[]")}catch(k){j=[]}else j=Tb.conf.accountSettings;var l=(j||[]).filter(function(a){return a.id===i.value}),m=l.length?l[0].propertyValue.value:"";b.text=b.text.replace(h,m)}}}Tb.welcomeMessage={content:b}}if(lpTag.hooks&&lpTag.hooks.execAsync&&lpTag.hooks.isHookAsync(lpTag.unifiedWindow.hooks.BEFORE_WELCOME_MESSAGE)){Tb.events.trigger({appName:"tooltip",eventName:"show",data:{text:Tb.translator.translate("loading"),type:"process"}});lpTag.hooks.execAsync({name:lpTag.unifiedWindow.hooks.BEFORE_WELCOME_MESSAGE,data:{content:b}},function(a){ic.info("Hook "+lpTag.unifiedWindow.hooks.BEFORE_WELCOME_MESSAGE+" asynchronously returned data successfully",gc);var c=a&&a.data&&a.data.content||b;c=c instanceof Array?c:[c];c.forEach(function(a){if(a.quickReplies&&a.quickReplies.replies.length>0){var b=K(a.quickReplies.replies,a.quickReplies.itemsPerRow);if(b){a.quickReplies=b;ac.quickRepliesState={isRequired:!0,isRenedered:!1,isRemoved:!1}}}Tb.events.trigger({appName:"tooltip",eventName:"close"});_a([a])})},function(a,c){ic.info("Hook "+lpTag.unifiedWindow.hooks.BEFORE_WELCOME_MESSAGE+" failed with error: "+(c&&c.message),gc);b=a&&a.data&&a.data.content||b;Tb.events.trigger({appName:"tooltip",eventName:"close"});_a([b])});Tb.welcomeMessage={content:b}}else{if(lpTag.hooks&&lpTag.hooks.exec){var n=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.BEFORE_WELCOME_MESSAGE,data:{content:b}});b=n&&n.data&&n.data.content||b;Tb.welcomeMessage={content:b}}_a([b])}}function K(a,b){var c=Tb.conf.windowConf.welcomeMessage.wrapQuickReplies,d=Tb.conf&&Tb.conf.unifiedConf&&Tb.conf.unifiedConf.rowLimit,e=b?b:8,f={type:Dc.QUICK_REPLIES,rowLimit:d||3,itemsPerRow:c?void 0:e,replies:[]};a.forEach(function(a){var b={type:Dc.BUTTON,tooltip:a.text||a.tooltip,title:a.text||a.title,style:{bold:a["is-font-inherit"]?!1:a.bold,italic:a["is-font-inherit"]?!1:a.italic,"font-family":a["is-font-inherit"]?"inherit":a["font-family"],size:a.size,color:a.color,"background-color":a["background-color"],"border-color":a["border-color"],"color-hover":a["color-hover"],"background-color-hover":a["background-color-hover"],"border-color-hover":a["border-color-hover"]},accessibility:a.accessibility||{},click:{actions:[{type:Ec.PUBLISH_TEXT,text:a.text?a.text:a.title}]}};f.replies.push(b)});return f}function L(a){if(a){var b={id:a.userId,type:N(a),name:a.name,imgUrl:a.imgUrl},c=!1;b.name||(b.type===Lc.VISITOR?b.name=a.firstName||a.lastName?a.firstName+" "+a.lastName:Tb.translator.translate("you"):b.name=Tb.translator.translate("agent"));O(b,a);switch(b.type){case Lc.VISITOR:Vb.get(lc.VISITOR_NAME)||(c=!0);break;case Lc.AGENT:G(a)&&(c=!0)}c&&P(b)}}function M(){Sb.trigger({appName:hc,eventName:mc.CHAT_INFO,data:{resetAgentInfo:!0}})}function N(a){var b,c="CONTROLLER",d="CONSUMER";if("string"==typeof a.type)switch(a.type){case c:b=Lc.SYSTEM;break;case d:b=Lc.VISITOR;break;default:b=Lc.AGENT}else b=a.role?Lc.AGENT:Lc.VISITOR;return b}function O(a,b){var c=Vb.get(lc.PARTICIPANTS)||{};c[a.id]=a;Vb.modify(lc.PARTICIPANTS,c);if(b&&b.dialogId){var d=Wc[b.dialogId];if(d&&Vc[d]){var e=Vc[d].dialogs[b.dialogId];if(e&&e.participants){var f=e.participants.some(function(a){return a.id===b.userId});f||e.participants.push({id:b.userId,role:b.type})}}}}function P(a){var b;if(a&&a.name&&a.id){b={};b[a.type+"Name"]=a.name;b[a.type+"Id"]=a.id;Sb.trigger({appName:hc,eventName:mc.CHAT_INFO,data:b})}}function Q(){Sb.trigger({appName:hc,eventName:mc.INITIALIZED});Tc=!0;Wb.getMyUserProfile();Wb.getBrandProfile();fa(oc.REQUESTED,null)}function R(a){if(!Lb||a.convId===Lb[0].convId){Zb=a;Vb.get(lc.SURVEYS_EXIT)&&T(a.csat)&&pb()}}function S(){dd=!0;var a=Ub.get(kc.STATE);(a===oc.WAITING||a===oc.CONNECTION_ISSUE&&Mb===oc.WAITING)&&tb()}function T(a){return a.csatRate||a.status&&(a.status===qc.csatStatus.SKIPPED||a.status===qc.csatStatus.PARTIALLY_FILLED)}function U(a){switch(a&&a.error){case yc.EXPIRED:z();break;case yc.INVALID_SESSION:V();break;case yc.LOGOUT:C()}}function V(a){ic.info("_endAppOnInvalidSession"+(a?" err="+JSON.stringify(a):""),gc);var b=_c.getPropertyFromObject(Tb,"conf.engConf.allowUnauthMsg"),c=Tb&&Tb.conf&&Tb.conf.unifiedConf;if(!b||c&&c.isConvoSteppedUp){c&&c.isStepUpDuringWaitingStateEnabled&&c.isConvoSteppedUp&&Ib({isConvoSteppedUp:!1,wasAuthConnectorAppliedForStepUp:!1});fa(oc.AUTH_ERROR,null);Sb.trigger({appName:hc,eventName:mc.ERROR,data:{errorType:xc.AUTH_ERROR,keepError:!0}})}else{fa(oc.ERROR,null);Sb.trigger({appName:hc,eventName:mc.ERROR,data:{errorType:xc.FAILED_START_CONVERSATION_ERROR,keepError:!0}})}Wb.dispose()}function W(){ic.info("_endAppAndShowFailedConnectionError",gc);fa(oc.ERROR);_c.isEmpty(ad)&&Tc?Sb.trigger({appName:hc,eventName:mc.FAILED_START_CONVERSATION}):Sb.trigger({appName:hc,eventName:mc.ERROR,data:{errorType:xc.FAILED_START_CONVERSATION_ERROR,keepError:!0}});Wb.dispose()}function X(a){if(Vc[a.convId]&&Vc[a.convId].state!==a.state){Vc[a.convId].state=a.state;switch(a.state){case tc.OPEN:Uc=!1;Yb=!1;break;case tc.CLOSE:ja(a)}}}function Y(a){var b=Wc[a.dialogId]||a.conversationId;if(Vc[b]){if(!Vc[b].dialogs[a.dialogId]){Vc[b].dialogs[a.dialogId]={state:null,endTime:a.endTime,closeReason:a.closeReason,dialogType:a.dialogType,channelType:a.channelType,participants:a.participants,lastMessageId:-1,history:!1};var c=Vc[b].sortedDialogIds;c.push({dialogId:a.dialogId,endTime:a.endTime});Vc[b].sortedDialogIds=mb(c);Wc[a.dialogId]=b;kb(a.dialogId)}if(Vc[b].dialogs[a.dialogId].state!==a.state){Vc[b].dialogs[a.dialogId].state=a.state;switch(a.state){case uc.states.OPEN:Uc=!1;Vb.modify(lc.CURRENT_DIALOG_TYPE,a.dialogType);Tb.conf.unifiedConf.shouldSkipConfirmationDialog=Vc[b].dialogs[a.dialogId].dialogType===uc.types.POST_SURVEY;qb(a.dialogId);break;case uc.states.CLOSE:ka(a);Vb.removeKey(lc.CURRENT_DIALOG_TYPE,!1);_b=!1;if(!Uc&&Vc[b].dialogs[a.dialogId].lastMessageId>=0){Uc=!0;Z(a.dialogId)}Sb.trigger({appName:hc,eventName:mc.CONVERSATION_CLOSED,data:{convId:a.dialogId}})}}}}function Z(a){var b=Wc[a],c=Vc[b].dialogs[a].dialogType;(c===uc.types.MAIN&&!$(b)||c!==uc.types.MAIN)&&_a([$a(a)])}function $(a){var b;if(a){b=_(a);return Vc[a].dialogs[b].closeReason===Rc.SYSTEM}}function _(a){if(Vc[a]&&Vc[a].dialogs)for(var b in Vc[a].dialogs)if(Vc[a].dialogs[b].dialogType===uc.types.MAIN)return b}function aa(a){if(Vc[a]&&Vc[a].dialogs){for(var b in Vc[a].dialogs)if(Vc[a].dialogs[b].dialogType===uc.types.POST_SURVEY)return Vc[a].dialogs[b].lastMessageId<0;return!0}}function ba(a){if(Vc[a]&&Vc[a].dialogs&&Vc[a].sortedDialogIds)for(var b=0;b<Vc[a].sortedDialogIds.length;b++){var c=Vc[a].sortedDialogIds[b].dialogId;if(Vc[a].dialogs[c].lastMessageId>=0)return c}}function ca(){for(var a in Vc)if(Vc.hasOwnProperty(a))for(var b in Vc[a].dialogs)if(Vc[a].dialogs.hasOwnProperty(b)&&Vc[a].dialogs[b].state===uc.states.OPEN)return b}function da(){for(var a in Vc)if(Vc.hasOwnProperty(a)&&Vc[a].state===tc.OPEN)return a}function ea(){Tb.events.trigger({appName:lpTag.unifiedWindow.MaximizedViewController.ControllerName,eventName:jc.viewController.INITIATE_END_CHAT,data:!0});Tb.uiStateManager.setVisibility(kc.TOP_MENU_VISIBLE,!1)}function fa(a,b){var c=Ub.get(kc.STATE),d=c===oc.POST_CHAT&&a===oc.WAITING,e=!c||c!==a,f=Tb&&Tb.conf&&Tb.conf.unifiedConf;if(e&&!d){Ub.modify({splitKey:kc.STATE,updateData:a,onSuccess:b});hd.push(a);if(a===oc.WAITING){M();p();ia(a);f&&f.isStepUpDuringWaitingStateEnabled&&Ib({isConvoSteppedUp:!1});var g=Vb&&Vb.getModel();if(g){var h=bc.getCloseWindowByAgentBehaviorType(),i=bc.getCloseWindowButtonBehaviorType(),j=cc.isWindowClosedByVisitor();(c===oc.REQUESTED||c===oc.APP_ENDED&&i===bc.CLOSE_ON_END_TYPE.OPEN)&&ga(g)&&ha();j||c!==oc.APP_ENDED||h!==bc.CLOSE_ON_END_TYPE.CLOSE||ea()}else ha()}f&&f.isStepUpDuringWaitingStateEnabled&&a===oc.CHATTING&&f.wasAuthConnectorAppliedForStepUp&&Ib({isConvoSteppedUp:!0})}}function ga(a){var b=a&&a.attributes&&(!a.attributes.chat||a.attributes.chat&&a.attributes.chat.currentDialogType!==uc.types.POST_SURVEY),c=!_b||0===_c.getPropertyFromObject(a,"attributes.chat.lines",[]).length;return b&&c}function ha(){if(!(hd&&hd.length>=3&&hd[hd.length-1]===oc.WAITING&&hd[hd.length-2]===oc.PENDING&&hd[hd.length-3]===oc.WAITING)){ac=Tb.conf.windowConf&&Tb.conf.windowConf.welcomeMessage;var a=!1;if(ac){if(ac.isEnabled){ac.whenToPresent===Fc.showTiming.EVERY_TIME?a=!0:ac.whenToPresent!==Fc.showTiming.FIRST_TIME||Lb||_b||(a=!0);_b=!0}}else if(!Lb&&!_b){_b=!0;a=!0}var b=lpTag.hooks&&lpTag.hooks&&lpTag.hooks.isHookAsync(lpTag.unifiedWindow.hooks.BEFORE_WELCOME_MESSAGE);(a||b)&&setTimeout(J,0)}}function ia(a){Sb.trigger({appName:hc,eventName:mc.STATE,data:a})}function ja(a){var b;Vc[a.convId].endTime=a.time;Vc[a.convId].closeReason=a.closeReason;sb(!1);b=ma(a);b||tb()}function ka(b){var c=Wc[b.dialogId],d=Vc[c].sortedDialogIds;Vc[c].dialogs[b.dialogId].endTime=b.endTs||b.time;Vc[c].dialogs[b.dialogId].closeReason=b.closedBy;d[d.length-1].dialogId===b.dialogId&&(d[d.length-1].endTime=Vc[c].dialogs[b.dialogId].endTime);sb(!1);fa(oc.APP_ENDED,function(){var b=Ub.get(kc.STATE);Tb.conf.unifiedConf.external&&!a.surveyPostChatEnabled&&(_b=!1);b!==oc.APP_ENDED||dd||fa(oc.WAITING)})}function la(a){var b=a&&a.convId||Zb&&Zb.convId;if(b&&aa(b)&&Vc[b]&&Vc[b].postSurveyDialogWasOpened&&Vc[b].state===tc.CLOSE){M();var c=Vc[b].dialogs[_(b)],d=c.participants.some(function(a){return a.role===wc.ASSIGNED_AGENT});d&&P(Za({originatorId:d.id}))}}function ma(b){var c,d,e,f=!1;if(a.surveyPostChatEnabled){e=_c.getPropertyFromObject(Zb,"csat.endTs")+Wb.getTimeDiff()+Qc;c=b&&!$(b.convId)&&Ma(_(b.convId))&&aa(b.convId);d=Zb&&!na(Zb)&&Ma(_(Zb.convId))&&aa(Zb.convId)&&Date.now()<e&&!da()&&!$(Zb.convId);_c.getPropertyFromObject(Tb,"conf.engConf.allowUnauthMsg")&&(d=!1);if(c||d){la(b);fa(oc.POST_CHAT,oa);f=!0;ia(oc.POST_CHAT)}}return f}function na(a){return _c.getPropertyFromObject(a,"csat.csatRate")||"SKIPPED"===_c.getPropertyFromObject(a,"csat.status")}function oa(){var a,b,c=Vb.get(lc.AGENT_NAME)||Tb.translator.translate("csatTheAgent");c=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(c).cleanText;Tb.translator.extendDictionary({agentName:c},{locale:Tb.conf.engConf.lang});b=lpTag.unifiedWindow.CsatDataGenerator(Tb.translator);Vb.removeKey(lc.SURVEYS_EXIT,!1);if(lpTag.hooks&&lpTag.hooks.exec){a=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_GET_SURVEY,data:{surveyType:jc.application.POST_CHAT_SURVEY,surveyData:b}});b=a&&a.data&&a.data.surveyData||b}Vb.modify(lc.SURVEYS_EXIT,b)}function pa(a){var b;if(a&&!_c.isEmpty(a)){if(a&&a.dialogId){b=Yc[a.dialogId]&&Yc[a.dialogId].resubscribe;ua(a.dialogId)}za(a,b)}Ea(b);qa()}function qa(){var a=da();if(a&&!Yb&&Ma(_(a))){Yb=!0;ia(oc.INTERACTIVE)}}function ra(a){var b,c,d,e;if(a&&a.reqId)if(200!=a.code)sa(a);else{b=Xc[a.reqId].dialogId;d=1;if(!_c.isEmpty($c)&&$c[b]){d=$c[b].retries;delete $c[b]}e=Xc[a.reqId].resubscribe;ta(a.reqId);wa(b);c=setTimeout(function(){$c[b]||($c[b]={retries:d});pa({dialogId:b})},Pc);Yc[b]={dialogId:b,timeoutId:c,resubscribe:e}}}function sa(a){var b,c=a&&a.reqId;if(c&&Xc[c]){b=Xc[c].dialogId;if($c[b]&&$c[b].retries>=Jc){ta(c,!0);if(H(b))W();else{Ea();if(0===Object.keys(Xc).length&&Zc[_(Lb[0].convId)]){Tb.conf.unifiedConf.failedToLoadHistory=!0;Ea(!0)}}}else{$c[b]?$c[b].retries++:$c[b]={retries:1};var d=kb(b);d!==c&&ta(c)}}}function ta(a,b){if(b&&Xc[a]&&Xc[a].dialogId){Zc[Xc[a].dialogId]=Xc[a];Aa(Xc[a].dialogId)}delete Xc[a]}function ua(a){if(a&&Yc&&Yc[a]&&Yc[a].timeoutId){clearTimeout(Yc[a].timeoutId);delete Yc[a].timeoutId}delete Yc[a]}function va(a){if(_c.isEmpty(Zc))eb(a);else for(var b in Zc)Zc.hasOwnProperty(b)&&kb(b)}function wa(a){delete Zc[a]}function xa(a,b){var c;for(var d in a){c=a[d].dialogId&&Wc[a[d].dialogId];if(bd!==d&&a.hasOwnProperty(d)&&!Da(ad,a[d])){a[d].resubscribed=b;ad.push(a[d]);!Vc[c].hasContent&&a[d].event&&(Vc[c].hasContent=!0)}"number"==typeof a[d].sequence&&c&&Vc[c].dialogs[a[d].dialogId].lastMessageId<a[d].sequence&&a[d].event&&(Vc[c].dialogs[a[d].dialogId].lastMessageId=a[d].sequence)}ya()}function ya(){if(0===Object.keys(Xc).length&&0===Object.keys(Yc).length&&Object.keys(Vc).length===Ic){var a=0;for(var b in Vc)Vc[b].hasContent||a++;var c;a===Ic?c=Ic:a>0&&Ic>a&&(c=Ic-a);for(var d=0;c>d;d++)eb()}}function za(a,b){var c=a.dialogId,d=Ba(c,!0),e=Vc[d];e.returnedDialogs[c].content=a;e.returnedDialogs[c].resubscribed=b;if(Ca(d))for(c in e.dialogs){var f=e.returnedDialogs[c];if(f&&f.content){xa(f.content,f.resubscribed);delete f.content;delete f.resubscribed}}}function Aa(a){var b=Ba(a,!1);Vc[b].returnedDialogs.allDialogsSuccessful=!1}function Ba(a,b){if(!a)return null;var c=Wc[a];if(c&&Vc[c]){Vc[c].returnedDialogs||(Vc[c].returnedDialogs={allDialogsSuccessful:!1});Vc[c].returnedDialogs[a]||(Vc[c].returnedDialogs[a]={});Vc[c].returnedDialogs[a].successful=b}return c}function Ca(a){var b=Vc[a];if(b.returnedDialogs.allDialogsSuccessful)return!0;for(var c in b.dialogs){var d=b.returnedDialogs[c];if(!d||!d.successful){b.returnedDialogs.allDialogsSuccessful=!1;return!1}}b.returnedDialogs.allDialogsSuccessful=!0;return!0}function Da(a,b){var c=a.filter(function(a){return a.dialogId===b.dialogId&&a.sequence===b.sequence});return!!c&&c.length>0}function Ea(a){if(0===Object.keys(Xc).length&&0===Object.keys(Yc).length||a){var b=ca()?oc.CHATTING:oc.WAITING,c=Ha();fa(b,null);_a(c,!0);ma();ad=[]}}function Fa(a){for(var b=0;b<a.length;b++)if(a[b]&&Array.isArray(a[b].metadata)){var c=a[b].metadata.find(function(a){return"WelcomeMessage"===a.type});if(c){c.quickReplies=c.quickReplies||[];c.time=a[b].time-1;a.splice(b,0,Ga(c));_b=!0;Tb.shouldWelcomeMessageBeSent=!1;b++}}}function Ga(a){var b={};b.by="Info";b.isWelcomeMessage=!0;b.source="agent";b.text=a.event.message;b.time=a.time;b.type="line";b.addedFromMD=!0;return b}function Ha(){var a,b=[];Array.isArray(ad)&&ad.forEach(function(c,d){a=Ra(c);b.push(a);ad[d].event&&Pa(c)&&b.push($a(c.dialogId));ab(a);Ka(a)});return b}function Ia(a){return!fd[a.sequence]||a.state!==zc.VIEWED&&a.state!==zc.ERROR?!1:!0}function Ja(a,b){var c=b===vc.SUBMIT?a.eventId:a.sequence,d=fd[c]||{};return a.event&&a.event.message||d.info}function Ka(a){Array.isArray(a)||(a=[a]);a.forEach(function(a){if(La(a)&&i(a.convId))switch(a.source){case Lc.VISITOR:Xb.visitor=!0;break;case Lc.AGENT:Xb.agent=!0}})}function La(a){switch(a.type){case rc.LINE:return a.text?!0:!1;case rc.RICH_CONTENT:case rc.SECURE_FORM:return!0;default:return!1}}function Ma(a){for(var b=Vb.get(lc.LINES)||[],c=!1,d=!1,e=0;e<b.length;e++)if(b[e].convId===a){c=c||b[e].source===Lc.VISITOR;d=d||b[e].source===Lc.AGENT;if(c&&d)break}return c&&d}function Na(a){var b=a.dialogId,c=a.conversationId||Wc[a.dialogId];return Vc[c].dialogs[b]&&Vc[c].dialogs[b].history}function Oa(a){var b=Wc[a.dialogId];return Qa(a)&&Kc&&Lb[Kc]&&b===Lb[Kc].convId&&a.dialogId===ba(b)&&Kc!==Lb.length-1?!0:!1}function Pa(a){var b=Wc[a.dialogId],c=Vc[b].dialogs[a.dialogId].dialogType;if(Qa(a)&&(c!==uc.types.MAIN||!$(b))){if(a.resubscribed){var d=Vb.get(lc.LINES)||[],e=$a(a.dialogId),f=d.filter(function(a){return a.time===e.time&&a.type===e.type&&a.textKey===e.textKey}),g=!!f&&f.length>0;return!g}return!0}return!1}function Qa(a){var b=a.conversationId||Wc[a.dialogId],c=a.dialogId;return Vc[b].dialogs[c]&&Vc[b].dialogs[c].lastMessageId===a.sequence&&Vc[b].dialogs[c].state===uc.states.CLOSE?!0:!1}function Ra(a){var b=Sa(a);Ya(b,a);return b}function Sa(a){var b=a&&a.event||{};switch(b.type){case Bc.RICH_CONTENT:return Va(b.content,rc.RICH_CONTENT,b.quickReplies);default:return Ta(a)}}function Ta(a){var b=a&&a.event||{};Ia(a)&&(b.contentType=Ac.SECURE_FORM_UPDATE);switch(b.contentType){case Ac.HOSTED_FILE:return Ua(b.message,Ac.HOSTED_FILE);case Ac.EXTERNAL_FILE:return Va(Tb.translator.translate("transcriptForPhotoSharingImage"),rc.LINE);case Ac.TEXT_PLAIN:return Va(b.message||"",rc.LINE,b.quickReplies);case Ac.SECURE_FORM_INVITATION:return Wa(a,vc.SEND);case Ac.SECURE_FORM_SUBMISSION:return Wa(a,vc.SUBMIT);case Ac.SECURE_FORM_UPDATE:return Wa(a,a.state);default:return Va("string"==typeof b.message?b.message:"",rc.LINE)}}function Ua(a,b){return{type:b,subType:"REGULAR",fileData:a,textType:"file"}}function Va(a,b,c){return{type:b,subType:"REGULAR",text:a,quickReplies:c,textType:"plain"}}function Wa(a,b){var c,d,e=Xa(a,b);c=Ja(a,b);c&&(d={type:rc.SECURE_FORM,subType:rc.SECURE_FORM,formState:e,command:e,info:{secureFormId:c.formId||c.secureFormId,secureFormName:c.title||c.secureFormName,invitationId:c.invitationId,uniqueId:c.invitationId}});return d}function Xa(a,b){var c;switch(a.state){case zc.VIEWED:c=vc.VIEWED;break;case zc.ERROR:c=vc.ERROR;break;default:c=b}return i(a.dialogId)?c:vc.ERROR}function Ya(a,b){var c=Za(b)||{};a[cd]=b.sequence;a.sequenceId=b.sequence;a.originatorId=c.id;a.by=c.name;a.source=c.type;a.time=b.serverTimestamp;a.convId=b.dialogId;a.track=Oa(b);a.history=Na(b);a.resubscribed=b.resubscribed;a.state=b.state;a.metadata=b.metadata?b.metadata:void 0}function Za(a){var b=Vb.get(lc.PARTICIPANTS)||{};return b[a.originatorId]}function $a(a){var b,c=Wc[a],d=Vc[c].dialogs[a].dialogType;
b=d===uc.types.MAIN?Vc[c].dialogs[a].closeReason===Rc.AGENT?"transcriptConvResolvedByAgent":"transcriptConvResolvedByVisitor":"";return{type:rc.INFO,textKey:b,time:Vc[c].dialogs[a].endTime,history:Vc[c].dialogs[a].history,source:"system",hasSeparator:!0,subType:"conversationResolved"}}function _a(a,b){if(a&&a.length>0){b&&(a=_c.sortByKeyValue(a,"time"));Kb&&(!_b&&!a[0].isWelcomeMessage||a[0].STATE&&"READ"!==a[0].STATE&&"SENT"!==a[0].STATE)&&Fa(a);a.forEach(function(a){Ub.get(kc.STATE)||"";ec&&!a.isWelcomeMessage&&(a.history=!0);Sb.trigger({appName:hc,eventName:gd[a.type]?a.type:mc.LINE,data:a})});Sb.trigger({appName:hc,eventName:mc.FINISHED_EVENTS_BULK})}}function ab(a){a&&a[cd]&&a.type===rc.SECURE_FORM&&(fd[a[cd]]={info:a.info})}function bb(a){return a&&a.conversationDetails&&a.conversationDetails.dialogs||[]}function cb(a,b){var c=bb(b),d=a.filter(function(a){return a.convId===b.convId?a:void 0})[0]||{},e=bb(d);return _c.arrayUniqueByKey(e.concat(c),"dialogId")}function db(a){if(Array.isArray(a)&&a.length>0){a=lb(a);if(Lb){var b=fb(a);gb(a);if(ed){ed=!1;if((!b||!b.length)&&Lb[0]){Lb[0].conversationDetails.dialogs=cb(a,Lb[0]);jb(Lb,0,0,!1,!0)}}}else{Lb=a;eb()}}else Lb||nb()}function eb(a){var b,c,d=!1,e=a&&a.retry||!1,f=a&&a.changedScroll||!1;if(Lb&&!f){if(null===Kc){b=0;c=Lb.length<Ic?Lb.length-1:Ic-1}else if(Kc<Lb.length-1){b=Kc+1;c=b;d=null===Vb.get(lc.LINES)?!1:!0;if(e){b=Kc;c=Kc;Lb&&Lb[Kc]&&Lb[Kc].convId&&Vc&&Vc[Lb[Kc].convId]&&delete Vc[Lb[b].convId]}}else{if(Kc!==Lb.length-1||null!==Vb.get(lc.LINES)){Sb.trigger({appName:"*",eventName:nc.END_OF_HISTORY,data:{shouldHide:!0}});ic.error("in _loadNextConversationsFromHistory: something went wrong trying to load the history!!!",gc);return}nb()}Kc=c;jb(Lb,b,c,d)}}function fb(a){a=hb(a);if(a.length>0){jb(a,0,a.length-1,!1);Lb=a.concat(Lb);Kc+=a.length}return a}function gb(a){a=ib(a);if(a.length>0){Lb=Lb.concat(a);eb()}}function hb(a){var b,c,d=[];b=Lb&&Lb.length>0&&Lb[0]&&Lb[0].convId;c=b&&Lb[0].conversationDetails&&Lb[0].conversationDetails.startTs||0;for(var e=0;e<a.length&&(a[e].convId!==b&&a[e].conversationDetails&&a[e].conversationDetails.startTs>c);e++)d.push(a[e]);return d}function ib(a){var b,c,d;b=Lb&&Lb.length>0&&Lb[Lb.length-1];c=b&&b.conversationDetails&&b.conversationDetails.startTs;d=a.filter(function(a){return a.conversationDetails&&a.conversationDetails.startTs<c||!c});return d}function jb(a,b,c,d,e){var f,g,h,i,j,k=Tb&&Tb.conf&&Tb.conf.unifiedConf,l=k&&void 0!==k.resubscribeDialogOnReconnect?k.resubscribeDialogOnReconnect:!0;a=a||Lb;for(var m=b;c>=m;m++){var n=a[m];h=n.convId;if(!Vc[h]||e){f=n.conversationDetails.state!==tc.OPEN?a[m].conversationDetails.state:"";Vc[h]=Vc[h]||{state:f,endTime:a[m].conversationDetails.endTs,closeReason:a[m].conversationDetails.closeReason,dialogs:{},postSurveyDialogWasOpened:!1,hasContent:!1};var o=[];g=a[m].conversationDetails.dialogs;for(var p=0;p<g.length;p++){i=g[p].dialogId;if(g[p].channelType!==lpTag.unifiedWindow.consts.coBrowse.coBrowseChannelName){if(Vc[h].dialogs[i]){if(e)if(g[p].state===uc.states.OPEN)kb(i,!0);else if(l&&0===m&&g[p].dialogType===uc.types.MAIN&&g[p].state===uc.states.CLOSE){Vc[h].dialogs[i].state=uc.states.CLOSE;Vc[h].dialogs[i].closeReason=g[p].closedBy;Vc[h].dialogs[i].endTime=g[p].endTs;sb(!1);kb(i,!0)}}else{j=g[p].state!==uc.states.OPEN?g[p].state:"";Vc[h].dialogs[i]={state:j,endTime:g[p].endTs,lastMessageId:-1,closeReason:g[p].closedBy,history:d,dialogType:g[p].dialogType,channelType:g[p].channelType,participants:g[p].participants};Wc[i]=h;qb(i);var q=!1;if(fc&&n.conversationDetails.state!==tc.OPEN){fc=fc>=qc.fifteenMinutesInMS?fc:qc.fifteenMinutesInMS;var r=Date.now(),s=r-fc;q=Vc[h].endTime&&Vc[h].endTime<s;Vc[h].dialogs[i].history=!0}kb(i,!1,q)}o.push({dialogId:i,endTime:g[p].endTs})}}Vc[h].sortedDialogIds=mb(o)}}}function kb(a,b,c){if(x(a)){var d={conversationId:Wc[a],dialogId:a,forceLoadFromHistoryAPI:c||!1};Tb.conf.unifiedConf.connectorsSfConfig&&Tb.conf.unifiedConf.connectorsSfConfig.seqId&&Tb.conf.unifiedConf.connectorsSfConfig.seqId>0&&(d.fromSeq=Tb.conf.unifiedConf.connectorsSfConfig.seqId);var e=Wb.subscribeMessagingEvents(d);Xc[e]={dialogId:a,resubscribe:b};return e}}function lb(a){var b=a.sort(function(a,b){return a.conversationDetails.endTs?b.conversationDetails.endTs?b.conversationDetails.endTs-a.conversationDetails.endTs:1:-1});return b}function mb(a){var b=a.sort(function(a,b){return a.endTime?b.endTime?b.endTime-a.endTime:1:-1});return b}function nb(){fa(oc.WAITING,null)}function ob(a){if(a&&(a.survey&&a.survey.question[0]||a.status)){Zb&&(a.convId=Zb.convId);Wb.submitExitChatSurvey(a,null,v)}Zb=null;pb()}function pb(){Vb.removeKey(lc.SURVEYS_EXIT,!1);Ub.get(kc.STATE)!==oc.CONNECTION_ISSUE?fa(oc.APP_ENDED,tb):dd?tb():Mb=oc.WAITING}function qb(a){var b=Wc[a];Vc[b].dialogs[a].dialogType===uc.types.POST_SURVEY&&(Vc[b].postSurveyDialogWasOpened=!0)}function rb(){sb(!1);Wb.setVisitorTyping(!1);Wb.closeDialog()}function sb(a){"boolean"==typeof a&&Sb.trigger({appName:hc,eventName:mc.AGENT_TYPING,data:{agentTyping:a}})}function tb(){if(dd){fa(oc.APP_ENDED);Wb.dispose()}else fa(oc.WAITING)}function ub(){fa(oc.PENDING)}function vb(){ic.info("_disposeApplication",gc);Sb.trigger({appName:gc,eventName:jc.chatState.ENDED});f()}function wb(a){Tb.conf.unifiedConf.isStepUpEnabled&&Gb(function(b){a.conversationId&&a.conversationId===b&&Tb.wrapperWindow&&a.stage&&"OPEN"===a.stage&&a.state&&"OPEN"===a.state&&Tb.wrapperWindow.hide()})}function xb(a){return lpTag.site+":"+(a&&a.invitationId)}function yb(a,b){return Wb.getOTK({formId:a.secureFormId,invitationId:a.invitationId,type:"SecureForm"},b)}function zb(a,b,c){ic.info("secureFormRequest status: "+a+" info:"+JSON.stringify(c),gc);Wb.secureFormRequest({dialogId:_(da())||Wb.getSessionKey(),state:a,submissionId:c.formUuid,invitationId:b,sequenceList:[c.sequenceId],contentType:a===vc.SUBMIT?Ac.SECURE_FORM_SUBMISSION:""})}function Ab(a,b){if(a){ic.info("richContentRequest info: "+JSON.stringify(a),gc);Wb.richContentRequest({state:a.state,dialogId:Wb.getSessionKey(),sequenceList:[a.sequenceId],metadata:b||[]})}}function Bb(a){Wb.imageShareGenerateUrlRequest(a)}function Cb(a){Wb.imageShareDownloadUrlRequest(a)}function Db(a,b){if(a){ic.info("quickRepliesRequest info: "+JSON.stringify(a),gc);Wb.quickRepliesRequest({state:a.state,dialogId:Wb.getSessionKey(),sequenceList:[a.sequenceId],metadata:b||[]})}}function Eb(a){Wb.getShiftStatus({success:a.success,error:a.error})}function Fb(a){Tb.conf.conversationOwnerBrandInfo=a}function Gb(a){var b=lpTag&&lpTag.csds&&lpTag.csds.getDomain(id.csds.leCdnDomain);window.lpTag.taglets.lpSecureStorage.getValue({app:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,key:id.storage.stepUpStorage.valueKeys.lastActiveConvo,appName:id.storage.stepUpStorage.appName,site:lpTag&&lpTag.site,domain:Hb(b),success:a,error:function(){ic.error("_getLastUnauthConvoData: failed to get last unauth convo data",gc)},firstParty:!0})}function Hb(a){var b=window.lpTag.taglets.lpSecureStorage.v;return"https://"+a+"/le_secure_storage/"+(b?b:"")}function Ib(a){var b=Tb&&Tb.conf&&Tb.conf.unifiedConf,c=lpTag&&lpTag.csds&&lpTag.csds.getDomain(id.csds.leCdnDomain);if(b){b.isConvoSteppedUp=a.hasOwnProperty("isConvoSteppedUp")?a.isConvoSteppedUp:b.isConvoSteppedUp;b.wasAuthConnectorAppliedForStepUp=a.hasOwnProperty("wasAuthConnectorAppliedForStepUp")?a.wasAuthConnectorAppliedForStepUp:b.wasAuthConnectorAppliedForStepUp;var d={wasAuthConnectorAppliedForStepUp:b.wasAuthConnectorAppliedForStepUp,isConvoSteppedUp:b.isConvoSteppedUp};lpTag.taglets.lpSecureStorage.setValue({key:lpTag.unifiedWindow.consts.stepUpInWaitingState.storageKey,site:lpTag.site,app:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,value:d,success:function(a){a&&ic.info("_persistWaitingStateStepUpProperties: convo flag persisted",gc)},errorTimeout:function(){ic.error("_persistWaitingStateStepUpProperties: Error persist convo flag",gc)},appName:lpTag.unifiedWindow.consts.stepUpInWaitingState.appName,domain:Hb(c),firstParty:!0})}}var Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc="ConversationManager",hc=lpTag.unifiedWindow.apps.CHAT,ic=lpTag.unifiedWindow.log,jc=lpTag.unifiedWindow.events,kc=lpTag.unifiedWindow.uiModelPath,lc=lpTag.unifiedWindow.chatModelPath,mc=jc.chat,nc=jc.viewController,oc=lpTag.unifiedWindow.State,pc=lpTag.unifiedWindow.apps,qc=lpTag.unifiedWindow.consts,rc=lpTag.unifiedWindow.consts.chatEvents,sc=lpTag.unifiedWindow.events.socket,tc=lpTag.AMSStatics.conversation.states,uc=lpTag.AMSStatics.dialog,vc=lpTag.unifiedWindow.secureFormStates,wc=lpTag.AMSStatics.participant.roles,xc=lpTag.unifiedWindow.consts.errorTypes,yc=lpTag.unifiedWindow.consts.authErrorsTypes,zc=lpTag.unifiedWindow.MessageState,Ac=lpTag.unifiedWindow.contentTypes,Bc=lpTag.unifiedWindow.MessageTypes,Cc=lpTag.unifiedWindow.settingsIDs,Dc=lpTag.unifiedWindow.structuredContentTypes,Ec=lpTag.unifiedWindow.quickRepliesStates,Fc=lpTag.unifiedWindow.welcomeMessageStates,Gc=0,Hc=4,Ic=2,Jc=3,Kc=null,Lc={SYSTEM:"system",AGENT:"agent",VISITOR:"visitor"},Mc=!1,Nc=!1,Oc=15e3,Pc=null,Qc=3e5,Rc=lpTag.AMSStatics.dialog.closeReasons,Sc=!1,Tc=!1,Uc=!1,Vc={},Wc={},Xc={},Yc={},Zc={},$c={},_c=lpTag.unifiedWindow.applicationUtils,ad=[],bd="dialogId",cd="@id",dd=!1,ed=!1,fd={},gd={},hd=[],id=(lpTag.csds,{csds:{acCdnDomain:"acCdnDomainConsumerSdk",leCdnDomain:"leCdnDomain"},storage:{unauthStorage:{key:"-unAuthJWT",name:"unAuthMessaging"},stepUpStorage:{appName:"StepUP",valueKeys:{lastActiveConvo:"lastActiveConvo"}}}}),jd=!1;gd[rc.SECURE_FORM]=!0;e(d);this.setConversationUrgency=h;this.authenticate=g;this.isCurrentConversation=i;this.getOtkJson=xb;this.getOTK=yb;this.secureFormRequest=zb;this.richContentRequest=Ab;this.imageShareGenerateUrlRequest=Bb;this.imageShareDownloadUrlRequest=Cb;this.dispose=f;this.quickRepliesRequest=Db;this.getShiftStatus=Eb;this.getConversationList=j;this.areAllConversationsLoaded=k;this.isAutoClosedMainDialog=$};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.LineStatesManager=function(a){function b(a){B.info("init",u);if("object"==typeof a){t=a.events;p=a.lpModel;q=a.lppModel;r=a.apiDelegate;s=a.browserStateManager;g()}else B.error("init: missing mandatory dependencies.",u)}function c(a){var b=h(a);d(b);return b}function d(a){var b,c=k(),d=[];a=a||m();Array.isArray(a)&&a.forEach(function(a){if(!o(a)&&l(a,c)){a.state=c;d.push(a)}});b=D.groupByKeyValue(d,"state");for(var e in b)r.sendStatesUpdate(b[e],e)}function e(a){for(var b,c,d=a.length-1;d>=0;d--){b=a[d];if(!o(b)&&n(b)&&!b.history)break;c||!o(b)||b.history||(c=b)}return c||b}function f(){t.unbind({appName:"*",eventName:y.LINES_VIEWED,func:d})}function g(){t.bind({appName:"*",eventName:y.LINES_VIEWED,func:d})}function h(a){var b,c=m(),d=[];Array.isArray(a)&&a.forEach(function(a){b=i(a,c);b&&d.push(b)});return d}function i(a,b){var c,d=a;c=j(b,a);if(c&&"undefined"!=typeof a.state)if(l(c,a.state,a.originatorId,a.source,a.resubscribed)){d=c;d.state=a.state;d.update=!0}else if("SENT"===a.state&&"SENT"!==c.state&&c.state!==w.FAILED&&c.state!==w.ERROR){d=a;d.localId=c.localId;d.state=c.state}else d=null;return d}function j(a,b){var c=null;Array.isArray(a)&&a.some(function(a){if(a[C]===b[C]&&a.convId===b.convId){c=a;return!0}});return c}function k(){var a=q.get(A.WINDOW_MAXIMIZED);return s.isFocus()&&a?w.READ:w.ACCEPT}function l(a,b,c,d,e){var f=d?a.source!==d:!0;if(e){f=!0;c=null}return(a.state!==w.FAILED&&!a.originatorId&&a.source===v.VISITOR||a.originatorId&&a.originatorId!==c)&&a.state!==b&&f&&x[a.state]<x[b]}function m(){return p.get(z.LINES)||[]}function n(a){return a.state===w.READ?!0:!1}function o(a){return a.source===v.VISITOR?!0:!1}var p,q,r,s,t,u="LineStatesManager",v={AGENT:"agent",VISITOR:"visitor"},w=lpTag.unifiedWindow.MessageState,x=lpTag.unifiedWindow.MessagePriority,y=lpTag.unifiedWindow.events.viewController,z=lpTag.unifiedWindow.chatModelPath,A=lpTag.unifiedWindow.uiModelPath,B=lpTag.unifiedWindow.log,C="@id",D=lpTag.unifiedWindow.applicationUtils;b(a);this.verifyLineStates=c;this.sendStatesUpdate=d;this.getLastReadLine=e;this.dispose=f};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.TtrManager=function(a){function b(a){F.info("init",z);if("object"==typeof a){w=a.events;u=a.lpModel;v=a.lppModel;t=a.conversationManager;x=a.features;d()}else F.error("init: missing mandatory dependencies.",z)}function c(){w.unbind({appName:A,eventName:B.BRAND_INFO,func:i});v.unbind(E.STATE,h);u.unbind(D.TRANSCRIPT_LOADED,l);f()}function d(){w.bind({appName:A,eventName:B.BRAND_INFO,func:i});g();v.bind(E.STATE,h);u.bind(D.TRANSCRIPT_LOADED,l)}function e(){H.published=!1;H.urgencyInfo=null;f()}function f(){w.unbind({appName:A,eventName:B.TTR_INFO,func:j});G=!1}function g(){if(!G){G=!0;w.bind({appName:A,eventName:B.TTR_INFO,func:j})}}function h(a){var b=a.newValue;switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.POST_CHAT:e();break;case lpTag.unifiedWindow.State.REQUESTED:case lpTag.unifiedWindow.State.PENDING:case lpTag.unifiedWindow.State.CHATTING:g()}}function i(a){if(!H.brandInfo||!I.isSameObject(a,H.brandInfo)){H.brandInfo=a;q();l()}}function j(a){if(!H.urgencyInfo||!I.isSameObject(a,H.urgencyInfo)){k(a);l()}}function k(a){H.urgencyInfo=H.urgencyInfo||{};var b=a.ttrType!==H.urgencyInfo.ttrType,c=a.manualETTR!==H.urgencyInfo.manualETTR;H.urgencyInfo=a;H.urgencyInfo.hasDataChanged=c||b}function l(){H.brandInfo&&H.urgencyInfo&&u.get(D.TRANSCRIPT_LOADED)&&null!=J&&m()}function m(){var a=n(H.brandInfo,H.shiftStatus),b=p(H.urgencyInfo);s(a,b)}function n(a,b){var c={},d=I.getPropertyFromObject(a,"timeDiff")||0;c.delay=I.getPropertyFromObject(a,"delay.tillWhen")||0;c.onOffHours=o(c.delay,d,b);return c}function o(a,b,c){var d,e,f=(new Date).getTime()-b;if(I.isEmpty(c)){e="number"==typeof a&&a>f;e&&(d=a-f)}else{e=!c.onShift;d=e?c.nextOn&&c.nextOn>f?c.nextOn-f:null:c.nextOff&&c.nextOff>f?c.nextOff-f:null}if("number"==typeof d){var g=Math.min(d+K,36e5);y&&clearTimeout(y);y=setTimeout(I.isEmpty(c)?l:q,g)}return e}function p(a){return{isUrgent:a.ttrType===C.urgent,isPrioritized:a.ttrType===C.prioritized,isManual:!!a.manualETTR}}function q(){t.getShiftStatus({success:r,error:r})}function r(a){var b=a&&a.body;J=!I.isEmpty(b)&&200===a.statusCode&&200===a.responseCode;J&&(H.shiftStatus=b);l()}function s(a,b){var c={isUrgent:b.isUrgent,markUrgencyEnabled:!a.onOffHours&&!b.isManual&&!b.isPrioritized};u.modify(D.TTR,c)}var t,u,v,w,x,y,z="TtrManager",A=lpTag.unifiedWindow.apps.CHAT,B=lpTag.unifiedWindow.events.chat,C=lpTag.AMSStatics.effectiveTTRTypes,D=lpTag.unifiedWindow.chatModelPath,E=lpTag.unifiedWindow.uiModelPath,F=lpTag.unifiedWindow.log,G=!1,H={brandInfo:null,urgencyInfo:null,shiftStatus:null,published:!1},I=lpTag.unifiedWindow.applicationUtils,J=null,K=1e4;b(a);this.dispose=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.HeartBeatManager=lpTag.unifiedWindow.HeartBeatManager||function(a,b){function c(a,b){S.info("init",U);if("object"==typeof a&&a.accountId&&a.storageKey&&a.secureStorageLocation&&"object"==typeof b){E=a.accountId;I=a.storageKey;F=a.poppedOut;R=a.secureStorageLocation;Q=b.events;P=b.browserStateManager;g();if(F)j();else{s();q()}}else S.error("No configuration received on init",U)}function d(){e();h();E=null;I=null;F=null;R=null;Q=null;P=null}function e(a){S.info("_stop ,preserveTimestamps: "+a,U);L=!0;m();F||a||n();K=!1}function f(a){S.info("_start, preserveTimestamps: "+a,U);D=(new Date).getTime();e(a);o();p()}function g(){Q.bind({appName:T.UISTATE,eventName:V.uiState.EMBEDDED_CHANGED,func:i})}function h(){Q&&Q.unbind&&Q.unbind({appName:T.UISTATE,eventName:V.uiState.EMBEDDED_CHANGED,func:i})}function i(a){S.debug("_handleEmbeddedStateChange: embedded="+a,U);a?e():f(!0)}function j(){f(!0);l(V.heartBeat.INIT)}function k(){l(F?V.heartBeat.FAILED:V.application.DO_HARAKIRI)}function l(a,b){Q.trigger({appName:U,eventName:a,data:b})}function m(){S.info("_clearTimeouts",U);J&&clearTimeout(J);M&&clearTimeout(M)}function n(){S.info("_clearTimestamps",U);r();t()}function o(){S.info("_resolveApps: initializing apps value - poppedOut = "+F,U);if(F){G=W;H=X}else{G=X;H=W}S.info("_resolveApps: resolvedGetApp = "+G+", resolvedSetApp = "+H,U)}function p(){S.info("_startBeating",U);L=!1;K=!0;w(x);A()}function q(){S.info("_fetchPopOutBeat",U);lpTag.taglets.lpSecureStorage.getValue({key:I,site:E,app:ba,success:r,appName:X,domain:R,firstParty:!0})}function r(a){S.info("_initPopOutBeat: "+JSON.stringify(a),U);if(!a||!a.timestamp){S.info("_initPopOutBeat: initializing popout beat value",U);lpTag.taglets.lpSecureStorage.setValue({key:I,site:E,app:ba,value:C(0),success:v,error:v,appName:X,domain:R,firstParty:!0})}}function s(){S.info("_fetchEmbeddedBeat",U);lpTag.taglets.lpSecureStorage.getValue({key:I,site:E,app:ba,success:u,appName:W,domain:R,firstParty:!0})}function t(){lpTag.taglets.lpSecureStorage.setValue({key:I,site:E,app:ba,value:C(0),success:v,error:v,appName:W,domain:R,firstParty:!0})}function u(a){S.info("_initEmbeddedBeat: data="+JSON.stringify(a),U);if(!a||!a.timestamp){S.info("_initEmbeddedBeat: initializing embedded beat value",U);t()}}function v(){S.info("_emptyCallback",U)}function w(a){S.info("_getBeat: got beat",U);J&&clearTimeout(J);L||(F||P.visibilitySupported()&&!P.isHidden()?lpTag.taglets.lpSecureStorage.getValue({key:I,site:E,app:ba,success:a,appName:G,domain:R,firstParty:!0}):J=setTimeout(z(a),aa))}function x(a){S.info("_validateBeat: data="+JSON.stringify(a),U);var b=(new Date).getTime();if(!L)if(F||a&&a.timestamp||!(b-D>Z)){if(F&&(!a||!a.timestamp)||a&&a.timestamp&&y(b,a.timestamp)){S.info("_validateBeat: timed out data= "+JSON.stringify(a)+" session="+I,U);k();K=!1}else if(!K){S.info("_validateBeat: resumed",U);K=!0;l(V.heartBeat.RESUMED)}O=N;J=setTimeout(z(x),aa)}else{S.info("_validateBeat: timed out from start data= "+JSON.stringify(a)+" session="+I,U);k()}}function y(a,b){S.debug("_isTimeout: now="+a+", currentTime="+b+", prevRecordedWriteTime="+O+", lastWriteTime="+N,U);return O===N?a-b>Y:F?a-b>_:a-b>$}function z(a){return function(){w(a)}}function A(){S.info("_setBeat",U);M&&clearTimeout(M);L||(F||P.visibilitySupported()&&!P.isHidden()?lpTag.taglets.lpSecureStorage.setValue({key:I,site:E,app:ba,value:C((new Date).getTime()),success:B,error:v,appName:H,expires:108e5,domain:R,firstParty:!0}):M=setTimeout(A,aa))}function B(a){S.info("_setBeatCallBack: new data="+JSON.stringify(a),U);N=a.timestamp;M=setTimeout(A,aa)}function C(a){return{timestamp:a}}var D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S=lpTag.unifiedWindow.log,T=lpTag.unifiedWindow.apps,U=T.HEARTBEAT,V=lpTag.unifiedWindow.events,W="UIHeartBeatEmbedded",X="UIHeartBeatPopOut",Y=6e4,Z=15e3,$=15e3,_=2e3,aa=1e3,ba=T.UNIFIED_WINDOW;c(a,b);this.dispose=d};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.SecureFormManager=function(a){function b(a){X.info("init",P);if("object"==typeof a){L=a.lpModel;M=a.lppModel;I=a.events;J=a.apiManager;K=a.browserStateManager;Z=a.appContext.conf.engConf.lang||Z;fa=a.appContext.featureStateManager.getSettingsValue(ea.OTK_RETRIES)||0;N=lpTag.unifiedWindow.helpers.SecureFormStyleHelper(a.appContext);H=a.appContext.conf.unifiedConf.poppedOut?-1:lpTag.storageMethods.getSessionData("lpTabId");O="true"===a.appContext.conf.windowConf.hidePCILogo||a.appContext.conf.windowConf.hidePCILogo===!0;d()}else X.error("init: missing mandatory dependencies.",P)}function c(){I.unbind({appName:T,eventName:W.FINISHED_EVENTS_BULK,func:m});I.unbind({appName:T,eventName:W.SECURE_FORM,func:e});I.unbind({appName:U,eventName:da.SUBMIT,func:y});I.unbind({appName:U,eventName:da.VIEWED,func:w});I.unbind({appName:U,eventName:da.ERROR,func:x});I.unbind({appName:T,eventName:W.CONVERSATION_CLOSED,func:k});aa=!0}function d(){I.bind({appName:T,eventName:W.FINISHED_EVENTS_BULK,func:m});I.bind({appName:T,eventName:W.SECURE_FORM,func:e});I.bind({appName:U,eventName:da.SUBMIT,func:y});I.bind({appName:U,eventName:da.VIEWED,func:w});I.bind({appName:U,eventName:da.ERROR,func:x});I.bind({appName:T,eventName:W.CONVERSATION_CLOSED,func:k})}function e(a){var b;if(a&&f(a)){b=o(a);switch(a.command){case da.SEND:g(a,b);break;case da.VIEWED:i(b,a.source);S[b.info.uniqueId].visualState=ca.OPEN;break;case da.SUBMIT:j(a,b);S[b.info.uniqueId].visualState=ca.CLOSED;break;case da.ERROR:h(b,b);S[b.info.uniqueId].visualState=ca.CLOSED}A(b.info.uniqueId,a.command);aa||L.modify(F(b),S[b.info.uniqueId]);X.info("_onSecureFormEvent: event="+JSON.stringify({event:a}),P)}}function f(a){var b=S[a&&a.info&&a.info.uniqueId],c=b&&a.command===da.SEND,d=b&&a.command===da.ERROR,e=b&&b.formState===da.SUBMIT&&a.command===da.SUBMIT,f=b&&a.command===da.VIEWED&&"agent"===a.source;return d||!c&&!e&&!f}function g(a,b){if(b){b.info=a.info;q(b);C(a,b,da.SEND);v(b)}}function h(a,b){var c=S[a&&a.info&&a.info.uniqueId];c&&!c.firedLine&&C(a,b,da.SEND)}function i(a,b){var c=a&&"visitor"===b&&!aa&&a.formState!==da.VIEWED&&a.formState!==da.ERROR;c&&A(a.info.uniqueId,da.VIEWED_ON_ANOTHER_TAB)}function j(a,b){b&&C(a,b,da.SUBMIT)}function k(a){var b;if(a&&a.convId){b=l(a.convId);if(b){S[b].command=da.ERROR;S[b].formState=da.ERROR;L.modify(F(S[b]),S[b])}}}function l(a){for(var b in S)if(S[b].visualState===ca.OPEN&&S[b].convId===a)return S[b].info.uniqueId}function m(){if(aa){n();L.modify(V.SECURE_FORMS,S)}aa=!1}function n(){for(var a in S)if(S.hasOwnProperty(a))switch(S[a].formState){case da.VIEWED:z(S[a].info.uniqueId,da.ABORTED);break;case da.SEND:z(S[a].info.uniqueId,da.RECEIVED)}}function o(a){var b=a&&a.info;if(b&&b.uniqueId){S[b.uniqueId]=S[b.uniqueId]||a;return S[b.uniqueId]}}function p(a){return a?S[a]:void 0}function q(a){a&&a.info&&(ba[a.info.uniqueId]=r(a.info))}function r(a){return function(b){var c,d={siteid:lpTag.site,redirect:encodeURIComponent(R),css:encodeURIComponent(N.getCompressedCSS()),hideLogo:O,otkJson:encodeURIComponent(J.getOtkJson(a)),lang:Z,formid:a.secureFormId};if(a.uniqueId&&fa>1){ha=M.get($.SECURE_FORMS_INVITATIONS)||{};if(ha[a.uniqueId])ia=ha[a.uniqueId];else{ia={formId:a.uniqueId,retryCount:fa,currentRetryAttempt:0};ha[a.uniqueId]=ia}ha[a.uniqueId].currentRetryAttempt++;M.modify($.SECURE_FORMS_INVITATIONS,ha);if(ia.url&&ia.currentRetryAttempt<=fa){lpTag.taglets.lpUtil.runCallback(b,null,ia.url);return}}if(a&&a.submitOtk&&a.getOtk){d.otk=a.submitOtk;d.formOtk=a.getOtk;c=s(Q,d);t(c,a.uniqueId);lpTag.taglets.lpUtil.runCallback(b,null,c)}else a&&a.invitationId&&J.getOTK(a,function(e){var f=e&&e.token;if(f&&f.writeOtk&&f.readOtk){d.otk=f.writeOtk;d.formOtk=f.readOtk;c=s(Q,d);ga.info("Got SF URL: "+c,P)}else{ga.error("No tokens",P);f&&"object"==typeof f&&ga.info("writeOtk: "+f.writeOtk+", readOtk: "+f.readOtk,P)}t(c,a.uniqueId);lpTag.taglets.lpUtil.runCallback(b,null,c)})}}function s(a,b){return lpTag.taglets.lpUtil.addQueryParams(a,b)}function t(a,b){ha=M.get($.SECURE_FORMS_INVITATIONS)||{};ha[b]&&(ha[b].url=a);M.modify($.SECURE_FORMS_INVITATIONS,ha)}function u(a,b){lpTag.taglets.lpUtil.runCallback(ba[a],null,b)}function v(a){aa||a.command!==da.SEND||z(a.info.uniqueId,da.RECEIVED)}function w(a){if(!D(a.uniqueId)){E(a.uniqueId);B(da.VIEWED,a.uniqueId);A(a.uniqueId,da.VIEWED)}}function x(a){if(ia.currentRetryAttempt<=ia.retryCount){ga.info("SF retry data: "+JSON.stringify(ia),P);I.trigger({appName:U,eventName:"SF_ERROR"})}else{if(a.isTimeOut){ga.info("SF timeout: "+JSON.stringify(a),P);var b=p(a.uniqueId);b.isTimeOut=!0}B(da.ERROR,a.uniqueId,{errorReason:a.message.errorReason||"unknown",failedCommand:da.VIEWED})}}function y(a){B(da.SUBMIT,a.uniqueId,{formUuid:a.message.token,gatewayDomain:a.message.gatewayDomain},a.text);I.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.PREPARE_SLIDER_CLOSED_TIMEOUT})}function z(a,b){B(b,a);A(a,b)}function A(a,b){if(S[a]){S[a].events=S[a].events||[];if(Y.indexOf(S[a].events,b)<0){S[a].events.push(b);S[a].formState=D(a)?da.VIEWED_ON_ANOTHER_TAB:b}}}function B(a,b,c,d){var e=S[b];if(e&&!D(b)){c=c||{};c.uniqueId=b;c.secureFormName=e.info.secureFormName;c.secureFormId=e.info.secureFormId;c.sequenceId=e["@id"];J.secureFormRequest(a,b,c,d)}}function C(a,b,c){S[b.info.uniqueId].firedLine=!0;I.trigger({appName:T,eventName:W.LINE,data:G(a,b,c)})}function D(a){if(S[a].formState===da.VIEWED_ON_ANOTHER_TAB)return!0;var b=M.get($.SECURE_FORMS_TAB_HANDLER);return b&&"undefined"!=typeof b[a]&&b[a]!==H}function E(a){var b=M.get($.SECURE_FORMS_TAB_HANDLER)||{};if("undefined"==typeof b[a]){b[a]=H;M.modify($.SECURE_FORMS_TAB_HANDLER,b)}}function F(a){var b=V.SECURE_FORMS;return{name:b.name,path:b.path+"."+a.info.uniqueId}}function G(a,b,c){var d={"@id":a["@id"],source:"agent",by:b.by,time:a.time||new Date,type:W.SECURE_FORM,textKey:_+c,dictionaryKey:{secureFormName:b.info.secureFormName},uniqueId:b.info.uniqueId,formName:b.info.secureFormName,history:a.history,track:a.track};if(a.state){d.state=a.state;d.convId=a.convId;d.originatorId=a.originatorId}return d}var H,I,J,K,L,M,N,O,P="SecureFormManager",Q="https://"+lpTag.csds.getDomain("tokenizer")+"/pcigw/pci_dynamic_le.jsp",R="https://"+lpTag.csds.getDomain("tokenizer")+"/pcigw/pci_dynamic_submitted_le.html",S={},T=lpTag.unifiedWindow.apps.CHAT,U=lpTag.unifiedWindow.apps.SECURE_FORM,V=lpTag.unifiedWindow.chatModelPath,W=lpTag.unifiedWindow.events.chat,X=lpTag.unifiedWindow.log,Y=lpTag.unifiedWindow.applicationUtils,Z="en-US",$=lpTag.unifiedWindow.uiModelPath,_="secureForm_line_",aa=!0,ba={},ca={OPEN:"OPEN",CLOSED:"CLOSED"},da=lpTag.unifiedWindow.secureFormStates,ea=lpTag.unifiedWindow.settingsIDs,fa=0,ga=lpTag.unifiedWindow.log,ha={},ia={};b(a);this.getFormUrl=u;this.dispose=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.RichContentManager=function(a){function b(a){p.info("init",m);if("object"==typeof a){k=a.lpModel;l=a.lppModel;i=a.appContext;j=a.apiManager;d()}else p.error("init: missing mandatory dependencies.",m)}function c(){i.events.unbind({appName:o,eventName:n.ACTION_EVENT,func:f});i.events.unbind({appName:o,eventName:n.PUBLISH_TEXT,func:g});i.events.unbind({appName:o,eventName:n.DISPLAYED,func:e});i.events.unbind({appName:o,eventName:n.SUBMIT_AS_TEXT,func:h})}function d(){i.events.bind({appName:o,eventName:n.ACTION_EVENT,func:f});i.events.bind({appName:o,eventName:n.PUBLISH_TEXT,func:g});i.events.bind({appName:o,eventName:n.DISPLAYED,func:e});i.events.bind({appName:o,eventName:n.SUBMIT_AS_TEXT,func:h})}function e(a){if(a){var b={sequenceId:"number"==typeof a.uniqueId?a.uniqueId:a.sequenceId,state:r};j.richContentRequest(b)}}function f(a){if(a){var b={sequenceId:a.uniqueId||a.sequenceId,state:q};j.richContentRequest(b,a.metadata||[])}}function g(a){if(a&&a.actionData&&a.actionData.text){var b={text:a.actionData.text,metadata:a.metadata};i.transcriptManager.sendLine(b)}}function h(a){if(a&&a.actionData){var b={text:a.actionData.join(", ")||"",metadata:a.metadata||[]};i.transcriptManager.sendLine(b)}}var i,j,k,l,m="RichContentManager",n=lpTag.unifiedWindow.richContentStates,o=lpTag.unifiedWindow.apps.RICH_CONTENT,p=lpTag.unifiedWindow.log,q=(lpTag.unifiedWindow.applicationUtils,"ACTION"),r="ACCEPT";b(a);this.dispose=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.QuickRepliesManager=function(a){function b(){l.info("dispose",j);e()}function c(a){l.info("init",j);if("object"==typeof a){h=a.appContext;i=a.apiManager;d()}else l.error("init: missing mandatory dependencies.",j)}function d(){h.events.bind({appName:m,eventName:n.ACTION_EVENT,func:f});h.events.bind({appName:m,eventName:n.PUBLISH_TEXT,func:g})}function e(){h.events.unbind({appName:m,eventName:n.ACTION_EVENT,func:f});h.events.unbind({appName:m,eventName:n.PUBLISH_TEXT,func:g})}function f(a){if(a){var b={sequenceId:a.sequenceId,state:k};i.quickRepliesRequest(b,a.payload||[])}}function g(a){if(a&&a.payload&&a.payload.action&&a.payload.action.text){var b={text:a.payload.action.text,metadata:a.payload.metadata};h.transcriptManager.sendLine(b)}}var h,i,j="QuickRepliesManager",k="ACTION",l=lpTag.unifiedWindow.log,m=lpTag.unifiedWindow.apps.QUICK_REPLIES,n=lpTag.unifiedWindow.quickRepliesStates;c(a);this.dispose=b};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.CoBrowseManager=function(a){function b(a){C.info("init",A);if("object"==typeof a){v=a.events;w=a.lpModel;x=a.appContext;y=x.conf.engConf;z=D.isArray(a.appContext.conf.accountSettings)?a.appContext.conf.accountSettings:[];n()}else C.error("init: missing mandatory dependencies.",A)}function c(a){l(a)&&h(G.INVITED,m(a));a.type=F.INFO;a.text=j(L+N,null,a.by);a.by=x.translator.translate("info");a.source="system";return a}function d(a){return a&&a.text&&a.text.indexOf&&a.text.indexOf(B)>=0?!0:!1}function e(a){return"VIDEO_CALL"===a||"VOICE_CALL"===a}function f(a,b){var c=z.filter(function(b){return b.id===a})[0];return c&&c.propertyValue&&c.propertyValue.value===b}function g(){for(var a=w.get(I.PARTICIPANTS)||{},b=Object.keys(a),c=!1,d=0;d<b.length;d++){var e=a[b[d]];if("system"===e.type){c=!0;break}}return c&&f(E.COBROWSE_CONTROLLER_BOT_PREFERRED_FOR_SYSTEM_MESSAGES,"true")}function h(a,b,c,d,e){d=d||w.get(I.AGENT_ID);v.trigger({appName:K,eventName:a,data:{ssid:y.ssid,svid:y.svid,scid:y.scid,cid:y.cid,eid:y.eid,agentId:d,serviceId:b,chatId:w.get(I.CHAT_ID),visitorName:w.get(I.VISITOR_NAME)||"",mode:c,endTs:e},global:!0});g()||i(a,c,d)}function i(a,b,c){var d=x.conf.unifiedConf.isMessaging;if(a!==G.STARTED&&a!==G.INVITED&&a!==G.CANCELED&&(a!==G.OFFERED||d)){var e;if(c){var f=w.get(I.PARTICIPANTS),g=f&&f[c];g&&(e=g.name)}var h=L+a,i=j(h,b,e);v.trigger({appName:J,eventName:F.LINE,data:{source:"system",by:x.translator.translate("info"),time:new Date,type:F.INFO,text:i}});v.trigger({appName:J,eventName:F.FINISHED_EVENTS_BULK})}}function j(a,b,c){c=c||w.get(I.AGENT_NAME);x.translator.extendDictionary({agentName:c},{locale:y.lang});"VIDEO_CALL"===b?a="video_"+a:"VOICE_CALL"===b&&(a="voice_"+a);var d=x.translator.translate(a),e=k();e&&(d=e[a]||d);return d}function k(){var a=x.conf.unifiedConf,b=x.conf.engConf.lang;return a&&a.cobrowseCustomization&&a.cobrowseCustomization[b]}function l(a){var b=new Date(a.time);return Date.now()-b.getTime()<M}function m(a){var b=a.text.match(/data-lp-serviceid="([\w\d#]*)"/);return b.length>1?b[1]:""}function n(){v.bind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.coBrowseEvents.DIALOG_CREATED,func:p})}function o(){v.unbind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.coBrowseEvents.DIALOG_CREATED,func:p})}function p(a){q(a)?h(G.INVITED,a.metaData.serviceId,a.metaData.mode,r(a)):s(a)&&h(G.CANCELED,null,null,null,a.endTs)}function q(a){var b=a&&a.metaData,c="OPEN"===a.state;if(c&&b){var d=-1!==H.indexOf(b.mode),e="INVITED"===b.sessionState,f=Date.now()/1e3<b.expires;c=d&&e&&f}return c}function r(a){for(var b=0;b<a.participants.length;b++)if(a.participants[b]&&"CONSUMER"!==a.participants[b].role)return a.participants[b].id}function s(a){return"CLOSE"===a.state}function t(){return O}function u(a){O=a;a||v.trigger({appName:"tooltipButton",eventName:"close",global:!0})}var v,w,x,y,z,A="CoBrowseManager",B='data-lp-point="cb-offer"',C=lpTag.unifiedWindow.log,D=lpTag.unifiedWindow.applicationUtils,E=lpTag.unifiedWindow.settingsIDs,F=lpTag.unifiedWindow.events.chat,G=lpTag.unifiedWindow.events.coBrowseEvents,H=lpTag.unifiedWindow.consts.coBrowse.acceptedCoBrowseModes,I=lpTag.unifiedWindow.chatModelPath,J=lpTag.unifiedWindow.apps.CHAT,K=lpTag.unifiedWindow.apps.UNIFIED_WINDOW,L="cobrowseLine_",M=115e3,N="cobrowseOffered",O=!1;b(a);this.isCall=e;this.isCoBrowseLineEvent=d;this.processCoBrowseLineObj=c;this.publishCoBrowseEvent=h;this.customizeTranslation=j;this.isInActiveCall=t;this.setActiveCall=u;this.dispose=o;this.COBROWSE_OFFER_TIMEOUT=M};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};
lpTag.unifiedWindow.TranscriptManager=function(a){function b(a){aa.info("init",T);if("object"==typeof a){N=a.events;G=a.lpModel;H=a.lppModel;I=a.apiDelegate;J=a.coBrowseManager;K=a.idnvManager;L=a.browserStateManager;M=a.lineStatesManager;S=a.canEnableOfflineFlow;O=a.appContext;var b=O&&O.conf&&O.conf.unifiedConf;Q=b&&b.hasOwnProperty("isWelcomeMessageForAgentEnabled")?b.isWelcomeMessageForAgentEnabled:!0;i()}else aa.error("init: missing mandatory dependencies.",T)}function c(a,b,c,d){var e;aa.info("sendStructuredContentLine: visitor sent structued content line",T);if("object"==typeof a){j(a);a.type=V.chatEvents.RICH_CONTENT;fa++;x([a]);ea++;e=w().length-1;var f=u(e,X.ERROR),g=v(e,X.SENT,b,c,d),h=I.sendStructuredContentLine.bind(I,a,g,f);h()}}function d(a,b){var c=!1,d=H.get(_.STATE)||"",e=lpTag.unifiedWindow.Priority;if(O&&O.shouldWelcomeMessageBeSent&&Q){k(a);O.shouldWelcomeMessageBeSent=!1}if(S&&(e[d]<e[ba.WAITING]||d===ba.WAITING&&-1===ia.indexOf(ba.REQUESTED)||""===d)){if(ja)return;ja=a;c=!0;N.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.uiState.SEND_BUTTON,data:{enabled:!1}});N.trigger({appName:"*",eventName:"pendingLineSet",data:{serverPendingLineExists:!0}})}var f,g;aa.info("sendLine: visitor sent line",T);if("object"==typeof a){if(lpTag.hooks&&lpTag.hooks.exec){g=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.BEFORE_SEND_VISITOR_LINE,data:{line:a}});a=g&&g.data&&g.data.line||a}j(a);c||fa++;x([a]);ea++;f=w().length-1;if(c){if(ja){ja.lineIndex=f;ja.serverHandler=b}}else{var h=u(f,X.ERROR),i=u(f,X.SENT),l=u(f,X.PENDING),m=I.sendLine.bind(I,a,i,h);b?b({callback:m,error:h,retry:l,lineIndex:f}):m()}}}function e(a,b){aa.info("sendLine: send visitor line: "+JSON.stringify(a),T);if("object"==typeof a){j(a);I.sendLine(a,b&&b.success,b&&b.error)}}function f(a){aa.info("setVisitorTyping: isTyping="+a,T);if("boolean"==typeof a&&P!==a&&H.get(_.STATE)===ba.CHATTING&&F(a)){P=a;I.setVisitorTyping(a);H.modify(_.VISITOR_TYPING,a)}}function g(){return I.currentConversationActive&&I.currentConversationActive()}function h(){N.unbind({appName:U,eventName:Y.LINE,func:m});N.unbind({appName:U,eventName:Y.CHAT_INFO,func:B});N.unbind({appName:U,eventName:Y.AGENT_TYPING,func:z});N.unbind({appName:U,eventName:Y.FINISHED_EVENTS_BULK,func:p});N.unbind({appName:"*",eventName:Z.LINES_VIEWED,func:q});H.unbind(_.STATE,r)}function i(){N.bind({appName:U,eventName:Y.LINE,func:m});N.bind({appName:U,eventName:Y.CHAT_INFO,func:B});N.bind({appName:U,eventName:Y.AGENT_TYPING,func:z});N.bind({appName:U,eventName:Y.FINISHED_EVENTS_BULK,func:p});N.bind({appName:"*",eventName:Z.LINES_VIEWED,func:q});H.bind(_.STATE,r)}function j(a){a.source=W.VISITOR;a.time=(new Date).getTime();a.state=X.PENDING;a[ca]=ea}function k(a){var b=O.welcomeMessage.content||O.conf.windowConf&&O.conf.windowConf.welcomeMessage;if(b){a.metadata=a.metadata||[];var c={event:{contentType:ka.CONTENT_TYPE_TEXT,message:b.text},type:"WelcomeMessage"};if(b.quickReplies&&b.quickReplies.replies.length>=1){c.event.quickReplies=b.quickReplies;c.event.quickReplies.itemsPerRow=c.event.quickReplies.itemsPerRow||8;delete c.event.quickReplies.rowLimit;c.event.quickReplies.replies.forEach(function(a){delete a.style})}"richContent"===b.type?c.event.type=ka.RICHCONTENT_EVENT:c.event.type=ka.CONTENT_EVENT;a.metadata.push(c)}}function l(a){var b=!1,c=G.get($.TRANSCRIPT_LOADED);a=a||[];if(!c){for(var d=0;d<a.length;d++)if(!isNaN(a[d][da])){b=!0;break}b&&G.modify($.TRANSCRIPT_LOADED,!0)}}function m(a){var b,c,d,e=a.lines||a;aa.info("_collectLines: lines="+JSON.stringify(ga.excludeAttributes(ga.clone(e),["text"])));if(a){c=ga.isArray(a.lines)?a.lines:[a];for(var f=0;f<c.length;f++){b=c[f];d=n(b);if(!d){b=o(b);b&&ha.push(b)}}}}function n(a){if(a.source===W.VISITOR&&fa>0){fa--;return!0}return!1}function o(a){J.isCoBrowseLineEvent(a)?a=J.processCoBrowseLineObj(a):K.isIdnvLineObj(a)?a=K.processIdnvLineObj(a):a.type=a.type||V.chatEvents.LINE;return a}function p(){var a;M&&(ha=M.verifyLineStates(ha));x(ha);ha=[];a=w();D(a);l(a)}function q(){var a=w();D(a)}function r(a){if(a&&a.newValue){ia.push(a.newValue);(a.newValue===lpTag.unifiedWindow.State.CHATTING||a.newValue===lpTag.unifiedWindow.State.WAITING&&ia.length>1&&ia[ia.length-2]===lpTag.unifiedWindow.State.REQUESTED)&&s()}}function s(){if(ja&&!ja.isProcessed){var a=u(ja.lineIndex,X.ERROR),b=u(ja.lineIndex,X.SENT),c=u(ja.lineIndex,X.PENDING),d=I.sendLine.bind(I,ja,b,a);ja.serverHandler?ja.serverHandler({callback:d,error:a,retry:c,lineIndex:ja.lineIndex}):d();ja.isProcessed=!0}}function t(a,b,c){for(var d,e=w(),f=0;f<e.length;f++)if(e[f].localId===b){d=e[f];d.state=c;d.update=!0;if(a&&!isNaN(a[da])&&a.convId){d[da]=a[da];d.convId=a.convId;d.originatorId=R}a&&"undefined"!=typeof a.canRetry&&(d.canRetry=a.canRetry);a&&a.relativePath&&(d.relativePath=a.relativePath);break}x([d])}function u(a,b){return function(c){t(c,a,b);if(a===(ja&&ja.lineIndex)&&b!==X.PENDING){ja=null;N.trigger({appName:"*",eventName:"pendingLineSet",data:{serverPendingLineExists:!1}})}}}function v(a,b,c,d,e){return function(f){t(f,a,b);d.call(c,e)}}function w(){return G.get($.LINES)||[]}function x(a,b){var c;a=y(a);if(lpTag.hooks&&lpTag.hooks.exec){c=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_GET_LINES,data:{lines:a}});a=c&&c.data&&c.data.lines||a}aa.info("_storeChatLines: store chat lines in the model, lines="+JSON.stringify(ga.excludeAttributes(ga.clone(a),["text"])),T);G.modify($.LINES,a,ca,b)}function y(a){return a.map(function(a){a[ca]="undefined"!=typeof a[ca]?a[ca]:ea++;return a})}function z(a){if(A(a)){a&&"boolean"==typeof a.agentTyping&&G.modify($.AGENT_IS_TYPING,a.agentTyping);aa.info("_setAgentTyping: data="+JSON.stringify(a),T)}}function A(a){var b=G.get($.PARTICIPANTS)||[];a=a||{};return!a.originatorId||b[a.originatorId].type===W.AGENT}function B(a){if("object"==typeof a){a.agentName&&G.modify($.AGENT_NAME,a.agentName);a.agentId&&G.modify($.AGENT_ID,a.agentId);a.visitorName&&G.modify($.VISITOR_NAME,a.visitorName);a.rtSessionId&&G.modify($.CHAT_ID,a.rtSessionId);a.resetAgentInfo&&C();a.visitorId&&(R=a.visitorId)}}function C(){G.removeKey($.AGENT_NAME,!0);G.removeKey($.AGENT_ID)}function D(a){var b,c=H.get(_.WINDOW_MAXIMIZED),d=H.get(_.LAST_LINE_VIEWED),e={};M?b=M.getLastReadLine(a):c&&(b=E(a));if(b){e[da]=b[da];e[ca]=b[ca];b.convId&&(e.convId=b.convId)}ga.isEmpty(e)||ga.isSameObject(d,e)||H.modify(_.LAST_LINE_VIEWED,e)}function E(a){for(var b,c=a.length-1;c>=0;c--){b=a[c];if(!isNaN(b[ca]))break}return b}function F(a){return a===!0||a===!1&&"boolean"==typeof H.get(_.VISITOR_TYPING)}var G,H,I,J,K,L,M,N,O,P,Q,R,S,T="TranscriptManager",U="API",V=lpTag.unifiedWindow.consts,W={AGENT:"agent",VISITOR:"visitor"},X=lpTag.unifiedWindow.MessageState,Y=lpTag.unifiedWindow.events.chat,Z=lpTag.unifiedWindow.events.viewController,$=lpTag.unifiedWindow.chatModelPath,_=lpTag.unifiedWindow.uiModelPath,aa=lpTag.unifiedWindow.log,ba=lpTag.unifiedWindow.State,ca="localId",da="@id",ea=0,fa=0,ga=lpTag.unifiedWindow.applicationUtils,ha=[],ia=[],ja=null,ka={CONTENT_EVENT:"ContentEvent",RICHCONTENT_EVENT:"RichContentEvent",CONTENT_TYPE_TEXT:"text/plain",CONTENT_TYPE_RICHCONTENT:"richContent",WELCOME_MESSAGE_TYPE:"WelcomeMessage"};b(a);this.sendLine=d;this.sendStructeredContentLine=c;this.sendLineSkipLocal=e;this.setVisitorTyping=f;this.currentConversationActive=g;this.dispose=h};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.UIStateManager=function(a){function b(a){J.info("init",D);v=a.lpModel;w=a.lppModel;x=a.events;y=a.browserStateManager;C=a.NativeSDK;z=a.appContext;A=lpTag.unifiedWindow.events;N=M.getPropertyFromObject(z,"conf.engConf.async",!1);j()}function c(){w.clear();k();clearTimeout(B)}function d(a){var b=!C;if("boolean"==typeof a&&w.get(H.WINDOW_MAXIMIZED)!==a){J.info("setWindowState: Window maximized="+a,D);var c=z.conversationManager&&z.conversationManager.isAutoClosedMainDialog,d=c&&c(v.get(I.CHAT_ID));b&&w.modify(H.WINDOW_MAXIMIZED,a);if(w.get(H.STATE)===lpTag.unifiedWindow.State.WAITING&&N&&!d){x.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:A.application.DO_HARAKIRI});var e=z&&z.conf?z.conf:{};lpTag.lastClosedEngagementID=e.uiState&&e.uiState.engConf&&e.uiState.engConf.eid}x.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:a?F.uiState.MAXIMIZED:F.uiState.MINIMIZED,global:!0})}}function e(a,b){J.info("setWindowPosition: position="+JSON.stringify(a),D);w.modify(H.WINDOW_POSITION,a,null,b)}function f(a){g(H.ACTIONS_VISIBLE,a)}function g(a,b){a&&"boolean"==typeof b&&w.modify(a,b)}function h(a){J.info("setSoundState: enable="+a,D);"boolean"==typeof a&&w.modify(H.WINDOW_SOUND,a)}function i(a){w.modify({splitKey:H.WINDOW_EMBEDDED,updateData:a,onSuccess:r,context:this})}function j(){x.bind({appName:E.HEARTBEAT,eventName:F.heartBeat.FAILED,func:m});x.bind({appName:E.HEARTBEAT,eventName:F.heartBeat.RESUMED,func:n});x.bind({appName:E.UNIFIED_WINDOW,eventName:F.unifiedWindow.MAXIMIZE,func:l});x.bind({appName:E.UNIFIED_WINDOW,eventName:F.chat.SET_REFRESH_MODEL_DELAY,func:s});y.on(y.EVENT_NAME.FOCUS_CHANGE,o,this);y.on(y.EVENT_NAME.VISIBILITY_CHANGE,p,this);w.bind(H.WINDOW_EMBEDDED,q)}function k(){x.unbind({appName:E.HEARTBEAT,eventName:F.heartBeat.FAILED,func:m});x.unbind({appName:E.HEARTBEAT,eventName:F.heartBeat.RESUMED,func:n});x.unbind({appName:E.UNIFIED_WINDOW,eventName:F.unifiedWindow.MAXIMIZE,func:l});x.unbind({appName:E.UNIFIED_WINDOW,eventName:F.chat.SET_REFRESH_MODEL_DELAY,func:s});y.off(y.EVENT_NAME.FOCUS_CHANGE,o);y.off(y.EVENT_NAME.VISIBILITY_CHANGE,p);w.unbind(H.WINDOW_EMBEDDED,q)}function l(){d(G.MAXIMIZED)}function m(){w.modify(H.ACTION_POPOUT_ENABLE,!1)}function n(){w.modify(H.ACTION_POPOUT_ENABLE,!0)}function o(a){if(a.focus){J.info("_refreshModelOnFocusChange: model refreshed",D);w.load()}else{B&&clearTimeout(B);B=setTimeout(p,K)}}function p(){y.isHidden()||w.modify(H.LAST_VIEWED_TAB,lpTag.storageMethods.getSessionData("lpTabId"));if(!y.isFocus()&&!y.isHidden()){J.info("_refreshModelOnVisibility: "+(0===L?"model refreshed":"skip refresh"),D);0===L?w.load():L--;B&&clearTimeout(B);B=setTimeout(p,K)}}function q(a){x.trigger({appName:E.UISTATE,eventName:F.uiState.EMBEDDED_CHANGED,data:a&&a.newValue})}function r(a){x.trigger({appName:E.UISTATE,eventName:F.uiState.POP_OUT,data:{popOut:!a.window.embedded}})}function s(a){L=a.loadModelDelay||0}function t(a){O=a}function u(){return O}var v,w,x,y,z,A,B,C,D="UIStateManager",E=lpTag.unifiedWindow.apps,F=lpTag.unifiedWindow.events,G={MAXIMIZED:!0,MINIMIZED:!1},H=lpTag.unifiedWindow.uiModelPath,I=lpTag.unifiedWindow.chatModelPath,J=lpTag.unifiedWindow.log,K=1e3,L=0,M=lpTag.taglets.lpUtil,N=!1,O=!1;b(a);this.WINDOW_STATE=G;this.setWindowState=d;this.setEmbeddedState=i;this.setWindowPosition=e;this.setActionsVisibility=f;this.setVisibility=g;this.setSoundState=h;this.clear=c;this.setWindowClosedByVisitor=t;this.isWindowClosedByVisitor=u};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.IdnvManager=function(a){function b(a){w.info("init",v);if("object"==typeof a){t=a.appContext;u=a.lppModel}else w.error("init: missing mandatory dependencies.",v)}function c(a){return a.text&&a.text.indexOf&&(a.text.indexOf(C.attrs.questionType)>-1||a.text.indexOf(C.attrs.answerType)>-1)?!0:!1}function d(a){if("visitor"===a.source){a=h(a);a.source="system"}else a=g(a);return a}function e(a){var b=k(a);p(b);n(z.lineId,C.states.CANCELLED);z={}}function f(a){var b=j(a);p(b);n(z.lineId,C.states.SUBMITTED);z={}}function g(a){var b,c=a["@id"],d=o(c);d||(d=m(c));if(d===C.states.PENDING){b=r(a.text);if(b){z={lineId:c,encodedFields:b.encodedFields};s.call(this,lpTag.unifiedWindow.events.viewController.DIALOG,b)}}return a}function h(a){var b=a.text.indexOf(C.attrs.action)>-1?!0:!1,c=r(a.text);if(c.encodedFields===z.encodedFields){s.call(this,lpTag.unifiedWindow.events.viewController.DIALOG_STATE_CHANGED,{});z={}}b?a.text=i(c.fields):a.text=k(c.encodedFields);return a}function i(a){var b=t.translator.translate("idnvFormSubmitted",!0);return x.injectTextObj(b,{idnvChar1:a.firstChar,idnvChar2:a.secondChar,idnvType:a.typeField})}function j(a){var b=t.translator.translate("idnvAnswer",!0);b=x.injectTextObj(b,{idnvAnswer1:a.firstChar,idnvAnswer2:a.secondChar});return l(b,a.idnvData.encodedFields,!0)}function k(a){return l(t.translator.dictionary.getString("idnvFormCancelled"),a,!1)}function l(a,b,c){var d;c&&(d=C.attrs.action+'="mask"');return x.injectTextObj(B,{payload:b,mask:d,text:a})}function m(a){var b;b=z.lineId&&a!==z.lineId?C.states.SKIPPED:C.states.PENDING;n(a,b);return b}function n(a,b){u.modify(A.IDNV_DATA.path+"."+a+".state",b)}function o(a){return u.get(A.IDNV_DATA.path+"."+a+".state")}function p(a){var b={text:a},c={error:q()};t.transcriptManager.sendLineSkipLocal(b,c)}function q(){return function(){t.events.trigger({appName:"tooltip",eventName:"show",data:{text:t.translator.translate("idnvSendLineError"),tooltipTimeout:y}})}}function r(a){var b,c,d=a.match(/<span.*<\/span>/g);if(d&&d[0]){b=lpTag.lpUtils.getAttrValue(d[0],C.attrs.payload);if(b){c=JSON.parse(decodeURIComponent(b));return{encodedFields:b,fields:c}}}return null}function s(a,b){var c={context:this,data:{ControllerName:lpTag.unifiedWindow.IdnvDialogViewController.ControllerName,idnvData:b,dialogOpenedFrom:this}};t.events.trigger({appName:v,eventName:a,data:c})}var t,u,v="IdnvManager",w=lpTag.unifiedWindow.log,x=lpTag.unifiedWindow.applicationUtils,y=3e3,z={},A=lpTag.unifiedWindow.uiModelPath,B='<span data-lp-collab-type="idnv_answer" data-lp-collab-payload={{payload}} {{mask}}>{{text}}</span>',C={attrs:{type:"data-lp-collab-type",payload:"data-lp-collab-payload",action:"data-lp-action",questionType:"idnv_question",answerType:"idnv_answer"},states:{PENDING:"pending",CANCELLED:"cancelled",SUBMITTED:"submitted",SKIPPED:"skipped"}};b(a);this.isIdnvLineObj=c;this.processIdnvLineObj=d;this.sendIdnvCancelLine=e;this.sendIdnvSubmitLine=f};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow.WidgetManager=window.lpTag.unifiedWindow.WidgetManager||function(a){function b(a){V.info("init",U);J=a.lpModel;K=a.lppModel;L=a.wsdkModel;M=lpTag.LPWidgetSDK.API;N=a.events;O=a.windowSDKEvents;P=a.appContext;Q=lpTag.unifiedWindow.consts.widgetSDK;S=W.getPropertyFromObject(P,"conf.engConf.async");T=lpTag.unifiedWindow.State;d()}function c(){O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.INIT})}function d(){N.bind({appName:"*",eventName:Y.widgetSDK.INIT,context:this,func:c});Z.push(N.bind({appName:"*",eventName:Y.widgetSDK.VISITOR_TYPING,context:this,func:A}));Z.push(N.bind({appName:"*",eventName:Y.chat.LINE,context:this,func:C}));Z.push(N.bind({appName:"*",eventName:Y.chat.CHAT_INFO,context:this,func:n}));Z.push(N.bind({appName:"*",eventName:Y.chat.STATE,func:u}));Z.push(N.bind({appName:"slider",eventName:Y.viewController.SLIDER_VIEW_CHANGE,context:this,func:v}));Z.push(N.bind({appName:"slider",eventName:Y.viewController.SLIDER_CLOSED,context:this,func:w}));Z.push(N.bind({appName:"WrapperWindowExtender",eventName:Y.viewController.MINIMIZE_VISIBLE,context:this,func:function(){B(!1)}}));Z.push(N.bind({appName:"WrapperWindowExtender",eventName:Y.viewController.MAXIMIZE_VISIBLE,context:this,func:function(){B(!0)}}));O.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.NOTIFICATION,context:this,func:i});O.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.INITIATED_WIDGET_ID,context:this,func:e});J.bind(lpTag.unifiedWindow.chatModelPath.AGENT_IS_TYPING,z)}function e(a){var b=K.get(lpTag.unifiedWindow.uiModelPath.INITIATED_WIDGETS_IDS)||{};b[a]=!0;K.modify(lpTag.unifiedWindow.uiModelPath.INITIATED_WIDGETS_IDS,b);J.modify(lpTag.unifiedWindow.chatModelPath.SDK_BUTTON_ENABLE,!0)}function f(a){var b,c=K.get(lpTag.unifiedWindow.uiModelPath.DISPOSED_WIDGETS_IDS)||{},d=!1;c[a]=!1;K.modify(lpTag.unifiedWindow.uiModelPath.DISPOSED_WIDGETS_IDS,c);b=g();for(var e in b)if(b[e]===!0){d=!0;break}d||J.modify(lpTag.unifiedWindow.chatModelPath.SDK_BUTTON_ENABLE,!1)}function g(){var a=K.get(lpTag.unifiedWindow.uiModelPath.INITIATED_WIDGETS_IDS),b=K.get(lpTag.unifiedWindow.uiModelPath.DISPOSED_WIDGETS_IDS);if(b&&a)for(var c in b)a[c]=!1;return a||{}}function h(){var a=K.get(lpTag.unifiedWindow.uiModelPath.SELECTED_WIDGET_ID),b=K.get(lpTag.unifiedWindow.uiModelPath.WIDGET_SLIDER_VISIBLE);return a&&b?a:void 0}function i(a){"number"==typeof a&&a>=0&&J.modify(lpTag.unifiedWindow.chatModelPath.SDK_NOTIFICATIONS,a)}function j(){return K.get(lpTag.unifiedWindow.uiModelPath.WIDGETS_NOTIICATIONS)||{}}function k(){return K.get(lpTag.unifiedWindow.uiModelPath.WIDGET_SLIDER_VISIBLE)}function l(){return K.get(lpTag.unifiedWindow.uiModelPath.WINDOW_MAXIMIZED)}function m(a){K.removeKey(lpTag.unifiedWindow.uiModelPath.WIDGETS_NOTIICATIONS);K.modify(lpTag.unifiedWindow.uiModelPath.WIDGETS_NOTIICATIONS,a)}function n(a){if(a){a.rtSessionId&&!R&&(R=a.rtSessionId);if(R){o(a);p(a,t(R));(a.agentName&&a.agentId||a.visitorId&&a.visitorName)&&q(a)}}}function o(a){var b=L.get(X.CONVERSATION_ID),c=L.get(X.SESSION_ID);!b&&a.rtSessionId&&L.modify(X.CONVERSATION_ID,a.rtSessionId);!c&&a.monitoringSessionId&&L.modify(X.SESSION_ID,a.monitoringSessionId)}function p(a,b){var c=L.get(X.CONVERSATION_ID),d=L.get(X.SESSION_ID),e=!1;if(b&&a){if(a.state&&b.state!==H(a.state)){b.state=H(a.state);e=!0}if(!b.startTime&&a.lastUpdate){b.startTime=a.lastUpdate;e=!0}if(a.skill&&(!b.skill||b.skill.name!==a.skill&&b.skill.id!==a.skill)){S?b.skill={name:"",id:a.skill}:b.skill={name:a.skill,id:""};e=!0}if(a.typing){b.typing=a.typing;e=!0}if(e){L.modify(X.DIALOGS,[b],"id");O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.CONVERSATION_INFO,data:{conversationId:c,sessionId:d,dialogId:b.id,startTime:b.startTime,state:b.state,dialogType:b.dialogType,channelType:b.channelType,skill:b.skill,typing:b.typing}})}}}function q(a){a.agentName&&a.agentId&&r({id:a.agentId,name:a.agentName,type:Q.AGENT,imgPath:W.getPropertyFromObject(P,"conf.windowConf.agentUrl")||"",description:W.getPropertyFromObject(P,"conf.windowConf.description")||""});a.visitorId&&a.visitorName&&r({id:a.visitorId,name:a.visitorName,type:Q.VISITOR})}function r(a){for(var b,c=t(R),d=!1,e=0;e<c.participants.length;e++)if(c.participants[e].id===a.id){b=c.participants[e];break}if(b){if(!b.name){b.name=a.name;d=!0}if(a.type===Q.AGENT){if(!b.imgPath&&a.imgPath){b.imgPath=a.imgPath;d=!0}if(!b.description&&a.description){b.description=a.description;d=!0}}d&&s(c)}else{c.participants.push(a);s(c)}}function s(a){L.modify(X.DIALOGS,[a],"id");O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.PARTICIPANTS,data:a.participants})}function t(a){var b,c;if(a){b=L.get(X.DIALOGS);c={id:a,startTime:null,state:null,dialogType:null,channelType:S?Q.CHANNEL_TYPE_MESSAGING:Q.CHANNEL_TYPE_CHAT,messages:[],participants:[],typing:{agent:!1,visitor:!1}};if(b)for(var d=0;d<b.length;d++)b[d].id===a&&(c=b[d]);return c}}function u(a){var b,c;if(a!==lpTag.unifiedWindow.State.INIT&&a!==lpTag.unifiedWindow.State.INITIALIZED){b=H(a);c=t(R);c&&c.state!==b&&p({state:b},c);O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.CONVERSATION_STATE,data:b})}}function v(a){var b=a.type===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView;b?K.modify(lpTag.unifiedWindow.uiModelPath.SELECTED_WIDGET_ID,a.id):K.removeKey(lpTag.unifiedWindow.uiModelPath.SELECTED_WIDGET_ID);x(a,!0)}function w(a){x(a,!1)}function x(a,b){O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.WIDGET_AREA_STATE,data:{isOpened:b,type:a.type}})}function y(a){K.modify(lpTag.unifiedWindow.uiModelPath.WIDGET_SLIDER_VISIBLE,a)}function z(a){var b,c;if(a&&"boolean"==typeof a.newValue){b=t(R);c=b.typing;if(c.agent!==a.newValue){c.agent=a.newValue;p({typing:c},b)}}}function A(a){var b,c;if("boolean"==typeof a){b=t(R);c=b.typing;if(c.visitor!==a){c.visitor=a;p({typing:c},b)}}}function B(a){var b=L.get(X.WINDOW_UI),c=b&&b.isMaximized;("boolean"!=typeof c||"boolean"==typeof a&&a!==c)&&L.modify(X.WINDOW_UI,{isMaximized:a})}function C(a){var b,c=D(a,Y.chat.LINE);if(c){G(c);b=t(a.convId);if(b){b.messages.push(c);L.modify(X.DIALOGS,[b],"id")}O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.MESSAGES,data:c})}}function D(a,b){var c;if(a)switch(b){case Y.chat.LINE:if(a.type===Y.chat.SECURE_FORM)return null;c={};c.type=E(a.type);c.id=a["@id"]||a.id;c.ts=a.time;c.content=F(a.text);c.originator={type:a.source,name:a.by};c.state=a.state;break;case Y.chat.CHAT_INFO:}return c}function E(a){return a&&a===lpTag.unifiedWindow.consts.chatEvents.RICH_CONTENT?Q.contentType.richContent:Q.contentType.text}function F(a){var b="";if("string"==typeof a){_.lastIndex=null;b=a.replace(_,"<img alt='filteredImg'>")}return b}function G(a){var b=t(R);if(b&&(b.state===lpTag.WindowSDKAPI.states.ACCEPTED||b.state===lpTag.LPWidgetSDK.API.states.IN_QUEUE)){a.originator&&(a.originator.type===Q.VISITOR?$.visitor=!0:a.originator.type===Q.AGENT&&($.agent=!0));$.agent&&$.visitor&&p({state:lpTag.LPWidgetSDK.API.states.INTERACTIVE},b)}}function H(a){var b=lpTag.unifiedWindow.State,c=lpTag.LPWidgetSDK.API.states;switch(a){case b.PRE_CHAT:return c.PRE_CONVERSATION;case b.WAITING:case b.REQUESTED:return c.PENDING;case b.CHATTING:return S?c.IN_QUEUE:c.ACCEPTED;case b.POST_CHAT:return c.POST_CONVERSATION;case b.ENDED:return c.CONVERSATION_ENDED;case b.OFFLINE:return c.OFFLINE;case b.ERROR:case b.NOT_FOUND:return c.ERROR;default:return a}}function I(){V.info("dispose",U);Z.forEach(function(a){N.unbind(a)});O.unbind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.NOTIFICATION,context:this,func:i})}var J,K,L,M,N,O,P,Q,R,S,T,U="WidgetManager",V=lpTag.unifiedWindow.log,W=lpTag.taglets.lpUtil,X=lpTag.unifiedWindow.widgetModelPath,Y=lpTag.unifiedWindow.events,Z=[],$={agent:!1,visitor:!1},_=/(<img.*?>)/g;b(a);this.dispose=I;this.getWidgetsStatus=g;this.getLastShownWidgetId=h;this.getWidgetsNotifications=j;this.getLastSliderState=k;this.isWindowMaximized=l;this.setWIdgetsNotifications=m;this.handleWidgetDisposal=f;this.onWidgetStateChanged=y};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow.AuthenticationManager=window.lpTag.unifiedWindow.AuthenticationManager||function(a){function b(a){k=a.appContext}function c(a,b){m.info("authenticate",l);var c,h=k.conf.unifiedConf.authToken||k.conf.unifiedConf.poppedOut,i=k.conf.engConf.async&&k.conf.authConf&&k.conf.authConf.ssoKey,j=k.conf.authConf&&(k.conf.authConf.stepUpConnector||k.conf.authConf.connector),p=j&&j.configuration&&j.configuration.pkceEnabled;if(n){var q=f(),r=k.conf.uiState&&k.conf.uiState.chat&&"restartAuthentication"===k.conf.uiState.chat.state,s=decodeURIComponent(window.location.href);if(p&&(h||i)&&r&&k.conf.unifiedConf.external&&!s.match('"pkce_reauthentication":1')){c=k.pkceManager.getExternalWindowURLForPKCE(k);window.location.href=c;return}if(h)o.runCallback(a,null,{ssoKey:k.conf.unifiedConf.authToken,redirect_uri:q});else if(i)o.runCallback(a,null,{ssoKey:k.conf.authConf.ssoKey,redirect_uri:q});else{if(k.conf.unifiedConf.pkceRedirectUrl){k.pkceManager.generatePKCE(function(a){if(a){localStorage.setItem("cv",a.code_verifier);window.location.href=k.conf.unifiedConf.pkceRedirectUrl+"&code_challenge="+a.code_challenge+"&code_challenge_method=S256"}});return}if(!e(j)&&k.conf.unifiedConf.connectors&&k.conf.unifiedConf.connectors.length){var t=d();t&&(j=t)}p?k.pkceManager.runPKCE(j,function(){n.getSSOKey(j,g(a),b)}):n.getSSOKey(j,g(a),b)}}else{m.error("Not authenticator",l);o.runCallback(b)}}function d(){var a,b=window.lpTag.identities&&lpTag.identities.safeIdentities||[],c=k.conf.unifiedConf.connectors,d=b.filter(function(a){var b=a.acr,c=parseInt(b,10);return 1!==b.length||0!==c});d.length&&c.forEach(function(b){d.forEach(function(c){b.configuration.issuer===c.iss&&(a=b)})});return a}function e(a){var b=a&&a.configuration,c="lpTag.taglets.unAuthMessaging.lpUnauthFunction",d="lpTag.taglets.unAuthMessaging";return b?b.jsContext===d&&b.jsMethodName===c:!0}function f(){var a=null,b=k.conf.authConf&&(k.conf.authConf.stepUpConnector||k.conf.authConf.connector),c=k.conf.unifiedConf.useOAuth2Standard||b&&b.configuration&&b.configuration.rfcCompliance;a=k.conf.authConf&&k.conf.authConf.redirect_uri?k.conf.authConf.redirect_uri:c&&k.conf.unifiedConf.external?lpTag.lpUtils.getCurrentUrlWithoutParams():lpTag.unifiedWindow.consts.defaultRedirectUri;return a}function g(a){return function(b){b&&(b.redirect_uri=b.redirect_uri||f());a(b)}}function h(a,b){m.info("reAuthenticate",l);if(n){var c=k.conf.authConf&&(k.conf.authConf.stepUpConnector||k.conf.authConf.connector);c&&c.configuration&&c.configuration.pkceEnabled?k.pkceManager.runPKCE(c,function(){n.getSSOKey(c,g(a),b)}):n.getSSOKey(c,g(a),b)}}function i(){if(n)return n.isErroneous();m.error("Not authenticator",l);return void 0}function j(){m.info("dispose",l)}var k,l="AuthenticationManager",m=lpTag.unifiedWindow.log,n=lpTag.taglets.authenticator,o=lpTag.taglets.lpUtil;b(a);this.authenticate=c;this.reAuthenticate=h;this.isErroneous=i;this.dispose=j};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow.StepUpManager=window.lpTag.unifiedWindow.StepUpManager||function(a){function b(a){K=a.configs;L=K.uiState.chat&&K.uiState.chat.stepUpState;J=a.appContext;M=J.events;da.isStepupEnabled=K.unified.isStepUpEnabled||!1;da.forceStepUp=K.unified.forceStepUpIfNoState&&!J.isNewConversation||!1;da.accountId=lpTag&&lpTag.site;da.secureStorageDomain=lpTag&&lpTag.csds&&lpTag.csds.getDomain(ca.csds.leCdnDomain);da.idpDomain=lpTag&&lpTag.csds&&lpTag.csds.getDomain(ca.csds.idp);da.secureStorageLocation=A(da.secureStorageDomain);Y=K.unified&&K.unified.isFetchEnabled;x()}function c(a){O=a.lppModel;N=a.apiDelegate}function d(a){var b=null;"OPEN"===a.state&&a.convId&&(b=a.convId);V.setValue({app:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,key:ca.storage.stepUpStorage.valueKeys.lastActiveConvo,appName:ca.storage.stepUpStorage.appName,site:da.accountId,value:b,domain:da.secureStorageLocation,success:function(a){R.debug("stored last unauth convo data",W)},error:function(a){R.debug("failed to store last unauth convo data",W)},firstParty:!0});if("CLOSE"===a.state){L=_.stepUpEnded;O.modify(lpTag.unifiedWindow.uiModelPath.STEP_UP_STATE,L)}}function e(a){V.getValue({app:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,key:ca.storage.stepUpStorage.valueKeys.lastActiveConvo,appName:ca.storage.stepUpStorage.appName,site:da.accountId,domain:da.secureStorageLocation,success:a,error:function(){R.debug("failed to get last unauth convo data",W)},firstParty:!0})}function f(){var a,b="https://"+K.unified.acCdnDomain+"/api/account/"+K.unified.accountId+"/configuration/le-connectors/all-connectors",c=K.unified&&K.unified.connectors,d=lpTag.identities&&lpTag.identities.safeIdentities||[],e=d.filter(function(a){return"LivePerson"!==a.iss}),f=Y?lpTag.taglets.fetch:lpTag.taglets.jsonp;X.authConnector=null;X.unauthConnector=null;if(c&&c.length){c.forEach(function(b){if(C(b))X.unauthConnector=b;else{a=b;e.length&&e.forEach(function(a){b.configuration.issuer===a.iss&&(X.authConnector=b)})}});X.authConnector||a&&(X.authConnector=a);m()}else f.issueCall({url:b,timeout:5e3,retries:0,credentials:Y?"omit":void 0,success:function(a){var b=Y?a&&a.body:a;b.forEach(function(a){X[C(a)?"unauthConnector":"authConnector"]=a});m()},error:function(){R.info("_getConfiguration - ERROR FROM SERVER",W)}})}function g(){R.info("dispose",W);y()}function h(a,b){var c=da.authenticationLocation,d={lp_jwt:a};b.redirect_uri&&(d.redirect_uri=b.redirect_uri);X.authConnector.type===lpTag.unifiedWindow.consts.authConnectorTypes.OAUTH_IMPLICIT?d.id_token=b.ssoKey:d.code=b.ssoKey;b.code_verifier&&(d.code_verifier=b.code_verifier);var e={url:c,method:"POST",success:function(a){var c=a.body.token,d=z(c,[$.onBehalf,$.sub]);aa.unAuthConsuemrId=d[$.onBehalf];aa.authConsumerId=d[$.sub];P=c;var e=J&&J.conf;e&&e.authConf&&(e.authConf.stepUpConnector=X.authConnector);e&&e.engConf&&(e.engConf.stepUpConnector=X.authConnector);b.ssoKey&&b.redirect_uri&&window.lpTag.taglets.lpSecureStorage.setValue({app:"monitoringSDK",appName:"lp_monitoringSDK",site:lpTag&&lpTag.site,domain:da.secureStorageLocation,success:function(){},error:function(a){R.error("Error when setting data for SMT - "+a,W)},firstParty:!0,key:"lpsmtAuth",value:{tkn:c,code:b.ssoKey}});Z.success(P)},error:function(a){R.error("failed to get onbehalf jwt from IDP",W);Z.fallback()},data:d};T.issueCall(e)}function i(a){return function(b){var c={},d=X.authConnector&&X.authConnector&&X.authConnector.configuration.pkceEnabled;if("object"==typeof b){c.ssoKey=b.ssoKey;c.redirect_uri=b.redirect_uri}else c.ssoKey=b;d?J.pkceManager.getPKCEFromSecureStorage(function(b){b&&b.code_verifier&&(c.code_verifier=b.code_verifier);J.pkceManager.removePKCEFromSecureStorage();h(a,c)},function(b){R.error("Error when getting PKCE data from storage  - "+b,W);h(a,c)}):c.redirect_uri?I(function(b){var d;if(b&&b.tkn){d=z(b.tkn,[$.exp]);d&&d.exp&&Date.now()<1e3*d.exp&&Z.success(b.tkn)}else h(a,c)},function(b){R.error("Error when getting lpsmtAuth from storage  - "+b,W);h(a,c)}):h(a,c)}}function j(a){var b=a.body.token,c=X.authConnector&&X.authConnector.configuration.pkceEnabled;J&&J.pkceManager&&c?J.pkceManager.runPKCE(X.authConnector,function(){S.getSSOKey(X.authConnector,i(b),k)}):S.getSSOKey(X.authConnector,i(b),k)}function k(a){R.error("Step up failed to auth with auth connector",W);Z.fallback()}function l(a){var b={url:da.unauthJwtLocation,method:"POST",data:{id_token:a},error:function(a){Z.fallback()},success:j};T.issueCall(b)}function m(){da.authenticationLocation=B(da.idpDomain,{accountId:da.accountId,connectorId:X.authConnector.id});da.unauthJwtLocation=B(da.idpDomain,{accountId:da.accountId,connectorId:X.unauthConnector.id});n()}function n(){var a=ca.storage.unauthStorage.key,b=ca.storage.unauthStorage.name;window.lpTag.taglets.lpSecureStorage.getValue({key:a,site:da.accountId,app:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,success:function(a){var b,c=lpTag.taglets.lpSecureStorage;"function"==typeof c.isFirstPartyStorageFeatureEnabled&&(b=c.isFirstPartyStorageFeatureEnabled());a&&b?o(a):l(a)},error:function(a){R.error("_getUnauthTokenFromSecureStorage: Storage returned error - "+a,b)},appName:b,domain:da.secureStorageLocation,firstParty:!0})}function o(a){var b=ca.storage.unauthStorage.key,c=ca.storage.unauthStorage.name;window.lpTag.taglets.lpSecureStorage.getValue({key:b,site:da.accountId,app:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,success:function(b){var c=E(a),d=E(b);l(d>c?b:a)},error:function(b){R.error("_getUnauthTokenFromThirdPartySecureStorage: Storage returned error - "+b,c);l(a)},appName:c,domain:da.secureStorageLocation,firstParty:!1})}function p(){return L}function q(){function a(a){var b={};b.conversationId=a;b.authUserId=aa.authConsumerId;b.unAuthUserId=aa.unAuthConsuemrId;N.updateStepUpParticipants(b)}e(a)}function r(){if(L===_.outOfAuthArea||L===_.failedStepUp||L===_.alreadySteppedUp)return L;var a=K.uiState.engConf,b=da.isStepupEnabled,c=C(a.connector),d=lpTag&&lpTag.taglets&&lpTag.taglets.lp_sms_client_api?3:2,e=K.uiState.chat?"chatting"===K.uiState.chat.state:!!da.forceStepUp||lpTag.stepUpShouldStart,f=b&&c&&a.identityData&&"0"!==a.identityData.acr,g=b&&c&&e&&L!==_.stepUpEnded;lpTag.stepUpShouldStart&&delete lpTag.stepUpShouldStart;return f?_.alreadySteppedUp:g?L===_.stepUp?_.stepUp:lpTag.identities&&lpTag.identities.length===d?_.stepUp:a.identityData&&"0"!==a.identityData.acr?_.alreadySteppedUp:_.noStepUp:_.noStepUp}function s(){var a=L===_.stepUp||L===_.alreadySteppedUp,b=lpTag&&lpTag.taglets&&lpTag.taglets.lp_sms_client_api?2:1;if(a&&lpTag.identities.length===b){L=_.outOfAuthArea;Z.error()}}function t(){s();L=r();R.info("Stepup state:"+L,W);var a=L===_.stepUp||L===_.alreadySteppedUp||L===_.outOfAuthArea;return a}function u(){da.isStepupEnabled&&L===_.stepUp&&q();
}function v(){R.error("Failed to stepUp user",W);L=_.failedStepUp;O.modify(lpTag.unifiedWindow.uiModelPath.STEP_UP_STATE,L);Z.error()}function w(a){if(200===a.code){R.info("Successfully to stepUp user",W);L=_.alreadySteppedUp;O.modify(lpTag.unifiedWindow.uiModelPath.STEP_UP_STATE,L)}else if(400===a.code){if(L!==_.alreadySteppedUp){R.error("Stepup failed to stepUp user with code 400",W);L=_.failedStepUp;O.modify(lpTag.unifiedWindow.uiModelPath.STEP_UP_STATE,L);M.trigger({appName:"*",eventName:"authenticationError",data:{error:"expired"}})}}else{R.error("Step up failed to stepUp user",W);v()}}function x(){M.bind({appName:"API",eventName:U.CONVERSATION_STATE,func:d});M.bind({appName:"AMSClient",eventName:"onConversationStepUp",func:w})}function y(){M.unbind({appName:"API",eventName:U.CONVERSATION_STATE});M.unbind({appName:"AMSClient",eventName:"onConversationStepUp",func:w})}function z(a,b){var c={};if(a){var d=a.split(".");if(d.length>=2){var e={};try{e=JSON.parse(window.atob(d[1]));b.forEach(function(a){c[a]=e[a]})}catch(f){R("error parsing jwt","ERROR","getSubFromJWT")}}return c}}function A(a){var b=window.lpTag.taglets.lpSecureStorage.v;return"https://"+a+"/le_secure_storage/"+(b?b:"")}function B(a,b){return"https://"+a+"/api/account/"+b.accountId+"/app/"+b.connectorId+"/authenticate?v="+ba.idpVersion}function C(a){var b=a&&a.configuration,c="lpTag.taglets.unAuthMessaging.lpUnauthFunction",d="lpTag.taglets.unAuthMessaging";return b.jsContext===d&&b.jsMethodName===c}function D(){M.trigger({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.ERROR,data:{errorType:lpTag.unifiedWindow.consts.errorTypes.AUTH_ERROR,keepError:!0}})}function E(a){var b=F(a);return b&&b.exp?b.exp:0}function F(a){if(a){var b=a.split(".");if(b.length>=2)try{return JSON.parse(window.atob(b[1]))}catch(c){R.error("_getPayloadFromJWT: error parsing jwt - "+c,W)}}return{}}function G(a,b){Z.success=function(b){R.debug("successful stepup auth",W);a(b)};Z.fallback=function(){R.error("failed to stepup, falling back",W);b()};if(da.isStepupEnabled&&L===_.outOfAuthArea)R.debug("User is out of auth area with auth convo",W);else if(da.isStepupEnabled&&L!==_.failedStepUp){R.debug("begin stepup auth",W);f()}else Z.fallback()}function H(){return L===_.failedStepUp}function I(a,b){window.lpTag.taglets.lpSecureStorage.getValue({app:"monitoringSDK",appName:"lp_monitoringSDK",key:"lpsmtAuth",site:lpTag&&lpTag.site,domain:da.secureStorageLocation,success:a,error:b,firstParty:!0})}var J,K,L,M,N,O,P,Q=lpTag.unifiedWindow,R=Q.log,S=lpTag.taglets.authenticator,T=lpTag.taglets&&lpTag.taglets.postmessage,U=lpTag.unifiedWindow.events.chat,V=window.lpTag.taglets.lpSecureStorage,W="StepUpManager",X={},Y=!1,Z={success:null,fallback:null,error:function(){R.error("failed to stepup, auth error",W);setTimeout(D,0)}},$={onBehalf:"onBehalf",sub:"sub",exp:"exp"},_={outOfAuthArea:-1,noStepUp:0,stepUp:1,alreadySteppedUp:2,stepUpEnded:3,failedStepUp:4},aa={},ba={idpVersion:"3.0"},ca={csds:{idp:"idp",leCdnDomain:"leCdnDomain"},storage:{unauthStorage:{key:"-unAuthJWT",name:"unAuthMessaging"},stepUpStorage:{appName:"StepUP",valueKeys:{lastActiveConvo:"lastActiveConvo",jwt:"-stepUpJWT",lastStepUpState:"lastStepUpState"}}}},da={};this.dispose=g;this.shouldStepUp=t;this.stepUpAuthentication=G;this.configure=c;this.getStepUpState=p;this.sendStepUp=u;this.stepUpState=_;this.getStepUpFailedStatus=H;b(a)};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.FileSharingManager=function(a){function b(a){if("object"==typeof a){F=a.appContext;G=a.apiManager;H=a.utils;E=a.log;I=a.imageParsingHelper;d();F&&F.conf&&F.conf.unifiedConf.areExtendedFileFormatsEnabled&&(P=P.concat(["TXT","CSV"]));E.info("init",J)}}function c(){F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,func:e});F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DOWNLOAD_REQUEST,func:B});F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.OVERLAY_CLOSED,func:D});F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_CLOSED,func:g});F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_UPLOAD_RETRY,func:z})}function d(){F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,func:e});F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DOWNLOAD_REQUEST,func:B});F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.OVERLAY_CLOSED,func:D});F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_CLOSED,func:g});F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_UPLOAD_RETRY,func:z})}function e(a){if(a&&!R){var b=i(a&&a.image);if(k(b))switch(b){case"JPG":case"JPEG":case"PNG":case"GIF":I.fixOrientation(a.image,f.bind(this));break;case"PDF":case"DOCX":case"XLSX":case"PPTX":m(j(a))&&f.call(this,a.image,b);break;default:m(j(a))&&f.call(this,a.image,"GENERIC")}}}function f(a,b){R||new lpTag.unifiedWindow.PhotoPreviewViewController({appContext:F,utils:H,image:a,type:b})}function g(a){R=!1;if(a&&a.image){var b=a.image,c=j(a);if(m(c,a)){c.error=c.success=p.bind(this,b,c);G.imageShareGenerateUrlRequest(c)}}}function h(a){if(!a)return!1;var b=a;b.indexOf("/")>-1&&(b=b.split("/")[1]);return b.toUpperCase()}function i(a){var b=a&&a.type;b=h(b);if((!b||b.length>4)&&a&&a.name){var c=a.name.split(".");b=h(c[c.length-1])}return b}function j(a){var b=a&&a.image,c=a&&a.caption||"",d=b&&b.size,e=i(b),f={fileSize:d.toString(),fileType:e,caption:c};return f}function k(a){if(-1===P.indexOf(a)){n(lpTag.unifiedWindow.consts.fileSharing.fileAttributes.TYPE);return!1}return!0}function l(a){return L[a]?L[a]:L.DEFAULT}function m(a){var b=!0,c=a.fileSize/1024/1024,d=l(a.fileType);if(k(a.fileType)){if(c>d){b=!1;n(lpTag.unifiedWindow.consts.fileSharing.fileAttributes.SIZE,d)}}else b=!1;return b}function n(a,b){F.events.trigger({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_VALIDATION,data:{validation:a,extraData:b}})}function o(a){var b=a;"string"==typeof a&&(b={error:a});a.timeout&&(b={error:a.timeout});return b}function p(a,b,c){var d=o(c),e=q.bind(this,a,b,d);u(a,e,b.fileType)}function q(a,b,c,d){var e=this,f={fileData:{preview:d,caption:b.caption,fileType:b.fileType,relativePath:c.relativePath},contentType:lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING,type:lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING};c.error?F.transcriptManager.sendLine(f):F.transcriptManager.sendLine(f,function(d){if(d&&d.hasOwnProperty("lineIndex")&&!Q[d.lineIndex]){Q[d.lineIndex]={send:d.callback,error:d.error,lineRetry:d.retry,state:"pending",details:b};A(d.lineIndex,!1,!0);r.call(e,a,d.lineIndex,c)}})}function r(a,b,c,d){if(Q[b]){Q[b].lineRetry&&Q[b].lineRetry(c);var e=Q[b].details,f=t(c);if(a&&e&&f){Q[b].retry||(Q[b].retry=x.bind(this,a,b));var g=new FileReader;g.onload=function(){var c=this.result,e=new Int8Array(c);s(a,e,f,w.bind(this,b,d||0))};g.readAsArrayBuffer(a)}}}function s(a,b,c,d){if(b){var e=new XMLHttpRequest;e.open("PUT",c);e.onreadystatechange=function(){4===e.readyState&&d(201===e.status,e.status<400||e.status>=500)};e.send(b)}}function t(a){var b=a.relativePath,c=a.queryParams&&a.queryParams.temp_url_sig,d=a.queryParams&&a.queryParams.temp_url_expires;if(b&&c&&d){var e=v()+b;e+="?temp_url_sig="+c;e+="&temp_url_expires="+d;return e}}function u(a,b,c){I.createThumbnail(a,b,c)}function v(){return"https://"+lpTag.csds.getDomain("swift")}function w(a,b,c,d){if(Q[a]&&c&&Q[a].send)Q[a].send();else if(!c){b=b||0;if(d&&M>b){b++;setTimeout(function(){Q[a]&&Q[a].retry?Q[a].retry(b):A(a,!c,!1,d)},N);return}Q[a]&&Q[a].error&&Q[a].error({canRetry:d})}A(a,!c,!1,d)}function x(a,b,c){Q[b].lineRetry&&Q[b].lineRetry();var d=Q[b].details;c=c||0;d.error=d.success=y.bind(this,a,b,c);G.imageShareGenerateUrlRequest(d)}function y(a,b,c,d){var e=o(d);r.call(this,a,b,e,c)}function z(a){a&&a.localId&&Q&&Q[a.localId]&&Q[a.localId].retry&&Q[a.localId].retry(0)}function A(a,b,c,d){F.events.trigger({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DONE_UPLOADED+":"+a,data:{showLoader:c,error:b,canRetry:d}})}function B(a){if(!S||H.getPropertyFromObject(a,"download")){S=!0;var b=H.getPropertyFromObject(a,"fileData.relativePath"),c=H.getPropertyFromObject(a,"convId");if(b){var d={relativePath:b,conversationId:c};d.error=d.success=C.bind(this,a);G.imageShareDownloadUrlRequest(d)}}}function C(a,b){var c=H.getPropertyFromObject(b,"body.urlForDownload");!c&&b.relativePath&&(c=t(b));var d=H.getPropertyFromObject(a,"download");if(d)c&&window.open(c,"_blank");else{var e=i({name:H.getPropertyFromObject(a,"fileData.relativePath")}),f=e;if(e)switch(e){case"PNG":case"JPG":case"JPEG":case"GIF":f=null;break;case"PDF":case"DOCX":case"XLSX":case"PPTX":c=F.conf.unifiedConf.imagesRepository+"/"+e.toLowerCase()+".png";break;default:c=F.conf.unifiedConf.imagesRepository+"/generic.png"}c?new lpTag.unifiedWindow.PhotoOverlayViewController({appContext:F,utils:H,imageURL:c,type:f,line:a,timestamp:a.time,caption:a.fileData&&a.fileData.caption||""}):S=!1}}function D(){S=!1}var E,F,G,H,I,J="FileSharingManager",K=lpTag.unifiedWindow.apps.FILE_SHARE,L={DEFAULT:5,PDF:15},M=2,N=1e3,O=["PNG","JPG","GIF","JPEG"],P=O.concat(["PDF","DOCX","PPTX","XLSX"]),Q={},R=!1,S=!1;b(a);this.ALLOWED_IMAGES=O;this.dispose=c};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.BrowserNotificationsManager=function(a,b){function c(a){if(W)switch(window.Notification.permission){case X.DENIED:H.load(q.bind(this,z.bind(this,x,a)));break;case X.GRANTED:H.load(q.bind(this,x.bind(this,a)));break;default:H.load(q.bind(this,z.bind(this,x,a)))}}function d(){return W&&F.nativeEnabled}function e(){return W&&window.Notification.permission===X.GRANTED}function f(){return W&&window.Notification.permission===X.DENIED}function g(a,b){H=b.uiModel;G=b.chatModel;F=h(a);W=i();Y=b.browserStateManager;U.info("Browser Notifications Supported: "+W,T);I=b.secureStorageLocation;J=b.appContext.translator;K=b.appContext.deviceDetector;L=b.events;M=b.appContext.fileSharingManager;N=b.appContext.conf.engConf.lang;P=b.appContext.conf.unifiedConf.jsRepository;S=b.appContext.conf.unifiedConf.external;O=K.isAndroidChrome();Q=K.isMacOS();R=K.isMobile();E();if(O)j(function(){l();o()});else{l();o()}}function h(a){return{nativeEnabled:"true"===a.nativeNotification,tabEnabled:"true"===a.tabNotification}}function i(){return!!window.Notification}function j(a){O?navigator.serviceWorker.getRegistration(window.location.origin+"/bn-sw.js").then(function(b){if(b){ia=b;U.info("Service worker obtained",T);a()}else k(a)}):a()}function k(a){navigator.serviceWorker.register(window.location.origin+"/bn-origin-sw.js").then(function(b){U.info("Service worker registration succeeded",T);navigator.serviceWorker.getRegistration(window.location.origin+"/bn-sw.js").then(function(b){if(b){ia=b;U.info("Service worker obtained",T);a()}})},function(b){U.error("Service worker registration failed: "+b,T);a()})}function l(){if(F.tabEnabled){G.bind($.LINES,s);H.bind(Z.LAST_LINE_VIEWED,s);Y.on(Y.EVENT_NAME.VISIBILITY_CHANGE,s)}F.nativeEnabled&&r()&&G.bind($.LINES,t)}function m(){if(F.tabEnabled){G.unbind($.LINES,s);H.unbind(Z.LAST_LINE_VIEWED,s);Y.off(Y.EVENT_NAME.VISIBILITY_CHANGE,s);if(ba){window.document.title=window.document.title.replace(/^\(\d*\)/,"");ba=!1}}F.nativeEnabled&&r()&&G.unbind($.LINES,t);clearTimeout(ga)}function n(){ga=setTimeout(q.bind(this,n),ha)}function o(){ga=setTimeout(q.bind(this,n),0)}function p(a,b,c){for(var d=Object.keys(a)||[],e=(new Date).getTime(),f=0;f<d.length;f++){var g=a[d[f]];if(e-g.ts>fa){var h=V.clone(Z.TAB_LIST);h.path=h.path+"."+d[f];H.removeKey(h);d[f]==b&&H.modify(Z.LAST_VIEWED_TAB,"")}}c()}function q(a){H.load(function(){var b=H.get(Z.TAB_LIST)||{},c=H.get(Z.LAST_VIEWED_TAB)||"",d={active:!0,ts:(new Date).getTime()};b[ca]=d;H.modify(Z.TAB_LIST,b);p(b,c,a)})}function r(){return da.getStorageType(I).lpUnifiedWindow!==da.storageTypes.SESSIONSTORAGE}function s(){var a=w.call(this),b="undefined"==typeof _||_!==a,c=Y&&Y.isHidden();if(b)if(c&&a>0){_=a;if(ba)window.document.title=window.document.title.replace(/^\(\d*\)/,"("+_+")");else{ba=!0;window.document.title="("+_+") "+window.document.title}}else if(0>=a){_=0;ba=!1;window.document.title=window.document.title.replace(/^\(\d*\)/,"")}}function t(a){var b=a.newValue,d=H.get(Z.LAST_LINE_VIEWED),e=Y&&Y.isHidden();if(d)for(var f=0;f<b.length;f++)if((v(b[f],d)||u(b[f],d))&&e)if(_>1){b[f].type=ea.LINE;b[f].text=_+" "+J.translate("browserNotifications_newMessages");c(b[f])}else c(b[f])}function u(a,b){if(a.convId===b.convId||"agent"!==a.source||a.update)return!1;0===a["@id"]&&H.modify(Z.LAST_LINE_VIEWED,{"@id":a["@id"],localId:a.localId,convId:a.convId});return!0}function v(a,b){return a["@id"]>b["@id"]&&a.convId===b.convId&&"agent"===a.source&&!a.update}function w(){var a=0,b=G.get($.LINES)||[],c=H.get(Z.LAST_LINE_VIEWED);if(c)for(var d=b.length-1;d>=0;d--){if(b[d]["@id"]===c["@id"]&&b[d].convId===c.convId)return a;isNaN(b[d]["@id"])||"agent"!==b[d].source||b[d].history||a++}return 0}function x(a){var b=H.get(Z.LAST_VIEWED_TAB),c=H.get(Z.TAB_LIST)||{},d=Object.keys(c)||[],e=d.length>0?d[d.length-1]:"",f=A(a);(b&&b===ca||e===ca)&&y(f.title,f.options)}function y(a,b){if(!Q){b.tag=T;R||(b.renotify=!0)}aa||delete b.icon;if(O){b.data={url:document.location.href};ia.showNotification(a,b)}else{var c=new window.Notification(a,b);c.onclick=function(){window.focus();K.isEdge()||c.close()}}}function z(a,b){window.Notification.requestPermission().then(function(c){c===X.GRANTED&&a(b)})}function A(a){var b=B(a);return{title:J.translate("browserNotifications_newMessageTitle"),options:{body:b,icon:aa}}}function B(a){var b=a.by||J.translate("agent");J.extendDictionary({agentName:b},{locale:N});switch(a.type){case ea.LINE:var c=document.createElement("div");c.innerHTML=a.text;return c.textContent||c.innerText||"";case ea.SECURE_FORM:return J.translate("secureForm_link_title_send");case ea.RICH_CONTENT:return J.translate("browserNotifications_richContent");case ea.COBROWSE:return J.translate("cobrowseInvitation");case ea.FILE_SHARING:return"IMAGE"===C(a.fileData)?J.translate("browserNotifications_image"):J.translate("browserNotifications_file");default:return""}}function C(a){var b=a&&a.fileType||"";return-1!==M.ALLOWED_IMAGES.indexOf(b.toUpperCase())?"IMAGE":void 0}function D(){for(var a,b="",c=document.getElementsByTagName("link"),d=0;d<c.length;d++){a=c[d].getAttribute("rel");("icon"===a||"shortcut icon"===a)&&(b=c[d].getAttribute("href"))}b&&(aa=b)}function E(){if(!S){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status?aa="/favicon.ico":4===a.readyState&&D()};a.open("GET","/favicon.ico");a.send(null)}}var F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T="BrowserNotificationsManager",U=lpTag.unifiedWindow.log,V=lpTag.taglets.lpUtil,W=!1,X={GRANTED:"granted",DENIED:"denied"},Y=null,Z=lpTag.unifiedWindow.uiModelPath,$=lpTag.unifiedWindow.chatModelPath,_=0,aa="",ba=!1,ca=lpTag.storageMethods.getSessionData("lpTabId"),da=lpTag.taglets.lpSecureStorage,ea=lpTag.unifiedWindow.consts.chatEvents,fa=5e3,ga=null,ha=5e3,ia=null;g(a,b);this.isSupported=W;this.nativeEnabled=d;this.permissionGranted=e;this.permissionDenied=f;this.requestPermission=z;this.dispose=m};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.FeatureStateManager=lpTag.unifiedWindow.FeatureStateManager||function(a,b){function c(a){var b=X[a]||{};b.classes=b.classes?b.classes:[];return b}function d(){return J}function e(){return G[Q.EMOJI_ENABLED]&&H.isDesktop()}function f(){return d.call(this)&&Z}function g(){return"true"===M.getPropertyFromObject(G,Q.TIMESTAMP_GROUPING,"false")}function h(){return!!M.getPropertyFromObject(G,Q.TIMESTAMP_LOCATION,T.DEFAULT)}function i(){var a=M.getPropertyFromObject(G,Q.AGENT_AVATAR,!1);return a===!0||"true"===a}function j(){return{agent:k(W.AGENT_BUBBLE,"default"),visitor:k(W.VISITOR_BUBBLE,"default")}}function k(b,c){return M.getPropertyFromObject(a,"customStyle.config."+b,c)}function l(){return G[Q.CLOSE_WINDOW_BEHAVIOUR_TYPE]}function m(){return G[Q.CLOSE_WINDOW_BY_AGENT_BEHAVIOUR_TYPE]}function n(){return M.getPropertyFromObject(G,Q.TIMESTAMP_LOCATION,T.DEFAULT)===T.TOP}function o(){return"true"===M.getPropertyFromObject(G,Q.BUBBLE_GROUPING,"false")}function p(){return"true"===M.getPropertyFromObject(G,Q.ENGAGEMENT_WINDOW_BORDER,"true")}function q(){return G[Q.ENGAGEMENT_WINDOW_BOX_SHADOW]}function r(){return"true"===M.getPropertyFromObject(G,Q.AGENT_AVATAR_PADDING,"false")}function s(){var a=G[Q.HISTORY_LAZYLOAD],b=v(O.HISTORY_LAZYLOAD,"true");switch(a){case"default":case"enabled":return!0;case"disabled":return!1;default:return b}}function t(){return v(O.UMS_CONNECTION_TIMEOUT,"true")}function u(){return v(O.BLUR_THUMBNAILS,"true")}function v(a,b){var c=Y.filter(function(b){return b.id===a});return c&&c.length>0&&c[0].propertyValue&&c[0].propertyValue.value===b}function w(a){var b=Y.filter(function(b){return b.id===a});return b&&b.length>0&&b[0].propertyValue&&b[0].propertyValue.value||null}function x(){return G[Q.SEND_ICON_TYPE]||"arrow"}function y(a,b){G=a;I=a.menuLocation||S.DEFAULT;J=b.appContext.conf.engConf.async;H=b.appContext.deviceDetector;Y=N.isArray(b.appContext.conf.accountSettings)?b.appContext.conf.accountSettings:[];Z=v(O.FILE_SHARING_ENALBED,"true");C(G);L.debug("Menu Location parsed",K)}function z(a){switch(a){case S.TOP:A(P.ACTIONS_BUTTON,!1);A(P.CLOSE_BUTTON,!1);A(P.TOP_MENU_BUTTON,!0);break;case S.BOTTOM:A(P.ACTIONS_BUTTON,!0);A(P.CLOSE_BUTTON,!0);A(P.TOP_MENU_BUTTON,!1);A(P.ATTACHMENT_ICON,!1);break;default:A(P.ACTIONS_BUTTON,!0);A(P.CLOSE_BUTTON,!0);A(P.TOP_MENU_BUTTON,!1);A(P.ATTACHMENT_ICON,!1)}}function A(a,b){X[a]||(X[a]={value:b})}function B(a,b){X[a]?X[a].classes=b:X[a]={classes:b}}function C(a){if(!J){A(P.ATTACHMENT_ICON,!1);A(P.TOP_MENU_BUTTON,!1);A(P.ACTIONS_BUTTON,!0);A(P.CLOSE_BUTTON,!0)}Z||A(P.ATTACHMENT_ICON,!1);H.isDesktop()||A(P.EMOJI_ICON,!1);z(I);D(a);E(a)}function D(a){var b=Object.keys(R);b.forEach(function(b){A([R[b]],!!a[b])})}function E(a){var b=[];if(J||H.isDesktop())if(H.isDesktop()){a[R.attachmentIcon]&&Z&&b.push(U.attachmentIcon);a[R.emojiEnabled]&&b.push(U.emojiEnabled);F()&&b.push(U.topMenu);B(P.BOTTOM_AREA,b)}else{a[R.attachmentIcon]&&Z&&b.push(U.attachmentIcon);F()&&b.push(U.topMenu);B(P.BOTTOM_AREA,b)}else;}function F(){return I===S.TOP&&J}var G,H,I,J,K="FeatureStateManager",L=lpTag.unifiedWindow.log,M=lpTag.taglets.lpUtil,N=lpTag.unifiedWindow.applicationUtils,O=lpTag.unifiedWindow.settingsIDs,P={EMOJI_ICON:"emojiEnabled",ATTACHMENT_ICON:"attachmentIcon",BOTTOM_AREA:"bottomArea",ACTIONS_BUTTON:"actionsButton",CLOSE_BUTTON:"closeButton",TOP_MENU_BUTTON:"topMenuButton"},Q={EMOJI_ENABLED:"emojiEnabled",SEND_ICON_TYPE:"sendIconType",ATTACHMENT_ICON:"attachmentIcon",TIMESTAMP_GROUPING:"timeStampGrouping",TIMESTAMP_LOCATION:"timeStampLocation",AGENT_AVATAR:"agentAvatar",BUBBLE_GROUPING:"bubbleGrouping",AGENT_AVATAR_PADDING:"agentAvatarPadding",ENGAGEMENT_WINDOW_BORDER:"engagementWindowBorder",ENGAGEMENT_WINDOW_BOX_SHADOW:"engagementWindowBoxShadow",CLOSE_WINDOW_BEHAVIOUR_TYPE:"closeWindowButtonBehaviorType",CLOSE_WINDOW_BY_AGENT_BEHAVIOUR_TYPE:"closeWindowButtonByAgentBehaviorType",HISTORY_LAZYLOAD:"historyLazyLoad"},R={emojiEnabled:"emojiEnabled",sendIconType:"sendIconType",attachmentIcon:"attachmentIcon"},S={TOP:"top",BOTTOM:"bottom",DEFAULT:"bottom"},T={TOP:"top",BOTTOM:"bottom",DEFAULT:"top"},U={emojiEnabled:"lp_emoji_supported",attachmentIcon:"lp_attachment_icon",topMenu:"lp_menu_top"},V={OPEN:"OPEN",CLOSE:"CLOSE"},W={VISITOR_BUBBLE:"transcript_bubble_visitor_parent.options.transcript_bubble_visitor_parent",AGENT_BUBBLE:"transcript_bubble_agent_parent.options.transcript_bubble_agent_parent"},X={},Y=[],Z=!1;y(a,b);this.getStyleConfig=c;this.renderMap=P;this.isMessaging=d;this.emojiEnabled=e;this.isFileSharingEnabled=f;this.getSendIconType=x;this.isMenuTop=F;this.isLineGroupingEnabled=o;this.locationMap=S;this.checkSetting=v;this.getSettingsValue=w;this.timeStampGroupingEnabled=g;this.avatarEnabled=i;this.getBubbleStyles=j;this.getCustomStyle=k;this.isTimeStampAbove=n;this.timeStampLocationEnabled=h;this.agentAvatarPaddingEnabled=r;this.isHistoryLazyLoadEnabled=s;this.isEngagementWindowBorderEnabled=p;this.getEngagementWindowBoxShadowConfig=q;this.getCloseWindowButtonBehaviorType=l;this.getCloseWindowByAgentBehaviorType=m;this.isUMSConnectionTimeoutEnabled=t;this.isBlurThumbnailsEnabled=u;this.CLOSE_ON_END_TYPE=V;this.customStyleMap=W};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.TimeStampManager=function(a){function b(a,b){return y?r(h(a),b):K+x.translate("at")+" "+F.getTime(a,C,x.translate("dayMonthGap"),x.translate("daySuffix"),null,x.getLocaleConfig("timeOrder"))+":"}function c(a,b){return r(a,null,b).replace(K+"-"+K,"")}function d(a,b){b=b?b:{};a=h(a)?h(a):(new Date).getTime();if(s(a))return x.translate(H.TODAY);if(t(a))return x.translate(H.YESTERDAY);u(a)?b.weekDay=!0:v(a)||(b.year=!0);return F.getDay(a,C,D,x.translate("dayMonthGap"),x.translate("daySuffix"),b)}function e(a,b){return d(a,b).replace(/(\s|,)/g,"_")}function f(){return y}function g(a,b){if(!a)return!1;b=b?new Date(b):new Date;var c=new Date(a);return b>a&&b.getFullYear()===c.getFullYear()&&b.getMonth()===c.getMonth()&&b.getDate()===c.getDate()}function h(a){return a&&"number"==typeof a?a:a?new Date(a).getTime():null}function i(a){w=a.chatModel;z=a.appContext.featureStateManager;y=z.timeStampGroupingEnabled();A=a.appContext.events;x=a.appContext.translator;B=a.appContext.conf.engConf.lang;C=p();D=q();j()}function j(){y&&w.bind(I.LINES,l)}function k(){y&&w.unbind(I.LINES,l)}function l(a){for(var b=a.newValue,c=b.filter(function(a){var b=(new Date).getTime();return a.time&&b-h(a.time)<G.MINUTE}),d=0;d<c.length;d++)o(c[d])&&m(c[d])}function m(a){setTimeout(function(){A.trigger({appName:"*",eventName:J.UPDATE_TIME_STAMP,data:{line:a,timeStamp:b(a.time,!0)}})},n(a.time))}function n(a){var b=(new Date).getTime(),c=Math.ceil(b/G.MINUTE)*G.MINUTE;return Math.abs(c-h(a))}function o(a){var b=(new Date).getTime();return!a.update&&b-h(a.time)<G.MINUTE}function p(){return[x.translate("monthJanuary"),x.translate("monthFebruary"),x.translate("monthMarch"),x.translate("monthApril"),x.translate("monthMay"),x.translate("monthJune"),x.translate("monthJuly"),x.translate("monthAugust"),x.translate("monthSeptember"),x.translate("monthOctober"),x.translate("monthNovember"),x.translate("monthDecember")]}function q(){return[x.translate("weekDaySunday"),x.translate("weekDayMonday"),x.translate("weekDayTuesday"),x.translate("weekDayWednesday"),x.translate("weekDayThursday"),x.translate("weekDayFriday"),x.translate("weekDaySaturday")]}function r(a,b,c){var d={lang:B};c&&(d.lang=null);var e="",f=(new Date).getTime();e=f-a<G.MINUTE&&!b?x.translate(H.NOW):E.getTime(a,C,x.translate("dayMonthGap"),x.translate("daySuffix"),d);return K+"-"+K+e}function s(a){var b=(new Date).getTime(),c=Math.ceil(b/G.DAY),d=Math.ceil(a/G.DAY);return c-d===0}function t(a){var b=(new Date).getTime(),c=Math.ceil(b/G.DAY),d=Math.ceil(a/G.DAY);return c-d===1}function u(a){var b=(new Date).getTime(),c=Math.ceil(b/G.WEEK),d=Math.ceil(a/G.WEEK);return c-d===0}function v(a){var b=(new Date).getFullYear(),c=new Date(a).getFullYear();return b===c}var w,x,y,z,A,B,C,D,E=(lpTag.unifiedWindow.log,lpTag.lpUtils),F=lpTag.unifiedWindow.applicationUtils,G={MINUTE:6e4,DAY:864e5,WEEK:6048e5},H={NOW:"ts_Now",TODAY:"ts_Today",YESTERDAY:"ts_Yesterday"},I=lpTag.unifiedWindow.chatModelPath,J=lpTag.unifiedWindow.events.viewController,K="&nbsp;";i(a);this.getTimeString=b;this.getDayString=d;this.getDayId=e;this.dispose=k;this.timeStampGroupingEnabled=f;this.isSameDay=g;this.getEpochTime=h;this.getSideTimeString=c};lpTag.unifiedWindow.webViewPlugin=lpTag.unifiedWindow.webViewPlugin||function(a){function b(){if(i&&"function"==typeof i.unbind)for(var b=0;b<p.length;b++)i.unbind(p[b]);a=null;i=null;j=null;p.length=0}function c(){if(i&&"function"==typeof i.bind){d(k.INITIALIZED,"onInit");d(k.STATE,"onConversationStateChanged");d(k.LINE,"onConversationLine");d(k.CHAT_INFO,"onConversationInfo");d(m.DO_HARAKIRI,"onApplicationEnded");d(l.MINIMIZED,"onBackClicked");d(k.SESSION_DATA,"onSessionData")}else j.error("No events object found",g)}function d(b,c){var d,f;a.IOS&&o?d=function(a,b){a=e(b.appName,b.eventName,a);o[c].postMessage(a)}:n&&"function"==typeof n[c]&&(d=function(a,b){a=e(b.appName,b.eventName,a);n[c].call(n,"string"!=typeof a?JSON.stringify(a):a)});if(d){f=i.bind({eventName:b,func:d,context:n,async:!0});p.push(f)}else j.error("No callback defined, missing android object",b)}function e(a,b,c){var d=c,e=c&&r&&r[a]&&r[a][b];if(e){e=Array.isArray(e)?e[0]:e;d=f({data:c},e.data)}return d}function f(a,b){var c={};if("object"==typeof b)for(var d in b)c[d]=q.getPropertyFromObject(a,b[d]);else c=q.getPropertyFromObject(a,b);return c}var g="webViewPlugin",h=lpTag.unifiedWindow.events,i=a&&a.events,j=a&&a.log,k=h.chat,l=h.uiState,m=h.application,n=window.android,o=window.webkit&&window.webkit.messageHandlers,p=[],q=lpTag.taglets.lpUtil,r=q.getPropertyFromObject(lpTag,"unifiedWindow.publicEvents");c();return{dispose:b}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.LocalizationHelper=lpTag.unifiedWindow.helpers.LocalizationHelper||function(a){function b(a){return i[a]===!0}function c(a,b,c){var d=e(c),i=f(c),k=g(d,b);if(k){h.addClass(a,j[d]);h.removeClass(a,j[i])}else{h.addClass(a,j[i]);h.removeClass(a,j[d])}}function d(a){h=a.util}function e(a){return b(a)?"RTL":"LTR"}function f(a){return b(a)?"LTR":"RTL"}function g(a,b){var c,d="A-Za-z--------",e="---";c="rtl"===a.toLowerCase()?new RegExp("^[^"+e+"]*["+d+"]"):new RegExp("^[^"+d+"]*["+e+"]");return!c.test(b)}var h,i={"he-IL":!0,"ar-AE":!0},j={LTR:"lp_ltr",RTL:"lp_rtl"};d(a);return{applyDirOnElement:c,isLanguageRTL:b}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.ImageParsingHelper=lpTag.unifiedWindow.helpers.ImageParsingHelper||function(a){function b(a,b){if(a&&a instanceof Blob){var f=c.bind(this,a,d.bind(this,b));try{e(a,f)}catch(g){b(a)}}else b(a)}function c(a,b,c){if(2>c)b(a);else{var d=new FileReader;d.onloadend=function(){var e=new Image;e.onload=function(){var d=e.width,f=e.height,g=document.createElement("canvas"),h=g.getContext("2d");if(c>4&&9>c){g.width=f;g.height=d}else{g.width=d;g.height=f}switch(c){case 2:h.transform(-1,0,0,1,d,0);break;case 3:h.transform(-1,0,0,-1,d,f);break;case 4:h.transform(1,0,0,-1,0,f);break;case 5:h.transform(0,1,1,0,0,0);break;case 6:h.transform(0,1,-1,0,f,0);break;case 7:h.transform(0,-1,-1,0,f,d);break;case 8:h.transform(0,-1,1,0,0,d)}h.drawImage(e,0,0);g.toBlob?g.toBlob(b,a.type):b(a)};e.onerror=function(c){b(a)};d&&d.result&&"data:"!==d.result?e.src=d.result:b(a)};try{d.readAsDataURL(a)}catch(e){b(a)}}}function d(a,b){var c=new FileReader;c.onloadend=function(){var d=new Image;d.onload=function(){var c,e,f=document.createElement("canvas"),g=f.getContext("2d");f.width=d.width;f.height=d.height;e=l&&l.conf&&l.conf.unifiedConf&&l.conf.unifiedConf.resizeImage||l.featureStateManager.getSettingsValue(m.FILE_SHARING_IMAGE_RESIZE_SIZE)||n.DEFAULT_RESIZE_IMAGE;c=Math.min(e/f.width,e/f.height,1);f.width=f.width*c;f.height=f.height*c;g.drawImage(d,0,0,f.width,f.height);f.toBlob?f.toBlob(a,b.type):a(b)};d.onerror=function(c){a(b)};c&&c.result&&"data:"!==c.result?d.src=c.result:a(b)};try{c.readAsDataURL(b)}catch(d){a(b)}}function e(a,b){f(a,function(a){var c=-1;a&&(c=a[n.TIFF_TAGS.ORIENTATION]);b(c)})}function f(a,b){if(!(a instanceof Blob))return b();var c=new FileReader;c.onload=function(a){var c=new DataView(a.target.result);if(c.buffer.byteLength<16)return b();if(c.getUint16(0,!1)!==n.SOI_MARKER)return b();for(var d=c.byteLength,e=2;d>e;){if(c.getUint16(e+2,!1)<=8)return b();var f=c.getUint16(e,!1);e+=2;if(f===n.APP1_MARKER){if(c.getUint32(e+=2,!1)!==n.EXIF_HEADER_MARKER)return b();var h=c.getUint16(e+=6,!1)===n.TIFF_HEADER_MARKER;e+=c.getUint32(e+4,h);var i=g(c,e,h);return b(i)}if(65280!=(65280&f))break;e+=c.getUint16(e,!1)}b()};try{c.readAsArrayBuffer(a)}catch(d){b()}}function g(a,b,c){var d=a.getUint16(b,c);b+=2;for(var e={},f=0;d>f;f++){var g=b+12*f,h=a.getUint16(g,c),i=a.getUint16(g+8,c);e[h]=i}return e}function h(a,b,c){var d=new FileReader,e=i.bind(this,b);d.onload=e;if(c)switch(c){case"JPG":case"JPEG":case"PNG":case"GIF":d.readAsDataURL(a);break;case"PDF":case"DOCX":case"XLSX":case"PPTX":e(l.conf.unifiedConf.imagesRepository+"/"+c.toLowerCase()+".png");break;default:e(l.conf.unifiedConf.imagesRepository+"/generic.png")}else d.readAsDataURL(a)}function i(a,b){var c=new Image;c.setAttribute("crossOrigin","Anonymous");var d=l.featureStateManager&&l.featureStateManager.isBlurThumbnailsEnabled();c.onload=function(){var b,e=document.createElement("canvas"),f=e.getContext("2d"),g=Math.min(n.MAX_THUMB_HEIGHT/c.height,n.MAX_THUMB_WIDTH/c.width);e.height=c.height*g;e.width=c.width*g;d&&(f.filter="blur(10px)");f.fillStyle="white";f.fillRect(0,0,e.width,e.height);f.drawImage(c,0,0,e.width,e.height);d&&(l.deviceDetector.isSafari()||l.deviceDetector.isIOS())&&(f=k(f,"10px"));b=e.toDataURL(n.THUMB_FORMAT);a&&"function"==typeof a&&a(b)};c.onerror=function(){a&&"function"==typeof a&&a()};j.call(this)?a(lpTag.unifiedWindow.consts.fileSharing.fallbackThumbnail.URI):c.src=b&&b.target&&b.target.result||b}function j(){return l.deviceDetector.isIOS13()||l.deviceDetector.isMacOS()&&l.deviceDetector.isSafari()&&13===l.deviceDetector.browserVersion()}function k(a,b){var c=parseFloat(b);if(0>=c)return a;for(var d,e,f,g,h=a.canvas.height,i=a.canvas.width,j=a.getImageData(0,0,i,h),k=j.data,l=i-1,m=h-1,n=c+1,o=[1,57,41,21,203,34,97,73,227,91,149,62,105,45,39,137,241,107,3,173,39,71,65,238,219,101,187,87,81,151,141,133,249,117,221,209,197,187,177,169,5,153,73,139,133,127,243,233,223,107,103,99,191,23,177,171,165,159,77,149,9,139,135,131,253,245,119,231,224,109,211,103,25,195,189,23,45,175,171,83,81,79,155,151,147,9,141,137,67,131,129,251,123,30,235,115,113,221,217,53,13,51,50,49,193,189,185,91,179,175,43,169,83,163,5,79,155,19,75,147,145,143,35,69,17,67,33,65,255,251,247,243,239,59,29,229,113,111,219,27,213,105,207,51,201,199,49,193,191,47,93,183,181,179,11,87,43,85,167,165,163,161,159,157,155,77,19,75,37,73,145,143,141,35,138,137,135,67,33,131,129,255,63,250,247,61,121,239,237,117,29,229,227,225,111,55,109,216,213,211,209,207,205,203,201,199,197,195,193,48,190,47,93,185,183,181,179,178,176,175,173,171,85,21,167,165,41,163,161,5,79,157,78,154,153,19,75,149,74,147,73,144,143,71,141,140,139,137,17,135,134,133,66,131,65,129,1],p=o[c],q=[0,9,10,10,14,12,14,14,16,15,16,15,16,15,15,17,18,17,12,18,16,17,17,19,19,18,19,18,18,19,19,19,20,19,20,20,20,20,20,20,15,20,19,20,20,20,21,21,21,20,20,20,21,18,21,21,21,21,20,21,17,21,21,21,22,22,21,22,22,21,22,21,19,22,22,19,20,22,22,21,21,21,22,22,22,18,22,22,21,22,22,23,22,20,23,22,22,23,23,21,19,21,21,21,23,23,23,22,23,23,21,23,22,23,18,22,23,20,22,23,23,23,21,22,20,22,21,22,24,24,24,24,24,22,21,24,23,23,24,21,24,23,24,22,24,24,22,24,24,22,23,24,24,24,20,23,22,23,24,24,24,24,24,24,24,23,21,23,22,23,24,24,24,22,24,24,24,23,22,24,24,25,23,25,25,23,24,25,25,24,22,25,25,25,24,23,24,25,25,25,25,25,25,25,25,25,25,25,25,23,25,23,24,25,25,25,25,25,25,25,25,25,24,22,25,25,23,25,25,20,24,25,24,25,25,22,24,25,24,25,24,25,25,24,25,25,25,25,22,25,25,25,24,25,24,25,18],r=q[c],s=[],t=[],u=[],v=[],w=[],x=[],y=3;y>0;){for(var z=0,A=0,B=0;h>B;B++){for(var C=k[z]*n,D=k[z+1]*n,E=k[z+2]*n,F=k[z+3]*n,G=1;c>=G;G++){
d=z+((G>l?l:G)<<2);C+=k[d++];D+=k[d++];E+=k[d++];F+=k[d]}for(var H=0;i>H;H++){s[A]=C;t[A]=D;u[A]=E;v[A]=F;if(0===B){w[H]=((d=H+n)<l?d:l)<<2;x[H]=(d=H-c)>0?d<<2:0}e=z+w[H];f=z+x[H];C+=k[e++]-k[f++];D+=k[e++]-k[f++];E+=k[e++]-k[f++];F+=k[e]-k[f];A++}z+=i<<2}for(var I=0;i>I;I++){for(var J=I,K=s[J]*n,L=t[J]*n,M=u[J]*n,N=v[J]*n,O=1;c>=O;O++){J+=O>m?0:i;K+=s[J];L+=t[J];M+=u[J];N+=v[J]}A=I<<2;for(var P=0;h>P;P++){k[A+3]=g=N*p>>>r;if(g>0){g=255/g;k[A]=(K*p>>>r)*g;k[A+1]=(L*p>>>r)*g;k[A+2]=(M*p>>>r)*g}else k[A]=k[A+1]=k[A+2]=0;if(0===I){w[P]=((d=P+n)<m?d:m)*i;x[P]=(d=P-c)>0?d*i:0}e=I+w[P];f=I+x[P];K+=s[e]-s[f];L+=t[e]-t[f];M+=u[e]-u[f];N+=v[e]-v[f];A+=i<<2}}y-=1}a.putImageData(j,0,0);return a}var l=a&&a.appContext,m=lpTag.unifiedWindow.settingsIDs,n={TIFF_TAGS:{ORIENTATION:274},SOI_MARKER:65496,APP1_MARKER:65505,EXIF_HEADER_MARKER:1165519206,TIFF_HEADER_MARKER:18761,MAX_THUMB_WIDTH:130,MAX_THUMB_HEIGHT:130,DEFAULT_RESIZE_IMAGE:800,THUMB_FORMAT:"image/jpeg"};return{fixOrientation:b,createThumbnail:h,getImageOrientation:e}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.SecureFormStyleHelper=lpTag.unifiedWindow.helpers.SecureFormStyleHelper||function(a){function b(a){g=a}function c(){var a=d(),b=e(a),c=JSON.stringify(b);return encodeURIComponent(c)}function d(){var a={};for(var b in h)h.hasOwnProperty(b)&&(a[b]=g.themer.getStyle(b));return a}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[h[c]]=f(a[c],i));return b}function f(a,b){var c={};if(a)for(var d in a)a.hasOwnProperty(d)&&(c[b[d]]=a[d]);return c}var g,h={surveyArea:1,button:2},i={"background-color":"bc",color:"c","font-family":"f"};b(a);return{getCompressedCSS:c}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.SMSFormHelper=lpTag.unifiedWindow.helpers.SMSFormHelper||function(){function a(a){return h.indexOf(a)>=0?a:"Text Field"}function b(a,b){switch(a){case i.EMAIL:case i.PHONE_NUMBER:case i.IDENTIFIER:case i.FIRST_NAME:case i.LAST_NAME:case i.MESSAGE:return a}switch(b){case"Numeric Field":return i.NUMBER}return i.ALPHA_NUMBERIC}function c(c,d){var e={id:d+1,type:a(c.UDEType),validationType:b(c.type,c.UDEType),logicId:c.logicID,order:d,mandatory:c.required,label:g(c.question).cleanText,lastKnownValue:""};if(c.answersList&&c.answersList.answer&&c.answersList.answer.length){e.entry=[];c.answersList.answer.forEach(function(a){e.entry.push({checked:!1,value:a,displayValue:g(a).cleanText})})}return e}function d(a){if(a&&a.json){var b={header:a.json.heading,footer:a.json.footer,survey:{id:a.id,header:a.json.heading,questions:{question:[]}}},d=b.survey.questions.question,e=a.json.questions&&a.json.questions.surveyQuestion||[];e.forEach(function(a,b){a.displayed&&d.push(c(a,b))});f[a.id]=b;return b}}function e(a,b,c){if(a&&b&&c){var d,e=a.survey.questions.question;e.forEach(function(a){a.validationType===c&&(d=a.id)});if("undefined"!=typeof d){var f=b.filter(function(a){return a.id===d});return f&&f.length?f[0]:void 0}}}var f={},g=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml||function(a){return{cleanText:a}},h=["Text Field","Text Area","Dropdown Box","Radio Button","Radio Button (side by side)","Checkbox"],i={EMAIL:"email",PHONE_NUMBER:"phoneNumber",IDENTIFIER:"identifier",FIRST_NAME:"firstname",LAST_NAME:"lastname",MESSAGE:"message",NUMBER:"numeric",ALPHA_NUMBERIC:"alpha_numeric"};return{TYPES:i,transform:d,getAnswerOfType:e}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.HyperLinksHelper=lpTag.unifiedWindow.helpers.HyperLinksHelper||function(){function a(a){var b=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"];return b.slice(0,a).map(function(a){return b[Math.random()*b.length|0]}).join("")}function b(b){if(b){for(var c,d=r.markdownToHtml.regexp,e=b;null!==(c=d.exec(b));){var f=a(5);s.push({key:f,markdown:c[0]});e=e.replace(c[0]," "+f+" ")}b=e}return b}function c(a){a&&s.length>0&&s.forEach(function(b){a=a.replace(" "+b.key+" ",b.markdown)});return a}function d(b){if(b){for(var c,d=r.anchorTagRegex.regexp,e=b;null!==(c=d.exec(b));){var f=a(5);t.push({key:f,aHREF:c[0]});e=e.replace(c[0]," "+f+" ")}b=e}return b}function e(a){a&&t.length>0&&t.forEach(function(b){var c=m(b.aHREF);a=a.replace(" "+b.key+" ",c)});return a}function f(a){if(a)for(var b,c=r.markdownToHtml.regexp;null!==(b=c.exec(a));){var d=b[0],e=b[2]||"",f=b[1]||"";if(e&&f&&k(e)){var g=e;e=f;f=g}e.includes("tel"+String.fromCharCode(58))||e.includes("mailto"+String.fromCharCode(58))||(e=l(e));a=a.replace(d,"<a href='"+e+"'>"+f+"</a>")}return a}function g(a,b){if(a&&b){var c=r.link.regexp,d=a.match(c),e=a.indexOf("&quot")>0;e&&(a=a.replace(/\&quot/g,"temporaryQuotText"));if(null===d)return b;b.innerHTML="";var f=0;d.forEach(function(c){e&&(c=c.replace(/\&quot/g,"temporaryQuotText"));a=a.slice(f);f=a.indexOf(c);a=a.replace(c," ");var d=a.slice(0,f);d=h(d);" "===a[f]&&">"===a[f+2]&&(a=a.slice(0,f)+a.slice(f+3));b.innerHTML+=d;c=l(c).trim();b.innerHTML+="<span style='font-weight:inherit;'><a target='_blank' rel='noopener 'href='"+c+"'>"+c+"</a></span>"});a=a.slice(f);a=h(a);b.innerHTML+=a;if(b.children)for(var g=0;g<b.children.length;g++){var i=b.children[g].firstChild;if(i&&i.href&&i.href.indexOf("temporaryQuotText")>0){i.href=i.href.replace(/temporaryQuotText/g,"&quot");i.innerText=i.innerText.replace(/temporaryQuotText/g,"&quot")}}return b}return null}function h(a){var b;try{b=lpTag.HtmlSanitizerUtils.sanitizeAndCleanHtml(a)}catch(c){lpTag.unifiedWindow.log.error("_htmlSanitization",c);b=""}return b}function i(a){return a.match(r.markdownToHtml.regexp)}function j(a){return a.match(r.anchorTagRegex.regexp)}function k(a){return 0!==a.indexOf("http://")&&0!==a.indexOf("https://")&&0!==a.indexOf("ftp://")&&0!==a.indexOf("tel"+String.fromCharCode(58))&&0!==a.indexOf("mailto"+String.fromCharCode(58))&&0!==a.indexOf("javascript"+String.fromCharCode(58))}function l(a){var b=-1===a.indexOf("://")&&-1===a.indexOf("www.");(a.indexOf("javascript"+String.fromCharCode(58))>-1||b)&&(a="");return a}function m(a){var b=r.href.regexp,c=b.exec(a);if(c&&c[1]&&c[1].length>0){var d=l(c[1]);return a.replace(c[1],d)}return a}function n(){return s}function o(a){s=a}function p(){return t}function q(a){t=a}var r={markdownToHtml:{regexp:new RegExp("#md#\\[(.*?)]\\((.*?)\\)#/md#","gim")},anchorTagRegex:{regexp:new RegExp("<a[\\s]+([^>]+)>((?:.(?!\\<\\/a\\>))*.)</a>","gim")},href:{regexp:new RegExp('href="(.*?)"',"gim")},link:{regexp:new RegExp("(?:(?:https?|ftp|file):\\/\\/|www\\.|ftp\\.)(?:\\([-A-Z0-9+&@#/%=~_|$?!:,.]*\\)|[-A-Z0-9+&@#/%=~_|$?!:,.])*(?:\\([-A-Z0-9+&@#/%=~_|$?!:,.]*\\)|[A-Z0-9+&@#/%=~_|$])","gim")}},s=[],t=[];return{wrapStandaloneLinks:g,getMarkDownToTemp:n,setMarkDownToTemp:o,getAHREFToTemp:p,setAHREFToTemp:q,generateTempId:a,convertMarkdownToTempId:b,convertTempIdToMarkdown:c,convertAHREFToTempId:d,convertTempIdToAHREF:e,parseAllMarkdownFormat:f,textContainsMarkDownSyntax:i,sanitizeTextFromHTML:h,textContainsAHREFSyntax:j}};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){for(var d,e=a.getElementsByClass(document.body,a.appConsts.engagementContainerClass,[]),f=0;f<e.length;f++){d=c(e[f],b);if(d)return!0}return!1}function b(a){return document.body.className===a.appConsts.reCaptchaContainerClass}function c(a,b){return b===a||a.contains(b)}function d(a){if("string"==typeof a){a=a.replace(/(<[^>]+) style=".*?"/gi,"$1");a=a.replace(/<[^>]+ style=".*?" \/>/gi,function(a){return a.replace(/ style=".*?"/gi,"")})}return a}var e;lpTag.unifiedWindow.BaseViewController=window.liveperson.uiframework.latest.ViewController.extend({ControllerName:"BaseViewController",logger:lpTag.unifiedWindow.log,util:lpTag.taglets.lpUtil,uiPath:lpTag.unifiedWindow.uiModelPath,chatPath:lpTag.unifiedWindow.chatModelPath,EventName:lpTag.unifiedWindow.events,appConsts:lpTag.unifiedWindow.consts,VCEvents:lpTag.unifiedWindow.events.viewController,State:lpTag.unifiedWindow.State,prefixPlaceHolder:"{{PREFIX}}",customAnimationDurations:{},animationClasses:{bounce:"lpBounceClass",shakeX:"lpShakeXClass",shakeY:"lpShakeYClass"},LPReadNotificationsTypes:{none:{value:"none"},visual:{value:"visual",templates:{PENDING:"<svg class='lp-state-visual lp-pending-notification' viewBox='0 0 20 6' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><title>{{iconTitle}}</title><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' stroke-linecap='round'><g transform='translate(-100.000000, -828.000000)'><g transform='translate(101.000000, 829.000000)'><g id='icon_settings_hover'><g id='Group-5'><circle id='Path' stroke='#C8C8C8' cx='9' cy='2' r='2'></circle><circle id='Path' stroke='#C0C0C1' cx='2' cy='2' r='2'></circle><circle id='Path' stroke='#C0C0C1' cx='16' cy='2' r='2'></circle></g></g></g></g></g></svg>",SENT:"<svg class='lp-state-visual lp-sent-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 15'><title>{{iconTitle}}</title><g fill='none'><g stroke='#C0C0C1'><g transform='translate(-421 -823)translate(421 824)'><polygon points='0 6.6 13.9 0 14 12.3 8.3 10.2 4.6 14 4.6 8.3' stroke-linejoin='round'/><path d='M13.3 1.2L7 8'/></g></g></g></svg>",ACCEPT:"<svg class='lp-state-visual lp-accept-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 9 5'><title>{{iconTitle}}</title><g fill='none' stroke-linejoin='round'><g stroke='#C0C0C1'><polyline points='0 2.5 2.1 5 7 0'/></g></g></svg>",READ:"<svg class='lp-state-visual lp-read-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 5'><title>{{iconTitle}}</title><g fill='none' stroke-linejoin='round'><g stroke='#6D6E70'><g transform='translate(-426 -829)translate(427 829)'><polyline points='0 2.5 2.1 5 7 0'/><path d='M5 5L10 0'/></g></g></g></svg>",ERROR:"<svg class='lp-state-visual lp-failed-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 14'><title>{{iconTitle}}</title><g fill='none'><g stroke='#FF0B29'><path d='M8.3 1.8C8.2 1.5 8 1.2 7.7 1.1 6.9 0.7 6 1 5.7 1.8L0.8 11.3C0.7 11.5 0.6 11.8 0.6 12 0.6 12.8 1.3 13.5 2.1 13.5L11.9 13.5C12.1 13.5 12.3 13.4 12.5 13.3 13.3 13 13.6 12.1 13.2 11.3L8.3 1.8Z'/><path d='M7 5.4L7 8.4'/><path d='M7 10.6L7 11.1'/></g></g></svg>",image_ERROR:"<svg class='lp-state-visual lp-failed-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 14'><title>{{iconTitle}}</title><g fill='none'><g stroke='#FF0B29'><path d='M8.3 1.8C8.2 1.5 8 1.2 7.7 1.1 6.9 0.7 6 1 5.7 1.8L0.8 11.3C0.7 11.5 0.6 11.8 0.6 12 0.6 12.8 1.3 13.5 2.1 13.5L11.9 13.5C12.1 13.5 12.3 13.4 12.5 13.3 13.3 13 13.6 12.1 13.2 11.3L8.3 1.8Z'/><path d='M7 5.4L7 8.4'/><path d='M7 10.6L7 11.1'/></g></g></svg>",image_RETRY:"<svg class='lp-state-visual lp-failed-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 14'><title>{{iconTitle}}</title><g fill='none'><g stroke='#FF0B29'><path d='M8.3 1.8C8.2 1.5 8 1.2 7.7 1.1 6.9 0.7 6 1 5.7 1.8L0.8 11.3C0.7 11.5 0.6 11.8 0.6 12 0.6 12.8 1.3 13.5 2.1 13.5L11.9 13.5C12.1 13.5 12.3 13.4 12.5 13.3 13.3 13 13.6 12.1 13.2 11.3L8.3 1.8Z'/><path d='M7 5.4L7 8.4'/><path d='M7 10.6L7 11.1'/></g></g></svg>"}},text:{value:"text"}},initialize:function(a){this.uiPath=lpTag.unifiedWindow.uiModelPath;this.chatPath=lpTag.unifiedWindow.chatModelPath;this.appContext=a.appContext;this.timeStampManager=a.appContext.timeStampManager;this.timeStampGroupingEnabled=this.timeStampManager.timeStampGroupingEnabled();e.enableStrictCspMode=!!(this.appContext&&this.appContext.conf&&this.appContext.conf.unifiedConf&&this.appContext.conf.unifiedConf.enableStrictCspMode);if(!e.animationCreated&&!e.enableStrictCspMode&&this.appContext.deviceDetector.isAnimationSupported()){e.animationPrefix=this.appContext.deviceDetector.getAnimationData().preFix;e.animationsSupported=!0;e.cssAnimation=document.createElement("style");e.cssAnimation.type="text/css";document.getElementsByTagName("head")[0].appendChild(e.cssAnimation);this.createDefaultAnimations()}},render:function(){e.enableStrictCspMode&&this.customize(this.view)}});e=lpTag.unifiedWindow.BaseViewController.prototype;e.templateString=function(a,b){var c=window.liveperson.uiframework.latest.ViewController.prototype.templateString.call(this,a,b);c=e.enableStrictCspMode?d(c):this.customize(c);return c};e.createDefaultAnimations=function(){if(!e.animationCreated){this.createKeyframe(this.animationClasses.bounce,[{percent:0,animate:this.prefixPlaceHolder+"transform: scale(1, 1);"},{percent:40,animate:this.prefixPlaceHolder+"transform: scale(1.15, 1.1);"},{percent:100,animate:this.prefixPlaceHolder+"transform: scale(1, 1);"}],500);this.createKeyframe(this.animationClasses.shakeX,[{percent:0,animate:this.prefixPlaceHolder+"transform: translateX(0px);"},{percent:20,animate:this.prefixPlaceHolder+"transform: translateX(-15px);"},{percent:40,animate:this.prefixPlaceHolder+"transform: translateX(15px); "},{percent:60,animate:this.prefixPlaceHolder+"transform: translateX(-10px);"},{percent:80,animate:this.prefixPlaceHolder+"transform: translateX(10px);"},{percent:100,animate:this.prefixPlaceHolder+"transform: translateX(0px);"}],400);this.createKeyframe(this.animationClasses.shakeY,[{percent:0,animate:this.prefixPlaceHolder+"transform: translateY(0px);"},{percent:20,animate:this.prefixPlaceHolder+"transform: translateY(-15px);"},{percent:40,animate:this.prefixPlaceHolder+"transform: translateY(15px); "},{percent:60,animate:this.prefixPlaceHolder+"transform: translateY(-10px);"},{percent:80,animate:this.prefixPlaceHolder+"transform: translateY(10px);"},{percent:100,animate:this.prefixPlaceHolder+"transform: translateY(0px);"}],400);e.animationCreated=!0}};e.createKeyframe=function(a,b,c){if(e.cssAnimation){for(var d="."+a+" {"+e.animationPrefix+"animation: lpanim_"+a+" "+c/1e3+"s 0s 1 ease-in-out;}@"+e.animationPrefix+"keyframes lpanim_"+a+" {",f=0;f<b.length;f++)d+=""+b[f].percent+"% {"+b[f].animate+"}";d+="}";var g=new RegExp(this.prefixPlaceHolder,"g");d=d.replace(g,this.animationPrefix);e.customAnimationDurations[a]=c;this.cssAnimation.appendChild(document.createTextNode(d))}};e.bounce=function(a,b){this.animateKeyframe({view:a,classname:this.animationClasses.bounce,callback:b,showAnimation:!0})};e.shakeX=function(a,b){this.animateKeyframe({view:a,classname:this.animationClasses.shakeX,callback:b,showAnimation:!0})};e.shakeY=function(a,b){this.animateKeyframe({view:a,classname:this.animationClasses.shakeY,callback:b,showAnimation:!0})};e.animateKeyframe=function(a){var b=a.classname,c=a.callback,d=a.showBefore,f=a.hideAfter,g=a.view,h=a.showAnimation,i=e.customAnimationDurations[b];"number"!=typeof i&&(i=0);"string"==typeof g&&(g=this.getFirstElement(g));if(h&&this.animationsSupported&&g&&!this.animationInProgress&&this.animationCreated){this.animationInProgress=!0;var j=this;this.addClass(g,b);d&&this.show(g);setTimeout(function(){j.animationInProgress=!1;j.removeClass(g,b);f&&j.hide(g);c&&"function"==typeof c&&c.call(j)},i)}else{f?this.hide(g):d&&this.show(g);c&&"function"==typeof c&&c.call(this)}};e.focusOnElement=function(a,b){var c=b||this.view,d=this.getFirstElement(a,c);d&&1===d.nodeType&&d.focus()};e.getFocusableHeaderButton=function(a,b){b=b||!1;var c='button:not(:disabled), input:not(:disabled), [href], select:not(:disabled), textarea:not(:disabled), [tabindex]:not([tabindex="-1"])',d=Array.prototype.filter.call(a.querySelectorAll(c),function(a){var b=window.getComputedStyle(a);return"none"!==b.display&&"none"!==a.parentNode.style.display&&"hidden"!==b.visibility&&"hidden"!==a.parentNode.style.visibility&&"0"!==b.opacity&&"0"!==a.parentNode.style.opacity&&!a.classList.contains("lp_maximize")});return b?d.length>0?d[d.length-1]:null:d.length>0?d[0]:null};e.isFocusInsideApp=function(){var c=document.activeElement,d=this.appContext.wrapperWindow.getChatWrapperElement();return!c||c&&d&&d.contains(c)||c===document.body||a(this,c)||b(this,c)?!0:!1};e.getLineStateText=function(a,b){var c;switch(a){case this.LPReadNotificationsTypes.none.value:c=void 0;break;case this.LPReadNotificationsTypes.visual.value:c=this.createView({template:this.LPReadNotificationsTypes[a].templates[b.state],wrapWithDiv:!1,target:"#lp_line_"+b.localId+" .lp_line_state",doNotAddChild:!0,textInjection:{iconTitle:this.translate("messagingState_"+b.state)}});c=c&&c.outerHTML?c.outerHTML:c instanceof SVGElement?(new XMLSerializer).serializeToString(c):this.translate("messagingState_"+b.state);break;default:c=this.translate("messagingState_"+b.state)}return c};e.getMonthNames=function(){return[this.translate("monthJanuary"),this.translate("monthFebruary"),this.translate("monthMarch"),this.translate("monthApril"),this.translate("monthMay"),this.translate("monthJune"),this.translate("monthJuly"),this.translate("monthAugust"),this.translate("monthSeptember"),this.translate("monthOctober"),this.translate("monthNovember"),this.translate("monthDecember")]};e.getMonthFullNames=function(){return[this.translate("monthFullJanuary"),this.translate("monthFullFebruary"),this.translate("monthFullMarch"),this.translate("monthFullApril"),this.translate("monthFullMay"),this.translate("monthFullJune"),this.translate("monthFullJuly"),this.translate("monthFullAugust"),this.translate("monthFullSeptember"),this.translate("monthFullOctober"),this.translate("monthFullNovember"),this.translate("monthFullDecember")]}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(a)for(var c,d=b(a),e=0;e<d.length;e++){c=this.translate(d[e])||"";a=a.replace("{{"+d[e]+"}}",c)}return a}function b(a){var b=[],c="string"==typeof a&&a.match(e);if(c)for(var d=0;d<c.length;d++)"string"==typeof c[d]&&b.push(c[d].substring(2,c[d].length-2));return b}var c,d="en-US",e=/({{\w+)(?![{])}}/gi;lpTag.unifiedWindow.Translator=function(a){function b(){this.dictionary=lpTag.unifiedWindow.language;this.dictionary.setLocale(a)}b.call(this,a)};c=lpTag.unifiedWindow.Translator.prototype;c.extendDictionary=function(a,b){b=b||{};b.locale=b.locale||d;this.dictionary.add(a,b)};c.translate=function(b,c){var d=this.dictionary.getString(b);c||(d=a.call(this,d));return d};c.getLocaleConfig=function(a){var b=this.dictionary.getLocaleConfig();return b&&b[a]}}();window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.applicationUtils=lpTag.unifiedWindow.applicationUtils||function(){function a(a,b){if("function"==typeof[].indexOf&&"function"==typeof a.indexOf)return a.indexOf(b);if(a.constructor===Array)for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function b(a){return"string"!=typeof a?a:a.trim?a.trim():a.replace(/^\s+|\s+$/gm,"")}function c(a){if("string"!=typeof a)return a;var c=b(a);return c.toLowerCase()}function d(a,b){function c(a,b,c,d){for(var e,f,g=-1,h=c,i=a.length,j=b.length,k=h.indexOf(a);k>-1;){k+=i;g=h.substring(k).indexOf(b);if(g>-1){e=h.substring(k,k+g);f=d&&d[e];d&&"undefined"!=typeof d[e]&&(f=d[e]);void 0!==f&&(c=c.replace(a+e+b,f));h=h.substring(k+g+j)}else h=h.substring(k+j);g=-1;k=h.indexOf(a)}return c}a=c("{{","}}",a,b);return a}function e(a,b){var c=new RegExp(/((?:http|ftp|ws){1}s{0,1}?:\/\/){0,1}([^\/\?/:]+)(\/?)/gi),d=c.exec(a),e=null;if(d&&d.length>=3&&""!==d[2]){e=d[2].toLowerCase();b&&(e=d[1]+e)}return e}function f(a){var b,c,d={};if("string"==typeof a){b=a.substr(1).split("&");for(var e=0;e<b.length;e++)if(b[e].indexOf("=")>-0){c=b[e].split("=");2==c.length&&(d[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))}}return d}function g(a){a=""+a;var b,c,d=null,f={top:null,country:null};a=e(a);b=a.split(".");if(b.length<3)return a;for(var g=b.length-1,j=g;j>-1;j--){i(b[j],f,j);if(null!==f.country&&null!==f.top)break}if(null!==f.top||null!==f.country){d=f.top;(null===d||null!==f.country&&f.country<d&&d-1===f.country)&&(d=f.country);c=d>0?d-1:d;return h(b.slice(c))}return a}function h(a){return a.join(".")}function i(a,b,c){a=""+a;null===b.top&&(W.topLevelDomain[a]||W.customTopLevelDomain[a])?b.top=c:null===b.country&&W.countryTopLevelDomain[a]&&(b.country=c)}function j(a,b,c){var d;if(!a||"object"!=typeof a)return a;if(!b)return k(a);d=b||a.constructor()||{};for(var e in a)d[e]!==a[e]&&a.hasOwnProperty(e)&&(d[e]=c?j(a[e],void 0,c):a[e]);return d}function k(a){try{return JSON.parse(p(a))}catch(b){lpTag.log("unable to clone object:"+JSON.stringify(b),"ERROR",V);return}}function l(a,b){if("undefined"!=typeof b){if(a)for(var c=0;c<a.length;c++){var d=a[c].value;if("string"==typeof d&&""!==d)if("true"===d)d=!0;else if("false"===d)d=!1;else if("["==d.charAt(0)||"{"==d.charAt(0))try{d=JSON.parse(d)}catch(e){lpTag.log("unable to parse JSON:"+JSON.stringify(e),"ERROR",V)}b[a[c].id]=d}}else lpTag.log("_config is passed as undefined","ERROR",V)}function m(a,b){if(a&&"string"==typeof a){b=b||{};var c,d=b.document||window.document,e=b.id;if("undefined"!=typeof e){c=d.getElementById(e)||d.createElement("style");c.id=e}else c=d.createElement("style");c.type="text/css";d.getElementsByTagName("head")[0].appendChild(c);c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a));return c}}function n(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=c);return b}function o(a,b){function c(){e.body?r(a,d):setTimeout(c,50)}b=b||{};var d=b.context,e=b.document||window.document;c()}function p(a){var b,c;if("function"==typeof Array.prototype.toJSON){c=Array.prototype.toJSON;delete Array.prototype.toJSON;try{b=JSON.stringify(a)}catch(d){Array.prototype.toJSON=c;throw d}Array.prototype.toJSON=c}else b=JSON.stringify(a);return b}function q(){var a,b="";if(crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();if(crypto&&"function"==typeof crypto.getRandomValues){a=new Uint8Array(32);crypto.getRandomValues(a);for(var c=0;c<a.length;c++)b+=a[c].toString(16);return b.substring(0,8)+"-"+b.substring(8,12)+"-"+b.substring(12,16)+"-"+b.substring(16,20)+"-"+b.substring(20,32)}var d="tttttttt-tttt-4ttt-fttt-t7ttttttttttt".replace(/[tf]/g,function(a){var b=16*Math.random()|0,c="t"==a?b:3&b|8;return c.toString(16)});return d+"-"+Math.floor(1e5*Math.random())}function r(a,b){b=b||window;if("function"==typeof a){var c=Array.prototype.slice.call(arguments,2);try{return a.apply(b,c)}catch(d){lpTag.log("Failed to execute callback exc= "+d.message,"ERROR",V)}}}function s(a,b,c){if("function"==typeof N){a=a||{};var d=N(window,a.jsContext),e=N(window,a.jsMethodName);if("function"!=typeof e){lpTag.log("runCallbackByObject err=function "+a.jsMethodName+" was not found","ERROR","utils");c()}else{lpTag.log("runCallbackByObject calling function "+a.jsMethodName,"DEBUG","utils");e.call(d,b)}}else lpTag.log("lpTag.taglets.lpUtil.getPropertyFromObject is not a function","ERROR","utils")}function t(a,b,c){a&&b&&c&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c))}function u(a,b,c){a&&b&&c&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c))}function v(b,c,d){var e,f;b="string"==typeof b?b:"";e=b.split(" ");f=c&&c.constructor===Array?c:"string"==typeof c?[c]:[];d=d&&d.constructor===Array?d:"string"==typeof d?[d]:[];for(var g=0;g<e.length;g++)a(d,e[g])<0&&a(f,e[g])<0&&f.push(e[g]);return f.join(" ").replace(/$\s/gi,"")}function w(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function x(a){return b(a.replace(/\s\s*/g," "))}function y(a){return"object"==typeof a&&1===a.nodeType}function z(a){return"undefined"!=typeof a.length&&"undefined"!=typeof a.item}function A(a,b){return a.className.indexOf(b)>-1}function B(a,b){var c={};a.forEach(function(a){var d=a[b];c[d]=c[d]||[];c[d].push(a)});return c}function C(a,b){for(var c=a.concat(),d=0;d<c.length;++d)for(var e=d+1;e<c.length;++e)"undefined"!=typeof c[d][b]&&c[d][b]===c[e][b]&&c.splice(e--,1);return c}function D(a){return"undefined"!=typeof a&&a.constructor===Array}function E(a,b){var c=a;Array.isArray(a)&&(c=a.sort(function(a,c){return!a[b]||a[b]<c[b]?-1:!c[b]||a[b]>c[b]?1:0}));return c}function F(a){return JSON.parse(JSON.stringify(a))}function G(a){for(var b in a)return!1;return!0}function H(a,b){var c=null===a&&null===b,d=a===b,e=typeof a==typeof b,f=e&&"undefined"==typeof a,g=e&&"function"==typeof a&&""+a==""+b,h=e&&"object"==typeof a&&null!==a&&null!==b,i=h&&Object.keys(a).length===Object.keys(b).length;return c||f||d||g||i&&I(a,b)}function I(a,b){var c=!0;for(var d in a){a.hasOwnProperty(d)&&b.hasOwnProperty(d)&&(c="object"==typeof a[d]&&null!==a[d]&&a[d].constructor===Array?p(a[d])===p(b[d]):H(a[d],b[d]));if(!c)break}return c}function J(a,b){if(D(b))for(var c=0;c<b.length;c++)J(a,b[c]);else{if(A(a,b))return;var d=a.className?[a.className]:[];d.push(b);a.className=d.join(" ")}}function K(a){a=a||{};var b=[];for(var c in a)b.push(c);return b}function L(a,b){if(D(b))for(var c=0;c<b.length;c++)L(a,b[c]);else{a.className=a.className.replace(new RegExp(b,"g"),"");a.className=x(a.className)}}function M(){var a=document.documentElement,b=document.getElementsByTagName("body")[0],c=a.clientWidth||b.clientWidth||window.innerWidth,d=window.outerHeight||a.clientHeight||b.clientHeight;return{width:c,height:d}}function N(a,b,c){var d,e=a;if("string"==typeof b){d=b.split(".");for(var f=0;f<d.length;f++){if("undefined"==typeof e||null===e||"undefined"==typeof e[d[f]]||null===e[d[f]]){e="undefined"!=typeof c?c:void 0;break}e=e[d[f]]}}else lpTag.log("Empty path sent to lookup getPropertyFromObject","DEBUG","utils");return e}function O(a,b){function c(a){Array.isArray(b)&&b.forEach(function(b){"string"==typeof b&&b.length>0&&delete a[b]})}a&&(Array.isArray(a)?a.forEach(function(a){a&&c(a)}):"object"==typeof a&&c(a));return a}function P(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return a?a.replace(/[&<>"'`=/]/g,function(a){return b[a]}):void 0}function Q(a){var b=new Date(a);if(isNaN(b)){b=new Date;var c=a.match(/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)([.])(\d+)([+-])(\d+):(\d+)/);if(c&&12==c.length){b.setUTCFullYear(parseInt(c[1],10));b.setUTCMonth(parseInt(c[2],10)-1);b.setUTCDate(parseInt(c[3],10));b.setUTCHours(parseInt(c[4],10)-parseInt(c[9]+"1",10)*parseInt(c[10],10));b.setUTCMinutes(parseInt(c[5],10)-parseInt(c[9]+"1",10)*parseInt(c[11],10));b.setUTCSeconds(parseInt(c[6],10))}c=null}return b}function R(a,b,c,d,e,f){var g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"];if(b)for(var i=0,j=g.length;j>i;i++)b[i]=b[i]||g[i];else b=g;if(c)for(var k=0,l=h.length;l>k;k++)c[k]=c[k]||h[k];else c=h;if(!a)return"";"Date"!==a.constructor&&(a=this.createDateFromString(a));var m=a.getMonth(),n=a.getDate(),o=a.getDay(),p=a.getFullYear();if(f&&null!==f&&"object"==typeof f){var q="";f.weekDay&&(q+=c[o]+", ");q+=b[m]+("string"==typeof d?d:" ")+n+("string"==typeof e?e:"");f.year&&(q+=" "+p);return q}return b[m]+("string"==typeof d?d:" ")+n+("string"==typeof e?e:"")}function S(a,b,c,d,e,f){a&&(a=this.formatDay(a,b,c,d,e,f));return a?a:this.formatDay(new Date,b,c,d,e)}function T(a,b,c,d,e,f,g){var h=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];if(c)for(var i=0,j=h.length;j>i;i++)c[i]=c[i]||h[i];else c=h;if(!a)return"";"Date"!==a.constructor&&(a=this.createDateFromString(a));var k=":",l=a.getMonth(),m=a.getDate(),n=a.getMinutes();k+=10>n?"0":"";k+=n;if(b){var o=a.getSeconds();k+=10>o?":0":":";k+=o}if(f&&null!==f&&"object"==typeof f){if("en-US"===f.lang){var p=a.getHours(),q=p>=12?"PM":"AM";p%=12;p=p?p:12;return p+k+" "+q}return a.getHours()+k}var r=a.getHours()+k,s=c[l]+("string"==typeof d?d:" "),t=m+("string"==typeof e?e:"");switch(g){case"tdm":return r+", "+t+" "+s;case"mdt":return s+t+", "+r;default:return r+", "+s+t}}function U(a,b,c,d,e,f){a&&(a=this.formatTime(a,!1,b,c,d,e,f));return a?a:this.formatTime(new Date,!0,b,c,d,null,f)}var V="ApplicationUtils",W={customTopLevelDomain:{aero:"aero",asia:"asia",bike:"bike",biz:"biz",camera:"camera",cat:"cat",clothing:"clothing",coop:"coop",equipment:"equipment",estate:"estate",eus:"eus",gallery:"gallery",graphics:"graphics",guru:"guru",info:"info","int":"int",holdings:"holdings",jobs:"jobs",lighting:"lighting",mobi:"mobi",museum:"museum",name:"name",photography:"photography",plumbing:"plumbing",post:"post",pro:"pro",singles:"singles",tel:"tel",travel:"travel",ventures:"ventures",xxx:"xxx"},topLevelDomain:{ac:"ac",co:"co",com:"com",edu:"edu",gov:"gov",mil:"mil",net:"net",org:"org"},countryTopLevelDomain:{ac:"ac",ad:"ad",ae:"ae",af:"af",ag:"ag",ai:"ai",al:"al",am:"am",an:"an",ao:"ao",aq:"aq",ar:"ar",as:"as",at:"at",au:"au",aw:"aw",ax:"ax",az:"az",ba:"ba",bb:"bb",bd:"bd",be:"be",bf:"bf",bg:"bg",bh:"bh",bi:"bi",bj:"bj",bm:"bm",bn:"bn",bo:"bo",bq:"bq",br:"br",bs:"bs",bt:"bt",bv:"bv",bw:"bw",by:"by",bz:"bz",bzh:"bzh",ca:"ca",cc:"cc",cd:"cd",cf:"cf",cg:"cg",ch:"ch",ci:"ci",ck:"ck",cl:"cl",cm:"cm",cn:"cn",co:"co",cr:"cr",cs:"cs",cu:"cu",cv:"cv",cw:"cw",cx:"cx",cy:"cy",cz:"cz",dd:"dd",de:"de",dj:"dj",dk:"dk",dm:"dm","do":"do",dz:"dz",ec:"ec",ee:"ee",eg:"eg",eh:"eh",er:"er",es:"es",et:"et",eu:"eu",fi:"fi",fj:"fj",fk:"fk",fm:"fm",fo:"fo",fr:"fr",ga:"ga",gb:"gb",gd:"gd",ge:"ge",gf:"gf",gg:"gg",gh:"gh",gi:"gi",gl:"gl",gm:"gm",gn:"gn",gp:"gp",gq:"gq",gr:"gr",gs:"gs",gt:"gt",gu:"gu",gw:"gw",gy:"gy",hk:"hk",hm:"hm",hn:"hn",hr:"hr",ht:"ht",hu:"hu",id:"id",ie:"ie",il:"il",im:"im","in":"in",io:"io",iq:"iq",ir:"ir",is:"is",it:"it",je:"je",jm:"jm",jo:"jo",jp:"jp",ke:"ke",kg:"kg",kh:"kh",ki:"ki",km:"km",kn:"kn",kp:"kp",kr:"kr","krd:":"krd",kw:"kw",ky:"ky",kz:"kz",la:"la",lb:"lb",lc:"lc",li:"li",lk:"lk",lr:"lr",ls:"ls",lt:"lt",lu:"lu",lv:"lv",ly:"ly",ma:"ma",mc:"mc",md:"md",me:"me",mg:"mg",mh:"mh",mk:"mk",ml:"ml",mm:"mm",mn:"mn",mo:"mo",mp:"mp",mq:"mq",mr:"mr",ms:"ms",mt:"mt",mu:"mu",mv:"mv",mw:"mw",mx:"mx",my:"my",mz:"mz",na:"na",nc:"nc",ne:"ne",nf:"nf",ng:"ng",ni:"ni",nl:"nl",no:"no",np:"np",nr:"nr",nu:"nu",nz:"nz",om:"om",pa:"pa",pe:"pe",pf:"pf",pg:"pg",ph:"ph",pk:"pk",pl:"pl",pm:"pm",pn:"pn",pr:"pr",ps:"ps",pt:"pt",pw:"pw",py:"py",qa:"qa",re:"re",ro:"ro",rs:"rs",ru:"ru",rw:"rw",sa:"sa",sb:"sb",sc:"sc",sd:"sd",se:"se",sg:"sg",sh:"sh",si:"si",sj:"sj",sk:"sk",sl:"sl",sm:"sm",sn:"sn",so:"so",sr:"sr",ss:"ss",st:"st",su:"su",sv:"sv",sx:"sx",sy:"sy",sz:"sz",tc:"tc",td:"td",tf:"tf",tg:"tg",th:"th",tj:"tj",tk:"tk",tl:"tl",tm:"tm",tn:"tn",to:"to",tp:"tp",tr:"tr",tt:"tt",tv:"tv",tw:"tw",tz:"tz",ua:"ua",ug:"ug",uk:"uk",us:"us",uy:"uy",uz:"uz",va:"va",vc:"vc",ve:"ve",vg:"vg",vi:"vi",vn:"vn",vu:"vu",wf:"wf",ws:"ws",ye:"ye",yt:"yt",yu:"yu",za:"za",zm:"zm",zr:"zr"}},X={delimiter:"|",set:function(a,b,c){if("string"==typeof a&&b.join&&"function"==typeof b.join){var d=encodeURIComponent(a)+"="+encodeURIComponent(b.join(this.delimiter))+";path=/";"undefined"!=typeof c&&(d+=";domain="+c);document.cookie=d;return!0}},get:function(a){var b="\\$&";if("string"==typeof a){var c=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,b)+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")||null;if("string"==typeof c){var d=decodeURIComponent(c);if(d)return d.split(this.delimiter)}}},remove:function(a,b){if("string"==typeof a){this.set(a,["null"],b);return!0}}};return{indexOf:a,trim:b,trimAndLower:c,injectTextObj:d,getDomain:e,getURLParams:f,getParentDomain:g,cloneExtend:j,clone:k,convertConfig:l,addStyleTag:m,objectKeys:n,waitForBody:o,stringify:p,cookieActions:X,getUID:q,runCallback:r,runCallbackByObject:s,registerEvent:t,unregisterEvent:u,buildClassString:v,isEmpty:w,isDomNode:y,isNodeList:z,hasClass:A,groupByKeyValue:B,arrayUniqueByKey:C,isArray:D,sortByKeyValue:E,cloneObj:F,isEmptyLiteral:G,
isSameObject:H,addClassByArray:J,objectKeysAsArray:K,removeClassByArray:L,getWindowSize:M,getPropertyFromObject:N,excludeAttributes:O,escapeHtml:P,createDateFromString:Q,formatDay:R,getDay:S,formatTime:T,getTime:U}}();window.lpTag=window.lpTag||{};(function(){this.JsonPollock=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/dist/",b(b.s=5)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=["vertical","horizontal","carousel"];b["default"]={styleToCss:function(a){var b="";return a&&(a.color&&(b+="color:"+a.color+";"),a["background-color"]&&(b+="background-color:"+a["background-color"]+";"),a.bold&&(b+="font-weight:bold;"),a.italic&&(b+="font-style:italic;"),a.size&&(b+="font-size:"+this.sizeToPx(a.size)+"px;"),a.fill&&(b+="fill:"+a.fill+";")),b},styleToBorder:function(a){var b="";return a&&(a["border-color"]&&(b+="border-color: "+a["border-color"]+";"),a["border-radius"]&&(b+="border-radius: "+a["border-radius"]+"px;")),b},styleToButton:function(a){var b="";return a&&a.size&&(b+="width: "+this.buttonSizeToPx(a.size)+"px; height: "+this.buttonSizeToPx(a.size)+"px;"),b},extractFromStyles:function(a,b){var c=a,d=c.indexOf(b),e="";return d>-1&&(e=c.substr(d,c.indexOf(";",d)-(d-1)),c=c.replace(e,"")),{extractedStyle:e,style:c}},sizeToPx:function(a){switch(a){case"small":return 11;case"medium":return 13;case"large":return 17;default:return 13}},buttonSizeToPx:function(a){switch(a){case"small":return 27;case"medium":return 36;case"large":return 45;default:return 36}},validateParameters:function(a){if(!a.type)throw new Error("Missing configuration: type");for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];c.forEach(function(b){if(void 0===a[b])throw new Error("Missing configuration: "+b+" is a mandatory for element of type "+a.type)})},isString:function(a){return a instanceof String||"string"==typeof a},isObject:function(a){return null!==a&&"object"===(void 0===a?"undefined":d(a))},isLayout:function(a){return e.indexOf(a)>=0},normalizeHtmlText:function(a){var b=a;return a&&(b=b.replace(/(?:\r\n|\r|\n)/g,"<br/>")),b},escapeHtml:function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return a.replace(/[&<>"'`=/]/g,function(a){return b[a]})},htmlToElement:function(a){var b=document.createElement("template");return b.innerHTML=a.trim(),b.content.firstChild},hasClass:function(a,b){return a.classList&&a.classList.contains?a.classList.contains(b):!!a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},addClass:function(a,b){a.classList?a.classList.add(b):this.hasClass(a,b)||(a.className+=" "+b)},removeClass:function(a,b){if(a.classList)a.classList.remove(b);else if(this.hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}},generateRandomId:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},appendAttributesFromObject:function(a,b){Object.keys(b).forEach(function(c){a.setAttribute(c,b[c])})}}},function(a,b,c){var d,e,d,f;!function(a,c){"use strict";d=[],e=function(){return c(a,a,!0)}.apply(b,d)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(a,b,c){"use strict";function d(a,b,c){var d=[];if(a[b]&&a[b].length)for(var e=0;e<a[b].length;e++)c&&"*"!==a[b][e].appName&&a[b][e].appName!==c||d.push(a[b][e]);if(a["*"])for(var f=0;f<a["*"].length;f++)c&&"*"!==a["*"][f].appName&&a["*"][f].appName!==c||d.push(a["*"][f]);return d}function e(b,c,d){a&&"function"==typeof a.log&&a.log(b,c,d)}function f(a){var b,c=a.unbindObj[a.attrName],d=!1;if(!a.unbindObj)return e("CMD listen id not spec for unbind","ERROR",a.loggerName),null;if("string"==typeof a.unbindObj)return j(a.lstnrs,a.unbindObj);if(!a.unbindObj.func&&!a.unbindObj.context&&!a.unbindObj.appName)return!1;var f=a.lstnrs;c&&(f={},f[c]=a.lstnrs[c]);for(var g in f)f.hasOwnProperty(g)&&f[g]&&f[g].length&&(b=k(f[g],a.unbindObj.func,a.unbindObj.context,a.unbindObj.appName),b.length!==f[g].length&&(a.lstnrs[g]=b,d=!0));return d}function g(a){var b={};if(a.constructor===Object)for(var c in a)a.hasOwnProperty(c)&&null!==a[c]&&void 0!==a[c]&&("object"==typeof a[c]&&a[c].constructor!==Array?b[c]=g(a[c]):a[c].constructor===Array?b[c]=a[c].slice(0)||[]:"function"!=typeof a[c]&&(b[c]=null!==a[c]&&void 0!==a[c]?a[c]:""));else a.constructor===Array?b=a.slice(0)||[]:"function"!=typeof a&&(b=a);return b}function h(a,b,c){if((void 0===c||"*"===c)&&"*"===b)return a;for(var d=[],e=0;e<a.length;e++)a[e].eventName!==c&&"*"!==c||(b&&b===a[e].appName||!a[e].appName||"*"===a[e].appName||"*"===b)&&d.push(a[e]);return d}function i(a){if(0===a.eventBufferLimit||a.triggerData.data&&a.triggerData.data.doNotStore)a=null;else{var b={eventName:a.triggerData[a.attrName],appName:a.triggerData.appName};b.data=a.triggerData.passDataByRef?a.triggerData.data:g(a.triggerData.data),a.eventBufferLimit>0?(a.index>=a.eventBufferLimit&&(a.index=0),a.fired[a.index]=b,a.index++):a.fired.push(b),a=null}}function j(a,b){var c=!1;if(!b)return e("Ev listen id not spec for unregister","ERROR","Events"),null;for(var d in a)if(a.hasOwnProperty(d))for(var f=0;f<a[d].length;f++)if(a[d][f].id==b){a[d].splice(f,1),e("Ev listen="+b+" and name="+d+" unregister","DEBUG","Events"),c=!0;break}return c||e("Ev listen not found "+b+" unregister","DEBUG","Events"),c}function k(a,b,c,d){var f=[];if(a&&a.length)for(var g=0;g<a.length;g++)try{var h=!c&&a[g].func===b,i=!b&&c&&a[g].context===c,j=b&&c&&a[g].func===b&&a[g].context===c,k=d&&d===a[g].appName,l="*"===a[g].appName;if(h||i||j){if(k||l)continue;if(i)continue}else if(!b&&!c&&k)continue;f.push(a[g])}catch(a){e("Error in unbind e="+a.message,"ERROR","Events")}return f}var l={getListeners:d,log:e,unbind:f,hasFired:h,cloneEventData:g,storeEventData:i};return c||(b.EventsUtil=b.EventsUtil||l),l}),function(c,g){"use strict";d=[e],void 0!==(f=function(a){return g(c,c,a,!0)}.apply(b,d))&&(a.exports=f)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(a,b,c,d){"use strict";function e(a){function b(a){return a?(a.triggerOnce=!0,d(a)):null}function d(a,b,e){var f=a;if("string"==typeof a&&(f={appName:a,eventName:b,func:e}),f.appName=f.appName||l,"*"!==l&&("string"!=typeof a||"function"!=typeof b&&void 0!==b||(f.eventName=a)),!f.eventName||!f.func||"function"!=typeof f.func&&f.func.constructor!==Array)return c.log("Ev listen has invalid params: evName=["+f.eventName+"]","ERROR","Events"),null;if(f.func.constructor===Array){for(var g,h,i=[],j=0;j<f.func.length;j++)g=c.cloneEventData(f),g.func=f.func[j],h=d(g),i.push(h);return i}var k=r+o++,m={id:k,func:f.func,context:f.context||null,aSync:!!f.aSync,appName:f.appName,triggerOnce:f.triggerOnce||!1};return p[f.eventName]=p[f.eventName]||[],p[f.eventName].push(m),c.log("Ev listen rgstr: evName=["+f.eventName+"] aSync="+m.aSync+" appName="+m.name,"DEBUG","Events"),f=null,a=null,k}function e(a){return"*"!==l&&(a.appName=a.appName||l),c.unbind({unbindObj:a,attrName:n,loggerName:m,lstnrs:p})}function f(a,b){return void 0===b&&(b=a,a=l),c.hasFired(q,a,b)}function g(a,b,d){var e=a;if("string"==typeof a&&(e={eventName:b,appName:a,data:d}),"*"!==l&&(e.appName=e.appName||l,"string"!=typeof a||"object"!=typeof b&&void 0!==b||(e.eventName=a)),!e||void 0===e.eventName)return c.log("Ev name not spec for publish","ERROR","Events"),e=null,null;e.passDataByRef=e.passDataByRef||!j,i(e);var f=c.getListeners(p,e.eventName,e.appName);if(f.length>0)for(var g=0;g<f.length;g++){var k=e.passDataByRef?e.data:c.cloneEventData(e.data),m={appName:e.appName,eventName:e.eventName},n=f[g];n.aSync||k&&k.aSync?setTimeout(h(n,k,m),0):h(n,k,m)()}return e=null,f.length>0}function h(a,b,d){return function(){try{a.func.call(a.context,b,d),b=null,a.triggerOnce&&e(a),a=null}catch(b){c.log("Error executing "+d.eventName+" eventId: "+a.id+"e="+b.message,"ERROR","Events")}}}function i(a){c.storeEventData({triggerData:a,eventBufferLimit:k,attrName:n,fired:q,index:s})}var j,k,l,m="Events",n="eventName",o=0,p={},q=[],r="evId_",s=0;l=a&&a.appName||"*",j=!(!a||"boolean"!=typeof a.cloneEventData)&&a.cloneEventData,k=a&&!isNaN(a.eventBufferLimit)?a.eventBufferLimit:-1,this.once=b,this.hasFired=f,this.trigger=g,this.publish=g,this.bind=d,this.register=d,this.unbind=e,this.unregister=e}return d||(b.Events=b.Events||e),e})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(4),j=d(i),k=c(0),l=d(k),m=c(1),n=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return d.errors=c,d}return g(b,a),b}(Error),o=function(){function a(b){e(this,a),this.events=new m({cloneEventData:!0,appName:"json-pollock"}),this.provider=new j["default"](this.events),this.maxAllowedElements=50,this.schemaValidator=b}return h(a,[{key:"init",value:function(a){a&&(Object.prototype.hasOwnProperty.call(a,"maxAllowedElements")&&(!isNaN(a.maxAllowedElements)&&a.maxAllowedElements>0?this.maxAllowedElements=a.maxAllowedElements:this.maxAllowedElements=50),"function"==typeof a.onAfterElementRendered&&(this.onAfterElementRendered=a.onAfterElementRendered))}},{key:"renderElement",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(d>=this.maxAllowedElements)){var e=d,f=this.provider.get(a.type),g=void 0;f&&(g=f(a),this.onAfterElementRendered&&(g=this.onAfterElementRendered(g,a)),g&&(b.appendChild(g),Array.isArray(a.elements)&&a.elements.forEach(function(a){e+=1,c.renderElement(a,g,e)}),g.afterRender&&g.afterRender.call(g,a,b)))}}},{key:"render",value:function(a){var b=void 0;b=l["default"].isString(a)?JSON.parse(a):a,this.validate(b);var c=document.createDocumentFragment(),d=document.createElement("div");return d.className="lp-json-pollock",l["default"].isLayout(b.type)||(d.className+=" lp-json-pollock-single-element"),c.appendChild(d),this.renderElement(b,d),c}},{key:"validate",value:function(a){if(!l["default"].isObject(a))throw new n("JsonPollock::validte - input is not an object");if(this.schemaValidator){var b=this.schemaValidator.validate(a);if(!b.valid)throw new n("Schema validation error, see 'errors' for more details",b.errors)}}},{key:"registerAction",value:function(a,b){this.events.bind({eventName:a,func:function(a){b(a)}})}},{key:"unregisterAction",value:function(a){this.events.unbind({eventName:a})}},{key:"unregisterAllActions",value:function(){this.events.unbind({})}},{key:"registerElement",value:function(a,b){this.provider.set(a,b)}}]),a}();o.TEMPLATE_TYPES=j["default"].TYPES,b["default"]=o},function(a,b){},function(a,b,c){"use strict";function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(0),i=function(a){return a&&a.__esModule?a:{"default":a}}(h),j=(c(1),{TEXT:"text",BUTTON:"button",IMAGE:"image",MAP:"map",VERTICAL:"vertical",HORIZONTAL:"horizontal",CAROUSEL:"carousel",CAROUSELSELECT:"carouselSelect",ACCORDIONSELECT:"accordionSelect",SUBMITBUTTON:"submitButton",CHECKBOX:"checkbox",CHECKLIST:"checklist",LIST:"list",SECTION:"section",SECTIONLIST:"sectionList",BUTTONLIST:"buttonList",TABS:"tabs"}),k="data-section-id",l=function(){function a(b){var c=this;e(this,a),this.elements={},this.events=b,this.set(j.TEXT,function(a){var b=document.createElement("div"),c=document.createElement("span"),d=a.tooltip?i["default"].escapeHtml(a.tooltip):"";b.className="lp-json-pollock-element-text",a.rtl&&(b.dir="rtl",i["default"].addClass(b,"direction-rtl"));var e=i["default"].styleToCss(a.style),f=i["default"].extractFromStyles(e,"background-color");return b.setAttribute("style",f.extractedStyle),c.innerHTML=i["default"].normalizeHtmlText(a.text),c.setAttribute("style",f.style),c.setAttribute("title",d),a.accessibility&&a.accessibility.web?i["default"].appendAttributesFromObject(c,a.accessibility.web):c.setAttribute("aria-label",d),b.appendChild(c),b}),this.set(j.BUTTON,function(a){function b(a){return a?a.classList.contains("lp-json-pollock")?a:b(a.parentNode):void 0}var e=document.createElement("div");e.className="lp-json-pollock-element-button",a.rtl&&(e.dir="rtl",i["default"].addClass(e,"direction-rtl"));var g=document.createElement("button");if(g.innerHTML=i["default"].normalizeHtmlText(a.title),a.subtitle){var h=document.createElement("span");h.className="lp-json-pollock-element-button-subtitle",h.innerHTML=i["default"].normalizeHtmlText(a.subtitle),g.appendChild(h)}a.tooltip&&(g.title=a.tooltip,g.setAttribute("aria-label",a.tooltip)),a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(g,a.accessibility.web);var j=a.click;if(j&&j.actions&&(a.ref?g.onclick=function(e,h){var i=[],k=b(g);if(!k)throw new Error("Cannot find root element selected!");var l=void 0;switch(a.ref.type){case"carouselSelect":l="[data-carousel-name="+a.ref.name+"] [data-selected]";break;case"accordionSelect":l="[data-accordion-name="+a.ref.name+"] [data-accordion-body][data-selected]";break;default:throw new Error("Invalid config ref type is used for the button! Type: "+a.ref.type)}var m=Array.from(k.querySelectorAll(l));if(0===m.length)throw new Error("No items has selected!");var n=m.map(function(a){return JSON.parse(a.getAttribute("data-metadata")||"[]")}).reduce(function(a,b){return[].concat(d(a),d(b))},[]);return i.push.apply(i,d(n)),c.wrapAction(f({},j,{metadata:i}))(e,h)}:g.onclick=c.wrapAction(a.click)),"button"!==a["class"]){if(a.style){var k=i["default"].styleToCss(a.style),l=i["default"].extractFromStyles(k,"background-color");g.style.cssText=l.style,e.setAttribute("style",l.extractedStyle)}e.appendChild(g)}else{var m=document.createElement("div");if(m.className="lp-json-pollock-element-button-button",i["default"].addClass(m,"class-button"),a.style){var n=i["default"].styleToCss(a.style),o=i["default"].extractFromStyles(n,"background-color");g.style.cssText=o.style,m.setAttribute("style",o.extractedStyle);var p=i["default"].styleToBorder(a.style);""!==p&&m.setAttribute("style",o.extractedStyle+" "+p)}m.appendChild(g),e.appendChild(m)}return e}),this.set(j.SUBMITBUTTON,function(a){var b=document.createElement("div");b.className="lp-json-pollock-element-submit-button",a.rtl&&(b.dir="rtl",i["default"].addClass(b,"direction-rtl"));var d=document.createElement("input");if(d.type="submit",d.value=i["default"].normalizeHtmlText(a.title),a.disabled&&(d.disabled=!0,d.classList.add("lp-json-pollock-element-submit-button-disabled")),a.tooltip&&(d.title=a.tooltip,d.setAttribute("aria-label",a.tooltip)),a.style){var e=i["default"].styleToCss(a.style),f=i["default"].extractFromStyles(e,"background-color");b.setAttribute("style",f.extractedStyle),d.style.cssText=f.style}return a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(d,a.accessibility.web),a.click&&a.click.actions&&(d.onclick=c.wrapAction(a.click,!0)),b.appendChild(d),b}),this.set(j.CHECKBOX,function(a){var b=i["default"].generateRandomId(),d=document.createElement("div");d.className="lp-json-pollock-element-checkbox";var e=document.createElement("input"),f=i["default"].normalizeHtmlText(a.text);e.type="checkbox",e.className="lp-json-pollock-element-checkbox-input",e.id=b;var g=document.createElement("label");if(g.className="lp-json-pollock-element-checkbox-label",g.innerHTML+=f,g.setAttribute("for",b),a.rtl&&(g.dir="rtl",i["default"].addClass(g,"direction-rtl")),a.tooltip&&(g.title=a.tooltip,g.setAttribute("aria-label",a.tooltip)),a.borderLine){var h=document.createElement("div");h.className="lp-json-pollock-border-element",a.borderColor&&(h.style.borderColor=a.borderColor),d.appendChild(h)}a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(g,a.accessibility.web);var j=document.createElement("div");if(j.className="lp-json-pollock-element-checkbox-wrapper",a.rtl&&(j.dir="rtl",i["default"].addClass(j,"direction-rtl")),a.style){var l=i["default"].styleToCss(a.style),m=i["default"].extractFromStyles(l,"background-color");g.style.cssText=l,j.setAttribute("style",m.extractedStyle)}return j.appendChild(e),j.appendChild(g),d.appendChild(j),d.afterRender=function(a,b){var e=d.getElementsByTagName("input")[0];a.click&&a.click.actions&&(e.onclick=c.wrapAction(a.click,!1,b.parentElement.getAttribute(k)))},d}),this.set(j.CHECKLIST,function(a){var b=document.createElement("div");if(b.className="lp-json-pollock-layout-checklist",b.setAttribute("role","group"),a.padding){var c=a.padding;b.style.margin=c/2+"px 0px"}return b}),this.set(j.SECTION,function(a){var b=document.createElement("div");if(b.className="lp-json-pollock-layout-section",a.padding){var c=a.padding;b.style.margin=c/2+"px 0px"}return a.sectionID&&b.setAttribute(k,a.sectionID),a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(b,a.accessibility.web),b}),this.set(j.SECTIONLIST,function(){var a=document.createElement("div");return a.className="lp-json-pollock-layout-sectionList",a}),this.set(j.BUTTONLIST,function(){var a=document.createElement("div");return a.className="lp-json-pollock-layout-buttonList",a}),this.set(j.LIST,function(){var a=document.createElement("form");return a.className="lp-json-pollock-layout lp-json-pollock-layout-form",a.afterRender=function(){var b=a.querySelectorAll("input");if(b.length>0)for(var d=0;d<b.length;d+=1){var e=b[d];e.onclick&&function(){var b=e.onclick;e.onclick=function(d){b.call(c,d,a)}}()}var f=a.querySelectorAll("button");if(f.length>0)for(var g=0;g<f.length;g+=1){var h=f[g];h.getAttribute("type")||h.setAttribute("type","button")}},a}),this.set(j.IMAGE,function(a){var b=document.createElement("div");b.className="lp-json-pollock-element-image loading",a.rtl&&(b.dir="rtl",i["default"].addClass(b,"direction-rtl"));var d=document.createElement("img");return d.src=a.url,a.tooltip&&a.tooltip.length&&(b.title=a.tooltip),a.alt&&a.alt.length?d.setAttribute("alt",a.alt):(d.setAttribute("alt",""),d.setAttribute("role","presentation")),a.style&&(d.style.cssText=i["default"].styleToCss(a.style)),a.caption&&(b.innerHTML+="<span>"+a.caption+"</span>"),a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(d,a.accessibility.web),d.onload=function(){i["default"].removeClass(b,"loading")},d.onerror=function(){i["default"].removeClass(b,"loading"),i["default"].addClass(b,"error"),b.title="fail to load image",d.style.display="none"},a.click&&a.click.actions&&(d.onclick=c.wrapAction(a.click)),b.appendChild(d),b}),this.set(j.MAP,function(a){var b=a.accessibility&&a.accessibility.web,d=document.createElement("div");return d.className="lp-json-pollock-element-map",a.tooltip&&(d.title=a.tooltip,d.setAttribute("aria-label",a.tooltip)),a.style&&(d.style.cssText=i["default"].styleToCss(a.style)),b&&i["default"].appendAttributesFromObject(d,a.accessibility.web),b&&b.tabindex||d.setAttribute("tabindex","0"),d.onkeydown=function(b){13!==b.keyCode&&32!==b.keyCode||(b.preventDefault(),window.open("https://www.google.com/maps/search/?api=1&query="+a.la+","+a.lo,"_blank"))},a.click&&a.click.actions?d.onclick=c.wrapAction(a.click):d.onclick=function(){window.open("https://www.google.com/maps/search/?api=1&query="+a.la+","+a.lo,"_blank")},d}),this.set(j.VERTICAL,function(a){var b=document.createElement("div");if(b.className="lp-json-pollock-layout lp-json-pollock-layout-vertical","borderLess"===a.border?i["default"].addClass(b,"lp-json-pollock-layout-borderLess"):"dropShadow"===a.border&&i["default"].addClass(b,"lp-json-pollock-layout-dropShadow"),"enable"===a.scroll)if(i["default"].addClass(b,"lp-json-pollock-layout-vertical-scroll"),a.style&&a.style.size){var c=a.style.size,d=100;"medium"===c?d=300:"large"===c&&(d=500),b.setAttribute("style","height: "+d+"px")}else b.setAttribute("style","height: 100px");return a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(b,a.accessibility.web),a.metadata&&b.setAttribute("data-metadata",JSON.stringify(a.metadata)),b}),this.set(j.TABS,function(a){var b=a.elements,d=document.createElement("div"),e=document.createElement("div");d.appendChild(e);var f="",g="",h="",i="";if(a.style){var j=a.style.color,k=a.style["background-color"],l=a.style["color-active"],m=a.style["background-color-active"],n=a.style["color-hover"],o=a.style["background-color-hover"],p=1;a.style.size&&("small"===a.style.size?p=1:"medium"===a.style.size?p=2:"large"===a.style.size&&(p=3)),f+=j?"color: "+j+"; ":"",f+=j?"border-bottom: "+p+"px solid "+j+"; ":"",f+=k?"background-color: "+k+"; ":"",g+=l?"color: "+l+"; ":"",g+=l?"border-bottom: "+p+"px solid "+l+"; ":"",g+=m?"background-color: "+m+"; ":"",h+=n?"color: "+n+"; ":"",h+=n?"border-bottom: "+p+"px solid "+n+"; ":"",h+=o?"background-color: "+o+"; ":""}var q=function(a){for(var b=d.children,c=b[0].children,e=[],h=1;h<b.length;h++)e.push(b[h]);if(e.length&&e.forEach(function(a){a.style.display="none"}),!a)return f&&g?(c[0].style.cssText=g,i=g):c[0].className+=" active",void(e[0].style.display="block");for(var j=0;j<c.length;j++){var k=c[j];f&&g?k.style.cssText=f:k.className=k.className.replace(" active","")}f&&g?(a.currentTarget.style.cssText=g,i=g):a.currentTarget.className+=" active";for(var l=0;l<c.length;l++)c[l].style.cssText.trim().toLowerCase()===g.trim().toLowerCase()&&g?e[l].style.display="block":c[l].className.includes("active")&&(e[l].style.display="block")};return e.className="lp-json-pollock-element-tab",b.forEach(function(b){var d=b.tag,g=document.createElement("button");g.className="lp-json-pollock-element-tab-button",a.style&&a.style.size?g.className+=" lp-json-pollock-element-tab-button-size-"+a.style.size:g.className+=" lp-json-pollock-element-tab-button-size-small",f&&(g.style.cssText=f),h&&(i=g.style.cssText,g.addEventListener("mouseover",function(){i=g.style.cssText,g.style.cssText=h},!1),g.addEventListener("mouseout",function(){g.style.cssText=i},!1)),g.id=d,g.textContent=d,g.onclick=function(a){q.call(c,a)},e.appendChild(g)}),d.afterRender=function(){q()},d}),this.set(j.CAROUSEL,function(a){function b(a){t&&t[r]&&(k=-1*t[r].offsetLeft+"px",r===t.length-1&&(k=-1*(t[r].offsetLeft-(n.offsetWidth-t[r].offsetWidth))+"px"),this&&this.events&&this.events.trigger({eventName:q,data:{offset:k,prevOffset:p.style.left,uiEvent:a}}),p.style.left=k)}function d(){var a="Item "+(r+1)+" of "+t.length;o.setAttribute("aria-label",a)}function e(a){r===t.length-1?r=0:r+=1,d(),b.call(this,a)}function f(a){0===r?r=t.length-1:r-=1,d(),b.call(this,a)}function g(a){if(a){var b=a.getAttribute("data-carousel-index");return b||g(a.parentNode)}}function h(a){var c=a.target,d=g(c);d&&(n.scrollLeft=0,d&&r!==parseInt(d,10)&&(r=parseInt(d,10),b.call(this,a)))}var j=a.padding||0,k=0,l=document.createElement("button"),m=document.createElement("button"),n=document.createElement("div"),o=document.createElement("div"),p=document.createElement("div"),q="carouselOffsetChange",r=0,s=!1,t=void 0;if(l.setAttribute("type","button"),l.setAttribute("aria-label","Previous"),m.setAttribute("type","button"),m.setAttribute("aria-label","Next"),o.setAttribute("aria-live","polite"),o.setAttribute("aria-atomic","true"),l.innerHTML='<svg aria-hidden="true" class="lp-json-pollock-layout-carousel-arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 14"><path d="M0 0 L2 0 L9 7 L2 14 L0 14 L0 13 L6 7 L0 1"/></svg>',m.innerHTML='<svg aria-hidden="true" class="lp-json-pollock-layout-carousel-arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 14"><path d="M0 0 L2 0 L9 7 L2 14 L0 14 L0 13 L6 7 L0 1"/></svg>',a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(n,a.accessibility.web),a.style){var u=i["default"].styleToCss(a.style),v=i["default"].extractFromStyles(u,"background-color"),w=""+v.extractedStyle,x=i["default"].styleToBorder(a.style);""!==x&&(w+=" "+x);var y=i["default"].styleToButton(a.style);""!==y&&(w+=" "+y),m.setAttribute("style",""+w),l.setAttribute("style",""+w);var z=m.querySelector(".lp-json-pollock-layout-carousel-arrow-icon"),A=l.querySelector(".lp-json-pollock-layout-carousel-arrow-icon");z&&z.setAttribute("style",v.style),A&&A.setAttribute("style",v.style)}return l.style.visibility="visible",n.afterRender=function(){if(n.childNodes.length){for(var a=0;a<n.childNodes.length;a+=1){var b=n.childNodes[a];b.addEventListener("focus",h.bind(c),!0),b.style.margin="0 "+j/2+"px",b.setAttribute("data-carousel-index",a),b.setAttribute("role","listitem")}for(m.className="lp-json-pollock-component-action lp-json-pollock-layout-carousel-arrow",l.className="lp-json-pollock-component-action lp-json-pollock-layout-carousel-arrow left";n.hasChildNodes();)p.insertBefore(n.lastChild,p.firstChild);n.appendChild(p),p.className="lp-json-pollock-layout-carousel",n.setAttribute("aria-label","Carousel with buttons"),n.className="lp-json-pollock-layout-carousel-wrapper",p.setAttribute("role","list"),n.appendChild(l),n.appendChild(m),n.appendChild(p),n.appendChild(o),setTimeout(function(){n.offsetWidth>p.offsetWidth&&(l.style.visibility="hidden",m.style.visibility="hidden"),t=p.children,(s="rtl"===window.getComputedStyle(m).direction)&&(l.style.visibility="visible",m.style.visibility="visible",r=t.length-1,t=[].slice.call(t,0).reverse(),k=-1*(t[r].offsetLeft-(n.offsetWidth-t[r].offsetWidth))+"px",p.style.left=k)},0),m.onclick=function(a){e.call(c,a)},l.onclick=function(a){f.call(c,a)}}},n}),this.set(j.CAROUSELSELECT,function(a){function b(a){return a&&"BUTTON"!==a.tagName?null!==a.getAttribute("data-carousel-index")?a:b(a.parentNode):void 0}function d(b,c){c?(b.setAttribute("data-selected","true"),b.classList.add("lp-json-pollock-layout-selected"),a.style&&a.style["border-color-selected"]&&(b.style.borderColor=a.style["border-color-selected"])):(b.removeAttribute("data-selected"),b.classList.remove("lp-json-pollock-layout-selected"),b.style.borderColor="")}function e(c){var e=c.target,f=b(e);f&&("single"===a.selectMode.type&&f.parentNode&&Array.from(f.parentNode.querySelectorAll("[data-carousel-index][data-selected]")).filter(function(a){return a!==f}).forEach(function(a){d(a,!1)}),d(f,"true"!==f.dataset.selected))}var f=a.padding||0,g=document.createElement("div"),h=document.createElement("div");if(a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(g,a.accessibility.web),a.style){var j=i["default"].styleToCss(a.style),k=i["default"].extractFromStyles(j,"background-color");h.style.cssText=k.style,h.setAttribute("style",k.extractedStyle)}return g.afterRender=function(){var b=g.children.length;if(b){for(var d=0;b>d;d+=1){var i=g.children[d];i.addEventListener("click",e.bind(c),!0),i.style.margin="0 "+f/2+"px",i.setAttribute("data-carousel-index",d.toString()),i.setAttribute("role","listitem")}for(;g.hasChildNodes()&&g.lastChild;)h.insertBefore(g.lastChild,h.firstChild);h.className="lp-json-pollock-layout-carousel lp-json-pollock-layout-carousel-select",g.className="lp-json-pollock-layout-carousel-wrapper",g.appendChild(h),g.setAttribute("data-carousel-name",a.selectMode.name)}},g}),this.set(j.ACCORDIONSELECT,function(a){function b(a){return null!==a.getAttribute("data-accordion-index")?a:b(a.parentNode)}function d(a,b){b?(a.removeAttribute("data-selected"),a.checked=!1):(a.setAttribute("data-selected","true"),a.checked=!0)}function e(a,b){b?a.removeAttribute("data-selected"):a.setAttribute("data-selected","true")}function f(a,b){b?(a.setAttribute("data-open","true"),a.classList.remove("lp-json-pollock-layout-accordion-folded")):(a.setAttribute("data-open","false"),a.classList.add("lp-json-pollock-layout-accordion-folded"))}function g(a,b){b?(a.classList.add("open"),a.classList.remove("close")):(a.classList.add("close"),a.classList.remove("open"))}function h(a){var c=a.target,h="INPUT"===c.tagName,i=b(c);if(i){var j=i.querySelector(".lp-json-pollock-layout-accordion-checkbox"),k=i.querySelector(".lp-json-pollock-layout-accordion-header"),l=i.querySelector(".lp-json-pollock-layout-accordion"),m=i.querySelector(".lp-json-pollock-layout-accordion-arrow");if(h){if(!j||!l)return;var n="true"===j.dataset.selected;return d(j,n),void e(l,n)}if(k&&l){var o="true"===l.dataset.open;f(l,!o),g(m,!o)}}}var j=a.padding||0,k=document.createElement("div"),l=document.createElement("div"),m=i["default"].htmlToElement('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 14"><path d="M0 0 L2 0 L9 7 L2 14 L0 14 L0 13 L6 7 L0 1"/></svg>');if(a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(k,a.accessibility.web),a.style){var n=i["default"].styleToCss(a.style),o=i["default"].extractFromStyles(n,"background-color");l.style.cssText=o.style,l.setAttribute("style",o.extractedStyle)}return k.afterRender=function(){var b=k.children.length;if(b){for(var d=0;b>d;d+=1){var e=k.children[0],f=a.titles[d],g=document.createElement("section"),i=document.createElement("div"),n=document.createElement("input"),o=document.createElement("h3"),p=document.createElement("span"),q=m.cloneNode(!0);g.classList.add("lp-json-pollock-layout-accordion-tab"),i.classList.add("lp-json-pollock-layout-accordion-header"),n.classList.add("lp-json-pollock-layout-accordion-checkbox"),o.classList.add("lp-json-pollock-layout-accordion-title"),p.classList.add("lp-json-pollock-layout-accordion-additional"),q.classList.add("lp-json-pollock-layout-accordion-arrow","close"),e.classList.add("lp-json-pollock-layout-accordion-folded"),e.classList.add("lp-json-pollock-layout-accordion"),e.setAttribute("data-open","false"),e.setAttribute("data-accordion-body",""),n.type="checkbox",o.innerText=f.name,f.additional&&(p.innerText=f.additional),i.addEventListener("click",h.bind(c),!0),g.style.margin="0 "+j/2+"px",g.setAttribute("data-accordion-index",d.toString()),g.setAttribute("role","listitem"),i.appendChild(n),i.appendChild(o),i.appendChild(p),i.appendChild(q),g.appendChild(i),g.appendChild(e),k.appendChild(g)}for(;k.hasChildNodes()&&k.lastChild;)l.insertBefore(k.lastChild,l.firstChild);l.className="lp-json-pollock-layout-accordion lp-json-pollock-layout-accordion-select",k.className="lp-json-pollock-layout-accordion-wrapper",
k.appendChild(l),k.setAttribute("data-accordion-name",a.selectMode.name)}},k}),this.set(j.HORIZONTAL,function(a){var b=document.createElement("div");return b.className="lp-json-pollock-layout lp-json-pollock-layout-horizontal","borderLess"===a.border?i["default"].addClass(b,"lp-json-pollock-layout-borderLess"):"dropShadow"===a.border?i["default"].addClass(b,"lp-json-pollock-layout-dropShadow"):void 0!==a.borderLine&&!1===a.borderLine&&"border"!==a.border&&i["default"].addClass(b,"lp-json-pollock-layout-borderLess"),a.accessibility&&a.accessibility.web&&i["default"].appendAttributesFromObject(b,a.accessibility.web),a.metadata&&b.setAttribute("data-metadata",JSON.stringify(a.metadata)),b.afterRender=function(){if(b.childNodes.length){var c=a.percentages,d=100/b.childNodes.length;if(c&&c.length>0&&c.length<b.childNodes.length){var e=c.reduce(function(a,b){return a+b},0);d=(100-e)/(b.childNodes.length-c.length)}Array.prototype.forEach.call(b.childNodes,function(a,b){var e=a,f=c&&c[b]||d;e.style.width=f+"%"})}},b})}return g(a,[{key:"get",value:function(a){return this.elements[a]}},{key:"set",value:function(a,b){this.elements[a]=b}},{key:"wrapAction",value:function(a,b,c){var d=this;return function(e,f){b&&e&&e.preventDefault&&e.preventDefault(),a.actions instanceof Array&&a.actions.forEach(function(b){var g={actionData:b,metadata:a.metadata,uiEvent:e};c&&(g.groupID=c),f&&(g.formEl=f),d.events.trigger({eventName:b.type,data:g})})}}}]),a}();l.TYPES=j,b["default"]=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.TEMPLATE_TYPES=b.version=b.unregisterAllActions=b.unregisterAction=b.registerAction=b.render=b.init=void 0;var e=c(3),f=(d(e),c(2)),g=d(f),h=new g["default"],i=h.init.bind(h),j=h.render.bind(h),k=h.registerAction.bind(h),l=h.unregisterAction.bind(h),m=h.unregisterAllActions.bind(h),n=g["default"].TEMPLATE_TYPES;b.init=i,b.render=j,b.registerAction=k,b.unregisterAction=l,b.unregisterAllActions=m,b.version="1.7.7",b.TEMPLATE_TYPES=n}])}).call(window.lpTag);window.lpTag=window.lpTag||{};(function(){this.chips=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/pages/ve-le-lp/chips/dist/",b(b.s=71)}([function(a,b){var c=a.exports={version:"2.6.12"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(5),e=c(0),f=c(9),g=c(8),h=c(11),i=function(a,b,c){var j,k,l,m=a&i.F,n=a&i.G,o=a&i.S,p=a&i.P,q=a&i.B,r=a&i.W,s=n?e:e[b]||(e[b]={}),t=s.prototype,u=n?d:o?d[b]:(d[b]||{}).prototype;n&&(c=b);for(j in c)(k=!m&&u&&void 0!==u[j])&&h(s,j)||(l=k?u[j]:c[j],s[j]=n&&"function"!=typeof u[j]?c[j]:q&&k?f(l,d):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b.prototype=a.prototype,b}(l):p&&"function"==typeof l?f(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&i.R&&t&&!t[j]&&g(t,j,l)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,a.exports=i},function(a,b,c){var d=c(37)("wks"),e=c(24),f=c(5).Symbol,g="function"==typeof f;(a.exports=function(a){return d[a]||(d[a]=g&&f[a]||(g?f:e)("Symbol."+a))}).store=d},function(a,b,c){a.exports=!c(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(a,b,c){var d=c(7),e=c(53),f=c(39),g=Object.defineProperty;b.f=c(3)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){var d=c(6);a.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},function(a,b,c){var d=c(4),e=c(17);a.exports=c(3)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},function(a,b,c){var d=c(50);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){try{return!!a()}catch(a){return!0}}},function(a,b){var c={}.hasOwnProperty;a.exports=function(a,b){return c.call(a,b)}},function(a,b,c){var d=c(32),e=c(30);a.exports=function(a){return d(e(a))}},function(a,b){a.exports={}},function(a,b,c){var d=c(30);a.exports=function(a){return Object(d(a))}},function(a,b,c){var d=c(61),e=c(31);a.exports=Object.keys||function(a){return d(a,e)}},function(a,b){b.f={}.propertyIsEnumerable},function(a,b){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},function(a,b,c){"use strict";var d=c(122)(!0);c(33)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},function(a,b,c){var d=c(9),e=c(56),f=c(54),g=c(7),h=c(23),i=c(42),j={},k={},b=a.exports=function(a,b,c,l,m){var n,o,p,q,r=m?function(){return a}:i(a),s=d(c,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(f(r)){for(n=h(a.length);n>t;t++)if((q=b?s(g(o=a[t])[0],o[1]):s(a[t]))===j||q===k)return q}else for(p=r.call(a);!(o=p.next()).done;)if((q=e(p,s,o.value,b))===j||q===k)return q};b.BREAK=j,b.RETURN=k},function(a,b){a.exports=!0},function(a,b,c){var d=c(7),e=c(114),f=c(31),g=c(36)("IE_PROTO"),h=function(){},i=function(){var a,b=c(52)("iframe"),d=f.length;for(b.style.display="none",c(109).appendChild(b),b.src="javascript:",a=b.contentWindow.document,a.open(),a.write("<script>document.F=Object</script>"),a.close(),i=a.F;d--;)delete i.prototype[f[d]];return i()};a.exports=Object.create||function(a,b){var c;return null!==a?(h.prototype=d(a),c=new h,h.prototype=null,c[g]=a):c=i(),void 0===b?c:e(c,b)}},function(a,b,c){var d=c(4).f,e=c(11),f=c(2)("toStringTag");a.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},function(a,b,c){var d=c(38),e=Math.min;a.exports=function(a){return a>0?e(d(a),9007199254740991):0}},function(a,b){var c=0,d=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++c+d).toString(36))}},function(a,b,c){c(127);for(var d=c(5),e=c(8),f=c(13),g=c(2)("toStringTag"),h="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),i=0;i<h.length;i++){var j=h[i],k=d[j],l=k&&k.prototype;l&&!l[g]&&e(l,g,j),f[j]=f.Array}},function(a,b,c){"use strict";b.__esModule=!0,b["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}},function(a,b,c){"use strict";b.__esModule=!0;var d=c(78),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e["default"](a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()},function(a,b,c){var d=c(29),e=c(2)("toStringTag"),f="Arguments"==d(function(){return arguments}()),g=function(a,b){try{return a[b]}catch(a){}};a.exports=function(a){var b,c,h;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=g(b=Object(a),e))?c:f?d(b):"Object"==(h=d(b))&&"function"==typeof b.callee?"Arguments":h}},function(a,b){var c={}.toString;a.exports=function(a){return c.call(a).slice(8,-1)}},function(a,b){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},function(a,b){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(a,b,c){var d=c(29);a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},function(a,b,c){"use strict";var d=c(20),e=c(1),f=c(63),g=c(8),h=c(13),i=c(111),j=c(22),k=c(60),l=c(2)("iterator"),m=!([].keys&&"next"in[].keys()),n=function(){return this};a.exports=function(a,b,c,o,p,q,r){i(c,b,o);var s,t,u,v=function(a){if(!m&&a in z)return z[a];switch(a){case"keys":case"values":return function(){return new c(this,a)}}return function(){return new c(this,a)}},w=b+" Iterator",x="values"==p,y=!1,z=a.prototype,A=z[l]||z["@@iterator"]||p&&z[p],B=A||v(p),C=p?x?v("entries"):B:void 0,D="Array"==b?z.entries||A:A;if(D&&(u=k(D.call(new a)))!==Object.prototype&&u.next&&(j(u,w,!0),d||"function"==typeof u[l]||g(u,l,n)),x&&A&&"values"!==A.name&&(y=!0,B=function(){return A.call(this)}),d&&!r||!m&&!y&&z[l]||g(z,l,B),h[b]=B,h[w]=n,p)if(s={values:x?B:v("values"),keys:q?B:v("keys"),entries:C},r)for(t in s)t in z||f(z,t,s[t]);else e(e.P+e.F*(m||y),b,s);return s}},function(a,b,c){var d=c(24)("meta"),e=c(6),f=c(11),g=c(4).f,h=0,i=Object.isExtensible||function(){return!0},j=!c(10)(function(){return i(Object.preventExtensions({}))}),k=function(a){g(a,d,{value:{i:"O"+ ++h,w:{}}})},l=function(a,b){if(!e(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!f(a,d)){if(!i(a))return"F";if(!b)return"E";k(a)}return a[d].i},m=function(a,b){if(!f(a,d)){if(!i(a))return!0;if(!b)return!1;k(a)}return a[d].w},n=function(a){return j&&o.NEED&&i(a)&&!f(a,d)&&k(a),a},o=a.exports={KEY:d,NEED:!1,fastKey:l,getWeak:m,onFreeze:n}},function(a,b){b.f=Object.getOwnPropertySymbols},function(a,b,c){var d=c(37)("keys"),e=c(24);a.exports=function(a){return d[a]||(d[a]=e(a))}},function(a,b,c){var d=c(0),e=c(5),f=e["__core-js_shared__"]||(e["__core-js_shared__"]={});(a.exports=function(a,b){return f[a]||(f[a]=void 0!==b?b:{})})("versions",[]).push({version:d.version,mode:c(20)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(a,b){var c=Math.ceil,d=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?d:c)(a)}},function(a,b,c){var d=c(6);a.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},function(a,b,c){var d=c(5),e=c(0),f=c(20),g=c(41),h=c(4).f;a.exports=function(a){var b=e.Symbol||(e.Symbol=f?{}:d.Symbol||{});"_"==a.charAt(0)||a in b||h(b,a,{value:g.f(a)})}},function(a,b,c){b.f=c(2)},function(a,b,c){var d=c(28),e=c(2)("iterator"),f=c(13);a.exports=c(0).getIteratorMethod=function(a){return void 0!=a?a[e]||a["@@iterator"]||f[d(a)]:void 0}},function(a,b,c){"use strict";c.d(b,"d",function(){return j}),c.d(b,"a",function(){return k}),c.d(b,"c",function(){return l}),c.d(b,"b",function(){return m}),c.d(b,"e",function(){return n}),c.d(b,"f",function(){return o});var d=c(84),e=c.n(d),f=c(79),g=c.n(f),h=c(44),i=c.n(h),j=function(){var a=arguments.length<=0?void 0:arguments[0],b=void 0,c=void 0;Array.isArray(arguments.length<=1?void 0:arguments[1])?(b={},c=(arguments.length<=1?void 0:arguments[1])||[]):(b=(arguments.length<=1?void 0:arguments[1])||{},c=(arguments.length<=2?void 0:arguments[2])||[]);var d=document.createElement(a);return i()(d.style,b.style||{}),i()(d,b.domProps||{}),g()(b.attrs||[]).forEach(function(a){var b=e()(a,2),c=b[0],f=b[1];return d.setAttribute(c,f)}),g()(b.on||[]).forEach(function(a){var b=e()(a,2),c=b[0],f=b[1];return d.addEventListener(c,f,!1)}),c.forEach(function(a){return d.appendChild(a)}),d},k=function(a,b,c){if(a){var d=a.classList.contains(b);c?d||a.classList.add(b):d&&a.classList.remove(b)}},l=function(a){var b=document.createDocumentFragment();return b.appendChild(a),b},m=function(a,b){a.style.animationName="nodeInserted",a.style.animationDuration="0.001s";var c=function d(c){c.target===a&&"nodeInserted"===c.animationName&&(b(),document.removeEventListener("animationstart",d,!1))};document.addEventListener("animationstart",c,!1)},n=function(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect();return c.left<d.left||c.right>d.right||c.top<d.top||c.bottom>d.bottom},o=function(a,b,c){var d=a.getBoundingClientRect(),e=b.getBoundingClientRect(),f=e.width*c,g=void 0,h=void 0;return d.left<e.left?(g=d.left-e.left,h=Math.floor):d.right>e.right&&(g=d.right-e.right,h=Math.ceil),-1*h(g/f)}},function(a,b,c){a.exports={"default":c(90),__esModule:!0}},function(a,b,c){a.exports={"default":c(94),__esModule:!0}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(80),f=d(e),g=c(77),h=d(g),i=c(49),j=d(i);b["default"]=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":j["default"](b)));a.prototype=h["default"](b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(f["default"]?f["default"](a,b):a.__proto__=b)}},function(a,b,c){"use strict";b.__esModule=!0;var d=c(49),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":e["default"](b))&&"function"!=typeof b?a:b}},function(a,b,c){"use strict";b.__esModule=!0;var d=c(72),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return e["default"](a)}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(82),f=d(e),g=c(81),h=d(g),i="function"==typeof h["default"]&&"symbol"==typeof f["default"]?function(a){return typeof a}:function(a){return a&&"function"==typeof h["default"]&&a.constructor===h["default"]&&a!==h["default"].prototype?"symbol":typeof a};b["default"]="function"==typeof h["default"]&&"symbol"===i(f["default"])?function(a){return void 0===a?"undefined":i(a)}:function(a){return a&&"function"==typeof h["default"]&&a.constructor===h["default"]&&a!==h["default"].prototype?"symbol":void 0===a?"undefined":i(a)}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){a.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}},function(a,b,c){var d=c(6),e=c(5).document,f=d(e)&&d(e.createElement);a.exports=function(a){return f?e.createElement(a):{}}},function(a,b,c){a.exports=!c(3)&&!c(10)(function(){return 7!=Object.defineProperty(c(52)("div"),"a",{get:function(){return 7}}).a})},function(a,b,c){var d=c(13),e=c(2)("iterator"),f=Array.prototype;a.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},function(a,b,c){var d=c(29);a.exports=Array.isArray||function(a){return"Array"==d(a)}},function(a,b,c){var d=c(7);a.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a["return"];throw void 0!==f&&d(f.call(a)),b}}},function(a,b){a.exports=function(a,b){return{value:b,done:!!a}}},function(a,b,c){var d=c(16),e=c(17),f=c(12),g=c(39),h=c(11),i=c(53),j=Object.getOwnPropertyDescriptor;b.f=c(3)?j:function(a,b){if(a=f(a),b=g(b,!0),i)try{return j(a,b)}catch(a){}return h(a,b)?e(!d.f.call(a,b),a[b]):void 0}},function(a,b,c){var d=c(61),e=c(31).concat("length","prototype");b.f=Object.getOwnPropertyNames||function(a){return d(a,e)}},function(a,b,c){var d=c(11),e=c(14),f=c(36)("IE_PROTO"),g=Object.prototype;a.exports=Object.getPrototypeOf||function(a){return a=e(a),d(a,f)?a[f]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?g:null}},function(a,b,c){var d=c(11),e=c(12),f=c(100)(!1),g=c(36)("IE_PROTO");a.exports=function(a,b){var c,h=e(a),i=0,j=[];for(c in h)c!=g&&d(h,c)&&j.push(c);for(;b.length>i;)d(h,c=b[i++])&&(~f(j,c)||j.push(c));return j}},function(a,b,c){var d=c(8);a.exports=function(a,b,c){for(var e in b)c&&a[e]?a[e]=b[e]:d(a,e,b[e]);return a}},function(a,b,c){a.exports=c(8)},function(a,b,c){var d=c(6);a.exports=function(a,b){if(!d(a)||a._t!==b)throw TypeError("Incompatible receiver, "+b+" required!");return a}},function(a,b){},function(a,b,c){"use strict";var d=c(68);b.a=d.a},function(a,b){},function(a,b,c){"use strict";var d=c(48),e=c.n(d),f=c(45),g=c.n(f),h=c(26),i=c.n(h),j=c(27),k=c.n(j),l=c(47),m=c.n(l),n=c(46),o=c.n(n),p=c(69),q=c(70),r=c(43),s=function(a,b){var c=void 0;c=+b?+b:1;for(var d=[],e=0;e<a.length;e+=c)d.push(a.slice(e,e+c));return d},t=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=a.el,d=void 0===c?document.body:c,e=a.items,f=void 0===e?[]:e,h=a.rowSize,j=a.rowLimit,k=void 0===j?3:j,l=a.itemCharLimit,n=void 0===l?25:l,o=a.rowWrap,p=void 0!==o&&o,q=a.lazy,r=void 0!==q&&q,s=a.accessibility,t=void 0===s?{web:{}}:s,u=a.renderer,v=a.direction,w=void 0===v?"ltr":v;i()(this,b);var x=m()(this,(b.__proto__||g()(b)).call(this));if(!u)throw new Error('"renderer" must be passed');return x.el=d,x.items=f,x.rowWrap=!h&&p,x.rowSize=h||f.length||1,x.rowLimit=k,x.itemCharLimit=n,x.accessibility=t,x.RendererClass=u,x.direction=w,r||x.render(),x}return o()(b,a),k()(b,[{key:"render",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.items,c=void 0===b?this.items:b,d=a.rowSize,f=void 0===d?this.rowSize:d,g=a.rowLimit,h=void 0===g?this.rowLimit:g,i=a.rowWrap,j=void 0===i?this.rowWrap:i,k=a.itemCharLimit,l=void 0===k?this.itemCharLimit:k,m=a.accessibility,n=void 0===m?this.accessibility:m,o=a.direction,p=void 0===o?this.direction:o,q=j?[c]:s(c,f);if(q.length>h){var r,t=q.slice(0,h-1),u=(r=[]).concat.apply(r,e()(q.slice(h-1)));t.push(u),q=t}this.renderer=new this.RendererClass({events:this,rows:q,itemCharLimit:l,rowWrap:j,accessibility:n,direction:p}),this.detach(),this.attach(this.renderer.render())}},{key:"attach",value:function(a){this.el.appendChild(a)}},{key:"detach",value:function(){var a=this.el.querySelector(".chips-wrapper");a&&this.el.removeChild(a)}},{key:"dispose",value:function(){this.clear(),this.detach()}},{key:"readonly",value:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];c.i(r.a)(this.el.querySelector(".chips-wrapper"),"chips-readonly",a),this.renderer.isReadOnly=a}}]),b}(p.a);t.Renderer=q.a,b.a=t},function(a,b,c){"use strict";var d=c(75),e=c.n(d),f=c(26),g=c.n(f),h=c(27),i=c.n(h),j=function(){function a(){g()(this,a),this.listeners=new e.a}return i()(a,[{key:"on",value:function(a,b){this.listeners.set(a,b)}},{key:"off",value:function(a){this.listeners["delete"](a)}},{key:"clear",value:function(){this.listeners=new e.a}},{key:"dispatch",value:function(a){var b=this.listeners.get(a);if(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];b.apply(void 0,d)}}}]),a}();b.a=j},function(a,b,c){"use strict";var d=c(48),e=c.n(d),f=c(76),g=c.n(f),h=c(45),i=c.n(h),j=c(47),k=c.n(j),l=c(46),m=c.n(l),n=c(83),o=c.n(n),p=c(26),q=c.n(p),r=c(27),s=c.n(r),t=c(43),u=function(){function a(b){var c=b.events,d=b.rows,e=b.itemCharLimit,f=b.rowWrap,g=b.accessibility,h=void 0===g?{web:{}}:g,i=b.direction,j=void 0===i?"ltr":i;q()(this,a),this.events=c,this.rows=d,this.itemCharLimit=e,this.rowWrap=f,this.accessibility=h,this.stepRatio=.7,this.refs={wrapper:null,slider:null,navLeft:null,navRight:null},this.direction=j}return s()(a,[{key:"render",value:function(){var a=this.buildDomTree();return this.refs={wrapper:a,slider:a.querySelector(".chips-slider"),navLeft:a.querySelector(".chips-nav-left"),navRight:a.querySelector(".chips-nav-right")},c.i(t.b)(this.refs.slider,this.renderNav.bind(this)),c.i(t.c)(a)}},{key:"buildDomTree",value:function(){var a=this;return c.i(t.d)("div",{attrs:o()({"class":"rtl"===this.direction?"chips-wrapper chips-wrapper-rtl":"chips-wrapper"},this.accessibility.web)},[c.i(t.d)("div",{attrs:{"class":"chips-nav chips-nav-left",role:"button","aria-hidden":"true",tabindex:"-1"},style:{visibility:"hidden"},on:{click:function(){a.renderOffset(1),a.events.dispatch("nav:left")}}}),c.i(t.d)("div",{attrs:{"class":"chips-nav chips-nav-right",role:"button","aria-hidden":"true",tabindex:"-1"},style:{visibility:"hidden"},on:{click:function(){a.renderOffset(-1),a.events.dispatch("nav:right")}}}),c.i(t.d)("div",{attrs:{"class":"chips-slider"},style:{left:0}},this.rows.map(function(b){return c.i(t.d)("ul",{attrs:{"class":"chips-row"},style:o()({"flex-wrap":a.rowWrap?"wrap":"nowrap"},a.rowWrap&&{height:"auto"})},b.map(a.renderItem.bind(a)))}))])}},{key:"renderOffset",value:function(a){var b=this.refs.slider,c=b.offsetWidth*this.stepRatio*a,d=b.offsetLeft+c,e=void 0;"ltr"===this.direction&&(e=d>0?0:d<b.offsetWidth-b.scrollWidth?b.offsetWidth-b.scrollWidth:d),"rtl"===this.direction&&(e=0>d?0:d<b.scrollWidth-b.offsetWidth?d:b.scrollWidth-b.offsetWidth);var f=Math.round(e);b.style.left=f+"px",this.renderNav(e)}},{key:"renderNav",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=this.refs.slider,c=this.refs.navLeft,d=this.refs.navRight;"ltr"===this.direction&&(this.rowWrap||0===a?c.style.visibility="hidden":c.style.visibility="visible",this.rowWrap||a<=b.offsetWidth-b.scrollWidth?d.style.visibility="hidden":d.style.visibility="visible"),"rtl"===this.direction&&(!this.rowWrap&&a<b.scrollWidth-b.offsetWidth?c.style.visibility="visible":c.style.visibility="hidden",!this.rowWrap&&a>0?d.style.visibility="visible":d.style.visibility="hidden")}},{key:"renderItem",value:function(){throw new Error("abstract method not implemented!")}}]),a}(),v=function(a){function b(){return q()(this,b),k()(this,(b.__proto__||i()(b)).apply(this,arguments))}return m()(b,a),s()(b,[{key:"renderItem",value:function(a){var b=this,d=a.title,f=a.tooltip,h=a.style,i=void 0===h?{}:h,j=a.accessibility,k=void 0===j?{web:{}}:j,l=a.click,m=this.itemCharLimit,n="string"==typeof d&&d.length>m;return c.i(t.d)("li",{attrs:{"class":"chips-item-container"},style:{"margin-top":this.rowWrap?"10px":0}},[c.i(t.d)("button",{attrs:o()({"class":"chips-item"},k.web),domProps:o()({},"string"==typeof d&&{textContent:n?""+d.substr(0,m):d},"string"==typeof f&&{title:f}),style:o()({},"string"==typeof i.color&&{color:i.color},"string"==typeof i["background-color"]&&{backgroundColor:i["background-color"]},"string"==typeof i["border-color"]&&{borderColor:i["border-color"]},"string"==typeof i["color-hover"]&&{colorHover:i["color-hover"]},"string"==typeof i["background-color-hover"]&&{backgroundColorHover:i["background-color-hover"]},"string"==typeof i["border-color-hover"]&&{borderColorHover:i["border-color-hover"]},g()(i["border-radius"])&&{borderRadius:i["border-radius"]+"px"},i.bold&&{fontWeight:"bold"},i.italic&&{fontStyle:"italic"},i["font-family"]&&{fontFamily:i["font-family"]},-1!==["small","medium","large"].indexOf(i.size)&&{fontSize:{small:"10px",medium:"12px",large:"15px"}[i.size]}),on:o()({},l&&{click:function(a){if(b.isReadOnly)return void a.preventDefault();l.actions.forEach(function(a){return b.events.dispatch("action:"+a.type,{action:a,metadata:l.metadata})});return void 0},focus:function(a){var d=a.target,e=b.refs.wrapper;if(e.scrollLeft=0,c.i(t.e)(d,e)){var f=c.i(t.f)(d,e,b.stepRatio);b.renderOffset(f)}}},{mouseenter:function(a){b.setHoverStyle(a.target,i,!0)},mouseleave:function(a){b.setHoverStyle(a.target,i,!1)}})})],[].concat(e()(n&&[c.i(t.d)("span",{domProps:{innerHTML:"&hellip;"}})])))}},{key:"setHoverStyle",value:function(a,b,c){c?(a.style.backgroundColor=b["background-color-hover"],a.style.color=b["color-hover"],a.style.borderColor=b["border-color-hover"]):(a.style.backgroundColor=b["background-color"]||"",a.style.color=b.color||"",a.style.borderColor=b["border-color"]||"")}}]),b}(u);b.a={StructuredContentButton:v}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(67),e=(c.n(d),c(66));b["default"]=e.a},function(a,b,c){a.exports={"default":c(85),__esModule:!0}},function(a,b,c){a.exports={"default":c(86),__esModule:!0}},function(a,b,c){a.exports={"default":c(87),__esModule:!0}},function(a,b,c){a.exports={"default":c(88),__esModule:!0}},function(a,b,c){a.exports={"default":c(89),__esModule:!0}},function(a,b,c){a.exports={"default":c(91),__esModule:!0}},function(a,b,c){a.exports={"default":c(92),__esModule:!0}},function(a,b,c){a.exports={"default":c(93),__esModule:!0}},function(a,b,c){a.exports={"default":c(95),__esModule:!0}},function(a,b,c){a.exports={"default":c(96),__esModule:!0}},function(a,b,c){a.exports={"default":c(97),__esModule:!0}},function(a,b,c){"use strict";b.__esModule=!0;var d=c(44),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=e["default"]||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(74),f=d(e),g=c(73),h=d(g);b["default"]=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,i=h["default"](a);!(d=(g=i.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(f["default"](Object(b)))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(a,b,c){c(18),c(126),a.exports=c(0).Array.from},function(a,b,c){c(25),c(18),a.exports=c(124)},function(a,b,c){c(25),c(18),a.exports=c(125)},function(a,b,c){c(65),c(18),c(25),c(128),c(138),c(137),c(136),a.exports=c(0).Map},function(a,b,c){c(129),a.exports=c(0).Number.isInteger},function(a,b,c){c(130),a.exports=c(0).Object.assign},function(a,b,c){c(131);var d=c(0).Object;a.exports=function(a,b){return d.create(a,b)}},function(a,b,c){c(132);var d=c(0).Object;a.exports=function(a,b,c){return d.defineProperty(a,b,c)}},function(a,b,c){c(139),a.exports=c(0).Object.entries},function(a,b,c){c(133),a.exports=c(0).Object.getPrototypeOf},function(a,b,c){c(134),a.exports=c(0).Object.setPrototypeOf},function(a,b,c){c(135),c(65),c(140),c(141),a.exports=c(0).Symbol},function(a,b,c){c(18),c(25),a.exports=c(41).f("iterator")},function(a,b){a.exports=function(){}},function(a,b,c){var d=c(19);a.exports=function(a,b){var c=[];return d(a,!1,c.push,c,b),c}},function(a,b,c){var d=c(12),e=c(23),f=c(123);a.exports=function(a){return function(b,c,g){var h,i=d(b),j=e(i.length),k=f(g,j);if(a&&c!=c){for(;j>k;)if((h=i[k++])!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===c)return a||k||0;return!a&&-1}}},function(a,b,c){var d=c(9),e=c(32),f=c(14),g=c(23),h=c(103);a.exports=function(a,b){var c=1==a,i=2==a,j=3==a,k=4==a,l=6==a,m=5==a||l,n=b||h;return function(b,h,o){for(var p,q,r=f(b),s=e(r),t=d(h,o,3),u=g(s.length),v=0,w=c?n(b,u):i?n(b,0):void 0;u>v;v++)if((m||v in s)&&(p=s[v],q=t(p,v,r),a))if(c)w[v]=q;else if(q)switch(a){case 3:return!0;case 5:return p;case 6:return v;case 2:w.push(p)}else if(k)return!1;return l?-1:j||k?k:w}}},function(a,b,c){var d=c(6),e=c(55),f=c(2)("species");a.exports=function(a){var b;return e(a)&&(b=a.constructor,"function"!=typeof b||b!==Array&&!e(b.prototype)||(b=void 0),d(b)&&null===(b=b[f])&&(b=void 0)),void 0===b?Array:b}},function(a,b,c){var d=c(102);a.exports=function(a,b){return new(d(a))(b)}},function(a,b,c){"use strict";var d=c(4).f,e=c(21),f=c(62),g=c(9),h=c(51),i=c(19),j=c(33),k=c(57),l=c(121),m=c(3),n=c(34).fastKey,o=c(64),p=m?"_s":"size",q=function(a,b){var c,d=n(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};a.exports={getConstructor:function(a,b,c,j){var k=a(function(a,d){h(a,k,b,"_i"),a._t=b,a._i=e(null),a._f=void 0,a._l=void 0,a[p]=0,void 0!=d&&i(d,c,a[j],a)});return f(k.prototype,{clear:function(){for(var a=o(this,b),c=a._i,d=a._f;d;d=d.n)d.r=!0,d.p&&(d.p=d.p.n=void 0),delete c[d.i];a._f=a._l=void 0,a[p]=0},"delete":function(a){var c=o(this,b),d=q(c,a);if(d){var e=d.n,f=d.p;delete c._i[d.i],d.r=!0,f&&(f.n=e),e&&(e.p=f),c._f==d&&(c._f=e),c._l==d&&(c._l=f),c[p]--}return!!d},forEach:function(a){o(this,b);for(var c,d=g(a,arguments.length>1?arguments[1]:void 0,3);c=c?c.n:this._f;)for(d(c.v,c.k,this);c&&c.r;)c=c.p},has:function(a){return!!q(o(this,b),a)}}),m&&d(k.prototype,"size",{get:function(){return o(this,b)[p]}}),k},def:function(a,b,c){var d,e,f=q(a,b);return f?f.v=c:(a._l=f={i:e=n(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[p]++,"F"!==e&&(a._i[e]=f)),a},getEntry:q,setStrong:function(a,b,c){j(a,b,function(a,c){this._t=o(a,b),this._k=c,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?k(0,c.k):"values"==b?k(0,c.v):k(0,[c.k,c.v]):(a._t=void 0,k(1))},c?"entries":"values",!c,!0),l(b)}}},function(a,b,c){var d=c(28),e=c(99);a.exports=function(a){return function(){if(d(this)!=a)throw TypeError(a+"#toJSON isn't generic");return e(this)}}},function(a,b,c){"use strict";var d=c(5),e=c(1),f=c(34),g=c(10),h=c(8),i=c(62),j=c(19),k=c(51),l=c(6),m=c(22),n=c(4).f,o=c(101)(0),p=c(3);a.exports=function(a,b,c,q,r,s){var t=d[a],u=t,v=r?"set":"add",w=u&&u.prototype,x={};return p&&"function"==typeof u&&(s||w.forEach&&!g(function(){(new u).entries().next()}))?(u=b(function(b,c){k(b,u,a,"_c"),b._c=new t,void 0!=c&&j(c,r,b[v],b)}),o("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(a){var b="add"==a||"set"==a;a in w&&(!s||"clear"!=a)&&h(u.prototype,a,function(c,d){if(k(this,u,a),!b&&s&&!l(c))return"get"==a&&void 0;var e=this._c[a](0===c?0:c,d);return b?this:e})}),s||n(u.prototype,"size",{get:function(){return this._c.size}})):(u=q.getConstructor(b,a,r,v),i(u.prototype,c),f.NEED=!0),m(u,a),x[a]=u,e(e.G+e.W+e.F,x),s||q.setStrong(u,a,r),u}},function(a,b,c){"use strict";var d=c(4),e=c(17);a.exports=function(a,b,c){b in a?d.f(a,b,e(0,c)):a[b]=c}},function(a,b,c){var d=c(15),e=c(35),f=c(16);a.exports=function(a){var b=d(a),c=e.f;if(c)for(var g,h=c(a),i=f.f,j=0;h.length>j;)i.call(a,g=h[j++])&&b.push(g);return b}},function(a,b,c){var d=c(5).document;a.exports=d&&d.documentElement},function(a,b,c){var d=c(6),e=Math.floor;a.exports=function(a){return!d(a)&&isFinite(a)&&e(a)===a}},function(a,b,c){"use strict";var d=c(21),e=c(17),f=c(22),g={};c(8)(g,c(2)("iterator"),function(){return this}),a.exports=function(a,b,c){a.prototype=d(g,{next:e(1,c)}),f(a,b+" Iterator")}},function(a,b,c){var d=c(2)("iterator"),e=!1;try{var f=[7][d]();f["return"]=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}a.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}},function(a,b,c){"use strict";var d=c(3),e=c(15),f=c(35),g=c(16),h=c(14),i=c(32),j=Object.assign;a.exports=!j||c(10)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=j({},a)[c]||Object.keys(j({},b)).join("")!=d})?function(a,b){for(var c=h(a),j=arguments.length,k=1,l=f.f,m=g.f;j>k;)for(var n,o=i(arguments[k++]),p=l?e(o).concat(l(o)):e(o),q=p.length,r=0;q>r;)n=p[r++],
d&&!m.call(o,n)||(c[n]=o[n]);return c}:j},function(a,b,c){var d=c(4),e=c(7),f=c(15);a.exports=c(3)?Object.defineProperties:function(a,b){e(a);for(var c,g=f(b),h=g.length,i=0;h>i;)d.f(a,c=g[i++],b[c]);return a}},function(a,b,c){var d=c(12),e=c(59).f,f={}.toString,g="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],h=function(a){try{return e(a)}catch(a){return g.slice()}};a.exports.f=function(a){return g&&"[object Window]"==f.call(a)?h(a):e(d(a))}},function(a,b,c){var d=c(1),e=c(0),f=c(10);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){var d=c(3),e=c(15),f=c(12),g=c(16).f;a.exports=function(a){return function(b){for(var c,h=f(b),i=e(h),j=i.length,k=0,l=[];j>k;)c=i[k++],d&&!g.call(h,c)||l.push(a?[c,h[c]]:h[c]);return l}}},function(a,b,c){"use strict";var d=c(1),e=c(50),f=c(9),g=c(19);a.exports=function(a){d(d.S,a,{from:function(a){var b,c,d,h,i=arguments[1];return e(this),b=void 0!==i,b&&e(i),void 0==a?new this:(c=[],b?(d=0,h=f(i,arguments[2],2),g(a,!1,function(a){c.push(h(a,d++))})):g(a,!1,c.push,c),new this(c))}})}},function(a,b,c){"use strict";var d=c(1);a.exports=function(a){d(d.S,a,{of:function(){for(var a=arguments.length,b=new Array(a);a--;)b[a]=arguments[a];return new this(b)}})}},function(a,b,c){var d=c(6),e=c(7),f=function(a,b){if(e(a),!d(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};a.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,b,d){try{d=c(9)(Function.call,c(58).f(Object.prototype,"__proto__").set,2),d(a,[]),b=!(a instanceof Array)}catch(a){b=!0}return function(a,c){return f(a,c),b?a.__proto__=c:d(a,c),a}}({},!1):void 0),check:f}},function(a,b,c){"use strict";var d=c(5),e=c(0),f=c(4),g=c(3),h=c(2)("species");a.exports=function(a){var b="function"==typeof e[a]?e[a]:d[a];g&&b&&!b[h]&&f.f(b,h,{configurable:!0,get:function(){return this}})}},function(a,b,c){var d=c(38),e=c(30);a.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return 0>i||i>=j?a?"":void 0:(f=h.charCodeAt(i),55296>f||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):g-56320+(f-55296<<10)+65536)}}},function(a,b,c){var d=c(38),e=Math.max,f=Math.min;a.exports=function(a,b){return a=d(a),0>a?e(a+b,0):f(a,b)}},function(a,b,c){var d=c(7),e=c(42);a.exports=c(0).getIterator=function(a){var b=e(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return d(b.call(a))}},function(a,b,c){var d=c(28),e=c(2)("iterator"),f=c(13);a.exports=c(0).isIterable=function(a){var b=Object(a);return void 0!==b[e]||"@@iterator"in b||f.hasOwnProperty(d(b))}},function(a,b,c){"use strict";var d=c(9),e=c(1),f=c(14),g=c(56),h=c(54),i=c(23),j=c(107),k=c(42);e(e.S+e.F*!c(112)(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,l,m=f(a),n="function"==typeof this?this:Array,o=arguments.length,p=o>1?arguments[1]:void 0,q=void 0!==p,r=0,s=k(m);if(q&&(p=d(p,o>2?arguments[2]:void 0,2)),void 0==s||n==Array&&h(s))for(b=i(m.length),c=new n(b);b>r;r++)j(c,r,q?p(m[r],r):m[r]);else for(l=s.call(m),c=new n;!(e=l.next()).done;r++)j(c,r,q?g(l,p,[e.value,r],!0):e.value);return c.length=r,c}})},function(a,b,c){"use strict";var d=c(98),e=c(57),f=c(13),g=c(12);a.exports=c(33)(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},function(a,b,c){"use strict";var d=c(104),e=c(64);a.exports=c(106)("Map",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){var b=d.getEntry(e(this,"Map"),a);return b&&b.v},set:function(a,b){return d.def(e(this,"Map"),0===a?0:a,b)}},d,!0)},function(a,b,c){var d=c(1);d(d.S,"Number",{isInteger:c(110)})},function(a,b,c){var d=c(1);d(d.S+d.F,"Object",{assign:c(113)})},function(a,b,c){var d=c(1);d(d.S,"Object",{create:c(21)})},function(a,b,c){var d=c(1);d(d.S+d.F*!c(3),"Object",{defineProperty:c(4).f})},function(a,b,c){var d=c(14),e=c(60);c(116)("getPrototypeOf",function(){return function(a){return e(d(a))}})},function(a,b,c){var d=c(1);d(d.S,"Object",{setPrototypeOf:c(120).set})},function(a,b,c){"use strict";var d=c(5),e=c(11),f=c(3),g=c(1),h=c(63),i=c(34).KEY,j=c(10),k=c(37),l=c(22),m=c(24),n=c(2),o=c(41),p=c(40),q=c(108),r=c(55),s=c(7),t=c(6),u=c(14),v=c(12),w=c(39),x=c(17),y=c(21),z=c(115),A=c(58),B=c(35),C=c(4),D=c(15),E=A.f,F=C.f,G=z.f,H=d.Symbol,I=d.JSON,J=I&&I.stringify,K=n("_hidden"),L=n("toPrimitive"),M={}.propertyIsEnumerable,N=k("symbol-registry"),O=k("symbols"),P=k("op-symbols"),Q=Object.prototype,R="function"==typeof H&&!!B.f,S=d.QObject,T=!S||!S.prototype||!S.prototype.findChild,U=f&&j(function(){return 7!=y(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=E(Q,b);d&&delete Q[b],F(a,b,c),d&&a!==Q&&F(Q,b,d)}:F,V=function(a){var b=O[a]=y(H.prototype);return b._k=a,b},W=R&&"symbol"==typeof H.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof H},X=function(a,b,c){return a===Q&&X(P,b,c),s(a),b=w(b,!0),s(c),e(O,b)?(c.enumerable?(e(a,K)&&a[K][b]&&(a[K][b]=!1),c=y(c,{enumerable:x(0,!1)})):(e(a,K)||F(a,K,x(1,{})),a[K][b]=!0),U(a,b,c)):F(a,b,c)},Y=function(a,b){s(a);for(var c,d=q(b=v(b)),e=0,f=d.length;f>e;)X(a,c=d[e++],b[c]);return a},Z=function(a,b){return void 0===b?y(a):Y(y(a),b)},$=function(a){var b=M.call(this,a=w(a,!0));return!(this===Q&&e(O,a)&&!e(P,a))&&(!(b||!e(this,a)||!e(O,a)||e(this,K)&&this[K][a])||b)},_=function(a,b){if(a=v(a),b=w(b,!0),a!==Q||!e(O,b)||e(P,b)){var c=E(a,b);return!c||!e(O,b)||e(a,K)&&a[K][b]||(c.enumerable=!0),c}},aa=function(a){for(var b,c=G(v(a)),d=[],f=0;c.length>f;)e(O,b=c[f++])||b==K||b==i||d.push(b);return d},ba=function(a){for(var b,c=a===Q,d=G(c?P:v(a)),f=[],g=0;d.length>g;)!e(O,b=d[g++])||c&&!e(Q,b)||f.push(O[b]);return f};R||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor!");var a=m(arguments.length>0?arguments[0]:void 0),b=function(c){this===Q&&b.call(P,c),e(this,K)&&e(this[K],a)&&(this[K][a]=!1),U(this,a,x(1,c))};return f&&T&&U(Q,a,{configurable:!0,set:b}),V(a)},h(H.prototype,"toString",function(){return this._k}),A.f=_,C.f=X,c(59).f=z.f=aa,c(16).f=$,B.f=ba,f&&!c(20)&&h(Q,"propertyIsEnumerable",$,!0),o.f=function(a){return V(n(a))}),g(g.G+g.W+g.F*!R,{Symbol:H});for(var ca="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),da=0;ca.length>da;)n(ca[da++]);for(var ea=D(n.store),fa=0;ea.length>fa;)p(ea[fa++]);g(g.S+g.F*!R,"Symbol",{"for":function(a){return e(N,a+="")?N[a]:N[a]=H(a)},keyFor:function(a){if(!W(a))throw TypeError(a+" is not a symbol!");for(var b in N)if(N[b]===a)return b},useSetter:function(){T=!0},useSimple:function(){T=!1}}),g(g.S+g.F*!R,"Object",{create:Z,defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:_,getOwnPropertyNames:aa,getOwnPropertySymbols:ba});var ga=j(function(){B.f(1)});g(g.S+g.F*ga,"Object",{getOwnPropertySymbols:function(a){return B.f(u(a))}}),I&&g(g.S+g.F*(!R||j(function(){var a=H();return"[null]"!=J([a])||"{}"!=J({a:a})||"{}"!=J(Object(a))})),"JSON",{stringify:function(a){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);return c=b=d[1],!t(b)&&void 0===a||W(a)?void 0:(r(b)||(b=function(a,b){return"function"==typeof c&&(b=c.call(this,a,b)),W(b)?void 0:b}),d[1]=b,J.apply(I,d))}}),H.prototype[L]||c(8)(H.prototype,L,H.prototype.valueOf),l(H,"Symbol"),l(Math,"Math",!0),l(d.JSON,"JSON",!0)},function(a,b,c){c(118)("Map")},function(a,b,c){c(119)("Map")},function(a,b,c){var d=c(1);d(d.P+d.R,"Map",{toJSON:c(105)("Map")})},function(a,b,c){var d=c(1),e=c(117)(!0);d(d.S,"Object",{entries:function(a){return e(a)}})},function(a,b,c){c(40)("asyncIterator")},function(a,b,c){c(40)("observable")}])}).call(window.lpTag);window.lpTag=window.lpTag||{};(function(){this.lpTelInput=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=b.lpTelInput=b.v=void 0,c(1),c(2);var d,e=(d=c(3))&&d.__esModule?d:{"default":d};b.v="2.0.3";var f=function(a,b){return new e["default"](a,b)};b.lpTelInput=f;var g=f;b["default"]=g},function(a,b,c){},function(a,b){!function(){"use strict";!function(){function a(a,b){var c=Array.prototype.slice.call(b);return c.push(ha),a.apply(this,c)}function b(a,b){a=a.split("-"),b=b.split("-");for(var c=a[0].split("."),d=b[0].split("."),e=0;3>e;e++){var f=Number(c[e]),g=Number(d[e]);if(f>g)return 1;if(g>f)return-1;if(!isNaN(f)&&isNaN(g))return 1;if(isNaN(f)&&!isNaN(g))return-1}return a[1]&&b[1]?a[1]>b[1]?1:a[1]<b[1]?-1:0:!a[1]&&b[1]?1:a[1]&&!b[1]?-1:0}function c(a){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function f(a,b,c){return b&&e(a.prototype,b),c&&e(a,c),a}function g(a,b){switch(b){case"FIXED_LINE":return a[0];case"MOBILE":return a[1];case"TOLL_FREE":return a[2];case"PREMIUM_RATE":return a[3];case"PERSONAL_NUMBER":return a[4];case"VOICEMAIL":return a[5];case"UAN":return a[6];case"PAGER":return a[7];case"VOIP":return a[8];case"SHARED_COST":return a[9]}}function h(a,b){if((b=new na(b)).hasCountry(a))return b.country(a).countryCallingCode();throw new Error("Unknown country: ".concat(a))}function i(a){var c=a.version;"number"==typeof c?(this.v1=1===c,this.v2=2===c,this.v3=3===c,this.v4=4===c):c?-1===b(c,"1.2.0")?this.v2=!0:-1===b(c,"1.7.35")?this.v3=!0:this.v4=!0:this.v1=!0}function j(a){return";ext="+ua("20")+"|[ \\t,]*(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)[:\\.]?[ \\t,-]*"+ua("20")+"#?|[ \\t,]*(?:[x#~]|int|)[:\\.]?[ \\t,-]*"+ua("9")+"#?|[- ]+"+ua("6")+"#|[ \\t]*(?:,{2}|;)[:\\.]?[ \\t,-]*"+ua("15")+"#?|[ \\t]*(?:,)+[:\\.]?[ \\t,-]*"+ua("9")+"#?"}function k(a){return a.length>=2&&ya.test(a)}function l(a){return Aa[a]}function m(a){var b="",c=a.split(""),d=Array.isArray(c),e=0;for(c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if((e=c.next()).done)break;f=e.value}var g=l(f);g&&(b+=g)}return b}function n(a){var b="",c=a.split(""),d=Array.isArray(c),e=0;for(c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if((e=c.next()).done)break;f=e.value}b+=o(f,b)||""}return b}function o(a,b){if("+"===a){if(b)return;return"+"}return l(a)}function p(a,b){return function c(a,b,d){var e=d.type(b),f=e&&e.possibleLengths()||d.possibleLengths();if(!f)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===b){if(!d.type("FIXED_LINE"))return c(a,"MOBILE",d);var g=d.type("MOBILE");g&&(f=function(a,b){var c=a.slice(),d=b,e=Array.isArray(d),f=0;for(d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if((f=d.next()).done)break;g=f.value}var h=g;a.indexOf(h)<0&&c.push(h)}return c.sort(function(a,b){return a-b})}(f,g.possibleLengths()))}else if(b&&!e)return"INVALID_LENGTH";var h=a.length,i=f[0];return i===h?"IS_POSSIBLE":i>h?"TOO_SHORT":f[f.length-1]<h?"TOO_LONG":f.indexOf(h,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}(a,void 0,b)}function q(a,b){return"IS_POSSIBLE"===p(a,b)}function r(a,b){return a=a||"",new RegExp("^(?:"+b+")$").test(a)}function s(a,b,c){if(b=b||{},a.country){(c=new na(c)).selectNumberingPlan(a.country,a.countryCallingCode);var d=b.v2?a.nationalNumber:a.phone;if(r(d,c.nationalNumberPattern())){if(t(d,"FIXED_LINE",c))return c.type("MOBILE")&&""===c.type("MOBILE").pattern()?"FIXED_LINE_OR_MOBILE":c.type("MOBILE")?t(d,"MOBILE",c)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE";for(var e=0,f=Ba;e<f.length;e++){var g=f[e];if(t(d,g,c))return g}}}}function t(a,b,c){return!(!(b=c.type(b))||!b.pattern())&&!(b.possibleLengths()&&b.possibleLengths().indexOf(a.length)<0)&&r(a,b.pattern())}function u(a){return a.replace(new RegExp("[".concat(ja,"]+"),"g")," ").trim()}function v(a,b,c){var d=c.useInternationalFormat,e=c.withNationalPrefix,f=(c.carrierCode,c.metadata,a.replace(new RegExp(b.pattern()),d?b.internationalFormat():e&&b.nationalPrefixFormattingRule()?b.format().replace(Ca,b.nationalPrefixFormattingRule()):b.format()));return d?u(f):f}function w(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function x(a,b,c,d,e){var f=function(a,b){var c=a,d=Array.isArray(c),e=0;for(c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if((e=c.next()).done)break;f=e.value}var g=f;if(g.leadingDigitsPatterns().length>0){var h=g.leadingDigitsPatterns()[g.leadingDigitsPatterns().length-1];if(0!==b.search(h))continue}if(r(b,g.pattern()))return g}}(d.formats(),a);return f?v(a,f,{useInternationalFormat:"INTERNATIONAL"===c,withNationalPrefix:!f.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!e||!1!==e.nationalPrefix,carrierCode:b,metadata:d}):a}function y(a,b,c,d){return b?d(a,b,c):a}function z(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function A(a,b,c,d){if(b){var e=new na(d);e.selectNumberingPlan(b,c);var f=new RegExp(e.IDDPrefix());if(0===a.search(f)){var g=(a=a.slice(a.match(f)[0].length)).match(Ha);if(!(g&&null!=g[1]&&g[1].length>0&&"0"===g[1]))return a}}}function B(a,b){if(a&&b.numberingPlan.nationalPrefixForParsing()){var c=new RegExp("^(?:"+b.numberingPlan.nationalPrefixForParsing()+")"),d=c.exec(a);if(d){var e,f,g,h=d.length-1,i=h>0&&d[h];if(b.nationalPrefixTransformRule()&&i)e=a.replace(c,b.nationalPrefixTransformRule()),h>1&&(f=d[1]);else{var j=d[0];e=a.slice(j.length),i&&(f=d[1])}if(i){var k=a.indexOf(d[1]);a.slice(0,k)===b.numberingPlan.nationalPrefix()&&(g=b.numberingPlan.nationalPrefix())}else g=d[0];return{nationalNumber:e,nationalPrefix:g,carrierCode:f}}}return{nationalNumber:a}}function C(a,b){var c=B(a,b),d=c.nationalNumber,e=c.carrierCode;if(!function(a,b,c){return!(r(a,c.nationalNumberPattern())&&!r(b,c.nationalNumberPattern()))}(a,d,b))return{nationalNumber:a};if(a.length!==d.length+(e?e.length:0)&&b.possibleLengths())switch(p(d,b)){case"TOO_SHORT":case"INVALID_LENGTH":return{nationalNumber:a}}return{nationalNumber:d,carrierCode:e}}function D(a,b,c,d){var e=b?h(b,d):c;if(0===a.indexOf(e)){(d=new na(d)).selectNumberingPlan(b,c);var f=a.slice(e.length),g=C(f,d).nationalNumber,i=C(a,d).nationalNumber;if(!r(i,d.nationalNumberPattern())&&r(g,d.nationalNumberPattern())||"TOO_LONG"===p(i,d))return{countryCallingCode:e,number:f}}return{number:a}}function E(a,b,c,d){if(!a)return{};if("+"!==a[0]){var e=A(a,b,c,d);if(!e||e===a){if(b||c){var f=D(a,b,c,d),g=f.countryCallingCode,h=f.number;if(g)return{countryCallingCode:g,number:h}}return{number:a}}a="+"+e}if("0"===a[1])return{};d=new na(d);for(var i=2;3>=i-1&&i<=a.length;){var j=a.slice(1,i);if(d.hasCallingCode(j))return d.selectNumberingPlan(j),{countryCallingCode:j,number:a.slice(i)};i++}return{}}function F(a,b,c){var d=c.getCountryCodesForCallingCode(a);return d?1===d.length?d[0]:function(a,b,c){c=new na(c);var d=a,e=Array.isArray(d),f=0;for(d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if((f=d.next()).done)break;g=f.value}var h=g;if(c.country(h),c.leadingDigits()){if(b&&0===b.search(c.leadingDigits()))return h}else if(s({phone:b,country:h},void 0,c.metadata))return h}}(d,b,c.metadata):void 0}function G(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function H(a,b,c){return function(a,b,c){if(b=b||{},c=new na(c),b.defaultCountry&&!c.hasCountry(b.defaultCountry)){if(b.v2)throw new ka("INVALID_COUNTRY");throw new Error("Unknown country: ".concat(b.defaultCountry))}var d=function(a,b,c){if(a&&0===a.indexOf("tel:"))return function(a){var b,c,d,e=(a=a.replace(/^tel:/,"tel=")).split(";"),f=Array.isArray(e),g=0;for(e=f?e:e[Symbol.iterator]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{if((g=e.next()).done)break;h=g.value}var i=function(a){return Array.isArray(a)?a:void 0}(d=h.split("="))||function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),2!==c.length);d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}(d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),j=i[0],l=i[1];switch(j){case"tel":b=l;break;case"ext":c=l;break;case"phone-context":"+"===l[0]&&(b=l+b)}}if(!k(b))return{};var m={number:b};return c&&(m.ext=c),m}(a);var d=function(a,b,c){if(a)if(a.length>250){if(c)throw new ka("TOO_LONG")}else{if(!1===b)return a;var d=a.search(Ia);if(!(0>d))return a.slice(d).replace(Ja,"")}}(a,c,b);if(!d)return{};if(!k(d))return function(a){return wa.test(a)}(d)?{error:"TOO_SHORT"}:{};var e=function(a){var b=a.search(za);if(0>b)return{};for(var c=a.slice(0,b),d=a.match(za),e=1;e<d.length;){if(d[e])return{number:c,ext:d[e]};e++}}(d);return e.ext?e:{number:d}}(a,b.v2,b.extract),e=d.number,f=d.ext,g=d.error;if(!e){if(b.v2){if("TOO_SHORT"===g)throw new ka("TOO_SHORT");throw new ka("NOT_A_NUMBER")}return{}}var i=function(a,b,c,d){var e,f=E(n(a),b,c,d.metadata),g=f.countryCallingCode,i=f.number;if(g)d.selectNumberingPlan(g);else{if(!i||!b&&!c)return{};d.selectNumberingPlan(b,c),b&&(e=b),g=c||h(b,d.metadata)}if(!i)return{countryCallingCode:g};var j=C(n(i),d),k=j.nationalNumber,l=j.carrierCode,m=F(g,k,d);return m&&(e=m,"001"===m||d.country(e)),{country:e,countryCallingCode:g,nationalNumber:k,carrierCode:l}}(e,b.defaultCountry,b.defaultCallingCode,c),j=i.country,l=i.nationalNumber,m=i.countryCallingCode,o=i.carrierCode;if(!c.hasSelectedNumberingPlan()){if(b.v2)throw new ka("INVALID_COUNTRY");return{}}if(!l||l.length<2){if(b.v2)throw new ka("TOO_SHORT");return{}}if(l.length>17){if(b.v2)throw new ka("TOO_LONG");return{}}if(b.v2){var p=new Fa(m,l,c.metadata);return j&&(p.country=j),o&&(p.carrierCode=o),f&&(p.ext=f),p}var s=!!(b.extended?c.hasSelectedNumberingPlan():j)&&r(l,c.nationalNumberPattern());return b.extended?{country:j,countryCallingCode:m,carrierCode:o,valid:s,possible:!!s||!(!0!==b.extended||!c.possibleLengths()||!q(l,c)),phone:l,ext:f}:s?function(a,b,c){var d={country:a,phone:b};return c&&(d.ext=c),d}(j,l,f):{}}(a,function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){G(a,b,c[b])})}return a}({},b,{v2:!0}),c)}function I(a){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function J(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function K(){var a=L(arguments),b=a.text,c=a.options,d=a.metadata;return H(b,c,d)}function L(a){var b,c,d,e,f=function(a){return Array.isArray(a)?a:void 0}(e=Array.prototype.slice.call(a))||function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),4!==c.length);d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),g=f[0],h=f[1],i=f[2],j=f[3];if("string"!=typeof g)throw new TypeError("A text for parsing must be a string.");if(b=g,h&&"string"!=typeof h){if(!Ka(h))throw new Error("Invalid second argument: ".concat(h));i?(c=h,d=i):d=h}else j?(c=i,d=j):(c=void 0,d=i),h&&(c=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){J(a,b,c[b])})}return a}({defaultCountry:h},c));return{text:b,options:c,metadata:d}}function M(){return a(K,arguments)}function N(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function O(a,b,c){b&&b.defaultCountry&&!function(a,b){return void 0!==b.countries[a]}(b.defaultCountry,c)&&(b=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){N(a,b,c[b])})}return a}({},b,{defaultCountry:void 0}));try{return H(a,b,c)}catch(a){if(!(a instanceof ka))throw a}}function P(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){Q(a,b,c[b])})}return a}function Q(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function R(){var a=L(arguments),b=a.text,c=a.options,d=a.metadata,e=O(b,c=P({},c,{extract:!1}),d);return e&&e.isPossible()||!1}function S(a,b,c){return b[a]?new Fa(a,b[a],c):void 0}function T(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){U(a,b,c[b])})}return a}function U(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function V(){var a=L(arguments),b=a.text,c=a.options,d=a.metadata;c=T({},c,{extract:!1});try{var e=H(b,c,d);(d=new na(d)).selectNumberingPlan(e.countryCallingCode);var f=p(e.nationalNumber,d);if("IS_POSSIBLE"!==f)return f}catch(a){if(a instanceof ka)return a.message;throw a}}function W(a,b){if(1>b)return"";for(var c="";b>1;)1&b&&(c+=a),b>>=1,a+=a;return c+a}function X(a,b){return")"===a[b]&&b++,function(a){for(var b=[],c=0;c<a.length;)"("===a[c]?b.push(c):")"===a[c]&&b.pop(),c++;var d=0,e="";b.push(a.length);for(var f=0,g=b;f<g.length;f++){var h=g[f];e+=a.slice(d,h),d=h+1}return e}(a.slice(0,b))}function Y(a,b,c){var d=c.metadata,e=c.shouldTryNationalPrefixFormattingRule,f=c.getSeparatorAfterNationalPrefix;return new RegExp("^(?:".concat(b.pattern(),")$")).test(a.nationalSignificantNumber)?function(a,b,c){var d=c.metadata,e=c.shouldTryNationalPrefixFormattingRule,f=c.getSeparatorAfterNationalPrefix;if(a.nationalSignificantNumber,a.international,a.nationalPrefix,a.carrierCode,e(b)){var g=Z(a,b,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:f,metadata:d});if(g)return g}return Z(a,b,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:f,metadata:d})}(a,b,{metadata:d,shouldTryNationalPrefixFormattingRule:e,getSeparatorAfterNationalPrefix:f}):void 0}function Z(a,b,c){var d=c.metadata,e=c.useNationalPrefixFormattingRule,f=c.getSeparatorAfterNationalPrefix,g=v(a.nationalSignificantNumber,b,{carrierCode:a.carrierCode,useInternationalFormat:a.international,withNationalPrefix:e,metadata:d});return e||(a.nationalPrefix?g=a.nationalPrefix+f(b)+g:a.complexPrefixBeforeNationalSignificantNumber&&(g=a.complexPrefixBeforeNationalSignificantNumber+" "+g)),function(a,b){return m(a)===b.getNationalDigits()}(g,a)?g:void 0}function $(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function aa(a,b,c){return b&&_(a.prototype,b),c&&_(a,c),a}function ba(a,b,c){if("string"==typeof b){if(c&&a.length>b.length)return{overflow:!0};var d=a.join("");return 0===b.indexOf(d)?a.length===b.length?{match:!0,matchedChars:a}:{partialMatch:!0}:0===d.indexOf(b)?{match:!0,matchedChars:a.slice(0,b.length)}:void 0}if(Array.isArray(b)){for(var e=a.slice(),f=0;f<b.length;){var g=ba(e,b[f],c&&f===b.length-1);if(!g||g.overflow)return g;if(!g.match){if(g.partialMatch)return{partialMatch:!0};throw new Error("Unsupported match result:\n".concat(JSON.stringify(g,null,2)))}if(0===(e=e.slice(g.matchedChars.length)).length)return f===b.length-1?{match:!0,matchedChars:a}:{partialMatch:!0};f++}return c?{overflow:!0}:{match:!0,matchedChars:a.slice(0,a.length-e.length)}}switch(b.op){case"|":var h,i=b.args,j=Array.isArray(i),k=0;for(i=j?i:i[Symbol.iterator]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{if((k=i.next()).done)break;l=k.value}var m=ba(a,l,c);if(m){if(m.overflow)return m;if(m.match)return{match:!0,matchedChars:m.matchedChars};m.partialMatch&&(h=!0)}}return h?{partialMatch:!0}:void 0;case"[]":var n=b.args,o=Array.isArray(n),p=0;for(n=o?n:n[Symbol.iterator]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{if((p=n.next()).done)break;q=p.value}var r=q;if(a[0]===r)return 1===a.length?{match:!0,matchedChars:a}:c?{overflow:!0}:{match:!0,matchedChars:[r]}}return;default:throw new Error("Unsupported instruction tree: ".concat(b))}}function ca(a){for(var b=[],c=0;c<a.length;){if("-"===a[c]){if(0===c||c===a.length-1)throw new Error("Couldn't parse a one-of set pattern: ".concat(a));for(var d=a[c-1].charCodeAt(0)+1,e=a[c+1].charCodeAt(0)-1,f=d;e>=f;)b.push(String.fromCharCode(f)),f++}else b.push(a[c]);c++}return b}function da(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ea(a,b){return function(a){return Array.isArray(a)?a:void 0}(a)||function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function fa(a){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function ga(a){return $a.call(this,a,ia)}var ha={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([457]\\d{6})$","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2457]\\d{6})$","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],
AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"1|([267]\\d{6})$","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"0|(183[12])",0,0,0,[["(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[25689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[25689]"]]]],BL:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-24679]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([3-8]\\d{6})$","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}",[10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|74)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[12]|33|44|66|77|88)|622)[2-9]\\d{6}"],0,0,0,["600[2-9]\\d{6}"]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-3]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"0|(1(?:[12]\\d|79)\\d\\d)",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:(?:1\\d|[36])\\d{3}|9101)\\d{6}|[124-8]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1 $2",["[146][2-9]|[2578]"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["[39]"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:1\\d|2[02-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[05]\\d|[23]1|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-59]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-59]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[47]\\d{6}|76\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[0359])|(?:5[0-26-9]|[78][0-49])\\d\\d|6(?:[0-4]\\d\\d|50[0-24-69]))|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[0-278])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94|80\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"0|([25-9]\\d{5})$","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d\\d|606)\\d{5}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|1[0-24]|2[0-68]|3[1289]|4[0-24-9]|5[3-579]|6[0189]|7[08]|8[0-689]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"1|([3-9]\\d{6})$","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","9008\\d{3}|(?:[2-467]\\d\\d|862)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-489]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([25-8]\\d{5})$","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],
IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|55\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[38]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([0-24-8]\\d{5})$","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|(?:[235-8]\\d|99)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"0|(1001)"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:2|33|5\\d|77|88)\\d{7}|[4-6]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]","5(?:29|38)[89]0"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:29(?:[189][05]|2[29]|3[01])|38[89][05])\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|80|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[017]\\d|6[0-367]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"0|([24-9]\\d{6})$","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[57-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[57-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","670$1",0,"670"],MQ:["596","00","(?:69|80)\\d{7}|(?:59|97)6\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"1|([34]\\d{6})$","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:5|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["5"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[19]\\d|[23]1|77|88)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:(?:44|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[017]\\d|[235][1-9]|4[0-35-9]|6[0-46-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9])|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1[36-8]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","[2-57-9]\\d{5}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|[89]\\d{6,9}|1\\d{4,5}",[5,6,7,8,9,10],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-57-9]"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-579]|6[2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,0," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","6\\d{5}(?:\\d{2})?|8\\d{9}|[1-9]\\d{6}(?:\\d{2})?",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","(?:[45]|80\\d\\d)\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","[2-7]\\d{7}|800\\d{4}(?:\\d{2})?|2\\d{6}",[7,8,9],[["(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]]],RE:["262","00","9769\\d{5}|(?:26|[68]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,"26[23]|69|[89]"],RO:["40","00","(?:[2378]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","8000\\d{3}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-5]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["24|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6(?:0[5-7]|[1-35-9])|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|(5\\d{6})$","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"1|([2-479]\\d{6})$","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:00|[1-57-9]\\d)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],
TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-46-8]\\d{6})$","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[26-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["4[45][0-5]|5(?:0|6[37])|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]","4[45][0-5]|5(?:0|6(?:3[14-7]|7))|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["[3-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}",[10],[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["5(?:05(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|44))|82(?:2(?:0[0-3]|[268]2)|3(?:0[02]|33)|4(?:00|4[24]|65|82)|5(?:00|29|83)|6(?:00|66|82)|777|8(?:00|88)|9(?:00|9[89])))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[39]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[0179]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01579]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","4\\d{9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","(?:33|55|[679]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-578]\\d{6})$","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","80\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,"269|63"],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:005|[1-9]\\d\\d)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:005|[1-9]\\d\\d)\\d{5}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[0-36-9]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],0,0,0,0,0,0,[0,["[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|285\\d{9}|(?:[19]\\d|49)\\d{6}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["4"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[19]"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-3]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|3(?:2|47|7\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:(?:285\\d\\d|3(?:45|[69]\\d{3}))\\d|9[89])\\d{6}"]]],883:["883",0,"(?:210|370\\d\\d)\\d{7}|51\\d{7}(?:\\d{3})?",[9,10,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[35]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:210|(?:370[1-9]|51[013]0)\\d)\\d{7}|5100\\d{5}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}},ia=ha,ja="".concat("--").concat("/").concat(".").concat(" ").concat("()\\[\\]").concat("~"),ka=function cb(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,cb),this.name=this.constructor.name,this.message=a,this.stack=new Error(a).stack};(ka.prototype=Object.create(Error.prototype)).constructor=ka;var la=" ext. ",ma=/^\d+$/,na=function(){function a(b){d(this,a),function(a){if(!a)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!sa(a)||!sa(a.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(sa(a)?"an object of shape: { "+Object.keys(a).join(", ")+" }":"a "+ta(a)+": "+a,"."))}(b),this.metadata=b,i.call(this,b)}return f(a,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(a){return"001"!==a})}},{key:"getCountryMetadata",value:function(a){return this.metadata.countries[a]}},{key:"nonGeographic",value:function(){return this.v1||this.v2||this.v3?void 0:this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(a){return void 0!==this.getCountryMetadata(a)}},{key:"hasCallingCode",value:function(a){if(this.getCountryCodesForCallingCode(a))return!0;if(this.nonGeographic()){if(this.nonGeographic()[a])return!0}else{var b=this.countryCallingCodes()[a];if(b&&1===b.length&&"001"===b[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(a){return this.nonGeographic()?!!this.nonGeographic()[a]:!this.getCountryCodesForCallingCode(a)}},{key:"country",value:function(a){return this.selectNumberingPlan(a)}},{key:"selectNumberingPlan",value:function(a,b){if(a&&ma.test(a)&&(b=a,a=null),a&&"001"!==a){if(!this.hasCountry(a))throw new Error("Unknown country: ".concat(a));this.numberingPlan=new oa(this.getCountryMetadata(a),this)}else if(b){if(!this.hasCallingCode(b))throw new Error("Unknown calling code: ".concat(b));this.numberingPlan=new oa(this.getNumberingPlanMetadata(b),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(a){var b=this.countryCallingCodes()[a];if(b){if(1===b.length&&3===b[0].length)return;return b}}},{key:"getCountryCodeForCallingCode",value:function(a){var b=this.getCountryCodesForCallingCode(a);return b?b[0]:void 0}},{key:"getNumberingPlanMetadata",value:function(a){var b=this.getCountryCodeForCallingCode(a);if(b)return this.getCountryMetadata(b);if(this.nonGeographic()){var c=this.nonGeographic()[a];if(c)return c}else{var d=this.countryCallingCodes()[a];if(d&&1===d.length&&"001"===d[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(a){return this.numberingPlan.type(a)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(a){return this.selectNumberingPlan(a)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}]),a}(),oa=function(){function a(b,c){d(this,a),this.globalMetadataObject=c,this.metadata=b,i.call(this,c.metadata)}return f(a,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){return this.v1||this.v2?void 0:this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){return this.v1||this.v2?void 0:this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){return this.v1?void 0:this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(a){return a[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var a=this;return(this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[]).map(function(b){return new pa(b,a)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(a){return a[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return!(this.types()&&0===this.types().length||!this.types())}},{key:"type",value:function(a){return this.hasTypes()&&g(this.types(),a)?new ra(g(this.types(),a),this):void 0}},{key:"ext",value:function(){return this.v1||this.v2?la:this.metadata[13]||la}}]),a}(),pa=function(){function a(b,c){d(this,a),this._format=b,this.metadata=c}return f(a,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!(!this.nationalPrefixFormattingRule()||qa.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),a}(),qa=/^\(?\$1\)?$/,ra=function(){function a(b,c){d(this,a),this.type=b,this.metadata=c}return f(a,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){return this.metadata.v1?void 0:this.type[1]||this.metadata.possibleLengths()}}]),a}(),sa=function(a){return"object"===c(a)},ta=function(a){return c(a)},ua=function(a){return"([".concat("0-9---","]{1,").concat(a,"})")},va="[+]{0,1}(?:["+ja+"]*[0-9---]){3,}["+ja+"0-9---]*",wa=new RegExp("^[+]{0,1}(?:["+ja+"]*[0-9---]){1,2}$","i"),xa=va+"(?:"+j()+")?",ya=new RegExp("^[0-9---]{2}$|^"+xa+"$","i"),za=new RegExp("(?:"+j()+")$","i"),Aa={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"},Ba=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"],Ca=/(\$\d)/,Da=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/,Ea={formatExtension:function(a,b,c){return"".concat(a).concat(c.ext()).concat(b)}},Fa=function(){function a(b,c,d){if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),!b)throw new TypeError("`country` or `countryCallingCode` not passed");if(!c)throw new TypeError("`nationalNumber` not passed");if(!d)throw new TypeError("`metadata` not passed");var e=new na(d);Ga(b)&&(this.country=b,e.country(b),b=e.countryCallingCode()),this.countryCallingCode=b,this.nationalNumber=c,this.number="+"+this.countryCallingCode+this.nationalNumber,this.metadata=d}var b;return(b=[{key:"setExt",value:function(a){this.ext=a}},{key:"isPossible",value:function(){return function(a,b,c){if(void 0===b&&(b={}),c=new na(c),b.v2){if(!a.countryCallingCode)throw new Error("Invalid phone number object passed");c.selectNumberingPlan(a.countryCallingCode)}else{if(!a.phone)return!1;if(a.country){if(!c.hasCountry(a.country))throw new Error("Unknown country: ".concat(a.country));c.country(a.country)}else{if(!a.countryCallingCode)throw new Error("Invalid phone number object passed");c.selectNumberingPlan(a.countryCallingCode)}}if(c.possibleLengths())return q(a.phone||a.nationalNumber,c);if(a.countryCallingCode&&c.isNonGeographicCallingCode(a.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}(this,{v2:!0},this.metadata)}},{key:"isValid",value:function(){return function(a,b,c){return b=b||{},c=new na(c),!!a.country&&(c.selectNumberingPlan(a.country,a.countryCallingCode),c.hasTypes()?void 0!==s(a,b,c.metadata):r(b.v2?a.nationalNumber:a.phone,c.nationalNumberPattern()))}(this,{v2:!0},this.metadata)}},{key:"isNonGeographic",value:function(){return new na(this.metadata).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(a){return this.number===a.number&&this.ext===a.ext}},{key:"getType",value:function(){return s(this,{v2:!0},this.metadata)}},{key:"format",value:function(a,b){return function(a,b,c,d){if(c=c?function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){w(a,b,c[b])})}return a}({},Ea,c):Ea,d=new na(d),a.country&&"001"!==a.country){if(!d.hasCountry(a.country))throw new Error("Unknown country: ".concat(a.country));d.country(a.country)}else{if(!a.countryCallingCode)return a.phone||"";d.selectNumberingPlan(a.countryCallingCode)}var e,f=d.countryCallingCode(),g=c.v2?a.nationalNumber:a.phone;switch(b){case"NATIONAL":return g?y(e=x(g,a.carrierCode,"NATIONAL",d,c),a.ext,d,c.formatExtension):"";case"INTERNATIONAL":return g?(e=x(g,null,"INTERNATIONAL",d,c),y(e="+".concat(f," ").concat(e),a.ext,d,c.formatExtension)):"+".concat(f);case"E.164":return"+".concat(f).concat(g);case"RFC3966":return function(a){var b=a.number,c=a.ext;if(!b)return"";if("+"!==b[0])throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(b).concat(c?";ext="+c:"")}({number:"+".concat(f).concat(g),ext:a.ext});case"IDD":if(!c.fromCountry)return;return y(function(a,b,c,d,e){if(h(d,e.metadata)===c){var f=x(a,b,"NATIONAL",e);return"1"===c?c+" "+f:f}var g=function(a,b,c){var d=new na(c);return d.selectNumberingPlan(a,void 0),d.defaultIDDPrefix()?d.defaultIDDPrefix():Da.test(d.IDDPrefix())?d.IDDPrefix():void 0}(d,0,e.metadata);return g?"".concat(g," ").concat(c," ").concat(x(a,null,"INTERNATIONAL",e)):void 0}(g,a.carrierCode,f,c.fromCountry,d),a.ext,d,c.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(b,'"'))}}(this,a,b?function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){z(a,b,c[b])})}return a}({},b,{v2:!0}):{v2:!0},this.metadata)}},{key:"formatNational",value:function(a){return this.format("NATIONAL",a)}},{key:"formatInternational",value:function(a){return this.format("INTERNATIONAL",a)}},{key:"getURI",value:function(a){return this.format("RFC3966",a)}}])&&function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(a.prototype,b),a}(),Ga=function(a){return/^[A-Z]{2}$/.test(a)},Ha=new RegExp("([0-9---])"),Ia=new RegExp("[+0-9---]"),Ja=new RegExp("[^0-9---#]+$"),Ka=function(a){return"object"===I(a)},La=function(){function a(b){var c,d,e=this,f=b.onCountryChange,g=b.onCallingCodeChange;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),d=function(a){for(var b=0,c=Object.keys(a);b<c.length;b++){var d=c[b];e[d]=a[d]}},(c="update")in this?Object.defineProperty(this,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):this[c]=d,this.onCountryChange=f,this.onCallingCodeChange=g}var b;return(b=[{key:"reset",value:function(a,b){this.international=!1,this.IDDPrefix=void 0,this.missingPlus=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(a,b)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"initCountryAndCallingCode",value:function(a,b){this.setCountry(a),this.setCallingCode(b)}},{key:"setCountry",value:function(a){this.country=a,this.onCountryChange(a)}},{key:"setCallingCode",value:function(a){return this.callingCode=a,this.onCallingCodeChange(this.country,a)}},{key:"startInternationalNumber",value:function(){this.international=!0,this.initCountryAndCallingCode()}},{key:"appendDigits",value:function(a){this.digits+=a}},{key:"appendNationalSignificantNumberDigits",value:function(a){this.nationalSignificantNumber+=a}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}])&&function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(a.prototype,b),a}(),Ma="x",Na=new RegExp(Ma),Oa=function(){function a(b){$(this,a),this.matchTree=(new Qa).parse(b)}return aa(a,[{key:"match",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.allowOverflow;if(!a)throw new Error("String is required");var d=ba(a.split(""),this.matchTree,!0);return d&&d.match&&delete d.matchedChars,d&&d.overflow&&!c?void 0:d}}]),a}(),Pa=new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])"),Qa=function(){function a(){$(this,a)}return aa(a,[{key:"parse",value:function(a){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(a),1!==this.context.length)throw new Error("Non-finalized contexts left when pattern parse ended");var b=this.context[0],c=b.branches,d=b.instructions;if(c)return[{op:"|",args:c.concat([d])}];if(0===d.length)throw new Error("Pattern is required");return d}},{key:"startContext",value:function(a){this.context.push(a)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(a){if(!a)throw new Error("Empty pattern passed");var b=a.match(Pa);if(b){var c=b[1],d=a.slice(0,b.index),e=a.slice(b.index+c.length);switch(c){case"(?:":d&&this.parsePattern(d),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw new Error('")" operator must be preceded by "(?:" operator');if(d&&this.parsePattern(d),0===this.getContext().instructions.length)throw new Error('No instructions found after "|" operator in an "or" group');var f=this.getContext().branches;f.push(this.getContext().instructions),this.endContext(),this.getContext().instructions.push({op:"|",args:f});break;case"|":if(!this.getContext().or)throw new Error('"|" operator can only be used inside "or" groups');if(d&&this.parsePattern(d),!this.getContext().branches){if(1!==this.context.length)throw new Error('"branches" not found in an "or" group context');this.getContext().branches=[]}this.getContext().branches.push(this.getContext().instructions),this.getContext().instructions=[];break;case"[":d&&this.parsePattern(d),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw new Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:ca(d)});break;default:throw new Error("Unknown operator: ".concat(c))}e&&this.parsePattern(e)}else this.getContext().instructions=this.getContext().instructions.concat(a.split(""))}}]),a}(),Ra=W("9",15),Sa=/[- ]/,Ta=new RegExp("^["+ja+"]*(\\$\\d["+ja+"]*)+$"),Ua=function(){function a(b){var c=this,d=(b.state,b.metadata);!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),da(this,"getSeparatorAfterNationalPrefix",function(a){return c.isNANP||a&&a.nationalPrefixFormattingRule()&&Sa.test(a.nationalPrefixFormattingRule())?" ":""}),da(this,"shouldTryNationalPrefixFormattingRule",function(a,b){var c=b.international,d=b.nationalPrefix;if(a.nationalPrefixFormattingRule()){var e=a.usesNationalPrefix();if(e&&d||!e&&!c)return!0}}),this.metadata=d,this.resetFormat()}var b;return(b=[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(a,b){this.resetFormat(),a?(this.isNANP="1"===a.callingCode(),this.matchingFormats=a.formats(),b.nationalSignificantNumber&&this.narrowDownMatchingFormats(b)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(a,b){var c=this;if(function(a,b){return"IS_POSSIBLE"===p(a,b)}(b.nationalSignificantNumber,this.metadata)){var d=this.matchingFormats,e=Array.isArray(d),f=0;for(d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if((f=d.next()).done)break;g=f.value}var h=g,i=Y(b,h,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(a){return c.shouldTryNationalPrefixFormattingRule(a,{international:b.international,nationalPrefix:b.nationalPrefix})},getSeparatorAfterNationalPrefix:this.getSeparatorAfterNationalPrefix});if(i)return this.resetFormat(),this.chosenFormat=h,this.setNationalNumberTemplate(i.replace(/\d/g,Ma),b),this.populatedNationalNumberTemplate=i,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(Ma),i}}return this.formatNationalNumberWithNextDigits(a,b)}},{key:"formatNationalNumberWithNextDigits",value:function(a,b){var c=this.chosenFormat,d=this.chooseFormat(b);return d?d===c?this.formatNextNationalNumberDigits(a):this.formatNextNationalNumberDigits(b.getNationalDigits()):void 0}},{key:"narrowDownMatchingFormats",value:function(a){var b=this,c=a.nationalSignificantNumber,d=a.nationalPrefix,e=a.international,f=c,g=f.length-3;0>g&&(g=0),this.matchingFormats=this.matchingFormats.filter(function(a){return b.formatSuits(a,e,d)&&b.formatMatches(a,f,g)}),this.chosenFormat&&-1===this.matchingFormats.indexOf(this.chosenFormat)&&this.resetFormat()}},{key:"formatSuits",value:function(a,b,c){return!(c&&!a.usesNationalPrefix()&&!a.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!b&&!c&&a.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(a,b,c){var d=a.leadingDigitsPatterns().length;if(0===d)return!0;c=Math.min(c,d-1);var e=a.leadingDigitsPatterns()[c];if(b.length<3)try{return void 0!==new Oa(e).match(b,{allowOverflow:!0})}catch(a){return console.error(a),!0}return new RegExp("^(".concat(e,")")).test(b)}},{key:"getFormatFormat",value:function(a,b){return b?a.internationalFormat():a.format()}},{key:"chooseFormat",value:function(a){var b=this,c=function(){if(e){if(f>=d.length)return"break";g=d[f++]}else{if((f=d.next()).done)return"break";g=f.value}var c=g;return b.chosenFormat===c?"break":Ta.test(b.getFormatFormat(c,a.international))?b.createTemplateForFormat(c,a)?(b.chosenFormat=c,"break"):(b.matchingFormats=b.matchingFormats.filter(function(a){return a!==c}),"continue"):"continue"},d=this.matchingFormats.slice(),e=Array.isArray(d),f=0;a:for(d=e?d:d[Symbol.iterator]();;){var g;switch(c()){case"break":break a;case"continue":continue}}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(a,b){if(!(a.pattern().indexOf("|")>=0)){var c=this.getTemplateForFormat(a,b);return c?(this.setNationalNumberTemplate(c,b),!0):void 0}}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(a,b){var c=a.IDDPrefix,d=a.missingPlus;return c?b&&!1===b.spacing?c:c+" ":d?"":"+"}},{key:"getTemplate",value:function(a){if(this.template){for(var b=-1,c=0,d=a.international?this.getInternationalPrefixBeforeCountryCallingCode(a,{spacing:!1}):"";c<d.length+a.getDigitsWithoutInternationalPrefix().length;)b=this.template.indexOf(Ma,b+1),c++;return X(this.template,b+1)}}},{key:"setNationalNumberTemplate",value:function(a,b){this.nationalNumberTemplate=a,this.populatedNationalNumberTemplate=a,this.populatedNationalNumberTemplatePosition=-1,b.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(b).replace(/[\d\+]/g,Ma)+W(Ma,b.callingCode.length)+" "+a:this.template=a}},{key:"getTemplateForFormat",value:function(a,b){var c=b.nationalSignificantNumber,d=b.international,e=b.nationalPrefix,f=b.complexPrefixBeforeNationalSignificantNumber,g=a.pattern();
g=g.replace(/\[([^\[\]])*\]/g,"\\d").replace(/\d(?=[^,}][^,}])/g,"\\d");var h=Ra.match(g)[0];if(!(c.length>h.length)){var i=new RegExp("^"+g+"$"),j=c.replace(/\d/g,"9");i.test(j)&&(h=j);var k,l=this.getFormatFormat(a,d);if(this.shouldTryNationalPrefixFormattingRule(a,{international:d,nationalPrefix:e})){var n=l.replace(Ca,a.nationalPrefixFormattingRule());if(m(a.nationalPrefixFormattingRule())===(e||"")+m("$1")&&(l=n,k=!0,e))for(var o=e.length;o>0;)l=l.replace(/\d/,Ma),o--}var p=h.replace(new RegExp(g),l).replace(new RegExp("9","g"),Ma);return k||(f?p=W(Ma,f.length)+" "+p:e&&(p=W(Ma,e.length)+this.getSeparatorAfterNationalPrefix(a)+p)),d&&(p=u(p)),p}}},{key:"formatNextNationalNumberDigits",value:function(a){var b=function(a,b,c){var d=c.split(""),e=Array.isArray(d),f=0;for(d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if((f=d.next()).done)break;g=f.value}var h=g;if(a.slice(b+1).search(Na)<0)return;b=a.search(Na),a=a.replace(Na,h)}return[a,b]}(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,a);if(b)return this.populatedNationalNumberTemplate=b[0],this.populatedNationalNumberTemplatePosition=b[1],X(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1);this.resetFormat();return void 0}}])&&function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(a.prototype,b),a}(),Va=new RegExp("^["+ja+"0-9---]+$","i"),Wa="(?:[+]["+ja+"0-9---]*|["+ja+"0-9---]+)",Xa=new RegExp("[^"+ja+"0-9---]+.*$"),Ya=/[^\d\[\]]/,Za=function(){function a(b){var c=b.defaultCountry,d=b.defaultCallingCode,e=b.metadata,f=b.onNationalSignificantNumberChange;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.defaultCountry=c,this.defaultCallingCode=d,this.metadata=e,this.onNationalSignificantNumberChange=f}var b;return(b=[{key:"input",value:function(a,b){var c,d=function(a){var b=ea(function(a){var b=function(a){var b,c=a.search(Wa);return 0>c?void 0:("+"===(a=a.slice(c))[0]&&(b=!0,a=a.slice("+".length)),a=a.replace(Xa,""),b&&(a="+"+a),a)}(a)||"";return"+"===b[0]?[b.slice("+".length),!0]:[b]}(a),2),c=b[0],d=b[1];return Va.test(c)||(c=""),[c,d]}(a),e=ea(d,2),f=e[0],g=e[1],h=m(f);return g&&(b.digits||(b.startInternationalNumber(),h||(c=!0))),h&&this.inputDigits(h,b),{digits:h,justLeadingPlus:c}}},{key:"inputDigits",value:function(a,b){var c=b.digits,d=c.length<3&&c.length+a.length>=3;if(b.appendDigits(a),d&&this.extractIddPrefix(b),this.isWaitingForCountryCallingCode(b)){if(!this.extractCountryCallingCode(b))return}else b.appendNationalSignificantNumberDigits(a);b.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(b.getNationalDigits(),b.update)}},{key:"isWaitingForCountryCallingCode",value:function(a){var b=a.international,c=a.callingCode;return b&&!c}},{key:"extractCountryCallingCode",value:function(a){var b=E("+"+a.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),c=b.countryCallingCode,d=b.number;return c?(a.setCallingCode(c),a.update({nationalSignificantNumber:d}),!0):void 0}},{key:"reset",value:function(a){if(a){this.hasSelectedNumberingPlan=!0;var b=a._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=b&&Ya.test(b)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(a,b){if(this.hasSelectedNumberingPlan){var c=B(a,this.metadata),d=c.nationalPrefix,e=c.nationalNumber,f=c.carrierCode;if(e!==a)return this.onExtractedNationalNumber(d,f,e,a,b),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(a,b,c){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(a,c);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var d=B(a,this.metadata),e=d.nationalPrefix,f=d.nationalNumber,g=d.carrierCode;if(f!==b)return this.onExtractedNationalNumber(e,g,f,a,c),!0}}},{key:"onExtractedNationalNumber",value:function(a,b,c,d,e){var f,g,h=d.lastIndexOf(c);if(h>=0&&h===d.length-c.length){g=!0;var i=d.slice(0,h);i!==a&&(f=i)}e({nationalPrefix:a,carrierCode:b,nationalSignificantNumber:c,nationalSignificantNumberMatchesInput:g,complexPrefixBeforeNationalSignificantNumber:f}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(a){return!!this.extractAnotherNationalSignificantNumber(a.getNationalDigits(),a.nationalSignificantNumber,a.update)||(this.extractIddPrefix(a)||this.fixMissingPlus(a)?(this.extractCallingCodeAndNationalSignificantNumber(a),!0):void 0)}},{key:"extractIddPrefix",value:function(a){var b=a.international,c=a.IDDPrefix,d=a.digits;if(a.nationalSignificantNumber,!b&&!c){var e=A(d,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);return void 0!==e&&e!==d?(a.update({IDDPrefix:d.slice(0,d.length-e.length)}),this.startInternationalNumber(a),!0):void 0}}},{key:"fixMissingPlus",value:function(a){if(!a.international){var b=D(a.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),c=b.countryCallingCode;if(b.number,c)return a.update({missingPlus:!0}),this.startInternationalNumber(a),!0}}},{key:"startInternationalNumber",value:function(a){a.startInternationalNumber(),a.nationalSignificantNumber&&(a.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(a){this.extractCountryCallingCode(a)&&this.extractNationalSignificantNumber(a.getNationalDigits(),a.update)}}])&&function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(a.prototype,b),a}(),$a=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.metadata=new na(c);var d,e=function(a){return Array.isArray(a)?a:void 0}(d=this.getCountryAndCallingCode(b))||function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),2!==c.length);d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}(d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),f=e[0],g=e[1];this.defaultCountry=f,this.defaultCallingCode=g,this.reset()}var b;return(b=[{key:"getCountryAndCallingCode",value:function(a){var b,c;return a&&("object"===fa(a)?(b=a.defaultCountry,c=a.defaultCallingCode):b=a),b&&!this.metadata.hasCountry(b)&&(b=void 0),[b,c]}},{key:"input",value:function(a){var b=this.parser.input(a,this.state),c=b.digits;if(b.justLeadingPlus)this.formattedOutput="+";else if(c){var d;if(this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state),this.metadata.hasSelectedNumberingPlan()&&(d=this.formatter.format(c,this.state)),void 0===d&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var e=this.state.getNationalDigits();e&&(d=this.formatter.format(e,this.state))}this.formattedOutput=d?this.getFullNumber(d):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var a=this;return this.state=new La({onCountryChange:function(b){a.country=b},onCallingCodeChange:function(b,c){a.metadata.selectNumberingPlan(b,c),a.formatter.reset(a.metadata.numberingPlan,a.state),a.parser.reset(a.metadata.numberingPlan)}}),this.formatter=new Ua({state:this.state,metadata:this.metadata}),this.parser=new Za({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){a.determineTheCountryIfNeeded(),a.formatter.reset(a.metadata.numberingPlan,a.state)}}),this.state.reset(this.defaultCountry,this.defaultCallingCode),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){return this.isInternational()?this.state.callingCode:void 0}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){return this.state.digits?this._getCountry():void 0}},{key:"_getCountry",value:function(){return this.state.country}},{key:"determineTheCountryIfNeeded",value:function(){this.state.country&&!this.isCountryCallingCodeAmbiguous()||this.determineTheCountry()}},{key:"getFullNumber",value:function(a){var b;if(this.isInternational()){var c=this.state.callingCode;return b=c?a?"".concat(c," ").concat(a):c:"".concat(this.state.getDigitsWithoutInternationalPrefix()),this.formatter.getInternationalPrefixBeforeCountryCallingCode(this.state,{spacing:!!b})+b}return a}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var a=this.state,b=a.nationalSignificantNumber,c=a.complexPrefixBeforeNationalSignificantNumber,d=a.nationalPrefix,e=b,f=c||d;return f&&(e=f+e),e}},{key:"getNonFormattedNumber",value:function(){var a=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(a?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var a=this.getNonFormattedNumber();return a?a.replace(/[\+\d]/g,Ma):void 0}},{key:"isCountryCallingCodeAmbiguous",value:function(){var a=this.state.callingCode,b=this.metadata.getCountryCodesForCallingCode(a);return b&&b.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(F(this.isInternational()?this.state.callingCode:this.defaultCallingCode,this.state.nationalSignificantNumber,this.metadata))}},{key:"getNumberValue",value:function(){var a=this.state,b=a.digits,c=a.callingCode,d=a.country,e=a.nationalSignificantNumber;return b?this.isInternational()?c?"+"+c+e:"+"+b:d||c?"+"+(d?this.metadata.countryCallingCode():c)+e:void 0:void 0}},{key:"getNumber",value:function(){var a=this.state,b=a.nationalSignificantNumber,c=a.carrierCode,d=a.callingCode,e=this._getCountry();if(b&&(e||d)){var f=new Fa(e||d,b,this.metadata.metadata);return c&&(f.carrierCode=c),f}}},{key:"isPossible",value:function(){var a=this.getNumber();return!!a&&a.isPossible()}},{key:"isValid",value:function(){var a=this.getNumber();return!!a&&a.isValid()}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}])&&function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(a.prototype,b),a}();ga.prototype=Object.create($a.prototype,{}),ga.prototype.constructor=ga;var _a,ab,bb=JSON.parse('{"AC":"40123","AD":"312345","AE":"501234567","AF":"701234567","AG":"2684641234","AI":"2642351234","AL":"672123456","AM":"77123456","AO":"923123456","AR":"91123456789","AS":"6847331234","AT":"664123456","AU":"412345678","AW":"5601234","AX":"412345678","AZ":"401234567","BA":"61123456","BB":"2462501234","BD":"1812345678","BE":"470123456","BF":"70123456","BG":"48123456","BH":"36001234","BI":"79561234","BJ":"90011234","BL":"690001234","BM":"4413701234","BN":"7123456","BO":"71234567","BQ":"3181234","BR":"11961234567","BS":"2423591234","BT":"17123456","BW":"71123456","BY":"294911911","BZ":"6221234","CA":"5062345678","CC":"412345678","CD":"991234567","CF":"70012345","CG":"061234567","CH":"781234567","CI":"0123456789","CK":"71234","CL":"221234567","CM":"671234567","CN":"13123456789","CO":"3211234567","CR":"83123456","CU":"51234567","CV":"9911234","CW":"95181234","CX":"412345678","CY":"96123456","CZ":"601123456","DE":"15123456789","DJ":"77831001","DK":"32123456","DM":"7672251234","DO":"8092345678","DZ":"551234567","EC":"991234567","EE":"51234567","EG":"1001234567","EH":"650123456","ER":"7123456","ES":"612345678","ET":"911234567","FI":"412345678","FJ":"7012345","FK":"51234","FM":"3501234","FO":"211234","FR":"612345678","GA":"06031234","GB":"7400123456","GD":"4734031234","GE":"555123456","GF":"694201234","GG":"7781123456","GH":"231234567","GI":"57123456","GL":"221234","GM":"3012345","GN":"601123456","GP":"690001234","GQ":"222123456","GR":"6912345678","GT":"51234567","GU":"6713001234","GW":"955012345","GY":"6091234","HK":"51234567","HN":"91234567","HR":"921234567","HT":"34101234","HU":"201234567","ID":"812345678","IE":"850123456","IL":"502345678","IM":"7924123456","IN":"8123456789","IO":"3801234","IQ":"7912345678","IR":"9123456789","IS":"6111234","IT":"3123456789","JE":"7797712345","JM":"8762101234","JO":"790123456","JP":"9012345678","KE":"712123456","KG":"700123456","KH":"91234567","KI":"72001234","KM":"3212345","KN":"8697652917","KP":"1921234567","KR":"1020000000","KW":"50012345","KY":"3453231234","KZ":"7710009998","LA":"2023123456","LB":"71123456","LC":"7582845678","LI":"660234567","LK":"712345678","LR":"770123456","LS":"50123456","LT":"61234567","LU":"628123456","LV":"21234567","LY":"912345678","MA":"650123456","MC":"612345678","MD":"62112345","ME":"67622901","MF":"690001234","MG":"321234567","MH":"2351234","MK":"72345678","ML":"65012345","MM":"92123456","MN":"88123456","MO":"66123456","MP":"6702345678","MQ":"696201234","MR":"22123456","MS":"6644923456","MT":"96961234","MU":"52512345","MV":"7712345","MW":"991234567","MX":"12221234567","MY":"123456789","MZ":"821234567","NA":"811234567","NC":"751234","NE":"93123456","NF":"381234","NG":"8021234567","NI":"81234567","NL":"612345678","NO":"40612345","NP":"9841234567","NR":"5551234","NU":"8884012","NZ":"211234567","OM":"92123456","PA":"61234567","PE":"912345678","PF":"87123456","PG":"70123456","PH":"9051234567","PK":"3012345678","PL":"512345678","PM":"551234","PR":"7872345678","PS":"599123456","PT":"912345678","PW":"6201234","PY":"961456789","QA":"33123456","RE":"692123456","RO":"712034567","RS":"601234567","RU":"9123456789","RW":"720123456","SA":"512345678","SB":"7421234","SC":"2510123","SD":"911231234","SE":"701234567","SG":"81234567","SH":"51234","SI":"31234567","SJ":"41234567","SK":"912123456","SL":"25123456","SM":"66661212","SN":"701234567","SO":"71123456","SR":"7412345","SS":"977123456","ST":"9812345","SV":"70123456","SX":"7215205678","SY":"944567890","SZ":"76123456","TA":"8999","TC":"6492311234","TD":"63012345","TG":"90112345","TH":"812345678","TJ":"917123456","TK":"7290","TL":"77212345","TM":"66123456","TN":"20123456","TO":"7715123","TR":"5012345678","TT":"8682911234","TV":"901234","TW":"912345678","TZ":"621234567","UA":"501234567","UG":"712345678","US":"2015550123","UY":"94231234","UZ":"912345678","VA":"3123456789","VC":"7844301234","VE":"4121234567","VG":"2843001234","VI":"3406421234","VN":"912345678","VU":"5912345","WF":"821234","WS":"7212345","XK":"43201234","YE":"712345678","YT":"639012345","ZA":"711234567","ZM":"955123456","ZW":"712345678"}');window.lpIntlTelInputUtils={formatNumber:function(b,c,d){c="string"==typeof c?c.toUpperCase():void 0;try{var e=M(b,c);return function(){return a(R,arguments)}(e.number)?(d=void 0===d?"E.164":d,e.format(d)):b}catch(c){return b}},getExampleNumber:function(b,c,d){b="string"==typeof b?b.toUpperCase():void 0;try{var e=function(){return a(S,arguments)}(b,bb);return c?e.formatNational():e.formatInternational()}catch(b){return""}},getNumberType:function(a,b){b="string"==typeof b?b.toUpperCase():void 0;try{var c=M(a,b);return _a[c.getType()]}catch(a){return-99}},getExtension:function(a,b){b="string"==typeof b?b.toUpperCase():void 0;try{return M(a,b).ext}catch(a){return""}},getValidationError:function(b,c){c="string"==typeof c?c.toUpperCase():void 0;try{var d=function(){return a(V,arguments)}(M(b,c).number,c);return"INVALID_COUNTRY"===d?ab.INVALID_COUNTRY_CODE:"TOO_SHORT"===d?ab.TOO_SHORT:"TOO_LONG"===d?ab.TOO_LONG:"INVALID_LENGTH"===d?ab.INVALID_LENGTH:ab.IS_POSSIBLE}catch(b){return"INVALID_COUNTRY"===b.message?ab.INVALID_COUNTRY_CODE:"TOO_SHORT"===b.message?ab.TOO_SHORT:"TOO_LONG"===b.message?ab.TOO_LONG:"INVALID_LENGTH"===b.message?ab.INVALID_LENGTH:-99}},isValidNumber:function(a,b){b="string"==typeof b?b.toUpperCase():void 0;try{return M(a,b).isValid()}catch(a){return!1}},numberFormat:{E164:"E.164",INTERNATIONAL:"INTERNATIONAL",NATIONAL:"NATIONAL",RFC3966:"RFC3966"},numberType:_a={FIXED_LINE:0,MOBILE:1,FIXED_LINE_OR_MOBILE:2,TOLL_FREE:3,PREMIUM_RATE:4,SHARED_COST:5,VOIP:6,PERSONAL_NUMBER:7,PAGER:8,UAN:9,VOICEMAIL:10,UNKNOWN:-1},validationError:ab={IS_POSSIBLE:0,INVALID_COUNTRY_CODE:1,TOO_SHORT:2,TOO_LONG:3,IS_POSSIBLE_LOCAL_ONLY:4,INVALID_LENGTH:5},AsYouType:ga}}()}()},function(a,b,c){"use strict";function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=void 0;var e,f=(e=c(4))&&e.__esModule?e:{"default":e},g=window.lpIntlTelInputUtils,h=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.options=c||{},this.inputEl=b,this._iti=f["default"](b,c),this.value=this.inputEl.value,this._iti.telInput.oninput=this._onInput.bind(this)}var b,c,e;return b=a,(c=[{key:"addEventListener",value:function(a,b){"input"===a&&(this._oninput=b)}},{key:"getSelectedCountry",value:function(){return(this._iti.getSelectedCountryData().iso2||this.options.initialCountry||"US").toUpperCase()}},{key:"_onInput",value:function(a){var b=new g.AsYouType(this.getSelectedCountry()).input(a.target.value);")"===b[b.length-1]&&(b=b.replace(/[\(|\)]/g,"")),this._iti.getNumber()!==b&&this._iti.setNumber(b),"function"==typeof this._oninput&&this._oninput(a)}},{key:"iti",get:function(){return this._iti}},{key:"value",get:function(){return this.options.nationalMode?this._iti.getNumber(g.numberFormat.NATIONAL):this._iti.getNumber()},set:function(a){var b=new g.AsYouType(this.getSelectedCountry()).input(a);this._iti.setNumber(b)}},{key:"oninput",set:function(a){this._oninput=a}}])&&d(b.prototype,c),e&&d(b,e),a}();b["default"]=h,a.exports=b["default"]},function(a,b,c){var d;d=function(a){"use strict";return function(){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}for(var c=[["Afghanistan ()","af","93"],["Albania (Shqipri)","al","355"],["Algeria ()","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia ()","am","374"],["Aruba","aw","297"],["Ascension Island","ac","247"],["Australia","au","61",0],["Austria (sterreich)","at","43"],["Azerbaijan (Azrbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain ()","bh","973"],["Bangladesh ()","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus ()","by","375"],["Belgium (Belgi)","be","32"],["Belize","bz","501"],["Benin (Bnin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan ()","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (  )","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria ()","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia ()","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (Rpublique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China ()","cn","86"],["Christmas Island","cx","61",2,["89164"]],["Cocos (Keeling) Islands","cc","61",1,["89162"]],["Colombia","co","57"],["Comoros ( )","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Cte dIvoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaao","cw","599",0],["Cyprus ()","cy","357"],["Czech Republic (esk republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (Repblica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt ()","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Eswatini","sz","268"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Froyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane franaise)","gf","594"],["French Polynesia (Polynsie franaise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia ()","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece ()","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guine)","gn","224"],["Guinea-Bissau (Guin Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong ()","hk","852"],["Hungary (Magyarorszg)","hu","36"],["Iceland (sland)","is","354"],["India ()","in","91"],["Indonesia","id","62"],["Iran ()","ir","98"],["Iraq ()","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel ()","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan ()","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan ()","jo","962"],["Kazakhstan ()","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait ()","kw","965"],["Kyrgyzstan ()","kg","996"],["Laos ()","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon ()","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya ()","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau ()","mo","853"],["North Macedonia ()","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania ()","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (Mxico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia ()","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco ()","ma","212",0],["Mozambique (Moambique)","mz","258"],["Myanmar (Burma) ()","mm","95"],["Namibia (Namibi)","na","264"],["Nauru","nr","674"],["Nepal ()","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Caldonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (   )","kp","850"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman ()","om","968"],["Pakistan ()","pk","92"],["Palau","pw","680"],["Palestine ()","ps","970"],["Panama (Panam)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar ()","qa","974"],["Runion (La Runion)","re","262",0],["Romania (Romnia)","ro","40"],["Russia ()","ru","7",0],["Rwanda","rw","250"],["Saint Barthlemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie franaise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["So Tom and Prncipe (So Tom e Prncipe)","st","239"],["Saudi Arabia (  )","sa","966"],["Senegal (Sngal)","sn","221"],["Serbia ()","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea ()","kr","82"],["South Sudan ( )","ss","211"],["Spain (Espaa)","es","34"],["Sri Lanka ( )","lk","94"],["Sudan ()","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria ()","sy","963"],["Taiwan ()","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand ()","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia ()","tn","216"],["Turkey (Trkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine ()","ua","380"],["United Arab Emirates (  )","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Ozbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Vit Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara ( )","eh","212",1,["5288","5289"]],["Yemen ()","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["land Islands","ax","358",1,["18"]]],d=0;d<c.length;d++){var e=c[d];c[d]={name:e[0],iso2:e[1],dialCode:e[2],priority:e[3]||0,areaCodes:e[4]||null}}var f={getInstance:function(a){var b=a.getAttribute("data-lp-intl-tel-input-id");return window.lpIntlTelInputGlobals.instances[b]},instances:{},documentReady:function(){return"complete"===document.readyState}};"object"==typeof window&&(window.lpIntlTelInputGlobals=f);var g=0,h={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},i=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],j=function(a,b){for(var c=Object.keys(a),d=0;d<c.length;d++)b(c[d],a[c[d]])},k=function(a){j(window.lpIntlTelInputGlobals.instances,function(b){window.lpIntlTelInputGlobals.instances[b][a]()})},l=function(){function d(a,b){var c=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),this.id=g++,this.telInput=a,this.activeItem=null,this.highlightedItem=null;var e=b||{};this.options={},j(h,function(a,b){c.options[a]=e.hasOwnProperty(a)?e[a]:b}),this.hadInitialPlaceholder=Boolean(a.getAttribute("placeholder"))}var e,f,l;return e=d,(f=[{key:"_init",value:function(){var a=this;if(this.options.nationalMode&&(this.options.autoHideDialCode=!1),this.options.separateDialCode&&(this.options.autoHideDialCode=this.options.nationalMode=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&(document.body.classList.add("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer=document.body)),"undefined"!=typeof Promise){var b=new Promise(function(b,c){a.resolveAutoCountryPromise=b,a.rejectAutoCountryPromise=c}),c=new Promise(function(b,c){a.resolveUtilsScriptPromise=b,a.rejectUtilsScriptPromise=c});this.promise=Promise.all([b,c])}else this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){},this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){};this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}},{key:"_processCountryData",value:function(){this._processAllCountries(),this._processCountryCodes(),this._processPreferredCountries(),this.options.localizedCountries&&this._translateCountriesByLocale(),(this.options.onlyCountries.length||this.options.localizedCountries)&&this.countries.sort(this._countryNameSort)}},{key:"_addCountryCode",value:function(b,c,d){c.length>this.countryCodeMaxLen&&(this.countryCodeMaxLen=c.length),this.countryCodes.hasOwnProperty(c)||(this.countryCodes[c]=[]);for(var e=0;e<this.countryCodes[c].length;e++)if(this.countryCodes[c][e]===b)return;var f=d!==a?d:this.countryCodes[c].length;this.countryCodes[c][f]=b}},{key:"_processAllCountries",value:function(){if(this.options.onlyCountries.length){var a=this.options.onlyCountries.map(function(a){return a.toLowerCase()});this.countries=c.filter(function(b){return a.indexOf(b.iso2)>-1})}else if(this.options.excludeCountries.length){var b=this.options.excludeCountries.map(function(a){return a.toLowerCase()});this.countries=c.filter(function(a){return-1===b.indexOf(a.iso2)})}else this.countries=c}},{key:"_translateCountriesByLocale",value:function(){for(var a=0;a<this.countries.length;a++){var b=this.countries[a].iso2.toLowerCase();this.options.localizedCountries.hasOwnProperty(b)&&(this.countries[a].name=this.options.localizedCountries[b])}}},{key:"_countryNameSort",value:function(a,b){return a.name.localeCompare(b.name)}},{key:"_processCountryCodes",value:function(){this.countryCodeMaxLen=0,this.dialCodes={},this.countryCodes={};for(var a=0;a<this.countries.length;a++){var b=this.countries[a];this.dialCodes[b.dialCode]||(this.dialCodes[b.dialCode]=!0),this._addCountryCode(b.iso2,b.dialCode,b.priority)}for(var c=0;c<this.countries.length;c++){var d=this.countries[c];if(d.areaCodes)for(var e=this.countryCodes[d.dialCode][0],f=0;f<d.areaCodes.length;f++){for(var g=d.areaCodes[f],h=1;h<g.length;h++){var i=d.dialCode+g.substr(0,h);this._addCountryCode(e,i),this._addCountryCode(d.iso2,i)}this._addCountryCode(d.iso2,d.dialCode+g)}}}},{key:"_processPreferredCountries",value:function(){this.preferredCountries=[];for(var a=0;a<this.options.preferredCountries.length;a++){var b=this.options.preferredCountries[a].toLowerCase(),c=this._getCountryData(b,!1,!0);c&&this.preferredCountries.push(c)}}},{key:"_createEl",value:function(a,b,c){var d=document.createElement(a);return b&&j(b,function(a,b){return d.setAttribute(a,b);
}),c&&c.appendChild(d),d}},{key:"_generateMarkup",value:function(){this.telInput.hasAttribute("autocomplete")||this.telInput.form&&this.telInput.form.hasAttribute("autocomplete")||this.telInput.setAttribute("autocomplete","off");var a="iti";this.options.allowDropdown&&(a+=" iti--allow-dropdown"),this.options.separateDialCode&&(a+=" iti--separate-dial-code"),this.options.customContainer&&(a+=" ",a+=this.options.customContainer);var b=this._createEl("div",{"class":a});if(this.telInput.parentNode.insertBefore(b,this.telInput),this.flagsContainer=this._createEl("div",{"class":"iti__flag-container"},b),b.appendChild(this.telInput),this.selectedFlag=this._createEl("div",{"class":"iti__selected-flag",role:"combobox","aria-controls":"iti-".concat(this.id,"__country-listbox"),"aria-owns":"iti-".concat(this.id,"__country-listbox"),"aria-expanded":"false"},this.flagsContainer),this.selectedFlagInner=this._createEl("div",{"class":"iti__flag"},this.selectedFlag),this.options.separateDialCode&&(this.selectedDialCode=this._createEl("div",{"class":"iti__selected-dial-code"},this.selectedFlag)),this.options.allowDropdown&&(this.selectedFlag.setAttribute("tabindex","0"),this.dropdownArrow=this._createEl("div",{"class":"iti__arrow"},this.selectedFlag),this.countryList=this._createEl("ul",{"class":"iti__country-list iti__hide",id:"iti-".concat(this.id,"__country-listbox"),role:"listbox","aria-label":"List of countries"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"iti__preferred",!0),this._createEl("li",{"class":"iti__divider",role:"separator","aria-disabled":"true"},this.countryList)),this._appendListItems(this.countries,"iti__standard"),this.options.dropdownContainer?(this.dropdown=this._createEl("div",{"class":"iti iti--container"}),this.dropdown.appendChild(this.countryList)):this.flagsContainer.appendChild(this.countryList)),this.options.hiddenInput){var c=this.options.hiddenInput,d=this.telInput.getAttribute("name");if(d){var e=d.lastIndexOf("[");-1!==e&&(c="".concat(d.substr(0,e),"[").concat(c,"]"))}this.hiddenInput=this._createEl("input",{type:"hidden",name:c}),b.appendChild(this.hiddenInput)}}},{key:"_appendListItems",value:function(a,b,c){for(var d="",e=0;e<a.length;e++){var f=a[e],g=c?"-preferred":"";d+="<li class='iti__country ".concat(b,"' tabIndex='-1' id='iti-").concat(this.id,"__item-").concat(f.iso2).concat(g,"' role='option' data-lp-dial-code='").concat(f.dialCode,"' data-lp-country-code='").concat(f.iso2,"' aria-selected='false'>"),d+="<div class='iti__flag-box'><div class='iti__flag iti__".concat(f.iso2,"'></div></div>"),d+="<span class='iti__country-name'>".concat(f.name,"</span>"),d+="<span class='iti__dial-code'>+".concat(f.dialCode,"</span>"),d+="</li>"}this.countryList.insertAdjacentHTML("beforeend",d)}},{key:"_setInitialState",value:function(){var a=this.telInput.getAttribute("value"),b=this.telInput.value,c=!a||"+"!==a.charAt(0)||b&&"+"===b.charAt(0)?b:a,d=this._getDialCode(c),e=this._isRegionlessNanp(c),f=this.options,g=f.initialCountry,h=f.nationalMode,i=f.autoHideDialCode,j=f.separateDialCode;d&&!e?this._updateFlagFromNumber(c):"auto"!==g&&(g?this._setFlag(g.toLowerCase()):d&&e?this._setFlag("us"):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,c||this._setFlag(this.defaultCountry)),c||h||i||j||(this.telInput.value="+".concat(this.selectedCountryData.dialCode))),c&&this._updateValFromNumber(c)}},{key:"_initListeners",value:function(){this._initKeyListeners(),this.options.autoHideDialCode&&this._initBlurListeners(),this.options.allowDropdown&&this._initDropdownListeners(),this.hiddenInput&&this._initHiddenInputListener()}},{key:"_initHiddenInputListener",value:function(){var a=this;this._handleHiddenInputSubmit=function(){a.hiddenInput.value=a.getNumber()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit)}},{key:"_getClosestLabel",value:function(){for(var a=this.telInput;a&&"LABEL"!==a.tagName;)a=a.parentNode;return a}},{key:"_initDropdownListeners",value:function(){var a=this;this._handleLabelClick=function(b){a.countryList.classList.contains("iti__hide")?a.telInput.focus():b.preventDefault()};var b=this._getClosestLabel();b&&b.addEventListener("click",this._handleLabelClick),this._handleClickSelectedFlag=function(){!a.countryList.classList.contains("iti__hide")||a.telInput.disabled||a.telInput.readOnly||a._showDropdown()},this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag),this._handleFlagsContainerKeydown=function(b){a.countryList.classList.contains("iti__hide")&&-1!==["ArrowUp","Up","ArrowDown","Down"," ","Enter"].indexOf(b.key)&&(b.preventDefault(),b.stopPropagation(),a._showDropdown()),"Tab"===b.key&&a._closeDropdown()},this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown)}},{key:"_initRequests",value:function(){var a=this;this.options.utilsScript&&!window.lpIntlTelInputUtils?window.lpIntlTelInputGlobals.documentReady()?window.lpIntlTelInputGlobals.loadUtils(this.options.utilsScript):window.addEventListener("load",function(){window.lpIntlTelInputGlobals.loadUtils(a.options.utilsScript)}):this.resolveUtilsScriptPromise(),"auto"===this.options.initialCountry?this._loadAutoCountry():this.resolveAutoCountryPromise()}},{key:"_loadAutoCountry",value:function(){window.lpIntlTelInputGlobals.autoCountry?this.handleAutoCountry():window.lpIntlTelInputGlobals.startedLoadingAutoCountry||(window.lpIntlTelInputGlobals.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup(function(a){window.lpIntlTelInputGlobals.autoCountry=a.toLowerCase(),setTimeout(function(){return k("handleAutoCountry")})},function(){return k("rejectAutoCountryPromise")}))}},{key:"_initKeyListeners",value:function(){var a=this;this._handleKeyupEvent=function(){a._updateFlagFromNumber(a.telInput.value)&&a._triggerCountryChange()},this.telInput.addEventListener("keyup",this._handleKeyupEvent),this._handleClipboardEvent=function(){setTimeout(a._handleKeyupEvent)},this.telInput.addEventListener("cut",this._handleClipboardEvent),this.telInput.addEventListener("paste",this._handleClipboardEvent)}},{key:"_cap",value:function(a){var b=this.telInput.getAttribute("maxlength");return b&&a.length>b?a.substr(0,b):a}},{key:"_initBlurListeners",value:function(){var a=this;this._handleSubmitOrBlurEvent=function(){a._removeEmptyDialCode()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent)}},{key:"_removeEmptyDialCode",value:function(){if("+"===this.telInput.value.charAt(0)){var a=this._getNumeric(this.telInput.value);a&&this.selectedCountryData.dialCode!==a||(this.telInput.value="")}}},{key:"_getNumeric",value:function(a){return a.replace(/\D/g,"")}},{key:"_trigger",value:function(a){var b=document.createEvent("Event");b.initEvent(a,!0,!0),this.telInput.dispatchEvent(b)}},{key:"_showDropdown",value:function(){this.countryList.classList.remove("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","true"),this._setDropdownPosition(),this.activeItem&&(this._highlightListItem(this.activeItem,!1),this._scrollTo(this.activeItem,!0)),this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}},{key:"_toggleClass",value:function(a,b,c){c&&!a.classList.contains(b)?a.classList.add(b):!c&&a.classList.contains(b)&&a.classList.remove(b)}},{key:"_setDropdownPosition",value:function(){var a=this;if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.isMobile){var b=this.telInput.getBoundingClientRect(),c=window.pageYOffset||document.documentElement.scrollTop,d=b.top+c,e=this.countryList.offsetHeight,f=d+this.telInput.offsetHeight+e<c+window.innerHeight,g=d-e>c;if(this._toggleClass(this.countryList,"iti__country-list--dropup",!f&&g),this.options.dropdownContainer){var h=!f&&g?0:this.telInput.offsetHeight;this.dropdown.style.top="".concat(d+h,"px"),this.dropdown.style.left="".concat(b.left+document.body.scrollLeft,"px"),this._handleWindowScroll=function(){return a._closeDropdown()},window.addEventListener("scroll",this._handleWindowScroll)}}}},{key:"_getClosestListItem",value:function(a){for(var b=a;b&&b!==this.countryList&&!b.classList.contains("iti__country");)b=b.parentNode;return b===this.countryList?null:b}},{key:"_bindDropdownListeners",value:function(){var a=this;this._handleMouseoverCountryList=function(b){var c=a._getClosestListItem(b.target);c&&a._highlightListItem(c,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=function(b){var c=a._getClosestListItem(b.target);c&&a._selectListItem(c)},this.countryList.addEventListener("click",this._handleClickCountryList);var b=!0;this._handleClickOffToClose=function(){b||a._closeDropdown(),b=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose);var c="",d=null;this._handleKeydownOnDropdown=function(b){b.preventDefault(),"ArrowUp"===b.key||"Up"===b.key||"ArrowDown"===b.key||"Down"===b.key?a._handleUpDownKey(b.key):"Enter"===b.key?a._handleEnterKey():"Escape"===b.key?a._closeDropdown():/^[a-zA-Z--- ]$/.test(b.key)&&(d&&clearTimeout(d),c+=b.key.toLowerCase(),a._searchForCountry(c),d=setTimeout(function(){c=""},1e3))},document.addEventListener("keydown",this._handleKeydownOnDropdown)}},{key:"_handleUpDownKey",value:function(a){var b="ArrowUp"===a||"Up"===a?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;b&&(b.classList.contains("iti__divider")&&(b="ArrowUp"===a||"Up"===a?b.previousElementSibling:b.nextElementSibling),this._highlightListItem(b,!0))}},{key:"_handleEnterKey",value:function(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}},{key:"_searchForCountry",value:function(a){for(var b=0;b<this.countries.length;b++)if(this._startsWith(this.countries[b].name,a)){var c=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(this.countries[b].iso2));this._highlightListItem(c,!1),this._scrollTo(c,!0);break}}},{key:"_startsWith",value:function(a,b){return a.substr(0,b.length).toLowerCase()===b}},{key:"_updateValFromNumber",value:function(a){var b=a;if(this.options.formatOnDisplay&&window.lpIntlTelInputUtils&&this.selectedCountryData){var c=!this.options.separateDialCode&&(this.options.nationalMode||"+"!==b.charAt(0)),d=lpIntlTelInputUtils.numberFormat,e=d.NATIONAL,f=d.INTERNATIONAL,g=c?e:f;b=lpIntlTelInputUtils.formatNumber(b,this.selectedCountryData.iso2,g)}b=this._beforeSetNumber(b),this.telInput.value=b}},{key:"_updateFlagFromNumber",value:function(a){var b=a,c=this.selectedCountryData.dialCode,d="1"===c;b&&this.options.nationalMode&&d&&"+"!==b.charAt(0)&&("1"!==b.charAt(0)&&(b="1".concat(b)),b="+".concat(b)),this.options.separateDialCode&&c&&"+"!==b.charAt(0)&&(b="+".concat(c).concat(b));var e=this._getDialCode(b,!0),f=this._getNumeric(b),g=null;if(e){var h=this.countryCodes[this._getNumeric(e)],i=-1!==h.indexOf(this.selectedCountryData.iso2)&&f.length<=e.length-1;if(!("1"===c&&this._isRegionlessNanp(f)||i))for(var j=0;j<h.length;j++)if(h[j]){g=h[j];break}}else"+"===b.charAt(0)&&f.length?g="":b&&"+"!==b||(g=this.defaultCountry);return null!==g&&this._setFlag(g)}},{key:"_isRegionlessNanp",value:function(a){var b=this._getNumeric(a);if("1"===b.charAt(0)){var c=b.substr(1,3);return-1!==i.indexOf(c)}return!1}},{key:"_highlightListItem",value:function(a,b){var c=this.highlightedItem;c&&c.classList.remove("iti__highlight"),this.highlightedItem=a,this.highlightedItem.classList.add("iti__highlight"),b&&this.highlightedItem.focus()}},{key:"_getCountryData",value:function(a,b,d){for(var e=b?c:this.countries,f=0;f<e.length;f++)if(e[f].iso2===a)return e[f];if(d)return null;throw new Error("No country data for '".concat(a,"'"))}},{key:"_setFlag",value:function(a){var b=this.selectedCountryData.iso2?this.selectedCountryData:{};this.selectedCountryData=a?this._getCountryData(a,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedFlagInner.setAttribute("class","iti__flag iti__".concat(a));var c=a?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown";if(this.selectedFlag.setAttribute("title",c),this.options.separateDialCode){var d=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"";this.selectedDialCode.innerHTML=d;var e=this.selectedFlag.offsetWidth||this._getHiddenSelectedFlagWidth();this.telInput.style.paddingLeft="".concat(e+6,"px")}if(this._updatePlaceholder(),this.options.allowDropdown){var f=this.activeItem;if(f&&(f.classList.remove("iti__active"),f.setAttribute("aria-selected","false")),a){var g=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(a,"-preferred"))||this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(a));g.setAttribute("aria-selected","true"),g.classList.add("iti__active"),this.activeItem=g,this.selectedFlag.setAttribute("aria-activedescendant",g.getAttribute("id"))}}return b.iso2!==a}},{key:"_getHiddenSelectedFlagWidth",value:function(){var a=this.telInput.parentNode.cloneNode();a.style.visibility="hidden",document.body.appendChild(a);var b=this.flagsContainer.cloneNode();a.appendChild(b);var c=this.selectedFlag.cloneNode(!0);b.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),d}},{key:"_updatePlaceholder",value:function(){var a="aggressive"===this.options.autoPlaceholder||!this.hadInitialPlaceholder&&"polite"===this.options.autoPlaceholder;if(window.lpIntlTelInputUtils&&a){var b=lpIntlTelInputUtils.numberType[this.options.placeholderNumberType],c=this.selectedCountryData.iso2?lpIntlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,b):"";c=this._beforeSetNumber(c),"function"==typeof this.options.customPlaceholder&&(c=this.options.customPlaceholder(c,this.selectedCountryData)),this.telInput.setAttribute("placeholder",c)}}},{key:"_selectListItem",value:function(a){var b=this._setFlag(a.getAttribute("data-lp-country-code"));this._closeDropdown(),this._updateDialCode(a.getAttribute("data-lp-dial-code"),!0),this.telInput.focus();var c=this.telInput.value.length;this.telInput.setSelectionRange(c,c),b&&this._triggerCountryChange()}},{key:"_closeDropdown",value:function(){this.countryList.classList.add("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","false"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.isMobile||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._trigger("close:countrydropdown")}},{key:"_scrollTo",value:function(a,b){var c=this.countryList,d=window.pageYOffset||document.documentElement.scrollTop,e=c.offsetHeight,f=c.getBoundingClientRect().top+d,g=f+e,h=a.offsetHeight,i=a.getBoundingClientRect().top+d,j=i+h,k=i-f+c.scrollTop,l=e/2-h/2;if(f>i)b&&(k-=l),c.scrollTop=k;else if(j>g){b&&(k+=l);var m=e-h;c.scrollTop=k-m}}},{key:"_updateDialCode",value:function(a,b){var c,d=this.telInput.value,e="+".concat(a);if("+"===d.charAt(0)){var f=this._getDialCode(d);c=f?d.replace(f,e):e}else{if(this.options.nationalMode||this.options.separateDialCode)return;if(d)c=e+d;else{if(!b&&this.options.autoHideDialCode)return;c=e}}this.telInput.value=c}},{key:"_getDialCode",value:function(a,b){var c="";if("+"===a.charAt(0))for(var d="",e=0;e<a.length;e++){var f=a.charAt(e);if(!isNaN(parseInt(f,10))){if(d+=f,b)this.countryCodes[d]&&(c=a.substr(0,e+1));else if(this.dialCodes[d]){c=a.substr(0,e+1);break}if(d.length===this.countryCodeMaxLen)break}}return c}},{key:"_getFullNumber",value:function(){var a=this.telInput.value.trim(),b=this.selectedCountryData.dialCode,c=this._getNumeric(a);return(this.options.separateDialCode&&"+"!==a.charAt(0)&&b&&c?"+".concat(b):"")+a}},{key:"_beforeSetNumber",value:function(a){var b=a;if(this.options.separateDialCode){var c=this._getDialCode(b);if(c){var d=" "===b[(c="+".concat(this.selectedCountryData.dialCode)).length]||"-"===b[c.length]?c.length+1:c.length;b=b.substr(d)}}return this._cap(b)}},{key:"_triggerCountryChange",value:function(){this._trigger("countrychange")}},{key:"handleAutoCountry",value:function(){"auto"===this.options.initialCountry&&(this.defaultCountry=window.lpIntlTelInputGlobals.autoCountry,this.telInput.value||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}},{key:"handleUtils",value:function(){window.lpIntlTelInputUtils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this._updatePlaceholder()),this.resolveUtilsScriptPromise()}},{key:"destroy",value:function(){var a=this.telInput.form;if(this.options.allowDropdown){this._closeDropdown(),this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag),this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown);var b=this._getClosestLabel();b&&b.removeEventListener("click",this._handleLabelClick)}this.hiddenInput&&a&&a.removeEventListener("submit",this._handleHiddenInputSubmit),this.options.autoHideDialCode&&(a&&a.removeEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent)),this.telInput.removeEventListener("keyup",this._handleKeyupEvent),this.telInput.removeEventListener("cut",this._handleClipboardEvent),this.telInput.removeEventListener("paste",this._handleClipboardEvent),this.telInput.removeAttribute("data-lp-intl-tel-input-id");var c=this.telInput.parentNode;c.parentNode.insertBefore(this.telInput,c),c.parentNode.removeChild(c),delete window.lpIntlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return window.lpIntlTelInputUtils?lpIntlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}},{key:"getNumber",value:function(a){if(window.lpIntlTelInputUtils){var b=this.selectedCountryData.iso2;return lpIntlTelInputUtils.formatNumber(this._getFullNumber(),b,a)}return""}},{key:"getNumberType",value:function(){return window.lpIntlTelInputUtils?lpIntlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.selectedCountryData}},{key:"getValidationError",value:function(){if(window.lpIntlTelInputUtils){var a=this.selectedCountryData.iso2;return lpIntlTelInputUtils.getValidationError(this._getFullNumber(),a)}return-99}},{key:"isValidNumber",value:function(){var a=this._getFullNumber().trim(),b=this.options.nationalMode?this.selectedCountryData.iso2:"";return window.lpIntlTelInputUtils?lpIntlTelInputUtils.isValidNumber(a,b):null}},{key:"setCountry",value:function(a){var b=a.toLowerCase();this.selectedFlagInner.classList.contains("iti__".concat(b))||(this._setFlag(b),this._updateDialCode(this.selectedCountryData.dialCode,!1),this._triggerCountryChange())}},{key:"setNumber",value:function(a){var b=this._updateFlagFromNumber(a);this._updateValFromNumber(a),b&&this._triggerCountryChange()}},{key:"setPlaceholderNumberType",value:function(a){this.options.placeholderNumberType=a,this._updatePlaceholder()}}])&&b(e.prototype,f),l&&b(e,l),Object.defineProperty(e,"prototype",{writable:!1}),d}();f.getCountryData=function(){return c};var m=function(a,b,c){var d=document.createElement("script");d.onload=function(){k("handleUtils"),b&&b()},d.onerror=function(){k("rejectUtilsScriptPromise"),c&&c()},d.className="iti-load-utils",d.async=!0,d.src=a,document.body.appendChild(d)};return f.loadUtils=function(a){if(!window.lpIntlTelInputUtils&&!window.lpIntlTelInputGlobals.startedLoadingUtilsScript){if(window.lpIntlTelInputGlobals.startedLoadingUtilsScript=!0,"undefined"!=typeof Promise)return new Promise(function(b,c){return m(a,b,c)});m(a)}return null},f.defaults=h,f.version="18.2.2",function(a,b){var c=new l(a,b);return c._init(),a.setAttribute("data-lp-intl-tel-input-id",c.id),window.lpIntlTelInputGlobals.instances[c.id]=c,c}}()},a.exports?a.exports=d():window.lpIntlTelInput=d()}])}).call(window.lpTag);window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfiguratorFactory=function(a,b){b=b||{};var c=lpTag.unifiedWindow.ThemeConfigurationTranslator,d=lpTag.unifiedWindow.ThemeConfigurator,e=lpTag.unifiedWindow.applicationUtils;b.clone="undefined"==typeof b.clone?!0:b.clone;b.clone&&(a=e.cloneObj(a||{}));a&&"2.0"!==a.v&&(a=(new c).translate(a));return new d(a)};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfiguration=lpTag.unifiedWindow.ThemeConfiguration||{};lpTag.unifiedWindow.ThemeConfiguration.styleInference={mainArea:{"background-color":[{target:"surveyArea"},{target:"dialogArea"},{target:"transcriptArea"}]},transcript_message:{"font-family":[{target:"surveyArea"},{target:"dialogArea"}],color:[{target:"cancel_button"},{target:"surveyArea"},{target:"dialogArea"}]},top:{"background-color":[{target:"button"},{target:"close_survey_button"},{target:"star",prop:"color"}]},top_text:{color:[{target:"button"},{target:"close_survey_button"}]},transcript_bubble_agent:{"border-color":[{target:"transcript_bubble_agentArrowBorder",prop:"border-right-color",override:!0}],"background-color":[{target:"transcript_bubble_agentArrow",prop:"border-right-color",override:!0}]},transcript_bubble_visitor:{"border-color":[{target:"transcript_bubble_visitorArrowBorder",prop:"border-left-color",override:!0}],"background-color":[{target:"transcript_bubble_visitorArrow",prop:"border-left-color",override:!0}]},input:{"border-radius":[{target:"mainArea"},{target:"maximizedWindow"},{target:"surveyArea"},{target:"dialogArea"},{target:"actionsMenu"},{target:"sliderMaximizedWindow"}]}};lpTag.unifiedWindow.ThemeConfiguration.options={ICON_SET:{name:"icon_set",query:'[data-lp-type="icon"]',values:{DARK:{name:"dark",cssClass:"lp_icon-dark"},BRIGHT:{name:"bright",cssClass:"lp_icon-white"}}},MINIMIZE_ICON:{name:"minimize_icon",query:'[data-lp-point="minimize_icon"]',values:{DEFAULT:{name:"default",cssClass:"lp_minimize-icon"},CHEVRON:{name:"chevron",cssClass:"lp_chevron-icon"}}},LOCATION:{name:"location",values:{TOP_LEFT:{name:"top_left",cssClass:"lp_top-left"},TOP_RIGHT:{name:"top_right",cssClass:"lp_top-right"},MIDDLE_RIGHT:{name:"middle_right",cssClass:"lp_middle-right"},BOTTOM_RIGHT:{name:"bottom_right",cssClass:"lp_bottom-right"},BOTTOM_LEFT:{name:"bottom_left",cssClass:"lp_bottom-left"},MIDDLE_LEFT:{name:"middle_left",cssClass:"lp_middle-left"}}},TOP_TEXT:{name:"top_text"},TRANSCRIPT_BUBBLE_VISITOR_TEXT:{name:"transcript_bubble_visitor_text"},TRANSCRIPT_BUBBLE_AGENT_TEXT:{name:"transcript_bubble_agent_text"},TRANSCRIPT_TIME:{name:"transcript_time"},TRANSCRIPT_MESSAGE:{name:"transcript_message"},INPUT_TEXT:{name:"input_text"},ACTIONSMENU_ACTIONITEM_TEXT:{name:"actionsMenu_actionItem_text"},TRANSCRIPT_BUBBLE_RICH_CONTENT:{name:"transcript_bubble_rich_content"},TRANSCRIPT_BUBBLE_VISITOR_PARENT:{name:"transcript_bubble_visitor_parent",query:'[data-lp-cust-id = "transcript_bubble_visitor"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_line"},CURVY:{name:"curvy",cssClass:"lp_new_chat_line"}}},TRANSCRIPT_BUBBLE_VISITOR_ARROW_BORDER_PARENT:{name:"transcript_bubble_visitor_parent",query:'[data-lp-cust-id = "transcript_bubble_visitorArrowBorder"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_arrow_border"},CURVY:{name:"curvy",cssClass:"lpHide"}}},TRANSCRIPT_BUBBLE_VISITOR_ARROW_PARENT:{name:"transcript_bubble_visitor_parent",query:'[data-lp-cust-id = "transcript_bubble_visitorArrow"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_arrow"},CURVY:{name:"curvy",cssClass:"lpHide"}}},TRANSCRIPT_BUBBLE_AGENT_PARENT:{name:"transcript_bubble_agent_parent",query:'[data-lp-cust-id = "transcript_bubble_agent"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_line"},CURVY:{name:"curvy",cssClass:"lp_new_chat_line"}}},TRANSCRIPT_BUBBLE_AGENT_ARROW_BORDER_PARENT:{name:"transcript_bubble_agent_parent",query:'[data-lp-cust-id = "transcript_bubble_agentArrowBorder"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_arrow_border"},CURVY:{name:"curvy",cssClass:"lpHide"}}},TRANSCRIPT_BUBBLE_AGENT_ARROW_PARENT:{name:"transcript_bubble_agent_parent",query:'[data-lp-cust-id = "transcript_bubble_agentArrow"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_arrow"},CURVY:{name:"curvy",cssClass:"lpHide"}}}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfigurationTranslator=function(){function a(a){return"2.0"===a.v?a:b(a)}function b(a){var b=new g;a.style&&d(a.style,b);if(a.iconSet)for(var c in a.iconSet)b.setOption(c,h.option.ICON_SET.name,a.iconSet[c]);a.meta&&b.setMeta(a.meta);f(b);var e=b.getConfiguration();return e}function c(a,b,c,d){i.isStyleColorProperty(b)?d.setStyle(a,b,"{{colors."+c+"}}"):"image"===b?d.setProperty(a,"src",c):"font"===b?d.setStyle(a,b,"{{fonts."+c+"}}"):d.setStyle(a,b,c)}function d(a,b,e){var f;e=e||"";if("object"==typeof a){f=a;for(var g in f)"object"!=typeof f[g]?c(e,g,f[g],b):d(f[g],b,(e?e+"_":e)+g)}}function e(a){if(a){if(a.indexOf("_white")>-1)return h.options.ICON_SET.values.BRIGHT.name;if(a.indexOf("_normal")>-1)return h.options.ICON_SET.values.DARK.name}}function f(a){var b=e(a.getProperty("top_minimizeButton","src")),c=e(a.getProperty("input_buttonEnabled","src"));a.removeItem("top_minimizeButton");a.removeItem("top_closeButton");a.removeItem("input_buttonEnabled");a.removeItem("input_buttonDisabled");var d=a.getStyle("transcriptArea","background-color");"undefined"!=typeof d&&a.setStyle("mainArea","background-color",d);a.removeItem("transcriptArea");"undefined"!=typeof b&&a.setOption("top",h.options.ICON_SET.name,b);"undefined"!=typeof c&&a.setOption("input",h.options.ICON_SET.name,c)}var g=lpTag.unifiedWindow.ThemeConfigurator,h=lpTag.unifiedWindow.ThemeConfiguration,i=lpTag.unifiedWindow.AWCUtils;return{translate:a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfigurator=function(a){function b(a,b,c,d,e){d=y.trim(""+d);if("style"===b&&"undefined"==typeof d)o(a,b,c);else if("undefined"==typeof c)o(a,b);else if(e||!w[a]||!w[a].attrs[b][c]){w[a]=w[a]||{};w[a].attrs=w[a].attrs||{};w[a].attrs[b]=w[a].attrs[b]||{};if("style"===b){var f=q(c);if(d&&!d.match(/\{\{(.*)\}\}/)&&f){var g=t(f,d);j(f,g,d);w[a].attrs[b][c]=p(f,g)}else w[a].attrs[b][c]=d}else w[a].attrs[b]=c}}function c(a){w[a]&&delete w[a]}function d(a,b,c){w[a]=w[a]||{};w[a].options=w[a].options||{};w[a].options[b]=c}function e(a,b){return"undefined"!=typeof w[a]&&"undefined"!=typeof w[a].options?u(w[a].options[b]):void 0}function f(a,b,c){return"undefined"!=typeof w[a]&&"undefined"!=typeof w[a].attrs?u("undefined"!=typeof w[a].attrs[b]&&"undefined"!=typeof c?w[a].attrs[b][c]:w[a].attrs[b]):void 0}function g(a,b){if("undefined"==typeof b&&w[a]&&w[a].attrs&&w[a].attrs.style){var c,d={};for(var e in w[a].attrs.style){c=u(w[a].attrs.style[e]);d[e]=c}return d}return f(a,"style",b)}function h(a,c,d,e){e="boolean"==typeof e?e:!0;if("object"==typeof c)for(var f in c)h(a,f,c[f],e);else b(a,"style",c,d,e)}function i(a,b){return"undefined"!=typeof v&&"undefined"!=typeof v[a]?v[a][b]:void 0}function j(a,b,c){v=v||{};v[a]=v[a]||{};v[a][b]=c}function k(a){v=y.cloneObj(a)}function l(a){a=a||{};a.normalize="undefined"==typeof a.normalize?!0:a.normalize;var b={config:w,v:"2.0"};"undefined"!=typeof v&&(b.meta=v);return a.normalize?r(b):b}function m(a){var b=[];if(w[a]&&w[a].attrs)for(var c in w[a].attrs)b.push(c);return b}function n(a){w=a&&"2.0"===a.v?a.config:{};v=a&&a.meta||{}}function o(a,b,c){if(w[a]&&w[a].attrs&&w[a].attrs[b])if("undefined"==typeof c)delete w[a].attrs[b];else{delete w[a].attrs[b][c];y.isEmptyLiteral(w[a].attrs[b])&&delete w[a].attrs[b];y.isEmptyLiteral(w[a].attrs)&&delete w[a].attrs;y.isEmptyLiteral(w[a])&&delete w[a]}}function p(a,b){return"{{"+[a,b].join(".")+"}}"}function q(a){return x.isStyleColorProperty(a)?"colors":"font-family"===a?"fonts":void 0}function r(a){var b=y.cloneObj(a.meta),c=JSON.stringify(a);c=s(b,c,"colors");c=s(b,c,"fonts");var d=JSON.parse(c);d.meta=b;return d}function s(a,b,c){for(var d,e=y.objectKeysAsArray(a[c]),f=1,g=0;g<e.length;g++){d=e[g];if(-1===b.indexOf("{{"+c+"."+d+"}}"))delete a[c][d];else{b=b.replace(new RegExp("{{"+c+"."+d+"}}","g"),"{{"+c+"."+f+"}}");a[c][f]=a[c][d];d!=f&&delete a[c][d];f++}}return b}function t(a,b){if(v&&v[a]){for(var c in v[a])if(v[a][c]===b)return c;for(var d=1;;d++)if(!v[a][d])return d}return 1}function u(a){if("string"==typeof a){var b=a.match(/\{\{(.*)\}\}/);if(b&&2===b.length){var c=b[1].split(".");return i(c[0],c[1])}return a}return a}var v,w,x=lpTag.unifiedWindow.AWCUtils,y=lpTag.unifiedWindow.applicationUtils;n(a);return{removeItem:c,setProperty:b,getProperty:f,getAvailableAttributes:m,setStyle:h,getStyle:g,setOption:d,getOption:e,setMetaProperty:j,setMeta:k,getMetaProperty:i,getConfiguration:l}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Themer=function(a,b,c){function d(a){var b=window.lpTag.taglets.lpSecureStorage.v;return"https://"+a+"/le_secure_storage/"+(b?b:"")}function e(a,b){O&&"string"==typeof a&&(a=I(a));var c=R.createDomContainer(a);f(c,b);return c.innerHTML}function f(a,b){b=b||{removeThemeAttrs:!0};var c=b.configuration?new T(b.configuration):J;E(c);var d,e=a.querySelectorAll("["+P+"]");h(a,c);for(var f=0;f<e.length;f++){d=e[f];h(d,c);b.removeThemeAttrs&&m(d)}}function g(a,b){return J.getStyle(a,b)}function h(a,b){var c=a.getAttribute(P);if(c){if(L[c])return;l(a,c,b);i(a,c,b)}}function i(a,b,c){var d,e,f,g=U.options;for(var h in g){d=g[h];f=d.query?a.querySelectorAll(d.query):a;e=c.getOption(b,d.name);j(f,d.values,e)}}function j(a,b,c){var d,e=[];for(var f in b)b[f].name===c?d=b[f].cssClass:e.push(b[f].cssClass);if("undefined"!=typeof d){a=S.isNodeList(a)?a:[a];for(var g=0;g<a.length;g++){S.addClassByArray(a[g],d);S.removeClassByArray(a[g],e)}}}function k(a){var b,c,d,e,f=lpTag.unifiedWindow.ThemeConfiguration.styleInference;for(var g in f){c=f[g];for(var h in c){d=c[h];b=a.getStyle(g,[h]);if("undefined"!=typeof b)for(var i=0;i<d.length;i++){e=d[i];a.setStyle(e.target,e.prop||h,b,e.override||!1)}}}}function l(a,b,c){for(var d=c.getAvailableAttributes(b),e=0;e<d.length;e++)if("style"===d[e])if(O){var f=c.getStyle(b);for(var g in f)f.hasOwnProperty(g)&&(a.style[g]=f[g])}else if(a.getAttribute("style")){var h=n(a,c.getStyle(b));a.setAttribute(d[e],h)}else a.setAttribute(d[e],o(c.getStyle(b)));else"src"===d[e]&&"IMG"===a.tagName?a.setAttribute(d[e],F(c.getProperty(b,"src"))):a.setAttribute(d[e],c.getProperty(b,d[e]))}function m(a){a.removeAttribute(P);a.removeAttribute(Q)}function n(a,b){var c=p(a);for(var d in b)c[d]=b[d];return o(c)}function o(a){var b=[];for(var c in a)b.push(c+":"+a[c]);return b.join(";")}function p(a){var b=a.getAttribute("style"),c={};if(b)for(var d,e=b.split(";"),f=0;f<e.length;f++)if(e[f].length){d=e[f];d=e[f].split(":");c[d[0]]=d[1]}return c}function q(){return{transcript_bubble_visitor:U.options.TRANSCRIPT_BUBBLE_VISITOR_TEXT.name,transcript_bubble_agent:U.options.TRANSCRIPT_BUBBLE_AGENT_TEXT.name,transcript_time:U.options.TRANSCRIPT_TIME.name,transcript_message:U.options.TRANSCRIPT_MESSAGE.name,top:U.options.TOP_TEXT.name,input:U.options.INPUT_TEXT.name,actionsMenu:U.options.ACTIONSMENU_ACTIONITEM_TEXT.name,transcript_bubble_rich_content:U.options.TRANSCRIPT_BUBBLE_RICH_CONTENT}}function r(a,b){V.getValue({key:_.storage.valueKeys.overridenFontInStorage,
appName:_.storage.appName,site:N,domain:Z.secureStorageLocation,success:a,error:b,firstParty:!0})}function s(a,b,c){V.setValue({key:_.storage.valueKeys.overridenFontInStorage,appName:_.storage.appName,site:N,value:a,domain:Z.secureStorageLocation,ttl:$,success:b,error:c,firstParty:!0})}function t(a){W.debug("Successfully added value to Secure storage for accountId: "+N+" key: "+_.storage.valueKeys.overridenFontInStorage+" value :"+a)}function u(a){W.error("Secure storage transaction failed with error ",a)}function v(a){if(a&&"string"==typeof a&&a.length>0){W.debug("Successfully retrieved value from Secure storage for accountId: "+N+" key: "+_.storage.valueKeys.overridenFontInStorage+" value :"+a);M=a}else{M=D();s(M,t,u)}}function w(a){W.error("Secure storage transaction failed with error ",a);M=D();s(M,t,u)}function x(){Z.secureStorageDomain=lpTag&&lpTag.csds&&lpTag.csds.getDomain(_.csds.leCdnDomain);Z.secureStorageLocation=d(Z.secureStorageDomain)}function y(a,b,c){K=b||{};L=c||{};J=new T(a);N=K.accountId;var d=q();O=!!K.enableStrictCspMode;Object.keys(d).forEach(function(a){var b=J.getOption(a,d[a]);"undefined"!=typeof b&&b&&(X[d[a]]=b);b&&"transcript_bubble_agent"===a&&(X.transcript_bubble_rich_content=!0)});if(0!==Object.keys(X).length){x();r(v,w)}}function z(){return["META","STYLE","SCRIPT"]}function A(a,b){return window.getComputedStyle(a,null).getPropertyValue(b)}function B(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}function C(a){var b=Array.prototype.slice.call(a.getElementsByTagName("*"),0),c=z();return b.filter(function(a){if(a&&a.className&&("string"==typeof a.className||a.className instanceof String)&&a.className.indexOf("lp_")>-1||("string"==typeof a.nodeName||a.nodeName instanceof String)&&c.indexOf(a.nodeName)>-1)return!1;if(a.hasChildNodes())for(var b=0;b<a.childNodes.length;b++)if(1===a.childNodes[b].nodeType)return!1;return!0})}function D(){var a={},b="",c=0,d=C(document);d.forEach(function(d){if(B(d)){var e=A(d,"font-family");a[e]=a[e]>=1?a[e]+1:1;if(a[e]>=c&&"system-ui"!==e){b=e;c=a[e]}}});return b}function E(a){var b=a.getProperty("logoAltText","alt"),c=a.getProperty("logoAltText","title"),d=a.getProperty("logoTarget","title");b!==c&&a.setProperty("logoAltText","title",b);b!==d&&a.setProperty("logoTarget","title",b);var e=a.getProperty("agentImage","src");"undefined"==typeof e&&a.setProperty("agentImage","src",H("agentUrl"));var f=a.getProperty("logoImage","src");"undefined"==typeof f&&a.setProperty("logoImage","src",H("logoUrl"));var g=a.getOption("input",U.options.ICON_SET.name);"undefined"==typeof g&&a.setOption("input",U.options.ICON_SET.name,U.options.ICON_SET.values.DARK.name);var h=a.getOption("action",U.options.ICON_SET.name);"undefined"==typeof a.getOption("actionsMenu",U.options.ICON_SET.name)&&"undefined"!=typeof h&&a.setOption("actionsMenu",U.options.ICON_SET.name,h);Y||Object.keys(X).forEach(function(b){if("string"==typeof M&&M.length>0){a.setProperty(b,"style","font-family",M,!0);Y=!0}});k(a)}function F(a){var b=H("imagesRepository");return b&&!G(a)?[b,a].join("/"):a}function G(a){return null!==a.match(/^http[s]*/)}function H(a){return K[a]}function I(a){if("string"==typeof a){a=a.replace(/(<[^>]+) style=".*?"/gi,"$1");a=a.replace(/<[^>]+ style=".*?" \/>/gi,function(a){return a.replace(/ style=".*?"/gi,"")})}return a}var J,K,L,M,N,O,P="data-lp-cust-id",Q="data-lp-type",R=lpTag.unifiedWindow.AWCUtils,S=lpTag.unifiedWindow.applicationUtils,T=lpTag.unifiedWindow.ThemeConfiguratorFactory,U=lpTag.unifiedWindow.ThemeConfiguration,V=lpTag.taglets.lpSecureStorage,W=lpTag.unifiedWindow.log,X={},Y=!1,Z={},$=6e5,_={csds:{leCdnDomain:"leCdnDomain"},storage:{appName:"themerStorage",valueKeys:{overridenFontInStorage:"overridenFontInStorage_$_"+document.URL}}};y(a,b,c);return{processHTML:e,processDomEl:f,getStyle:g}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.defaultStyle={v:"2.0",config:{logo:{attrs:{style:{"text-align":"left","background-color":"{{colors.3}}"}}},transcript_time:{attrs:{style:{color:"{{colors.6}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_visitor:{attrs:{style:{"background-color":"{{colors.3}}","border-color":"{{colors.4}}"}}},actionsMenu_actionItem_text:{attrs:{style:{color:"{{colors.7}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},input_text:{attrs:{style:{color:"{{colors.2}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_agent_text:{attrs:{style:{color:"{{colors.3}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},agent:{attrs:{style:{"background-color":"{{colors.3}}"}}},transcript_message:{attrs:{style:{color:"{{colors.6}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_visitor_text:{attrs:{style:{color:"{{colors.5}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_visitorArrowBorder:{attrs:{style:{"border-left-color":"{{colors.4}}"}}},transcript_bubble_agent:{attrs:{style:{"background-color":"{{colors.1}}","border-color":"{{colors.4}}"}}},mainArea:{attrs:{style:{"background-color":"{{colors.3}}"}}},transcript_bubble_agentArrowBorder:{attrs:{style:{"border-right-color":"{{colors.4}}"}}},input:{attrs:{style:{color:"{{colors.6}}","font-style":"normal","background-color":"{{colors.3}}","font-family":"{{fonts.1}}","font-weight":"normal"}},options:{icon_set:"dark"}},transcript_bubble_visitorArrow:{attrs:{style:{"border-left-color":"{{colors.3}}"}}},actionsMenu:{attrs:{style:{"background-color":"{{colors.3}}"}}},action:{options:{icon_set:"dark"}},top_text:{attrs:{style:{color:"{{colors.3}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_agentArrow:{attrs:{style:{"border-right-color":"{{colors.1}}"}}},top:{attrs:{style:{"background-color":"{{colors.1}}"}},options:{icon_set:"bright"}}},meta:{colors:{3:"#FFFFFF",2:"#000000",1:"#0363ad",7:"#6d6e71",6:"#6D6E70",5:"#404041",4:"#b6b6b6",8:"#134cd1"},fonts:{1:"Arial,Helvetica,sans-serif"}}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.AWCUtils=function(){function a(a){for(var b=["background-color","border-left-color","border-right-color","border-top-color","border-bottom-color","border-color","color"],c=0;c<b.length;c++)if(b[c]===a)return!0;return!1}function b(a){var b=document.createElement("div");c.isDomNode(a)?b.appendChild(a):b.innerHTML=a;return b}var c=lpTag.unifiedWindow.applicationUtils;return{createDomContainer:b,isStyleColorProperty:a}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.accessibilityManager=lpTag.unifiedWindow.accessibilityManager||function(a){function b(a){if(a.unifiedConf.keyboardOnlyFocus){l=!0;e();document.addEventListener("keydown",c);d.bind(this)}}function c(a){var b=document.activeElement;setTimeout(function(a){d(a[0],a[1])},100,[a,b])}function d(a,b){if(b!==document.activeElement){j.info("Keyboard changed input from "+b.text+" to "+document.activeElement.text);f();k=!0;document.removeEventListener("keydown",c)}}function e(){i=document.createElement("style");i.type="text/css";i.textContent="#lpChat *:focus {outline: none !important}";document.head.appendChild(i)}function f(){i&&(i.textContent="")}function g(){return k}function h(){return l}var i,j=lpTag.unifiedWindow.log,k=!1,l=!1;b(a);return{init:b,checkForKeyboardNavigation:c,hideFocus:e,showFocus:f,getKeyboardNavigationDetected:g,getKeyboardOnlyFocus:h}};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.soundManager=function(a,b,c,d){function e(a,b,c){s=c.audioRepository;w=b;x=a.uiModel;y=lpTag.unifiedWindow.uiModelPath;z=c.poppedOut;A=c.external;t=h();u=m();v=!!u;a.chatModel.bind(lpTag.unifiedWindow.chatModelPath.LINES,q,this,!1);if(v)for(var d in E)E.hasOwnProperty(d)&&i(E[d])}function f(){return(w.isDesktop()||w.isAndroid())&&x.get(y.WINDOW_SOUND)&&(!z&&p()||z&&!p()||A)}function g(a){function b(b){a.template=b;c.innerHTML=a.template;document.body.appendChild(c);a.callback&&"function"==typeof a.callback&&a.callback.call(null,c)}var c=document.createElement("audio");c.style.position="absolute";c.style.left="-1000px";c.style.top="-1000px";a.templateFile?lpTag.unifiedWindow.BaseViewController.prototype.loadResource(a.templateFile,b):b(a.template)}function h(){var a=document.createElement("audio"),b=!!a.canPlayType;a=null;return b&&w.isAudioSupported()}function i(a){var b;if(a.fileName){b=document.querySelector(C);if(b){a.audioTag=b;j(a)()}else g(t?{template:"<audio data-lp-point='audio_tag' controls hidden preload='auto' aria-live='polite'></audio>",callback:j(a)}:{template:"<object data-lp-point='audio_tag' classid='clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6' style='display:none'><param name='uimode' value='invisible'><param name='autostart' value='false'></object>",callback:j(a)})}}function j(a){return function(){a.audioTag||(a.audioTag=document.querySelector(C));if(a.audioTag&&!c.connectorsSfConfig){var b=s+"/"+a.fileName+"."+u;t?a.audioTag.src=b:a.audioTag.url=b;t&&setTimeout(function(){a.audioTag.volume=0;try{var b=a.audioTag.play();void 0!==b&&b.then(function(){},function(a){B.info("Cannot play sound")})}catch(c){B.info("Cannot play sound")}},10)}}}function k(a){var b,c=document.querySelector(D);if(c)b=c;else{b=document.createElement("track");a.audioTag.appendChild(b)}b.kind="captions";b.setAttribute("data-lp-point","track_tag");if(a==E.NEW_LINE_MAX){b.src=s+"/kpSoundEffectCaption.vtt";b.label="pop";a.audioTag.setAttribute("aria-label","Conversation Notification")}else if(a==E.NEW_LINE_MIN){b.src=s+"/systemSoundEffectCaption.vtt";b.label="ping";a.audioTag.setAttribute("aria-label","Conversation System Notification")}}function l(){var a=document.createElement("audio"),b=!(!a.canPlayType||!a.canPlayType('audio/wav; codecs="1"').replace(/no/,""));a=null;return b}function m(){var a;if(t){a="mp3";l()&&(a="wav")}return a}function n(a){k(a);if(v&&f()&&a.audioTag&&!c.connectorsSfConfig&&r())if(t){a.audioTag.volume=F;try{var b=a.audioTag.play();void 0!==b&&b.then(function(){},function(a){B.info("Cannot play sound")})}catch(d){B.info("Cannot play sound")}}else a.audioTag.controls.play()}function o(){return x.get(y.WINDOW_MAXIMIZED)}function p(){return x.get(y.WINDOW_EMBEDDED)}function q(a){var b=!1;if(a&&a.newValue)for(var c=0;c<a.newValue.length;c++)"agent"!==a.newValue[c].source||a.newValue[c].history||(b=!0);b&&n(o()?E.NEW_LINE_MAX:E.NEW_LINE_MIN)}function r(){return!(d&&d.isSupported&&d.nativeEnabled()&&d.permissionGranted()&&b.isMobile())}var s,t,u,v,w,x,y,z,A,B=lpTag.unifiedWindow.log,C='audio[data-lp-point="audio_tag"]',D='track[data-lp-point="track_tag"]',E={NEW_LINE_MIN:{fileName:"systemSoundEffect"},NEW_LINE_MAX:{fileName:"kpSoundEffect"}},F=1;e(a,b,c)};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.uiframework=window.lpTag.uiframework||{};lpTag.uiframework.scrollManager=function(a){function b(a,b){x=lpTag.unifiedWindow.uiModelPath;u=a.isIOS();v=a.isDesktop();w=b}function c(a,b){if(!v){("undefined"==typeof b||null===b)&&(b=!0);n(a,z);A.push({view:a,bounce:b});!y&&w.get(x.WINDOW_MAXIMIZED)&&e()}}function d(a){if(!v){o(a,z);for(var b=[],c=0;c<A.length;c++)A[c].view!==a&&b.push(A[c]);A=b;0===A.length&&f()}}function e(){if(!y&&!v&&0!==A.length){document.body.addEventListener("touchmove",j,!1);document.body.addEventListener("touchstart",g,!1);document.body.addEventListener("touchend",h,!1);y=!0}}function f(){if(y&&!v){document.body.removeEventListener("touchmove",j);document.body.removeEventListener("touchstart",g);document.body.removeEventListener("touchend",h);y=!1}}function g(a){if(r){clearTimeout(r);r=null;i()}q=!1;F=!0;s=!1;B=a.touches[0].clientY;C=B;D=-1;p=null}function h(a){if(p&&s){q=!1;var b=E/400;p.style[m()]="all "+b+"s ease-out";p.style.webkitTransform="translateY(0px)";F=!1;r&&clearTimeout(r);r=setTimeout(i,1e3*b+50)}}function i(){if(p){p.style[m()]="";delete p.style[m()];p=null;D=-1}}function j(b){var c=!1;if(q)c=!0;else{c=k(b);q=!0}if(c){if(p&&A[D].bounce){s=!0;var d,e=b.touches[0].clientY-C;d=u?[{height:.1*a.innerHeight,scale:.85},{height:.3*a.innerHeight,scale:.55},{height:.5*a.innerHeight,scale:.35},{height:.75*a.innerHeight,scale:.2},{height:.9*a.innerHeight,scale:.1}]:[{height:.05*a.innerHeight,scale:.75},{height:.1*a.innerHeight,scale:.4},{height:.9*a.innerHeight,scale:.08}];var f=0>e?-1:1;e=e>0?e:-1*e;E=0;for(var g=0;g<d.length;g++){var h=g>0?d[g].height-d[g-1].height:d[g].height;if(e<=d[g].height){E+=(e-(0===g?0:d[g-1].height))*d[g].scale;break}E+=h*d[g].scale}if(E>0){t=Math.round(E*f);p.style[l()]="translateY("+t+"px)"}}b.preventDefault()}else{D=-1;p=null;b.stopPropagation()}}function k(a){var b=!1;if(y)for(var c=a.target||a.relatedTarget||a.srcElement;null!==c&&!p;){if(c.className&&c.className.indexOf(z)>=0){p=c;b=!1}c=c.parentNode}if(p&&p.parentNode){p.parentNode.style["-webkit-overflow-scrolling"]="touch";if(0>D)for(var d=0;d<A.length;d++)if(A[d].view===p){D=d;break}var e=parseInt(getComputedStyle(p,"height").height,10);if(0===p.parentNode.scrollTop){if(0===B){B=a.touches[0].clientY;b=!0}(a.touches[0].clientY>B||e<=p.parentNode.clientHeight)&&(b=!0)}else e<=p.parentNode.clientHeight+p.parentNode.scrollTop&&B>a.touches[0].clientY&&(b=!0)}else b=!0;return b}function l(){return""===document.body.style.mozTransform?"-moz-transform":""===document.body.style.webkitTransform?"-webkit-transform":""===document.body.style.OTransform?"-o-transform":"transform"}function m(){return""===document.body.style.MozTransition?"-moz-transition":""===document.body.style.WebkitTransition?"-webkit-transition":""===document.body.style.OTransition?"-o-transition":"transition"}function n(a,b){"string"==typeof a&&(a=this.getFirstElement(a));b=b.constructor===Array?b:[b];if(a&&1===a.nodeType){var c=a.className;c&&c.indexOf(b)<0&&(c+=" "+b);c=c.replace(/^\s\s*/,"");a.className=c}else this.logger.error("Unable to add class to "+a+" Class: "+b,"addClass")}function o(a,b){for(var c=a.className.split(" "),d=[],e=0;e<c.length;e++)c[e]!==b&&d.push(c[e]);a.className=d.join(" ")}var p,q,r,s,t,u,v,w,x,y=!1,z="lpclass_scrollable",A=[],B=0,C=0,D=-1,E=0,F=!1;return{init:b,registerView:c,unregisterView:d,enable:e,disable:f}}(window);window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpDragManager=lpTag.taglets.lpDragManager||function(a){function b(a){var b=D(),c=lpTag.taglets&&lpTag.taglets.lpUnifiedWindow&&lpTag.taglets.lpUnifiedWindow.inspect(),d=c&&c.conf&&c.conf.enableStrictCspMode;J[b]=i(a);J[b].bindFunc=m(J[b],d);j(J[b]);h(J[b].drag);return b}function c(a){if(J[a]){k(J[a]);for(var b in J[a])if(J[a].hasOwnProperty(b)){J[a][b]=null;delete J[a][b]}delete J[a];return!0}return!1}function d(){}function e(){}function f(a,b,c,d){a&&P?a.addEventListener(b,c,d===!0):a&&a.attachEvent&&a.attachEvent("on"+b,c)}function g(a,b,c){a&&P?a.removeEventListener(b,c):a&&a.detachEvent&&a.detachEvent("on"+b,c)}function h(a){var b=A(a);"absolute"!==b.position&&"fixed"!==b.position&&(a.style.position="absolute")}function i(a){var b=a.drag,c=a.anchor||b,d=a.parent||b.parentNode||document.body;return{anchor:c,drag:b,parent:d,onDrag:a.onDrag,onDragEnd:a.onDragEnd,horizontal:a.horizontal===!0,vertical:a.vertical===!0,limitToParent:a.containParent===!0,context:a.context}}function j(a){f(a.anchor,"mousedown",a.bindFunc);f(a.drag,"keydown",function(b){(b.altKey&&b.code.includes("Arrow")||b.altKey)&&a.bindFunc(b)})}function k(a){g(a.anchor,"mousedown",a.bindFunc);g(a.drag,"keydown",a.bindFunc)}function l(a){g(a.anchor,"mouseup",w);g(a.drag,"keyup",w)}function m(a,b){return function(c){c=c||event;f(a.anchor,"mouseup",w);a.anchorData=B(a.anchor);a.parentData=B(a.parent);a.dragElementData=B(a.drag);a.diff={left:c.clientX-a.dragElementData.left,top:c.clientY-a.dragElementData.top};a.newDrag=!0;H=a;b?document.body.classList.add("lp-not-selectable"):I=n();L=!0;if(c.altKey&&c.code.includes("Arrow")){f(a.drag,"keyup",w);q(c)}return!1}}function n(){var a={"*,body,.lpDragActive":{"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none","-o-user-select":"none"},"html *::selection,body *::selection,button::selection,body::selection,*::selection":{background:"transparent",color:"inherit"}};document.body.setAttribute("unselectable","on");return p(a,"lpUnselectable")}function o(){var a=document.getElementById("lpUnselectable");if(a){a.parentNode.removeChild(a);I=null}document.body.removeAttribute("unselectable")}function p(a,b){if(P){var c=document.createElement("style"),d="";c.id=b;for(var e in a){d+=e+"{";for(var f in a[e])d+=f+":"+a[e][f]+";";d+="}"}c.appendChild(document.createTextNode(d));document.getElementById(b)||(document.head||document.getElementsByTagName("head")[0]).appendChild(c);return c}return null}function q(a){var b,c,d=-50;if(a.keyCode!==!1){(39==a.keyCode||40==a.keyCode)&&(d=Math.abs(d));if(H){M=!1;a=a||event;37!==a.keyCode&&39!==a.keyCode||!H.horizontal||(b=t(d));38!==a.keyCode&&40!==a.keyCode||!H.vertical||(c=u(d));v(c,b);Q=!0;if(H.newDrag===!0){setTimeout(function(){H&&E(H.onDrag,H,H.context)},0);H.newDrag=!1}P&&37!=a.which&&38!=a.which&&39!=a.which&&40!=a.which&&(M=!0);H&&M&&w();return!1}}}function r(a){var b=a.clientX-H.diff.left;b>H.parentData.width-H.dragElementData.width&&(b=H.parentData.width-H.dragElementData.width);b<H.parentData.left&&(b=H.parentData.left);(b+H.dragElementData.width>H.parentData.width+H.parentData.left||a.clientX<0)&&(b=0);return b}function s(a){var b=a.clientY-H.diff.top;b>H.parentData.top+H.parentData.height-H.dragElementData.height&&(b=H.parentData.top+H.parentData.height-H.dragElementData.height);b<H.parentData.top&&(b=H.parentData.top);(b+H.dragElementData.height>H.parentData.height+H.parentData.top||a.clientY<0)&&(b=0);return b}function t(a){var b=H.dragElementData.left+a;b>H.parentData.width-H.dragElementData.width&&(b=H.parentData.width-H.dragElementData.width);b<H.parentData.left&&(b=H.parentData.left);b+H.dragElementData.width>H.parentData.width+H.parentData.left&&(M=!0);return b}function u(a){var b=H.dragElementData.top+a;b>H.parentData.top+H.parentData.height-H.dragElementData.height&&(b=H.parentData.top+H.parentData.height-H.dragElementData.height);b<H.parentData.top&&(b=H.parentData.top);b+H.dragElementData.height>H.parentData.height&&(M=!0);return b}function v(a,b){var c=F(),d=B(H.drag);if(H.horizontal)if(H.drag.style.right&&"auto"!==H.drag.style.right){H.drag.style.right=c.width-b-d.width+"px";H.drag.style.left="auto"}else{H.drag.style.left=b+"px";H.drag.style.right="auto"}if(H.vertical)if(H.drag.style.right&&"auto"!==H.drag.style.bottom){H.drag.style.bottom=c.height-a-d.height+"px";H.drag.style.top="auto"}else{H.drag.style.top=a+"px";H.drag.style.bottom="auto"}}function w(){if(H&&H.onDragEnd){var a=B(H.drag),b=x(a,H.dragElementData);if(Q&&b>R){var c=z(H.drag);E(H.onDragEnd,c,H.context);setTimeout(function(){L=!1},10)}else L=!1;l(H)}else L=!1;document.body.classList.remove("lp-not-selectable");o();H=null;Q=!1}function x(a,b){var c=0,d=0,e=0,f=0;if(!a||!b)return 0;a=y(a);b=y(b);a.top!==b.top&&(c=a.top>b.top?a.top-b.top:b.top-a.top);a.right!==b.right&&(f=a.right>b.right?a.right-b.right:b.right-a.right);a.left!==b.left&&(e=a.left>b.left?a.left-b.left:b.left-a.left);a.bottom!==b.bottom&&(d=a.bottom>b.bottom?a.bottom-b.bottom:b.bottom-a.bottom);var g=Math.max(Math.abs(c),Math.abs(d)),h=Math.max(Math.abs(e),Math.abs(f));return h+g}function y(a){a.top=C(a.top);a.bottom=C(a.bottom);a.left=C(a.left);a.right=C(a.right);return a}function z(a){var b=B(a),c=A(a,!0);b.left=""!==c.left?c.left:b.left;b.right=""!==c.right?c.right:b.right;b.bottom=""!==c.bottom?c.bottom:b.bottom;b.top=""!==c.top?c.top:b.top;return b}function A(a,b){var c;b||(document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a):a.currentStyle&&(c=a.currentStyle));return c||a.style}function B(a){var b,c,d=!1,e=a.getBoundingClientRect(),f=A(a),g={right:C(f.borderRight),left:C(f.borderLeft),top:C(f.borderTop),bottom:C(f.borderBottom)},h={right:C(f.marginRight),left:C(f.marginLeft),top:C(f.marginTop),bottom:C(f.marginBottom)};if(a===document.body){d=!0;var i=F();b=i.width;c=i.height}else{b=(e.width||a.clientWidth||0)+g.right+g.left+h.right+h.left;c=(e.height||a.clientHeight||0)+g.top+g.bottom+h.top+h.bottom}return{width:b,height:c,left:d?0:e.left,right:e.right,top:d?0:e.top,bottom:e.bottom,border:g,margin:h}}function C(a){var b=parseInt(a,10);return isNaN(b)?0:b}function D(){return K++ +"_"+((new Date).getTime()+Math.floor(1e6*Math.random()))}function E(a,b,c){if("function"==typeof a)try{a.call(c||null,b)}catch(d){}}function F(){var a=document.documentElement,b=document.body,c=a.clientWidth||b.clientWidth||window.innerWidth,d=a.clientHeight||b.clientHeight||window.innerHeight;return{width:c,height:d}}function G(){return L}var H,I,J={},K=0,L=!1,M=!1,N="0.5.0",O="lpDragManager",P=!!window.addEventListener,Q=!1,R=20;f(document,"mousemove",function(a){var b,c;if(L&&H){M=!1;a=a||event;H.horizontal&&(b=r(a));H.vertical&&(c=s(a));v(c,b);Q=!0;if(H.newDrag===!0){setTimeout(function(){H&&E(H.onDrag,H,H.context)},0);H.newDrag=!1}P&&1!=a.which&&(M=!0);H&&M&&w();return!1}});f(document,"mouseup",function(a){L&&H&&w()});f(document,"keyup",function(a){L&&H&&a.altKey&&a.code.includes("Arrow")&&w()});return{v:N,name:O,isDragging:G,init:d,start:e,bindDrag:b,unbindDrag:c}};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.ViewPortManager=function(a){function b(){var a=screen.availWidth/window.innerWidth;H.debug("getCurrentScale, currentScale="+a+" height="+window.innerHeight+" width="+window.innerWidth,G);return a}function c(){m()}function d(a,c){var d;if(x){var e=n();o();d=w(x.content);if(!l(d,a)){A=d;s(v(a));z=a;e.scale!==b()&&f(c,e)}}}function e(a,b,c,e){if(x){var f={width:"device-width","initial-scale":a,"minimum-scale":b||a,"maximum-scale":c||a,"user-scalable":"string"==typeof e?e:"no"};d(f)}}function f(a,b){p(b);q(a)}function g(){return t(z)}function h(){return I.cloneExtend(z||{})}function i(a){F=a;I.waitForBody(k)}function j(){if(!x){var a=document.getElementsByName("viewport");a&&(x=a[a.length-1])}}function k(){j();if(x){y=w(x.content);z||(z=y);K=t(y);K&&u()}else J=!1}function l(a,b){var c=!0;for(var d in a)if(b.hasOwnProperty(d)&&b[d]!==a[d]){c=!1;break}return c}function m(){if(J&&x&&A){y["initial-scale"]=B;d(y)}}function n(){return{top:C,left:D,scale:B}}function o(){B=b();D=document.body.scrollLeft;C=document.body.scrollTop}function p(a){if(E){E.style.top=("undefined"!=typeof a?a.top:document.body.scrollTop)+"px";E.style.left=("undefined"!=typeof a?a.left:document.body.scrollLeft)+"px"}}function q(a){if(E){E.focus();if(F.isIOS()){E.click();setTimeout(r(a),40)}else r(a)()}}function r(a){return function(){E.blur();I.runCallback(a)}}function s(a){x.content=a}function t(a){var b=!1,c=a["user-scalable"],d=[a["minimum-scale"],a["maximum-scale"],a["initial-scale"]];if("no"===c)b=!1;else for(var e=0;e<d.length&&!b;e++)for(var f=e;f<d.length;f++)if(e!==f&&"undefined"!=typeof d[e]&&"undefined"!=typeof d[f]&&d[e]!==d[f]){b=!0;break}return b}function u(){E=document.createElement("input");E.type="text";E.style.opacity=0;E.style.top="-1000px";E.style.left="-1000px";E.style.position="absolute";document.body.appendChild(E)}function v(a){var b="";for(var c in a)if(a.hasOwnProperty(c)){b+=a[c]===!0?c:c+"="+a[c];b+=", "}return b.substring(0,b.length-2)}function w(a){var b,c,d={};if(a){b=a.split(",");for(var e=0;e<b.length;e++){c=b[e].split("=");d[I.trimAndLower(c[0])]=I.trimAndLower(c[1])}}return d}var x,y,z,A,B,C,D,E,F,G="ViewPortManager",H=lpTag.unifiedWindow.log,I=lpTag.taglets.lpUtil,J=!0,K=!1;i(a);this.reset=c;this.setScale=e;this.getViewPortInfo=h;this.getCurrentScale=b;this.isPageZoomable=g};window.lpTag=window.lpTag||{};lpTag.unifiedWindow.addLanguage({chattingWith:"{{agent_name}}",connecting:"Connecting",message_us:"Message us",ended:"Thank you",loader_title:"Loading",chatting:"Chat",preChat:"Chat with us",preSms:"Text us",postChat:"Thank you",offline:"Contact us",endedAndTranscriptShown:"Chat transcript",windowRegionLabel:"Chat window",minimizedChatWindowLabel:"Minimized chat window",headerRegionLabel:"Chat window header",transcriptRegionLabel:"Message transcript",bottomRegionLabel:"Send a message",previewAttachmentLabel:"Preview attachment",fileAttachmentPreviewLabel:"File attachment preview",attachmentCaptionLabel:"Attachment caption",closeAttachmentLabel:"Close Attachment",attachedImageLabel:"Attached image",closeWindowAreYouSureMsg:"Closing will end conversation",closeWindowOkBtn:"OK",closeWindowCancelBtn:"Cancel",closeChatAreYouSureMsg:"Are you sure you want to disconnect?",closeChatDisconnectBtn:"Disconnect",closeChatCancelBtn:"Cancel",tooltip_NewMessageNotification:"You have {{notificationCount}} new {{notificationMsg}}",tooltip_EmailTranscriptSentConfirmation:"Transcript will be sent after chat ends",tooltip_Message:"message",tooltip_Messages:"messages",tooltip_Close:"Close",tooltip_Download:"You may be required to allow pop-ups to download files",tooltip_ExpandActionMenu:"Action menu",tooltip_CollapseActionMenu:"Action menu",tooltip_SendIcon:"Send",tooltip_SendIconDisabled:"You are not connected to chat",tooltip_Minimize:"Minimize",tooltip_Maximize:"Maximize",tooltip_MuteButton:"Mute",tooltip_UnmuteButton:"Unmute",tooltip_Print:"Print transcript",tooltip_Email:"Email transcript",tooltip_EndChat:"End conversation",tooltip_Popout:"Pop out",tooltip_Popin:"Pop in",tooltip_Lock:"This is a secure chat",tooltip_Loader:"Loading",tooltip_EmailClearField:"Clear",tooltip_AutoBlockCreditCardPatternsMessage:"We have blocked some of your personal details from displaying. Please do not share personal or sensitive information during the conversation.",tooltip_open_widgets:"Open slider widgets",tooltip_close_widgets:"Close slider widgets",tooltip_refresh_slider:"Refresh widget",tooltip_minimize_slider:"Minimize widget",tooltip_maximize_slider:"Maximize widget",tooltip_Connection:"Establishing connection",tooltip_ConnectionIssue:"Connection unavailable",tooltip_ConnectionReEstablished:"Connection re-established",tooltip_CloseToStartChat:"To start a chat please close this window",tooltip_CloseToStartConversation:"To start a messaging conversation please close this window",tooltip_FileTypeValidation:"File type should be PNG, JPG or GIF",tooltip_FileTypeValidationExpanded:"File type should be PNG, JPG, GIF, PDF, DOCX, XLSX or PPTX",tooltip_FileSizeValidation:"File size should be 5 MB or less",tooltip_FileSizeValidation15:"File size should be 15 MB or less",tooltip_EmojiIcon:"Emoji picker",windowTitle:"Need help?",defaultTextBoxText:"Type your message",welcomeMessage:"How can I help you today?",thankYouMessage:"Thank you for connecting with us",thankYouMessagePreSms:"Text conversation started with {{phoneNumber}}. A representative should text you soon.",visitorChatLineSentError:"Error sending message",textAreaDisabledDefaultMessage:"Select an option above",dragFilesMessage:"Drag files here",dropFilesMessage:"Drop files here",at:"at",me:"Me",you:"You",info:"Info",agent:"Agent",authExpired:"Your verification has expired. You are being directed to re-login. Please press here in order to redirect immediately.",unauthExpired:"Your verification has expired. Click below to reload the conversation.",reload:"Reload",redirect:"Redirect",relogin:"Session expired",secureForm_line_send:"{{agentName}} has sent you a Secure Form: {{secureFormName}}",secureForm_link_title_send:"{{agentName}} has sent you a Secure Form",secureForm_line_submit:"The following Secure Form has been submitted: {{secureFormName}}",secureForm_link_title_submit:"The following Secure Form has been submitted",secureFormSubmittedMessage:"The form has been submitted successfully. <br>To protect your information, submitted forms cannot be reopened.",secureFormOpenedInAnotherTabMessage:"The Secure Form could not be opened. Please submit the Secure Form from the tab where the interaction began.",secureFormErrorMessage:"The Secure Form could not be opened. <br>Please contact your agent for assistance.",secureFormTimeOutErrorMessage:"There was a connection problem and the Secure Form could not be opened. <br>Please contact your agent for assistance.",monthFullJanuary:"January",monthFullFebruary:"February",monthFullMarch:"March",monthFullApril:"April",monthFullMay:"May",monthFullJune:"June",monthFullJuly:"July",monthFullAugust:"August",monthFullSeptember:"September",monthFullOctober:"October",monthFullNovember:"November",monthFullDecember:"December",weekDayFullSunday:"Sunday",weekDayFullMonday:"Monday",weekDayFullTuesday:"Tuesday",weekDayFullWednesday:"Wednesday",weekDayFullThursday:"Thursday",weekDayFullFriday:"Friday",weekDayFullSaturday:"Saturday",weekDayShortSunday:"S",weekDayShortMonday:"M",weekDayShortTuesday:"T",weekDayShortWednesday:"W",weekDayShortThursday:"T",weekDayShortFriday:"F",weekDayShortSaturday:"S",monthJanuary:"Jan",monthFebruary:"Feb",monthMarch:"Mar",monthApril:"Apr",monthMay:"May",monthJune:"Jun",monthJuly:"Jul",monthAugust:"Aug",monthSeptember:"Sep",monthOctober:"Oct",monthNovember:"Nov",monthDecember:"Dec",weekDaySunday:"Sun",weekDayMonday:"Mon",weekDayTuesday:"Tues",weekDayWednesday:"Wed",weekDayThursday:"Thurs",weekDayFriday:"Fri",weekDaySaturday:"Sat",daySuffix:"",dayMonthGap:" ",logoAltText:"Logo",agentPicAltText:"Agent picture",lpLogo:"LivePerson logo",errorIconAltText:"Error",a11yNewMessage:"New message",a11yNewStructuredContent:"New message above. There may be form options.",file_sent_from:"File sent from",dialog_email_transcript:"Send transcript to:",EmailTranscriptAction:"Email\ntranscript",inputEmailError:"Enter a valid email address. Format: you@domain.com",defaultEmailInputText:"Enter email*",transcriptSubject:"Your chat transcript",transcriptAreaLabel:"Chat messages",transcriptConvResolvedByAgent:"Conversation closed by the agent {{time}}",transcriptConvResolvedByVisitor:"Conversation closed by you {{time}}",transcriptTtrMessage:"We will respond by {{time}}",transcriptShortlyMessage:"An agent will respond shortly",transcriptTtrOffHoursMessage:"We are currently off-hours. We will answer by {{time}}",transcriptForPhotoSharingImage:"Shared content is not available",transcriptRotatorDefaultMessage:"Loading history",transcriptRotatorFirstMessage:"Still loading",transcriptRotatorSecondMessage:"Failed to load history. ",transcriptRotatorLinkText:"Retry",transcriptPossibleMessages:"There may be new messages since you were last here, please check above",transcriptPossibleMessagesShort:"There may be new messages",transcriptHistoryButtonDisplayText:"Show Previous",transcriptHistoryButtonAriaLabelText:"Show previous conversation button",transcriptHistoryLazyLoadingLabel:"Loading previous conversations",idnvDialogTitle:"Please enter characters {{idnvChar1}} and {{idnvChar2}} from your {{idnvType}}",idnvInputError:"Complete both required fields",idnvFormCancelled:"The identification form was not submitted",idnvFormSubmitted:"You have submitted characters {{idnvChar1}} and {{idnvChar2}} from your {{idnvType}}.",idnvAnswer:"Characters are {{idnvAnswer1}} and {{idnvAnswer2}}",idnvSendLineError:"Identification form could not be submitted",MuteSoundAction:"Mute",UnmuteSoundAction:"Unmute",PrintTranscriptAction:"Print\ntranscript",MarkUrgentAction:"Mark as urgent",DismissUrgentAction:"Dismiss urgent",EndChatAction:"End\nconversation",PopOutAction:"Pop out",PopInAction:"Pop in",PopOutAction_topbar:"Click to pop out",PopInAction_topbar:"Click to pop in",ForgetMeAction:"Clear history",SharePhotoAction:"Send\nimage",AddAttachmentAction:"Add\nattachment",PoweredBy:"Messaging powered by Liveperson",error:"Error",
couldNotConnect:"Oops - unable to connect",tryAgain:"Try again",loadingOnMinimize:"Loading",loading:"Loading",unableToConnect:"Unable to connect",reconnect:"Trying to reconnect",chatEndedOnExternalWindow:"Close window in order to start new chat",externalWindowOpen:"You have an ongoing chat. Return to that window to continue the chat.",unsupportedBrowserMode:"Your browser may be in incognito mode, or it may be blocking third party cookies. Please open a regular browser session to chat, or check your browser privacy settings",cannotResumeChat:"Resume chat from the tab where the interaction began",crossDomainError:"Cannot resume conversation, please return to previous page to continue.",chatAuthError:"Go back to the previous page or log in to continue your conversation.",confirmMessage:"Closing the conversation means that you wont be able to continue even if you go back or log in. Are you sure you want to proceed?",startConversationError:"Please refresh the page and start a new conversation.",connectionUnavailable:"Connection unavailable",sessionExpired:"Session expired",sessionError:"Your session has expired. Please close this window and start a new conversation in order to resume.",sharkSessionExpired:"Please refresh the page and start a new conversation.",agentIsTypingText:"Agent is typing...",forget_me_dialog:"Are you sure you want to clear your conversation history?",forget_me_dialog_subtitle_on_active_chat:"If you choose yes the conversation will end and your conversation history will no longer be available from this device.",forget_me_dialog_subtitle:"If you choose yes your conversation history will no longer be available from this device",forget_me_dialog_close_window:"Are you sure you want to clear your conversation history?",forget_me_dialog_subtitle_on_active_chat_close_window:'If you choose "Yes" the conversation will be closed automatically and your history will no longer be available when you reopen the window.',forget_me_dialog_subtitle_close_window:'If you choose "Yes" the conversation will be closed automatically and your history will no longer be available when you reopen the window.',end_chat_alert:"Are you sure you want to end the conversation?",yes:"Yes",no:"No",preChatButton:"Submit",surveyRequireField:"Complete the required field",surveyRequireOption:"Required field. Select an option.",surveyRequireCheckbox:"Required field. Select at least one option.",surveyRequireNumericField:"Only numbers can be used in this field",surveyRequireValidEmail:"Enter a valid email address. Format: you@domain.com",surveyRequireValidPhone:"Enter a valid phone number.",surveyMaximumChars:"Cannot include more than {{specify_number}} characters in this field",surveyIllilgalCharacters:"One or more of the characters entered are not valid. Do not use: &lt;, &gt;, &quot;",surveyGeneralError:"An error has been encountered. Please review the survey and resubmit.",surveyServerError:"An unexpected error has been encountered. Please resubmit the survey.",surveyLabel:"Complete the survey",offlineButton:"Submit",exitButton:"Submit",defaultSelect:"Choose item from the list",defaultTextArea:"Type your message",emailTextArea:"Enter your email address",submit:"Submit",back:"Back",next:"Next",startChat:"Chat",closeWindowText:"You have an active engagement",cancel:"Cancel",ok:"OK",close:"Close",send:"Send",insertTextHere:"Type your message",on:"On",off:"Off",IN_SESSION:"Resume chat from the tab where the interaction began",IN_PRE_CHAT:"Return to the tab with the survey to start chat",IN_CHAT:"Please refresh the page to resume chat",captchaTitle:"Chat with us",captchaEnterText:"Type the text shown",captchaRefreshButton:"Try another text",captchaAudioButton:"Try audio",captchaTextButton:"Try text",captchaMessageError:"Verification failed. Please try again.",captchaAccessDenied:"Maximum number of tries exceeded",messagingState_PENDING:"Pending",messagingState_SENT:"Sent",messagingState_ACCEPT:"Delivered",messagingState_READ:"Read",messagingState_ERROR:"Not Delivered",messagingState_image_ERROR:"This file failed to upload.<br>Please try another file.",messagingState_image_RETRY:"This file failed to upload.<br>Please try again.",csatLevel_0:"",csatLevel_1:"Very dissatisfied",csatLevel_2:"Dissatisfied",csatLevel_3:"Neutral",csatLevel_4:"Satisfied",csatLevel_5:"Very Satisfied",outOf:"out of",csatTheAgent:"the agent",csatRatingQuestion:"How would you rate your conversation with {{agentName}}?",csatDisclaimer:"Your feedback helps us serve you better. <br>It will not be shared with any customer service representative.",cobrowseInvitation:"I have invited you to join a CoBrowse session, where I will be able to walk you through our website. To start, please click Accept.",cobrowseAcceptBtn:"Accept",cobrowseRejectBtn:"Reject",cobrowseInvitationHeading:"CoBrowse Invitation",cobrowseInvitationMinimizeTitle:"Reject CoBrowse invitation",cobrowseSessionStarting:"Starting CoBrowse session...",cobrowseInvitationRejected:"CoBrowse invitation has been rejected",cobrowseLine_cobrowseAccepted:"CoBrowse invitation accepted",cobrowseLine_cobrowseDeclined:"CoBrowse invitation rejected",cobrowseLine_cobrowseTimeout:"CoBrowse invitation timed out",cobrowseLine_cobrowseOffered:"{{agentName}} has invited you to a CoBrowse session",cobrowseLine_cobrowseCanceled:"CoBrowse invitation was cancelled by {{agentName}}",video_cobrowseInvitation:"I have invited you to a video call. To start, please click Accept.",video_cobrowseConnecting:"Connecting",video_cobrowseConnectingPermission:"Camera and microphone access are required. Please accept these permissions when prompted by your browser.",video_cobrowseAcceptBtn:"Accept",video_cobrowseRejectBtn:"Reject",video_cobrowseInvitationHeading:"Video Call",video_cobrowseSessionStarting:"Starting a Call...",video_cobrowseInvitationRejected:"Call has been rejected",video_cobrowseLine_cobrowseAccepted:"Call accepted",video_cobrowseLine_cobrowseDeclined:"Call rejected",video_cobrowseLine_cobrowseTimeout:"You missed a call from {{agentName}}",video_cobrowseLine_cobrowseOffered:"{{agentName}} has called you",video_cobrowseLine_cobrowseCanceled:"Call was cancelled by {{agentName}}",video_cobrowseActiveCallTooltip:"You are in a video call",video_cobrowseActiveCallTooltipMaximizeTitle:"Maximize the video chat window",video_cobrowseInvitationMinimizeTitle:"Minimize the video chat window",voice_cobrowseInvitation:"I have invited you to a voice call. To start, please click Accept.",voice_cobrowseConnecting:"Connecting",voice_cobrowseConnectingPermission:"Microphone access is required. Please accept this permission when prompted by your browser.",voice_cobrowseAcceptBtn:"Accept",voice_cobrowseRejectBtn:"Reject",voice_cobrowseInvitationHeading:"Voice Call",voice_cobrowseSessionStarting:"Starting a Call...",voice_cobrowseInvitationRejected:"Call has been rejected",voice_cobrowseLine_cobrowseAccepted:"Call accepted",voice_cobrowseLine_cobrowseDeclined:"Call rejected",voice_cobrowseLine_cobrowseTimeout:"You missed a call from {{agentName}}",voice_cobrowseLine_cobrowseOffered:"{{agentName}} has called you",voice_cobrowseLine_cobrowseCanceled:"Call was cancelled by {{agentName}}",voice_cobrowseActiveCallTooltip:"You are in a voice call",voice_cobrowseActiveCallTooltipMaximizeTitle:"Maximize the voice chat window",voice_cobrowseInvitationMinimizeTitle:"Minimize the voice chat window",richContentSent:"&lt;&lt; Sent Rich Content &gt;&gt;",browserNotifications_newMessageTitle:"New message from {{agentName}}",browserNotifications_newMessages:"new messages",browserNotifications_richContent:"{{agentName}} has shared rich content with you",browserNotifications_image:"{{agentName}} has shared an image with you",browserNotifications_file:"{{agentName}} has shared a file with you",ts_Now:"Now",ts_Today:"Today",ts_Yesterday:"Yesterday",paymentRequest_CheckoutTitle:"Secure Checkout",paymentRequest_CheckoutWithMavenPay:"PAY NOW",paymentRequest_SlideoutTitle:"Secure Checkout",paymentResponse_ResponseText:"Payment Successful",paymentRequest_PoweredByLeftText:"Powered by",paymentRequest_PoweredByRightText:"Maven Pay",paymentRequest_YourCart:"Your Cart",datePicker_select_day:"Select day",datePicker_select_range:"Select date range",datePicker_choose_day:"CHOOSE DAY",datePicker_choose_range:"CHOOSE RANGE",next_month:"Next month",prev_month:"Previous month",select_month:"Choose month",next_year:"Next year",prev_year:"Previous year",select_year:"Choose year",week_of:"Week of",scheduleList_error_no_slots:"No times available, please discuss with agent",scheduleList_header:"Schedule a time",scheduleList_confirm_button_title:"confirm",next_week:"Next week",prev_week:"Previous Week"},{locale:"en-US"});!function(a){a.ViewController.plugin({initialize:function(a){a&&(this.models=a.models)},bindModel:function(a){this.models[a.path.name].bind(a.path,a.callback,a.context||this,a.trigger)},unbindModel:function(a){a=a||{};var b=a.context?a.context:this,c=a.callback?a.callback:null,d=a.path?a.path:null;this.models[a.path.name].unbind(d,c,b)},getModelParam:function(a){return this.models[a.name].get(a)},dispose:function(){for(var a in this.models)this.models.hasOwnProperty(a)&&this.models[a].unbind(null,null,this)}})}(window.liveperson.uiframework.latest);!function(a){var b=new lpTag.unifiedWindow.helpers.LocalizationHelper({util:lpTag.taglets.lpUtil});a.ViewController.plugin({initialize:function(a){a.appContext&&(this.translator=a.appContext.translator)},translate:function(a,b){return this.translator.translate(a,b)},replaceCharacter:function(a,b,c){var d=a.split(b);return d.length>0?c?d.join(c):d.join(""):a},extendDictionary:function(a){this.translator.extendDictionary(a)},isLanguageRTL:function(){return b.isLanguageRTL(this.appContext.conf.engConf.lang)},applyDirOnElement:function(a,c){b.applyDirOnElement(a,c,this.appContext.conf.engConf.lang)}})}(window.liveperson.uiframework.latest);!function(a){a.ViewController.plugin({initialize:function(a){a.appContext&&(this.themer=a.appContext.themer)},customize:function(a){var b={removeThemeAttrs:!1};if(!this.isDOMNode(a))return this.themer.processHTML(a,b);this.themer.processDomEl(a,b);return void 0}})}(window.liveperson.uiframework.latest);!function(a){a.ViewController.plugin({initialize:function(a){},events:function(){},dragableView:function(a){var b,c=a.context&&a.context.appContext.translator;a.drag=this.isDOMNode(a.view)?a.view:this.getFirstElement(a.view);a.anchor=this.isDOMNode(a.anchor)?a.anchor:this.getFirstElement(a.anchor);a.parent=document.body;a.horizontal=!0;a.vertical=a.allowVerticalDrag;this.dragInstances=this.dragInstances||[];this.dm=new lpTag.taglets.lpDragManager(c);this.dm.bindDrag(a);b=this.dm;this.dragInstances.push(b);return b},dispose:function(){if(this.dragInstances&&this.dragInstances.length>0)for(var a=0;a<this.dragInstances.length;a++)this.dm.unbindDrag(this.dragInstances[a])}})}(window.liveperson.uiframework.latest);!function(a,b){"use strict";"function"==typeof define&&define.amd&&define("HtmlSanitizerUtils",function(){return b(a,a)});a.lpTag=a.lpTag||{};b(a,a.lpTag)}(this,function(a,b){var c=function(){"use strict";function a(a){function b(a){a.errors.length>0&&Array.prototype.push.apply(d,a.errors)}var c=a,d=[],e=a;""!==e&&(e=g(e));var f=k(e);b(f);f=l(f.cleanText);b(f);f=m(f.cleanText);b(f);f=j(f.cleanText);b(f);f=h(f.cleanText);b(f);f=i(f.cleanText);b(f);return{sanitized:d.length>0,cleanText:d.length>0?f.cleanText:c,errors:d}}function b(a,b){for(var c=b&&b.uri_regex&&o(b.uri_regex)?b.uri_regex:A,e=b&&b.email_regex&&o(b.email_regex)?b.email_regex:B,f=d(a),g=0;g<f.childNodes.length;g++)if(3===f.childNodes[g].nodeType)f.childNodes[g].textContent=p(f.childNodes[g].textContent,c,e);else{var h=f.childNodes[g].outerHTML.match(/<a\s+href/g);h||(f.childNodes[g].innerText=p(f.childNodes[g].innerText,c,e))}f.innerHTML=f.innerHTML.replace(new RegExp("&lt;","g"),"<").replace(new RegExp("&gt;","g"),">");return f.innerHTML}function c(b,c){c=c||{};c=f(c);var g=a(b),h=g.cleanText,i=d(h),j="";if(c==={})j=i.innerText;else{e(i,c);j=i.innerHTML}return j}function d(a){var b=document.createElement("DIV");b.innerHTML=a;return b}function e(a,b){var c=Array.prototype.slice.call(a.childNodes);c.forEach(function(a){a.hasChildNodes()&&e(a,b);if(3!==a.nodeType){var c=a.tagName.toLowerCase();if("undefined"==typeof b[c])a.parentNode&&(a.outerHTML=a.innerHTML);else{for(var d=b[c],f=[],g=0;g<a.attributes.length;g++){var h=a.attributes[g].name.toLowerCase();-1===d.indexOf(h)&&f.push(h)}for(var i=0;i<f.length;i++)a.removeAttribute(f[i])}}})}function f(a){var b={};for(var c in a){var d=[];a[c]instanceof Array&&(d=a[c].map(function(a){a=a.toLowerCase();return a}));b[c.toLowerCase()]=d}return b}function g(a){for(var b=a,c="",d=!1;b!==c;){try{c=decodeURIComponent(b)}catch(e){c=b;d=!0}d||(b=c)}return c}function h(a){for(var b={errors:[],cleanText:a},c=d(a),e=!1,f=0;f<r.length;f++){var g=null;g=c.getElementsByTagName(r[f]);for(var h=0;h<g.length;h++){e=!0;b.errors.push({type:F.ELEMENT,key:r[f],html:g[h].outerHTML});var i=g[h];i&&i.parentNode&&i.parentNode.removeChild(i)}}e&&(b.cleanText=c.innerHTML);return b}function i(a){function b(a,b,d,e,f){var g=e===F.STYLE_ATTRIBUTE||e===F.ATTRIBUTE_VALUE?b:a;e===F.ATTRIBUTE_VALUE&&(g=g.replace(z,""));var h=g.match(d);if(h){for(var i=0;i<h.length;i++)c.errors.push({type:e,key:h[i],html:f.outerHTML});f.removeAttribute(a)}}var c={errors:[],cleanText:a},e=a;"string"!=typeof e&&(e=e.toString());for(var f=[],g=d(e),h=g.getElementsByTagName("*"),i=0;i<h.length;i++)for(var j=0;j<h[i].attributes.length;j++)f.push({attributeKey:h[i].attributes[j].name,attributeValue:h[i].attributes[j].value,element:h[i]});if(f)for(var k=0;k<f.length;k++){var l=f[k].attributeKey,m=f[k].attributeValue,n=f[k].element;b(l,m,s,F.ATTRIBUTE,n);b(l,m,t,F.ATTRIBUTE,n);b(l,m,u,F.ATTRIBUTE_VALUE,n);"style"===l.toLowerCase()&&b(l,m,v,F.STYLE_ATTRIBUTE,n)}c.cleanText=g.innerHTML;return c}function j(a){var b={errors:[],cleanText:a},c=a;"string"!=typeof c&&(c=c.toString());var e=c.match(C);e=null===e?0:e.length;var f=d(c),g=f.innerHTML.match(C);g=null===g?0:g.length;e>g&&b.errors.push({type:F.NOT_WELLFORMED,key:"",html:a});b.cleanText=f.innerHTML;return b}function k(a){var b=n(a,w,F.MARKER,"");return b}function l(a){var b=n(a,x,F.ELEMENT,D);return b}function m(a){var b=n(a,y,F.ATTRIBUTE,E);return b}function n(a,b,c,d){var e={errors:[],cleanText:a},f=a;"string"!=typeof f&&(f=f.toString());var g=f.match(b);if(g)for(var h=0;h<g.length;h++){e.errors.push({type:c,key:d,html:g[h]});f=f.replace(g[h],"")}e.cleanText=f;return e}function o(a){return a&&a.constructor===RegExp}function p(a,b,c){a=q(a,b);a=a.replace(c,"<a href='mailto:$&'>$&</a>");return a}function q(a,b){a=a.replace(b,function(a,b,c,d){var e=a.match(/^www\./i),f=e?"http://"+a.replace(/www\./i,""):a;return"<a href='"+f+"'>"+a+"</a>"});return a}var r=["SCRIPT","STYLE","LINK","IFRAME","META","OBJECT","EMBED"],s=/^on\S+|^\S*[^A-Za-z]+on\S*/gi,t=/DIRNAME|SRCDOC|BEGIN|TO/gi,u=/DATA(\s*):|MHTML(\s*):|JAVASCRIPT(\s*):|EXPRESSION(\s*)\([^;]*\)/gi,v=/MHTML(\s*):([^;]*)|DATA(\s*):([^;]*)|MASK(\s*):([^;]*)|[\w]+(\s*):(\s*)EXPRESSION\([^;]*/gi,w=/<\/\/(.*?)>|<[^ $A-Za-z0-9\/!](.*?)>/gi,x=/<(\s*)?SCRIPT\b[^>]*(\s*)?>|<(\s*)?FRAMESET\b[^>]*(\s*)?>|<(\s*)?FRAME\b[^>]*(\s*)?>|<(\s*)?BODY\b[^>]*(\s*)?>/gi,y=/ONERROR(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONLOAD(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONTOGGLE(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONRATECHANGE(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']|ONLOADSTART(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONLOADEND(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/gi,z=/\[.]/gi,A=/(((ftp|http|https):\/\/)|www[.])(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,B=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/gi,C=/<((\s)?[a-z%]+)\s*[^\/]*?/gi,D="SCRIPT/FRAMESET/FRAME/BODY",E="ONERROR_ONLOAD_ONTOGGLE_ONRATECHANGE_ONLOADEND",F={ELEMENT:"element",ATTRIBUTE:"attribute",ATTRIBUTE_VALUE:"attribute_value",STYLE_ATTRIBUTE:"style_attribute",MARKER:"marker",NOT_WELLFORMED:"not_wellformed_html"};return{sanitizeHtml:a,formatLinks:b,sanitizeAndCleanHtml:c}}();b.HtmlSanitizerUtils=b.HtmlSanitizerUtils||c;return c});!function(a){var b=["strong","i","em","b","u","a","br","span","div","ul","ol","li","p"],c=[/^aria-'/,/^href/,/^target/,/^data-lp-point/,/^title/,/^id/,/^class/],d=new RegExp("(?:(?:https?|ftp|file):\\/\\/|www\\.|ftp\\.)(?:\\([-A-Z0-9+&@#/%=~_|$?!:,.]*\\)|[-A-Z0-9+&@#/%=~_|$?!:,.])*(?:\\([-A-Z0-9+&@#/%=~_|$?!:,.]*\\)|[A-Z0-9+&@#/%=~_|$])","gim");a.ViewController.plugin({LPSanitizer:window.lpTag&&lpTag.HtmlSanitizerUtils,sanitizeText:function(a,b){var c="string"==typeof a&&a;if(c){var d=this.appContext&&this.appContext.conf&&this.appContext.conf.engConf&&this.appContext.conf.engConf.async;d&&(c=this.decodeInput(c));c=this.initialTextSanitize(c);c=this.sanitizeEvents(c);c=this.removeElementByType(["SCRIPT","STYLE","LINK","IFRAME","META"],c);!d||b&&b.noFormatLink||(c=this.formatLinks(c,b));c=this.reTargetElementsByType(["A","FORM"],c)}return{sanitized:c!==a,text:c}},initialTextSanitize:function(a){if(this.LPSanitizer)try{a=this.LPSanitizer.sanitizeHtml(a).cleanText||""}catch(b){}return a},formatLinks:function(a,b){b=b||{};b.uri_regex=d;if(this.LPSanitizer)try{a=this.LPSanitizer.formatLinks(a,b)||""}catch(c){}return a},sanitizeEvents:function(a){for(var b=a,c=[{regEx:/[\s'"/]+(onkeypress|onblur|onmouseleave|onpointerlockerror|ondragenter|ontouchend|onanimationend|onpaste|onanimationiteration|onplaying|ondrop|onpointerlockchange|onerror|onended|onsort|onseeked|onplay|onabort|ontransitioncancel|onselectionchange|onpointercancel|onbeforeunload|onfocusin|onpopstate|ondurationchange|onrepeat|onfullscreenchange|onscrollend|onpagehide|onauxclick|onbeforeprint|onpointerout|onresize|onfocusout|onmouseout|onloadedmetadata|onunload|onwebkitanimationiteration|onbeforecut|oncanplaythrough|ondragleave|onsubmit|onseeking|ontransitionrun|onmousemove|onsearch|onselect|oninvalid|ontransitionend|onclose|onchange|oninput|onmouseup|onloadstart|onwaiting|onwebkitanimationstart|onsuspend|oncontextmenu|onafterprint|onmousewheel|oncuechange|onend|onpointermove|onreset|onbegin|onpointerleave|onratechange|onfocus|onprogress|onpageshow|oncanplay|onpointerenter|onstart|onkeydown|onpointerdown|onmessage|onscroll|onwebkitanimationend|onselectstart|onbeforecopy|ontouchstart|ontouchcancel|onshow|ondblclick|onpause|onanimationcancel|onloadeddata|ondrag|onemptied|ontouchmove|onbeforeinput|onfinish|onpointerrawupdate|onstalled|onpointerup|oncancel|onvolumechange|onmozfullscreenchange|ontimeupdate|onunhandledrejection|ontoggle|ondragstart|onwheel|onpointerover|onclick|onkeyup|onmousedown|onanimationstart|ondragend|onbeforescriptexecute|onhashchange|oncut|onbounce|onload|ontransitionstart|onafterscriptexecute|ondragover|onwebkittransitionend|onmouseover|oncopy|onmouseenter|ondragexit)\s*=/gi,replaceString:" _eventRemoved=",type:"ONEVENT"}],d=0;d<c.length;d++)try{"number"==typeof b&&(b=b.toString());b=b.replace(c[d].regEx,c[d].replaceString)}catch(e){this.logger.error("Error when trying to cleanup text, cleanupType: "+c[d].type+" text: "+a+" result: "+b,"sanitizeEvents")}return b},removeElementByType:function(a,b){function c(a){return function(){a&&a.parentNode&&a.parentNode.removeChild(a)}}a=a.constructor===Array?a:[a];var d=document.createElement("DIV");d.innerHTML=b;for(var e=!1,f=[],g=0;g<a.length;g++){var h=null;h=d.getElementsByTagName(a[g]);for(var i=0;i<h.length;i++){e=!0;try{f.push(c(h[i]))}catch(j){this.logger.error("Error when trying to create remove element function for type "+a[g],"removeElementByType")}}}for(var k=0;k<f.length;k++)try{f[k]()}catch(j){this.logger.error("Error when trying to remove element, HTML "+d.innerHTML,"removeElementByType")}return e?d.innerHTML:b},isSecureForm:function(a){return"lp_secure_form_line"===a.getAttribute("data-lp-point")},setTarget:function(a){var b=!1,c=a.getAttribute("target");if(!c||"_blank"!==c.toLowerCase()&&!this.isSecureForm(a)){b=!0;a.setAttribute("target","_blank")}return b},reTargetElementsByType:function(a,b){a=a.constructor===Array?a:[a];var c,d=document.createElement("DIV");d.innerHTML=b;for(var e=!1,f=0;f<a.length;f++){c=d.getElementsByTagName(a[f]);for(var g=0;g<c.length;g++)try{e=this.setTarget(c[g]);var h=c[g].getAttribute("rel");h&&"noopener"===h.toLowerCase()||c[g].setAttribute("rel","noopener")}catch(i){this.logger.error("Error when trying to reTargetLinks elements, result HTML: "+d.innerHTML+" text: "+b,"reTargetElementsByType")}c=null}return e?d.innerHTML:b},decodeInput:function(a){var b=document.createElement("DIV");b.textContent=a;return b.innerHTML},removeUnsupportedTagsAndAttributes:function(a,c,d){if(a&&a.querySelectorAll)for(var e=[].slice.call(a.querySelectorAll("*")).reverse(),f=0;f<e.length;f++)b.indexOf(e[f].tagName.toLowerCase())<0?e[f].outerHTML=e[f].innerHTML:this._removeUnsupportedAttributes(e[f],c,d)},_removeUnsupportedAttributes:function(a,b,d){for(var e,f=a&&a.attributes||[],g=0;g<f.length;g++){e=!1;for(var h=f[g].name.toLowerCase(),i=f[g].value.toLowerCase(),j=0;j<c.length;j++)if(h.match(c[j])){if(i.match("javascript"))continue;e=!0}if(!e){if(b&&"span"===a.tagName.toLowerCase()&&"style"===h)continue;if(d&&"a"===a.tagName.toLowerCase()&&"style"===h)continue;a.removeAttribute(h)}}},replaceDuplicatedEncodings:function(a){return"string"==typeof a?a.replace(/&amp;amp;/g,"&amp;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;lt;/g,"&lt;"):a}})}(window.liveperson.uiframework.latest);!function(a){function b(a,b){for(var c=0;c<b.length;c++){a.DOMEvent=b[c];this.bindViewEvent(a)}}function c(a,b){var c=this,d="undefined"!=typeof a.selector&&this.getFirstElement(a.selector)||a.view;return function(a){b.call(c,a,d)}}function d(a,b){var c,d=!1,e=b.scrollTop+b.clientHeight,g=!1,h=i.some(function(b){return f(a.target,b)});if(!h){if("undefined"!=typeof a.deltaY){d=a.deltaY<0;c=a.deltaY>0?a.deltaY:-1*a.deltaY;c=parseInt(c,10)}if(!c&&"undefined"!=typeof a.wheelDelta){d=a.wheelDelta>0;c=a.wheelDelta>0?a.wheelDelta:-1*a.wheelDelta;c=parseInt(c,10)}g=d?b.scrollTop-c<=0:e+c>=b.scrollHeight;if(g){b.scrollTop=d?0:e;this.preventDefault(a)}this.stopPropagation(a)}}function e(a,b){var c=b.scrollHeight-b.offsetHeight;0===b.scrollTop?b.scrollTop=1:c===b.scrollTop&&(b.scrollTop=c-1)}function f(a,b){if(!a)return null;var c=g(a,b);if(c)return a;if(!a.parentElement)return null;var d=g(a.parentElement,h);return d?null:f(a.parentElement,b)}function g(a,b){var c=[];c.push("attribute without value");if("["===b[0]&&"]"===b.slice(-1))return a.hasAttribute(b.slice(1,-1));c.push("single classname");if("."===b[0])return a.classList.contains(b.slice(1));lpTag&&lpTag.unifiedWindow&&lpTag.unifiedWindow.log&&lpTag.unifiedWindow.log.error("Unknown selector, no parser for it.\nSelector: "+b+'\nSupported Selectors: "'+c.join('", "')+'"',"ScrollPreventionPlugin");return!1}var h=".lp-json-pollock",i=["[data-carousel-name]",".lp-json-pollock-layout-vertical-scroll"];a.ViewController.plugin({pluginName:"scrollPrevent",initialize:function(){},preventScroll:function(a){a||(a={view:this.view});if("object"==typeof a&&(a.selector||a.view)){var e=[window.addEventListener?"wheel":"mousewheel","scroll"];a.callback=c.call(this,a,d);b.call(this,a,e)}},limitScroll:function(a){a||(a={view:this.view});if("object"==typeof a&&(a.selector||a.view)){var d=[window.addEventListener?"wheel":"mousewheel","scroll"];a.callback=c.call(this,a,e);b.call(this,a,d)}}})}(window.liveperson.uiframework.latest);!function(a){function b(a){return a?this.isDOMNode(a)?a:"object"==typeof a?a.view||a.selector&&"undefined"!=typeof a.selector&&this.getFirstElement(a.selector):this.view:null}function c(a,b){for(var c=0;c<b.length;c++){a.DOMEvent=b[c];this.bindViewEvent(a)}}function d(a,b){for(var c=0;c<b.length;c++)this.unbindViewEvent({view:a,DOMEvent:b[c],callback:g})}function e(a,b){var c;c=f(a.view,a.inView,a.trackBottom);if(c){"function"==typeof a.callback&&a.callback.call(this);a.bindOnce&&d.call(this,a.inView,h)}}function f(a,b,c){var d=a.getBoundingClientRect(),e=b.getBoundingClientRect();return d.top>=e.top&&(c?d.bottom<=e.bottom:!0)}var g,h;a.ViewController.plugin({initialize:function(a){var b=["scroll","resize",window.addEventListener?"wheel":"mousewheel"],c=["touchend","resize"];a.appContext&&a.appContext.deviceDetector.isDesktop&&(h=a.appContext.deviceDetector.isDesktop()?b:c)},events:function(){},trackInView:function(a){var d;a.view=b.call(this,a.view);a.inView=b.call(this,a.inView);if(a.view&&a.inView){g=e.bind(this,a);d={view:a.inView,callback:g};c.call(this,d,h)}},dispose:function(){}})}(window.liveperson.uiframework.latest);window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){a=a&&a.newValue;"boolean"==typeof a&&(a?Q.removeClass(this.sliderButton,"lp_hidden"):Q.addClass(this.sliderButton,"lp_hidden"))}function b(a){var b={ControllerName:lpTag.unifiedWindow.EndChatDialogViewController.ControllerName,models:this.models,appContext:this.appContext,sliderAPI:this.slider};b.dialogOpenedFrom=a?this.appConsts.views.TOP_MENU:this.appConsts.views.ACTION_MENU;if(this.appContext.unAuthUserTriesAuth){this.appContext.unAuthUserTriesAuth=!1;k.call(this)}else if(this.appContext.conf.unifiedConf.shouldSkipConfirmationDialog)k.call(this);else{this.endChatWasInitiated=!0;var c={context:this,data:b};this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG,data:c})}}function c(a){var b=10,c=10;a.setAttribute("tabindex","0");a.blur();var d=0,e=window.setInterval(function(){a.focus();d++;d>=c&&window.clearInterval(e)},b)}function d(a){this.endChatWasInitiated=!1;this.consumerConfirmedClose="confirm"===a.origin;e.call(this,a)}function e(a){if(a.dialogOpenedFrom===this.appConsts.views.TOP_MENU){var b=this,d=this.focusOnElement;setTimeout(function(){d.call(b,b.LPViewMap.closeButton,b.maximizedView)},500)}if(this.topMenuEnabled&&this.topMenuButtonStyle.value&&a.dialogOpenedFrom!==this.appConsts.views.TOP_MENU){var e=this.getFirstElement(this.LPViewMap.topMenuButton,this.maximizedView);e.focus();c(e)}}function f(){var a=this.getModelParam(this.uiPath.EMOJI_VISIBLE);a&&this.appContext.uiStateManager.setVisibility(this.uiPath.EMOJI_VISIBLE,!1);this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!this.getModelParam(this.uiPath.TOP_MENU_VISIBLE))}function g(){j.call(this,!0)}function h(a){if(this.appContext.conf.engConf.externalFailed){this.stopPropagation(a);this.appContext.events.trigger({appName:"*",eventName:this.EventName.application.DO_HARAKIRI})}else{j.call(this,!0);this.stopPropagation(a)}}function i(){var a=this.getFirstElement(this.LPViewMap.minimizeSliderButton,document.body),b=this.getFirstElement(this.LPViewMap.slider,document.body),c="block"===b.style.display;this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.widgetSDK.INIT});c||a.focus()}function j(a){var c=this.getModelParam(this.uiPath.STATE);if(!this.endChatWasInitiated)switch(c){case this.State.PENDING:case this.State.CHATTING:b.call(this,a);this.changeMode(this.states.MAXIMIZED,!0);break;case this.State.APP_ENDED:this.isClosingWindow=!0;B.call(this,this.State.APP_ENDED);break;case this.State.WAITING:k.call(this);break;default:this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.EventName.application.END_SURVEY});o.call(this)}}function k(){this.isClosingWindow=!0;this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.EventName.application.END_CHAT});o.call(this)}function l(a){this.forgetMeInitiated=!1;e.call(this,a)}function m(){this.isClosingWindow=!0;B.call(this,this.State.APP_ENDED)}function n(a){var b=this.getModelParam(this.uiPath.STATE);if(!this.forgetMeInitiated&&b!==this.State.ERROR&&b!==this.State.CONNECTION_ISSUE){var c={ControllerName:lpTag.unifiedWindow.ForgetMeDialogViewController.ControllerName,models:this.models,appContext:this.appContext,sliderAPI:this.slider};c.dialogOpenedFrom=a?this.appConsts.views.TOP_MENU:this.appConsts.views.ACTION_MENU;this.forgetMeInitiated=!0;var d={context:this,data:c};this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG,data:d})}}function o(){var a=this.appContext&&this.appContext.conf&&this.appContext.conf.unifiedConf?this.appContext.conf.unifiedConf:{},b=this.appContext&&this.appContext.conf?this.appContext.conf:{},c=this.appContext,d=a.poppedOut||a.external;d&&!a.NativeSDK?window.close():this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.application.DO_HARAKIRI});lpTag.lastClosedEngagementID=b.uiState&&b.uiState.engConf&&b.uiState.engConf.eid;lpTag.hooks&&lpTag.hooks.exec&&lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.ON_WINDOW_CLOSED,data:{context:c}})}function p(a){var b=this.appContext.wrapperWindow.getChatWrapperElement(),c=this.LPClassesMap.visitorHasTyped;if(a.typing){Q.addClass(b,c);this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.widgetSDK.VISITOR_TYPING,data:!0})}else{Q.removeClass(b,c);this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.widgetSDK.VISITOR_TYPING,data:!1})}}function q(a,b){b=b||this.getModelParam(this.uiPath.STATE);var c=this.State.CHATTING===b||this.State.WAITING===b,d={closeButton:c?"tooltip_EndChat":"tooltip_Close",minimizeButton:"tooltip_Minimize",maximizeButton:"tooltip_Maximize"};r.call(this,d,a)}function r(a,b){var c,d,e;for(var f in a){d=this.translator.translate(a[f]);c=this.getElements(this.LPViewMap[f],this.mainWindow);for(var g=0;g<c.length;g++){s(c[g],d);e=this.getFirstElement("img",c[g]);e&&t(e,d,b)}}}function s(a,b){a.title=b}function t(a,b,c){a.alt=b;c&&(a.src+="?v="+lpTag.unifiedWindow.Application.v)}function u(a){this.stateHistory.push(a);this.stateHistory.length>5&&this.stateHistory.shift()}function v(a,b){var c=a&&b&&a.length===b.length;if(c){for(var d=!0,e=0;e<a.length;e++)if(a[e]!==b[e]){d=!1;break}return d}return!1}function w(a){var b=["applicationEnded","waiting","chatting","applicationEnded","waiting"];return v(b,a)}function x(a){var b=["chatting","applicationEnded","waiting","chatting","applicationEnded"];return v(b,a)}function y(a){return a?this.stateHistory[this.stateHistory.length-a]:this.stateHistory}function z(a){var b=a&&a.newValue;u.call(this,b);B.call(this,b);D.call(this,b);this.appContext&&!this.appContext.conf.unifiedConf.connectorsSfConfig&&this.appContext.wrapperWindow.setTitle(E.call(this,b));q.call(this,!1,b)}function A(a){var b=this;setTimeout(function(){o.call(b)},a)}function B(a){var b=a===this.State.ENDED||a===this.State.APP_ENDED,c=a===this.State.WAITING,d=this.util.getPropertyFromObject(this.appContext,"conf.unifiedConf.external",!1),e=this.util.getPropertyFromObject(this.appContext,"conf.windowConf.surveyPostChatEnabled",!1),f=this.util.getPropertyFromObject(this.models.chatModel.getModel(),"attributes.chat",{});if(this.closeOnEnd===this.CloseOnEndType.CLOSE&&this.consumerConfirmedClose&&!this.appContext.clearingHistory){if(b||c)if(this.isAsync){var g=f.currentDialogType,h=g===this.dialogStatics.types.POST_SURVEY,i=y.call(this,2),j=y.call(this);if(d)i===this.State.POST_CHAT||c&&i===this.State.APP_ENDED&&!e?o.call(this):x(j)&&o.call(this);else{var k=w(j);c&&i===this.State.APP_ENDED&&!h&&(k?A.call(this,2e3):o.call(this))}}else a===this.State.APP_ENDED&&A.call(this,2e3)}else if(b&&this.isClosingWindow){this.appContext.clearingHistory&&(this.appContext.clearingHistory=!1);o.call(this)}}function C(a){var b=this.getModelParam(this.uiPath.STATE),c=a&&a.newValue;b!==this.State.CHATTING||this.appContext.conf.unifiedConf.connectorsSfConfig||(c&&!this.isBarTitleDisplay?this.appContext.wrapperWindow.setTitle(c):this.showMessageUs&&this.appContext.wrapperWindow.setTitle(this.barTitleText));
}function D(a){var b,c;if(this.appContext&&!this.appContext.conf.unifiedConf.widgetSDK){b=this.getElements(this.LPViewMap.chattingWithIcon,this.mainWindow);for(var d=0;d<b.length;d++){c={view:b[d],useClasses:!0,display:"inline-block"};a!==this.State.CHATTING||this.appContext.conf.unifiedConf.connectorsSfConfig?this.hide(c):this.show(c)}}}function E(a){var b,c,d=this.showMessageUs&&this.barTitleText;a=a||this.getModelParam(this.uiPath.STATE);switch(a){case this.State.APP_ENDED:b=this.translator.translate(this.State.ENDED);break;case this.State.REQUESTED:b=d;break;case this.State.CHATTING:case this.State.CONNECTION_ISSUE:b=this.showMessageUs&&this.isBarTitleDisplay?this.barTitleText:this.getModelParam(this.chatPath.AGENT_NAME)||d||this.translator.translate(this.State.CHATTING);break;case this.State.PRE_SMS:b=this.translator.translate(this.State.PRE_SMS);break;default:c=d||this.translator.translate("connecting");b=this.translator.translate(a)||c}return b}function F(a){this.blurredTimeout&&clearTimeout(this.blurredTimeout);var b=this;a.focus?this.blurredTimeout=setTimeout(function(){b.wasBlurred=!1},100):this.wasBlurred=!0}function G(){this.isFocusInsideApp()&&this.focusOnElement(this.LPViewMap.closeButton,this.maximizedView)}function H(a){if(a&&a.type===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView){this.sliderButton.title=this.translate("tooltip_close_widgets");this.sliderButton.setAttribute("aria-expanded",!0)}else this.sliderButton.title=this.translate("tooltip_open_widgets")}function I(){if(this.appContext.conf.unifiedConf.widgetSDK){this.sliderButton.title=this.translate("tooltip_open_widgets");this.sliderButton.setAttribute("aria-expanded",!1);this.focusOnElement(this.LPViewMap.widgetSdkButton,this.maximizedView)}else this.focusOnElement(this.LPViewMap.maximized,document.body)}function J(a){var b=a&&"number"==typeof a.newValue&&a.newValue||0;if(b>0){Q.removeClass(this.titleDiv,this.LPClassesMap.lp_slider_gap);K.call(this,b)}else{Q.addClass(this.titleDiv,this.LPClassesMap.lp_slider_gap);this.addClass(this.widgetNotificationContainer,"lpHide")}}function K(a){this.widgetNotificationText.innerHTML=""+a;this.removeClass(this.widgetNotificationContainer,"lpHide");this.shakeX(this.getFirstElement(this.widgetNotificationContainer))}function L(){var a=this.featureStateManager.isEngagementWindowBorderEnabled();a||(this.maximizedView.style.border="none")}function M(){var a=this.featureStateManager.getEngagementWindowBoxShadowConfig();a&&a.length>0&&(this.maximizedView.style.boxShadow=a)}function N(){this.customize(this.maximizedView);this.customize(this.minimizedView);this.customize(this.bufferStrip);this.appContext.wrapperWindow.adjustConfigStyle(this.appContext.themer)}function O(a){this.mainWindow.appendChild(a)}function P(a){this.maximizedView.appendChild(a)}var Q=lpTag.taglets.lpUtil;lpTag.unifiedWindow.WrapperWindowExtenderBase=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"WrapperWindowExtenderBase",LPViewMap:{header:"^header",maximized:"^maximized",minimizedView:"^minimized",headerText:"^headerText",chattingWithIcon:"^chattingWithIcon",closeButton:"^close",topMenu:"^top_menu",topMenuButton:"^menu-top-btn",minimizeButton:"^minimize",maximizeButton:"^maximize",widgetSdkButton:"^widget_sdk",refreshSdkButton:"^refresh",minimizeSdkButton:"^minimize-slider",minimizeButtonImg:"^minimizeButtonImage",minimizeSliderButton:"^minimize-slider",closeButtonImg:"^closeButtonImage",slider:"^slider",main:"^main"},CloseOnEndType:{OPEN:"OPEN",CLOSE:"CLOSE"},LPClassesMap:{visitorHasTyped:"lp_visitor_has_typed",lp_slider_gap:"lp_slider_gap"},initialize:function(a){this.models=a.models;this.endChatWasInitiated=!1;this.forgetMeInitiated=!1;this.isClosingWindow=!1;this.appContextConf=a.appContext&&a.appContext.conf||{};this.featureStateManager=a.appContext.featureStateManager;this.State=lpTag.unifiedWindow.State;this.states=this.appContext.uiStateManager.WINDOW_STATE;this.mainWindow=this.appContext.wrapperWindow.getMainWindowElement();this.minimizedView=this.appContext.wrapperWindow.getMinimizedElement();this.bufferStrip=this.appContext.wrapperWindow.getBufferStripElement();this.maximizedView=this.appContext.wrapperWindow.getMaximizedElement();this.sliderButton=this.appContext.wrapperWindow.getSliderButton();this.titleDiv=this.appContext.wrapperWindow.getTitleDiv();this.chattingWithIcon=this.appContext.wrapperWindow.getChattingWIthIcon();this.widgetNotificationContainer=this.appContext.wrapperWindow.getWidgetNotificationContainer();this.widgetNotificationText=this.appContext.wrapperWindow.getWidgetNotificationText();this.appContext.wrapperWindow.unbindDomEvents();this.windowConf=this.appContextConf.windowConf;this.closeOnEnd=this.windowConf.closeWindowButtonBehaviorType;this.isAsync=this.appContextConf.engConf&&this.appContextConf.engConf.async;this.isSMS=this.appContextConf.engConf&&this.appContextConf.engConf.externalTargets&&!!this.appContextConf.engConf.externalTargets[lpTag.unifiedWindow.consts.externalTargets.SMS];this.stateHistory=[];this.dialogStatics=lpTag.AMSStatics&&lpTag.AMSStatics.dialog||{};this.consumerConfirmedClose=!1;this.topMenuEnabled=this.featureStateManager.isMenuTop();this.renderMap=this.featureStateManager.renderMap;this.topMenuButtonStyle=this.featureStateManager.getStyleConfig(this.renderMap.TOP_MENU_BUTTON);this.closeButtonStyle=this.featureStateManager.getStyleConfig(this.renderMap.CLOSE_BUTTON);this.topMenuButton=this.getFirstElement(this.LPViewMap.topMenuButton,this.maximizedView);this.topMenu=this.getFirstElement(this.LPViewMap.topMenu,this.maximizedView);this.featureStateManager=this.appContext.featureStateManager;q.call(this,!0);var b=!(a.appContext.conf&&a.appContext.conf.unifiedConf&&a.appContext.conf.unifiedConf.connectorsSfConfig);this.appContext.wrapperWindow.showClose(b);this.appContext.wrapperWindow.showMinimized(!0);this.isSMS||this.appContext.wrapperWindow.showTopMenu(!0);N.call(this);this.removeClass(this.minimizedView,"lpHide");this.appContext.conf.unifiedConf.widgetSDK&&this.setWidgetSDKView.call(this);this.showMessageUs=this.appContext.conf.engConf.async&&!this.isSMS;this.isBarTitleDisplay=this.util.getPropertyFromObject(this.appContext,"conf.windowConf.isBarTitleDisplay",!1);this.barTitleText=this.util.getPropertyFromObject(this.appContext,"conf.windowConf.barTitleText")||this.appContext.translator.translate("message_us")},events:function(){this.bindModel({path:this.uiPath.STATE,callback:z,context:this});this.bindModel({path:this.chatPath.AGENT_NAME,callback:C,context:this});this.bindModel({path:this.chatPath.SDK_NOTIFICATIONS,context:this,callback:J});this.bindModel({path:this.chatPath.SDK_BUTTON_ENABLE,context:this,callback:a});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.topMenuButton,DOMEvent:"click",callback:f,context:this});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.closeButton,DOMEvent:"click",callback:g,context:this});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.widgetSdkButton,DOMEvent:"click",callback:i,context:this});this.bindViewEvent({view:this.mainWindow,DOMEvent:"keyup",callback:this.stopPropagation,context:this});this.bindViewEvent({view:this.mainWindow,DOMEvent:"keydown",callback:this.stopPropagation,context:this});this.bindViewEvent({view:this.mainWindow,DOMEvent:"keypress",callback:this.stopPropagation,context:this});this.bindViewEvent({inView:this.minimizedView,selector:this.LPViewMap.closeButton,DOMEvent:"click",callback:h,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.SHOW_FORGET_ME,context:this,func:n});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.CLOSE_WINDOW_FORGET_ME,context:this,func:m});this.appContext.events.bind({appName:lpTag.unifiedWindow.ForgetMeDialogViewController.ControllerName,eventName:this.EventName.viewController.DIALOG_CLOSED,context:this,func:l});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.INITIATE_END_CHAT,context:this,func:j});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.VISITOR_HAS_TYPED,context:this,func:p});this.appContext.events.bind({appName:lpTag.unifiedWindow.EndChatDialogViewController.ControllerName,eventName:this.EventName.viewController.DIALOG_CLOSED,context:this,func:d});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.THANK_YOU_PAGE,context:this,func:G});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.SLIDER_VIEW_CHANGE,func:H,context:this});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.SLIDER_CLOSED,func:I,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.SHOW_PREVIEW,func:O,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_SHOW,func:P,context:this});this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,F,this);this.maximizedVisible=this.getModelParam(this.uiPath.WINDOW_MAXIMIZED);this.bindTopMenuDismissEvent()},render:function(){var a=this.getFirstElement(this.LPViewMap.closeButton,this.maximizedView);if(this.topMenuEnabled&&this.topMenuButtonStyle.value){this.show({view:this.topMenuButton,display:"inline-block",useClasses:!0});this.hide(a);this.topMenuButton.setAttribute("aria-label",this.translate("tooltip_ExpandActionMenu"));this.topMenuButton.setAttribute("aria-expanded",!1)}else{this.hide(this.topMenuButton);this.show({view:a,display:"inline-block",useClasses:!0})}z.call(this,{newValue:this.getModelParam(this.uiPath.STATE)});this.addLocalizationClasses();this.maximizedEl=this.getFirstElement(this.LPViewMap.maximized);L.call(this);M.call(this)}});var R=lpTag.unifiedWindow.WrapperWindowExtenderBase.prototype;R.bindTopMenuDismissEvent=function(){if(this.featureStateManager.isMenuTop()){this.bindViewEvent({view:this.maximizedView,DOMEvent:(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.appContext.deviceDetector.isIOS()?"touchend":"click",callback:this.dismissTopMenu,context:this});this.bindViewEvent({view:this.maximizedView,DOMEvent:"keydown",callback:this.handleKeydown,context:this})}};R.handleKeydown=function(a){var b=Array.prototype.slice.call(document.querySelectorAll(".lp_top_menu button")),c=document.querySelectorAll(".lp_top_close_action button")[0],d=this.getFirstElement(this.LPViewMap.topMenuButton,this.maximizedView),e=this.getModelParam(this.uiPath.TOP_MENU_VISIBLE),g=this.getFocusableHeaderButton(document.querySelector(".lpc_maximized-header"),!0);if("Escape"===a.code){this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!1);d.focus();return!1}if(a.target.classList.contains("lp_cancel_button")&&(13===a.keyCode||32===a.keyCode)){this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!1);d.focus();a.preventDefault();return!1}if(b[0]===a.target&&a.shiftKey&&9==a.keyCode){a.preventDefault();d.focus();return!1}if(c===document.activeElement&&!a.shiftKey&&9==a.keyCode){a.preventDefault();b[0];g.focus();return!1}if(e){if(d===a.target&&!a.shiftKey&&9==a.keyCode){a.preventDefault();b[0].focus();return!1}if(g===document.activeElement&&!a.shiftKey&&9==a.keyCode){a.preventDefault();this.appContext.events.trigger({appName:"*",eventName:"focusLastLine",data:{}});return!1}}if(a.target.classList.contains("lp_menu-top-btn")&&(32==a.keyCode||13==a.keyCode)){f.call(this);return!1}return!0};R.dismissTopMenu=function(a){var b=this.getFirstElement(this.LPViewMap.topMenu,this.maximizedView),c=a.target;b.contains(c)||this.topMenuButton.contains(c)||this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!1)};R.setWidgetSDKView=function(){Q.addClass(this.titleDiv,this.LPClassesMap.lp_slider_gap);Q.addClass(this.chattingWithIcon,"lp_hidden");this.sliderButton.title=this.translate("tooltip_open_widgets");a.call(this,this.models.chatModel.get(this.chatPath.SDK_BUTTON_ENABLE))};R.dispose=function(){this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,F);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};R.addLocalizationClasses=function(){var a=this.isLanguageRTL()?"lp_main_rtl":"lp_main_ltr",b=this.appContext.conf.engConf;Q.addClass(this.mainWindow,a);"string"==typeof b.lang&&Q.addClass(this.mainWindow,"lp_"+b.lang)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(!this.maxDragInstance||!this.maxDragInstance.dragging){this.preventDefault(a);this.changeMode(this.states.MINIMIZED,!0)}}function b(a){var b=this.appContext.conf.engConf;if(b.externalFailed){this.appContext.appConfigurationManager.openExternal(b,b.externalConfIfFailed.url);this.appContext.events.trigger({appName:"*",eventName:this.EventName.application.DO_HARAKIRI})}else if(!this.minDragInstance||!this.minDragInstance.isDragging()){this.preventDefault(a);this.changeMode(this.states.MAXIMIZED,!0)}}function c(){var a=this.appContext.conf.unifiedConf,b=this.getModelParam(this.uiPath.WINDOW_EMBEDDED);a.poppedOut||a.external||(b?this.appContext.wrapperWindow.show():this.appContext.wrapperWindow.hide())}function d(a){function b(a,b,c){var d={left:a.left,right:a.right};c&&a.hasOwnProperty("bottom")?d.bottom=a.bottom||"0px":!c&&a.hasOwnProperty("minBottom")&&(d.bottom=a.minBottom||"0px");b||(d.bottom="0px");return d}var c=b(a.newValue,this.allowMinVerticalDrag,!1),d=b(a.newValue,this.allowMaxVerticalDrag,!0),e=j.call(this);c.display=this.maximizedVisible?"none":"block";this.css(this.minimizedView,c);d.display=this.maximizedVisible?"block":"none";if(window.innerWidth<=320){d.right="0";c.right="0"}this.css(this.maximizedView,d);g();this.logger.debug("_windowPositionChanged: special="+e+" maximizedVisible="+this.maximizedVisible,this.ControllerName);p.call(this,this.maximizedVisible);this.scaleWindow()}function e(a){var b,c,d=this.getModelParam(this.uiPath.WINDOW_POSITION),e=d.left&&"auto"!==d.left?"left":"right",i=this.appContext.wrapperWindow.getMaximizedElement(),j=this.appContext.wrapperWindow.getMinimizedElement(),k=this.getComputedStyle(i),l=this.getComputedStyle(j),m=i.getBoundingClientRect(),n=j.getBoundingClientRect(),o=this.maximizedVisible?k:l,p=(this.maximizedVisible?m:n,h(o.width)),q=h(o[e]);if(a&&a.width<q+p){b=a.width>p?a.width-p-20:0;this.wasResized=!0;c="right"===e?{right:b+"px",left:"auto"}:{right:"auto",left:b+"px"};this.maximizedVisible?c.bottom=h(k.bottom)+"px":c.minBottom=h(l.bottom)+"px"}this.scaleWindow();c=f.call(this,this.maximizedVisible,c);if(Object.keys(c).length>0){this.appContext.uiStateManager.setWindowPosition(c);this.wasResized=!1;g();this.logger.debug("_documentResized, window size:"+a.width+" position.right:"+d.right+"position.left:"+d.left,this.ControllerName)}}function f(a,b){var c=this.appContext.wrapperWindow.getMaximizedElement(),d=this.appContext.wrapperWindow.getMinimizedElement(),e=this.getComputedStyle(c),f=this.getComputedStyle(d),g=c.getBoundingClientRect(),i=d.getBoundingClientRect(),j=this.getModelParam(this.uiPath.WINDOW_POSITION),k=j.left&&"auto"!==j.left?"left":"right",l=a?e:f,m=a?g:i,n=h(m.height),o=h(l.marginBottom),p=h(l.bottom),q=h(window.innerHeight);b=b||{};if(0!==p&&p+n>q){p=q-(n+o);p=0>p?0:p;if(b&&b.bottom)b.bottom=p+"px";else{b="right"===k?{right:l.right,left:"auto"}:{right:"auto",left:l.left};a?b.bottom=p+"px":b.minBottom=p+"px"}}return b}function g(){var a=document.querySelector(".lp_floating"),b=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(a&&320>=b){a.style.marginBottom="0";this.scale<=1&&(a.style.maxHeight="100%");this.css(this.maximizedView,{right:0,bottom:0})}else if(a){a.style.marginBottom="20px";this.scale<=1&&(a.style.maxHeight="calc(100% - 20px)")}}function h(a){var b=parseInt(a,10);return isNaN(b)?0:b}function i(a){this.logger.debug("_handleMaximizedStateChange: "+a.newValue,this.ControllerName);this.maximizedVisible=a?a.newValue:!0;this.maximizedVisible?k.call(this):l.call(this);this.loaded=!0}function j(){return!this.loaded||this.wasBlurred||this.wasResized?!0:!1}function k(a){this.logger.debug("Maximizing view desktop",this.ControllerName);t.call(this,q)}function l(){this.logger.debug("Minimizing view desktop",this.ControllerName);s.call(this,r)}function m(){var a=this.getFirstElement(this.LPViewMap.header,this.maximizedView),b=getComputedStyle(a).backgroundColor,c=o(b),d=[];d.push(this.getFirstElement(this.LPViewMap.topMenuButton,this.maximizedView));d.push(this.getFirstElement(this.LPViewMap.closeButton,this.maximizedView));d.push(this.getFirstElement(this.LPViewMap.minimizeButton,this.maximizedView));d.push(this.getFirstElement(this.LPViewMap.closeButton,this.minimizedView));d.push(this.getFirstElement(this.LPViewMap.maximizeButton,this.minimizedView));d.push(this.getFirstElement(this.LPViewMap.widgetSdkButton,this.maximizedView));d.push(this.getFirstElement(this.LPViewMap.refreshSdkButton,this.maximizedView));d.push(this.getFirstElement(this.LPViewMap.minimizeSdkButton,this.maximizedView));d.forEach(function(a){n(a,c)})}function n(a,b){if(a){a.onmouseover=function(){b?a.style.backgroundColor="rgba(255,255,255,0.3)":a.style.backgroundColor="rgba(0,0,0,0.3)"};a.onmouseleave=function(){a.style.backgroundColor="transparent"}}}function o(a){var b=a.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/),c=parseInt(b[1],10),d=parseInt(b[2],10),e=parseInt(b[3],10),f=(299*c+587*d+114*e)/1e3;return 40>f?!0:!1}function p(a){var b=f.call(this,a,{});Object.keys(b).length>0&&this.appContext.uiStateManager.setWindowPosition(b)}function q(a){var b=this;this.logger.debug("_showMaximized",this.ControllerName);w.call(this);this.animateKeyframe({view:this.maximizedView,showBefore:!0,classname:this.LPClassesMap.showMaximizedKeyframes,showAnimation:!j.call(this),callback:function(){b.logger.debug("_showMaximized: animation complete",b.ControllerName);b.maximizedVisible=!0;p.call(this,!0);b.appContext.events.trigger({appName:b.ControllerName,eventName:b.VCEvents.MAXIMIZE_VISIBLE});b.runCallback(a,b);m.call(this)}})}function r(a){var b=this;this.logger.debug("_showMinimized",this.ControllerName);this.show(this.minimizedView);p.call(this,!1);this.runCallback(a,b);this.focusOnElement(b.LPViewMap.maximizeButton,b.minimizedView)}function s(a){var b=this;this.logger.debug("_hideMaximized",this.ControllerName);v.call(this);this.animateKeyframe({view:this.maximizedView,classname:this.LPClassesMap.hideMaximizedKeyframes,showBefore:!0,hideAfter:!0,showAnimation:!j.call(this),callback:function(){b.maximizedVisible=!1;b.logger.debug("_hideMaximized: animation complete",b.ControllerName);b.runCallback(a,b)}})}function t(a){var b=this;this.logger.debug("_hideMinimized",this.ControllerName);this.minimizedHeight=u(this.minimizedView);this.hide(this.minimizedView);this.runCallback(a,b)}function u(a){var b=a.getBoundingClientRect();return b.bottom-b.top}function v(){var a=u(this.getFirstElement(this.LPViewMap.header,this.maximizedView));this.maximizedHeight=u(this.maximizedView);this.createKeyframe(this.LPClassesMap.hideMaximizedKeyframes,[{percent:0,animate:"height: "+this.maximizedHeight+"px; bottom: "+this.maximizedView.style.bottom},{percent:50,animate:"height: "+.5*this.maximizedHeight+"px;"},{percent:100,animate:"height: "+a+"px; bottom: "+this.minimizedView.style.bottom+"; margin-bottom: 0px;"}],200)}function w(){this.minimizedHeight||(this.minimizedHeight=parseInt(this.getComputedStyle(this.appContext.wrapperWindow.getMinimizedElement()).height,10));this.maximizedHeight||(this.maximizedHeight=parseInt(this.getComputedStyle(this.appContext.wrapperWindow.getMaximizedElement()).height,10));this.createKeyframe(this.LPClassesMap.showMaximizedKeyframes,[{percent:0,animate:"height: "+this.minimizedHeight+"px; bottom: "+this.minimizedView.style.bottom+"; margin-bottom: 0px;"},{percent:50,animate:"height: "+.5*this.maximizedHeight+"px;"},{percent:100,animate:"height: "+this.maximizedHeight+"px; bottom: "+this.maximizedView.style.bottom}],200)}function x(a,b){return b&&b.conf?b.conf.unifiedConf&&b.conf.unifiedConf[a]?b.conf.unifiedConf[a]:b.conf.windowConf&&b.conf.windowConf[a]?b.conf.windowConf[a]:!1:!1}var y;lpTag.unifiedWindow.WrapperWindowExtender=lpTag.unifiedWindow.WrapperWindowExtenderBase.extend({ControllerName:"WrapperWindowExtender",LPClassesMap:{hideMaximizedKeyframes:"hide_maximized_keyframes",showMaximizedKeyframes:"show_maximized_keyframes"},LPWindowSizesMap:{small:{value:"small",bottom:"-400px"},large:{value:"large",bottom:"-580px"}},initialize:function(){this.windowWidth=280;this.windowSize=this.appContextConf.uiState.window.size?this.appContextConf.uiState.window.size:this.LPWindowSizesMap.small.value;this.allowMaxVerticalDrag=x("maximizedVerticalDrag",this.appContext);this.allowMinVerticalDrag=x("minimizedVerticalDrag",this.appContext);this.wrapperWindow=this.appContext.wrapperWindow},events:function(){this.bindViewEvent({view:this.minimizedView,DOMEvent:"click",callback:b,context:this});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.minimizeButton,DOMEvent:"click",callback:a,context:this});this.bindModel({path:this.uiPath.WINDOW_EMBEDDED,callback:c,context:this});this.bindModel({path:this.uiPath.WINDOW_MAXIMIZED,callback:i,context:this})},render:function(){var a=this.appContext.conf.unifiedConf;this.fontBasedScale=a.enableFontBasedZoom||!1;if(!a.poppedOut&&!a.external){this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.RESIZE,e,this);this.bindModel({path:this.uiPath.WINDOW_POSITION,callback:d,context:this});this.maxDragInstance=this.dragableView({view:this.appContext.wrapperWindow.getMaximizedElement(),anchor:this.getFirstElement(this.LPViewMap.header,this.maximizedView),container:document.body,horizontal:!0,vertical:!1,sticky:!0,stickyHorizontal:!1,stickyVertical:!1,onDragEnd:this.maxDragComplete,context:this,allowVerticalDrag:this.allowMaxVerticalDrag});this.minDragInstance=this.dragableView({view:this.minimizedView,anchor:this.getFirstElement(this.LPViewMap.header,this.minimizedView),container:document.body,horizontal:!0,vertical:!1,sticky:!0,stickyHorizontal:!1,stickyVertical:!1,onDragEnd:this.minDragComplete,context:this,allowVerticalDrag:this.allowMinVerticalDrag})}this.scaleWindow()}});y=lpTag.unifiedWindow.WrapperWindowExtender.prototype;y.changeMode=function(a,b){b&&this.appContext.uiStateManager.setWindowState(a)};y.dispose=function(){this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.RESIZE,e);lpTag.unifiedWindow.WrapperWindowExtenderBase.prototype.dispose.call(this)};y.maxDragComplete=function(a){a.minBottom=this.minimizedView.style.bottom;this.dragComplete(a)};y.minDragComplete=function(a){a.minBottom=a.bottom;a.bottom=this.maximizedView.style.bottom;this.dragComplete(a)};y.dragComplete=function(a){this.dragging=a.dragging;this.dragging||this.appContext.uiStateManager.setWindowPosition({left:a.left,right:a.right,bottom:a.bottom||"0px",minBottom:a.minBottom||"0px"})};y.calculateScale=function(){var a=h(this.appContextConf.unifiedConf.defaultFontSize||"16px"),b=parseFloat(getComputedStyle(document.documentElement).fontSize);return b>a?b/a:1};y.scaleContent=function(){var a=this.appContext.wrapperWindow.getMaximizedElement(),b=this.appContext.wrapperWindow.getMinimizedElement(),c=this.getModelParam(this.uiPath.WINDOW_POSITION),d=c.left&&"auto"!==c.left?"left":"right";a.style.transformOrigin="bottom "+d;a.style.transform="scale("+this.scale+")";a.style.maxHeight="calc(calc(100% / "+this.scale+") - 20px)";b.style.transformOrigin="bottom "+d;b.style.transform="scale("+this.scale+")";lpTag.events.trigger(this.ControllerName,this.EventName.wrapperWindowExtender.WINDOW_SCALE_SET,this.scale);if(this.appContext.conf.unifiedConf.poppedOut||this.appContext.conf.unifiedConf.external){a.style.transformOrigin="center top";a.style.maxWidth="calc(100% / "+this.scale+")";a.style.maxHeight="calc(100% / "+this.scale+")";this.originalWindowHeight=this.originalWindowHeight||h(window.outerHeight);this.originalWindowWidth=this.originalWindowWidth||h(window.outerWidth);var e=this.originalWindowWidth*this.scale,f=this.originalWindowHeight*this.scale;window.resizeTo(e,f)}};y.removeScale=function(){var a=this.appContext.wrapperWindow.getMaximizedElement(),b=this.appContext.wrapperWindow.getMinimizedElement();a.style.transformOrigin="initial";a.style.transform="initial";a.style.maxHeight="calc(100% - 20px)";b.style.transformOrigin="initial";b.style.transform="initial";if(this.appContext.conf.unifiedConf.poppedOut||this.appContext.conf.unifiedConf.external){a.style.maxWidth="initial";this.originalWindowHeight=this.originalWindowHeight;this.originalWindowWidth=this.originalWindowWidth;this.originalWindowHeight&&this.originalWindowWidth&&window.resizeTo(this.originalWindowWidth,this.originalWindowHeight)}lpTag.events.trigger(this.ControllerName,this.EventName.wrapperWindowExtender.WINDOW_SCALE_SET,this.scale)};y.scaleWindow=function(){if(this.fontBasedScale){this.scale=this.calculateScale();this.scale>1?this.scaleContent():this.scale<=1&&this.removeScale()}};y.getScale=function(){return this.scale||1}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(this.headerText){var b=this.createView({template:"<div class='lp_lpview_survey_header lp_survey_header_area lpc_survey-area__header {{deviceClass}}'><div class='lp_header_text lp_text'>{{text}}</div></div>",wrapWithDiv:!1,doNotAddChild:!0,textInjection:{text:this.headerText}});this.addView({viewToAdd:b,targetView:a,beforeView:a.firstChild})}}function b(a){if(this.footerText){var b=this.createView({template:"<div class='lp_lpview_survey_footer lp_survey_footer_area'><div class='lp_footer_text lp_text'>{{text}}</div></div>",wrapWithDiv:!1,doNotAddChild:!0,textInjection:{text:this.footerText}});this.addView({viewToAdd:b,targetView:a})}}function c(a){return a&&a.isViewController}function d(){var a;a=this.parent.isCloseSurveyVisible?this.LPViewMap.closeSurveyButton:this.parent.isSubmitSurveyDisabled?this.LPViewMap.cancelButton:this.LPViewMap.submitButton;this.focusOnElement(a)}var e,f=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.PagingViewControllerBase=lpTag.unifiedWindow.BaseViewController.extend({utils:lpTag.taglets.lpUtil,ControllerName:"PagingViewControllerBase",className:"lp_paging_wrapper",LPViewMap:{pagesArea:"^pages_area",pager:"^pager",prevButton:"^prev_button",nextButton:"^next_button",submitButton:"^submit_button",cancelButton:"^cancel_button",closeSurveyButton:"^close_survey_button"},LPClassesMap:{selected:"lp_selected"},initialize:function(a){this.headerText=a.headerText;this.footerText=a.footerText;this.appContext=a.appContext;this.submitFunc=a.submitCallback;this.cancelFunc=a.cancelCallback;this.validatorFunc=a.validatorCallback;this.dataContext=a.context;this.addClass(this.view,this.className);this.isLogicalSurvey=a.isLogicalSurvey;this.renderPages(a.pages);a.activeQuestions&&this.refresh(a.activeQuestions)},events:function(){this.bindViewEvent({selector:this.LPViewMap.submitButton,DOMEvent:"click",callback:this.submitClicked});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"click",callback:this.cancelClicked});this.bindViewEvent({selector:this.LPViewMap.closeSurveyButton,DOMEvent:"click",callback:this.cancelClicked});0===this.pages.length&&this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:d})},onInitialize:function(){0===this.pages.length&&d.call(this);this.toggleSubmitButtonAvailability()}});e=lpTag.unifiedWindow.PagingViewControllerBase.prototype;e.enableSubmit=function(a){var b=this.getFirstElement(this.LPViewMap.submitButton);b&&(a?b.removeAttribute("disabled"):b.setAttribute("disabled","disabled"))};e.submitClicked=function(){this.utils.runCallback(this.submitFunc,this.dataContext)};e.cancelClicked=function(){this.utils.runCallback(this.cancelFunc,this.dataContext)};e.renderPages=function(b){this.pages=[];if(0===b.length)a.call(this,this.getFirstElement(this.LPViewMap.pagesArea));else for(var c=0;c<b.length;c++)this.addPage(b[c],0===c,c===b.length-1)};e.refresh=function(a){};e.isIncludedId=function(a,b){var c=f.indexOf(a,b);return-1!==c};e.addPage=function(d,e,f){var g={};g.controller=c(d)?d:null;g.view=c(d)?d.view:d;g.view.style["-webkit-overflow-scrolling"]="touch";"undefined"!=typeof this.headerText&&e&&this.loadSingleResource("<div class='lp_lpview_survey_header lp_survey_header_area lpc_survey-area__header {{deviceClass}}'><div class='lp_header_text lp_text'>{{text}}</div></div>",function(){a.call(this,g.view)});"undefined"!=typeof this.footerText&&f&&this.loadSingleResource("<div class='lp_lpview_survey_footer lp_survey_footer_area'><div class='lp_footer_text lp_text'>{{text}}</div></div>",function(){b.call(this,g.view)});this.getFirstElement(this.LPViewMap.pagesArea).appendChild(g.view);this.pages.push(g)};e.displayButton=function(a,b){b?this.show({view:a,useClasses:!0}):this.hide({view:a,useClasses:!0})};e.toggleSubmitButtonAvailability=function(){this.setEnabled(!this.parent.isSubmitSurveyDisabled,this.LPViewMap.submitButton)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a,b;lpTag.unifiedWindow.PagingViewController=lpTag.unifiedWindow.PagingViewControllerBase.extend({ControllerName:"PagingViewController",events:function(){this.bindViewEvent({selector:this.LPViewMap.submitButton,DOMEvent:"keydown",callback:this.toggleWaitingForKeyUp});this.bindViewEvent({selector:this.LPViewMap.submitButton,DOMEvent:"keyup",callback:this.submitKeyUp});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"keydown",callback:this.toggleWaitingForKeyUp});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"keyup",callback:this.cancelKeyUp});this.bindViewEvent({selector:this.LPViewMap.closeSurveyButton,DOMEvent:"keydown",callback:this.toggleWaitingForKeyUp});this.bindViewEvent({selector:this.LPViewMap.closeSurveyButton,DOMEvent:"keyup",callback:this.cancelKeyUp})},render:function(){this.updateButtonsEnablement()}});a=lpTag.unifiedWindow.PagingViewController.prototype;b=lpTag.unifiedWindow.PagingViewControllerBase.prototype;a.updateButtonsEnablement=function(){this.displayButton(this.LPViewMap.prevButton,!1);this.displayButton(this.LPViewMap.nextButton,!1);this.displayButton(this.LPViewMap.submitButton,!this.parent.isCloseSurveyVisible);this.displayButton(this.LPViewMap.cancelButton,!this.parent.isCloseSurveyVisible);this.displayButton(this.LPViewMap.closeSurveyButton,this.parent.isCloseSurveyVisible)};a.submitClicked=function(a){this.waitingForKeyUp||b.submitClicked.call(this)};a.submitKeyUp=function(a){if(this.waitingForKeyUp){b.submitClicked.call(this);this.waitingForKeyUp=!1}};a.cancelClicked=function(a){this.waitingForKeyUp||b.cancelClicked.call(this)};a.cancelKeyUp=function(a){if(this.waitingForKeyUp){b.cancelClicked.call(this);this.waitingForKeyUp=!1}};a.toggleWaitingForKeyUp=function(a){13===a.keyCode&&(this.waitingForKeyUp=!0)};a.refresh=function(a){var b,c,d;if(a)for(var e=0;e<this.pages.length;e++){b=this.pages[e];c=this.isIncludedId(a,b.controller.question.id);d={view:b.view,useClasses:!0};c?this.show(d):this.hide(d)}};a.updateActivePages=function(a){this.refresh(a)}}();!function(){function a(){if(this.sliderCurrentTimeout){clearTimeout(this.sliderCurrentTimeout);this.sliderCurrentTimeout=void 0}this.keepWidgetOpen||(this.appContext.WidgetManager&&this.appContext.WidgetManager.getLastSliderState()?this.appContext.WidgetManager.onWidgetStateChanged(!1):c.call(this)||this.hideSlider());
}function b(){this.isSliderOpen&&(this.sliderCurrentTimeout=setTimeout(a.bind(this),this.autoCloseTimeout))}function c(){if(this.views&&this.views.coBrowseInvitationView){this.setSelectedView("coBrowseInvitationView");return!0}return!1}var d,e=lpTag.taglets.lpUtil;lpTag.unifiedWindow.SliderViewControllerBase=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SliderViewControllerBase",applicationName:"SliderViewController",template:"<div class='lpc_slider lp_slider {{deviceClass}}' data-lp-point='slider' data-lp-cust-id='sliderMaximizedWindow'><div class='lp_slider_header lpc_slider-header {{deviceClass}}' data-lp-point='header' data-lp-cust-id='top'><div class='lp_header-content-wrapper'><button class='lpc_slider-header__refresh-button {{deviceClass}} lp_refresh lp_hidden' data-lp-point='refresh' title='{{tooltip_refresh_slider}}' tabindex='0'><span class='lp_refresh_slider_icon' data-lp-point='refresh-slider-icon' data-lp-type='icon'><img class='lpc_slider-header__refresh-button-asset {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_refresh_slider}}' aria-hidden='true' data-lp-point='refresh-img'></span></button><div class='lp_title' role='heading' aria-level='2'><span data-lp-point='sliderHeaderText' data-lp-cust-id='top_text' class='lp_top-text lpc_slider-header__text {{deviceClass}}'>{{sliderHeader}}</span></div><button class='lpc_slider-header__minimize-button {{deviceClass}} lp_minimize' data-lp-point='minimize-slider' title='{{tooltip_minimize_slider}}' tabindex='0'><span class='lp_minimize-right-slider-icon' data-lp-point='minimize-icon' data-lp-type='icon'><img class='lpc_slider-header__minimize-button-asset {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_minimize_slider}}' aria-hidden='true' data-lp-point='minimize-img'></span></button></div></div><div class='lpc_slider__body lp_slider_container {{deviceClass}}' data-lp-point='container' data-lp-cust-id='surveyArea'></div></div>",isSliderOpen:!1,inProgress:!1,sliderCurrentTimeout:void 0,views:{},LPViewMap:{mainWindow:"^maximized",minimizeButton:"^minimize-slider",minimizeImg:"^minimize-img",container:"^container",headerText:"^sliderHeaderText",header:"^header",slider:"^slider",minimizeIcon:"^minimize-icon",refreshButton:"^refresh",mainArea:"^main"},LPClassesMap:{sliderOpen:"lp_slider_open",cssCustomization:{window:"lpc_window_slider-open",header:"lpc_maximized-header_slider-open",mainArea:"lpc_body_slider-open"}},autoCloseTimeout:3e3,keepWidgetOpen:!1,cobrowseMinimizeBtnTitle:"",initialize:function(a){var b=this.appContext.conf.widgetSDK;this.unifiedConf=this.appContext.conf.unifiedConf;this.mainWindow=this.getFirstElement(this.LPViewMap.mainWindow,document.body);this.maximized=this.appContext.wrapperWindow.getMaximizedElement();this.showRefreshButton=Array.isArray(b)&&(b[0].showRefreshButton===!0||"true"===b[0].showRefreshButton);this.maximizedHeader=this.getFirstElement(this.LPViewMap.header,this.maximized);this.maximizedMainArea=this.getFirstElement(this.LPViewMap.mainArea,this.maximized);if(this.unifiedConf.connectorsSfConfig){var c=this.getFirstElement(this.LPViewMap.minimizeButton);c.style.visibility="hidden";this.keepWidgetOpen=!0}},events:function(){this.bindViewEvent({inView:this.view,selector:this.LPViewMap.minimizeButton,DOMEvent:"click",callback:a,context:this});this.bindViewEvent({inView:this.view,selector:this.LPViewMap.refreshButton,DOMEvent:"click",callback:this.refreshView,context:this});this.bindViewEvent({selector:this.LPViewMap.slider,DOMEvent:"keydown",callback:this.keydownListener,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.PREPARE_SLIDER_CLOSED_TIMEOUT,context:this,func:b});this.appContext.events.bind({appName:"RichContentWidget",eventName:"CloseRichContentWidget",context:this,func:a})},render:function(){this.hide()},setSliderToolbarViewByType:function(a){var b=this.getFirstElement(this.LPViewMap.refreshButton);b&&(a===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView&&this.showRefreshButton?e.removeClass(b,"lp_hidden"):e.addClass(b,"lp_hidden"))}});d=lpTag.unifiedWindow.SliderViewControllerBase.prototype;d.isInProgress=function(){return this.inProgress};d.addView=function(a,b,c,d,e,f){this.views[c]={view:a,header:b,type:d||"",minimizeSliderBtnTitle:f||""};e&&(this.views[c].callbacks=e);var g=this.getFirstElement(this.LPViewMap.container);g.appendChild(a);this.selectedViewId!==c&&this.hide(a)};d.removeView=function(a){if("object"==typeof this.views[a]&&!lpTag.taglets.lpUtil.getPropertyFromObject(this,"unifiedConf.connectorsSfConfig",!1)){var b=this.getFirstElement(this.LPViewMap.container);b.removeChild(this.views[a].view);delete this.views[a]}};d.setSelectedView=function(a){var b;if("object"==typeof this.views[a]){this.setSliderToolbarViewByType(this.views[a].type);this.selectedViewId&&this.views[this.selectedViewId]&&this.hide(this.views[this.selectedViewId].view);this.selectedViewId=a;var c=this.getFirstElement(this.LPViewMap.slider),d=this.getFirstElement(this.LPViewMap.headerText,c);d.innerHTML=this.views[this.selectedViewId].header;var e=d.textContent;e&&c.setAttribute("aria-label",e);this.views[this.selectedViewId].minimizeSliderBtnTitle&&this.setMinimizeButtonTitle(this.views[this.selectedViewId].minimizeSliderBtnTitle);b=this.views[this.selectedViewId];this.captureFocus(c);this.show(b.view);this.appContext.events.trigger({appName:"slider",eventName:this.VCEvents.SLIDER_VIEW_CHANGE,data:{id:this.selectedViewId,type:b.type}})}};d.setMinimizeButtonTitle=function(a){var b,c,d=this.getFirstElement(this.LPViewMap.slider);if(a){b=this.getFirstElement(this.LPViewMap.minimizeButton,d);c=this.getFirstElement(this.LPViewMap.minimizeImg,d);b.setAttribute("title",a);b.setAttribute("aria-label",a);c.setAttribute("alt",a)}};d.captureFocus=function(a){if(null!==a){if(null==a.getAttribute("aria-modal")&&null==a.getAttribute("role")){a.setAttribute("aria-modal","true");a.setAttribute("role","dialog")}if("undefined"!=typeof a.querySelectorAll){var b=a.querySelectorAll('a[href]:not([tabindex="-1"]):not(.lp_hidden),area[href]:not([tabindex="-1"]):not(.lp_hidden),input:not([tabindex="-1"]):not(.lp_hidden),select:not([tabindex="-1"]):not(.lp_hidden),textarea:not([tabindex="-1"]):not(.lp_hidden),button:not([tabindex="-1"]):not(.lp_hidden),iframe:not([tabindex="-1"]):not(.lp_hidden),[tabindex]:not([tabindex="-1"]):not(.lp_hidden),[contentEditable=true]:not([tabindex="-1"]):not(.lp_hidden)');if(0!==b.length){var c=b[0],d=b[b.length-1],e=this.getFocusableHeaderButton(this.mainWindow);c!=d&&a.addEventListener("keydown",function(c){if(("Tab"===c.key||9===c.keyCode)&&!c.shiftKey){if(document.activeElement==a.querySelector('[data-lp-point="minimize-slider"]')&&b[b.length-1]&&!this.appContext.coBrowseManager.isInActiveCall()){b[b.length-1].focus();c.preventDefault();return}if(document.activeElement==d&&e){e.focus();c.preventDefault()}}})}}}};d.getSelectedViewId=function(){return this.selectedViewId};d.getSelectedViewType=function(){return this.views&&this.views[this.selectedViewId]&&this.views[this.selectedViewId].type};d.hideSlider=function(){if(this.isVisible(this.view)&&!this.unifiedConf.connectorsSfConfig){this.hide();this.removeClass(this.maximized,this.LPClassesMap.sliderOpen);this.removeClass(this.maximized,this.LPClassesMap.cssCustomization.window);this.removeClass(this.maximizedHeader,this.LPClassesMap.cssCustomization.header);this.removeClass(this.maximizedMainArea,this.LPClassesMap.cssCustomization.mainArea);this.isSliderOpen=!1;this.appContext.events.trigger({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,data:this.views&&this.views[this.selectedViewId]})}};d.refreshView=function(a){var b=this.views[this.selectedViewId]&&this.views[this.selectedViewId].callbacks;a&&a.context;b&&this.isVisible(this.view)&&e.runCallback(b.reload,b.context,this.getFirstElement(a.eventSelector))};d.showSlider=function(){if(!this.isVisible(this.view)){this.addClass(this.maximized,this.LPClassesMap.sliderOpen);this.addClass(this.maximized,this.LPClassesMap.cssCustomization.window);this.addClass(this.maximizedHeader,this.LPClassesMap.cssCustomization.header);this.addClass(this.maximizedMainArea,this.LPClassesMap.cssCustomization.mainArea);this.show();this.isSliderOpen=!0}};d.removeAllViews=function(){for(var a in this.views)this.views.hasOwnProperty(a)&&this.removeView(a);this.views=[]};d.focusOnMinimize=function(){var a=this.getFirstElement(this.LPViewMap.minimizeButton);a&&"function"==typeof a.focus&&a.focus()};d.dispose=function(){this.removeAllViews();this.hideSlider();this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.PREPARE_SLIDER_CLOSED_TIMEOUT,context:this,func:b});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};d.keydownListener=function(b){27===b.keyCode&&a.call(this)}}();!function(){function a(){this.inProgress=!0;this.leftSlider=this.isExternal?this.leftSlider:h.call(this);this.addClass(this.maximized,this.leftSlider?this.LPClassesMap.leftSlider:this.LPClassesMap.rightSlider);this.addClass(this.maximized,this.LPClassesMap.sliderOpen);this.addClass(this.maximized,this.LPClassesMap.cssCustomization.window);this.addClass(this.maximizedHeader,this.LPClassesMap.cssCustomization.header);this.addClass(this.maximizedMainArea,this.LPClassesMap.cssCustomization.mainArea);q.call(this,this.leftSlider);this.isExternal?k.call(this,!0):c.call(this)}function b(){this.inProgress=!0;this.isExternal?k.call(this,!1):d.call(this)}function c(){var a=this.getFirstElement(this.LPViewMap.slider);a.style.width=0;this.show();this.addClass(this.maximized,this.LPClassesMap.sliderAnimate);this.leftSlider||(a.style.right=K+"px");this.animateKeyframe({view:a,classname:this.leftSlider?this.LPClassesMap.showLeftSliderKeyframes:this.LPClassesMap.showRightSliderKeyframes,showAnimation:!0,showBefore:!0,callback:e})}function d(){var a=this.getFirstElement(this.LPViewMap.slider);this.addClass(this.maximized,this.LPClassesMap.sliderAnimate);this.animateKeyframe({view:a,classname:this.leftSlider?this.LPClassesMap.hideLeftSliderKeyframes:this.LPClassesMap.hideRightSliderKeyframes,showAnimation:!0,hideAfter:!0,callback:f})}function e(){var a=this.getFirstElement(this.LPViewMap.slider);a.style.width="";a.style.right="";this.removeClass(this.maximized,this.LPClassesMap.sliderAnimate);this.show();this.inProgress=!1}function f(){this.hide();this.removeClass(this.maximized,this.LPClassesMap.sliderOpen);this.removeClass(this.maximized,this.LPClassesMap.rightSlider);this.removeClass(this.maximized,this.LPClassesMap.leftSlider);this.removeClass(this.maximized,this.LPClassesMap.sliderAnimate);this.removeClass(this.maximized,this.LPClassesMap.cssCustomization.window);this.removeClass(this.maximizedHeader,this.LPClassesMap.cssCustomization.header);this.removeClass(this.maximizedMainArea,this.LPClassesMap.cssCustomization.mainArea);this.inProgress=!1;if(this.redraw){this.redraw=!1;a.call(this)}}function g(a){var c=a?a.newValue:!0,d=this.models.uiModel.get(this.uiPath.WIDGET_SLIDER_VISIBLE);c||d&&b.call(this)}function h(a){var b=A.call(this,a);G=S.getWindowSize().width;return M>=G?this.leftSlider:i(b.right)?this.leftSlider?G-b.right-M>=0:this.isVisible(this.view)===!1&&b.right<=M:this.leftSlider?this.isVisible(this.view)===!0||b.left>=K:G-b.left-M<0}function i(a){var b=Number(a);return!isNaN(b)&&""!==a}function j(){I?I=!1:H=D(S.getWindowSize().width)}function k(a){if(this.isExternal)if(a){this.show();l(E.call(this,N),!0,e,this)}else l(H,!1,f,this)}function l(a,b,c,d){var e=S.getWindowSize(),f=e.width;if(b&&e.width<a-Q||!b&&e.width>a){if(b){f+=P;f=f>a?a:f}else{f-=P;f=a>f?a:f}I=!0;window.resizeTo(f,e.height);setTimeout(m(a,f,b,c,d),R)}else{d.show();lpTag.taglets.lpUtil.runCallback(c,d)}}function m(a,b,c,d,e){return function(){var f=S.getWindowSize().width;b-Q>f&&c&&window.moveBy(-P,0);l(a,c,d,e)}}function n(a){return function(){a.isVisible(a.view)&&window.resizeTo(D(H),S.getWindowSize().height)}}function o(){this.bindModel({path:this.uiPath.WINDOW_POSITION,callback:r,context:this})}function p(){this.unbindModel({path:this.uiPath.WINDOW_POSITION,callback:r,context:this})}function q(a){var b=this.getFirstElement(this.LPViewMap.minimizeIcon);this.removeClass(b,a?this.LPClassesMap.rightSliderMinimizeIcon:this.LPClassesMap.leftSliderMinimizeIcon);this.addClass(b,a?this.LPClassesMap.leftSliderMinimizeIcon:this.LPClassesMap.rightSliderMinimizeIcon)}function r(a,b){var c=A.call(this,a);G=S.getWindowSize().width;var d,e,f;if(b&&M>=G){f=this.leftSlider?"0px":"auto";e=this.leftSlider?"auto":"0px"}else if(h.call(this,a)){f=s(c,G);e="auto";d=this.isVisible(this.view)&&!this.leftSlider}else{e=t(c,G);f="auto";d=this.isVisible(this.view)&&this.leftSlider}u.call(this,d);this.appContext.uiStateManager.setWindowPosition({left:e,right:f,top:"auto"})}function s(a,b){var c=i(a.right)?a.right:b-(a.width+a.left);c=c>0?c:0;return c+"px"}function t(a,b){var c=i(a.left)?a.left:b-a.right-a.width;c=c>0?c:0;return c+"px"}function u(a){if(a){this.redraw=!0;b.call(this);this.redraw=!0}}function v(){var b=this.models.uiModel.get(this.uiPath.WIDGET_SLIDER_VISIBLE);b&&this.isSliderOpen&&a.call(this)}function w(a){this.scale=a||1}function x(){this.createKeyframe(this.LPClassesMap.showLeftSliderKeyframes,y(5,[{prop:"width",asc:!0}],K),O);this.createKeyframe(this.LPClassesMap.showRightSliderKeyframes,y(5,[{prop:"width",asc:!0},{prop:"right",asc:!1}],K),O);this.createKeyframe(this.LPClassesMap.hideLeftSliderKeyframes,y(5,[{prop:"width",asc:!1}],K),O);this.createKeyframe(this.LPClassesMap.hideRightSliderKeyframes,y(5,[{prop:"width",asc:!1},{prop:"right",asc:!0}],K),O)}function y(a,b,c){var d,e=[];a-=1;for(var f=0;a>=f;f++){d={};d.percent=f*(100/a);d.animate=z(b,a,f,c);e.push(d)}return e}function z(a,b,c,d){for(var e,f="",g=0;g<a.length;g++){f+=a[g].prop+": ";e=a[g].asc?c*(100/b):(b-c)*(100/b);f+=Math.floor(e/100*d);f+="px; "}return f.trim()}function A(a){var b=this.getComputedStyle(this.minimized);return{right:B(a&&a.newValue.right,this.minimized.style.right),left:B(a&&a.newValue.left,this.minimized.style.left),width:C(b.width)}}function B(a,b){a=a||b;return"auto"===a?a:C(a)}function C(a){var b=parseInt(a,10);return isNaN(b)?"":b}function D(a){return L+10>a?L+10:a}function E(a){return this.scale>1?a*this.scale:a}function F(a,b,c){var d=lpTag.events.hasFired(b,a);if(d.length>0){var e=d[d.length-1];e.data&&c(e.data)}}var G,H,I,J,K=400,L=280,M=K+L,N=M+20,O=150,P=120,Q=20,R=50,S=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.SliderViewController=lpTag.unifiedWindow.SliderViewControllerBase.extend({ControllerName:"SliderViewController",LPClassesMap:{rightSlider:"lp_right_slider",leftSlider:"lp_left_slider",sliderAnimate:"lp_slider_animate_open",showLeftSliderKeyframes:"show_left_slider_animation",showRightSliderKeyframes:"show_right_slider_animation",hideLeftSliderKeyframes:"hide_left_slider_animation",hideRightSliderKeyframes:"hide_right_slider_animation",leftSliderMinimizeIcon:"lp_minimize-left-slider-icon",rightSliderMinimizeIcon:"lp_minimize-right-slider-icon"},initialize:function(a){this.minimized=this.appContext.wrapperWindow.getMinimizedElement();this.isExternal=this.appContext.conf.unifiedConf.poppedOut||this.unifiedConf.external;this.leftSlider=this.isExternal?!1:!0;this.scale=1;this.isExternal&&this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.RESIZE,j,this);x.call(this)},events:function(){if(this.isExternal)window.onunload=n(this);else{this.bindModel({path:this.uiPath.WINDOW_MAXIMIZED,callback:g,context:this});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:v});this.bindModel({path:this.uiPath.WINDOW_EMBEDDED,callback:b,context:this})}this.appContext.events.bind({appName:"*",eventName:this.EventName.wrapperWindowExtender.WINDOW_SCALE_SET,context:this,func:w});F.call(this.EventName.wrapperWindowExtender.WINDOW_SCALE_SET,"*",w)},render:function(){this.isExternal||(this.dragInstance=this.dragableView({view:this.maximized,anchor:this.getFirstElement(this.LPViewMap.header),container:document.body,horizontal:!0,vertical:!1,sticky:!0,stickyHorizontal:!1,stickyVertical:!1,callback:this.dragComplete}));this.preventScroll({view:this.view});H=D(S.getWindowSize().width);this.hide()}});J=lpTag.unifiedWindow.SliderViewController.prototype;J.dragComplete=function(a){this.appContext.uiStateManager.setWindowPosition({left:a.left,right:a.right,bottom:0})};J.showSlider=function(){if(!this.isVisible(this.view)&&!this.inProgress){if(!this.isExternal){r.call(this,null,!0);o.call(this)}a.call(this);this.isSliderOpen=!0}};J.hideSlider=function(){if(this.isVisible(this.view)&&!this.inProgress){this.isSliderOpen=!1;b.call(this);this.isExternal||p.call(this);this.appContext.events.trigger({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,data:this.views&&this.views[this.selectedViewId]})}};J.dispose=function(){this.removeAllViews();this.hideSlider();f.call(this);this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:v});this.appContext.events.unbind({appName:"*",eventName:this.EventName.wrapperWindowExtender.WINDOW_SCALE_SET,context:this,func:w});this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.RESIZE,j);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();!function(){function a(){this.removeView();this.hide();this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_IS_CLOSED})}function b(a){if(a&&"object"==typeof a.style)for(var b in a.style)a.style.hasOwnProperty(b)&&(e.flutterEml.style[b.toString()]=a.style[b.toString()])}function c(a){if("object"==typeof a.view){e.containerEml.innerHTML="";var b=a.view;e.containerEml.appendChild(b);"string"==typeof a.className&&e.flutterEml.classList.add(a.className);if("object"==typeof a.style)for(var c in a.style)a.style.hasOwnProperty(c)&&(e.flutterEml.style[c.toString()]=a.style[c.toString()]);if(a.header){e.headerTextEml.innerHTML=a.header;e.headerTextEml.title=a.header}this.show();var d=f;e.headerTextEml.style.fontSize=d+"px";for(;e.headerTextEml.offsetWidth<e.headerTextEml.scrollWidth;){d--;e.headerTextEml.style.fontSize=d+"px"}}}var d,e,f=(lpTag.taglets.lpUtil,18);lpTag.unifiedWindow.FlutterViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"FlutterViewController",applicationName:"FlutterViewController",template:"<div class='lpc_flutter lp_flutter {{deviceClass}}' data-lp-point='flutter' data-lp-cust-id='flutterWindow' tabindex='0'><div class='lpc_flutter-header lp_flutter_header {{deviceClass}}' data-lp-point='flutterHeader' data-lp-cust-id='flutterHeader'><div class='lp_header-content-wrapper'><div class='lp_title' role='heading'><span class='lp_top-text lpc_flutter-header__text {{deviceClass}}' data-lp-point='flutterHeaderText' data-lp-cust-id='flutterTop_text'>{{flutterHeader}}</span></div><button class='lpc_flutter-header__close-button {{deviceClass}} lp_close' data-lp-point='close-flutter' title='{{tooltip_Close}}' tabindex='0'><span class='lp_close-right-flutter-icon' data-lp-point='close-icon' data-lp-type='icon'><img class='lpc_flutter-header__close-button-asset {{deviceClass}}' src='{{imagesRepository}}/close_button.svg' alt='{{tooltip_Close}}' aria-hidden='true' data-lp-point='close-img'></span></button></div></div><div class='lpc_flutter__body lp_flutter_container {{deviceClass}}' data-lp-point='container' data-lp-cust-id='flutterArea'></div></div>",LPViewMap:{closeButton:"^close-flutter",container:"^container",headerText:"^flutterHeaderText",flutter:"^flutter"},initialize:function(){},events:function(){this.bindViewEvent({inView:this.view,selector:this.LPViewMap.closeButton,DOMEvent:"click",callback:a,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_OPEN,context:this,func:c});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_STYLE_UPDATE,context:this,func:b});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_CLOSE,context:this,func:a})},render:function(){this.hide();e={flutterEml:this.getFirstElement(this.LPViewMap.flutter),containerEml:this.getFirstElement(this.LPViewMap.container),headerTextEml:this.getFirstElement(this.LPViewMap.headerText)}}});d=lpTag.unifiedWindow.FlutterViewController.prototype;d.removeView=function(){if(e.containerEml&&"object"==typeof e.containerEml.firstChild)for(;e.containerEml.firstChild;)e.containerEml.removeChild(e.containerEml.lastChild)};d.dispose=function(){a.apply(this);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b,c,d,e){var f=new Date(a,b,c),g=f.getTime(),h=(new Date).toDateString()===f.toDateString(),i=S.daysElm.querySelector('[data-index="'+d+'"]');if(i){i.className=$.day;i.setAttribute(_.ariaSelected,!1);i.setAttribute(_.tabIndex,-1);i.dataset.disable=!1;i.dataset.selected=!1;i.setAttribute(_.ariaSelected,!1);i.parentElement.className="";i.textContent=c;i.dataset.date=g;e&&i.classList.add(e);var j=f.toLocaleDateString(y,{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(h){i.classList.add($.today);j=aa.TODAY+", "+j}i.setAttribute(_.ariaLabel,j);if(g>M||L>g){i.classList.add($.disable);i.dataset.disable=!0}else{if(V===c&&E===b){F=d;i.focus();G=i;V=0}if(g===B){i.classList.add($.selected);i.dataset.selected=!0;i.setAttribute(_.ariaSelected,!0);U=d}if(g===C){i.classList.add($.selected);i.dataset.selected=!0;i.setAttribute(_.ariaSelected,!0)}if(h){i.setAttribute(_.tabIndex,0);"undefined"==typeof F&&E===b&&(F=d)}if(E===b){"undefined"==typeof P&&(P=d);Q=d}if(B&&C){var k,l;if(C>B){k=B;l=C}else{k=C;l=B}g===k&&g!=l?i.parentElement.classList.add($.startRange):g>k&&l>g?i.parentElement.classList.add($.inRange):g===l&&g!=k&&i.parentElement.classList.add($.endRange)}}}}function b(a,b){return 1===a&&(b%4===0&&b%100!==0||b%400===0)?29:X[a]}function c(){R&&R.classList.remove($.keyFocused)}function d(){c();this.goToPrevMonth()}function e(){c();this.goToNextMonth()}function f(){if(S.yearsElm.selectedIndex<S.yearsElm.options.length-1){c();D--;S.yearsElm.selectedIndex++;F=void 0;this.reselectMonth();this.updateCalender()}}function g(){if(S.yearsElm.selectedIndex>0){c();D++;F=void 0;S.yearsElm.selectedIndex--;this.reselectMonth();this.updateCalender()}}function h(){c();F=void 0;E=parseInt(S.monthsElm.options[S.monthsElm.selectedIndex].value,10);this.updateCalender()}function i(){c();F=void 0;var a=S.yearsElm.options[S.yearsElm.selectedIndex].value;D=parseInt(a,10);this.reselectMonth();this.updateCalender()}function j(a){if(9===a.keyCode){R&&R.classList.remove($.keyFocused);R=document.activeElement;R.classList.add($.keyFocused)}}function k(a){var c,d,e;switch(a.keyCode){case 39:c=F+1;l.call(this,c);break;case 37:c=F-1;l.call(this,c);break;case 38:c=F-7;l.call(this,c);break;case 40:c=F+7;l.call(this,c);break;case 32:d=S.daysElm.querySelector("[data-index='"+F+"']");d&&d.click();break;case 13:d=S.daysElm.querySelector("[data-index='"+F+"']");if(d)if(A)if("undefined"==typeof C){d.click();v()}else v();else{d.click();v()}break;case 27:w.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_CLOSE});break;case 36:d=S.daysElm.querySelector("[data-index='"+F+"']");if(d){e=parseInt(d.innerText,10);c=F-e+1;l.call(this,c,P)}break;case 35:d=S.daysElm.querySelector("[data-index='"+F+"']");if(d){e=parseInt(d.innerText,10);var f=b(E,D);c=F+(f-e);l.call(this,c,Q)}break;case 33:d=S.daysElm.querySelector("[data-index='"+F+"']");if(d){V=parseInt(d.innerText,10);var g=new Date(D,E,1);g.setMonth(g.getMonth()-1);var h=b(g.getMonth(),g.getFullYear());V>h&&(V=h);new Date(g.getFullYear(),g.getMonth(),V)<L&&(V=L.getDate());this.goToPrevMonth(!0)}break;case 34:d=S.daysElm.querySelector("[data-index='"+F+"']");if(d){V=parseInt(d.innerText,10);var i=new Date(D,E,1);i.setMonth(i.getMonth()+1);var j=b(i.getMonth(),i.getFullYear());V>j&&(V=j);new Date(i.getFullYear(),i.getMonth(),V)>M&&(V=M.getDate());this.goToNextMonth(!0)}}}function l(a,c){if("undefined"!=typeof a){var d,e;if(0>a){d=S.daysElm.querySelector("[data-index='"+F+"']");if(d){e=parseInt(d.innerText,10);var f=b((E-1+12)%12,D);V=f+e+(a-F);this.goToPrevMonth(!0)}}else if(a>41){d=S.daysElm.querySelector("[data-index='"+F+"']");if(d){e=parseInt(d.innerText,10);var g=b(E,D);V=a-F-(g-e);this.goToNextMonth(!0)}}else{d=S.daysElm.querySelector("[data-index='"+a+"']");if(d)if(d.classList.contains($.prevMonth)){V=parseInt(d.innerText,10);this.goToPrevMonth(!0)}else if(d.classList.contains($.nextMonth)){V=parseInt(d.innerText,10);this.goToNextMonth(!0)}else"false"==d.dataset.disable?m(a,!0):c&&m(c,!0)}}}function m(a,b){if("undefined"!=typeof a){var c=S.daysElm.querySelector("[data-index='"+F+"']"),d=S.daysElm.querySelector("[data-index='"+a+"']");if(d&&"false"===d.dataset.disable){c&&c.setAttribute(_.tabIndex,-1);if(d){d.setAttribute(_.tabIndex,0);if(b){d.focus();"undefined"==typeof C&&q(d)}F=a}}}}function n(a){r(a);if(A){S.chooseDateIconElm.classList.remove($.hide);S.chooseDateEndElm.classList.remove($.hide);S.chooseButtonElm.textContent=this.translate("datePicker_choose_range");S.chooseButtonElm.title=this.translate("datePicker_choose_range");aa.DEFAULT_HEADER=this.translate("datePicker_select_range")}else{S.chooseDateIconElm.classList.add($.hide);S.chooseDateEndElm.classList.add($.hide);S.chooseButtonElm.textContent=this.translate("datePicker_choose_day");S.chooseButtonElm.title=this.translate("datePicker_choose_day");aa.DEFAULT_HEADER=this.translate("datePicker_select_day")}t(S.monthsElm);for(var b=this.getMonthFullNames(),c=0;11>=c;c++){var d=document.createElement("option");d.text=b[c];d.value=c;S.monthsElm.add(d)}this.reselectMonth();t(S.yearsElm);for(var e=H;e>=J;e--){var f=document.createElement("option");f.text=e;f.value=e;e===D&&(f.selected=!0);S.yearsElm.add(f)}var g;S.daysElm.innerHTML="";g=document.createElement("tr");S.daysElm.appendChild(g);for(var h=0;42>h;h++){if(h%7===0&&h>5){g=document.createElement("tr");S.daysElm.appendChild(g)}var i=document.createElement("div");i.className=$.day;i.dataset.index=h;i.dataset.selected=!1;i.setAttribute(_.ariaSelected,!1);i.onclick=o;i.onmouseover=p;var j=document.createElement("td");j.appendChild(i);g.appendChild(j)}if(!this.datePickerShow){this.datePickerShow=!0;w.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_IS_CLOSED,once:!0,context:this,func:s});var k=a.header||aa.DEFAULT_HEADER;w.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_OPEN,data:{view:this.view,header:k,style:{height:Z.openHeight}}})}S.monthsElm.focus();this.updateCalender();m(F,!0);u()}function o(a){var b,d=a.currentTarget;if("false"===d.dataset.disable){c();if(z===ba.SINGLE||"undefined"!=typeof C){for(var e=S.daysElm.querySelectorAll("[data-selected = true]"),f=0;f<e.length;f++){e[f].dataset.selected=!1;e[f].dataset.endRange=!1;e[f].classList.remove($.selected);e[f].classList.remove($.endRange);e[f].setAttribute(_.ariaSelected,!1)}var g=S.daysElm.querySelectorAll("[data-end-range = true]");for(f=0;f<g.length;f++){g[f].dataset.endRange=!1;g[f].dataset.selected=!1;g[f].classList.remove($.selected);g[f].classList.remove($.endRange);g[f].setAttribute(_.ariaSelected,!1)}C=void 0;d.classList.add($.selected);d.setAttribute(_.ariaSelected,!0);d.dataset.selected=!0;B=parseInt(d.dataset.date,10);b=d.getAttribute("data-index");m(parseInt(b,10),!0);U=parseInt(b,10);u();p(a)}else{var h=parseInt(d.dataset.date,10);d.setAttribute(_.ariaSelected,!0);b=d.getAttribute("data-index");m(parseInt(b,10),!0);if(h!==B){d.classList.add($.endRange);d.dataset.endRange=!0;C=h;u()}p(a)}}}function p(a){"undefined"==typeof C&&q(a.currentTarget)}function q(a){if(A){var b,c=parseInt(a.dataset.index,10),d=U,e=c;if(-1===d){d=a.dataset.date>B?0:41;b=d}if(d>e){e=d;d=c}for(var f=0;42>f;f++){var g=S.daysElm.querySelector("[data-index = '"+f+"']");if(g){g.parentElement.className="";b===f?f!==e?g.parentElement.classList.add($.inRange):g.parentElement.classList.add($.endRange):f===d&&f!=e?g.parentElement.classList.add($.startRange):f>d&&e>f?g.parentElement.classList.add($.inRange):f===e&&f!=d&&g.parentElement.classList.add($.endRange)}}}}function r(a){F=void 0;U=-1;N=a.dateFormat||void 0;M=void 0;L=void 0;z=a.type||ba.SINGLE;A=z===ba.RANGE;var c=new Date,d=c.getFullYear();c.setHours(0,0,0,0);B=c.getTime();C=void 0;D=d;E=c.getMonth();if(Number.isInteger(a.minDate)){var e=1e3*a.minDate;L=new Date(e);L.setHours(0,0,0,0);J=L.getFullYear();K=L.getMonth();if(B<L.getTime()){B=L.getTime();D=J;E=K;V=L.getDate()}}else{J=d-W;K=0;L=new Date(J,K,1);L.setHours(0,0,0,0)}if(Number.isInteger(a.maxDate)&&(!a.minDate||a.maxDate>a.minDate)){var f=1e3*a.maxDate;M=new Date(f);M.setHours(0,0,0,0);H=M.getFullYear();I=M.getMonth();if(B>M.getTime()){B=M.getTime();D=H;E=I;V=M.getDate()}}else{H=d+W;I=11;M=new Date(H,I,b(I,H));M.setHours(0,0,0,0)}}function s(){this.datePickerShow=!1}function t(a){var b,c=a.options.length-1;for(b=c;b>=0;b--)a.remove(b)}function u(){var a={year:"numeric",month:"long",day:"numeric"},b=new Date(B);if(C){var c=new Date(C);if(B>C){c=new Date(B);b=new Date(C)}S.chooseEndDateElm.textContent=c.toLocaleDateString(y,a);S.chooseEndDayElm.textContent=c.toLocaleDateString(y,{weekday:"long"})}else{S.chooseEndDateElm.textContent="-";S.chooseEndDayElm.textContent="-"}S.chooseStartDateElm.textContent=b.toLocaleDateString(y,a);S.chooseStartDayElm.textContent=b.toLocaleDateString(y,{weekday:"long"})}function v(){var a,b,c={year:"numeric",month:"long",day:"numeric"},d=new Date(B).toLocaleDateString(y,c),e=B;if(A){if("undefined"==typeof C||C===B)return;if(C>B){a=new Date(C).toLocaleDateString(y,c);e=B;b=C}else{a=d;d=new Date(C).toLocaleDateString(y,c);e=C;b=B}}var f={actionData:{text:d},metadata:[{type:"datePickerResponse",start:e/1e3}]};if(A){f.actionData.text=d+" - "+a;f.metadata[0].end=b/1e3}w.trigger({appName:lpTag.unifiedWindow.apps.RICH_CONTENT,eventName:lpTag.unifiedWindow.richContentStates.PUBLISH_TEXT,data:f});w.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_CLOSE})}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=lpTag.unifiedWindow.apps.DATE_PICKER,U=-1,V=0,W=150,X=[31,28,31,30,31,30,31,31,30,31,30,31],Y=484,Z={openHeightLarge:"448px",openHeightSmall:"100%"},$={disable:"disable",day:"day",hide:"hide",selected:"selected",endRange:"end_range",startRange:"start_range",inRange:"in_range",today:"today",nextMonth:"nextMonth",prevMonth:"prevMonth",pickerSizeLarge:"lp_large",pickerSizeSmall:"lp_small",keyFocused:"key-focused"},_={tabIndex:"tabindex",ariaSelected:"aria-selected",ariaLabel:"aria-label"},aa={},ba={SINGLE:"single",RANGE:"range"};lpTag.unifiedWindow.DatePickerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"DatePickerViewController",template:"<div class='lpc_datePicker lp_datePicker {{deviceClass}} {{pickerSize}}' data-lp-point='datePicker' data-lp-cust-id='datePickerWindow'><div class='lpc_datePicker_navigate lp_datePicker_navigate' data-lp-point='datePickerNavigate'><button class='lpc_datePicker_navigate__previous-month-button {{deviceClass}}' title='{{prev_month}}' data-lp-point='monthsPrev' tabindex='0' aria-label='{{prev_month}}'><span class='lp_minimize-right-slider-icon' data-lp-type='icon' data-lp-point='months_prev_icon'><img class='lpc_datePicker_navigate__previous-icon lp_prev_icon {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{prev_month}}' aria-hidden='true'></span></button><select class='lpc_datePicker_navigate__month-select selectMonths' data-lp-point='selectMonths' tabindex='0' id='selectMonths' aria-label='{{select_month}}'></select><button class='lpc_datePicker_navigate__next-month-button {{deviceClass}}' title='{{next_month}}' data-lp-point='monthsNext' tabindex='0' aria-label='{{next_month}}'><span class='lp_minimize-left-slider-icon' data-lp-type='icon' data-lp-point='months_next_icon'><img class='lpc_datePicker_navigate__next-icon lp_next_icon {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{next_month}}' aria-hidden='true'></span></button> <button title='{{prev_year}}' class='lp_year_prev_button {{deviceClass}}' data-lp-point='yearsPrev' tabindex='0' aria-label='{{prev_year}}'><span class='lp_minimize-right-slider-icon' data-lp-type='icon' data-lp-point='years_prev_icon'><img class='lpc_datePicker_navigate__previous-icon lp_prev_icon {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{prev_year}}' aria-hidden='true'></span></button><select class='lpc_datePicker_navigate__year-select selectYears' data-lp-point='selectYears' tabindex='0' aria-label='{{select_year}}'></select><button class='lpc_datePicker_navigate__next-year-button {{deviceClass}}' title='{{next_year}}' data-lp-point='yearsNext' tabindex='0' aria-label='{{next_year}}'><span class='lp_minimize-left-slider-icon' data-lp-type='icon' data-lp-point='years_next_icon'><img class='lpc_datePicker_navigate__next-icon lp_next_icon {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{next_year}}' aria-hidden='true'></span></button></div><table class='lpc_datePicker_calender-table lp_calender-table' data-lp-point='calenderBox'><thead><tr><td aria-label='{{day1Name}}'><abbr title='{{day1Name}}'></abbr>{{day1}}</td><td aria-label='{{day2Name}}'><abbr title='{{day2Name}}'></abbr>{{day2}}</td><td aria-label='{{day3Name}}'><abbr title='{{day3Name}}'></abbr>{{day3}}</td><td aria-label='{{day4Name}}'><abbr title='{{day4Name}}'></abbr>{{day4}}</td><td aria-label='{{day5Name}}'><abbr title='{{day5Name}}'></abbr>{{day5}}</td><td aria-label='{{day6Name}}'><abbr title='{{day6Name}}'></abbr>{{day6}}</td><td aria-label='{{day7Name}}'><abbr title='{{day7Name}}'></abbr>{{day7}}</td></tr></thead><tbody data-lp-point='days' (keydown)='_handleCalendarBodyKeydown($event)'></tbody></table><div class='lpc_datePicker_choose-area lp_choose-area' data-lp-point='choose_area'><div class='lp_choose_date_area'><div class='lp_choose_date_start'><div class='lp_choose_date text' data-lp-point='choose_start_date'></div><div class='lp_choose_day text' data-lp-point='choose_start_day'></div></div><div class='lp_choose_date_icon hide' data-lp-point='choose_date_icon'><img class='lpc_cdatePicker_choose-area__arrow-icon lp_arrow_icon {{deviceClass}}' src='{{imagesRepository}}/arrow_right.svg' alt='' aria-hidden='true'></div><div class='lp_choose_date_end hide' data-lp-point='choose_date_end'><div class='lp_choose_date text' data-lp-point='choose_end_date'></div><div class='lp_choose_day text' data-lp-point='choose_end_day'></div></div></div><button class='lpc_datePicker_choose-button lp_choose-button' title='{{choose_button}}' data-lp-point='choose_button' tabindex='0'>{{choose_button}}</button></div></div>",
LPViewMap:{datePicker:"^datePicker",days:"^days",selectMonths:"^selectMonths",selectYears:"^selectYears",monthsPrev:"^monthsPrev",monthsNext:"^monthsNext",yearsPrev:"^yearsPrev",yearsNext:"^yearsNext",chooseArea:"^choose_area",chooseStartDate:"^choose_start_date",chooseStartDay:"^choose_start_day",chooseEndDate:"^choose_end_date",chooseEndDay:"^choose_end_day",chooseDateEnd:"^choose_date_end",chooseDateIcon:"^choose_date_icon",chooseButton:"^choose_button",mainWindow:"^maximized"},preInitView:function(a){var b=this.getFirstElement(this.LPViewMap.mainWindow,document.body),c=$.pickerSizeLarge;Z.openHeight=Z.openHeightLarge;if(b&&b.offsetHeight<Y){c=$.pickerSizeSmall;Z.openHeight=Z.openHeightSmall}y=lpTag.unifiedWindow.language.getLocale();O="he-IL"===y?0:1;this.textInjection={pickerSize:c,iconsRepository:a.appContext.conf.unifiedConf.iconsRepository,imagesRepository:a.appContext.conf.unifiedConf.imagesRepository,day1:0===O?this.translate("weekDayShortSunday"):this.translate("weekDayShortMonday"),day2:0===O?this.translate("weekDayShortMonday"):this.translate("weekDayShortTuesday"),day3:0===O?this.translate("weekDayShortTuesday"):this.translate("weekDayShortWednesday"),day4:0===O?this.translate("weekDayShortWednesday"):this.translate("weekDayShortThursday"),day5:0===O?this.translate("weekDayShortThursday"):this.translate("weekDayShortFriday"),day6:0===O?this.translate("weekDayShortFriday"):this.translate("weekDayShortSaturday"),day7:0===O?this.translate("weekDayShortSaturday"):this.translate("weekDayShortSunday"),day1Name:0===O?this.translate("weekDayFullSunday"):this.translate("weekDayFullMonday"),day2Name:0===O?this.translate("weekDayFullMonday"):this.translate("weekDayFullTuesday"),day3Name:0===O?this.translate("weekDayFullTuesday"):this.translate("weekDayFullWednesday"),day4Name:0===O?this.translate("weekDayFullWednesday"):this.translate("weekDayFullThursday"),day5Name:0===O?this.translate("weekDayFullThursday"):this.translate("weekDayFullFriday"),day6Name:0===O?this.translate("weekDayFullFriday"):this.translate("weekDayFullSaturday"),day7Name:0===O?this.translate("weekDayFullSaturday"):this.translate("weekDayFullSunday"),choose_button:this.translate("datePicker_choose_day"),prev_month:this.translate("prev_month"),select_month:this.translate("select_month"),next_month:this.translate("next_month"),prev_year:this.translate("prev_year"),select_year:this.translate("select_year"),next_year:this.translate("next_year")};aa={TODAY:this.translate("ts_Today"),DEFAULT_HEADER:this.translate("datePicker_select_day")}},initialize:function(a){w=a.appContext.events},events:function(){this.appContext.events.bind({appName:T,eventName:lpTag.unifiedWindow.events.viewController.DATE_PICKER_SHOW,context:this,func:n});this.bindViewEvent({selector:this.LPViewMap.monthsPrev,callback:d,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.monthsNext,callback:e,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.yearsPrev,callback:f,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.yearsNext,callback:g,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.chooseButton,callback:v,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.selectMonths,callback:h,DOMEvent:"change",context:this});this.bindViewEvent({selector:this.LPViewMap.selectYears,callback:i,DOMEvent:"change",context:this});this.bindViewEvent({selector:this.LPViewMap.days,callback:k,DOMEvent:"keydown",context:this});this.bindViewEvent({selector:this.LPViewMap.datePicker,callback:j,DOMEvent:"keyup",context:this});this.bindViewEvent({selector:this.LPViewMap.datePicker,callback:c,DOMEvent:"focusout",context:this})},render:function(){S={daysElm:this.getFirstElement(this.LPViewMap.days),monthsElm:this.getFirstElement(this.LPViewMap.selectMonths),yearsElm:this.getFirstElement(this.LPViewMap.selectYears),yearsNextButtonElm:this.getFirstElement(this.LPViewMap.yearsNext),yearsPrevButtonElm:this.getFirstElement(this.LPViewMap.yearsPrev),monthsNextButtonElm:this.getFirstElement(this.LPViewMap.monthsNext),monthsPrevButtonElm:this.getFirstElement(this.LPViewMap.monthsPrev),chooseStartDateElm:this.getFirstElement(this.LPViewMap.chooseStartDate),chooseStartDayElm:this.getFirstElement(this.LPViewMap.chooseStartDay),chooseEndDateElm:this.getFirstElement(this.LPViewMap.chooseEndDate),chooseEndDayElm:this.getFirstElement(this.LPViewMap.chooseEndDay),chooseDateEndElm:this.getFirstElement(this.LPViewMap.chooseDateEnd),chooseDateIconElm:this.getFirstElement(this.LPViewMap.chooseDateIcon),chooseButtonElm:this.getFirstElement(this.LPViewMap.chooseButton)}}});x=lpTag.unifiedWindow.DatePickerViewController.prototype;x.dispose=function(){if(this.datePickerShow){this.datePickerShow=!1;w.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_CLOSE})}lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};x.reselectMonth=function(){var a=J===D?K:0,b=H===D?I:11;a>E&&(E=a);E>b&&(E=b);for(var c=0;11>=c;c++){var d=S.monthsElm.options[c];c===E&&(d.selected=!0);d.disabled=!1;if(a>c){d.disabled=!0;d.selected=!1}else if(c>b){d.disabled=!0;d.selected=!1}}};x.goToPrevMonth=function(a){if(S.monthsElm.selectedIndex>0&&!S.monthsElm.options[S.monthsElm.selectedIndex-1].disabled){E--;S.monthsElm.selectedIndex--;F=void 0;this.updateCalender();a&&"undefined"==typeof C&&G&&q(G)}else if(0===E&&D>J){E=11;D--;S.monthsElm.selectedIndex=11;S.yearsElm.selectedIndex++;F=void 0;this.reselectMonth();this.updateCalender();a&&"undefined"==typeof C&&G&&q(G)}};x.goToNextMonth=function(a){if(S.monthsElm.selectedIndex<S.monthsElm.options.length-1&&!S.monthsElm.options[S.monthsElm.selectedIndex+1].disabled){E++;S.monthsElm.selectedIndex++;F=void 0;this.updateCalender();a&&"undefined"==typeof C&&G&&q(G)}else if(11===E&&H>D){E=0;D++;S.monthsElm.selectedIndex=0;S.yearsElm.selectedIndex--;F=void 0;this.reselectMonth();this.updateCalender();a&&"undefined"==typeof C&&G&&q(G)}};x.updateCalender=function(){S.yearsNextButtonElm.classList.remove($.disable);S.yearsPrevButtonElm.classList.remove($.disable);S.monthsNextButtonElm.classList.remove($.disable);S.monthsPrevButtonElm.classList.remove($.disable);S.yearsNextButtonElm.setAttribute(_.tabIndex,0);S.yearsPrevButtonElm.setAttribute(_.tabIndex,0);S.monthsNextButtonElm.setAttribute(_.tabIndex,0);S.monthsPrevButtonElm.setAttribute(_.tabIndex,0);if(D>=H){S.yearsNextButtonElm.classList.add($.disable);S.yearsNextButtonElm.setAttribute(_.tabIndex,-1);if(E===I){S.monthsNextButtonElm.classList.add($.disable);S.monthsNextButtonElm.setAttribute(_.tabIndex,-1)}}if(J>=D){S.yearsPrevButtonElm.classList.add($.disable);S.yearsPrevButtonElm.setAttribute(_.tabIndex,-1);if(E===K){S.monthsPrevButtonElm.classList.add($.disable);S.monthsPrevButtonElm.setAttribute(_.tabIndex,-1)}}U=-1;G=void 0;for(var c=(new Date(D,E,1).getDay()-O+7)%7,d=b(E,D),e=b((E-1+12)%12,D),f=e+1-c,g=0;e>=f;f++,g++)a(D,E-1,f,g,$.prevMonth);P=void 0;for(f=1;d>=f;f++,g++)a(D,E,f,g);"undefined"==typeof F&&m(P);for(var h=d+1;42-c>=h;h++,g++)a(D,E+1,h%d,g,$.nextMonth)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){var a="";C.title&&(a+=C.title+"\n");C.description&&(a+=C.description+"\n");var b={hour:"numeric",minute:"numeric"},c={year:"numeric",month:"long",day:"numeric"};a+=new Date(1e3*C.start).toLocaleDateString(s,c)+"\n";a+=new Date(1e3*C.start).toLocaleTimeString(s,b);C.end&&(a+=" - "+new Date(1e3*C.end).toLocaleTimeString(s,b));var d={actionData:{text:a},metadata:[C]};u.trigger({appName:lpTag.unifiedWindow.apps.RICH_CONTENT,eventName:lpTag.unifiedWindow.richContentStates.PUBLISH_TEXT,data:d});u.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_CLOSE})}function b(){i();this.goToPrevWeek()}function c(){i();this.goToNextWeek()}function d(a,b){i();C=a;D&&D.classList.remove(O.selected);D=b;D.classList.add(O.selected);w.chooseButtonElm.disabled=!1;w.chooseButtonElm.classList.remove(O.disable)}function e(){D=void 0;w.chooseButtonElm.disabled=!0;w.chooseButtonElm.classList.add(O.disable)}function f(a){var b=a.currentTarget;r(b.dataset.date)}function g(a){27===a.keyCode&&u.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_CLOSE})}function h(a){if(9===a.keyCode){F&&F.classList.remove(O.keyFocused);F=document.activeElement;F.classList.add(O.keyFocused)}}function i(){F&&F.classList.remove(O.keyFocused)}function j(b){var c;switch(b.keyCode){case 32:c=w.dayDisplayElm.getElementsByClassName(O.keyFocused);c[0]&&c[0].click();b.preventDefault();break;case 13:c=w.dayDisplayElm.getElementsByClassName(O.keyFocused);if(c[0]){c[0].click();a()}else{c=w.dayDisplayElm.getElementsByClassName(O.selected);if(c[0]){c[0].click();a()}}}}function k(a){switch(a.keyCode){case 32:var b=w.weekDisplayElm.getElementsByClassName(O.keyFocused);b[0]&&b[0].click()}}function l(){this.scheduleListShow=!1}function m(a){var b=a.getDay()||7;b-=x;a.setHours(-24*b);return a}function n(){J.day1=0===x?J.weekDayShortSunday:J.weekDayShortMonday;J.day2=0===x?J.weekDayShortMonday:J.weekDayShortTuesday;J.day3=0===x?J.weekDayShortTuesday:J.weekDayShortWednesday;J.day4=0===x?J.weekDayShortWednesday:J.weekDayShortThursday;J.day5=0===x?J.weekDayShortThursday:J.weekDayShortFriday;J.day6=0===x?J.weekDayShortFriday:J.weekDayShortSaturday;J.day7=0===x?J.weekDayShortSaturday:J.weekDayShortSunday}function o(a){w.chooseButtonElm.disabled=!0;w.chooseButtonElm.classList.add(O.disable);var b=a.header||J.DEFAULT_HEADER;H={};B=void 0;K=!1;if(a.firstDayOfTheWeek){var c="sun"===a.firstDayOfTheWeek?0:1;if(x!==c){x=c;n()}}var d=[];if(Array.isArray(a.slots)&&a.slots.length>0){d=a.slots;d.sort(function(a,b){return a.start-b.start});v=d.filter(function(a){var b=(new Date).getTime()/1e3;return a.start>b});if(v.length<=0){p(J.ERROR_MESSAGE);this.openScheduleList(b);var e=w.dayDisplayElm.getElementsByClassName("error_message");e[0].focus()}else{y=m(new Date(1e3*v[0].start));var f=v[v.length-1].end||v[v.length-1].start;z=new Date(1e3*f);v.forEach(function(a){if(Number.isInteger(a.start)){var b=new Date(1e3*a.start).setHours(0,0,0,0);H[b]||(H[b]=[]);H[b].push(a);"string"==typeof a.imageUrl&&(K=!0)}});q(y);this.openScheduleList(b);r(new Date(1e3*v[0].start).setHours(0,0,0,0))}}else{p(J.ERROR_MESSAGE);this.openScheduleList(b)}}function p(a){y=m(new Date);z=new Date;q(y);w.dayDisplayElm.innerHTML="";var b=document.createElement("div");b.textContent=a;b.classList.add("error_message");b.setAttribute(N.tabIndex,0);w.dayDisplayElm.appendChild(b)}function q(a){w.weekDisplayElm.innerHTML="";a.setHours(0,0,0,0);var b=new Date(a.getTime()),c={day:"numeric",month:"numeric"};a.getFullYear()!==(new Date).getFullYear()&&(c.year="numeric");var d=a.toLocaleDateString(s,c);w.weekTextElm.textContent=J.WEEK_OF+" "+d;for(var e=0;7>e;e++){var g=document.createElement("div");g.className=O.lpWeekDay;g.dataset.index=e;g.dataset.selected=!1;g.setAttribute(N.ariaSelected,!1);g.dataset.date=b.getTime();var h=document.createElement("div");h.textContent=J["day"+(e+1)];h.className="lp_weekDay__label";g.appendChild(h);var i=document.createElement("div");i.className="lp_weekDay__text";i.textContent=b.toLocaleDateString(s,{day:"numeric",month:"numeric"});g.appendChild(i);if(H[b.getTime()]){var j=document.createElement("div");j.className="lp_weekDay__count";j.textContent=H[b.getTime()].length;g.appendChild(j);g.onclick=f;g.setAttribute(N.tabIndex,0)}else{g.classList.add(O.disable);g.setAttribute(N.tabIndex,-1)}if(B&&B.getTime()===b.getTime()){g.classList.add(O.selected);g.dataset.selected=!0}var k=b.toLocaleDateString(s,{weekday:"long",year:"numeric",month:"long",day:"numeric"});g.setAttribute("title",k);g.setAttribute(N.ariaLabel,k);w.weekDisplayElm.appendChild(g);b.setDate(b.getDate()+1);b.setHours(0,0,0,0)}A=b;if(y.getTime()<a.getTime()){w.weekPrevElm.classList.remove(O.disable);w.weekPrevElm.dataset.disable=!1;w.weekPrevElm.disabled=!1;I=new Date(A.getTime());I.setDate(A.getDate()-14)}else{w.weekPrevElm.classList.add(O.disable);w.weekPrevElm.dataset.disable=!0;w.weekPrevElm.disabled=!0;I=null}if(z.getTime()>=A.getTime()){w.weekNextElm.classList.remove(O.disable);w.weekNextElm.dataset.disable=!1;w.weekNextElm.disabled=!1}else{w.weekNextElm.classList.add(O.disable);w.weekNextElm.dataset.disable=!0;w.weekNextElm.disabled=!0}}function r(a){var b=!0;B=new Date(parseInt(a,10));w.dayDisplayElm.innerHTML="";var c=w.weekDisplayElm.querySelector("[data-selected = true]");if(c){c.classList.remove(O.selected);c.dataset.selected=!1}var f=w.weekDisplayElm.querySelector('[data-date="'+a+'"]');if(f){f.classList.add(O.selected);f.dataset.selected=!0;f.focus()}e();H[a].forEach(function(a){(a.title||a.description||K)&&(b=!1)});H[a].forEach(function(a){var c=document.createElement("div");c.className="lp_slot";if(K){var e=document.createElement("div");e.className="lp_slot__image";"string"==typeof a.imageUrl?e.style["background-image"]="url('"+a.imageUrl+"')":e.style.background="url('"+E+"/scheduleSlotImage.png') no-repeat 2px 0px";c.appendChild(e)}if(a.title||a.description||K){var f=document.createElement("div");f.className="lp_slot__text";var g=document.createElement("div");g.className="lp_slot__text_title";g.textContent=a.title;f.appendChild(g);var h=document.createElement("div");h.className="lp_slot__text_description";h.textContent=a.description;f.appendChild(h);c.appendChild(f)}else b&&c.classList.add(O.timeOnly);var i=document.createElement("div");i.className="lp_slot__time";var j=new Date(1e3*a.start).toLocaleTimeString(s,{hour:"2-digit",minute:"2-digit"});Number.isInteger(a.end)&&a.end>a.start&&(j+=" - "+new Date(1e3*a.end).toLocaleTimeString(s,{hour:"2-digit",minute:"2-digit"}));i.textContent=j;c.appendChild(i);c.onclick=function(){d(a,c)};c.setAttribute(N.tabIndex,0);w.dayDisplayElm.appendChild(c)})}var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=lpTag.unifiedWindow.apps.SCHEDULE_LIST,H={},I=null,J={},K=!1,L=484,M={openHeightLarge:"90%",openHeightSmall:"100%"},N={tabIndex:"tabindex",ariaLabel:"aria-label",ariaSelected:"aria-selected"},O={disable:"disable",selected:"selected",keyFocused:"key-focused",lpWeekDay:"lp_weekDay",timeOnly:"time_only"};lpTag.unifiedWindow.ScheduleListViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ScheduleListViewController",template:"<div class='lpc_scheduleList lp_scheduleList {{deviceClass}}' data-lp-point='scheduleList' data-lp-cust-id='scheduleListWindow'><div class='lpc_scheduleList_navigate lp_scheduleList_navigate' data-lp-point='scheduleListNavigate'><button class='lpc_scheduleList_navigate__previous-week-button {{deviceClass}}' title='{{prev_week}}' data-lp-point='weekPrev' tabindex='0' aria-label='{{prev_week}}'><span class='lp_minimize-right-slider-icon' data-lp-type='icon' data-lp-point='weeks_prev_icon'><img class='lpc_scheduleList_navigate__previous-icon lp_prev_icon {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{prev_week}}' aria-hidden='true'></span></button> <span class='lpc_scheduleList_navigate__week-text lp_week_text' data-lp-point='weekText' id='weekText'></span> <button class='lpc_scheduleList_navigate__next-week-button {{deviceClass}}' title='{{next_week}}' data-lp-point='weekNext' tabindex='0' aria-label='{{next_week}}'><span class='lp_minimize-left-slider-icon' data-lp-type='icon' data-lp-point='weeks_next_icon'><img class='lpc_scheduleList_navigate__next-icon lp_next_icon {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{next_week}}' aria-hidden='true'></span></button></div><div class='lpc_scheduleList_navigate__week_display lp_week_display' data-lp-point='weekDisplay'></div><div class='lpc_scheduleList_navigate__day_display lp_day_display' data-lp-point='dayDisplay'></div><div class='lpc_scheduleList_choose-area lp_scheduleList_choose-area' data-lp-point='choose_area'><button class='lpc_scheduleList_choose-button lp_choose-button' title='{{choose_button}}' data-lp-point='choose_button' tabindex='0' disabled='disabled'>{{choose_button}}</button></div></div>",LPViewMap:{scheduleList:"^scheduleList",chooseButton:"^choose_button",weekText:"^weekText",weekDisplay:"^weekDisplay",dayDisplay:"^dayDisplay",weekPrev:"^weekPrev",weekNext:"^weekNext",mainWindow:"^maximized"},preInitView:function(a){s=lpTag.unifiedWindow.language.getLocale();x="he-IL"===s?0:1;var b=this.getFirstElement(this.LPViewMap.mainWindow,document.body);M.openHeight=M.openHeightLarge;b&&b.offsetHeight<L&&(M.openHeight=M.openHeightSmall);this.textInjection={iconsRepository:a.appContext.conf.unifiedConf.iconsRepository,prev_week:this.translate("prev_week"),next_week:this.translate("next_week"),choose_button:this.translate("scheduleList_confirm_button_title")};E=a.appContext.conf.unifiedConf.imagesRepository;J={TODAY:this.translate("ts_Today"),WEEK_OF:this.translate("week_of"),ERROR_MESSAGE:this.translate("scheduleList_error_no_slots"),DEFAULT_HEADER:this.translate("scheduleList_header"),weekDayShortSunday:this.translate("weekDayShortSunday"),weekDayShortMonday:this.translate("weekDayShortMonday"),weekDayShortTuesday:this.translate("weekDayShortTuesday"),weekDayShortWednesday:this.translate("weekDayShortWednesday"),weekDayShortThursday:this.translate("weekDayShortThursday"),weekDayShortFriday:this.translate("weekDayShortFriday"),weekDayShortSaturday:this.translate("weekDayShortSaturday")};n()},initialize:function(a){u=a.appContext.events},events:function(){this.appContext.events.bind({appName:G,eventName:lpTag.unifiedWindow.events.viewController.SCHEDULE_LIST_SHOW,context:this,func:o});this.bindViewEvent({selector:this.LPViewMap.chooseButton,callback:a,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.weekPrev,callback:b,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.weekNext,callback:c,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.weekDisplay,callback:k,DOMEvent:"keydown",context:this});this.bindViewEvent({selector:this.LPViewMap.dayDisplay,callback:j,DOMEvent:"keydown",context:this});this.bindViewEvent({selector:this.LPViewMap.scheduleList,callback:g,DOMEvent:"keydown",context:this});this.bindViewEvent({selector:this.LPViewMap.scheduleList,callback:h,DOMEvent:"keyup",context:this});this.bindViewEvent({selector:this.LPViewMap.scheduleList,callback:i,DOMEvent:"focusout",context:this})},render:function(){w={daysElm:this.getFirstElement(this.LPViewMap.days),weekTextElm:this.getFirstElement(this.LPViewMap.weekText),weekDisplayElm:this.getFirstElement(this.LPViewMap.weekDisplay),dayDisplayElm:this.getFirstElement(this.LPViewMap.dayDisplay),weekPrevElm:this.getFirstElement(this.LPViewMap.weekPrev),weekNextElm:this.getFirstElement(this.LPViewMap.weekNext),chooseButtonElm:this.getFirstElement(this.LPViewMap.chooseButton)}}});t=lpTag.unifiedWindow.ScheduleListViewController.prototype;t.dispose=function(){if(this.scheduleListShow){this.scheduleListShow=!1;u.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_CLOSE})}lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};t.goToPrevWeek=function(){null!==I&&q(I)};t.goToNextWeek=function(){q(A)};t.openScheduleList=function(a){if(!this.scheduleListShow){u.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_IS_CLOSED,once:!0,context:this,func:l});u.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.FLUTTER_OPEN,data:{view:this.view,header:a,style:{height:M.openHeight}}});this.scheduleListShow=!0}}}();!function(){function a(){var a=this.appContext&&this.appContext.conf&&this.appContext.conf.windowConf&&this.appContext.conf.windowConf.headerEnhancedUi;if(a){var b=this.appContext.conf.windowConf.headerAddLogoUrl,c=this.appContext.conf.windowConf.headerLogoUrl,d=this.appContext.conf.windowConf.barTitleText,e=this.appContext.conf.windowConf.headerAddSubtitle,f=this.appContext.conf.windowConf.barSubtitleText,g={isHeaderLogo:b,logoUrl:c,title:d,subTitle:{show:e,defaultText:f}};this.addClass(this.headerArea,"lpc_extended-header");this.addClass(this.titleArea,"lpHide");this.removeClass(this.extendedTitleArea,"lpHide");this.title.innerHTML=""+lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(g.title).cleanText;this.title.setAttribute("aria-label",g.title);if(g.isHeaderLogo&&g.logoUrl){this.addClass(this.extendedTitleArea,"show-logo");this.brandLogoImage.setAttribute("src",g.logoUrl)}if(g.subTitle&&g.subTitle.show){this.addClass(this.extendedTitleArea,"show-subtitle");this.subTitle.innerHTML=""+lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(g.subTitle.defaultText).cleanText;this.subTitle.setAttribute("aria-label",g.subTitle.defaultText);g.subTitle.font&&(this.subTitle.style.font=g.subTitle.font);g.subTitle.color&&(this.subTitle.style.color=g.subTitle.color)}}}function b(a){var b=this.appContext&&this.appContext.browserStateManager&&(!this.appContext.browserStateManager.isHidden()||this.appContext.browserStateManager.isFocus()),e=this.models.uiModel.get(this.uiPath.WINDOW_MAXIMIZED);b&&a>0?c.call(this,a):0>=a&&d.call(this);e||k.call(this)}function c(a){h.call(this,a);j.call(this);this.notificationCount=a}function d(){i.call(this);this.notificationCount=0}function e(){return g.call(this)+f.call(this)}function f(){var a=0;"number"==typeof this.widgetNotifications?a=this.widgetNotifications:this.models&&this.models.chatModel&&(a=this.models.chatModel.get(lpTag.unifiedWindow.chatModelPath.SDK_NOTIFICATIONS)||0);return a}function g(){var a=0,b=this.getModelParam(this.chatPath.LINES)||[],c=this.getModelParam(this.uiPath.LAST_LINE_VIEWED);if(c)for(var d=b.length-1;d>=0;d--){if(b[d]["@id"]===c["@id"]&&b[d].convId===c.convId)return a;isNaN(b[d]["@id"])||"agent"!==b[d].source||b[d].history||a++}return 0}function h(a){var b,c=1===a?this.translate("tooltip_Message"):this.translate("tooltip_Messages"),d=this.getFirstElement(this.LPViewMap.notificationText);this.translator.extendDictionary({notificationCount:a,notificationMsg:c},{locale:this.engConf.lang});b=this.translate("tooltip_NewMessageNotification");d.innerHTML=""+lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a).cleanText;d.title=b;this.show({view:this.LPViewMap.notificationCounter,useClasses:!0})}function i(){this.hide({view:this.LPViewMap.notificationCounter,useClasses:!0})}function j(){this.appContext.deviceDetector.isDesktop()?this.shakeX(this.view):this.shakeY(this.view)}function k(){this.appContext.events.trigger({appName:this.unifiedWindowAppName,eventName:"notification",global:!0,data:{count:this.notificationCount}})}function l(){this.appContext.events.trigger({appName:"*",eventName:"keyboard_visible",data:{}})}function m(){var a=e.call(this);if(a){d.call(this);k.call(this);this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.LINES_VIEWED})}}var n;lpTag.unifiedWindow.MinimizedViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"MinimizedViewController",applicationName:"minimized_view",LPViewMap:{notificationText:"^notification_text",notificationCounter:"^notification_counter",minimized:"^header",windowMinimized:".lpc_window_minimized",headerArea:".lpc_minimized-header",titleArea:".lp_title",extendedTitleArea:".lp_extended_title",title:".lp_title-text",brandLogoImage:".lp_brand-logo-asset",subTitle:".lp_top-text"},LPClassesMap:{visible:"lp_visible"},initialize:function(a){this.models=a.models;this.featureStateManager=a.appContext.featureStateManager;this.unifiedWindowAppName=lpTag.unifiedWindow.apps.UNIFIED_WINDOW;this.appEvents=this.appContext.events;this.windowConf=this.appContext.conf.windowConf;this.unifiedConf=this.appContext.conf.unifiedConf;this.engConf=this.appContext.conf.engConf;this.widgetNotifications=0;this.windowMinimized=this.getFirstElement(this.LPViewMap.windowMinimized,document.body);this.headerArea=this.getFirstElement(this.LPViewMap.headerArea,this.windowMinimized);this.titleArea=this.getFirstElement(this.LPViewMap.titleArea,this.windowMinimized);this.extendedTitleArea=this.getFirstElement(this.LPViewMap.extendedTitleArea,this.windowMinimized);this.brandLogoImage=this.getFirstElement(this.LPViewMap.brandLogoImage,this.windowMinimized);this.title=this.getFirstElement(this.LPViewMap.title,this.windowMinimized);this.subTitle=this.getFirstElement(this.LPViewMap.subTitle,this.extendedTitleArea)},events:function(){this.bindModel({path:this.chatPath.LINES,context:this,callback:this.checkNotificationCount});this.bindModel({path:this.uiPath.LAST_LINE_VIEWED,context:this,callback:this.checkNotificationCount});this.bindModel({path:lpTag.unifiedWindow.chatModelPath.SDK_NOTIFICATIONS,context:this,callback:this.onWidgetNotifications});this.appEvents.bind({appName:this.unifiedWindowAppName,eventName:lpTag.unifiedWindow.events.uiState.MINIMIZED,context:this,func:this.checkNotificationCount});this.appEvents.bind({appName:this.unifiedWindowAppName,eventName:lpTag.unifiedWindow.events.uiState.MAXIMIZED,context:this,func:m});this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,this.checkNotificationCount,this);this.appContext.deviceDetector.isIOS()&&this.bindViewEvent({selector:this.LPViewMap.minimized,callback:l,DOMEvent:"click"})},render:function(){this.checkNotificationCount();if(this.featureStateManager.isMenuTop()){var b=this.getFirstElement("^close",this.view);this.addClass(b,"lpHide")}a.call(this)}});n=lpTag.unifiedWindow.MinimizedViewController.prototype;n.onWidgetNotifications=function(a){this.widgetNotifications=a&&"number"==typeof a.newValue&&a.newValue||0;this.checkNotificationCount()};n.checkNotificationCount=function(){var a=e.call(this),c="undefined"==typeof this.notificationCount||this.notificationCount!==a;c&&b.call(this,a)};n.dispose=function(){this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,this.checkNotificationCount);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();!function(){function a(a){var b=S(document.querySelector(".lp_maximized")),c=Array.prototype.filter.call(b,function(a,b){return a==document.activeElement}),d=Array.prototype.indexOf.call(b,c[0]);a.shiftKey||a.target!=b[d]||(d!==b.length-1?b[d+1].focus():b[0].focus());a.shiftKey&&a.target==b[d]&&(0!==d?b[d-1].focus():b[b.length-1].focus())}function b(){var a=this.getFirstElement(this.LPViewMap.bottomLogo);this.isLogoEnabled?this.show(a):this.hide(a)}function c(){var a=this.appContext&&this.appContext.conf&&this.appContext.conf.windowConf&&this.appContext.conf.windowConf.headerEnhancedUi;if(a){var b=this.appContext.conf.windowConf.headerAddLogoUrl,c=this.appContext.conf.windowConf.headerLogoUrl,d=this.appContext.conf.windowConf.barTitleText,e=this.appContext.conf.windowConf.headerAddSubtitle,f=this.appContext.conf.windowConf.barSubtitleText,g={isHeaderLogo:b,logoUrl:c,title:d,subTitle:{show:e,defaultText:f}};this.addClass(this.headerArea,"lpc_extended-header");this.addClass(this.titleArea,"lpHide");this.removeClass(this.extendedTitleArea,"lpHide");this.title.innerHTML=""+lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(g.title).cleanText;this.title.setAttribute("aria-label",g.title);if(g.isHeaderLogo&&g.logoUrl){this.addClass(this.extendedTitleArea,"show-logo");this.brandLogoImage.setAttribute("src",g.logoUrl)}if(g.subTitle&&g.subTitle.show){this.addClass(this.extendedTitleArea,"show-subtitle");this.subTitle.innerHTML=""+lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(g.subTitle.defaultText).cleanText;this.subTitle.setAttribute("aria-label",g.subTitle.defaultText);g.subTitle.font&&(this.subTitle.style.font=g.subTitle.font);g.subTitle.color&&(this.subTitle.style.color=g.subTitle.color)}}}function d(a){var b=a&&a.type||"";"focus"===b?this.bottomArea.style.borderTop="1px solid #0085ef":"blur"===b&&(this.bottomArea.style.borderTop="1px solid #d6d6d6")}function e(a){var b=10,c=10;a.setAttribute("tabindex","0");a.blur();var d=0,e=window.setInterval(function(){a.focus();d++;d>=c&&window.clearInterval(e)},b)}function f(){var a=document.querySelectorAll(".lp_image_sharing_link"),b=a[a.length-1],c=V;V=document.querySelector("[data-lp-point="+c+"]");if(null===V||void 0===V){b.focus();this.appContext.deviceDetector.isIOS()&&e(b)}else{V.focus();this.appContext.deviceDetector.isIOS()&&e(V)}}function g(a,b,c){this.createView({template:"<div class='lp_lpview_mp lp_thank_you_container' data-lp-cust-id='dialogArea' role='alert'><div class='lp_image'><img src='{{imagesRepository}}/thank-you-dark.png' alt=''></div><div class='lp_lpview_title lp_title'>{{message}}</div></div>",target:this.LPViewMap.mainArea,wrapWithDiv:!1,textInjection:a,callback:b,context:c})}function h(a){return function(b){var c=i.bind(a);a.thankYouView=b;a.bindViewEvent({view:a.thankYouView,DOMEvent:"click",callback:c});a.animate(b,{duration:a.fadeInTimeout},null);a.appContext.events.trigger({appName:a.ControllerName,eventName:a.VCEvents.THANK_YOU_PAGE});a.closeThankYouTimeout=setTimeout(c,a.thankYouTimeout)}}function i(){this.rendered&&this.closeThankYouPage()}function j(a){var b=a&&a.visible;b?this.addClass(this.view,this.LPClassesMap.actionsVisibility):this.removeClass(this.view,this.LPClassesMap.actionsVisibility)}function k(a){var b=a&&a.newValue,c=this.getFirstElement("^top_menu"),d=this.getFirstElement(".lp_top_menu-logo-icon",this.mainWindow);if(b){this.topMenuIcon.title=this.translate("tooltip_CollapseActionMenu");this.topMenuIcon.setAttribute("aria-expanded","true");this.removeClass(c,"lpHide");d.setAttribute("aria-label",this.translate("PoweredBy"))}else{this.topMenuIcon.title=this.translate("tooltip_ExpandActionMenu");this.topMenuIcon.setAttribute("aria-expanded","false");this.addClass(c,"lpHide")}this.topMenuIcon.setAttribute("aria-label",this.topMenuIcon.title)}function l(){if(!this.chatDOMAdded&&this.appContext){this.addLogo&&!this.logoDOMAdded&&this.addLogoViewController();this.transcriptVC=new lpTag.unifiedWindow.TranscriptViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1,sliderAPI:this.slider});this.chatVC=new lpTag.unifiedWindow.ChatViewController({models:this.models,appContext:this.appContext,textInjection:this.unifiedConf,wrapWithDiv:!1,resizeEvent:{onResize:this.onChatVCResize,onResizeContext:this,transitionView:this.view},sliderAPI:this.slider});this.actionsVc=new lpTag.unifiedWindow.ActionsManagerViewController({models:this.models,appContext:this.appContext,textInjection:this.appContext.conf.unifiedConf});this.addViewController({viewController:this.transcriptVC,target:this.LPViewMap.engagementArea});this.addViewController({viewController:this.chatVC,target:this.LPViewMap.bottomArea});this.addViewController({viewController:this.coBrowseVC});this.addViewController({viewController:this.actionsVc,target:"^top_menu",beforeView:this.getFirstElement("^bottom_logo")});this.transcriptVC.show();this.chatVC.show();this.chatDOMAdded=!0}}function m(a,b){r.call(this);this.chatVC&&this.chatVC.closeActions();this.addLogo&&!this.logoDOMAdded&&this.addLogoViewController();this.survey=new lpTag.unifiedWindow.SurveyViewController({models:this.models,appContext:this.appContext,target:this.LPViewMap.mainArea,survey:a,surveyType:b,defaultSelect:this.translate("defaultSelect"),iconsRepository:this.unifiedConf.iconsRepository,imagesRepository:this.unifiedConf.imagesRepository});this.hideTranscriptArea();this.addViewController(this.survey);lpTag.hooks&&lpTag.hooks.exec&&lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_LOAD_SURVEY,data:{context:this.appContext,surveyType:b,surveyData:a}})}function n(a){var b=a.data;b.appContext=this.appContext;b.target=this.getFirstElement(this.LPViewMap.mainArea);
b.wrapWithDiv=!1;b.cancelCallback=o.bind(this);var c=new lpTag.unifiedWindow[b.ControllerName](b);this.addViewController({viewController:c,target:b.target});p.call(this,!1);this.dialogVC=c;return c}function o(){this.dialogVC=null}function p(a){if(a){this.show(this.bottomArea);this.show(this.engagementArea)}else{this.hide(this.bottomArea);this.hide(this.engagementArea)}}function q(){p.call(this,!0)}function r(){this.appContext&&this.appContext.wrapperWindow&&this.appContext.wrapperWindow.removeMessage(!0)}function s(){this.appContext.connectionUnavailable=!0;this.showTooltip({text:this.translate("tooltip_ConnectionIssue"),type:this.tooltipType.notification})}function t(a){var b,c=a.channelType;c===lpTag.unifiedWindow.consts.engagementTypes.CHAT_ENGAGEMENT?b="tooltip_CloseToStartConversation":c===lpTag.unifiedWindow.consts.engagementTypes.MESSAGING_ENGAGEMENT&&(b="tooltip_CloseToStartChat");this.showTooltip({text:this.translate(b),type:this.tooltipType.notification,tooltipTimeout:5e3})}function u(a){var b;if(a.validation===lpTag.unifiedWindow.consts.fileSharing.fileAttributes.TYPE)b="tooltip_FileTypeValidationExpanded";else if(a.validation===lpTag.unifiedWindow.consts.fileSharing.fileAttributes.SIZE){b="tooltip_FileSizeValidation";a.extraData&&15===a.extraData&&(b="tooltip_FileSizeValidation15")}this.showTooltip({text:this.translate(b),type:this.tooltipType.notification,tooltipTimeout:5e3})}function v(){this.showTooltip({text:this.translate("startConversationError"),type:this.tooltipType.notification})}function w(){this.animate(this.tooltip,{duration:this.fadeOutTimeout,opacity:"0"},function(){if(this.tooltip){this.tooltip.parentNode.removeChild(this.tooltip);delete this.tooltip}})}function x(){this.animate(this.tooltipButton,{duration:this.fadeOutTimeout,opacity:"0"},function(){if(this.tooltipButton){this.tooltipButton.parentNode.removeChild(this.tooltipButton);delete this.tooltipButton}})}function y(){if(this.appContext.connectionUnavailable){this.appContext.connectionUnavailable=!1;this.showTooltip({text:this.translate("tooltip_ConnectionReEstablished"),type:this.tooltipType.success,tooltipTimeout:3e3})}}function z(){var a=this;this.appContext.wrapperWindow.showClose(!1);n.call(this,{context:this,data:{header_key:"relogin",appContext:this.appContext,callbackTimeout:6e3,ControllerName:lpTag.unifiedWindow.ReauthenticationDialogViewController.ControllerName,callback:function(){var b=a.appContext.conf.engConf&&a.appContext.conf.engConf.connector;b&&b.configuration&&b.configuration.pkceEnabled?window.location.href=a.appContext.pkceManager.getExternalWindowURLForPKCE(a.appContext):window.location.href=a.appContext.appConfigurationManager.getExternalResourceURL(a.appContext.conf.engConf,a.appContext.conf.unifiedConf,a.appContext.conf.unifiedConf.poppedOut)}}})}function A(a){if(a&&"SKIPPED"===a.status){this.closeSurvey();this.showTranscriptArea()}}function B(a){a.preventDefault();if(this.appContext.featureStateManager.isFileSharingEnabled()&&this.appContext.fileSharingManager&&!this.disableFileDragAndDrop){this.animate(this.dragImageView,{duration:this.fadeOutTimeout,opacity:"0"},function(){this.hide(this.dragImageView);this.removeView(this.dragImageView);this.dragImageView=null});this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,data:{image:a.dataTransfer.files[0]}})}}function C(a){a.preventDefault();if(this.appContext.featureStateManager.isFileSharingEnabled()&&this.appContext.fileSharingManager&&!this.disableFileDragAndDrop){this.dragImageView||(this.dragImageView=this.createView({template:"<div class='lp_lpview_mp lp_drop_image_wrapper' data-lp-point='drag_image_area' role='alert'><div class='lp_drop_image'><div class='lp_lpview_title lp_title'>{{message}}</div><div class='lp_image'><img src='{{imagesRepository}}/drop-images-icon.svg' alt=''></div></div></div>",target:this.LPViewMap.mainArea,wrapWithDiv:!1,textInjection:{imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,message:this.appContext.translator.translate("dragFilesMessage")}}));a.dataTransfer&&(this.dragItems=a.dataTransfer.items);E.call(this)}}function D(){this.dragItems&&0!==this.dragItems.length?E.call(this):this.animate(this.dragImageView,{duration:this.fadeOutTimeout,opacity:"0"},function(){if(this.dragImageView){this.hide(this.dragImageView);this.removeView(this.dragImageView);this.dragImageView=null}})}function E(){var a=D.bind(this);this.disableDragTimeout&&clearTimeout(this.disableDragTimeout);this.disableDragTimeout=setTimeout(function(){a()},250)}function F(a){a.preventDefault();H.call(this,this.appContext.translator.translate("dropFilesMessage"))}function G(a){a.preventDefault();H.call(this,this.appContext.translator.translate("dragFilesMessage"))}function H(a){if(this.dragImageView){var b=this.getFirstElement(this.LPViewMap.titleArea,this.dragImageView);b&&(b.innerText=a)}}function I(){this.bottomArea.style.position="relative";this.bottomArea.style.bottom="3%"}function J(){this.bottomArea.style.removeProperty("position");this.bottomArea.style.removeProperty("bottom")}function K(){L.call(this,!0)}function L(a){W&&clearTimeout(W);W=setTimeout(function(){if(!this.isWinPositionSet){this.scrollingDelta=0;var b=this.mainWindow.getBoundingClientRect().top;if(0>b){var c=window.visualViewport.height;this.mainWindow.style.maxHeight=c+"px";this.appContext.deviceDetector.isSafari()&&M.call(this);if(this.appContext.deviceDetector.isOldIOS15()&&this.appContext.deviceDetector.isSafari()){this.getFirstElement(this.LPViewMap.bottomArea).classList.add("lp_ios15_kb_visible");this.getFirstElement(this.LPViewMap.transcriptArea).classList.add("lp_ios15_kb_visible")}this.isWinPositionSet=!0;a&&window.scrollTo(0,0);if(!window.isOnScrollWithKeyboard&&a){window.addEventListener("scroll",Y);window.isOnScrollWithKeyboard=!0}}else N.call(this);this.appContext.events.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.SCROLL_CONVERSATION_TO_BOTTOM,data:{}})}}.bind(this),400)}function M(){var a=this;this.mainWindow&&setTimeout(function(){var b=window.visualViewport.height;a.mainWindow.style.maxHeight=b+"px"},500)}function N(){window.outerWidth>0&&window.outerHeight>0?window.outerWidth>window.outerHeight&&O.call(this):window.innerWidth>window.innerHeight&&O.call(this)}function O(){if(window.screen.width<=375){var a=this.mainWindow.getBoundingClientRect().top,b=this.mainWindow.getBoundingClientRect().height,c=this.bottomArea.getBoundingClientRect().top,d=window.getComputedStyle(this.mainWindow).top;isNaN(d)&&(d=parseInt(d,10));this.mainWindow.style.maxHeight=b+"px";this.scrollingDelta=c-a;this.mainWindow.style.top=d-this.scrollingDelta+"px"}else{window.screen.width<=414?window.innerHeight<370?this.mainWindow.style.maxHeight="38vh":this.mainWindow.style.maxHeight="43vh":this.mainWindow.style.maxHeight="45vh";this.mainWindow.style.top=(window.scrollY||window.pageYOffset||window.document.documentElement.scrollTop)+"px"}this.isWinPositionSet=!0;if(!window.isOnScrollWithKeyboard){window.addEventListener("scroll",Y);window.isOnScrollWithKeyboard=!0}}function P(){this.mainWindow&&(this.mainWindow.style.top=(window.scrollY||window.pageYOffset||window.document.documentElement.scrollTop)-this.scrollingDelta+"px")}function Q(){W&&clearTimeout(W);var a=this.getFirstElement(this.LPViewMap.bottomArea),b=this.getFirstElement(this.LPViewMap.transcriptArea);this.isWinPositionSet=!1;if(this.mainWindow){this.mainWindow.style.maxHeight="";this.mainWindow.style.removeProperty("top")}a&&a.classList&&a.classList.remove("lp_ios15_kb_visible");b&&b.classList&&b.classList.remove("lp_ios15_kb_visible");if(window.isOnScrollWithKeyboard){window.removeEventListener("scroll",Y);window.isOnScrollWithKeyboard=!1}}function R(){if(this.mainWindow){var a=window.visualViewport.height,b=this.mainWindow.getBoundingClientRect().top;b=Math.abs(parseInt(b,10));if(this.appContext.deviceDetector.isAndroidChrome()&&this.appContext.conf.unifiedConf.external){this.mainWindow.style.height=Math.round(window.visualViewport.height)+"px";return}if(0===b){var c=parseInt(this.mainWindow.getBoundingClientRect().height,10);this.mainWindow.style.top=c-a+"px"}if(0!==b&&window.innerHeight-a<5){this.mainWindow.style.maxHeight="";this.mainWindow.style.removeProperty("top")}}}function S(a){var b='button:not(:disabled), input:not(:disabled), [href], select:not(:disabled), textarea:not(:disabled), [tabindex]:not([tabindex="-1"]):not(:disabled)',c=Array.prototype.filter.call(a.querySelectorAll(b),function(a){var b=window.getComputedStyle(a);return"none"!==b.display&&"none"!==a.parentNode.style.display&&"hidden"!==b.visibility&&"hidden"!==a.parentNode.style.visibility&&a.getBoundingClientRect().width>0&&a.getBoundingClientRect().height>0});return c}function T(a){var b=S(a);return b.length>0?b[b.length-1]:null}var U,V,W,X=lpTag.taglets.lpUtil;lpTag.unifiedWindow.MaximizedViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"MaximizedViewController",applicationName:"maximize_view",template:"<div class='lp_lpview_mp lp_main_area' data-lp-point='main_area'><div class='lp_wait lpHide' data-lp-point='wait'></div><div class='lp_top_menu lpHide lpc_menu {{deviceClass}}' data-lp-cust-id='topMenu' data-lp-point='top_menu' tabindex='-1'><div class='lp_top_logo_bar lpc_menu__banner {{deviceClass}} {{logoClass}}' data-lp-point='bottom_logo'><span data-lp-type='icon' class='lp_top_menu-logo-icon'><svg width='81px' height='14px' viewBox='0 0 81 14' version='1.1' xmlns='http://www.w3.org/2000/svg' aria-hidden='true'><g id='designs---September19' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><g id='Window---Powered-by-Copy' transform='translate(-1063.000000, -510.000000)'><g id='Menu-Copy-12' transform='translate(1009.000000, 303.000000)'><g id='elements-LPAuto_logo' transform='translate(53.000000, 206.000000)'><g id='LP_Auto_1c_full'><rect id='Rectangle' x='0' y='0' width='156' height='15.9545455'></rect><path d='M4.12143237,4.95774537 L3.12718399,4.0968319 L4.17105293,3.08580117 L5.05870908,4.04980721 C5.23906053,3.91705445 5.42815565,3.79621339 5.62475069,3.68807886 L5.04768228,2.51969631 L6.40949018,1.97710379 L6.84872376,3.19612831 C7.06868091,3.13968058 7.29213981,3.09738946 7.51768203,3.06952339 L7.44233234,1.77272727 L8.91257027,1.77272727 L8.83905837,3.06409747 C9.06402303,3.09179001 9.28688212,3.13408381 9.50617883,3.19070239 L9.95092581,1.97167786 L11.3127337,2.51427038 L10.7356653,3.67722702 C10.9322604,3.78536154 11.1213555,3.90620257 11.3017069,4.03895537 L12.1893631,3.07494932 L13.2313942,4.08598005 L12.2371458,4.9468935 C12.3760024,5.11928248 12.5030893,5.3005444 12.6175699,5.48948602 L13.8176516,4.92880709 L14.3818554,6.24911556 L13.1229642,6.69223278 C13.1815105,6.90496115 13.2257138,7.1212633 13.2552856,7.33972652 L14.5876887,7.26738084 L14.5876887,8.6962078 L13.2552856,8.62386215 C13.2257138,8.84232535 13.1815105,9.05862753 13.1229642,9.27135589 L14.3818554,9.69819533 L13.8176516,11.0166951 L12.6157321,10.4542076 C12.5012515,10.6431492 12.3741646,10.8244111 12.235308,10.9968001 L13.2295564,11.8577136 L12.1893631,12.8777875 L11.3017069,11.9137815 C11.1213555,12.0465342 10.9322604,12.1673753 10.7356653,12.2755098 L11.3127337,13.4384664 L9.95092581,13.9810589 L9.50985442,12.7638431 C9.29055771,12.8204616 9.06769862,12.8627554 8.84273396,12.890448 L8.91624587,14.1818182 L7.44600793,14.1818182 L7.52135762,12.890448 C7.2958154,12.8625819 7.0723565,12.8202908 6.85239935,12.7638431 L6.41316577,13.9810589 L5.05135787,13.4384664 L5.63210187,12.2809357 C5.43550683,12.1728012 5.24641174,12.0519602 5.06606026,11.9192074 L4.17105293,12.8777875 L3.12718399,11.8667568 L4.12143237,11.0058433 C3.98316714,10.8334292 3.85669325,10.652166 3.74284612,10.4632508 L2.54276439,11.0166951 L1.97856058,9.69819533 L3.24296521,9.27135589 C3.18441891,9.05862753 3.14021555,8.84232535 3.11064378,8.62386215 L1.77272727,8.6962078 L1.77272727,7.26738084 L3.1032926,7.33972652 C3.13527963,7.12109832 3.18193921,6.90479409 3.24296521,6.69223278 L1.97856058,6.26539334 L2.54276439,4.94508487 L3.74284612,5.5057638 C3.85648514,5.31498845 3.98296283,5.13190702 4.12143237,4.95774537 Z M5.08076263,7.98179432 C5.06136389,9.22193848 5.80581407,10.350529 6.96472541,10.8378922 C8.12363671,11.3252553 9.4669421,11.0746397 10.3641971,10.2036652 C11.2614521,9.33269058 11.5345337,8.01426289 11.0552782,6.86715083 C10.5760228,5.72003877 9.43957219,4.97196706 8.17928909,4.97396748 C6.48029575,4.96399651 5.09391067,6.30977464 5.08076263,7.98179432 Z M75.9021243,4.76060341 L80.8255834,9.55892993 L80.8255834,5.00838733 L81.5331355,5.00838733 L81.5331355,11.1577692 L76.6041629,6.35763406 L76.6041629,10.8792384 L75.9021243,10.8792384 L75.9021243,4.76060341 Z M67.2975565,7.94562151 C67.2975565,9.27135589 68.4535312,10.376436 69.8851753,10.376436 C71.3168198,10.376436 72.4727941,9.27135589 72.4727941,7.94562151 C72.4727941,6.6198871 71.3333597,5.51480702 69.8851753,5.51480702 C68.4369909,5.51480702 67.2975565,6.61446119 67.2975565,7.94562151 Z M73.1785083,7.94562151 C73.1785083,9.63489286 71.686217,10.9750964 69.8870132,10.9750964 C68.0878097,10.9750964 66.5973558,9.63489286 66.5973558,7.94562151 C66.5973558,6.25635013 68.0859718,4.89986881 69.8870132,4.89986881 C71.6880548,4.89986881 73.1766705,6.27081925 73.1766705,7.9546647 L73.1785083,7.94562151 Z M63.6587176,6.14602298 C63.4069395,5.74088722 63.1073784,5.5057638 62.568904,5.5057638 C62.0304294,5.5057638 61.5231971,5.88015265 61.5231971,6.41008468 C61.5231971,6.91650436 62.0837252,7.14981913 62.5100943,7.3306833 L62.929112,7.50069563 C63.7506075,7.83710299 64.445295,8.22415234 64.445295,9.15379418 C64.445295,10.1811027 63.5576388,10.9624359 62.4604738,10.9624359 C61.5144498,11.0011371 60.6804113,10.3567652 60.4940307,9.44317685 L61.179529,9.26231267 C61.2651766,9.88472733 61.8057136,10.3486474 62.4439336,10.3474977 C63.1220808,10.3474977 63.7414186,9.86459038 63.7414186,9.20262749 C63.7414186,8.54066463 63.1643502,8.28383749 62.5780929,8.03424494 L62.1939933,7.87870177 C61.4588742,7.56761538 60.8193207,7.21673887 60.8193207,6.37572046 C60.8193207,5.47139962 61.6500051,4.87997375 62.5872818,4.87997375 C63.2582448,4.86555097 63.8838444,5.21221463 64.2192461,5.78429463 L63.6587176,6.14602298 Z M55.4897081,7.71954128 L55.708406,7.71954128 C56.5023345,7.71954128 57.3072898,7.57846722 57.3072898,6.66691178 C57.3072898,5.7010971 56.544604,5.60704773 55.6992172,5.60704773 L55.4897081,5.60704773 L55.4897081,7.71954128 Z M55.4897081,10.8738125 L54.7858317,10.8738125 L54.7858317,5.00838733 L55.7047304,5.00838733 C56.9029745,5.00838733 58.0148418,5.30500456 58.0148418,6.63616488 C58.0148418,7.54048576 57.4046932,8.17893628 56.4324984,8.26394243 L58.4430488,10.8973248 L57.5792838,10.8973248 L55.6642991,8.30373255 L55.4805192,8.30373255 L55.4897081,10.8738125 Z M48.7817476,5.00838733 L52.0548647,5.00838733 L52.0548647,5.61609095 L49.4819483,5.61609095 L49.4819483,7.36143021 L51.9758397,7.36143021 L51.9758397,7.96913385 L49.485624,7.96913385 L49.485624,10.2733434 L52.0585404,10.2733434 L52.0585404,10.881047 L48.7817476,10.881047 L48.7817476,5.00838733 Z M43.6984,7.70507215 L44.1670382,7.70507215 C44.9462643,7.70507215 45.6060337,7.48622651 45.6060337,6.6452081 C45.6060337,5.68662798 44.7771871,5.61609095 43.952016,5.61609095 L43.6928865,5.61609095 L43.6984,7.70507215 Z M43.6984,10.8828557 L42.9945236,10.8828557 L42.9945236,5.00838733 L44.0420681,5.00838733 C44.5934073,5.00838733 45.1447465,5.02466511 45.6078715,5.32128234 C46.0543084,5.62238068 46.3178712,6.12348959 46.3099101,6.65605994 C46.3154205,7.14640737 46.0935094,7.6124851 45.7071125,7.92210917 C45.2807434,8.2494733 44.7367556,8.31277577 44.2093076,8.31277577 L43.6984,8.31277577 L43.6984,10.8828557 Z M37.9093381,5.99952299 L37.9093381,7.29270184 L39.7912427,7.29270184 L39.7912427,8.29107208 L37.9093381,8.29107208 L37.9093381,9.88086816 L39.8629166,9.88086816 L39.8629166,10.8774297 L36.7276343,10.8774297 L36.7276343,5.01019596 L39.8629166,5.01019596 L39.8629166,6.00675755 L37.9093381,5.99952299 Z M31.8133641,8.4954486 L33.2578728,5.0029614 L34.5296287,5.0029614 L31.8372554,11.2029853 L29.1650979,5.01019596 L30.4423671,5.01019596 L31.8133641,8.4954486 Z M26.9799567,10.8774297 L25.7964152,10.8774297 L25.7964152,5.01019596 L26.9799567,5.01019596 L26.9799567,10.8774297 Z M21.8616909,9.88086816 L23.5340866,9.88086816 L23.5340866,10.8774297 L20.6799872,10.8774297 L20.6799872,5.01019596 L21.8616909,5.01019596 L21.8616909,9.88086816 Z' id='Shape' fill='#98999A' fill-rule='nonzero'></path></g></g></g></g></g></svg></span></div></div><div class='lp_location_center' data-lp-point='engagement_area' tabindex='-1'></div><div class='lp_location_bottom lpc_composer lpc_composer_maximized {{deviceClass}}' data-lp-point='bottom' data-lp-cust-id='input'></div></div>",thankYouTimeout:3e3,fadeOutTimeout:500,fadeInTimeout:150,disableFileDragAndDrop:!1,endedHash:"#RIP",tooltipType:{notification:"notification",success:"success",call:"call",process:"process"},LPViewMap:{bottomLogo:"^bottom_logo",mainArea:"^main_area",engagementArea:"^engagement_area",waitArea:"^wait",locationBottom:"^bottom",bottomArea:".lp_location_bottom",mainWindow:"^maximized",dragImageArea:"^drag_image_area",emojiBar:"^emoji_bar",linesArea:"^lines_area",actionsBar:"^actions_bar",emojiButton:"^emoji_button",actionButton:"^actions_button",fileAttachment:"^file_button",input:"^chat_input",headerArea:".lpc_maximized-header",sharedImage:".lp_image_sharing_link",transcriptArea:".lp_transcript_widget",titleArea:".lp_title",extendedTitleArea:".lp_extended_title",title:".lp_title-text",brandLogoImage:".lp_brand-logo-asset",subTitle:".lp_top-text",minimizeSliderButton:"^minimize-slider"},LPClassesMap:{actionsVisibility:"lp_actions_visible",noAnimation:"lp_no-animation",logo_top_margin:"lp_logo_top_margin",lpDropImageContainer:"lp_drop_image_wrapper",lpDropImage:"lp_drop_image"},initialize:function(a){this.transcriptState={isShownAfterChatEnd:!1};this.models=a.models;this.slider=a.slider;this.unifiedConf=this.appContext.conf.unifiedConf;this.windowConf=this.appContext.conf.windowConf;this.chatDOMAdded=!1;this.logoDOMAdded=!1;this.addLogo=this.appContext.conf.windowConf&&this.appContext.conf.windowConf.logoPinToTop;this.chatViewsDisposed=!1;this.isLogoEnabled=!this.unifiedConf.hide_lp_logo;this.dialogVC=null;this.accessibilityManager=this.appContext.accessibilityManager;this.disableFileDragAndDrop=!!this.unifiedConf.disableFileDragAndDrop;this.disableDragTimeout=null;this.dragItems=null;if(this.unifiedConf&&"useIconSetting"===this.unifiedConf.disableFileDragAndDrop){var b=this.windowConf&&this.windowConf.menuLocation,c=this.windowConf&&this.windowConf.sendImage,d=this.windowConf&&this.windowConf.attachmentIcon;this.disableFileDragAndDrop="bottom"===b?!c:!d}else!this.unifiedConf||"true"!==this.unifiedConf.disableFileDragAndDrop&&this.unifiedConf.disableFileDragAndDrop!==!0?this.disableFileDragAndDrop=!1:this.disableFileDragAndDrop=!0;this.windowConf&&this.windowConf.hasOwnProperty("disableFileDragAndDrop")&&(this.disableFileDragAndDrop=this.windowConf.disableFileDragAndDrop)},events:function(){this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG,context:this,func:n});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:q});this.appContext.events.bind({appName:"tooltip",eventName:"show",func:this.showTooltip,context:this});this.appContext.events.bind({appName:"tooltip",eventName:"close",func:this.closeTooltip,context:this});this.appContext.events.bind({appName:"tooltipButton",eventName:"show",func:this.showTooltipButton,context:this});this.appContext.events.bind({appName:"tooltipButton",eventName:"close",func:this.closeTooltipButton,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.application.PROCESSING,func:this.showWait,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.EventName.application.POST_CHAT_SURVEY,func:A,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.chat.MULTIPLE_CHANNELS_REQUESTED,func:t,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.FILE_VALIDATION,func:u,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.FAILED_START_CONVERSATION,func:v,context:this});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.uiState.ACTIONS_TOGGLE,func:j,context:this});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.uiState.FOCUS_CHANGE_EVENT,func:d,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.OVERLAY_CLOSED,func:f,context:this});this.bindModel({path:this.chatPath.SURVEYS_PRECHAT,callback:this.handlePreChatSurvey,context:this});this.bindModel({path:this.chatPath.SURVEYS_EXIT,callback:this.handleExitSurvey,context:this});this.bindModel({path:this.chatPath.SURVEYS_OFFLINE,callback:this.handleOfflineSurvey,context:this});this.bindModel({path:this.uiPath.STATE,callback:this.stateChanged,context:this});this.bindModel({path:this.uiPath.ACTIONS_VISIBLE,callback:j,context:this});this.bindModel({path:this.uiPath.TOP_MENU_VISIBLE,context:this,callback:k});this.bindModel({path:this.chatPath.SURVEYS_PRESMS,callback:this.handlePreSmsSurvey,context:this});if(lpTag.device.browser()){this.bindViewEvent({view:this.getFirstElement(this.LPViewMap.dragImageArea),DOMEvent:"drop",callback:B,context:this});this.bindViewEvent({view:this.getFirstElement(this.LPViewMap.dragImageArea),DOMEvent:"dragleave",callback:G,context:this});this.bindViewEvent({view:this.getFirstElement(this.LPViewMap.mainArea),DOMEvent:"dragover",callback:F,context:this});this.bindViewEvent({view:document.body,DOMEvent:"dragover",callback:C,context:this})}this.appContext.deviceDetector.isAndroid()&&this.bindViewEvent({view:window.visualViewport,DOMEvent:"resize",callback:R,context:this});this.bindViewEvent({view:this.getFirstElement(this.LPViewMap.sharedImage),DOMEvent:"click",callback:this.handleIOSClick,context:this});this.bindViewEvent({inView:document.body,selector:this.LPViewMap.mainWindow,callback:this.onKeyDown,DOMEvent:"keydown",context:this});this.appContext.events.bind({appName:"*",eventName:"adjust_styles",context:this,func:I});this.appContext.events.bind({appName:"*",eventName:"remove_styles",context:this,func:J});this.appContext.events.bind({appName:"*",eventName:"keyboard_visible",context:this,func:K});this.appContext.events.bind({appName:"*",eventName:"reset_window",context:this,func:Q});Y=P.bind(this)},render:function(){if(!this.rendered){this.rendered=!0;this.mainWindow=this.getFirstElement(this.LPViewMap.mainWindow,document.body);this.mainWindow=this.mainWindow.length?this.mainWindow[0]:this.mainWindow;this.engagementArea=this.getFirstElement(this.LPViewMap.engagementArea);this.bottomArea=this.getFirstElement(this.LPViewMap.locationBottom);this.waitArea=this.getFirstElement(this.LPViewMap.waitArea);this.headerArea=this.getFirstElement(this.LPViewMap.headerArea,document.body);this.titleArea=this.getFirstElement(this.LPViewMap.titleArea,this.headerArea);this.extendedTitleArea=this.getFirstElement(this.LPViewMap.extendedTitleArea,this.headerArea);this.brandLogoImage=this.getFirstElement(this.LPViewMap.brandLogoImage,this.headerArea);this.title=this.getFirstElement(this.LPViewMap.title,this.headerArea);this.subTitle=this.getFirstElement(this.LPViewMap.subTitle,this.extendedTitleArea);this.topMenuIcon=this.getFirstElement("^menu-top-btn",this.mainWindow);this.topMenuIcon.setAttribute("aria-label",this.translate("tooltip_ExpandActionMenu"));this.sharedImage=this.getFirstElement(this.LPViewMap.sharedImage);this.createView({template:"<div class='lp_skeleton-window-body'><div class='lp_skeleton-header'><div class='lp_skeleton-box'></div></div><div class='lp_skeleton-message lp_skeleton-agent'><div class='lp_skeleton-box'></div></div><div class='lp_skeleton-message lp_skeleton-visitor'><div class='lp_skeleton-box'></div></div><div class='lp_skeleton-input'><div class='lp_skeleton-box'></div></div></div>",target:this.waitArea,wrapWithDiv:!1});b.call(this);c.call(this);this.addClass(this.bottomArea,this.LPClassesMap.noAnimation,500);this.addClass(this.engagementArea,this.LPClassesMap.noAnimation,500);lpTag.unifiedWindow.Translator&&this.appContext.events.trigger({appName:"*",eventName:"translatorReady",data:{}})}}});U=lpTag.unifiedWindow.MaximizedViewController.prototype;U.showWait=function(a){a="undefined"==typeof a?!0:a;var b={view:this.waitArea,useClasses:!0};if(a){this.closeSurvey();r.call(this);this.appContext.wrapperWindow.setTitle(this.translate("connecting"));this.show(b)}else this.hide(b)};U.disposeChatViews=function(){if(!this.chatViewsDisposed){Q.call(this);this.appContext&&this.appContext.conf.widgetSDK?this.slider.getSelectedViewType()!==lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView&&this.slider.hideSlider():this.slider&&this.slider.dispose();this.secureFormManagerVC&&this.secureFormManagerVC.dispose();this.cobrowseInvitationVC&&this.cobrowseInvitationVC.dispose();this.richContentWidgetManagerVC&&this.richContentWidgetManagerVC.dispose();this.datePickerVC&&this.datePickerVC.dispose();this.scheduleListVC&&this.scheduleListVC.dispose();this.flutterVC&&this.flutterVC.dispose();this.chatViewsDisposed=!0}};U.addChatViews=function(){this.secureFormManagerVC=this.secureFormManagerVC||new lpTag.unifiedWindow.SecureFormsManagerViewController({models:this.models,appContext:this.appContext,sliderAPI:this.slider});this.cobrowseInvitationVC=this.cobrowseInvitationVC||new lpTag.unifiedWindow.CoBrowseInvitationManagerViewController({models:this.models,appContext:this.appContext,sliderAPI:this.slider});this.richContentWidgetManagerVC=this.richContentWidgetManagerVC||new lpTag.unifiedWindow.RichContentWidgetManagerViewController({appContext:this.appContext,sliderAPI:this.slider});this.mavenPayWidgetManagerVC=this.mavenPayWidgetManagerVC||new lpTag.unifiedWindow.MavenPayWidgetManagerViewController({appContext:this.appContext,sliderAPI:this.slider});this.flutterVC=this.flutterVC||new lpTag.unifiedWindow.FlutterViewController({models:this.models,appContext:this.appContext,target:this.getFirstElement(this.LPViewMap.mainArea),textInjection:this.appContext.conf.unifiedConf});this.datePickerVC=this.datePickerVC||new lpTag.unifiedWindow.DatePickerViewController({models:this.models,appContext:this.appContext});this.scheduleListVC=this.scheduleListVC||new lpTag.unifiedWindow.ScheduleListViewController({models:this.models,appContext:this.appContext})};U.handlePreChatSurvey=function(a){m.call(this,a,lpTag.unifiedWindow.SurveyType.PRE_CHAT)};U.handleExitSurvey=function(a){m.call(this,a,lpTag.unifiedWindow.SurveyType.EXIT_CHAT)};U.handleOfflineSurvey=function(a){m.call(this,a,lpTag.unifiedWindow.SurveyType.OFFLINE)};U.handlePreSmsSurvey=function(a){m.call(this,a,lpTag.unifiedWindow.SurveyType.PRE_SMS)};U.showTranscriptArea=function(){this.show(this.engagementArea);this.appContext&&this.appContext.conf&&this.appContext.conf.unifiedConf&&!this.appContext.conf.unifiedConf.connectorsSfConfig&&this.show(this.LPViewMap.locationBottom);this.chatVC&&(this.chatVC.transcriptWasShown=!0)};U.hideTranscriptArea=function(){this.hide(this.engagementArea);this.hide(this.LPViewMap.locationBottom)};U.addLogoViewController=function(){this.logoVC=new lpTag.unifiedWindow.LogoViewController({appContext:this.appContext,parent:this});X.addClass(this.getFirstElement(this.LPViewMap.mainArea),this.LPClassesMap.logo_top_margin);this.addViewController({viewController:this.logoVC,target:this.LPViewMap.mainArea});this.logoDOMAdded=!0};U.stateChanged=function(a){var b=a.newValue;switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.NOT_FOUND:var c=this.survey&&this.survey.surveyType===lpTag.unifiedWindow.SurveyType.PRE_SMS;this.chatVC&&this.chatVC.closeActions();this.closeSurvey();this.showThankYouPage(c);break;case lpTag.unifiedWindow.State.REQUESTED:this.closeSurvey();break;case lpTag.unifiedWindow.State.WAITING:this.showWait(!1);r.call(this);this.closeSurvey();l.call(this);this.showTranscriptArea();this.addChatViews();break;case lpTag.unifiedWindow.State.CHATTING:this.showWait(!1);r.call(this);this.closeSurvey();this.addChatViews();l.call(this);this.showTranscriptArea();this.transcriptState.isShownAfterChatEnd=!0;break;case lpTag.unifiedWindow.State.POST_CHAT:this.showWait(!1);l.call(this);this.showTranscriptArea();this.transcriptState.isShownAfterChatEnd=!0;break;case lpTag.unifiedWindow.State.ENDED:this.chatVC&&this.chatVC.agentIsTyping(!1);this.disposeChatViews();break;case lpTag.unifiedWindow.State.AUTH_ERROR:this.enableCloseBtnOnAuthError();this.dispose();break;case lpTag.unifiedWindow.State.CONNECTION_ISSUE:s.call(this);break;case lpTag.unifiedWindow.State.RESTART_AUTHENTICATION:z.call(this)}b!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&y.call(this)};U.enableCloseBtnOnAuthError=function(){var a=this.getFirstElement("^close",this.headerArea),b=this.getFirstElement("^menu-top-btn",this.headerArea);a&&(a.style.display="inline-block");b&&(b.style.display="none")};U.closeSurvey=function(){if(this.survey){this.removeViewController(this.survey);this.survey=null}};U.showThankYouPage=function(a){var b=h(this),c={imagesRepository:this.appContext.conf.unifiedConf.imagesRepository};if(a){var d=this.models.uiModel.get(lpTag.unifiedWindow.uiModelPath.PRE_SMS_CONTEXT);c.message=this.injectTextDefaults(this.appContext.translator.translate("thankYouMessagePreSms",!0),{phoneNumber:d&&d.From})}else c.message=this.appContext.translator.translate("thankYouMessage");this.thankYouView||X.getPropertyFromObject(this.appContext,"conf.engConf.async")&&!X.getPropertyFromObject(this.appContext,"conf.engConf.externalTargets.0")?this.transcriptState.isShownAfterChatEnd&&this.showTranscriptArea():g.call(this,c,b,this)};U.closeThankYouPage=function(){var a=this;this.closeThankYouTimeout&&clearTimeout(this.closeThankYouTimeout);!this.unifiedConf.poppedOut&&!this.unifiedConf.external||X.getPropertyFromObject(this.appContext,"conf.engConf.async")||(window.location.hash=this.endedHash);if(this.transcriptState.isShownAfterChatEnd)this.animate(this.thankYouView,{duration:this.fadeOutTimeout,opacity:"0"},function(){a.hide(a.thankYouView);a.removeView(a.thankYouView);a.thankYouView=null;if(a.appContext.unAuthUserTriesAuth){a.appContext.unAuthUserTriesAuth=!1;a.appContext.events.trigger({appName:"Application",eventName:a.EventName.application.ENDED})}else a.showTranscriptArea()});else if(!this.unifiedConf.poppedOut&&!this.unifiedConf.external){a.hide(a.thankYouView);a.removeView(a.thankYouView);a.thankYouView=null;a.appContext.events.trigger({appName:"Application",eventName:a.EventName.application.ENDED})}};U.showTooltip=function(a){function b(b){var d={duration:c.fadeInTimeout};d.opacity=a.type===c.tooltipType.success?"1":"0.92";c.animate(b,d,null);isNaN(a.tooltipTimeout)||(c.closeTooltip=setTimeout(function(){w.call(c)},a.tooltipTimeout))}var c=this;c.getTooltip(a.text,a.type,b)};U.showTooltipButton=function(a){function b(b){var d={duration:c.fadeInTimeout};d.opacity=a.type===c.tooltipType.success?"1":"0.92";c.animate(b,d,null);isNaN(a.tooltipTimeout)||(c.closeTooltip=setTimeout(function(){x.call(c)},a.tooltipTimeout))}var c=this;c.getTooltipButton(a.text,a.type,b,a.maximizeSliderBtnTitle)};U.closeTooltip=function(){w.call(this)};U.closeTooltipButton=function(){x.call(this)};U.getTooltip=function(a,b,c){var d=this;this.tooltip&&this.tooltip.parentNode.removeChild(this.tooltip);this.createView({template:"<div class='lp_tooltip lp_tooltip_{{type}}'><div class='lp_title' role='log' aria-live='assertive' aria-relevant='all' aria-atomic='false'>{{text}}</div></div>",
target:this.LPViewMap.mainArea,beforeView:this.LPViewMap.engagementArea,wrapWithDiv:!1,textInjection:{text:a,type:b||this.tooltipType.notification},callback:function(a){d.tooltip=a;c&&"function"==typeof c&&c(d.tooltip)}});return this.tooltip};U.getTooltipButton=function(a,b,c,d){var e=this;this.tooltipButton&&this.tooltipButton.parentNode.removeChild(this.tooltipButton);this.createView({template:"<div class='lp_tooltip lp_tooltip_{{type}}'><button class='lp_maximize' data-lp-point='maximize-slider' title='{{tooltip_maximize_slider}}' tabindex='0'><span class='lp_minimize-right-slider-icon lp_icon-white' data-lp-point='minimize-icon' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_maximize_slider}}' aria-hidden='true' data-lp-point='maximize-img'> </span><span class='lp_title' role='log' aria-live='assertive' aria-relevant='all' aria-atomic='false'>{{text}}</span></button></div>",target:this.LPViewMap.mainArea,beforeView:this.LPViewMap.engagementArea,wrapWithDiv:!1,textInjection:{text:a,type:b||this.tooltipType.notification,tooltip_maximize_slider:d||this.translate("tooltip_maximize_slider"),iconsRepository:this.unifiedConf.iconsRepository},callback:function(a){this.bindViewEvent({selector:".lp_tooltip",DOMEvent:"click",context:this,callback:function(){if(b===this.tooltipType.call){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.coBrowseEvents.MAXIMIZE});this.closeTooltipButton()}}});e.tooltipButton=a;c&&"function"==typeof c&&c(e.tooltipButton)}});return this.tooltipButton};U.onChatVCResize=function(a){this.bottomArea.style.height=a.bottomAreaSize+"px";this.engagementArea.style.height="calc(100% - "+(a.bottomAreaSize+a.actionsAreaSize+15)+"px)"};U.handleIOSClick=function(a){var b=a.target,c=b.parentNode,d=c.parentNode,e=d.getAttribute("data-lp-point");V=e};U.setTabindexToEdgeLine=function(a,b){for(var c,d=this.getFirstElement(this.LPViewMap.linesArea),e=d.children,f=0;f<e.length;f++)e[f].removeAttribute("tabindex");if(e.length>0){"first"===a&&(c=0);"last"===a&&(c=e.length-1);e[c].setAttribute("tabindex",0);b&&e[c].focus()}};U.onKeyDown=function(b){this.accessibilityManager.getKeyboardOnlyFocus()&&!this.accessibilityManager.getKeyboardNavigationDetected()&&this.accessibilityManager.checkForKeyboardNavigation(b);var c="which"in b?b.which:b.keyCode;if(this.appContext.deviceDetector.isIOS()&&9===c){b.preventDefault();a(b)}if(13===b.keyCode||32===b.keyCode){if(document.activeElement.classList.contains("lp_image_sharing_link")){var d=b.target,e=d.getAttribute("data-lp-point");V=e}if(document.activeElement.classList.contains("lpc_maximized-header__close-button")){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.viewController.INITIATE_END_CHAT,data:!0});this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!1)}document.activeElement.classList.contains("lpc_maximized-header__minimize-button")&&this.appContext.uiStateManager.setWindowState(!1)}var f=this.getFocusableHeaderButton(this.getFirstElement(this.LPViewMap.mainWindow,document.body)),g=this.getFirstElement(this.chatVC.sendIconTypeToUse),h=g.disabled,i=this.getFirstElement(this.LPViewMap.emojiButton),j=this.getFirstElement(this.LPViewMap.input),k="none"==i.style.display,l=this.chatVC.getModelParam(this.uiPath.EMOJI_VISIBLE),m=this.getFirstElement(this.LPViewMap.emojiBar).querySelector("ul:first-child li:first-child button:first-child"),n=this.getFirstElement(this.LPViewMap.emojiBar).querySelector("ul:last-child li:last-child button:last-child"),o=document.getElementsByClassName("lpc_maximized-header__minimize-button")[0],p=this.getFirstElement("^top_menu").querySelectorAll(".lp_action_items_wrapper_top:last-child button:not([disabled])"),q=p[p.length-1],r=this.topMenuIcon.getAttribute("aria-expanded");if(b.target===o&&b.shiftKey&&9===c&&"true"===r){b.preventDefault();q.focus()}if(b.shiftKey&&9===c&&b.target===f&&!this.appContext.deviceDetector.isIOS()){var s;if(k&&h){b.preventDefault();s=j}if(!k&&h){b.preventDefault();s=i}if(!h){b.preventDefault();s=g}if(h&&l){b.preventDefault();s=n}s.focus()}var t=this.getFirstElement(this.LPViewMap.actionButton),u=this.getFirstElement(this.LPViewMap.fileAttachment),v=this.windowConf&&this.windowConf.attachmentIcon;if(l){if(!b.shiftKey&&9===c&&(document.activeElement===t||document.activeElement===u)){b.preventDefault();j.focus()}if(!b.shiftKey&&9===c&&document.activeElement===i){b.preventDefault();m.focus()}if(b.shiftKey&&9===c&&document.activeElement===j){b.preventDefault();"none"!==t.style.display?t.focus():v?u.focus():this.setTabindexToEdgeLine("last",!0)}if(b.shiftKey&&9===c&&document.activeElement===g){b.preventDefault();n.focus()}}if(b.shiftKey&&9===c&&document.activeElement===this.mainWindow){if(this.slider&&this.slider.isSliderOpen){var w=T(this.slider.view);w&&w.focus()}else if(this.dialogVC){var x=T(this.dialogVC.view);x&&x.focus()}else if(this.chatVC.isActionBarVisible()&&h)if(l)this.getFirstElement(this.LPViewMap.emojiBar).querySelector("tr:last-child td:last-child button:last-child").focus();else{var y=this.getFirstElement(this.LPViewMap.actionsBar).querySelectorAll("button:not(:disabled)");y[y.length-1].focus()}else h?this.chatVC&&this.chatVC.emojiIconStyle.value?this.focusOnElement(this.LPViewMap.emojiButton):this.focusOnElement(this.LPViewMap.input):this.focusOnElement(this.chatVC.sendIconTypeToUse);b.preventDefault()}else if(this.slider&&this.slider.isSliderOpen){var z=this.appContext&&this.appContext.coBrowseManager&&this.appContext.coBrowseManager.isInActiveCall(),A=this.getFirstElement(this.LPViewMap.minimizeSliderButton,document.body);if(9===c&&!b.shiftKey){(document.activeElement===n&&l&&h||!h&&b.target===g||!l&&b.target===i)&&A.focus();var B=T(this.slider.view);if(document.activeElement===B){b.preventDefault();this.mainWindow.focus()}}9===c&&b.shiftKey&&b.target===f&&(!z&&T(this.slider.view)?T(this.slider.view).focus():A.focus())}};var Y=null}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=a.newValue;if(Array.isArray(this.enableState)&&this.enableState.indexOf(b)>=0||this.enableState===b)this.enable();else if(Array.isArray(this.disableState)&&this.disableState.indexOf(b)>=0||this.disableState===b)this.disable();else if(this.enableState||this.disableState||this.disableOnEnd||!this.enableOnStart)switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.NOT_FOUND:case lpTag.unifiedWindow.State.ERROR:case lpTag.unifiedWindow.State.POST_CHAT:this.disableOnEnd&&this.disable();break;case lpTag.unifiedWindow.State.WAITING:case lpTag.unifiedWindow.State.CHATTING:this.enableOnStart&&this.enable()}else this.enable()}function b(a){var b=a.context,c={context:b,data:{}};b.clicked&&!1===b.clicked.call(b,c)||b.appContext.events.trigger({appName:b.ControllerName,eventName:b.VCEvents.CLICKED,data:c})}function c(a,b){a.innerText?a.innerText=b:a.innerHTML=b}function d(a,b){if(a){a.alt=b;a.setAttribute("aria-hidden","true")}}function e(b){var c=this.getModelParam(this.uiPath.STATE);b.visible?a.call(this,{newValue:c}):this.shouldDisableOnActionsHidden&&!this.featureStateManager.isMenuTop()&&this.disable();this.view.setAttribute("aria-hidden",(!b.visible).toString())}function f(a){this.view.setAttribute("aria-hidden",(!a.newValue).toString())}var g;lpTag.unifiedWindow.ActionViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ActionViewController",template:"<li class='lp_action_item lpc_menu__item {{deviceClass}}'><button class='lp_action_item_btn' disabled='disabled' tabindex='0'><span class='lp_action_wrapper'><span data-lp-point='icon' class='lp_{{className}}' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png' alt=''> </span><span class='lp_title' data-lp-point='title' data-lp-cust-id='actionsMenu_actionItem_text'>{{title}}</span></span></button></li>",iconClass:"",shouldDisableOnActionsHidden:!0,LPViewMap:{title:"^title",icon:"^icon"},spriteName:"sprites_v1.png",initialize:function(a){this.textInjection=a.textInjection;this.models=a.models;this.isEnabled=!0;this.icon=this.getFirstElement(this.LPViewMap.icon);this.wrapper=this.getFirstElement(this.LPViewMap.wrapper);this.featureStateManager=a.appContext.featureStateManager;this.parser=new DOMParser},events:function(){this.bindModel({path:this.uiPath.STATE,callback:a,context:this});this.bindViewEvent({view:this.view,DOMEvent:"click",callback:b});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.ACTIONS_TOGGLE,context:this,func:e});this.bindModel({path:this.uiPath.TOP_MENU_VISIBLE,context:this,callback:f})},render:function(){this.setTitle();this.addIconImage();this.setIconClass();"undefined"!=typeof this.isEnabled&&this.setActionState(this.isEnabled)}});g=lpTag.unifiedWindow.ActionViewController.prototype;g.addIconImage=function(){if(this.featureStateManager.isMenuTop()){var a=this.getFirstElement("img",this);this.icon.removeChild(a);if(this.svgFile){var b=this.getFirstElement(this.LPViewMap.icon),c=document.createElement("img");c.setAttribute("src",this.textInjection.iconsRepository+"/"+this.spriteName);this.loadResource(this.svgFile,function(a){var d=this.parser.parseFromString(a,"image/svg+xml").lastChild;if(d&&d instanceof SVGElement){d.appendChild(c);b.appendChild(d)}else b.appendChild(c)},function(){b.appendChild(c)})}else this.svgFiles&&this.loadSvgMap()}};g.loadSvgMap=function(){var a=[],b=[];for(var c in this.svgFiles)if(!(this.svgFiles[c]instanceof SVGElement)){b.push(c);a.push(this.svgFiles[c])}a.length&&this.loadMultiResource(a,function(a){for(var c=0;c<a.length;c++)this.svgFiles[b[c]]=this.parser.parseFromString(a[c],"image/svg+xml").lastChild})};g.setIconClass=function(){this.iconClass&&this.icon&&this.addClass(this.icon,this.iconClass)};g.setTitle=function(a){var b=a||this.translate(this.title);this.featureStateManager.isMenuTop()&&(b=this.replaceCharacter(b,"\n"," "));var e=this.getFirstElement(this.LPViewMap.title);e?c(e,b):this.view.title=b;var f=this.view.firstElementChild;f.setAttribute("aria-label",b);d(this.icon,b)};g.enableAction=function(){var a=this.view.firstElementChild;a.removeAttribute("disabled")};g.disableAction=function(){var a=this.view.firstElementChild;a.setAttribute("disabled","disabled")};g.setActionState=function(a){a?this.enableAction():this.disableAction()};g.setIconURL=function(a){if(this.icon){a.indexOf("/")<0&&(a=this.appContext.conf.unifiedConf.iconsRepository+"/"+a);this.icon.width=this.iconWidth;this.icon.height=this.iconHeight;this.icon.src=a;this.icon.children&&this.icon.children.length>0&&this.icon.children[0]&&(this.icon.children[0].src=a)}};g.disable=function(){if(this.isEnabled){this.isEnabled=!1;this.setActionState(this.isEnabled,this.iconDisabled)}};g.enable=function(){if(!this.isEnabled){this.isEnabled=!0;this.setActionState(this.isEnabled,this.iconEnabled)}};g.focusOnView=function(a){a.origin===this.appConsts.dialog.actions.CANCEL&&a.dialogOpenedFrom!==this.appConsts.views.TOP_MENU&&setTimeout(function(a){a.children&&a.children.length&&"button"===a.children[0].tagName.toLowerCase()?a.children[0].focus():a.focus()},0,this.view)};g.toggleSvg=function(a){var b=this.getFirstElement("svg",this.icon);b&&this.icon.removeChild(b);a?this.icon.appendChild(this.svgFiles.disabled):this.icon.appendChild(this.svgFiles.enabled)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.MuteSoundAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"MuteSoundAction",applicationType:"MuteSoundAction",titles:{mute:"MuteSoundAction"},title:"MuteSoundAction",isEnabled:!0,disableOnEnd:!0,enableState:[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CHATTING],iconClasses:{mute:"lp_mute-action-icon",unmute:"lp_unmute-action-icon"},svgFiles:{disabled:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#98999A' d='M11.845 3.402c.42.43.655 1.006.655 1.606v9.984a2.296 2.296 0 0 1-3.902 1.64L6.13 14.215a1.5 1.5 0 0 0-1.05-.428H3.949A2.448 2.448 0 0 1 1.5 11.339V8.661a2.448 2.448 0 0 1 2.448-2.448H5.08a1.5 1.5 0 0 0 1.049-.428l2.47-2.417a2.296 2.296 0 0 1 3.246.034zm-2.547.68L6.828 6.5a2.5 2.5 0 0 1-1.748.713H3.948c-.8 0-1.448.648-1.448 1.448v2.678c0 .8.648 1.448 1.448 1.448H5.08a2.5 2.5 0 0 1 1.749.713l2.469 2.418a1.296 1.296 0 0 0 2.202-.926V5.008a1.296 1.296 0 0 0-2.202-.926zm8.991 3.134l.707.707-1.789 1.789 1.92 1.92-.708.707-1.919-1.92-1.92 1.92-.707-.707 1.919-1.92-1.788-1.789.707-.707L16.5 9.005l1.79-1.789z'/></g></svg>",enabled:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#98999A' d='M11.823 3.161c.433.43.677 1.014.677 1.623v10.432a2.284 2.284 0 0 1-3.907 1.607l-2.466-2.489a1.5 1.5 0 0 0-1.065-.444H3.948A2.448 2.448 0 0 1 1.5 11.442V8.558A2.448 2.448 0 0 1 3.948 6.11h1.114c.4 0 .784-.16 1.065-.444l2.466-2.49a2.284 2.284 0 0 1 3.23-.015zm-2.52.72L6.838 6.37a2.5 2.5 0 0 1-1.776.74H3.948c-.8 0-1.448.648-1.448 1.448v2.884c0 .8.648 1.448 1.448 1.448h1.114a2.5 2.5 0 0 1 1.776.74l2.465 2.49a1.284 1.284 0 0 0 2.197-.904V4.784a1.284 1.284 0 0 0-2.197-.904zm8.91 1.445l.23.443c1.466 2.816 1.548 5.557.147 8.197l-.156.282-.248.434-.868-.496.248-.434c1.336-2.335 1.357-4.72.132-7.24l-.142-.281-.23-.444.887-.461zm-3.097.977l.29.406c1.61 2.253 1.646 4.488-.013 6.6l-.309.393-.786-.618.309-.393c1.374-1.75 1.346-3.497-.014-5.4l-.29-.407.813-.581z'/></g></svg>"},initialize:function(a){this.featureStateManager=a.appContext.featureStateManager;var b=this.getModelParam(this.uiPath.WINDOW_SOUND);this.setIconClass(b);this.setButtonAttributes();this.setTitle(this.title.mute);this.overrideTitleWithAriaAttributes()},events:function(){this.bindModel({path:this.uiPath.WINDOW_SOUND,callback:this.soundStateChanged})}});a=lpTag.unifiedWindow.actions.MuteSoundAction.prototype;a.setIconClass=function(a){this.removeClass(this.icon,a?this.iconClasses.unmute:this.iconClasses.mute);this.addClass(this.icon,a?this.iconClasses.mute:this.iconClasses.unmute)};a.clicked=function(){this.isEnabled&&this.appContext.uiStateManager.setSoundState(!this.soundMuted)};a.soundStateChanged=function(a){if(a&&a.newValue!==this.soundMuted){this.soundMuted=a.newValue;this.featureStateManager.isMenuTop()?this.toggleSvg(this.soundMuted):this.setIconClass(this.soundMuted);this.overrideTitleWithAriaAttributes();this.setActionState(this.isEnabled,this.isEnabled?this.iconEnabled:this.iconDisabled);this.setAriaCheckedState()}};a.setButtonAttributes=function(){if(this.view&&this.view.firstElementChild&&"button"===this.view.firstElementChild.tagName.toLowerCase()){this.view.firstElementChild.setAttribute("aria-live","polite");this.view.firstElementChild.setAttribute("aria-relevant","text");this.view.firstElementChild.setAttribute("role","switch");this.setAriaCheckedState()}};a.setAriaCheckedState=function(){this.view&&this.view.firstElementChild&&this.view.firstElementChild.setAttribute("aria-checked",String(!this.soundMuted))};a.overrideTitleWithAriaAttributes=function(){var a=this.featureStateManager.isMenuTop()?"LP_MuteSoundAction_2":"LP_MuteSoundAction_1",b=document.querySelector("#"+a+" > button span.lp_title"),c=this.soundMuted?this.translate("on"):this.translate("off");b&&(b.innerHTML=this.translate(this.titles.mute)+": <span aria-hidden=true'>"+c+"</span>")}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){function a(a){var d,e,f="",h="";if(a){this.isAsync&&(a=k.sortByKeyValue(a,"time"));for(var i=0;i<a.length;++i){d=c.call(this,a[i]);d&&(f+=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(d.innerHTML).cleanText)}e=window.open("","_blank","scrollbars=yes, resizable=yes, left=0, top=0, width=600, height=600");h=b();e.document.head.innerHTML=h;e.document.body.innerHTML=f;g.call(this,e.document.body,this.isLanguageRTL());e.print();e.opener=null}}function b(){return"<head><style>"+j+"</style></head>"}function c(a){var b,c,g,h=d.call(this,a)?this.templateRepository.systemLine:this.templateRepository.line;if(a.time){b=lpTag.lpUtils.getTime(a.time,this.getMonthNames(),this.translate("dayMonthGap"),this.translate("daySuffix"));this.translator.extendDictionary({time:b},{locale:this.appContext.conf.engConf.lang})}c=e.call(this,a);c&&c.trim()&&(g=this.createView({template:h,wrapWithDiv:!0,doNotAddChild:!0,textInjection:{source:f.call(this,a),text:c,time:b||""}}));return g}function d(a){return"system"===a.source&&this.appContext.conf.engConf.async===!0}function e(a){var b;if(a.textKey){a.dictionaryKey&&this.translator.extendDictionary(a.dictionaryKey,{locale:this.appContext.conf.engConf.lang});b=this.translate(a.textKey)}else if(!b&&a.json||a.type===lpTag.unifiedWindow.consts.chatEvents.RICH_CONTENT)b=this.translate(this.richContentSentKey);else if(!b&&a.fileData||a.type===lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING)b=this.templateString(l,{type:a.fileData.fileType,text:this.translate(this.imageSentKey),caption:a.fileData.caption||""});else{var c,d;a.text=a&&a.text?a.text:"";if(this.appContext.conf.engConf.async&&a&&a.text&&a&&"visitor"!==a.source&&a&&a.type&&"line"===a.type&&this.hyperlinksHelper.textContainsMarkDownSyntax(a.text)){a.text="string"==typeof a.text?a.text.replace(/&nbsp;/g," "):a.text;var e=this.hyperlinksHelper.convertMarkdownToTempId(a.text),f=this.hyperlinksHelper.convertAHREFToTempId(e);d=!1;var g=this.sanitizeText(f,{noFormatLink:d}).text,i=this.hyperlinksHelper.convertTempIdToMarkdown(g),j=this.hyperlinksHelper.convertTempIdToAHREF(i),k=this.hyperlinksHelper.parseAllMarkdownFormat(j);c=this.reTargetElementsByType(["A","FORM"],k);b=c;this.hyperlinksHelper.setMarkDownToTemp([]);this.hyperlinksHelper.setAHREFToTemp([])}else{a.text="string"==typeof a.text?a.text.replace(/&nbsp;/g," "):a.text;var m=this.hyperlinksHelper.textContainsAHREFSyntax(a.text);this.appContext.conf.engConf.async&&a.text&&m&&"visitor"!==a.source&&a&&a.type&&"line"===a.type&&(a.text=this.hyperlinksHelper.convertAHREFToTempId(a.text));d=!1;a.text=this.sanitizeText(a.text,{noFormatLink:d}).text;if(this.appContext.conf.engConf.async&&a.text&&m&&"visitor"!==a.source&&a&&a.type&&"line"===a.type){var n=this.hyperlinksHelper.convertTempIdToAHREF(a.text),o=this.reTargetElementsByType(["A","FORM"],n);a.text=o;this.hyperlinksHelper.setAHREFToTemp([])}b=a.text}}b=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(b).cleanText;b=this.replaceDuplicatedEncodings(b);"visitor"===a.source&&(b=b.replace(/</g,"&lt;").replace(/>/g,"&gt;"));b="string"==typeof b?h.call(this,b):b;return b}function f(a){var b="";switch(a.source){case"agent":b="info"===a.by?this.translate("info"):lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.by).cleanText;break;case"visitor":b=this.getModelParam(this.chatPath.VISITOR_NAME);break;case"system":b=this.translate("info")}return b}function g(a,b){if(b){a.style.direction="rtl";a.style.textAlign="right"}else{a.style.direction="ltr";a.style.textAlign="left"}}function h(a){var b=document.createElement("div");b.innerHTML=a;this.removeUnsupportedTagsAndAttributes(b,!1,!1);return b.innerHTML}var i,j=".lp_print_line_text DIV {display: inline;} .lpHide {display: none}",k=lpTag.unifiedWindow.applicationUtils,l="[{{type}}] {{text}} {{caption}}";lpTag.unifiedWindow.actions.PrintTranscriptAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"PrintTranscriptAction",applicationType:"PrintTranscriptAction",iconClass:"lp_print-transcript-action-icon",title:"PrintTranscriptAction",richContentSentKey:"richContentSent",imageSentKey:"imageContentSent",templateRepository:{line:"<div class='lp_print_line' role='list'><div class='lp_print__line_time' role='listitem'>{{time}}</div><div class='lp_print_line_text' role='listitem'><span>{{source}}: {{text}}</span></div><div class='lp_print__line_time lp_time_bottom lpHide' role='listitem'>{{time}}</div></div>",systemLine:"<div class='lp_print_line' role='list'><div class='lp_print_line_text' role='listitem'><span>{{source}}: {{text}}</span></div></div>"},svgFile:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#98999A' d='M14.545 2.227a1.41 1.41 0 0 1 1.403 1.274l.007.135v2.227h.409c1.227 0 2.23.954 2.312 2.16l.006.159v4.545a2.318 2.318 0 0 1-2.16 2.313l-.158.005h-.41v2.228c0 .778-.63 1.409-1.409 1.409h-9.09a1.41 1.41 0 0 1-1.41-1.41v-2.227h-.409a2.318 2.318 0 0 1-2.312-2.159l-.006-.159V8.182c0-1.227.953-2.231 2.16-2.313l.158-.005h.41V3.635a1.41 1.41 0 0 1 1.273-1.402l.136-.007h9.09zm.41 10.091h-9.91v4.955c0 .226.184.409.41.409h9.09a.41.41 0 0 0 .41-.41v-4.954zm-2.637 3.091v1H7.682v-1h4.636zm0-1.818v1H7.682v-1h4.636zm4.046-2.273v1h-.41v1.727h.41c.682 0 1.244-.518 1.311-1.183l.007-.135V8.182c0-.683-.519-1.244-1.184-1.312l-.134-.006H3.636c-.682 0-1.244.518-1.311 1.183l-.007.135v4.545c0 .683.519 1.244 1.184 1.312l.134.006h.41v-1.728l-.41.001v-1h12.728zm-.91-2.727v1h-.909v-1h.91zm-1.818 0v1h-.909v-1h.91zm.91-5.364H5.454a.41.41 0 0 0-.401.327l-.009.082v2.228h9.91V3.636a.41.41 0 0 0-.41-.409z'/></g></svg>",enableOnStart:!0,initialize:function(){this.isAsync=this.appContext.conf.engConf.async;this.hyperlinksHelper=this.appContext.hyperlinksHelper}});i=lpTag.unifiedWindow.actions.PrintTranscriptAction.prototype;i.clicked=function(){var a=this.getModelParam(this.chatPath.LINES);this.printLines(a)};i.printLines=function(b){var c=this;this.loadResource(this.templateRepository.line,function(){a.call(c,b)})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.EmailTranscriptAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"EmailTranscriptAction",applicationType:"EmailTranscriptAction",iconClass:"lp_email-transcript-action-icon",title:"EmailTranscriptAction",disableOnEnd:!0,enableOnStart:!0,enableState:lpTag.unifiedWindow.State.CHATTING,isEnabled:!1,iconEnabled:"email_normal.png",iconDisabled:"email_dimmed.png",svgFile:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#98999A' d='M16.364 3.136a2.318 2.318 0 0 1 2.318 2.319v10a2.318 2.318 0 0 1-2.318 2.318H3.636a2.318 2.318 0 0 1-2.318-2.318v-10a2.318 2.318 0 0 1 2.318-2.319h12.728zm0 1H3.636c-.728 0-1.318.59-1.318 1.319v10c0 .728.59 1.318 1.318 1.318h12.728c.728 0 1.318-.59 1.318-1.318v-10c0-.728-.59-1.319-1.318-1.319zm-2.169 2.756l.707.707L10 12.501 5.098 7.6l.707-.707L10 11.087l4.195-4.195z'/></g></svg>",initialize:function(){this.isEnabled=!1},events:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.EmailTranscriptDialogViewController.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.focusOnView})}});a=lpTag.unifiedWindow.actions.EmailTranscriptAction.prototype;a.clicked=function(){if(this.isEnabled){var a={context:this,data:{ControllerName:lpTag.unifiedWindow.EmailTranscriptDialogViewController.ControllerName,dialogOpenedFrom:this.appConsts.views.ACTION_MENU}};this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG,data:a})}}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.actions=lpTag.unifiedWindow.actions||{};!function(){var a,b;lpTag.unifiedWindow.actions.EndChatAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"EndChatAction",applicationType:"EndChatAction",iconClass:"lp_end-chat-action-icon",title:"EndChatAction",isEnabled:!0,disableOnEnd:!0,iconEnabled:"end_normal.png",iconDisabled:"end_dimmed.png",svgFile:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#FA5A64' d='M5.58 4.395l.805 1.1a6.136 6.136 0 1 0 7.257.02l.81-1.097a7.5 7.5 0 1 1-8.872-.024zm5.102-1.668v9.091H9.318v-9.09h1.364z'/></g></svg>",initialize:function(){b=!0;if(this.appContext.conf.engConf.async){this.enableState=lpTag.unifiedWindow.State.CHATTING;this.featureStateManager.isMenuTop()||(this.disableState=[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CONNECTION_ISSUE])}else this.enableState=[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CHATTING]},events:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.EndChatDialogViewController.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.focusOnView});this.bindModel({path:this.chatPath.CURRENT_DIALOG_TYPE,callback:this.dialogTypeUpdated,context:this})}});a=lpTag.unifiedWindow.actions.EndChatAction.prototype;a.setCloseClass=function(){this.addClass(this,"lp_top_close_action")};a.enable=function(){if(!this.isEnabled&&b){this.isEnabled=!0;this.setActionState(this.isEnabled,this.iconEnabled)}};a.clicked=function(){if(this.isEnabled){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.viewController.INITIATE_END_CHAT});this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!1)}};a.dialogTypeUpdated=function(a){if(a.newValue===lpTag.AMSStatics.dialog.types.MAIN){b=!0;this.enable()}else if(a.newValue===lpTag.AMSStatics.dialog.types.POST_SURVEY){b=!0;this.enable()}else if(this.featureStateManager.isMenuTop()){b=!0;this.enable()}else{b=!1;this.disable()}this.render()}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.actions=lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.ForgetMeAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"ForgetMeAction",applicationType:"ForgetMeAction",iconClass:"lp_actions-forget-me-icon",title:"ForgetMeAction",isEnabled:!1,disableOnEnd:!1,enableState:[lpTag.unifiedWindow.State.CHATTING,lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.POST_CHAT],disableState:[lpTag.unifiedWindow.State.ERROR,lpTag.unifiedWindow.State.APP_ENDED],enableOnStart:!0,iconEnabled:"end_normal.png",iconDisabled:"end_dimmed.png",svgFile:"<svg width='20px' height='20px' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><g id='20px/light/clearHistory' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><path d='M13.2272727,11.8181818 L13.2272727,16.3636364 C13.2272727,16.5613292 13.3675017,16.7262698 13.5539175,16.764416 L13.6363636,16.7727273 L17.2727273,16.7727273 C17.4704201,16.7727273 17.6353607,16.6324983 17.6735069,16.4460825 L17.6818182,16.3636364 L17.6818182,11.8181818 L18.6818182,11.8181818 L18.6818182,16.3636364 C18.6818182,17.0960782 18.1229839,17.6979972 17.4084321,17.7662769 L17.2727273,17.7727273 L13.6363636,17.7727273 C12.9039218,17.7727273 12.3020028,17.213893 12.2337231,16.4993412 L12.2272727,16.3636364 L12.2272727,11.8181818 L13.2272727,11.8181818 Z M14.5454545,2.22727273 C15.7724053,2.22727273 16.7767251,3.18046952 16.8582883,4.38673759 L16.8636364,4.54545455 L16.8636364,7.73093484 L15.8636364,7.73093484 L15.8636364,4.54545455 C15.8636364,3.86294356 15.3449322,3.30158243 14.680231,3.23407835 L14.5454545,3.22727273 L3.63636364,3.22727273 C2.95385265,3.22727273 2.39249152,3.74597692 2.32498744,4.41067811 L2.31818182,4.54545455 L2.31818182,11.8181818 C2.31818182,12.5006928 2.83688601,13.0620539 3.5015872,13.129558 L3.63636364,13.1363636 L5.24924538,13.1363636 C5.49470527,13.1363636 5.69885375,13.3132388 5.74118971,13.546488 L5.74924538,13.6363636 L5.74924538,15.9126983 L9.36831813,13.2344498 C9.43287924,13.1866722 9.50766588,13.1553875 9.5862025,13.1427313 L9.66574929,13.1363636 L10.9802246,13.1363636 L10.9802246,14.1363636 L9.8306382,14.1363636 L6.27161396,16.7701739 C5.8478514,17.083774 5.2501009,16.9944696 4.93650085,16.5707071 C4.83920824,16.4392372 4.77774031,16.2855562 4.75704484,16.1246675 L4.74924538,16.0028839 L4.74924538,14.1363636 L3.63636364,14.1363636 C2.40941286,14.1363636 1.40509312,13.1831668 1.32352993,11.9768988 L1.31818182,11.8181818 L1.31818182,4.54545455 C1.31818182,3.31850377 2.27137861,2.31418403 3.47764668,2.23262084 L3.63636364,2.22727273 L14.5454545,2.22727273 Z M15.0454545,13.1818182 L15.0454545,15.9090909 L14.0454545,15.9090909 L14.0454545,13.1818182 L15.0454545,13.1818182 Z M16.8636364,13.1818182 L16.8636364,15.9090909 L15.8636364,15.9090909 L15.8636364,13.1818182 L16.8636364,13.1818182 Z M19.0909091,10.4090909 L19.0909091,11.4090909 L11.8181818,11.4090909 L11.8181818,10.4090909 L19.0909091,10.4090909 Z M16.8181818,9.04545455 L16.8181818,10.0454545 L14.0909091,10.0454545 L14.0909091,9.04545455 L16.8181818,9.04545455 Z M10,8.59090909 L10,9.59090909 L5.45454545,9.59090909 L5.45454545,8.59090909 L10,8.59090909 Z M12.7272727,6.31818182 L12.7272727,7.31818182 L5.45454545,7.31818182 L5.45454545,6.31818182 L12.7272727,6.31818182 Z' fill='#979797' fill-rule='nonzero'></path></g></svg>",initialize:function(){},events:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.ForgetMeDialogViewController.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.focusOnView})}});a=lpTag.unifiedWindow.actions.ForgetMeAction.prototype;a.clicked=function(){if(this.isEnabled){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.viewController.SHOW_FORGET_ME});this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!1)}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){function a(){var a=this.getModelParam(this.chatPath.TTR)||{};return a.markUrgencyEnabled?!0:!1}var b,c,d;lpTag.unifiedWindow.actions.MarkUrgencyAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"MarkUrgencyAction",applicationType:"MarkUrgencyAction",titles:{urgent:"MarkUrgentAction"},title:"MarkUrgentAction",isEnabled:!0,onOffHours:!1,disableOnEnd:!0,disableState:[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CONNECTION_ISSUE],enableState:lpTag.unifiedWindow.State.CHATTING,iconClasses:{urgent:"lp_mark_urgency-action-icon",dismiss:"lp_dismiss_urgency-action-icon"},svgFiles:{enabled:"<svg width='20px' height='20px' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><path d='M11.9519742,1.40909091 C12.6845503,1.40909091 13.2784205,2.00296114 13.2784205,2.73553719 L13.278,3.853 L17.9950521,3.85323307 C18.6818422,3.85323307 19.2467228,4.37518933 19.3146501,5.04405793 L19.3215896,5.17967936 C19.3215896,5.46102315 19.232042,5.73508031 19.0660573,5.96224417 L16.7290457,8.16063924 C16.645225,8.27535494 16.645225,8.43111121 16.7290457,8.54582691 L19.0660573,11.744222 C19.4982559,12.3357218 19.3691167,13.1655933 18.7776169,13.597792 C18.5504531,13.7637766 18.2763959,13.8532331 17.9950521,13.8532331 L8.10039136,13.8532331 C7.36781531,13.8532331 6.77394508,13.2593628 6.77394508,12.5267868 L6.77394508,11.6178755 C6.77394508,11.5431361 6.79034361,11.4722268 6.81973895,11.4085493 L2.6446281,11.4090909 C2.53178543,11.4090909 2.42223382,11.3950002 2.3176368,11.3684823 L2.31818182,18.9075392 C2.31818182,19.1836815 2.09432419,19.4075392 1.81818182,19.4075392 C1.57272193,19.4075392 1.36857345,19.230664 1.32623749,18.9974148 L1.31818182,18.9075392 L1.31818182,2.73553719 C1.31818182,2.00296114 1.91205205,1.40909091 2.6446281,1.40909091 L11.9519742,1.40909091 Z M13.278,4.853 L13.2784205,10.0826446 C13.2784205,10.5426049 13.0443068,10.9478851 12.6887398,11.1858246 C12.6414345,11.2581487 12.573551,11.3193125 12.4890928,11.3598524 L12.4890928,11.3598524 L9.37618182,12.8530909 L17.9950521,12.8532331 C18.0642925,12.8532331 18.1317396,12.8312173 18.1876459,12.7903675 C18.3332176,12.6840009 18.3649995,12.4797646 18.2586328,12.334193 L15.9216213,9.13579789 C15.5810331,8.6696746 15.5810331,8.03679154 15.9216213,7.57066826 L18.2586328,5.37227319 C18.2994826,5.31636682 18.3215208,5.24891973 18.3215208,5.17967936 C18.3215208,4.99938805 18.1753434,4.85323307 17.9950521,4.85323307 L13.278,4.853 Z M10.0771818,11.4080909 L7.72815121,11.4085493 C7.75754655,11.4722268 7.77394508,11.5431361 7.77394508,11.6178755 L7.77318182,12.5140909 L10.0771818,11.4080909 Z M11.9519742,2.40909091 L2.6446281,2.40909091 C2.4643368,2.40909091 2.31818182,2.55524589 2.31818182,2.73553719 L2.31818182,10.0826446 C2.31818182,10.2629359 2.4643368,10.4090909 2.6446281,10.4090909 L11.9519742,10.4090909 C12.1322655,10.4090909 12.2784205,10.2629359 12.2784205,10.0826446 L12.2784205,2.73553719 C12.2784205,2.55524589 12.1322655,2.40909091 11.9519742,2.40909091 Z' fill='#98999A'></path></g></svg>",
disabled:"<svg width='20px' height='20px' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><path d='M1.81818182,5.2265625 C2.06364171,5.2265625 2.26779019,5.40343766 2.31012615,5.63668687 L2.31818182,5.7265625 L2.31818182,10.0826446 C2.31818182,10.2403995 2.43008172,10.3720188 2.57883779,10.4024587 L2.6446281,10.4090909 L8.2489624,10.4090909 C8.52510478,10.4090909 8.7489624,10.6329485 8.7489624,10.9090909 C8.7489624,11.1545508 8.57208724,11.3586993 8.33883803,11.4010352 L8.2489624,11.4090909 L7.72815121,11.4085493 C7.75754655,11.4722268 7.77394508,11.5431361 7.77394508,11.6178755 L7.77394508,12.5267868 C7.77394508,12.7070781 7.92010006,12.8532331 8.10039136,12.8532331 L10.628418,12.8532331 C10.9045603,12.8532331 11.128418,13.0770907 11.128418,13.3532331 C11.128418,13.6293754 10.9045603,13.8532331 10.628418,13.8532331 L8.10039136,13.8532331 C7.36781531,13.8532331 6.77394508,13.2593628 6.77394508,12.5267868 L6.77394508,11.6178755 C6.77394508,11.5431361 6.79034361,11.4722268 6.81973895,11.4085493 L2.6446281,11.4090909 C2.53178543,11.4090909 2.42223382,11.3950002 2.3176368,11.3684823 L2.31818182,18.9075392 C2.31818182,19.1836815 2.09432419,19.4075392 1.81818182,19.4075392 C1.57272193,19.4075392 1.36857345,19.230664 1.32623749,18.9974148 L1.31818182,18.9075392 L1.31818182,5.7265625 C1.31818182,5.45042013 1.54203944,5.2265625 1.81818182,5.2265625 Z M1,1.29289322 L18.2071068,18.5 L17.5,19.2071068 L0.292893219,2 L1,1.29289322 Z M11.9519742,1.40909091 C12.6387643,1.40909091 13.2036449,1.93104716 13.2715722,2.59991576 L13.2784205,2.73553719 L13.278,3.853 L17.9950521,3.85323307 C18.6818422,3.85323307 19.2467228,4.37518933 19.3146501,5.04405793 L19.3215896,5.17967936 C19.3215896,5.41413252 19.2593759,5.64352552 19.1426124,5.84493783 L19.0660573,5.96224417 L16.7290457,8.16063924 C16.6619891,8.2524118 16.6485778,8.37045032 16.6888117,8.47272927 L16.7290457,8.54582691 L19.0660573,11.744222 C19.4982559,12.3357218 19.3691167,13.1655933 18.7776169,13.597792 C18.5883137,13.7361125 18.3664457,13.8212885 18.1349334,13.8458382 L17.9950521,13.8532331 L14.6396484,13.8532331 C14.3635061,13.8532331 14.1396484,13.6293754 14.1396484,13.3532331 C14.1396484,13.1077732 14.3165236,12.9036247 14.5497728,12.8612887 L14.6396484,12.8532331 L17.9950521,12.8532331 C18.0642925,12.8532331 18.1317396,12.8312173 18.1876459,12.7903675 C18.3124216,12.6991961 18.3535967,12.5361205 18.2958315,12.3997161 L18.2586328,12.334193 L15.9216213,9.13579789 C15.6094154,8.70851821 15.5833983,8.141114 15.8435698,7.69048024 L15.9216213,7.57066826 L18.2586328,5.37227319 C18.2994826,5.31636682 18.3214984,5.24891973 18.3214984,5.17967936 C18.3214984,5.02192447 18.2095985,4.8903052 18.0608424,4.8598653 L17.9950521,4.85323307 L13.278,4.853 L13.2784205,10.0826446 C13.2784205,10.7133897 12.8350728,11.2530478 12.2248172,11.3808976 C11.9545424,11.4375207 11.6895394,11.2643218 11.6329163,10.9940471 C11.5762932,10.7237723 11.7494921,10.4587693 12.0197668,10.4021462 C12.1442037,10.3760764 12.2408664,10.2793151 12.2696307,10.1580064 L12.2784205,10.0826446 L12.2784205,2.73553719 C12.2784205,2.5777823 12.1665206,2.44616303 12.0177645,2.41572314 L11.9519742,2.40909091 L3.6446281,2.40909091 C3.36848572,2.40909091 3.1446281,2.18523328 3.1446281,1.90909091 C3.1446281,1.66363102 3.32150326,1.45948254 3.55475247,1.41714658 L3.6446281,1.40909091 L11.9519742,1.40909091 Z' fill='#98999A' fill-rule='nonzero'></path></g></svg>"},initialize:function(){c=!1;d=!0},events:function(){this.bindModel({path:this.chatPath.TTR,callback:this.urgencyStateChanged,context:this});this.bindModel({path:this.chatPath.CURRENT_DIALOG_TYPE,callback:this.dialogTypeUpdated,context:this})},render:function(){this.setIconClass();this.setTitle(this.title.urgent);this.overrideTitleWithAriaAttributes();this.setButtonAttributes();this.featureStateManager.isMenuTop()?this.toggleSvg(c):this.setIconClass()}});b=lpTag.unifiedWindow.actions.MarkUrgencyAction.prototype;b.enable=function(){if(!this.isEnabled&&a.call(this)&&d){this.isEnabled=!0;this.setActionState(this.isEnabled,this.iconEnabled)}};b.urgencyStateChanged=function(a){c=a.newValue.isUrgent;a.newValue.markUrgencyEnabled?this.enable():this.disable();this.render()};b.setIconClass=function(){this.removeClass(this.icon,c?this.iconClasses.urgent:this.iconClasses.dismiss);this.addClass(this.icon,c?this.iconClasses.dismiss:this.iconClasses.urgent)};b.clicked=function(){if(this.isEnabled){c=!c;this.render();this.appContext.conversationManager.setConversationUrgency(c)}};b.dialogTypeUpdated=function(a){if(a.newValue===lpTag.AMSStatics.dialog.types.MAIN){d=!0;this.enable()}else{d=!1;this.disable()}this.render()};b.setButtonAttributes=function(){if(this.view&&this.view.firstElementChild&&"button"===this.view.firstElementChild.tagName.toLowerCase()){this.view.firstElementChild.setAttribute("aria-live","polite");this.view.firstElementChild.setAttribute("aria-relevant","text");this.view.firstElementChild.setAttribute("role","switch");this.view.firstElementChild.setAttribute("aria-checked",String(!c))}};b.overrideTitleWithAriaAttributes=function(){var a=this.featureStateManager.isMenuTop()?"LP_MarkUrgencyAction_2":"LP_MarkUrgencyAction_1",b=document.querySelector("#"+a+" > button span.lp_title"),d=c?this.translate("on"):this.translate("off");b&&(b.innerHTML=this.translate(this.titles.urgent)+": <span aria-hidden='true'>"+d+"</span>")}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){function a(){var a=this.appContext&&this.appContext.conf&&this.appContext.conf.unifiedConf,c=a&&a.enableStrictCspMode;this.setIconURL(this.appContext.conf.unifiedConf.imagesRepository+"/Icon_attach.png");var d=document.createElement("li");d.className=this.wrapper.className;c?d.innerHTML=this.wrapper.innerHTML.replace(/style=".+?"/g,""):d.innerHTML=this.wrapper.innerHTML;this.view.parentNode.replaceChild(d,this.view);this.view=d;var f=document.createElement("input");f.id="LPfileUpload_"+Date.now();f.type="file";f.setAttribute("accept",e);f.setAttribute("class","lp_action_file_input");f.onchange=b.bind(this);f.style.display="none";this.view.appendChild(f);this.fileUploader=f;d.addEventListener("click",function(){f.click()})}function b(){if(this.fileUploader.files.length>0){d=this.fileUploader.files[0];this.fileUploader.value="";if(d){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,data:{image:d}});d=null}}}var c,d,e=".png, .jpg, .gif, .pdf, .docx, .xlsx, .pptx";lpTag.unifiedWindow.actions.PhotoSharingAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"PhotoSharingAction",applicationType:"PhotoSharingAction",iconClass:"lp_add-attachment-action-icon",title:"AddAttachmentAction",isEnabled:!0,disableOnEnd:!0,enableOnStart:!0,enableState:lpTag.unifiedWindow.State.CHATTING,initialize:function(a){var b=a&&a.appContext;b&&b.conf&&b.conf.unifiedConf.areExtendedFileFormatsEnabled&&(e+=", .txt, .csv")},events:function(){},render:function(){a.call(this)}});c=lpTag.unifiedWindow.actions.PhotoSharingAction.prototype;c.disable=function(){if(this.isEnabled){this.isEnabled=!1;this.disableAction();this.fileUploader.setAttribute("disabled","disabled")}};c.enable=function(){if(!this.isEnabled){this.isEnabled=!0;this.enableAction();this.fileUploader.removeAttribute("disabled")}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a,b,c,d,e;lpTag.unifiedWindow.ActionsManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ActionsManagerViewController",template:"<div class='lp_action_placeholder_wrapper' data-lp-point='action_placeholder_wrapper'></div><ul class='lp_action_items_wrapper' data-lp-point='action_items_wrapper' data-lp-cust-id='action_items_wrapper'></ul>",LPViewMap:{actionsBar:"^actions_bar",actionItemsWrapper:"^action_items_wrapper",actionPlaceholderWrapper:"^action_placeholder_wrapper",actionWrapper:"^action_placeholder"},initialize:function(a){b=this.appContext.conf.unifiedConf;c=this.appContext.conf.engConf;d=this.appContext.deviceDetector;e=this.appContext.featureStateManager;this.actions=[];this.models=a.models},events:function(){},render:function(){var a=this;this.loadResource("<div class='lp_action_placeholder' data-lp-cust-id='actionsMenu_actionItem'></div>",function(b){a.actionsResourceLoaded(b);a.customize(a.view);a.handleWindowLocation(a.view)})}});a=lpTag.unifiedWindow.ActionsManagerViewController.prototype;a.addAction=function(a){var b={action:a};this.actions.push(b);var c=this.getFirstElement(this.LPViewMap.actionItemsWrapper,this.view);c.appendChild(a.view);e.isMenuTop()&&d.isIE()&&this.css(a.view,{"-ms-grid-row":this.actions.length});"EndChatAction"===a.ControllerName&&e.isMenuTop()&&this.addClass(a.view,"lp_top_close_action")};a.actionsResourceLoaded=function(a){this.addActionsMenuWrappers(a);this.addActions()};a.addActionsMenuWrappers=function(a){for(var c=3,d=2,e=0;d*c>e;e++)this.createView({template:a,target:this.LPViewMap.actionPlaceholderWrapper,wrapWithDiv:!1,textInjection:b})};a.addActions=function(){var a=lpTag.unifiedWindow.actions,b=this.appContext.conf.windowConf,f=this.getActionViewData();c.async&&b.sendImage&&!e.isMenuTop()&&this.addAction(new a.PhotoSharingAction(f));(!b||b.email!==!1&&!c.async)&&this.addAction(new a.EmailTranscriptAction(f));b&&b.print===!1||!d.isDesktop()||this.addAction(new a.PrintTranscriptAction(f));b&&b.sound===!1||!d.isDesktop()||this.addAction(new a.MuteSoundAction(f));if(c.async){b.markAsUrgent!==!1&&this.addAction(new a.MarkUrgencyAction(f));c.allowUnauthMsg===!0&&b.clearHistory&&this.addAction(new a.ForgetMeAction(f))}this.addAction(new a.EndChatAction(f))};a.handleWindowLocation=function(){e.isMenuTop()&&this.addClass("^action_items_wrapper","lp_action_items_wrapper_top")};a.getActionViewData=function(){return{engConf:c,wrapWithDiv:!1,appContext:this.appContext,models:this.models,unifiedConf:b,textInjection:b}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,c){var d=c.newValue,e=this.getFirstElement(this.LPViewMap[a]);if(d){this.activeMenu=a;this.show(e)}else this.hide(e);b.call(this,a)}function b(a){var b=this.getFirstElement(this.LPViewMap.bottomLogo);this.isLogoEnabled&&a!==this.ActionType.EMOJI||this.activeMenu===this.ActionType.MENU?this.show(b):this.hide(b)}var c,d,e;lpTag.unifiedWindow.ActionsBarViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ActionsBarViewController",templateFile:"<div class='lp_actions_bar_container lpc_menu {{deviceClass}}' data-lp-point='actions_bar_container' data-lp-cust-id='actionsMenu'><div class='lp_actions_bar' data-lp-point='actions_bar'></div><div class='lp_bottom_logo_bar lpc_menu__banner {{deviceClass}} {{logoClass}}' data-lp-point='bottom_logo'><span data-lp-type='icon' class='lp_bottom-logo-icon'><img src='{{imagesRepository}}/LP-logo-bottom.png' data-lp-cust-id='bottomLogo' alt='LivePerson'></span></div></div>",LPViewMap:{actionsBarContainer:"^actions_bar_container",bottomLogo:"^bottom_logo",MENU:"^actions_bar",EMOJI:"^emoji_bar",MENU_TOP:"^top_menu"},ActionType:{EMOJI:"EMOJI",MENU:"MENU",MENU_TOP:"MENU_TOP"},preInitView:function(a){a.textInjection.logoClass=a.textInjection.hide_lp_logo?"lpHide":""},initialize:function(a){c=this.appContext.conf.unifiedConf;d=this.appContext.conf.engConf;e=this.appContext.deviceDetector;this.actions=[];this.featureStateManager=a.appContext.featureStateManager;this.models=a.models;this.isLogoEnabled=!a.textInjection.hide_lp_logo;this.emojiEnabled=this.featureStateManager.emojiEnabled();this.activeMenu=null;this.actionsVC=new lpTag.unifiedWindow.ActionsManagerViewController({models:this.models,appContext:this.appContext,textInjection:this.appContext.conf.unifiedConf});this.addViewController({viewController:this.actionsVC,target:this.LPViewMap.MENU});this.hide(this.getFirstElement(this.LPViewMap[this.ActionType.MENU]))},events:function(){this.bindModel({path:this.uiPath.ACTIONS_VISIBLE,callback:a.bind(this,this.ActionType.MENU)})}});var f=lpTag.unifiedWindow.ActionsBarViewController.prototype;f.getActiveMenu=function(){return this.activeMenu};f.hideActionBar=function(){this.emojiEnabled&&this.appContext.uiStateManager.setVisibility(this.uiPath.EMOJI_VISIBLE,!1);this.appContext.uiStateManager.setVisibility(this.uiPath.ACTIONS_VISIBLE,!1)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){this.appContext.uiStateManager.setVisibility(this.uiPath.ACTIONS_VISIBLE,!1);var c=this.getFirstElement(this.LPViewMap[a]);this.show(c)}var b,c;lpTag.unifiedWindow.EmojiBarViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"EmojiBarViewController",templateFile:"<div class='lp_emoji_bar_container lpc_menu {{deviceClass}}' data-lp-point='emoji_bar_container' data-lp-cust-id='emojiMenu'><div class='lp_emoji_bar' data-lp-point='emoji_bar'></div></div>",LPViewMap:{EMOJI:"^emoji_bar"},ActionType:{EMOJI:"EMOJI"},initialize:function(a){b=this.appContext.conf.unifiedConf;c=this.appContext.conf.engConf;this.featureStateManager=a.appContext.featureStateManager;this.models=a.models;this.emojiEnabled=this.featureStateManager.emojiEnabled();this.activeMenu=null;if(this.emojiEnabled){this.emojiVC=new lpTag.unifiedWindow.EmojiManagerViewController({textareaDomEl:a.textareaDomEl,models:this.models,appContext:this.appContext,textInjection:this.appContext.conf.unifiedConf});this.addViewController({viewController:this.emojiVC,target:this.LPViewMap.EMOJI});this.hide(this.getFirstElement(this.LPViewMap[this.ActionType.EMOJI]))}},events:function(){this.bindModel({path:this.uiPath.EMOJI_VISIBLE,callback:a.bind(this,this.ActionType.EMOJI)})}});var d=lpTag.unifiedWindow.EmojiBarViewController.prototype;d.getActiveMenu=function(){return this.activeMenu};d.hideEmojiBar=function(){this.emojiEnabled&&this.appContext.uiStateManager.setVisibility(this.uiPath.EMOJI_VISIBLE,!1)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=this;a.addEventListener("click",function(a){e.call(b,a)})}function b(a){var b=this.textareaDomEl.value+a;if(b){this.textareaDomEl.value=b;c.call(this);d.call(this)}}function c(){this.appContext.events.trigger({appName:"*",eventName:"sendButton",data:{enabled:!0}})}function d(){this.appContext.events.trigger({appName:"*",eventName:"emojiFocus"})}function e(a){var c=a.target&&a.target.innerText;c&&b.call(this,c)}lpTag.unifiedWindow.EmojiManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"EmojiManagerViewController",templateFile:"<div class='lp_emoji_table lp_disable_select'><div class='lp_emoji_table_body'><ul><li><button>&#128512;</button></li><li><button>&#128513;</button></li><li><button>&#128521;</button></li><li><button>&#128540;</button></li><li><button>&#128533;</button></li><li><button>&#128544;</button></li><li><button>&#128556;</button></li></ul><ul><li><button>&#128077;</button></li><li><button>&#128078;</button></li><li><button>&#128526;</button></li><li><button>&#128514;</button></li><li><button>&#128515;</button></li><li><button>&#128522;</button></li><li><button>&#128523;</button></li></ul><ul><li><button>&#128524;</button></li><li><button>&#128564;</button></li><li><button>&#128555;</button></li><li><button>&#128549;</button></li><li><button>&#128563;</button></li><li><button>&#128527;</button></li><li><button>&#128543;</button></li></ul><ul><li><button>&#128545;</button></li><li><button>&#128561;</button></li><li><button>&#128553;</button></li><li><button>&#128532;</button></li><li><button>&#128079;</button></li><li><button>&#128076;</button></li><li><button>&#128591;</button></li></ul></div></div>",LPViewMap:{button:"^emoji_clicker",emojiTable:"lp_emoji_table"},initialize:function(a){this.textareaDomEl=a.textareaDomEl;this.appContext=a.appContext},events:function(){},render:function(){for(var b=this.getElements("li",this.view),c=0;c<b.length;c++)a.call(this,b[c])}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b,c=Array.prototype.indexOf.call(this.linesEl.children,a.target),d=a.target.classList.contains("chips-item")?a.target.parentNode.parentNode.parentNode:a.target;if(-1!==c||d!=a.target){if((37===a.keyCode||38===a.keyCode)&&d.previousElementSibling){this.setTabindexToEdgeLine("last");if(d.previousElementSibling.classList.contains("chips-wrapper")){b=d.previousElementSibling.querySelector(".chips-item");b.setAttribute("tabindex","0");b.focus()}else{d.previousElementSibling.setAttribute("tabindex","0");d.previousElementSibling.focus()}ha=this.linesEl.children.length-c+1}if((39===a.keyCode||40===a.keyCode)&&d.nextElementSibling){this.setTabindexToEdgeLine("last");if(d.nextElementSibling.classList.contains("chips-wrapper")){b=d.nextElementSibling.querySelector(".chips-item");b.setAttribute("tabindex","0");b.focus()}else{d.nextElementSibling.setAttribute("tabindex","0");d.nextElementSibling.focus()}ha=this.linesEl.children.length-c}if(36===a.keyCode){ha=this.linesEl.children.length;this.setTabindexToEdgeLine("first",!0)}35===a.keyCode&&this.setTabindexToEdgeLine("last",!0);9===a.keyCode&&d==a.target&&this.setTabindexToEdgeLine("last",!0)}}function b(a,b){var c;return function(){c&&clearTimeout(c);c=setTimeout(function(){b.call(this)}.bind(this),a)}}function c(){var a,b=this;if(ba(this.view,this.view.parentNode,ja)&&!(this.isHistoryLazyLoadEnabled||n.call(this)||this.historyRequested||this.appContext.conversationManager.areAllConversationsLoaded())){a=this.appContext.conf&&this.appContext.conf.unifiedConf&&this.appContext.conf.unifiedConf.loadingHistoryLabel;this.historyRequested=!0;this.triggerLoadFromHistory(!0);if(!this.allHistoryLoaded){fa=setTimeout(function(){b.appContext.events.trigger({appName:"tooltip",eventName:"close"});b.historyRequested=!1;c.call(b)},ka);this.appContext.events.trigger({appName:"tooltip",eventName:"show",data:{text:a||this.translate("transcriptHistoryLazyLoadingLabel"),type:"process"}})}}}function d(a){var b={line:a.line,targetToReplace:a.view,callback:this.addEvent.bind(this,a.line.history,a.line.track),context:this,replace:!0};this.chatLineFactory.createLine(b)}function e(a,b){var c=this.getWidgetContent(),d=this.getFirstElement(this.LPViewMap.linesArea,c);a&&this.isDOMNode(b)&&this.isDOMNode(d)&&d.replaceChild(a,b)}function f(a){var b=this.getFirstElement(this.LPViewMap.dateLine,this.view),c=this.getFirstElement(this.LPViewMap.dateLine,a),d=this.getWidgetContent(),e=this.getFirstElement(this.LPViewMap.linesArea,d),f=e.firstElementChild,g=c?c.parentElement:null,h=b?b.parentElement:null,i=this.util.getPropertyFromObject(g,"previousElementSibling.classList",!1);i&&i.contains("lp_chat_line_wrapper_auto")&&(c.style.paddingTop="3px");if(h&&f&&h===f){b.style.paddingTop="3px";if(this.lastFirstDateLine!==h){this.lastFirstDateLine&&(this.lastFirstDateLine.style.paddingTop="");this.lastFirstDateLine=h}}}function g(a,b){var c=this.getWidgetContent(),d=this.getFirstElement(this.LPViewMap.linesArea,c);b&&this.firstLineView?d.insertBefore(a,this.firstLineView):d.appendChild(a)}function h(a){if(a){var b=this.browserStateManager&&this.browserStateManager.isHidden(),c=this.models&&this.models.uiModel&&this.models.uiModel.get(this.uiPath.LAST_LINE_VIEWED);if(!b&&c&&a["@id"]>c["@id"]&&a.convId===c.convId&&"visitor"!==a.source&&!a.update&&!a.history)return!0}return!1}function i(a){var b=a.view.cloneNode(!0);b.setAttribute("aria-live","polite");this.a11yQueue.appendChild(b);b.id+="_a11y_queue";setTimeout(j.bind(this,b),this.removeAccessibilityAttrsTimeout)}function j(a){a&&this.a11yQueue&&this.a11yQueue.removeChild(a)}function k(a,b){var c=this,d="number"==typeof a?a:this.scrollToBottomTimeout;setTimeout(function(){if(c.view&&c.view.parentNode){c.view.parentNode.scrollTop=c.getWidgetContent().scrollHeight;b&&"function"==typeof b&&b.call(c)}},d);l.call(this)}function l(){this.appContext&&this.appContext.events&&this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.LINES_VIEWED})}function m(){return lpTag.unifiedWindow.State.CHATTING===this.getModelParam(this.uiPath.STATE)}function n(){return lpTag.unifiedWindow.State.ERROR===this.getModelParam(this.uiPath.STATE)}function o(a){var b=a.newValue;this.firstLineView=this.getFirstElement(this.LPViewMap.lineWrapper,this.view);if(b&&b.length>0){var c=m.call(this),d=N.call(this,b);d&&"agent"!=d.source&&(d.text=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(d.text).cleanText);if(b[0].isWelcomeMessage&&!b[0].addedFromMD){b[0].text=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(b[0].text).cleanText;if(b.length>1){var e=b.shift();b.push(e)}}var f,g=null,h=null,i=!1;if(this.view&&this.isDOMNode(this.view)&&this.view.parentNode&&this.isDOMNode(this.view.parentNode)&&this.getWidgetContent()){g=this.view.parentNode.scrollTop;h=this.getWidgetContent().scrollHeight-this.view.parentNode.clientHeight;q.call(this)&&(i=!0)}for(var j=0;j<b.length;j++){f=b[j];if(f.update)w.call(this,f,b[j-1]);else{p.call(this);this.isLineGroupingEnabled&&u.call(this,f);v.call(this,f);r.call(this,f);var k=t.call(this,f);if(k||c&&!f.history&&d&&f.localId===d.localId){I.call(this);H.call(this,f)}this.lastLine=f;this.lastLineHistory=f.history?f:this.lastLineHistory}}if(this.view&&this.isDOMNode(this.view)&&this.view.parentNode&&this.isDOMNode(this.view.parentNode)&&this.getWidgetContent()){var l=null;if(i)l=this.getWidgetContent().scrollHeight;else if(0===g&&this.isHistoryLazyLoadEnabled)l=0;else if(g>=0&&h){var n=this.getWidgetContent().scrollHeight-this.view.parentNode.clientHeight;l=g+(n-h)}l&&(this.view.parentNode.scrollTop=l)}c&&d&&!d.history&&"visitor"===d.source&&!d.update&&I.call(this);if(!this.isHistoryLazyLoadEnabled)if(this.historyRequested){fa&&clearTimeout(fa);this.appContext.events.trigger({appName:"tooltip",eventName:"close"});this.historyRequested=!1}else!this.allHistoryLoaded&&this.view.getBoundingClientRect().height<=this.view.parentNode.getBoundingClientRect().height&&this.triggerLoadFromHistory(!0)}}function p(){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.RICH_CONTENT,eventName:this.EventName.richContent.DISABLE_RICH_CONTENT})}function q(){return this.view&&this.isDOMNode(this.view)&&this.view.parentNode&&this.isDOMNode(this.view.parentNode)?this.view.parentNode.scrollHeight-this.view.parentNode.scrollTop===this.view.parentNode.clientHeight:null}function r(a){var b=s.call(this,a);b&&I.call(this)}function s(a){if(!a.history&&this.windowConf.welcomeMessage&&this.windowConf.welcomeMessage.quickRepliesState&&this.windowConf.welcomeMessage.quickRepliesState.isRequired&&this.windowConf.welcomeMessage.quickRepliesState.isRenedered&&!this.windowConf.welcomeMessage.quickRepliesState.isRemoved){this.windowConf.welcomeMessage.quickRepliesState.isRemoved=!0;return!0}return!1}function t(a){if(a.isWelcomeMessage&&this.windowConf.welcomeMessage&&this.windowConf.welcomeMessage.quickRepliesState&&this.windowConf.welcomeMessage.quickRepliesState.isRequired&&!this.windowConf.welcomeMessage.quickRepliesState.isRenedered){this.windowConf.welcomeMessage.quickRepliesState.isRenedered=!0;this.windowConf.welcomeMessage.quickRepliesState.isRemoved=!1;return!0}return!1}function u(a){var b=this.appContext.featureStateManager.getBubbleStyles(),c=a.history?this.lastLineHistory:this.lastLine,d=a.history?this.groupingTimeHistory:this.groupingTime,e=this.timeStampManager.getEpochTime(a.time);if("visitor"===a.source||"agent"===a.source||"system"===a.source){var f=d?3e5>e-d&&e-d>0:!1;if(c&&a.source===c.source&&f)("system"!=a.source||a.text)&&(a.grouped="end");else{if(a.history){this.lastLineHistory=null;this.groupingTimeHistory=e}else{this.lastLine=null;this.groupingTime=e}c=null;a.grouped="start"}}!c||"visitor"!==c.source&&"agent"!==c.source&&"system"!==c.source||"end"!==a.grouped||"start"===c.grouped&&"default"!==b[c.source]?c&&"start"===c.grouped?F.call(this,c,{dispose:!0,nextLine:a}):c&&F.call(this,c,{dispose:!0}):F.call(this,c,{grouped:"body",nextLine:a})}function v(a){if(a.state===this.messageStates.PENDING&&this.isAsync){delete a.state;setTimeout(x.bind(this,a.localId),this.updatePendingStateTimeOut)}C.call(this,a)}function w(a){this.isAsync&&"visitor"===a.source&&y.call(this,a)}function x(a){for(var b,c=this.models&&this.models.chatModel?this.models.chatModel.get(this.chatPath.LINES):[],d=0;d<c.length;d++)if(c[d].localId===a){b=c[d];break}b&&b.state===this.messageStates.PENDING&&w.call(this,b)}function y(a){var b=this.appContext.conf.windowConf.readNotificationsType?this.appContext.conf.windowConf.readNotificationsType:this.LPReadNotificationsTypes.text.value;if(!isNaN(a.localId)){var c,d=this.getFirstElement("#"+this.LINE_ID_PREFIX+a.localId,this.view),e=d.className,f=e.match(this.STATE_CLASS_PREFIX_REGEX),g=this.LINE_CLASS_PREFIX+a.state;f&&this.removeClass(d,f[0]);a.state===this.messageStates.ERROR&&this.LPReadNotificationsTypes.visual.value===b?this.addClass(d,g+"_"+this.LPReadNotificationsTypes.visual.value):this.addClass(d,g);c=this.getFirstElement(this.LPViewMap.lineState,d);V.call(this,a,c);F.call(this,a.localId-1,{nextLine:a})}}function z(a){var b=a.line,c=a.timeStamp;if(!isNaN(b.localId)){var d=this.getFirstElement("#"+this.LINE_ID_PREFIX+b.localId,this.view);if(d){var e=this.getFirstElement(this.LPViewMap.time,d),f=this.getFirstElement(this.LPViewMap.time+"_bottom",d),g=this.getFirstElement(this.LPViewMap.time+"_side",d);W.call(this,b,e,c);W.call(this,b,f,c);W.call(this,b,g,c,!0)}}}function A(a){var b=this.getFirstElement(this.LPViewMap.a11yHidden,this.view);(b||{}).innerHTML=a}function B(){var a=this.getFirstElement(this.LPViewMap.a11yMessagesHidden,this.view),b=document.createElement("div"),c=document.createElement("div");c.setAttribute("role","alert");b.innerText=this.translate("transcriptPossibleMessagesShort");this.accessibilityMessages.unshift({view:b});for(var d=0;d<this.accessibilityMessages.length;d++){var e=this.accessibilityMessages[d].view.cloneNode(!0);e.id+="_accessibility";c.appendChild(e)}a.appendChild(c)}function C(a){var b={line:a,callback:this.addEvent.bind(this,a.history,a.track),context:this};if(this.timeStampGroupingEnabled){var c=this.timeStampManager.getDayId(b.line.time),d=this.getFirstElement("#lp_date_line_"+c,this.view),e=this.getWidgetContent(),f=this.getFirstElement(this.LPViewMap.linesArea,e),g=d?d.parentElement:null,h=this.timeStampManager.getEpochTime(a.time);if(d){if(h&&h<this.DateLineState[c]){this.firstLineView===g&&(this.firstLineView=this.firstLineView.nextElementSibling);f.removeChild(g);this.DateLineState[c]=h;E.call(this,b,c)}}else{this.DateLineState[c]=h;E.call(this,b,c)}}if(D(b))this.mavenPayLineFactory.createMavenPayLine(b);else if(a.textType===this.appConsts.RichContent.RICH_CONTENT_LINE)this.richContentFactory.createRichContentLine(b);else switch(a.type){case this.appConsts.chatEvents.SECURE_FORM:this.secureFormLineFactory.createSecureFormLine(b);break;case this.appConsts.chatEvents.INFO:this.autoMessageFactory.createAutoMessage(b);break;case this.appConsts.chatEvents.RICH_CONTENT:this.richContentFactory.createRichContentLine(b);break;case this.appConsts.chatEvents.FILE_SHARING:this.fileContentFactory.createFileContentLine(b);break;default:this.chatLineFactory.createLine(b)}}function D(a){return a.line&&a.line.metadata?a.line.metadata.filter(function(a){return a.type&&("PaymentRequest"===a.type||"PaymentResponse"===a.type)}).length>0:!1}function E(a,b){var c={line:this.util.clone(a.line),callback:this.addEvent.bind(this,a.line.history,a.line.track),context:this},d=this.timeStampManager.getDayString(a.line.time);c.line.source="system";c.line.subType="dateGrouping";c.line.html=d;c.line.localId=b;c.callback=this.addEvent.bind(this,c.line.history,c.line.track);this.dateLineFactory.createDateMessage(c)}function F(a,b){var c="number"==typeof a.localId?a.localId:a;"number"==typeof c&&this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.LINE_UPDATE+c,data:{newValue:b}})}function G(a){return a&&a.quickReplies}function H(a){if(G(a)){var b=this.getWidgetContent(),c=this.getFirstElement(this.LPViewMap.linesArea,b);this.quickRepliesDecorator.decorate(c,a,this.windowConf);this.quickRepliesDecorator.readOnly(this.isPendingLineSet);k.call(this)}}function I(){this.quickRepliesDecorator&&this.quickRepliesDecorator.dispose()}function J(a){this.isPendingLineSet=!(!a||!a.serverPendingLineExists);this.quickRepliesDecorator.readOnly(this.isPendingLineSet)}function K(a){return a.type===this.appConsts.chatEvents.INFO||"system"===a.source}function L(a){return!(K.call(this,a)&&"conversationResolved"!==a.subType||M.call(this,a))}function M(a){return"REGULAR"===a.subType&&""===a.text&&"line"===a.type&&"plain"===a.textType}function N(a){var b=a||this.models.chatModel.get(this.chatPath.LINES)||[];return b.filter(L.bind(this)).pop()}function O(){I.call(this)}function P(){if(this.addLogo){this.logoVC=new lpTag.unifiedWindow.LogoViewController({appContext:this.appContext,context:this});this.addViewController({viewController:this.logoVC,target:this.LPViewMap.logoArea})}}function Q(a,b){if(this.addAgentImage&&!this.appContext.conf.unifiedConf.connectorsSfConfig){"undefined"==typeof a&&(b=this.DEFAULT_AGENT_IMAGE);this.createView({template:"<div class='lp_agent_image_area_wrapper lpc_hero-image-area__image-wrapper lpc_hero-image-area__image-wrapper_maximized {{deviceClass}}' data-lp-cust-id='agent'><img class='lp_image lpc_hero-image-area__image lpc_hero-image-area__image_maximized {{deviceClass}}' src='{{url}}' alt='' data-lp-cust-id='agentImage' aria-hidden='true'></div>",wrapWithDiv:!1,textInjection:{url:R.call(this,b)},target:this.getFirstElement(this.LPViewMap.agentImageArea),context:this})}}function R(a){var b=this.appContext.conf.unifiedConf;return a.indexOf(this.LE_LEGACY_AGENT_URL_PREFIX)>-1?b.agentImageRepository+"/"+a.replace(/^.*[\\\/]/,""):S(a)?a:b.agentImageRepository+"/"+a}function S(a){return null!==a.match(/^http[s]*/)}function T(){if(this.isHistoryLazyLoadEnabled){this.historyButton=new lpTag.unifiedWindow.HistoryButtonViewController({models:this.models,appContext:this.appContext,context:this});this.addViewController({viewController:this.historyButton,target:this.LPViewMap.historyButtonArea})}}function U(){if(this.addRotator){this.rotator=new lpTag.unifiedWindow.RotatorViewController({models:this.models,appContext:this.appContext,context:this});this.addViewController({viewController:this.rotator,target:this.LPViewMap.rotatorArea})}}function V(a,b){var c=this.appContext.conf.windowConf.readNotificationsType?this.appContext.conf.windowConf.readNotificationsType:this.LPReadNotificationsTypes.text.value,d=this.translate(this.LINE_STATE_TRANSLATE_PREFIX+a.state),e=d;this.lineStateSupported&&(e=this.getLineStateText(c,a));if(a.state===this.messageStates.ERROR){b.innerHTML="";if(a.type!==lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING&&this.LPReadNotificationsTypes.visual.value!==c){e=X.call(this,a)||e;var f=Y.call(this,a);this.createView({template:f,target:b,textInjection:{wrapperClass:this.LPClassMap.transcriptError,text:e,url:this.errorIconURL,id:a.localId,error:this.translate("errorIconAltText")}})}if(a.type===lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING){e=this.getLineStateText(this.LPReadNotificationsTypes.visual.value,a);this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DONE_UPLOADED+":"+a.localId,data:{showLoader:!1,error:!0,canRetry:a.canRetry}});b.innerHTML=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(e).cleanText||"";b.title=e?d:""}if(this.LPReadNotificationsTypes.visual.value===c){
b.innerHTML=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(e).cleanText||"";b.title=e?d:""}}else{b.innerHTML=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(e).cleanText||"";b.title=e?d:""}}function W(a,b,c,d){var e=b&&b.childNodes||[],f=e.length>0?e[e.length-1]:{},g=c.replace(/&nbsp;/g," ");d&&(g=g.replace(" - ",""));f.textContent=g||"";b&&("visitor"===a.source?b.title=this.getModelParam(this.chatPath.VISITOR_NAME)+g:b.title=a.by+g)}function X(a){switch(a.type){case lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING:return a.canRetry?this.translate("messagingState_image_RETRY"):this.translate("messagingState_image_ERROR")}}function Y(a){switch(a.type){case lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING:return this.chatLineErrorStateNoIcon;default:return this.chatLineErrorState}}function Z(){$.call(this);if(this.scrollOnMaximized){this.scrollOnMaximized=!1;k.call(this,0)}this.accessibilityMessages.length>0&&B.call(this)}function $(){var a=this.getModelParam(this.uiPath.WINDOW_MAXIMIZED),b=this.lastLineViewedOnMinimize,c=this.appContext.conf.unifiedConf.scrollChatWindowOnMaximize;if(a&&b&&c===this.ScrollChatWindowOnMaximizeOptions.toBottom){var d=this.getModelParam(this.uiPath.LAST_LINE_VIEWED)||{};d&&b.localId!==d.localId&&k.call(this)}this.lastLineViewedOnMinimize={}}function _(){var a=this.getFirstElement(this.LPViewMap.a11yMessagesHidden,this.view);this.lastLineViewedOnMinimize=this.getModelParam(this.uiPath.LAST_LINE_VIEWED)||{};this.accessibilityMessages.length=0;a.innerHTML=""}function aa(){var a=this.getModelParam(this.uiPath.WINDOW_MAXIMIZED);this.scrollOnMaximized=!a}function ba(a,b,c){var d=a.getBoundingClientRect(),e=b.getBoundingClientRect();return Math.abs(d.top-e.top)<=c}function ca(){if(!this.isHistoryLazyLoadEnabled&&this.historyRequested){fa&&clearTimeout(fa);this.appContext.events.trigger({appName:"tooltip",eventName:"close"});this.historyRequested=!1;this.allHistoryLoaded=!0}}function da(){this.setTabindexToEdgeLine("last",!0)}var ea,fa,ga,ha,ia=300,ja=50,ka=3e3;lpTag.unifiedWindow.TranscriptViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"TranscriptViewController",applicationType:"TranscriptViewController",template:"<div class='lp_lpview_widgetContent transcript_scroll lpc_layout lpc_layout_maximized {{deviceClass}}' data-lp-cust-id='transcriptArea'><div class='a11y-hidden' data-lp-point='a11y_queue_area'></div><div class='a11y-hidden' data-lp-point='a11y_live_area'></div><div class='a11y-hidden' data-lp-point='a11y_messages_live_area'></div><div class='lpc_banner-image-area lpc_banner-image-area_maximized {{deviceClass}}' data-lp-point='logo_area'></div><div class='lpc_hero-image-area lpc_hero-image-area_maximized {{deviceClass}}' data-lp-point='agent_image_area'></div><div class='lpc_history-button lpc_history-button_maximized {{deviceClass}}' data-lp-point='history_button_area'></div><div class='lpc_history-spinner lpc_history-spinner_maximized {{deviceClass}}' data-lp-point='rotator_area'></div><div class='lp_transcript_divider lpc_transcript-divider lpc_transcript-divider_maximized {{deviceClass}}' data-lp-point='transcript_divider_area'></div><div class='lpc_transcript_region {{deviceClass}}'><div class='lpc_transcript lpc_transcript_maximized {{deviceClass}}' data-lp-point='lines_area' role='log'></div></div></div>",className:"lp_transcript_widget",scrollToBottomTimeout:300,removeAccessibilityAttrsTimeout:1e3,STATE_CLASS_PREFIX_REGEX:/state_[\w]+/gi,LINE_ID_PREFIX:"lp_line_",LINE_CLASS_PREFIX:"state_",LINE_STATE_TRANSLATE_PREFIX:"messagingState_",DEFAULT_AGENT_IMAGE:"agent1.png",LE_LEGACY_AGENT_URL_PREFIX:"/img/engagementWindow",messageStates:lpTag.unifiedWindow.MessageState,uiPath:lpTag.unifiedWindow.uiModelPath,chatLineErrorState:"<div class='{{wrapperClass}}wrapper'><span id='error_message_{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' role='alert'>{{text}}</span> <span class='lp_warning'>!<span class='lp_voice_error'>{{error}}</span></span></div>",chatLineErrorStateNoIcon:"<div class='{{wrapperClass}}wrapper'><span id='error_message_{{id}}' class='lp_error_text lp_text lp_rtl' data-lp-point='errorText' role='alert'>{{text}}</span></div>",updatePendingStateTimeOut:2e3,scrollOnMaximized:!1,util:lpTag.taglets.lpUtil,LPViewMap:{widgetContent:".lp_lpview_widgetContent",linesArea:"^lines_area",element:".lp_lpview_agent_is_typing",lineState:"^lp_line_state",agentImage:".lp_agent_image_area_wrapper",lineWrapper:".lp_chat_line_wrapper",logoArea:"^logo_area",agentImageArea:"^agent_image_area",historyButtonArea:"^history_button_area",rotatorArea:"^rotator_area",time:".lp_time",dateLine:".lp_chat_line_date_message",a11yHidden:"^a11y_live_area",a11yQueueArea:"^a11y_queue_area",a11yMessagesHidden:"^a11y_messages_live_area"},LPClassMap:{transcriptError:"lp_TranscriptError_"},ScrollChatWindowOnMaximizeOptions:{toBottom:"toBottom",toLastPosition:"toLastPosition"},DateLineState:{},initialize:function(b){this.appContext=b.appContext;this.models=b.models;this.imagesRepository=this.appContext.conf.unifiedConf.imagesRepository;this.errorIconURL=this.imagesRepository+"/error-15x15.png";this.isAsync=this.appContext.conf.engConf.async;this.browserStateManager=this.appContext.browserStateManager;this.windowConf=this.appContext.conf.windowConf;this.addAgentImage=this.windowConf.agentImage!==!1;this.addLogo=this.windowConf&&!this.windowConf.logoPinToTop;this.addRotator=this.isAsync;this.lineStateSupported=b.appContext.conf.engConf.async;this.lastLineViewedOnMinimize={};this.featureStateManager=this.appContext.featureStateManager;this.isLineGroupingEnabled=this.featureStateManager.isLineGroupingEnabled();this.isHistoryLazyLoadEnabled=this.featureStateManager.isHistoryLazyLoadEnabled();this.lastConvId=null;this.createLineTypeFactories();this.lastLine=null;this.lastLineHistory=null;this.groupingTime=null;this.groupingTimeHistory=null;this.lastFirstDateLine=null;this.accessibilityMessages=[];this.isPendingLineSet=!1;this.linesEl=this.getFirstElement(this.LPViewMap.linesArea);this.a11yQueue=this.getFirstElement(this.LPViewMap.a11yQueueArea);this.hide();ga=a.bind(this)},events:function(){this.appContext.deviceDetector.isDesktop()?this.preventScroll({view:this.view.parentNode}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.view.parentNode});this.isAsync&&this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.chat.CONVERSATION_CLOSED,func:O.bind(this)});this.bindModel({path:this.chatPath.LINES,callback:o.bind(this)});this.browserStateManager.on(this.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,l,this);this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:Z});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MINIMIZE_VISIBLE,context:this,func:_});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.LINES_VIEWED,context:this,func:aa});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.UPDATE_TIME_STAMP,context:this,func:z});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.SCROLL_CONVERSATION_TO_BOTTOM,context:this,func:this._fastScrollToBottom});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.UPDATE_ACCESSIBILITY_MESSAGE,context:this,func:A});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.RICH_CONTENT,eventName:this.EventName.richContent.UPDATE_RICH_CONTENT_LINE,context:this,func:d});this.appContext.events.bind({appName:"*",eventName:"pendingLineSet",context:this,func:J});this.appContext.events.bind({appName:"*",eventName:"focusLastLine",context:this,func:da});this.isAsync&&this.browserStateManager.on(this.browserStateManager.EVENT_NAME.FOCUS_CHANGE,l,this);if(!this.isHistoryLazyLoadEnabled&&!this.view.parentNode.scrollerAdded){this.scrollListener=this._scrollListenerToLoadHistory.bind(this);this.view.parentNode.addEventListener("scroll",this.scrollListener,!1);this.appContext.events.bind({appName:"*",eventName:this.VCEvents.END_OF_HISTORY,context:this,func:ca});this.view.parentNode.scrollerAdded=!0}this.view.addEventListener("keyup",ga,!1)},render:function(){P.call(this);Q.call(this,this.windowConf.agentImage,this.windowConf.agentUrl);T.call(this);U.call(this)}});ea=lpTag.unifiedWindow.TranscriptViewController.prototype;ea.createLineTypeFactories=function(){this.chatLineFactory=new lpTag.unifiedWindow.ChatLineViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.autoMessageFactory=new lpTag.unifiedWindow.AutoMessageViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.secureFormLineFactory=new lpTag.unifiedWindow.SecureFormLineViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.richContentFactory=new lpTag.unifiedWindow.RichContentViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.quickRepliesDecorator=new lpTag.unifiedWindow.QuickRepliesDecorator({appContext:this.appContext});this.fileContentFactory=new lpTag.unifiedWindow.FileSharingViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.dateLineFactory=new lpTag.unifiedWindow.DateLineViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.mavenPayLineFactory=new lpTag.unifiedWindow.MavenPayLineViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1})};ea.addEvent=function(a,b,c){if(c.template){var d=document.createElement("div");d.innerHTML=c.template;c.view=d}var j=c.line.isWelcomeMessage&&"agent"===c.line.source;if(h.call(this,c.line)||j)if(j&&c.line.quickReplies){var l=c.line.quickReplies.accessibility||{};c.line.quickReplies.accessibility=Object.assign(l,{web:{role:"alert","aria-live":"polite"}});(this.appContext.deviceDetector.isMacOS()||this.appContext.deviceDetector.isIOS())&&i.call(this,c)}else i.call(this,c);this.getModelParam(this.uiPath.WINDOW_MAXIMIZED)||this.accessibilityMessages.push(c);var m=document.createDocumentFragment();m.appendChild(c.view);c.replace&&c.targetToReplace?e.call(this,m,c.targetToReplace):g.call(this,m,a);a||setTimeout(function(){k.call(this)}.bind(this));this.timeStampGroupingEnabled&&f.call(this,c.view);a?this.keepPreviousFocus():this.setTabindexToEdgeLine("last")};ea.keepPreviousFocus=function(){var a=this.linesEl.children;if(ha>=0){a[a.length-ha].setAttribute("tabindex",0);a[a.length-ha].focus()}};ea.setTabindexToEdgeLine=function(a,b){for(var c,d=this.linesEl.children,e=0;e<d.length;e++)d[e].removeAttribute("tabindex");if(d.length>0){"first"===a&&(c=0);"last"===a&&(c=d.length-1);if(d[c].classList.contains("chips-wrapper")){var f=d[c].querySelector(".chips-item");if(f&&b){f.setAttribute("tabindex",0);f.focus();return}}else d[c].setAttribute("tabindex",0);b&&d[c].focus()}};ea._scrollListenerToLoadHistory=b(ia,c);ea.triggerLoadFromHistory=function(a){this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.CONVERSATIONS_VIEWED,data:{retry:!1,preventRotator:a}})};ea.getWidgetContent=function(){this.widgetContent||(this.widgetContent=this.getFirstElement(this.LPViewMap.widgetContent));return this.widgetContent};ea.scrollToBottom=k;ea._fastScrollToBottom=function(){this.scrollToBottom(0)};ea.dispose=function(){this.browserStateManager.off(this.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,l);this.isAsync&&this.browserStateManager.off(this.browserStateManager.EVENT_NAME.FOCUS_CHANGE,l);this.richContentFactory&&this.richContentFactory.dispose();this.quickRepliesDecorator&&this.quickRepliesDecorator.dispose();this.fileContentFactory&&this.fileContentFactory.dispose();this.historyButton&&this.historyButton.dispose();this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:Z});this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.MINIMIZE_VISIBLE,context:this,func:_});this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.LINES_VIEWED,context:this,func:aa});this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.UPDATE_TIME_STAMP,context:this,func:z});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.RICH_CONTENT,eventName:this.EventName.richContent.UPDATE_RICH_CONTENT_LINE,context:this,func:e});this.appContext.events.unbind({appName:"*",eventName:"pendingLineSet",context:this,func:J});this.view.removeEventListener("keyup",ga,!1);this.isHistoryLazyLoadEnabled||this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.END_OF_HISTORY,context:this,func:ca});if(this.view.parentNode.scrollerAdded){this.view.parentNode.removeEventListener("scroll",this.scrollListener,!1);this.view.parentNode.scrollerAdded=!1}lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){this.fileAttachment.setAttribute("aria-label",this.translate("AddAttachmentAction"));var a=document.createElement("input");a.id="LPfileUpload_"+Date.now();a.type="file";a.setAttribute("accept",this.ALLOWED_EXTENSIONS);a.setAttribute("class","lp_file_input");a.style.display="none";a.onchange=b.bind(this);this.fileAttachment.appendChild(a);this.fileUploader=a;this.bindViewEvent({selector:this.LPViewMap.fileAttachment,callback:function(){this.fileUploader.click()},DOMEvent:"click"})}function b(){if(this.fileUploader.files.length>0){this.currentImage=this.fileUploader.files[0];this.fileUploader.value="";if(this.currentImage){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,data:{image:this.currentImage}});this.currentImage=null}}}function c(){clearTimeout(this.visitorTypingTimeoutRef);this.visitorTypingTimeoutRef=setTimeout(this.setTypingState.bind(this,!1),this.visitorTypingTimeout)}function d(){var a=this.getModelParam(this.uiPath.STATE),b=a===lpTag.unifiedWindow.State.CHATTING,c=this.appContext.conf.engConf.async&&a!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&a!==lpTag.unifiedWindow.State.PENDING;"boolean"==typeof U&&(c=c&&!U);return c||b}function e(a){var b=a.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/),c=parseInt(b[1],10),d=parseInt(b[2],10),e=parseInt(b[3],10),f=(299*c+587*d+114*e)/1e3;return 40>f?!0:!1}function f(a){if(this.appContext.deviceDetector.isDesktop()){var b=this.getFirstElement(this.LPViewMap.bottomArea),c=getComputedStyle(b).backgroundColor,d=e(c);if(a){d?a.style.setProperty("background-color","rgba(255,255,255,0.3)","important"):a.style.setProperty("background-color","rgba(0,0,0,0.3)","important");a.onmouseleave=function(){a.style.backgroundColor="transparent"}}}}function g(){var a=this.getFirstElement(this.LPViewMap.actionsButton);f.call(this,a)}function h(){var a=this.getFirstElement(this.LPViewMap.emojiButton);f.call(this,a)}function i(){var a=this.getFirstElement(this.LPViewMap.sendButton);f.call(this,a)}function j(){var a=this.getFirstElement(this.LPViewMap.paperPlaneButton);f.call(this,a)}function k(){var a=this.getFirstElement(this.LPViewMap.fileAttachment);f.call(this,a)}function l(){var a=this.getModelParam(this.uiPath.EMOJI_VISIBLE),b=this.getFirstElement(this.LPViewMap.emojiBarContainer);if(a){this.hide(b);this.appContext.uiStateManager.setVisibility(this.uiPath.EMOJI_VISIBLE,!1)}this.appContext.uiStateManager.setVisibility(this.uiPath.ACTIONS_VISIBLE,!this.getModelParam(this.uiPath.ACTIONS_VISIBLE));var c=(this.getModelParam(this.uiPath.ACTIONS_VISIBLE),this.getFirstElement(this.LPViewMap.actionsBar).querySelectorAll("button"));Array.prototype.filter.call(c,function(a){return!a.disabled})}function m(){var a=this.getModelParam(this.uiPath.ACTIONS_VISIBLE),b=this.getModelParam(this.uiPath.EMOJI_VISIBLE);a&&this.appContext.uiStateManager.setVisibility(this.uiPath.ACTIONS_VISIBLE,!1);this.appContext.uiStateManager.setVisibility(this.uiPath.EMOJI_VISIBLE,!this.getModelParam(this.uiPath.EMOJI_VISIBLE));var c=this.getFirstElement(this.LPViewMap.emojiButton);b?c.setAttribute("aria-expanded",!1):c.setAttribute("aria-expanded",!0)}function n(){var a=this.getFirstElement(this.LPViewMap.actionsButton);this.appContext.uiStateManager.setActionsVisibility(!1);a.setAttribute("aria-expanded",!1)}function o(a,b){var c=p.call(this),d=this.getFirstElement(this.LPViewMap.actionsBarContainer),e=this.getFirstElement(this.LPViewMap.emojiBarContainer);if(this.transcriptWasShown){this.inProcess=!0;this.actions.isVisible[a]=b.newValue;var f=b.newValue||this.isActionBarVisible();f&&("ACTION"===a?this.show(d):this.show(e));c?q.call(this):this.appContext.events.trigger({appName:"*",eventName:this.EventName.uiState.ACTIONS_TOGGLE,data:{visible:f}});t.call(this,f,a)}}function p(){return"undefined"==typeof this.inProcess}function q(){var a=this.getFirstElement(this.LPViewMap.emojiBarContainer),b=this.getFirstElement(this.LPViewMap.actionsBarContainer),c=this.isActionBarVisible();if(!c){this.hide(b);this.hide(a)}this.inProcess=!1;this.textareaDomEl&&this.textareaDomEl.clientHeight&&F.call(this,this.textareaDomEl.clientHeight);this.appContext.events.trigger({appName:"*",eventName:this.EventName.uiState.ACTIONS_TOGGLE,data:{visible:c}});b.setAttribute("aria-hidden",(!c).toString());a.setAttribute("aria-hidden",(!c).toString())}function r(a){var b=this.getFirstElement(this.LPViewMap.emojiButton),c=this.emojiIconStyle.classes?this.emojiIconStyle.classes:[];if(a){this.show(b);W.addClassByArray(b,c)}else this.hide(b)}function s(a){var b=this.getFirstElement(this.LPViewMap.sendButton),c=this.getFirstElement(this.LPViewMap.paperPlaneButton);if(a===this.BUTTON_TYPES.PAPER_PLANE){this.hide(b);this.show(c)}else{this.hide(c);this.show(b)}}function t(a,b){var c=this.getFirstElement(this.LPViewMap.actionsButton);if(a&&b===this.actions.TYPE.ACTION_MENU){this.removeClass(this.actionsButtonImage,this.LPClassesMap.actionsClosedIcon);this.addClass(this.actionsButtonImage,this.LPClassesMap.actionsOpenedIcon);c.setAttribute("aria-expanded","true");c.setAttribute("aria-label",this.translate("tooltip_CollapseActionMenu"))}else{this.removeClass(this.actionsButtonImage,this.LPClassesMap.actionsOpenedIcon);this.addClass(this.actionsButtonImage,this.LPClassesMap.actionsClosedIcon);c.setAttribute("aria-label",this.translate("tooltip_ExpandActionMenu"));c.setAttribute("aria-expanded","false")}}function u(a){var b={text:this.textarea.getValue()};b.text=this.trim(b.text);this.textarea.setValue("");a&&this.textarea.lpFocus();return b}function v(a){if(this.productDetailsVc.isActive()){w.call(this,a);this.productDetailsVc.close()}else{if(a&&a.text&&this.isMessaging&&!this.appContext.transcriptManager.currentConversationActive()){a.text=lpTag.HtmlSanitizerUtils.sanitizeAndCleanHtml(a.text);a.text=a.text.replace(/\&amp;/g,"&");a.text=a.text.replace(/\&lt;/g,"<");a.text=a.text.replace(/\&gt;/g,">")}if(a.text&&""!==a.text){a.text=x.call(this,a.text);this.appContext.transcriptManager.sendLine(a);this.setTypingState(!1)}if(this.actionsBarVc.getActiveMenu()===this.actionsBarVc.ActionType.EMOJI){this.actionsBarVc.hideActionBar();this.getFirstElement(this.LPViewMap.emojiButton).setAttribute("aria-expanded",!1)}}}function w(a){if(this.productDetailsVc&&this.productDetailsVc.isActive){var b=this.productDetailsVc.generateStructuredContent(a);this.appContext.transcriptManager.sendStructeredContentLine(b,this,function(){},a)}}function x(a){var b;if(C()){b=lpTag.taglets.cleanCCPatterns.clean(a);if(b!==a){a=b;y.call(this)}}return a}function y(){this.appContext.events.trigger({appName:"tooltip",eventName:"show",data:{text:this.translate("tooltip_AutoBlockCreditCardPatternsMessage"),tooltipTimeout:this.TOOLTIP_TIMEOUT}});z.call(this)}function z(){this.appContext.deviceDetector.isIOS()&&this.textareaDomEl.blur()}function A(a){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.VISITOR_HAS_TYPED,data:{typing:a&&document.activeElement===this.textareaDomEl}})}function B(a){if(a){var b=""===this.agentTyping.textContent,c=this.translate("agentIsTypingText");b&&(this.agentTyping.textContent="");b&&(this.agentTyping.textContent=c)}else this.agentTyping.textContent=""}function C(){return lpTag.taglets&&lpTag.taglets.cleanCCPatterns}function D(a){return"which"in a?a.which:a.keyCode}function E(a){return!/^\s*$/.test(a)}function F(a,b){a=a||0;this.view.style.height=a+"px";this.onResize&&this.onResizeContext&&this.onResize.call(this.onResizeContext,{bottomAreaSize:a+I.call(this)+G.call(this),actionsAreaSize:H.call(this)})}function G(){var a=this.getFirstElement(this.LPViewMap.productDetailsAreaWrapper),b=0;a&&this.productDetailsVc&&this.productDetailsVc.isActive()&&(b=a.clientHeight);return b}function H(){var a=this.getFirstElement(this.LPViewMap.actionsBarContainer),b=0;a&&this.isActionBarVisible()&&(b=a.clientHeight);return b}function I(){var a=this.getFirstElement(this.LPViewMap.inputContainer),b=0,c=0,d=0;if(a){c=this.getComputedStyle(a,"paddingTop");d=this.getComputedStyle(a,"paddingBottom");b=parseInt(c,10)+parseInt(d,10)}return b}function J(){var a=this.isActionBarVisible();a||this.appContext.events.trigger({appName:"*",eventName:"adjust_styles",data:{}})}function K(){this.appContext.events.trigger({appName:"*",eventName:"remove_styles",data:{}})}function L(){if(this.isInitialFocus)this.isInitialFocus=!1;else{X=!0;M.call(this)}}function M(){X=!0;T&&clearTimeout(T);this.appContext.events.trigger({appName:"*",eventName:"keyboard_visible",data:{}})}function N(){X=!1;T&&clearTimeout(T);T=setTimeout(function(){this.appContext&&this.appContext.events.trigger({appName:"*",eventName:"reset_window",data:{}})}.bind(this),150)}function O(){this.unbindViewEvent({selector:this.LPViewMap.input,DOMEvent:(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.appContext.deviceDetector.isIOS()?"touchend":"click",callback:this.browserNotificationsManager.requestPermission.bind(this,O),context:this})}function P(){var a=this.getFirstElement(this.LPViewMap.input);a&&a.blur()}function Q(){R.call(this,this.productDetailsVc.productDetailsArea);F.call(this,this.textareaDomEl.clientHeight)}function R(a){var b=this.getFirstElement(this.LPViewMap.bottomArea);a&&(b.style.paddingTop=a.clientHeight+"px")}var S,T,U,V,W=lpTag.unifiedWindow.applicationUtils,X=!1;lpTag.unifiedWindow.ChatViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ChatViewController",applicationType:"ChatViewController",template:"<div class='lpview_bottom_container'><div class='lp_lpview_agent_is_typing lp_agent_is_typing lpc_typing-indication lpc_typing-indication_agent {{deviceClass}}' data-lp-point='agent_is_typing' aria-live='polite'></div><div class='lp_bottom_area' data-lp-cust-id='input' data-lp-point='bottom_area'><div class='lp_product_details_area_wrapper' data-lp-point='product_details_area_wrapper'></div><button class='lp_actions_button lpc_composer__menu-button {{deviceClass}}' data-lp-point='actions_button' data-lp-cust-id='actions_button' type='button'><span data-lp-point='actions_button_image' data-lp-type='icon' class='lp_actions-closed-icon'><img class='lpc_composer__menu-button-asset {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='' aria-hidden='true'></span></button> <button class='lp_file_button lpc_composer__file-attachment-button {{deviceClass}}' data-lp-point='file_button' aria-label='{{AddAttachmentAction}}'><span class='lp_file-icon' data-lp-type='icon' data-lp-point='file_input_image'><svg class='lpc_composer__file-attachment-button-asset {{deviceClass}}' width='20' height='20' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><path d='M9.00364374,0.931666646 C10.9714618,0.931666646 12.5787125,2.47543931 12.6803584,4.41794732 L12.6854619,4.61348483 L12.6854619,5.4741915 L12.6854619,13.9847117 C12.6854619,15.1394889 11.74933,16.0756208 10.5945528,16.0756208 C9.43977563,16.0756208 8.50364374,15.1394889 8.50364374,13.9847117 L8.50364374,5.17234491 C8.50364374,4.89620254 8.72750137,4.67234491 9.00364374,4.67234491 C9.27978612,4.67234491 9.50364374,4.89620254 9.50364374,5.17234491 L9.50364374,13.9847117 C9.50364374,14.5872042 9.99206038,15.0756208 10.5945528,15.0756208 C11.1970453,15.0756208 11.6854619,14.5872042 11.6854619,13.9847117 L11.6854619,5.4741915 L11.6854619,4.61348483 C11.6854619,3.13235754 10.484771,1.93166665 9.00364374,1.93166665 C7.57948289,1.93166665 6.41460124,3.04177288 6.32710171,4.44388242 L6.32182556,4.61348483 L6.32182556,14.2119845 C6.32182556,16.6972658 8.33654419,18.7119845 10.8218256,18.7119845 C13.2360989,18.7119845 15.2063146,16.810748 15.3169276,14.4238202 L15.3218256,14.2119845 L15.3218256,11.0029779 C15.3218256,10.7268355 15.5456832,10.5029779 15.8218256,10.5029779 C16.0672854,10.5029779 16.2714339,10.6798531 16.3137699,10.9131023 L16.3218256,11.0029779 L16.3218256,14.2119845 C16.3218256,17.2495506 13.8593917,19.7119845 10.8218256,19.7119845 C7.85834641,19.7119845 5.44228642,17.3682045 5.32619276,14.4331916 L5.32182556,14.2119845 L5.32182556,4.61348483 C5.32182556,2.58007279 6.97023171,0.931666646 9.00364374,0.931666646 Z' fill='#848586' transform='translate(10.821826, 10.321826) rotate(45.000000) translate(-10.821826, -10.321826) '></path></g></svg></span></button><div data-lp-point='actionsBar_placeholder_wrapper'></div><div class='lp_input_area lpc_composer__text-area-wrapper {{deviceClass}}' data-lp-point='input_container'></div><button class='lp_emoji_button lpc_composer__emoji-button {{deviceClass}}' data-lp-point='emoji_button' aria-label='{{tooltip_EmojiIcon}}' aria-expanded='false'><span data-lp-point='emoji_button_image' data-lp-type='icon' class='lp_actions-emoji-icon'><svg class='lpc_composer__emoji-button-asset {{deviceClass}}' xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none'><path d='M10 1C15 1 19 5 19 10 19 15 15 19 10 19 5 19 1 15 1 10 1 5 5 1 10 1ZM10 2C5.6 2 2 5.6 2 10 2 14.4 5.6 18 10 18 14.4 18 18 14.4 18 10 18 5.6 14.4 2 10 2ZM13.5 11.6L14.3 12C13.5 13.8 11.8 15 10 15 8.3 15 6.7 13.9 5.8 12.3L5.7 12 6.5 11.6C7.2 13.2 8.6 14.1 10 14.1 11.5 14.1 12.8 13.2 13.5 11.6ZM13.4 8.2L13.4 9.5 12 9.5 12 8.2 13.4 8.2ZM8 8.2L8 9.5 6.6 9.5 6.6 8.2 8 8.2Z' fill='#65686E'/></g></svg></span></button><div data-lp-point='emojiBar_placeholder_wrapper'></div><button class='lp_paper_plane_button lpc_composer__send-button {{deviceClass}}' data-lp-point='paper_plane_button' aria-label='{{tooltip_SendIcon}}'><span class='lp_paper_plane-icon' data-lp-type='icon' data-lp-point='paper_plane_button_image'><svg class='lpc_composer__send-button-asset {{deviceClass}}' width='22px' height='22px' viewBox='0 0 22 22' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g id='ic-light-send' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><polygon id='Fill-7' points='0 22 22 22 22 0 0 0'></polygon><path d='M19,2.19367271 L19,16.7718891 C19,17.2774929 18.4775539,17.6127908 18.0199381,17.4008778 L12.8802219,15.0207741 L8.7725359,19.2871113 C8.34107114,19.7352405 7.58518171,19.4288503 7.58518171,18.8058322 L7.58518171,12.3866797 L2.47708231,10.7201639 C1.89021237,10.5286977 1.82926232,9.72006391 2.38076107,9.44225506 L17.9994769,1.57457178 C18.4587316,1.34322941 19,1.67815395 19,2.19367271 Z M18,2.74685062 L3.62657435,9.98723848 L8.58518171,11.6049826 L8.58518171,17.9985142 L12.6621183,13.7641141 L18,16.2359844 L18,2.74685062 Z M15.4797336,5.51684905 L15.4830453,5.52055333 L15.8984138,5.9969535 C15.9697315,6.07875015 15.9628055,6.20249688 15.8828058,6.27582452 L11.1229586,10.6386934 C11.041532,10.7133288 10.9150188,10.7078236 10.8403833,10.626397 C10.8392641,10.625176 10.8381602,10.6239411 10.8370717,10.6226927 L10.4217031,10.1462925 C10.3503855,10.0644959 10.3573114,9.94074917 10.4373111,9.86742153 L15.1971583,5.50455268 C15.2785849,5.42991722 15.4050982,5.43542249 15.4797336,5.51684905 Z' fill='#000000'></path></g></svg></span></button> <button class='lp_send_button lpc_composer__send-button {{deviceClass}}' data-lp-point='send_button' aria-label='{{tooltip_SendIcon}}'><span class='lp_send-icon' data-lp-type='icon' data-lp-point='send_button_image'><img class='lpc_composer__send-button-asset {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt=''></span></button></div></div>",type:"html",dialogDisplayed:!1,visitorTypingTimeoutRef:null,visitorTypingTimeout:1e4,TOOLTIP_TIMEOUT:1e4,VISITOR_TYPING_TIMEOUT_MIN:5e3,actionVisibleAnimationTime:300,lineTemplateFile:{visitor:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{stateClass}} lpc_message-area lpc_message-area_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitor_parent' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lpc_message lpc_message_{{source}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_visitor' role='listitem'><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitorArrowBorder' aria-hidden='true'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitorArrow' aria-hidden='true'></div><div class='lp_line_state_wrapper'><span class='lp_title_text lpc_message__text lpc_message__text_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitor_text'>{{text}}</span> <span title='{{stateToolTip}}' data-lp-point='lp_line_state' data-lp-cust-id='transcript_time' class='lpc_message-area__indicator lpc_message-area__indicator_{{source}} {{deviceClass}} lp_line_state'>{{state}}</span></div><div class='lp_time_side_wrapper'><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time' aria-hidden='true'>{{sideTime}}</div></div></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}} lpHide' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",agent:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agent_parent' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='' aria-hidden='true' role='listitem'><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lpc_message lpc_message_{{source}} lpc_message_{{avatarCustomModifier}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_agent' role='listitem'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agent_text'>{{text}}</div></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} lpc_message-tail__border_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agentArrowBorder' role='listitem' aria-hidden='true'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} lpc_message-tail_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agentArrow' role='listitem' aria-hidden='true'></div><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time' role='listitem' aria-hidden='true'>{{sideTime}}</div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",
system:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} lpc_message-area lpc_message-area_{{source}} {{deviceClass}}' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem' aria-hidden='true'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div class='lp_chat_line lpc_message lpc_message_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_message' role='listitem'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_message'>{{text}}</div></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} {{deviceClass}}' aria-hidden='true' role='listitem' aria-hidden='true'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} {{deviceClass}}' aria-hidden='true' role='listitem' aria-hidden='true'></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}} lpHide' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>"},LPViewMap:{sendButton:"^send_button",sendButtonImage:"^send_button_image",paperPlaneButton:"^paper_plane_button",paperPlaneButtonImage:"^paper_plane_button_image",input:"^chat_input",inputContainer:"^input_container",lineText:".lp_title_text",chatViewContainer:".lpview_bottom_container",actionsBarPlaceholderWrapper:"^actionsBar_placeholder_wrapper",emojiBarPlaceholderWrapper:"^emojiBar_placeholder_wrapper",agentIsTyping:"^agent_is_typing",actionsButtonImage:"^actions_button_image",actionsButton:"^actions_button",actionsBarContainer:"^actions_bar_container",fileAttachment:"^file_button",emojiButton:"^emoji_button",emojiBar:"^emoji_bar",actionMenuButton:".lpc_maximized-header__menu-button",actionsBar:"^actions_bar",emojiBarContainer:"^emoji_bar_container",bottomArea:"^bottom_area",transcriptPossibleMessages:"#a11y-transcriptPossibleMessages",mainWindow:"^maximized",productDetailsAreaWrapper:"^product_details_area_wrapper"},LPClassesMap:{actionsVisibility:"lp_actions_visible",noAnimation:"lp_no-animation",actionsClosedIcon:"lp_actions-closed-icon",actionsOpenedIcon:"lp_actions-opened-icon",textAreaClass:"lp_expandable_textarea",emojiSupportedClass:"lp_emoji_supported",attachmentIconClass:"lp_attachment_icon"},actions:{TYPE:{EMOJI_MENU:"EMOJI",ACTION_MENU:"ACTION"},isVisible:{EMOJI:!1,ACTION:!1}},menuLocationMap:{TOP:"top"},ALLOWED_EXTENSIONS:".png, .jpg, .gif, .pdf, .docx, .xlsx, .pptx",BUTTON_TYPES:{ARROW:"arrow",PAPER_PLANE:"paper_plane"},initialize:function(a){this.sliderAPI=a.sliderAPI;this.featureStateManager=this.appContext.featureStateManager;this.renderMap=this.featureStateManager.renderMap;this.isMessaging=!!this.appContext.conf.engConf.async;this.currentImage=null;this.span=1;this.models=a.models;this.transcriptWasShown=!1;this.isInitialFocus=!0;this.attachmentIconStyle=this.featureStateManager.getStyleConfig(this.renderMap.ATTACHMENT_ICON);this.emojiIconStyle=this.featureStateManager.getStyleConfig(this.renderMap.EMOJI_ICON);this.sendIconType=this.featureStateManager.getSendIconType();this.bottomAreaStyle=this.featureStateManager.getStyleConfig(this.renderMap.BOTTOM_AREA);this.actionsButtonStyle=this.featureStateManager.getStyleConfig(this.renderMap.ACTIONS_BUTTON);var b=this.appContext.conf;if(b&&b.unifiedConf&&b.unifiedConf.visitorTypingTimeoutSeconds){var c=parseInt(this.appContext.conf.unifiedConf.visitorTypingTimeoutSeconds,10);if(!isNaN(c)){var d=1e3*c;this.visitorTypingTimeout=d>=this.VISITOR_TYPING_TIMEOUT_MIN?d:this.VISITOR_TYPING_TIMEOUT_MIN}}b&&b.unifiedConf&&b.unifiedConf.areExtendedFileFormatsEnabled&&(this.ALLOWED_EXTENSIONS+=", .txt, .csv");if(a.resizeEvent){this.onResize=a.resizeEvent.onResize;this.onResizeContext=a.resizeEvent.onResizeContext;this.bindViewEvent({view:a.resizeEvent.transitionView,DOMEvent:"transition",callback:q,context:this})}this.browserNotificationsManager=this.appContext.browserNotificationsManager;this.textarea=new lpTag.unifiedWindow.ExpandableTextAreaViewController({appContext:this.appContext,targetView:this.getFirstElement(this.LPViewMap.inputContainer),minRows:1,maxRows:4,resizeCallback:F,context:this});this.textareaDomEl=this.textarea.textarea;V=!1;r.call(this,this.emojiIconStyle.value);s.call(this,this.sendIconType);this.sendIconTypeToUse=this.sendIconType===this.BUTTON_TYPES.PAPER_PLANE?this.LPViewMap.paperPlaneButton:this.LPViewMap.sendButton;this.sendIconImageTypeToUse=this.sendIconType===this.BUTTON_TYPES.PAPER_PLANE?this.LPViewMap.paperPlaneButtonImage:this.LPViewMap.sendButtonImage;var e=this.appContext.conf.unifiedConf;e.transcriptPossibleMessage=this.translate("transcriptPossibleMessages");this.actionsBarVc=new lpTag.unifiedWindow.ActionsBarViewController({textareaDomEl:this.textareaDomEl,models:this.models,appContext:this.appContext,textInjection:e,emojiEnabled:this.featureStateManager.emojiEnabled()});this.addViewController({viewController:this.actionsBarVc,target:this.LPViewMap.actionsBarPlaceholderWrapper});this.emojiBarVc=new lpTag.unifiedWindow.EmojiBarViewController({textareaDomEl:this.textareaDomEl,models:this.models,appContext:this.appContext,textInjection:e,emojiEnabled:this.featureStateManager.emojiEnabled()});this.addViewController({viewController:this.emojiBarVc,target:this.LPViewMap.emojiBarPlaceholderWrapper});var f=this.getFirstElement(this.LPViewMap.actionsBarContainer);this.actions.isVisible.ACTION=this.getModelParam(this.uiPath.ACTIONS_VISIBLE);this.actions.isVisible.EMOJI=this.getModelParam(this.uiPath.EMOJI_VISIBLE);f&&this.addClass(f,this.LPClassesMap.noAnimation,500);this.fileAttachment=this.getFirstElement(this.LPViewMap.fileAttachment);this.addClass(this.fileAttachment,"lpHide");this.productDetailsVc=new lpTag.unifiedWindow.ProductDetailsAreaViewController({appContext:this.appContext,targetView:this.getFirstElement(this.LPViewMap.productDetailsAreaWrapper),context:this,setPaddingCallback:R,setCallback:Q,textareaDomEl:this.textareaDomEl,product:{}});this.bottomArea=this.getFirstElement(this.LPViewMap.bottomArea);W.addClassByArray(this.bottomArea,this.bottomAreaStyle.classes);this.hide()},events:function(){this.bindViewEvent({selector:this.sendIconTypeToUse,callback:this.sendButtonClicked,DOMEvent:"click"});this.bindViewEvent({selector:this.sendIconTypeToUse,callback:this.sendButtonClicked,DOMEvent:this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet()&&"touchend"});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.CLOSE_ACTIONS,context:this,func:n});this.appContext.events.bind({appName:"actions",eventName:"close",func:n,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.EMOJI_FOCUS_ON_CLICK,func:this.focusOnChatInput,context:this});if(!this.appContext.deviceDetector.isDesktop()){this.appContext.events.bind({appName:"input",eventName:"focus",func:n,context:this});this.bindViewEvent({selector:this.LPViewMap.emojiButton,callback:this._closeActions,DOMEvent:"keydown",context:this});this.bindViewEvent({selector:this.LPViewMap.actionMenuButton,callback:this._closeEmojis,DOMEvent:"keydown",context:this})}this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:this.focusOnChatInput});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG,context:this,func:this.dialogOpen});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.dialogClose});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.POP_OUT,context:this,func:q});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.SEND_BUTTON,context:this,func:this.setSendButtonStateHandler});this.appContext.events.bind({appName:"*",eventName:"pendingLineSet",context:this,func:this.setPendingLineStatus});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.INPUT,context:this,func:this.setInputStateHandler});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.coBrowseEvents.DECLINE,context:this,func:this.handleCoBrowseClose});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.coBrowseEvents.CANCELED,context:this,func:this.handleCoBrowseClose});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputKeyPress,DOMEvent:"keypress",context:this});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputKeyUp,DOMEvent:"keyup",context:this});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputPaste,DOMEvent:"paste",context:this});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputBlur,DOMEvent:"blur",context:this});this.bindViewEvent({selector:this.sendIconTypeToUse,callback:this._setFocusToMainWindow,DOMEvent:"keydown",context:this});this.bindViewEvent({selector:this.input,callback:this._setInputA11yFocus,DOMEvent:"keyup",context:this});this.bindViewEvent({selector:this.input,callback:this._removeInputA11yFocus,DOMEvent:"keydown",context:this});if(this.emojiIconStyle.value){this.bindViewEvent({selector:this.LPViewMap.emojiButton,callback:this._setFocusToMainWindow,DOMEvent:"keydown",context:this});this.bindViewEvent({selector:this.LPViewMap.emojiBar,callback:this._handleEmojiBarFocus,DOMEvent:"keydown",context:this})}else this.bindViewEvent({selector:this.LPViewMap.input,callback:this._setFocusToMainWindow,DOMEvent:"keydown",context:this});this.bindViewEvent({view:window,callback:this.onBeforeUnload.bind(this),DOMEvent:"beforeunload",context:this});this.bindViewEvent({selector:this.LPViewMap.actionsBarContainer,callback:this._handleActionBarFocus,DOMEvent:"keydown",context:this});this.bindViewEvent({selector:this.LPViewMap.actionsButton,DOMEvent:"click",callback:l,context:this});this.bindViewEvent({selector:this.LPViewMap.emojiButton,DOMEvent:"click",callback:m,context:this});this.bindViewEvent({selector:this.LPViewMap.actionsButton,DOMEvent:"mouseover",callback:g,context:this});this.bindViewEvent({selector:this.LPViewMap.emojiButton,DOMEvent:"mouseover",callback:h,context:this});this.bindViewEvent({selector:this.LPViewMap.sendButton,DOMEvent:"mouseover",callback:i,context:this});this.bindViewEvent({selector:this.LPViewMap.paperPlaneButton,DOMEvent:"mouseover",callback:j,context:this});this.bindViewEvent({selector:this.LPViewMap.fileAttachment,DOMEvent:"mouseover",callback:k,context:this});this.appContext.deviceDetector.isAndroid()&&this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputFocus,DOMEvent:"focus"});if(this.appContext.deviceDetector.isIpadChrome()){this.bindViewEvent({selector:this.LPViewMap.input,callback:J,DOMEvent:"click"});this.bindViewEvent({selector:this.LPViewMap.input,callback:K,DOMEvent:"blur"})}this.bindModel({path:this.uiPath.ACTIONS_VISIBLE,callback:o.bind(this,this.actions.TYPE.ACTION_MENU)});this.featureStateManager.emojiEnabled()&&this.bindModel({path:this.uiPath.EMOJI_VISIBLE,callback:o.bind(this,this.actions.TYPE.EMOJI_MENU)});this.bindModel({path:this.uiPath.STATE,callback:this.stateChanged});this.bindModel({path:this.chatPath.AGENT_IS_TYPING,callback:this.agentIsTyping});this.bindModel({path:lpTag.unifiedWindow.chatModelPath.LINES,callback:this.onChatLines});this.appContext.deviceDetector.isDesktop()&&this.preventScroll({view:this.textareaDomEl});if(this.appContext.deviceDetector.isIOS()){this.limitScroll({view:this.textareaDomEl});window.addEventListener("orientationchange",P.bind(this),!1);this.bindViewEvent({selector:this.LPViewMap.input,callback:M,DOMEvent:"click"});this.bindViewEvent({selector:this.LPViewMap.input,callback:N,DOMEvent:"blur"});this.bindViewEvent({selector:this.LPViewMap.input,callback:L,DOMEvent:"focus"});this.bindViewEvent({selector:this.LPViewMap.paperPlaneButton,callback:M,DOMEvent:"click"});this.bindViewEvent({selector:this.LPViewMap.sendButton,callback:M,DOMEvent:"click"})}this.appContext.deviceDetector.isDesktop()||this.bindViewEvent({selector:this.LPViewMap.input,callback:this.setTypingState,DOMEvent:"input"});this.browserNotificationsManager.nativeEnabled&&!this.browserNotificationsManager.permissionDenied()&&this.appContext.deviceDetector.isMobile()&&this.bindViewEvent({selector:this.LPViewMap.input,DOMEvent:(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.appContext.deviceDetector.isIOS()?"touchend":"click",callback:this.browserNotificationsManager.requestPermission.bind(this,O),context:this})},render:function(){this.agentTyping=this.getFirstElement(this.LPViewMap.agentIsTyping);this.actionsButtonImage=this.getFirstElement(this.LPViewMap.actionsButtonImage);this.actionsButton=this.getFirstElement(this.LPViewMap.actionsButton);this.mainWindow=this.getFirstElement(this.LPViewMap.mainWindow);this.show();this.focusOnChatInput();if(this.attachmentIconStyle.value){a.call(this);this.removeClass(this.fileAttachment,"lpHide")}this.actionsButtonStyle.value||this.hide(this.actionsButton);R.call(this,this.getFirstElement(this.LPViewMap.productDetailsAreaWrapper))},_handleActionBarFocus:function(a){var b=D(a),c=this.getFirstElement(this.LPViewMap.actionsButton),d=this.getFirstElement(this.LPViewMap.actionsBarContainer).querySelector("li:first-child button:first-child"),e=this.getFirstElement(this.LPViewMap.actionsBarContainer).querySelectorAll(".lp_action_items_wrapper:last-child button:not([disabled])");e[e.length-1];if(9===b&&a.shiftKey&&document.activeElement===d){a.preventDefault();c.focus()}else if(27!==b);else{a.stopPropagation();this.appContext.uiStateManager.setVisibility(this.uiPath.ACTIONS_VISIBLE,!1);c.focus()}},_handleEmojiBarFocus:function(a){var b=D(a),c=this.getFirstElement(this.LPViewMap.emojiButton),d=this.getFirstElement(this.LPViewMap.emojiBar).querySelector("ul:first-child li:first-child button:first-child"),e=this.getFirstElement(this.LPViewMap.emojiBar).querySelector("ul:last-child li:last-child button:last-child"),f=this.getFirstElement(this.sendIconTypeToUse);if(9===b){if(a.shiftKey&&document.activeElement===d){a.preventDefault();c.focus();return}if(!a.shiftKey&&document.activeElement===e){a.preventDefault();f.disabled?this.getFocusableHeaderButton(this.getFirstElement(this.LPViewMap.mainWindow,document.body)).focus():f.focus();return}}if(27!==b);else{a.stopPropagation();this.appContext.uiStateManager.setVisibility(this.uiPath.EMOJI_VISIBLE,!1);c.setAttribute("aria-expanded",!1);c.focus()}},_setInputA11yFocus:function(a){var b=D(a);if(9===b){var c=document.activeElement,d=c.classList.contains("lpview_form_textarea");if(d){var e=c.parentNode.parentNode.parentNode.parentNode;e.style.borderTop="none";c.parentNode.parentNode.style.border="2px solid #3a61d4"}}},_removeInputA11yFocus:function(a){var b=D(a);if(9===b){var c=document.activeElement,d=c.classList.contains("lpview_form_textarea");d&&(c.parentNode.parentNode.style.border="none")}},_setFocusToMainWindow:function(a){var b=D(a);if(!a.shiftKey&&9===b){var c=this.getFirstElement(this.sendIconTypeToUse),d=this.getFirstElement(this.sendIconTypeToUse).disabled,e=this.getFirstElement(this.LPViewMap.emojiButton),f=this.getFirstElement(this.LPViewMap.input),g=this.getModelParam(this.uiPath.EMOJI_VISIBLE),h="none"==e.style.display,i=document.activeElement==f&&h&&!d&&this.isActionBarVisible(),j=document.activeElement==f&&h&&!d&&!this.isActionBarVisible();if(i||j)return;var k=document.activeElement==e&&!d&&this.isActionBarVisible(),l=document.activeElement==e&&!d&&!this.isActionBarVisible();if(k||l||g&&document.activeElement!==c)return;a.preventDefault();this.getFocusableHeaderButton(this.getFirstElement(this.LPViewMap.mainWindow,document.body)).focus()}}});S=lpTag.unifiedWindow.ChatViewController.prototype;S.dispose=function(){clearTimeout(this.visitorTypingTimeoutRef);this.appContext.events.unbind({appName:"actions",eventName:"close",func:n,context:this});this.appContext.deviceDetector.isDesktop()||this.appContext.events.unbind({appName:"input",eventName:"focus",func:n,context:this});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};S.stateChanged=function(a){var b=!!this.appContext.conf.engConf.async;if(a.newValue)switch(a.newValue){case lpTag.unifiedWindow.State.WAITING:this.setInputState(!0);this.setSendButtonState(b);q.call(this);break;case lpTag.unifiedWindow.State.CONNECTION_ISSUE:case lpTag.unifiedWindow.State.PENDING:this.setSendButtonState(!1);break;case lpTag.unifiedWindow.State.CHATTING:this.setTypingState(!1);this.setInputState(!0);this.setSendButtonState(!0);break;case lpTag.unifiedWindow.State.APP_ENDED:this.setInputState(!1);this.setSendButtonState(!1);q.call(this);break;default:this.setInputState(!0);this.setSendButtonState(!0)}};S.setSendButtonStateHandler=function(a){"boolean"==typeof a.enabled&&this.setSendButtonState.call(this,a.enabled)};S.setSendButtonState=function(a,b){var c=this.getModelParam(this.uiPath.STATE),d=this.getFirstElement(this.sendIconTypeToUse),e=this.getFirstElement(this.sendIconImageTypeToUse);b=b||this.getFirstElement(this.LPViewMap.input).value;if(a){"boolean"!=typeof V||V||c!==lpTag.unifiedWindow.State.CHATTING||(V=!0);if("boolean"==typeof U&&!V)return;this.removeClass(e,"lp_disabled")}else this.addClass(e,"lp_disabled");d.disabled=a&&E(b)?null:"disabled"};S.setInputStateHandler=function(a){"boolean"==typeof a.enabled&&this.setInputState.call(this,a.enabled)};S.setInputState=function(a){var b=this.getFirstElement(this.LPViewMap.input);if(a){this.alignInput();b.placeholder=this.translate("insertTextHere");b.disabled=null}else{b.value="";b.placeholder="";b.disabled="disabled"}};S.inputKeyPress=function(a){var b=D(a);if(13===b){if(d.call(this)){var c=u.call(this,!0);v.call(this,c);this.focusOnChatInput()}this.stopPropagation(a);this.preventDefault(a)}};S.alignInput=function(){this.applyDirOnElement(this.textareaDomEl,this.textarea.getValue())};S.inputFocus=function(){this.appContext.uiStateManager.setActionsVisibility(!1)};S.inputBlur=function(){A.call(this,!1);var a=this.getFirstElement(this.LPViewMap.input);a.parentNode.parentNode.style.border="none";this.setTypingState(!1)};S.inputKeyUp=function(){A.call(this,this.hasInputValue());d.call(this)&&this.setTypingState();this.alignInput()};S.inputPaste=function(){var a=this;setTimeout(function(){a.inputKeyUp()},0)};S.setTypingState=function(a){"boolean"!=typeof a&&(a=this.hasInputValue());a?c.call(this):clearTimeout(this.visitorTypingTimeoutRef);this.appContext.transcriptManager.setVisitorTyping(a);this.setSendButtonState(d.call(this),this.textarea.getValue())};S.hasInputValue=function(){var a=this.textarea.getValue();return"undefined"!=typeof a&&a.length>0};S.agentIsTyping=function(a){var b=a&&a.newValue;B.call(this,b)};S.sendButtonClicked=function(a){if(d.call(this)){this.textareaDomEl.blur();var b=u.call(this);v.call(this,b);var c=this.getFirstElement(this.sendIconTypeToUse);c&&c.disabled&&(c.style.backgroundColor="transparent");this.focusOnChatInput()}this.stopPropagation(a);this.preventDefault(a)};S.focusOnChatInput=function(){if(this.uiPath){var a,b=this.getModelParam(this.uiPath.STATE);if(this.isFocusInsideApp()&&!this.dialogDisplayed&&lpTag.unifiedWindow.State&&(b===lpTag.unifiedWindow.State.WAITING||b===lpTag.unifiedWindow.State.CHATTING||b===lpTag.unifiedWindow.State.APP_ENDED||b===lpTag.unifiedWindow.State.PENDING)){a=this.getFirstElement(this.LPViewMap.input);a&&a.focus()}}};S.closeActions=function(){n.call(this)};S.isActionBarVisible=function(){var a=!1;for(var b in this.actions.isVisible)if(this.actions.isVisible[b]){a=!0;break}return a};S.dialogOpen=function(){this.dialogDisplayed=!0};S.onBeforeUnload=function(a){this.setTypingState(!1)};S.dialogClose=function(a){this.dialogDisplayed=!1;var b=a&&a.origin;if(b&&"confirm"===b){this.appContext.uiStateManager.setWindowClosedByVisitor(!0);var c=this,d=this.focusOnChatInput;setTimeout(function(){d.call(c)},500)}};S.onChatLines=function(a){if(a&&a.newValue&&a.newValue.length){var b=a.newValue.filter(function(a){return!a.isWelcomeMessage&&"system"!==a.source});if(b.length){var c=this.getFirstElement(this.LPViewMap.transcriptPossibleMessages);if(c){c.innerText=this.translate("transcriptPossibleMessagesShort");this.unbindModel({path:lpTag.unifiedWindow.chatModelPath.LINES,callback:this.onChatLines})}}}};S.setVoiceOverFocus=function(a){var b=10,c=10;a.setAttribute("tabindex","0");a.blur();var d=0,e=window.setInterval(function(){a.focus();d++;d>=c&&window.clearInterval(e)},b)};S.iOSCoBrowseClose=function(){var a=this.getFirstElement("^maximize",document.body);this.setVoiceOverFocus(a)};S.handleCoBrowseClose=function(){if(this.appContext.deviceDetector.isIOS())this.iOSCoBrowseClose();else{var a=this.getFirstElement(this.LPViewMap.mainWindow,document.body);a.focus()}};S.setPendingLineStatus=function(a){U=a&&a.serverPendingLineExists}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){return a===this.SENT_STATE_MAP.state_ERROR||a===this.SENT_STATE_MAP.state_image_ERROR||a===this.SENT_STATE_MAP.state_image_RETRY}function b(a,b,c){var d=this.lineStyle[b.source];if(d===this.LINE_STYLE.CURVY){var e=this.getFirstElement(this.LPViewMap.bubble,a);this.removeClass(e,this.LPClassesMap.grouped[b.grouped]);this.addClass(e,this.LPClassesMap.grouped[c.grouped])}else{var f=this.getFirstElement("."+this.LPClassesMap.lineArrow,a),g=this.getFirstElement("."+this.LPClassesMap.lineBoarder,a);this.addClass(f,"lpHide");this.addClass(g,"lpHide")}}function c(a,b){var c=this.getFirstElement(this.LPViewMap.avatarImage,a);c&&(b?c.style.opacity="1":c.style.opacity="0")}function d(b,c,d){var e=b.className,f=e.match(this.STATE_CLASS_PREFIX_REGEX),g=this.SENT_STATE_MAP[f];c.state=g;if(g===d.nextLine.state&&!a.call(this,g)){var h=this.getFirstElement(this.LPViewMap.state,b);this.addClass(h,"lpHide")}}function e(a,b){var c=this.getFirstElement(".lp_time",a),d=this.getFirstElement(".lp_time_bottom",a);if(b)if(this.isTimeStampAbove){this.removeClass(c,"lpHide");this.addClass(d,"lpHide")}else{this.removeClass(d,"lpHide");this.addClass(c,"lpHide")}else{this.addClass(c,"lpHide");this.addClass(d,"lpHide")}}function f(a,b){var c=this.isTimeStampAbove&&"start"===a.grouped,d=!this.isTimeStampAbove&&("end"===a.grouped||(!b||b.source!==a.source)&&"start"===a.grouped||b&&b.by!==a.by);return c||d}function g(a,b){return"agent"===a.source&&(!b||"end"===a.grouped||"start"===b.grouped||"agent"!==b.source)}function h(a,h,i){var j=h.newValue,l=a.localId,m=this.getFirstElement("#"+this.LPClassesMap.line+l,window)||i;h.dirOnView&&(m=i);if(this.isLineGroupingEnabled){if(j.grouped){b.call(this,m,a,j);"end"===a.grouped&&(a.grouped=j.grouped)}"start"===a.grouped&&(m.style.marginTop="20px");!j.nextLine||"body"!==a.grouped&&"start"!==a.grouped||"visitor"!==a.source||d.call(this,m,a,j);e.call(this,m,f.call(this,a,j.nextLine));this.avatarEnabled&&"agent"===a.source&&c.call(this,m,g.call(this,a,j.nextLine))}else e.call(this,m,!0);j.dispose===!0&&k.call(this,a)}function i(a,b){h.call(this,a,b);j.call(this,a)}function j(a){var b=this.util.clone(a);k.call(this,a);this.appContext.events.bind({appName:"*",eventName:this.VCEvents.LINE_UPDATE+b.localId,context:this,func:this.handleLineUpdate(b)})}function k(a){this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.LINE_UPDATE+a.localId})}function l(a,b,c){var d,e,f,g=this.getFirstElement(this.LPViewMap.lineText,c),h=a.line.type===this.appConsts.messageTypes.secureForm,i=!0,j=this.appContext&&this.appContext.conf&&this.appContext.conf.unifiedConf;j&&j.hasOwnProperty("isTagsTransformDisabled")&&(i=j.isTagsTransformDisabled);i||(a.line.text=t(a.line.text));if(this.appContext.conf.engConf.async&&a.line.text&&"visitor"!==a.line.source&&a.line.type===this.appConsts.chatEvents.LINE&&this.hyperlinksHelper.textContainsMarkDownSyntax(a.line.text)){a.line.text="string"==typeof a.line.text?a.line.text.replace(/&nbsp;/g," "):a.line.text;a.line.text=this.hyperlinksHelper.convertMarkdownToTempId(a.line.text);a.line.text=this.hyperlinksHelper.convertAHREFToTempId(a.line.text);f=!1;p(a.line,g,this,f);a.line.text=this.formatLinks(a.line.text);var k=this.hyperlinksHelper.convertTempIdToMarkdown(a.line.text);a.line.text=k;g.innerHTML=k;var l=this.hyperlinksHelper.convertTempIdToAHREF(a.line.text);a.line.text=l;g.innerHTML=l;var m=this.hyperlinksHelper.parseAllMarkdownFormat(a.line.text);g.innerHTML=m;e=this.reTargetElementsByType(["A","FORM"],m);a.line.text=e;g.innerHTML=e;this.hyperlinksHelper.setMarkDownToTemp([]);this.hyperlinksHelper.setAHREFToTemp([])}else{a.line.text="string"==typeof a.line.text?a.line.text.replace(/&nbsp;/g," "):a.line.text;var n=this.hyperlinksHelper.textContainsAHREFSyntax(a.line.text);if(this.appContext.conf.engConf.async&&a.line.text&&n&&"visitor"!==a.line.source&&a.line.type===this.appConsts.chatEvents.LINE){var o=this.hyperlinksHelper.convertAHREFToTempId(a.line.text);a.line.text=o;g.innerHTML=o}f=!1;p(a.line,g,this,f);"visitor"===a.line.source&&(g=this.hyperlinksHelper.wrapStandaloneLinks(a.line.text,g));if(this.appContext.conf.engConf.async&&a.line.text&&n&&"visitor"!==a.line.source&&a.line.type===this.appConsts.chatEvents.LINE){var q=this.hyperlinksHelper.convertTempIdToAHREF(g.innerHTML),r=this.reTargetElementsByType(["A","FORM"],q);a.line.text=r;g.innerHTML=r;this.hyperlinksHelper.setAHREFToTemp([])}}i||this.removeUnsupportedTagsAndAttributes(g,!this.appContext.conf.engConf.async,h);"agent"!==a.line.source&&this.applyDirOnElement(g,a.line.text);if(g&&g.innerHTML){g.innerHTML=g.innerHTML.replace(/(\r\n|\n|\r)/gm,"<br/>");g.innerHTML=this.replaceDuplicatedEncodings(g.innerHTML)}if(b&&"string"==typeof b){d=this.getFirstElement(this.LPViewMap.avatarImage,c);d&&(d.src=b)}if(!b){d=this.getFirstElement(this.LPViewMap.avatarImage,c);if(d){d.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";d.height="0";d.width="0"}}if(a&&a.line&&a.line.isWelcomeMessage){var s=this.getFirstElement(this.LPViewMap.timeAndSender,c),u=this.getFirstElement(this.LPViewMap.timeAndSender+"_bottom",c);w.addClass(s,"lp_hidden");w.addClass(u,"lp_hidden")}this.addWrapperBubbleClass.call(this,a,c);this.setLineAndTsGrouping.call(this,a,b,c);a.replace&&a.targetToReplace?v.runCallback(a.callback,a.context,{view:c,line:a.line,replace:a.replace,targetToReplace:a.targetToReplace}):v.runCallback(a.callback,a.context,{view:c,line:a.line})}function m(a){return a&&a.line&&(a.line.text||a.line.textKey)}function n(a,b){var c=b.localId,d=a.querySelector("#"+this.LPClassesMap.lineBubble+c);if(b.textType!==this.appConsts.RichContent.RICH_CONTENT_LINE&&b.type!==this.appConsts.chatEvents.RICH_CONTENT||"agent"!==b.source){this.bindViewEvent({view:d,DOMEvent:"mouseover",callback:o.bind(this,a,!0,b),context:this});this.bindViewEvent({view:d,DOMEvent:"mouseout",callback:o.bind(this,a,!1,b),context:this});if(!this.appContext.deviceDetector.isDesktop()){this.bindViewEvent({view:d,DOMEvent:"touchstart",callback:o.bind(this,a,!0,b),context:this});this.bindViewEvent({view:d,DOMEvent:"touchend",callback:o.bind(this,a,!1,b),context:this})}}else{this.bindViewEvent({view:d,DOMEvent:"mouseover",callback:o.bind(this,a,!0,b),context:this});this.bindViewEvent({view:d,DOMEvent:"mouseout",callback:o.bind(this,a,!1,b),context:this});if(!this.appContext.deviceDetector.isDesktop()){this.bindViewEvent({view:d,DOMEvent:"touchstart",callback:o.bind(this,a,!0,b),context:this});this.bindViewEvent({view:d,DOMEvent:"touchend",callback:o.bind(this,a,!1,b),context:this})}}}function o(a,b,c,d){var e=c.localId,f="visitor"===c.source,g=a.querySelector("#"+this.LPClassesMap.lineBubble+e),h=this.getFirstElement(this.LPViewMap.timeAndSender+"_side",a),i=null;f&&(i=this.getFirstElement(this.LPViewMap.state,a));if(b){h.style.display="inline-block";if(i){i.style.width="auto";h.style.position="absolute";this.appConsts.chatEvents.FILE_SHARING===c.type&&"visitor"===c.source?h.style.right=132+i.offsetWidth+10+"px":h.style.right=0+g.offsetWidth+i.offsetWidth+4+"px";0===i.offsetWidth?h.style.bottom="-10px":i.childElementCount>0&&(h.style.bottom="-8px");i.style.width=""}else if((c.textType===this.appConsts.RichContent.RICH_CONTENT_LINE||c.type===this.appConsts.chatEvents.RICH_CONTENT)&&"agent"===c.source){var j=this.getFirstElement(".lp-json-pollock-layout-carousel",a),k=j;k?k.style.display="inline-block":h.style.display="none"}}else h.style.display="none"}function p(a,b,c,d){var e,f=a.text||c.translate(a.textKey);if("visitor"===a.source){b.innerHTML="";e=c.sanitizeText(f,{noFormatLink:!0}).text;b.innerHTML=e}else if(c.sanitize===!1)b.innerHTML=f;else{e=c.sanitizeText(f,{noFormatLink:d}).text;-1!==e.indexOf("idnv_question")&&(e=c.removeElementByType(["IMG","A"],e));b.innerHTML=e}}function q(a){var b=this.getModelParam(this.chatPath.PARTICIPANTS)||{};return b&&b[a]&&b[a].imgUrl}function r(a){var b=this.getModelParam(this.uiPath.AGENT_PICTURE_URL);return a.agentPictureUrl||b&&b[a.by]}function s(a){var b="";switch(a.source){case"agent":b=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.by).cleanText;break;case"visitor":b=this.getModelParam(this.chatPath.VISITOR_NAME)||this.translate("you");break;case"system":b=this.translate("info")}return b}function t(a){var b;("string"==typeof a||a instanceof String)&&(b=a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," "));return b||a}var u,v=lpTag.lpUtils,w=lpTag.taglets.lpUtil;lpTag.unifiedWindow.ChatLineViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ChatLineViewController",applicationType:"ChatLineViewController",STATE_CLASS_PREFIX:"state_",SPACE_HTML_ENTITY:"&nbsp;",STATE_CLASS_PREFIX_REGEX:/state_[\w]+/gi,lineTemplateFile:{visitor:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{stateClass}} lpc_message-area lpc_message-area_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitor_parent' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lpc_message lpc_message_{{source}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_visitor' role='listitem'><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitorArrowBorder' aria-hidden='true'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitorArrow' aria-hidden='true'></div><div class='lp_line_state_wrapper'><span class='lp_title_text lpc_message__text lpc_message__text_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitor_text'>{{text}}</span> <span title='{{stateToolTip}}' data-lp-point='lp_line_state' data-lp-cust-id='transcript_time' class='lpc_message-area__indicator lpc_message-area__indicator_{{source}} {{deviceClass}} lp_line_state'>{{state}}</span></div><div class='lp_time_side_wrapper'><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time' aria-hidden='true'>{{sideTime}}</div></div></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}} lpHide' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",agent:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agent_parent' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='' aria-hidden='true' role='listitem'><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lpc_message lpc_message_{{source}} lpc_message_{{avatarCustomModifier}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_agent' role='listitem'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agent_text'>{{text}}</div></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} lpc_message-tail__border_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agentArrowBorder' role='listitem' aria-hidden='true'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} lpc_message-tail_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agentArrow' role='listitem' aria-hidden='true'></div><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time' role='listitem' aria-hidden='true'>{{sideTime}}</div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",
system:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} lpc_message-area lpc_message-area_{{source}} {{deviceClass}}' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem' aria-hidden='true'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div class='lp_chat_line lpc_message lpc_message_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_message' role='listitem'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_message'>{{text}}</div></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} {{deviceClass}}' aria-hidden='true' role='listitem' aria-hidden='true'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} {{deviceClass}}' aria-hidden='true' role='listitem' aria-hidden='true'></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}} lpHide' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>"},LPViewMap:{avatarImage:".agent_avatar",lineText:".lp_title_text",timeAndSender:".lp_time",bubble:"^lineBubble",state:"^lp_line_state"},LPClassesMap:{avatarDisplay:"agent_avatar_display",avatarHidden:"agent_avatar_hidden",lineBubble:"lp_line_bubble_",lineWrapperBubble:"lp_bubble_style",line:"lp_line_",lineArrow:"lp_chat_arrow",lineBoarder:"lp_chat_arrow_border",grouped:{start:"lp_line_grouped_start",body:"lp_line_grouped_body",end:"lp_line_grouped_end"}},LPCustomizationClasses:{avatarDisplay:"avatar-shown",avatarHidden:"avatar-hidden"},GROUP_STATE:{INIT:"init",START:"start",BODY:"body",END:"end"},LINE_STYLE:{DEFAULT:"default",CURVY:"curvy"},SENT_STATE_MAP:{state_SENT:"SENT",state_ACCEPT:"ACCEPT",state_PENDING:"PENDING",state_READ:"READ",state_ERROR:"ERROR",state_image_ERROR:"image_ERROR",state_image_RETRY:"image_RETRY"},FORMATTER:{markdownToHtml:{regexp:new RegExp("#md#\\[(.*?)]\\((.*?)\\)#/md#","gim")},anchorTagRegex:{regexp:new RegExp("<a[\\s]+([^>]+)>((?:.(?!</a>))*.)</a>","gim")}},markdownToTemp:[],ahrefToTemp:[],initialize:function(a){this.appContext=a.appContext;this.lineStateSupported=this.appContext.conf.engConf.async;this.util=lpTag.unifiedWindow.applicationUtils;this.featureStateManager=this.appContext.featureStateManager;this.hyperlinksHelper=this.appContext.hyperlinksHelper;this.lineStyle=this.featureStateManager.getBubbleStyles();this.isTimeStampAbove=this.featureStateManager.isTimeStampAbove();this.timeStampLocation=this.featureStateManager.timeStampLocationEnabled();this.isLineGroupingEnabled=this.featureStateManager.isLineGroupingEnabled();this.avatarEnabled=this.featureStateManager.avatarEnabled();this.agentAvatarPaddingEnabled=this.featureStateManager.agentAvatarPaddingEnabled()}});u=lpTag.unifiedWindow.ChatLineViewController.prototype;u.createLine=function(a){var b=this.getAvatarUrl(a);if(m(a)){var c={template:this.lineTemplateFile[a.line.source],wrapWithDiv:!1,callback:l.bind(this,a,b),textInjection:this.getTextInjection(a,b)};a.replace&&(c.doNotAddChild=a.replace);return this.createView(c)}};u.handleLineUpdate=function(a){return i.bind(this,a)};u.getTextInjection=function(a,b){var c,d,e,f=this.appContext.conf.windowConf.readNotificationsType?this.appContext.conf.windowConf.readNotificationsType:this.LPReadNotificationsTypes.text.value,g=this.translate("messagingState_"+a.line.state);if(this.lineStateSupported){c=this.getLineStateText(f,a.line);d=a.line.state?this.STATE_CLASS_PREFIX+a.line.state:void 0}if(!this.appContext.conf.engConf.async&&"html"===a.line.textType&&a.line.text&&"agent"===a.line.source){var h=document.createElement("div");h.innerHTML=a.line.text;for(var i=h.querySelectorAll("span"),j=0;j<i.length;j++)"bold"!==i[j].style.fontWeight&&(i[j].style.fontWeight="inherit");a.line.text=h.innerHTML}var k=a.line.time?this.timeStampManager.getTimeString(a.line.time):"",l=a.line.time?this.timeStampManager.getSideTimeString(a.line.time,!this.timeStampGroupingEnabled):"";e={_id:a.line.localId,source:a.line.source,sender:s.call(this,a.line),time:k,sideTime:l,state:c||"",stateToolTip:c?g:"",stateClass:d||"",iconsRepository:this.appContext.conf.unifiedConf.iconsRepository,imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,grouped:a.line.grouped?this.LPClassesMap.grouped[a.line.grouped]:""};if(b&&"string"==typeof b){e.avatarVisibility=this.LPClassesMap.avatarDisplay;e.avatarCustomModifier=this.LPCustomizationClasses.avatarDisplay}else{e.avatarVisibility=this.LPClassesMap.avatarHidden;e.avatarCustomModifier=this.LPCustomizationClasses.avatarHidden}return e};u.getAvatarUrl=function(a){var b,c=this.appContext.conf.windowConf.agentAvatar;if(c===!0||"true"===c){b=q.call(this,a.line.originatorId)||r.call(this,a.line);"string"!=typeof b&&(b=this.appContext.conf.windowConf.agentAvatarUrl)}return b};u.setLineAndTsGrouping=function(a,b,c){var d=a.line.localId;this.isLineGroupingEnabled&&this.addClass(c,"lp_grouped");this.isTimeStampAbove||this.addClass(c,"lp_ts_bottom");a.replace&&k.call(this,a.line);this.appContext.events.bind({appName:"*",eventName:this.VCEvents.LINE_UPDATE+d,context:this,func:this.handleLineUpdate(a.line)});this.isLineGroupingEnabled&&n.call(this,c,a.line);this.agentAvatarPaddingEnabled&&this.avatarEnabled&&this.addClass(c,"avatar-padding");var e={newValue:{initial:!0},dirOnView:a&&a.replace||!1};h.call(this,a.line,e,c)};u.addWrapperBubbleClass=function(a,b){var c=this.lineStyle[a.line.source];c===this.LINE_STYLE.CURVY&&this.addClass(b,this.LPClassesMap.lineWrapperBubble)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){return function(b){var c=this.getFirstElement(this.LPViewMap.autoMessage,b);c&&c.innerHTML&&(c.innerHTML=c.innerHTML.replace(/(\r\n|\n|\r)/gm,"<br/>"));this.isLineGroupingEnabled&&this.addClass(b,"lp_grouped");d.runCallback(a.callback,a.context,{view:b,line:a.line})}}function b(){var a,b=this.appContext.conf.unifiedConf.displayShortlyMessage;if(b){a=this.appContext.translator.dictionary.getString("transcriptShortlyMessage");this.appContext.translator.extendDictionary({transcriptTtrMessage:a},{locale:this.appContext.conf.engConf.lang})}}var c,d=lpTag.lpUtils;lpTag.unifiedWindow.AutoMessageViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"AutoMessageViewController",applicationType:"AutoMessageViewController",templateFileName:"<div class='lp_chat_line_wrapper lp_chat_line_wrapper_auto lpc_message-area lpc_message-area_auto {{deviceClass}}' role='list'><div class='lp_time lp_chat_line_auto_message lpc_message-area__timestamp lpc_message-area__timestamp_auto {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem'>{{text}}</div>{{html}}</div>",LPViewMap:{autoMessage:".lp_chat_line_auto_message"},LPClassesMap:{underline:"lp_underline"},initialize:function(a){this.featureStateManager=this.appContext.featureStateManager;this.isLineGroupingEnabled=this.featureStateManager.isLineGroupingEnabled();b.call(this)}});c=lpTag.unifiedWindow.AutoMessageViewController.prototype;c.createAutoMessage=function(b){var c=b.line.time?this.timeStampManager.getTimeString(b.line.time):"";this.appContext.translator.extendDictionary({time:c},{locale:this.appContext.conf.engConf.lang});this.view=this.createView({template:this.templateFileName,wrapWithDiv:!1,callback:a(b),textInjection:{text:this.translate(b.line.textKey),html:b.line.html||"",_id:b.line.localId||""}});b.line.hasSeparator&&this.addClass(this.LPViewMap.autoMessage,this.LPClassesMap.underline)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b,c=a.by||this.appContext.translator.translate("agent");for(var d in a)a[d]&&"string"==typeof a[d]&&(a[d]=this.sanitizeText(a[d]).text);c=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(c).cleanText;this.translator.extendDictionary({agentName:c},{locale:this.appContext.conf.engConf.lang});b=this.createView({template:this.LINK_TEMPLATE,wrapWithDiv:!1,doNotAddChild:!0,textInjection:{uniqueId:a.uniqueId,className:this.LPClassesMap.link,formName:a.formName,title:this.translate(this.TITLE_KEY_PREFIX+a.textKey)}});this.translator.extendDictionary({secureFormName:b.outerHTML},{locale:this.appContext.conf.engConf.lang});a.text=this.translate(a.textKey);return a}function b(a){return function(b){b=b.view||b;e.call(this,b);h.runCallback(a.callback,a.context,{view:b,line:a.line});var d=a&&a.line;if(this.appContext.conf.unifiedConf.connectorsSfConfig&&d){var f=d.uniqueId,g=this.appContext.conf.unifiedConf.connectorsSfConfig.invitationId;if(f&&g&&f===g){var i=document.getElementById(f);if(i){i.setAttribute("data-sf-connector","true");i.click();c()}}}}}function c(){var a=document.getElementsByClassName("lp_header"),b=document.getElementsByClassName("lp_main");d(a);d(b);var c=document.getElementsByClassName("lp_slider");c[1]&&(c[1].style.width="100%")}function d(a){for(var b=0;b<a.length;b++)a[b]&&(a[b].hidden=!0)}function e(a){var b=this.getFirstElement(this.LPViewMap.link,a);this.bindViewEvent({view:b,DOMEvent:"click",callback:this.fireClickEvent,context:this})}function f(){var a;if(this.currentOpenSFLink)a=this.currentOpenSFLink;else{var b=this.getElements(this.LPViewMap.link);a=b[b.length-1]}a&&a.focus&&a.focus()}var g,h=lpTag.lpUtils;lpTag.unifiedWindow.SecureFormLineViewController=lpTag.unifiedWindow.ChatLineViewController.extend({ControllerName:"SecureFormLineViewController",applicationType:"SecureFormLineViewController",appName:"secureForm",sanitize:!0,LINK_TEMPLATE:"<a href='javascript:void(0);' role='button' id='{{uniqueId}}' data-lp-point='lp_secure_form_line' title='{{title}}' target='_self' class='{{className}}'>{{formName}}</a>",TITLE_KEY_PREFIX:"secureForm_link_title_",LPViewMap:{link:".lp_secure_form_line"},LPClassesMap:{link:"lp_secure_form_line"},initialize:function(a){this.hide()},events:function(){this.appContext.events.bind({appName:"*",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:f});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:lpTag.unifiedWindow.consts.SecureForm.HIDE_CONVO,context:this,func:c})}});g=lpTag.unifiedWindow.SecureFormLineViewController.prototype;g.dispose=function(){this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:f});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:lpTag.unifiedWindow.consts.SecureForm.HIDE_CONVO,context:this,func:c});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};g.createSecureFormLine=function(c){var d=c&&c.line;d&&this.createLine({line:a.call(this,d),callback:b(c),context:this})};g.fireClickEvent=function(a){var b=a&&a.target&&a.target.getAttribute("data-sf-connector");if(!navigator.onLine||this.appContext.connectionUnavailable){a.preventDefault();return!1}this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:lpTag.unifiedWindow.consts.SecureForm.LINK_CLICKED,data:{uniqueId:a.sourceElement.id,isFromConnector:b}});this.currentOpenSFLink=a.sourceElement}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){this.SCMetadata={};this.SCActionData={}}function b(){this.appContext.events.bind({appName:aa,eventName:_.DISABLE_RICH_CONTENT,context:this,func:e})}function c(){this.appContext.events.unbind({appName:aa,eventName:_.DISABLE_RICH_CONTENT,context:this,func:e})}function d(a){if(a&&a.line&&a.line.state!==W.FAILED){var b=lpTag.HtmlSanitizerUtils.sanitizeHtml(a.line.text).cleanText||a.line.json,c=lpTag.unifiedWindow.applicationUtils.cloneObj(a.line);try{"string"==typeof b&&(c.text=JSON.parse(b));if(c&&h.call(this,c)){var d={view:this.view,line:c,updated:!1};this.SCToDisable.push(d)}}catch(e){this.logger.error("Error when trying to disable rich content: "+e.message,this.ControllerName);this.logger.error(e,this.ControllerName)}}}function e(){if(Array.isArray(this.SCToDisable)){var a=j.call(this);this.SCToDisable.forEach(function(b){try{if(g.call(this,b)&&!i.call(this,a,b.line)||!k.call(this)){var c=f.call(this,b.view);if(c){b.line.text=c;b.line.type="line";R.trigger({appName:aa,eventName:this.EventName.richContent.UPDATE_RICH_CONTENT_LINE,data:b});b.updated=!0}}}catch(d){this.logger.error("Error when trying to disable rich content: "+d.message,this.ControllerName);this.logger.error(d,this.ControllerName)}},this);this.SCToDisable=this.SCToDisable.filter(function(a){return!a.updated})||[]}}function f(a){var b=this.getFirstElement(this.LPViewMap.richContentRoot,a);if(b&&this.isDOMNode(b)){var c=b.querySelectorAll(".lp-json-pollock-element-text");return c.length>0&&c[0]&&c[0].textContent}return null}function g(a){return!a.updated&&h.call(this,a.line)}function h(a){var b=lpTag.taglets.lpUtil.getPropertyFromObject(a,"text.type");return b===$.LIST}function i(a,b){return a&&b&&U.isSameObject(a.text,b.text)&&a.localId===b.localId&&a.convId===b.convId}function j(){var a=this.models.chatModel.get(this.chatPath.LINES);a=lpTag.unifiedWindow.applicationUtils.sortByKeyValue(a,"time");return Array.isArray(a)&&a.length>0&&a[a.length-1]||{}}function k(){return lpTag.unifiedWindow.State.CHATTING===this.getModelParam(this.uiPath.STATE)}function l(b){if(o.call(this)&&t.call(this)){var c=b.actionData&&b.actionData.type,d=this.appContext.conf.unifiedConf.isMessaging?v.call(this,b.uiEvent.target):!0,e=[],f=[],g=y(b);if(d&&!g){e=n.call(this,this.SCMetadata);H.call(this,e,Y.ACTION_EVENT)}if(c===Z.SUBMIT_AS_TEXT){e=n.call(this,this.SCMetadata);f=n.call(this,this.SCActionData);H.call(this,e,Y.SUBMIT_AS_TEXT,f)}a.call(this);b.formEl&&m.call(this,b.formEl,"checkbox")}}function m(a,b){var c;switch(b){case"checkbox":c=a.querySelectorAll("input[type=checkbox]");if(c.length>0)for(var d=0;d<c.length;d++){var e=c[d];(e.checked||e.getAttribute("checked"))&&(e.checked=!1)}break;default:this.logger.error("the element is currently not supported!!!")}}function n(a){var b=[];if(a){var c=lpTag.unifiedWindow.applicationUtils.objectKeysAsArray(a);c.forEach(function(c){b=b.concat(a[c])})}return b}function o(){var a=!1,b=!1;if(this.SCMetadata)for(var c in this.SCMetadata)if(Array.isArray(this.SCMetadata[c])&&this.SCMetadata[c].length>0){a=!0;break}if(this.SCActionData)for(var d in this.SCActionData)if(Array.isArray(this.SCActionData[d])&&this.SCActionData[d].length>0){b=!0;break}return a&&b}function p(a){var b,c=a.actionData&&a.actionData.type,d=this.appContext.conf.unifiedConf.isMessaging?v.call(this,a.uiEvent.target):!0;a.groupID&&(b=a.groupID);var e=y(a),f=F(a),g=G(a),h=Array.isArray(f)?f[0]:f;if(d&&!e&&c===Z.CHECKED&&b){this.SCActionData||(this.SCActionData={});this.SCMetadata||(this.SCMetadata={});var i=g.publishText;this.SCMetadata[b]||(this.SCMetadata[b]=[]);this.SCActionData[b]||(this.SCActionData[b]=[]);if(a.uiEvent.target.checked){this.SCActionData[b].push(i);this.SCMetadata[b]=this.SCMetadata[b].concat(f)}else{var j=lpTag.taglets.lpUtil.indexOf(this.SCActionData[b],i);j>-1?this.SCActionData[b].splice(j,1):this.logger.error("checked actionData item does not exist!!!",this.ControllerName);for(var k=-1,l=0;l<this.SCMetadata[b].length;l++){var m=this.SCMetadata[b][l];if(U.isSameObject(m,h)){k=l;break}}k>-1?this.SCMetadata[b].splice(k,1):this.logger.error("checked metadata item does not exist!!!",this.ControllerName)}}}function q(a,b){r.call(this,a,b);return a}function r(a,b){switch(b.type){case X.TEMPLATE_TYPES.VERTICAL:a.classList.add(this.LPCustomizationClasses.card);a.classList.add(this.LPCustomizationClasses[b.type]);break;case X.TEMPLATE_TYPES.IMAGE:a.classList.add(this.LPCustomizationClasses[b.type]);break;case X.TEMPLATE_TYPES.BUTTON:a.classList.add(this.LPCustomizationClasses[b.type]);break;case X.TEMPLATE_TYPES.MAP:a.classList.add(this.LPCustomizationClasses[b.type]);break;case X.TEMPLATE_TYPES.TEXT:a.classList.add(this.LPCustomizationClasses[b.type]);break;case X.TEMPLATE_TYPES.HORIZONTAL:a.classList.add(this.LPCustomizationClasses.card);a.classList.add(this.LPCustomizationClasses[b.type]);break;case X.TEMPLATE_TYPES.CAROUSEL:}a.classList.add(lpTag.unifiedWindow.customization.deviceClass);return a}function s(a){var b=lpTag.taglets.lpUtil.getPropertyFromObject(a,"uiEvent.target.parentElement.parentElement.parentElement.parentElement.parentElement");if(b&&b.classList.contains("lp_chat_line_wrapper")){var c=this.getFirstElement(this.LPViewMap.avatarImage,b),d=this.getFirstElement(this.LPViewMap.richContentRoot,b);if(0===a.offset&&0===a.prevOffset){this.removeClass(c,"shown");this.addClass(c,"hidden");this.addClass(d,"stretch")}else{this.removeClass(c,"hidden");this.addClass(c,"shown");this.removeClass(d,"stretch")}}else this.logger.error("Error while trying to set Carousel Offset",this.ControllerName)}function t(){var a=this.getModelParam(this.uiPath.STATE),b=a===lpTag.unifiedWindow.State.CHATTING,c=this.appContext.conf.engConf.async&&a!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&a!==lpTag.unifiedWindow.State.PENDING;return c||b}function u(a,b,c){var d,e=this.getFirstElement(this.LPViewMap.lineText,c);this.getFirstElement(this.LPViewMap.timeAndSender+"_side",c);J.call(this,a.line,e);"agent"!==a.line.source&&this.applyDirOnElement(e,a.line.text);if(b&&"string"==typeof b){d=this.getFirstElement(this.LPViewMap.avatarImage,c);if(d){d.src=b;d.style.marginBottom="8px"}}if(!b){d=this.getFirstElement(this.LPViewMap.avatarImage,c);if(d){d.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";d.height="0";d.width="0"}}this.addWrapperBubbleClass.call(this,a,c);this.setLineAndTsGrouping.call(this,a,b,c);U.runCallback(a.callback,a.context,{view:c,line:a.line})}function v(a){var b=a.getAttribute(ba);return b?w.call(this,b):!1}function w(a){return this.appContext.conversationManager.isCurrentConversation(a)}function x(a){var b=a.actionData&&a.actionData.type,c=this.appContext.conf.unifiedConf.isMessaging?v.call(this,a.uiEvent.target):!0,d=G(a),e=y(a);c&&!e&&H.call(this,F(a),Y.ACTION_EVENT);b===Z.PUBLISH_TEXT&&H.call(this,F(a),Y.PUBLISH_TEXT,d)}function y(a){var b=a.uiEvent.timeStamp;if(ca[b])return!0;ca[b]=!0;setInterval(function(a){delete ca[a]},10);return!1}function z(a){var b=a.actionData.web&&a.actionData.web.uri||a.actionData.uri;if("self"===a.actionData.target)window.location.assign(b);else if("slideout"===a.actionData.target)R.trigger({appName:aa,eventName:lpTag.unifiedWindow.consts.RichContent.LINK_CLICKED,data:{url:b,actionData:a.actionData}});else{var c=window.open(b,"_blank");c.opener=null}x.call(this,a)}function A(a){var b=G(a),c={query:b.la+","+b.lo},d=lpTag.taglets.lpUtil.addQueryParams(V.googleMapsUrl,c),e=window.open(d,"_blank");e.opener=null;x.call(this,a)}function B(a){var b=G(a);R.trigger({appName:lpTag.unifiedWindow.apps.DATE_PICKER,eventName:lpTag.unifiedWindow.events.viewController.DATE_PICKER_SHOW,data:{header:b.title,type:b["class"],minDate:b.minDate,maxDate:b.maxDate,dateFormat:b.dateFormat}});x.call(this,a)}function C(a){var b=G(a);R.trigger({appName:lpTag.unifiedWindow.apps.SCHEDULE_LIST,eventName:lpTag.unifiedWindow.events.viewController.SCHEDULE_LIST_SHOW,data:{header:b.title,slots:b.slots,firstDayOfTheWeek:b.firstDayOfTheWeek}});x.call(this,a)}function D(a){t.call(this)&&x.call(this,a)}function E(a){lpTag.hooks&&lpTag.hooks.exec&&lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.ON_ADD_TO_CART,data:a})}function F(a){return a&&a.metadata||[]}function G(a){return a&&a.actionData||{}}function H(a,b,c){var d={metadata:a};isNaN(parseInt(T,10))?isNaN(parseInt(a.sequenceId,10))?d.uniqueId=a.uniqueId:d.uniqueId=a.sequenceId:d.uniqueId=T;c&&(d.actionData=c);R.trigger({appName:aa,eventName:b,data:d})}function I(a){return a&&a.line&&(a.line.text||a.line.textKey||a.line.json)}function J(a,b){var c=lpTag.HtmlSanitizerUtils.sanitizeHtml(a.text).cleanText||a.json;c=K(c);var d;try{d=X.render(c);a.convId&&L(d,a.convId);b.appendChild(d);H.call(this,a,Y.DISPLAYED)}catch(e){a.state=W.FAILED;this.logger.error("Error when trying to render rich content: "+e.message,this.ControllerName)}}function K(a){function b(a){"object"==typeof a&&Object.keys(a).forEach(function(d){"string"==typeof a[d]?a[d]=c(a[d]):b(a[d])})}function c(a){for(var b,c=new RegExp("#md#\\[(.*?)]\\((.*?)\\)#/md#","gim");null!==(b=c.exec(a));){var d=b[0],e=b[2]||"",f=b[1]||"";e&&f&&(a=a.replace(d,"<a href='"+e+"' target='_blank'>"+f+"</a>"))}return a}try{"string"==typeof a?a=c(a):b(a);return a}catch(d){this.logger.error("Error when trying to convert markdown links to HTML in rich content: "+d.message,this.ControllerName);return a}}function L(a,b){var c=a.querySelectorAll("*");if(c.length>0)for(var d=0;d<c.length;d++)"function"==typeof c[d].onclick&&c[d].setAttribute(ba,b)}function M(a,b){var c,d,e,f=this.appContext.conf.windowConf.readNotificationsType?this.appContext.conf.windowConf.readNotificationsType:this.LPReadNotificationsTypes.text.value,g=this.translate("messagingState_"+a.line.state);if(a&&a.line){if(this.lineStateSupported){c=this.getLineStateText(f,a.line);d=a.line.state?this.STATE_CLASS_PREFIX+a.line.state:void 0}var h=a.line.time?this.timeStampManager.getTimeString(a.line.time):"",i=a.line.time?this.timeStampManager.getSideTimeString(a.line.time,!this.timeStampGroupingEnabled):"";e={_id:a.line.localId,source:a.line.source,sender:Q.call(this,a.line),time:h,sideTime:i,state:c||"",stateToolTip:c?g:"",stateClass:d||"",grouped:a.line.grouped?this.LPClassesMap.grouped[a.line.grouped]:""};if(b&&"string"==typeof b){e.avatarVisibility=this.LPClassesMap.avatarDisplay;e.avatarCustomModifier=this.LPCustomizationClasses.avatarDisplay}else{e.avatarVisibility=this.LPClassesMap.avatarHidden;e.avatarCustomModifier=this.LPCustomizationClasses.avatarHidden}}return e}function N(a){var b,c=this.appContext.conf.windowConf.agentAvatar;if(c===!0||"true"===c){b=O.call(this,a.line.originatorId)||P.call(this,a.line);"string"!=typeof b&&(b=this.appContext.conf.windowConf.agentAvatarUrl)}return b}function O(a){var b=this.getModelParam(this.chatPath.PARTICIPANTS)||{};return b&&b[a]&&b[a].imgUrl}function P(a){var b=this.getModelParam(this.uiPath.AGENT_PICTURE_URL);return a.agentPictureUrl||b&&b[a.by]}function Q(a){var b="";switch(a.source){case"agent":b=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.by).cleanText;break;case"visitor":b=this.getModelParam(this.chatPath.VISITOR_NAME);break;case"system":b=this.translate("info")}return b}var R,S,T,U=lpTag.lpUtils,V=lpTag.unifiedWindow.consts,W=lpTag.unifiedWindow.MessageState,X=lpTag.JsonPollock,Y=lpTag.unifiedWindow.richContentStates,Z=lpTag.unifiedWindow.consts.richContentActionTypes,$=lpTag.unifiedWindow.structuredContentTypes,_=lpTag.unifiedWindow.events.richContent,aa=lpTag.unifiedWindow.apps.RICH_CONTENT,ba="data-conv-id",ca={};lpTag.unifiedWindow.RichContentViewController=lpTag.unifiedWindow.ChatLineViewController.extend({ControllerName:"RichContentViewController",applicationType:"RichContentViewController",templateFileName:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='{{sender}}' role='listitem' aria-hidden='true'><div id='lp_line_bubble_{{_id}}' tabindex='-1' class='lp_rich_content_line lpc_message lpc_message_{{source}} lpc_message_card lpc_message_{{avatarCustomModifier}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_rich_content' role='listitem'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text_card lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_rich_content_text'></div></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' data-lp-cust-id='transcript_time' role='listitem'><span title='{{stateToolTip}}' aria-label='{{stateToolTip}}' data-lp-point='lp_line_state' data-lp-cust-id='transcript_time' class='lpc_message-area__indicator lpc_message-area__indicator_{{source}} {{deviceClass}} lp_line_state lp_{{source}}_rich_content_state'>{{state}}</span><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",LPViewMap:{avatarImage:".agent_avatar",lineText:".lp_title_text",richContentRoot:".lp_rich_content_line"},LPCustomizationClasses:{button:"lpc_card__button",horizontal:"lpc_card_horizontal",image:"lpc_card__image",map:"lpc_card__map",text:"lpc_card__text",vertical:"lpc_card_vertical",card:"lpc_card",avatarDisplay:"avatar-shown",avatarHidden:"avatar-hidden"},initialize:function(b){R=b.appContext.events;this.lineStateSupported=b.appContext.conf.engConf.async;this.SCToDisable=[];a.call(this);X.init({onAfterElementRendered:q.bind(this)})},events:function(){X.registerAction(Z.LINK,z.bind(this));X.registerAction(Z.NAVIGATE,A.bind(this));X.registerAction(Z.PUBLISH_TEXT,D.bind(this));X.registerAction(Z.CAROUSEL_OFFSET_CHANGE,s.bind(this));X.registerAction(Z.CHECKED,p.bind(this));X.registerAction(Z.SUBMIT_AS_TEXT,l.bind(this));X.registerAction(Z.DATE_PICKER,B.bind(this));X.registerAction(Z.SCHEDULE_SLOT_LIST,C.bind(this));X.registerAction(Z.ADD_TO_CART,E.bind(this));b.call(this)}});S=lpTag.unifiedWindow.RichContentViewController.prototype;S.createRichContentLine=function(b){if(b){var c=N.call(this,b);if(I(b)){T=b.line.sequenceId;this.view=this.createView({template:this.templateFileName,wrapWithDiv:!1,callback:u.bind(this,b,c),textInjection:M.call(this,b,c)});a.call(this);d.call(this,b);R.trigger({appName:aa,eventName:this.EventName.viewController.UPDATE_ACCESSIBILITY_MESSAGE,data:this.translate("a11yNewStructuredContent")})}}};S.dispose=function(){X&&X.unregisterAllActions&&X.unregisterAllActions();c.call(this);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,d,e){this.view=e;var f,g=this.getFirstElement(this.LPViewMap.lineText,e),i=this.getFirstElement(this.LPViewMap.image,e),l=this.getFirstElement(this.LPViewMap.state,e);this.loader=this.getFirstElement(this.LPViewMap.loader+this.viewId);this.wrapper=this.getFirstElement(this.LPViewMap.wrapper,e);this.imageLink=this.getFirstElement(this.LPViewMap.imageLink+this.viewId,e);this.uploadErrorElement=this.getFirstElement(this.LPViewMap.uploadError,e);this.imageWrapper=this.getFirstElement(this.LPViewMap.imageWrapper,this.imageLink);this.retryUploadButton=this.getFirstElement(this.LPViewMap.retryUpload,e);this.failedUploadIcon=this.getFirstElement(this.LPViewMap.failedUpload,e);b.call(this,a.line,g,i);c.call(this,i,g);h.call(this);j.call(this,a.line);k.call(this,a.line);"agent"!==a.line.source?this.applyDirOnElement(g,a.line.text):this.addClass(l,"lp_hidden");if(d&&"string"==typeof d){f=this.getFirstElement(this.LPViewMap.avatarImage,e);f&&(f.src=d)}this.addWrapperBubbleClass.call(this,a,e);this.setLineAndTsGrouping.call(this,a,d,e);p.runCallback(a.callback,a.context,{view:e,line:a.line})}function b(a,b,c){var d=a.fileData;c.src=d.preview;var f=d.relativePath||"",g=f.split(".");f=g[g.length-1].toUpperCase();if(f&&!e.call(this,d))switch(f){case"PNG":case"JPG":case"JPEG":case"GIF":break;case"PDF":case"DOCX":case"XLSX":case"PPTX":c.src=m.conf.unifiedConf.imagesRepository+"/"+f.toLowerCase()+"_m.png";this.addClass(this.imageWrapper,"icon");this.addClass(this.uploadErrorElement,"icon");break;default:c.src=m.conf.unifiedConf.imagesRepository+"/generic_m.png";this.addClass(this.imageWrapper,"icon");this.addClass(this.uploadErrorElement,"icon")}if(d.caption.length>0){b.innerText=lpTag.HtmlSanitizerUtils.sanitizeHtml(d.caption).cleanText;this.addClass(this.wrapper,"lp_image_caption")}else{i.call(this,b);e.call(this,d)&&(c.style.top="unset")}}function c(a,b){var c=m.translator.translate("previewAttachmentLabel"),d=b&&b.innerHTML&&"text"!==b.innerHTML.toLowerCase()&&""!==b.innerHTML?b.innerHTML:c;a&&a instanceof HTMLImageElement&&a.setAttribute("alt",d)}function d(a){return a&&a.line&&a.line.fileData}function e(a){return a&&a.preview===lpTag.unifiedWindow.consts.fileSharing.fallbackThumbnail.URI}function f(a){return a?m.translator.translate("messagingState_image_RETRY"):m.translator.translate("messagingState_image_ERROR")}function g(a){var b=this.getFirstElement(this.LPViewMap.lpErrorInternalText);this.lpChatArrowErrorOverlayElement=this.getFirstElement(this.LPViewMap.lpChatArrowErrorOverlay);a.showLoader?this.removeClass(this.loader,"lpHide"):this.addClass(this.loader,"lpHide");this.removeClass(this.uploadErrorElement,"lpHide");this.removeClass(this.uploadErrorElement,"can_retry");this.uploadErrorElement.removeAttribute("aria-labelledby");this.uploadErrorElement.removeAttribute("role");if(a.error){if(a.canRetry){this.uploadErrorElement.onclick=o;this.addClass(this.uploadErrorElement,"can_retry");this.uploadErrorElement.setAttribute("aria-labelledby","error_message_"+this.viewId);this.uploadErrorElement.setAttribute("role","button")}else{this.addClass(this.retryUploadButton,"lpHide");this.removeClass(this.failedUploadIcon,"lpHide");this.uploadErrorElement.onclick=null;delete this.uploadErrorElement.onclick}b.innerHTML=f(a.canRetry);"default"===this.featureStateManager.getCustomStyle(this.featureStateManager.customStyleMap.VISITOR_BUBBLE,"default")&&this.removeClass(this.lpChatArrowErrorOverlayElement,"lpHide")}else this.addClass(this.uploadErrorElement,"lpHide")}function h(){l.bind({appName:q,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DONE_UPLOADED+":"+this.viewId,func:g,context:this})}function i(a){var b=this.getFirstElement(this.LPViewMap.arrow),c=this.getFirstElement(this.LPViewMap.arrowBorder);if(!this.featureStateManager.isLineGroupingEnabled()){this.addClass(b,"lpHide");this.addClass(c,"lpHide")}this.addClass(a,"lpHide")}function j(a){this.imageLink.onclick=function(b){b.preventDefault();l.trigger({appName:q,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DOWNLOAD_REQUEST,data:a})}}function k(a){var b=this;o=function(c){c.preventDefault();g.call(b,{showLoader:!0});l.trigger({appName:q,eventName:lpTag.unifiedWindow.events.imageShare.FILE_UPLOAD_RETRY,data:a})}}var l,m,n,o,p=lpTag.lpUtils,q=lpTag.unifiedWindow.apps.FILE_SHARE;lpTag.unifiedWindow.FileSharingViewController=lpTag.unifiedWindow.ChatLineViewController.extend({ControllerName:"FileSharingViewController",applicationType:"FileSharingViewController",lineTemplateFile:{visitor:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_image_line_wrapper lp_{{source}} {{stateClass}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{source}}-fs lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}_parent' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lp_image_sharing_line lpc_message lpc_message_{{source}} lpc_message_{{avatarCustomModifier}} lpc_message_{{source}}-fs {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_{{source}}' role='listitem'><div class='lp_file_loader lpHide' id='lp_file_loader_{{_id}}'></div><div class='lp_chat_arrow_error_overlay lpHide' data-lp-cust-id='transcript_bubble_visitorArrow_error_overlay'></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} lpc_message-arrow-border_{{source}}-fs lpc_message-tail__border_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}ArrowBorder'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} lpc_message-arrow_{{source}}-fs lpc_message-tail_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}Arrow'></div><a class='lp_image_sharing_link' data-lp-point='image_link_{{_id}}' href='#' aria-labelledby='lp_image_caption_{{_id}}'><div class='lp_image_sharing_line_content_wrapper'><img class='lp_image_sharing_line_content'></div></a><div class='lp_image_sharing_upload_error_overlay lpHide'><div class='lp_image_sharing_upload_error'><div class='lp_TranscriptError_wrapper'><span class='lp_error_internal_text'></span></div></div></div><div class='lp_line_state_wrapper'><span id='lp_image_caption_{{_id}}' class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text lpc_message__text_{{source}}-fs lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}_text'>{{previewAttachmentLabel}}</span> <span data-lp-point='lp_line_state' data-lp-cust-id='transcript_time' class='lpc_message-area__indicator lpc_message-area__indicator_{{source}} lpc_message-area__indicator_{{source}}-fs lpc_message-area__indicator_{{avatarCustomModifier}} {{deviceClass}} lp_line_state'>{{state}}</span></div><div class='lp_time_side_wrapper'><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'>{{sideTime}}</div></div></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",
agent:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_image_line_wrapper lp_{{source}} {{stateClass}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{source}}-fs lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}_parent' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{source}}-fs lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='{{sender}}' role='listitem' aria-hidden='true'><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lp_image_sharing_line lpc_message lpc_message_{{source}} lpc_message_{{avatarCustomModifier}} lpc_message_{{source}}-fs {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_{{source}}' role='listitem'><div class='lp_file_loader lpHide' id='lp_file_loader_{{_id}}'></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} lpc_message-arrow-border_{{source}}-fs lpc_message-tail__border_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}ArrowBorder'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} lpc_message-arrow_{{source}}-fs lpc_message-tail_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}Arrow'></div><a class='lp_image_sharing_link' data-lp-point='image_link_{{_id}}' href='#' aria-label='{{file_sent_from}} {{sender}}'><div class='lp_image_sharing_line_content_wrapper'><img class='lp_image_sharing_line_content' alt=''></div></a><div class='lp_image_sharing_upload_error_overlay lpHide'><div class='lp_image_sharing_upload_error'><div class='lp_image lp_failed_photo_upload lpHide'><img src='{{imagesRepository}}/error-icon.svg' alt='' aria-hidden='true'></div><div class='lp_image lp_retry_photo_upload'><img src='{{imagesRepository}}/retry-icon.svg' alt='' aria-hidden='true'></div></div></div><span class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text lpc_message__text_{{source}}-fs lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}_text'>{{text}}</span></div><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time' role='listitem'>{{sideTime}}</div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>"},LPViewMap:{avatarImage:".agent_avatar",lineText:".lp_title_text",image:".lp_image_sharing_line_content",imageWrapper:".lp_image_sharing_line_content_wrapper",loader:"#lp_file_loader_",wrapper:".lp_line_state_wrapper",arrow:".lp_chat_arrow",arrowBorder:".lp_chat_arrow_border",imageLink:"^image_link_",uploadError:".lp_image_sharing_upload_error_overlay",retryUpload:".lp_retry_photo_upload",failedUpload:".lp_failed_photo_upload",lpErrorInternalText:".lp_error_internal_text",lpChatArrowErrorOverlay:".lp_chat_arrow_error_overlay"},initialize:function(a){l=a.appContext.events;m=a.appContext},events:function(){}});n=lpTag.unifiedWindow.FileSharingViewController.prototype;n.createFileContentLine=function(b){if(b){var c=this.getAvatarUrl(b);if(d(b)){this.uniqueId=b.line.sequenceId;this.viewId=b.line.localId;var e=this.getTextInjection(b,c);this.view=this.createView({template:this.lineTemplateFile[b.line.source],wrapWithDiv:!1,callback:a.bind(this,b,c),textInjection:e})}}};n.dispose=function(){lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this);l.unbind({appName:q,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DONE_UPLOADED+":"+this.viewId,func:g,context:this})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a,b,c;lpTag.unifiedWindow.DateLineViewController=lpTag.unifiedWindow.AutoMessageViewController.extend({ControllerName:"DateLineViewController",applicationType:"DateLineViewController",templateFileName:"<div class='lp_chat_line_wrapper lpc_message-area lpc_message-area_date {{deviceClass}}'><div id='lp_date_line_{{_id}}' class='lp_time lp_chat_line_date_message lpc_message-area__timestamp lpc_message-area__timestamp_date {{deviceClass}}' data-lp-cust-id='transcript_message' role='heading' aria-level='3'>{{html}}</div></div>",initialize:function(c){a=c.appContext.events;b=c.appContext},events:function(){}});c=lpTag.unifiedWindow.DateLineViewController.prototype;c.createDateMessage=function(a){this.createAutoMessage.call(this,a)};c.dispose=function(){lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b,c){q=a.line.sequenceId;a.line.paymentMetadata=b;this.view=this.createView({template:this.paymentRequestTemplateFileName,wrapWithDiv:!1,callback:e.bind(this,a,c),textInjection:g.call(this,a,c)})}function b(a,b,c){q=a.line.sequenceId;a.line.paymentMetadata=b;this.view=this.createView({template:this.paymentResponseTemplateFileName,wrapWithDiv:!1,callback:e.bind(this,a,c),textInjection:g.call(this,a,c)})}function c(c,d){var e=[],f=[];if(c&&c.line&&c.line.metadata){e=c.line.metadata.filter(function(a){return a.type&&"PaymentRequest"===a.type});f=c.line.metadata.filter(function(a){return a.type&&"PaymentResponse"===a.type})}e.length>0&&a.call(this,c,e[0],d);f.length>0&&b.call(this,c,f[0],d)}function d(a,b){var c=this.getFirstElement(this.LPViewMap.link,a),d=b.line&&b.line.paymentMetadata?b.line.paymentMetadata.paymentUrl:void 0;c.setAttribute("data-mp-url",d);this.bindViewEvent({view:c,DOMEvent:"click",callback:this.fireClickEvent,context:this})}function e(a,b,c){var e;if(b&&"string"==typeof b){e=this.getFirstElement(this.LPViewMap.avatarImage,c);if(e){e.src=b;e.style.marginBottom="8px"}}a.line&&a.line.paymentMetadata&&"PaymentRequest"===a.line.paymentMetadata.type&&d.call(this,c,a);r.runCallback(a.callback,a.context,{view:c,line:a.line})}function f(a){return a&&a.line&&(a.line.text||a.line.textKey||a.line.json)}function g(a,b){var c,d,e;if(a&&a.line){if(this.lineStateSupported){c=this.translate("messagingState_"+a.line.state);d=a.line.state?this.STATE_CLASS_PREFIX+a.line.state:void 0}var f=a.line.time?this.timeStampManager.getTimeString(a.line.time):"",g=a.line.time?this.timeStampManager.getSideTimeString(a.line.time,!this.timeStampGroupingEnabled):"";e={_id:a.line.localId,source:a.line.source,sender:m.call(this,a.line),time:f,sideTime:g,state:c||"",stateClass:d||"",grouped:a.line.grouped?this.LPClassesMap.grouped[a.line.grouped]:"",imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,checkoutText:this.translate("paymentRequest_CheckoutTitle"),transactionInfo:i(a),checkoutTotal:h.call(this,a.line.paymentMetadata.subtotalAmount,a.line.paymentMetadata.currencyCode),paymentRequestText:"PAY NOW",responseText:this.translate("paymentResponse_ResponseText"),finalPrice:h.call(this,a.line.paymentMetadata.transactionTotalAmount,a.line.paymentMetadata.currencyCode),poweredByTextLeft:this.translate("paymentRequest_PoweredByLeftText"),poweredByTextRight:this.translate("paymentRequest_PoweredByRightText"),html:""};if(a.line.paymentMetadata.lineItems&&a.line.paymentMetadata.lineItems.length>0){var j=this;this.loadResource("<div class='lp_title_text lpc_bottom_gap lpc_message__text lpc_message__text_{{source}} lpc_message__text_card lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_rich_content_text'><div class='lp_maven_payment_request_items'><div class='lp_checkout_items_header'><div class='lp_maven_pay_items_title'>{{YourCart}}</div><div class='lp_maven_pay_items_brand'>{{brandName}}</div></div><div class='lp_checkout_items'>{{html}}</div></div></div>",function(b){a.line.paymentMetadata.lineItems.forEach(function(b){var c=Object.assign({priceFormatted:h.call(this,b.price,a.line.paymentMetadata.currencyCode),imageClass:"",YourCart:j.translate("paymentRequest_YourCart")},b);if(!c.imageUrl){c.imageUrl="";c.imageClass="hide"}j.loadResource("<div class='lp_checkout_item_row'><div class='item_image {{imageClass}}'><img src='{{imageUrl}}' alt='Image of {{name}}'></div><div class='item_texts'><div class='item_name' title='{{name}}'>{{name}}</div><div class='item_description'>{{description}}</div></div><div class='item_price' title='{{priceFormatted}}'>{{priceFormatted}}</div></div>",function(a){var b=j.injectTextDefaults(a,c);e.html+=b})});e.brandName=a.line.paymentMetadata.brandName;var c=j.injectTextDefaults(b,e);e.html=c})}if(b&&"string"==typeof b){e.avatarVisibility=this.LPClassesMap.avatarDisplay;e.avatarCustomModifier=this.LPCustomizationClasses.avatarDisplay}else{e.avatarVisibility=this.LPClassesMap.avatarHidden;e.avatarCustomModifier=this.LPCustomizationClasses.avatarHidden}}return e}function h(a,b){b||(b="USD");return new Intl.NumberFormat(this.language,{style:"currency",currency:b,currencyDisplay:"narrowSymbol"}).format(a)}function i(a){if(a&&a.line&&a.line.paymentMetadata){var b=a.line.paymentMetadata.brandTransactionLabel||a.line.paymentMetadata.transactionLabel,c=a.line.paymentMetadata.brandTransactionId||a.line.paymentMetadata.transactionId;if(b&&c&&"string"==typeof b&&"string"==typeof c&&b.length>0&&c.length>0)return b+" "+c}return""}function j(a){var b,c=this.appContext.conf.windowConf.agentAvatar;if(c===!0||"true"===c){b=k.call(this,a.line.originatorId)||l.call(this,a.line);"string"!=typeof b&&(b=this.appContext.conf.windowConf.agentAvatarUrl)}return b}function k(a){var b=this.getModelParam(this.chatPath.PARTICIPANTS)||{};return b&&b[a]&&b[a].imgUrl}function l(a){var b=this.getModelParam(this.uiPath.AGENT_PICTURE_URL);return a.agentPictureUrl||b&&b[a.by]}function m(a){var b="";switch(a.source){case"agent":b=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.by).cleanText}return b}var n,o,p,q,r=lpTag.lpUtils,s=lpTag.unifiedWindow.log;lpTag.unifiedWindow.MavenPayLineViewController=lpTag.unifiedWindow.ChatLineViewController.extend({ControllerName:"MavenPayLineViewController",applicationType:"MavenPayLineViewController",paymentRequestTemplateFileName:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='{{sender}}' role='listitem' aria-hidden='true'><div id='lp_line_bubble_{{_id}}' tabindex='0' class='lp_maven_payment_line lp_maven_payment_request_line lpc_message lpc_message_{{source}} lpc_message_card lpc_message_{{avatarCustomModifier}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_rich_content' role='listitem'>{{html}}<div class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text_card lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_rich_content_text'><div class='lp_maven_payment_request'><div class='lp_checkout_summary'><img class='lp_maven_pay_request_icon' alt='secure lock icon' src='{{imagesRepository}}/maven-pay-request-icon.png'><div class='lp_summary_text'><div role='heading' aria-level='3' class='checkout_text'>{{checkoutText}}</div><div class='transaction_info'>{{transactionInfo}}</div><div class='checkout_total'>{{checkoutTotal}}</div></div></div><button class='lp_payment_request_button lp_maven_pay_line'>{{paymentRequestText}}</button><div class='lp_powered_by'>{{poweredByTextLeft}} <img class='lp_maven_powered_icon' alt='maven pay logo' src='{{imagesRepository}}/maven-pay-icon.png'> {{poweredByTextRight}}</div></div></div></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",paymentResponseTemplateFileName:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' role='list'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='{{sender}}' role='listitem' aria-hidden='true'><div id='lp_line_bubble_{{_id}}' class='lp_maven_payment_line lp_maven_payment_response_line lpc_message lpc_message_{{source}} lpc_message_card lpc_message_{{avatarCustomModifier}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_rich_content' role='listitem'>{{html}}<div class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text_card lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_rich_content_text'><div class='lp_maven_payment_response'><div class='lp_success_summary'><img class='lp_maven_pay_response_icon' alt='success check mark' src='{{imagesRepository}}/maven-pay-response-icon.png'><div class='lp_summary_text'><div role='heading' aria-level='3' class='response_text'>{{responseText}}</div><div class='transaction_info'>{{transactionInfo}}</div><div class='final_price'>{{finalPrice}}</div></div></div><div class='lp_powered_by'>{{poweredByTextLeft}} <img class='lp_maven_powered_icon' alt='maven pay logo' src='{{imagesRepository}}/maven-pay-icon.png'> {{poweredByTextRight}}</div></div></div></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' data-lp-cust-id='transcript_time' role='listitem'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",appName:"mavenPay",sanitize:!0,LINK_TEMPLATE:"maven_pay_link.html",TITLE_KEY_PREFIX:"mavenPay_link_title_",LPViewMap:{link:".lp_maven_pay_line"},LPClassesMap:{link:"lp_maven_pay_line"},initialize:function(a){n=a.appContext.events;o=a.appContext.conf.engConf.lang||a.appContext.conf.windowConf.lang;this.lineStateSupported=a.appContext.conf.engConf.async;this.hide()},events:function(){}});p=lpTag.unifiedWindow.MavenPayLineViewController.prototype;p.dispose=function(){lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};p.createMavenPayLine=function(a){try{if(a&&f(a)){var b=j.call(this,a);c.call(this,a,b)}}catch(d){s.error("Error rendering maven pay: "+d)}};p.fireClickEvent=function(a){var b=a&&a.currentTarget&&a.currentTarget.getAttribute("data-mp-url");this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.MAVEN_PAY,eventName:lpTag.unifiedWindow.consts.MavenPay.LINK_CLICKED,data:{url:b}});this.currentOpenMPLink=a.sourceElement}}();!function(){function a(a){var b=a.keyCode,c=9===b||"Tab"===b.key;if(c){this._showInformation();var d=this.overlay.querySelectorAll('a:not([tabindex="-1"]), button:not([tabindex="-1"]), input:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"]), iframe:not([tabindex="-1"])');if(0!==d.length){var e=d[0],f=d[d.length-1];if(c&&a.target===f){a.preventDefault();e.focus()}if(c&&a.shiftKey&&a.target===e){a.preventDefault();f.focus()}}}}function b(b){this.closeButton=this.getFirstElement(m.closeButton,b);this.downloadButton=this.getFirstElement(m.downloadButton,b);this.downloadMessage=this.getFirstElement(m.downloadMessage,b);this.loader=this.getFirstElement(m.loader,b);this.image=this.getFirstElement(m.image,b);this.title=this.getFirstElement(m.title,b);this.caption=this.getFirstElement(m.caption,b);this.overlay=this.getFirstElement(m.overlay,b);this.closeButton.onclick=e.bind(this);this.closeButton.onkeypress=e.bind(this);this.image.onload=c.bind(this);this.image.onerror=e.bind(this);if(this.type){this.addClass(this.image,"clickable");this.image.onclick=f.bind(this);this.removeClass(this.downloadMessage,"lpHide");this.removeClass(this.downloadButton,"lpHide");this.downloadMessage.onclick=f.bind(this);this.downloadButton.onclick=f.bind(this)}this.downloadButton.classList.contains(".lpHide")&&this.downloadButton.setAttribute("tabindex","-1");this._hideInformation=j.bind(this);this._showInformation=i.bind(this);if(this.appContext.deviceDetector.isDesktop()){this.bindViewEvent({selector:m.overlay,callback:i,DOMEvent:"mousemove",context:this});this.bindViewEvent({selector:m.overlay,callback:j,DOMEvent:"mouseleave",context:this});this._hideInformation()}else this.bindViewEvent({selector:m.image,callback:g,DOMEvent:"click",context:this});this.bindViewEvent({selector:m.overlay,callback:h,DOMEvent:"click",context:this});this.bindViewEvent({selector:m.overlay,DOMEvent:"keydown",callback:a,context:this});k.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.SHOW_PREVIEW,data:b})}function c(){this.addClass(this.loader,"lpHide");v=!0;this._showInformation();if(this.captionText.length>0){this.removeClass(this.caption,"lpHide");this.caption.setAttribute("tabindex","0");window.addEventListener("resize",d.bind(this));d.call(this)}else if(this.type){window.addEventListener("resize",d.bind(this));d.call(this)}this.downloadButton.classList.contains("lpHide")&&this.downloadButton.remove();this._showInformation()}function d(){if(this.image){var a=this.type&&this.captionText.length?q:0,b=this.type&&this.captionText.length?a+p+this.caption.clientHeight:0,c=this.image.offsetHeight+this.image.offsetTop-this.caption.clientHeight+o+b;this.caption.style.top=c+"px";c+this.caption.clientHeight>window.innerHeight&&window.innerHeight-c>0&&(this.caption.style.height=window.innerHeight-c+"px");var d=this.image.offsetLeft-o-4*a;0>d&&(d=0);this.caption.style.left=d+"px";var e=this.image.width+2*o+8*a;e>window.innerWidth&&(e=window.innerWidth);this.caption.style.width=e+"px";this.downloadMessage.style.top=this.image.offsetHeight+this.image.offsetTop+p+"px";this.downloadMessage.style.left=this.image.offsetLeft+this.image.offsetWidth/2-this.downloadMessage.offsetWidth/2-q/2+"px";this.downloadButton.style.top=this.image.offsetHeight+this.image.offsetTop+p+"px";this.downloadButton.style.left=this.image.offsetLeft+this.image.offsetWidth/2+this.downloadMessage.offsetWidth/2+"px"}}function e(){k.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.OVERLAY_CLOSED});window.removeEventListener("resize",d.bind(this));this.dispose();v=!1}function f(){k.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DOWNLOAD_REQUEST,data:{fileData:this.line&&this.line.fileData,convId:this.line&&this.line.convId,download:!0}})}function g(){u?this._hideInformation():this._showInformation()}function h(a){var b=this.hasClass(a.target,r);b&&b.length>0&&b[0]&&e.call(this)}function i(){if(!u){u=!0;this.animate(this.closeButton,{duration:t,opacity:"1"});this.animate(this.title,{duration:t,opacity:"1"});this.captionText.length>=0&&this.animate(this.caption,{duration:t,opacity:"1"})}if(this.appContext.deviceDetector.isDesktop()){clearTimeout(l);l=setTimeout(this._hideInformation,3e5)}}function j(){u=!1;this.animate(this.closeButton,{duration:s,opacity:"0"});this.animate(this.title,{duration:s,opacity:"0"});this.captionText&&this.captionText.length>=0&&this.animate(this.caption,{duration:s,opacity:"0"});v&&this.appContext.deviceDetector.isDesktop()&&clearTimeout(l)}var k,l,m={closeButton:".close_overlay",downloadButton:".lp_download_inline",downloadMessage:".lp_preview_download_message",loader:".lp_file_loader",image:".lp_preview_image",title:".lp_preview_title",caption:".lp_preview_caption",overlay:".lp_overlay"},n="{{dayOfMonth}} {{month}}, {{hour}}:{{minutes}} {{ampm}}",o=1,p=5,q=40,r="lp_overlay",s=300,t=300,u=!0,v=!0;lpTag.unifiedWindow.PhotoOverlayViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"PhotoOverlayViewController",initialize:function(a){this.appContext=k=a.appContext;this.imageURL=a.imageURL;this.timestamp=this.getTimestampString(a.timestamp);this.captionText=a.caption||"";this.line=a.line;this.type=a.type},render:function(){this.view=this.createView({template:"<div class='lp_overlay' role='dialog' aria-modal='true' aria-label='{{previewAttachmentLabel}}'><div class='lp_overlay_header'></div><div class='lp_preview_title' tabindex='-1' aria-label='{{timeStamp}}'>{{timeStamp}}</div><button title='{{tooltip_Close}}' aria-label='{{tooltip_Close}}' class='lp_close close_overlay' data-lp-point='close' role='button'><img src='{{imagesRepository}}/close-icon.svg' alt='{{tooltip_Close}}'></button><div class='lp_file_loader'></div><img src='{{imageURL}}' class='lp_preview_image'><div class='lp_preview_caption lpHide' aria-label='{{caption}}'>{{caption}}</div><div class='lp_preview_download_message lpHide'>{{tooltip_Download}}</div><button title='{{tooltip_Download}}' aria-label='{{tooltip_Download}}' class='lp_download lp_download_inline lpHide' data-lp-point='download' role='button'><img src='{{imagesRepository}}/download-icon.png' alt='{{tooltip_Download}}'></button></div>",wrapWithDiv:!1,callback:b.bind(this),textInjection:{tooltip_Close:this.translate("close")||"close",previewAttachmentLabel:this.translate("attachedImageLabel")||"Attached image",imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,imageURL:this.imageURL,timeStamp:this.timestamp,caption:this.captionText}});this.closeButton.focus()},getTimestampString:function(a){var b=new Date(a),c="";if(b.getTime()){var d=b.getMonth(),e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=this.getMonthNames(),i="",j="am";h&&(i=h[d]);var k=(10>g?"0":"")+g;if(f>=12){j="pm";f>=13&&(f-=12)}else 1>f&&(f+=12);c=this.templateString(n,{month:i,dayOfMonth:e,hour:f,minutes:k,ampm:j})}return c}})}();!function(){function a(a){h.call(this,this.sendIconType,a);this.closeButton=this.getFirstElement(j.closeButton,a);this.sendIconTypeToUse=this.sendIconType===this.BUTTON_TYPES.PAPER_PLANE?j.paperPlaneButton:j.arrowIconButton;this.submitButton=this.getFirstElement(this.sendIconTypeToUse,a);this.imageElement=this.getFirstElement(j.image,a);this.captionView=this.getFirstElement(j.caption,a);this.overlayElement=this.getFirstElement(j.overlay,a);this.closeButton.onclick=c.bind(this,!0);this.submitButton.onclick=c.bind(this,!1);this.textarea=new lpTag.unifiedWindow.ExpandableTextAreaViewController({appContext:this.appContext,targetView:this.getFirstElement(j.inputContainer,a),minRows:1,maxRows:10,resizeCallback:e,context:this});this.textareaDomEl=this.textarea.textarea;this.textareaDomEl.placeholder=this.translate("attachmentCaptionLabel")||"Attachment caption";this.addClass(this.textareaDomEl,k.TEXT_AREA_CLASS);d.call(this);this.bindViewEvent({selector:j.input,callback:g,DOMEvent:"keypress",context:this});setTimeout(function(){this.textareaDomEl.addEventListener("keyup",b.bind(this))}.bind(this));i.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_SHOW,data:a});this.appContext.deviceDetector.isDesktop()&&(this.appContext.deviceDetector.isIE()?setTimeout(function(){this.textareaDomEl.focus()}.bind(this),100):this.textareaDomEl.focus())}function b(a){"Escape"===a.key&&c.call(this,!0)}function c(a){this.removeClass(this.overlayElement,k.OPEN_PREVIEW_CLASS);a||i.uiStateManager.setActionsVisibility(!1);setTimeout(function(b){var c={caption:b.textarea.getValue(),image:b.image};i.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_CLOSED,data:a?!1:c});b.dispose()},k.IMAGE_TRANSITION_TIME,this)}function d(){var a=this.imageElement,b=this.overlayElement,c=this;if(this.type){a.style["background-image"]="url('"+this.appContext.conf.unifiedConf.imagesRepository+"/"+this.type.toLowerCase()+".png')";this.addClass(a,"icon");setTimeout(function(){c.addClass(b,k.OPEN_PREVIEW_CLASS)},10)}else{var d=new FileReader,e=new Image;d.onloadend=function(){e.src=d.result;e.onload=function(){a.style["background-image"]="url('"+d.result+"')";setTimeout(function(){c.addClass(b,k.OPEN_PREVIEW_CLASS)},10)}};d.readAsDataURL(this.image)}}function e(a){this.captionView.style.height=a+k.INPUT_MARGIN_HEIGHT+"px"}function f(a){return"which"in a?a.which:a.keyCode}function g(a){var b=f(a);if(13===b){a.stopPropagation();a.preventDefault();c.call(this,!1)}}function h(a,b){var c=this.getFirstElement(j.arrowIconButton,b),d=this.getFirstElement(j.paperPlaneButton,b);if(a===this.BUTTON_TYPES.PAPER_PLANE){this.hide(c);this.show(d)}else{this.hide(d);this.show(c)}}var i,j={closeButton:".lp_close",image:".lp_image_preview",overlay:".lp_image_preview_background",contentWrapper:".lp_image_preview_content",inputContainer:".lp_input_area",caption:".lp_preview_caption",arrowIconButton:".lp_send_button",paperPlaneButton:"^paper_plane_button",input:".photoPreviewCaption"},k={OPEN_PREVIEW_CLASS:"open",INPUT_MARGIN_HEIGHT:20,IMAGE_TRANSITION_TIME:500,TEXT_AREA_CLASS:"photoPreviewCaption"};lpTag.unifiedWindow.PhotoPreviewViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"PhotoPreviewViewController",BUTTON_TYPES:{ARROW:"arrow",PAPER_PLANE:"paper_plane"},initialize:function(a){this.appContext=i=a.appContext;this.image=a.image;this.type=a.type;this.featureStateManager=this.appContext.featureStateManager;this.sendIconType=this.featureStateManager.getSendIconType()},render:function(){this.view=this.createView({template:"<div class='lp_image_preview_background' aria-modal='true' role='dialog' aria-labelledby='preview-header'><div class='lp_image_preview_content'><div class='lp_preview_close_wrapper'><button aria-label='{{closeAttachmentLabel}}' class='lp_close' data-lp-point='close' role='button'><span class='lp_close-icon' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_Close}}'></span></button></div><div class='lp_image_preview_wrapper'><h3 id='preview-header'>{{fileAttachmentPreviewLabel}}</h3><div class='lp_image_preview'></div><div class='lp_preview_caption lp_bottom_area'><div class='lp_input_area'></div><button class='lp_paper_plane_button lpc_composer__send-button {{deviceClass}}' data-lp-point='paper_plane_button' title='{{tooltip_SendIcon}}'><span class='lp_paper_plane-icon' data-lp-type='icon' data-lp-point='paper_plane_button_image'><svg class='lpc_composer__send-button-asset {{deviceClass}}' width='22px' height='22px' viewBox='0 0 22 22' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g id='ic/light/send' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><polygon id='Fill-7' points='0 22 22 22 22 0 0 0'></polygon><path d='M19.5,2.23218009 L19.5,17.619667 C19.5,18.1533381 18.9468217,18.5072492 18.4622874,18.2835724 L13.0202349,15.7713436 L8.67092037,20.2745151 C8.21407533,20.747521 7.41372181,20.4241223 7.41372181,19.7665191 L7.41372181,12.9910246 L2.00514597,11.2319965 C1.38375428,11.0299017 1.31921893,10.1763787 1.90315878,9.88314805 L18.4406226,1.57871144 C18.9268923,1.33452671 19.5,1.68804369 19.5,2.23218009 Z M18.5250237,2.62732828 L2.87073871,10.4882687 L8.38869809,12.2828715 L8.38869809,19.1632964 L12.8000787,14.5958634 L18.5250237,17.2386846 L18.5250237,2.62732828 Z M10.3411214,11.5458808 L9.95124199,11.1235575 C9.87631682,11.0423975 9.88137122,10.9158654 9.96253129,10.8409402 C9.96409632,10.8394954 9.96568434,10.8380757 9.96729473,10.8366816 L14.5930363,6.83228649 C14.6746678,6.76161998 14.7976521,6.76850182 14.8708901,6.84783439 L15.2607695,7.27015767 C15.3356947,7.35131775 15.3306403,7.47784983 15.2494802,7.55277499 C15.2479152,7.5542198 15.2463272,7.55563951 15.2447168,7.55703359 L10.6189753,11.5614287 C10.5373437,11.6320952 10.4143594,11.6252134 10.3411214,11.5458808 Z' fill='#000000'></path></g></svg></span></button> <button class='lp_send_button' title='{{tooltip_SendIcon}}' aria-label='{{tooltip_SendIcon}}' role='button'><span class='lp_send-icon' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png' alt=''></span></button></div></div></div></div>",wrapWithDiv:!1,callback:a.bind(this),textInjection:{tooltip_Close:this.translate("close")||"close",imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,iconsRepository:this.appContext.conf.unifiedConf.iconsRepository,image:this.image}})}})}();!function(){function a(a,c,d){b(a,c,d);e(c)}function b(a,b,c){try{var d=q.conf&&q.conf.unifiedConf&&q.conf.unifiedConf.rowLimit||3,e=b.quickReplies.accessibility||{},f=lpTag.unifiedWindow.language&&lpTag.unifiedWindow.language.isRTL(lpTag.unifiedWindow.language.getLocale());s=new u({el:a,items:b.quickReplies.replies,rowSize:b.quickReplies.itemsPerRow,rowLimit:d,rowWrap:c.welcomeMessage.wrapQuickReplies,accessibility:b.quickReplies.accessibility,renderer:u.Renderer.StructuredContentButton,direction:f?"rtl":"ltr"});var g=a.childNodes[a.childNodes.length-1];if(g){e.web&&e.web.role||g.setAttribute("role","group");g.setAttribute("aria-labelledby","lp_line_"+b.localId);c&&c.agentAvatar&&(g.style.marginLeft="37px")}}catch(h){w.error("error when trying to render quick replies: "+h.message,t)}}function c(a){if(s){s.readonly(a);for(var b=s.el&&lpTag.lpUtils.getElementsByClass(s.el,"chips-item",[]),c=0;c<b.length;c++){var d=b[c];d.disabled=a;d.style.opacity=a?"0.5":"1.0"}}else w.debug("no chips instance to set readonly, skipping",t)}function d(){if(s){s.dispose();s=null}else w.debug("no chips instance to dispose, skipping",t)}function e(a){if(s){s.on("action:publishText",k(h.bind(null,a)));s.on("action:link",k(i.bind(null,a)));s.on("action:navigate",k(j.bind(null,a)))}else w.debug("no chips instance to bind, skipping",t)}function f(){if(s){s.off("action:publishText");s.off("action:link");s.off("action:navigate")}else w.debug("no chips instance to unbind, skipping",t)}function g(a,b,c){r.trigger({appName:y,eventName:c,data:{payload:b,sequenceId:a.sequenceId}})}function h(a,b){g(a,l(b),z.ACTION_EVENT);g(a,b,z.PUBLISH_TEXT)}function i(a,b){var c=n(b);c&&window.open(c,"_blank");g(a,l(b),z.ACTION_EVENT)}function j(a,b){var c=o(b);c&&window.open(c,"_blank");g(a,l(b),z.ACTION_EVENT)}function k(a){return function(){f();d();return a.apply(null,arguments)}}function l(a){return a&&a.metadata||[]}function m(a){return a&&a.action||{}}function n(a){var b=m(a);return b.web&&b.web.uri||b.uri}function o(a){var b=m(a),c={query:b.la+","+b.lo};return v.addQueryParams(x.googleMapsUrl,c)}window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};
var p,q,r,s,t="QuickRepliesDecorator",u=lpTag.chips["default"],v=lpTag.taglets.lpUtil,w=lpTag.unifiedWindow.log,x=lpTag.unifiedWindow.consts,y=lpTag.unifiedWindow.apps.QUICK_REPLIES,z=lpTag.unifiedWindow.quickRepliesStates;lpTag.unifiedWindow.QuickRepliesDecorator=lpTag.unifiedWindow.QuickRepliesDecorator||function(a){w.info("construct",t);q=a.appContext;r=a.appContext.events};p=lpTag.unifiedWindow.QuickRepliesDecorator.prototype;p.decorate=a;p.dispose=d;p.readOnly=c}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){var c=this.translate("surveyRequireField");switch(a){case this.QUESTION_TYPE.CHECKBOX:c=b&&b.length>1?this.translate("surveyRequireCheckbox"):this.translate("surveyRequireOption");break;case this.QUESTION_TYPE.RADIO:case this.QUESTION_TYPE.RADIO_HORIZONTAL:case this.QUESTION_TYPE.SELECT:c=this.translate("surveyRequireOption")}return c}function b(){for(var a,b=this.surveyLogic.getAllQuestions(!0),d=0;d<b.length;++d){a=this.createQuestion(b[d]);this.questionViews.push(a);this.appContext.deviceDetector.isIOS()&&this.bindViewEvent({view:this.questionViews[d],DOMEvent:"touchstart",callback:this.viewTapped})}f.call(this)&&(this.isSubmitSurveyDisabled=!0);this.pagingVC=new lpTag.unifiedWindow.PagingViewController({onInitialize:c(this),submitCallback:g,cancelCallback:h,validatorCallback:this.validateQuestionOnNext,activeIndexCallback:this.onActiveIndexChange,context:this,template:"<div class='lp_survey_view_container lpc_survey-area {{deviceClass}}' data-lp-cust-id='surveyArea'><div class='lp_pages_area' data-lp-point='pages_area'></div><div class='lp_pagination-area'><div class='lp_buttons_area'><button class='lp_prev_button lpc_survey-area__previous-button {{deviceClass}}' data-lp-point='prev_button' data-lp-cust-id='cancel_button'>{{back}}</button> <button class='lp_cancel_button lpc_survey-area__cancel-button {{deviceClass}}' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_next_button lpc_survey-area__next-button {{deviceClass}}' data-lp-point='next_button' data-lp-cust-id='button'>{{next}}</button> <button class='lp_submit_button lpc_survey-area__submit-button {{deviceClass}}' data-lp-point='submit_button' data-lp-cust-id='button' aria-describedby='disclaimer-id'>{{submit}}</button> <button class='lp_close_survey_button lpc_survey-area__close-button {{deviceClass}}' data-lp-point='close_survey_button' data-lp-cust-id='close_survey_button'>{{close}}</button></div><div class='lp_pager' data-lp-point='pager'></div></div></div>",appContext:this.appContext,pages:this.questionViews,target:this.LPViewMap.container,parent:this,headerText:this.headerText,footerText:this.footerText,textInjection:l.call(this,b.length),isLogicalSurvey:this.isLogicalSurvey,activeQuestions:this.surveyLogic.getActiveQuestionsIds()})}function c(a){return function(){d.call(a);this.onInitialize&&this.onInitialize()}}function d(){var a=!this.appContext.deviceDetector.isDesktop();a&&this.questionViews&&this.questionViews[0]&&this.questionViews[0].question.type===this.QUESTION_TYPE.CSAT?e():this.isFocusInsideApp()&&this.questionViews&&this.questionViews[0]&&"function"==typeof this.questionViews[0].setFocus&&this.questionViews[0].setFocus()}function e(){document.activeElement.blur()}function f(){return this.questionViews&&this.questionViews[0]&&this.questionViews[0].question.type===this.QUESTION_TYPE.CSAT?!0:!1}function g(){var a;if(this.validateSurvey()){a=this.surveyLogic.getJSONSurvey();a&&i.call(this,{survey:a.survey,status:a.survey&&a.survey.question.length>0?this.consts.csatStatus.FILLED:this.consts.csatStatus.SKIPPED,onError:this.onSubmitError,context:this})}}function h(){var a,b=this.surveyType,c=this.appContext;a=this.sendDataOnCancel?{status:this.consts.csatStatus.SKIPPED}:null;i.call(this,a);lpTag.hooks&&lpTag.hooks.exec&&lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_ABANDONED_SURVEY,data:{context:c,surveyType:b,surveyData:a}})}function i(a){var b,c;switch(this.surveyType){case lpTag.unifiedWindow.SurveyType.PRE_CHAT:b=lpTag.unifiedWindow.events.application.PRE_CHAT_SURVEY;break;case lpTag.unifiedWindow.SurveyType.EXIT_CHAT:a&&a.survey&&(a.survey.emailTranscriptSubject="Your chat transcript");b=lpTag.unifiedWindow.events.application.POST_CHAT_SURVEY;break;case lpTag.unifiedWindow.SurveyType.OFFLINE:b=lpTag.unifiedWindow.events.application.OFFLINE_SURVEY;break;case lpTag.unifiedWindow.SurveyType.PRE_SMS:b=a&&a.survey?lpTag.unifiedWindow.events.application.PRE_SMS_FORM:lpTag.unifiedWindow.events.application.PRE_SMS_FORM_EXIT;break;default:b=lpTag.unifiedWindow.events.application.OFFLINE_SURVEY}if(lpTag.hooks&&lpTag.hooks.exec){c=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.BEFORE_SUBMIT_SURVEY,data:{surveyType:b,questionsInfo:this.surveyLogic.getAllQuestions(),surveyData:a}});a=c&&c.data&&c.data.surveyData||a}this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:b,data:a})}function j(a){var b=a.newValue;this.pagingVC&&(b===lpTag.unifiedWindow.State.CONNECTION_ISSUE?this.pagingVC.enableSubmit(!1):this.pagingVC.enableSubmit(!0))}function k(a,b){if(a)for(var c=0;c<a.length;c++)if(a[c].id===b)return c;return-1}function l(a){if(a>0)return{};switch(this.surveyType){case lpTag.unifiedWindow.SurveyType.PRE_CHAT:return{submit:this.appContext.translator.translate("startChat")};case lpTag.unifiedWindow.SurveyType.EXIT_CHAT:case lpTag.unifiedWindow.SurveyType.OFFLINE:this.isCloseSurveyVisible=!0;return{};default:return{}}}function m(a,b,c,d){if(c){a.setAttribute("aria-label",d);a.setAttribute("role","region")}else{a.setAttribute("aria-live","polite");a.setAttribute("role","dialog");a.setAttribute("aria-modal","true")}}function n(a){if(!s){var b=this.appContext.deviceDetector.isDesktop();if(0!==this.questionViews.length&&t&&r){var c=this.questionViews&&this.questionViews[0];if(a===c){var d=this.view.getElementsByClassName("lp_survey_container");if(d&&d.length>0){var e=d[0];e.setAttribute("aria-label",r);c.revertLabel(b);r=null}}}}}function o(a){if(!a.questions||!a.questions.question)return!1;for(var b=!1,c=a.questions.question,d=0;d<c.length;d++)if(c[d]&&c[d].entry&&c[d].entry[0]&&c[d].entry[0].logic){b=!0;break}return b}var p,q=lpTag.taglets.lpUtil,r=null,s=!1,t=!1,u=150;lpTag.unifiedWindow.SurveyViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SurveyViewController",applicationType:"SurveyViewController",className:"lp_survey_area",errorTemplateFileName:"<div class='{{wrapperClass}}wrapper' role='alert'><img class='lp_error_img' src='{{url}}' alt='{{error}}'><div id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' aria-live='polite'>{{text}}</div></div>",QUESTION_TYPE:{TEXT_FIELD:"Text Field",TEXT_AREA:"Text Area",SELECT:"Dropdown Box",RADIO:"Radio Button",RADIO_HORIZONTAL:"Radio Button (side by side)",CHECKBOX:"Checkbox",CSAT:"CSAT"},VALIDATION_TYPE:{PHONE:"phoneNumber"},LPViewMap:{lpSurveyArea:".lp_survey_area",question:".lp_question",label:".lp_question_label",container:".lp_survey_container",surveyView:".lp_survey_view_container",headerError:".lp_survey_header_error",headerArea:".lpc_maximized-header",stars:"^star",cancelButton:"^cancel_button",ratingDiv:"^current_rating"},LPClassMap:{content:"lp_lpview_content",headerError:"lp_survey_header_error",SurveyError:"lp_surveyError_",logo_top_margin:"lp_logo_top_margin"},LPCustomizationClass:{logo_top_margin:"lpc_survey-area_logo"},questionTemplates:["<input id='{{id}}' class='lp_input-field' aria-labelledby='{{ariaLabel}}' type='{{type}}' placeholder='{{defaultTextArea}}' aria-required='{{isMandatory}}'>","<span class='lp_radio_button'><input id='{{inputId}}' role='radio' type='radio' value='{{value}}' aria-labelledby='label-{{inputId}}' name='{{name}}'><label for='{{inputId}}' id='label-{{inputId}}'>{{label}}</label></span>","<select id='{{id}}' class='lp_select_field' role='listbox' aria-labelledby='{{ariaLabel}}' aria-required='{{isMandatory}}'></select>","<div class='lp_checkbox_button'><input id='{{inputId}}' type='checkbox' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></div>","<div class='lp_question'><div id='{{id}}' class='lp_question_label lpc_survey-area__question-label {{deviceClass}}'>{{label}}</div><div class='lp_lpview_content lp_content lpc_survey-area__question-content {{deviceClass}}'></div></div>","<textarea id='{{id}}' class='lp_textarea_field' aria-labelledby='{{ariaLabel}}' type='{{type}}' aria-required='{{isMandatory}}'></textarea>","<div id='{{id}}' class='lp_csat_rater lpc_survey-area__question-content {{deviceClass}}'><form><fieldset class='lp_csat_rater_stars' data-lp-point='stars-area' data-lp-cust-id='stars-area'><a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='5' aria-pressed='false' aria-label='{{labelStar5}} 5 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='4' aria-pressed='false' aria-label='{{labelStar4}} 4 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='3' aria-pressed='false' aria-label='{{labelStar3}} 3 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='2' aria-pressed='false' aria-label='{{labelStar2}} 2 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='1' aria-pressed='false' aria-label='{{labelStar1}} 1 {{of}} {{numberOfStars}}'></a></fieldset></form><div class='lp_csat_rater_current_rating lpc_survey-area__current-rating {{deviceClass}}' data-lp-point='current_rating'>{{rating}}</div><div id='disclaimer-id' class='lp_survey_disclaimer lpc_survey-area__disclaimer {{deviceClass}}'>{{csatDisclaimer}}</div></div>","<div class='{{wrapperClass}}wrapper' role='alert'><img class='lp_error_img' src='{{url}}' alt='{{error}}'><div id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' aria-live='polite'>{{text}}</div></div>"],initialize:function(a){r=null;t=!1;var c,d=a.survey&&a.survey.newValue;this.hasHeaderError=!1;this.isCloseSurveyVisible=!1;this.isSubmitSurveyDisabled=!1;this.activeIndex=0;this.questionViews=[];this.models=a.models;this.iconsRepository=a.iconsRepository;this.imagesRepository=a.imagesRepository;this.errorIconURL=this.imagesRepository+"/error-15x15.png";this.appContext=a.appContext;this.surveyType=a.surveyType;this.defaultSelect=a.defaultSelect;this.sendDataOnCancel=this.appContext.conf.engConf.async;this.consts=lpTag.unifiedWindow.consts;this.addLogo=q.getPropertyFromObject(this.appContext,"conf.windowConf.logoPinToTop");this.deviceClass=lpTag.unifiedWindow.customization.deviceClass;this.view.setAttribute("data-lp-cust-id","surveyArea");this.createView({elementType:"div",className:"lp_survey_bottom_spacer"});c=this.createView({elementType:"div",className:"lp_survey_container"});c.classList.add("lpc_survey-area-wrapper");c.classList.add(this.deviceClass);c.setAttribute("data-lp-cust-id","surveyArea");s=!this.appContext.deviceDetector.isDesktop()&&this.appContext.deviceDetector.isIOS();var e=this.appContext.translator.translate("surveyLabel")||"Complete the survey";m(c,d,this.appContext.deviceDetector.isDesktop(),e);if(d){this.headerText=d.header;this.headerText=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(this.headerText).cleanText;this.footerText=d.footer;this.footerText=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(this.footerText).cleanText;this.isLogicalSurvey=o(d);this.surveyLogic=new lpTag.taglets.SurveyLogic({survey:d});this.loadResource(this.questionTemplates,b)}if(this.addLogo){q.addClass(this.getFirstElement(this.LPViewMap.lpSurveyArea),this.LPClassMap.logo_top_margin);q.addClass(this.getFirstElement(this.LPViewMap.lpSurveyArea),this.LPCustomizationClasses.logo_top_margin)}},render:function(){this.customize(this.view)},events:function(){0!==this.questionViews.length&&this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:d});this.appContext.deviceDetector.isDesktop()?this.preventScroll({selector:this.LPViewMap.container,inView:this.view}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.view.parentNode});this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,this.onActiveIndexChange,this);this.bindModel({path:this.uiPath.STATE,callback:j,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.chat.SURVEY_ERROR,context:this,func:this.onSubmitError});this.appContext.events.bind({appName:"survey",eventName:this.EventName.chat.SURVEY_SERVER_ERROR,context:this,func:this.onSubmitServerError});this.appContext.events.bind({appName:"survey",eventName:"blur",func:this.validateQuestionOnBlur,context:this});this.appContext.events.bind({appName:"survey",eventName:"submitAnswer",func:this.submitAnswer,context:this});this.appContext.deviceDetector.isIOS()&&this.bindViewEvent({selector:this.LPViewMap.container,DOMEvent:"touchstart",callback:this.viewTapped});0!==this.questionViews.length&&this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:d});this.appContext.deviceDetector.isDesktop()?this.preventScroll({selector:this.LPViewMap.container,inView:this.view}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.view.parentNode});this.bindViewEvent({view:this.getFirstElement(this.LPViewMap.cancelButton),DOMEvent:"keydown",callback:this.handleCancelFocus,context:this});this.bindViewEvent({view:this.getFirstElement(this.LPViewMap.ratingDiv),DOMEvent:"keydown",callback:this.handleRatingFocus,context:this});this.bindViewEvent({selector:this.LPViewMap.surveyView,DOMEvent:"keydown",callback:this.handleFocus})}});p=lpTag.unifiedWindow.SurveyViewController.prototype;p.handleRatingFocus=function(a){var b=document.querySelector(".lp_csat_rater_stars a:first-child"),c=document.getElementsByClassName("lp_csat_rater_current_rating")[0],d=a.keyCode;if(9===d&&a.shiftKey&&c){a.preventDefault();b.focus()}else;};p.handleCancelFocus=function(a){var b=document.querySelector(".lp_csat_rater_stars a:first-child"),c=document.getElementsByClassName("lp_csat_rater_current_rating")[0],d=c.innerHTML.trim(),e=a.keyCode;if(9===e&&a.shiftKey&&b){if(""!==d){a.preventDefault();c.focus();return}a.preventDefault();b.focus()}else;};p.viewTapped=function(a){"INPUT"===document.activeElement.tagName&&"INPUT"!==a.target.tagName&&e()};p.handleFocus=function(a){var b=a.keyCode,c=this.getFirstElement(this.LPViewMap.surveyView).querySelectorAll('a, button:not(.lpHide), input, textarea, select, details, [tabindex]:not([tabindex="-1"])');if(c.length>0&&9===b){var d=c[0],e=c[c.length-1],f=this.getFocusableHeaderButton(this.getFirstElement(this.LPViewMap.headerArea,document.body)),g=this.getFocusableHeaderButton(this.getFirstElement(this.LPViewMap.headerArea,document.body),!0);if(a.shiftKey&&a.target===d){a.preventDefault();g.focus();return}if(a.target===e&&!a.shiftKey){a.preventDefault();f.focus();return}}};p.submitAnswer=function(a){var b=a.isAnswerArray?a.answer:a.answer[0];this.surveyLogic.submitAnswer(a.questionId,b);this.isSubmitSurveyDisabled=!1;if(this.pagingVC){this.pagingVC.updateActivePages(this.surveyLogic.getActiveQuestionsIds());this.getModelParam(this.uiPath.STATE)!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&this.pagingVC.enableSubmit(!0)}};p.getErrorText=function(b){var c="";switch(b.error){case this.surveyLogic.errorTypes.EMAIL:c=this.translate("surveyRequireValidEmail");break;case this.surveyLogic.errorTypes.NUMBER:c=this.translate("surveyRequireNumericField");break;case this.surveyLogic.errorTypes.ILLEGAL_CHARS:c=this.translate("surveyIllilgalCharacters");break;case this.surveyLogic.errorTypes.REQUIRED:c=a.call(this,b.type,b.entry);break;case this.surveyLogic.errorTypes.LENGTH:this.translator.extendDictionary({specify_number:this.surveyLogic.questionsText.MAX_LENGTH});c=this.translate("surveyMaximumChars");break;case this.surveyLogic.errorTypes.PHONE:c=this.translate("surveyRequireValidPhone");break;default:c=a.call(this,b.type,b.entry)}return c};p.addHeaderError=function(a){if(!this.hasHeaderError){this.hasHeaderError=!0;var b=this.createView({template:this.errorTemplateFileName,wrapWithDiv:!0,doNotAddChild:!0,textInjection:{wrapperClass:this.LPClassMap.SurveyError,text:a,url:this.errorIconURL,error:this.translate("errorIconAltText")}});b.className+=" "+this.LPClassMap.headerError;var c=this.questionViews[0];if(c)if(this.appContext.deviceDetector.isDesktop()){c.view.parentNode.insertBefore(b,c.view);c.setFocus()}else{c.view.insertBefore(b,c.view.firstChild);this.pagingVC.setActiveIndex(0)}}};p.removeHeaderError=function(){if(this.hasHeaderError){this.hasHeaderError=!1;var a=this.getFirstElement(this.LPViewMap.headerError);a&&a.parentNode.removeChild(a)}};p.onActiveIndexChange=function(a){"number"!=typeof a&&(a=this.activeIndex);this.activeIndex>=0&&lpTag.uiframework.scrollManager.unregisterView(this.questionViews[this.activeIndex]);this.activeIndex=a;var b=lpTag.lpUtils.getElementsByClass(this.questionViews[this.activeIndex].view,this.LPClassMap.content,[])[0],c=this.getComputedStyle(b.parentNode,"height",10),d=c<b.clientHeight;d&&lpTag.uiframework.scrollManager.registerView(b,this.appContext.deviceDetector.isIOS())};p.validateQuestion=function(a){var b=this.getQuestionViewById(a.id);if(b){s||n.call(this,b);if(this.surveyLogic.validateQuestion(a)&&b.isValid()){b.cleanError();return!0}b.setError(this.getErrorText(a));return!1}};p.validateQuestionOnNext=function(a){this.removeHeaderError();return this.validateQuestion(this.surveyLogic.getQuestionByIndex(a))};p.validateQuestionOnBlur=function(a){var b=this;this.validationTimeout=setTimeout(function(){b.validateQuestion(a.question)},u)};p.validateSurvey=function(){for(var a,b=!0,c=this.surveyLogic.validateSurvey(!0),d=this.surveyLogic.getAllQuestions(!0),e=!0,f=0;f<d.length;f++){a=this.getQuestionViewById(d[f].id);var g=a.isValid();e=e&&g;if(k(c.questionsNeeded,d[f].id)>=0||!g){a.setError(this.getErrorText(d[f]));if(b){a.setFocus();a.view.scrollIntoView(!1);b=!1}}else a.cleanError()}this.removeHeaderError();return c.surveyValid&&e};p.getQuestionViewById=function(a){for(var b,c=0;c<this.questionViews.length;c++)if(this.questionViews[c].question.id===a){b=this.questionViews[c];break}return b};p.dispose=function(){clearTimeout(this.validationTimeout);lpTag.uiframework.scrollManager.unregisterView(this.view);if(this.questionViews){for(var a=0;a<this.questionViews.length;a++){this.questionViews[a].dispose();this.questionViews[a]=null;this.appContext.deviceDetector.isIOS()&&this.unbindViewEvent({view:this.questionViews[a],DOMEvent:"touchstart",callback:this.viewTapped})}this.questionViews.length=0}this.surveyLogic.dispose();this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,this.onActiveIndexChange);this.appContext.events.unbind({appName:"survey",eventName:"blur",func:this.validateQuestionOnBlur,context:this});this.appContext.events.unbind({appName:"survey",eventName:"submitAnswer",func:this.submitAnswer,context:this});this.appContext.events.unbind({appName:"survey",eventName:this.EventName.chat.SURVEY_SERVER_ERROR,context:this,func:this.onSubmitServerError});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};p.createQuestion=function(a){var b,c={appContext:this.appContext,question:a,defaultSelect:this.defaultSelect,iconsRepository:this.iconsRepository,imagesRepository:this.imagesRepository,deviceClass:this.deviceClass,surveyArea:this.getFirstElement(this.LPViewMap.lpSurveyArea)};if(a){switch(a.type){case this.QUESTION_TYPE.TEXT_FIELD:b=a.validationType===this.VALIDATION_TYPE.PHONE&&this.surveyType===lpTag.unifiedWindow.SurveyType.PRE_SMS?new lpTag.unifiedWindow.Survey.PhoneFieldQuestion(c):new lpTag.unifiedWindow.Survey.TextFieldQuestion(c);break;case this.QUESTION_TYPE.TEXT_AREA:b=new lpTag.unifiedWindow.Survey.TextAreaQuestion(c);break;case this.QUESTION_TYPE.SELECT:b=new lpTag.unifiedWindow.Survey.DropDownQuestion(c);break;case this.QUESTION_TYPE.RADIO:case this.QUESTION_TYPE.RADIO_HORIZONTAL:b=new lpTag.unifiedWindow.Survey.RadioButtonQuestion(c);break;case this.QUESTION_TYPE.CHECKBOX:b=new lpTag.unifiedWindow.Survey.CheckBoxQuestion(c);break;case this.QUESTION_TYPE.CSAT:b=new lpTag.unifiedWindow.Survey.CSATQuestion(c)}return b}};p.onSubmitError=function(){if(this.appContext.deviceDetector.isDesktop()){var a=this.getFirstElement(this.LPViewMap.container);a&&(a.scrollTop=0)}this.addHeaderError(this.translate("surveyGeneralError"))};p.onSubmitServerError=function(){if(this.appContext.deviceDetector.isDesktop()){var a=this.getFirstElement(this.LPViewMap.container);a&&(a.scrollTop=0)}this.addHeaderError(this.translate("surveyServerError"))}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){var a=this.getValue();this.textarea.title=""===a?"":this.translate("defaultTextArea")}var b;lpTag.unifiedWindow.ExpandableTextAreaViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ExpandableTextAreaViewController",applicationType:"ExpandableTextAreaViewController",templateName:"<textarea class='lpview_form_textarea lpc_composer__text-area {{deviceClass}} {{cssClass}}' data-lp-cust-id='input_text' data-lp-point='chat_input' rows='{{rows}}' maxlength='{{maxLength}}' aria-label='{{defaultTextArea}}' autocomplete='{{autocompleteOption}}'></textarea>",LPViewMap:{textarea:"lp_expandable_textarea"},initialize:function(a){this.appContext=a.appContext;this.targetView=a.targetView;this.beforeView=a.beforeView;this.textareaClass=this.LPViewMap.textarea;this.minRows=a.minRows||3;this.maxRows=a.maxRows||10;this.maxLength=2e3;this.resizeCallback=a.resizeCallback;this.scrollCallback=a.scrollCallback;this.context=a.context||this;this.createTextAreaView()},events:function(){this.bindViewEvent({view:this.textarea,DOMEvent:"keyup",callback:this.handleKeyUp});this.bindViewEvent({view:this.textarea,DOMEvent:"paste",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"cut",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"dragend",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"drop",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"input",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"focus",callback:this.focusChanged});this.bindViewEvent({view:this.textarea,DOMEvent:"blur",callback:this.focusChanged})},render:function(){}});b=lpTag.unifiedWindow.ExpandableTextAreaViewController.prototype;b.setDefaultValues=function(){this.textareaLineHeight=this.getComputedStyle(this.textarea,"lineHeight",10);this.textareaMinHeight=this.textareaLineHeight*this.minRows;this.textareaMaxHeight=this.textareaLineHeight*this.maxRows;this.textareaHeight=this.getComputedStyle(this.textarea,"height",10);this.textareaMinHeight=this.textareaHeight>=this.textareaLineHeight?this.textareaHeight:this.textareaMinHeight;this.defaultValues=!0};b.createTextAreaView=function(){var a=this.appContext&&this.appContext.conf,b=a&&a.unifiedConf&&a.unifiedConf.autocomplete,c={cssClass:this.textareaClass,rows:this.minRows,maxLength:this.maxLength,defaultTextArea:this.translate("defaultTextArea"),autocompleteOption:"on"===b?b:"off"};this.textarea=this.createView({template:this.templateName,textInjection:c,wrapWithDiv:!1,target:this.targetView,beforeView:this.beforeView});this.setScroll(!1)};b.setScroll=function(a){if(this.scrollEnabled!==a){var b;b=a?"auto":"hidden";this.textarea.style.overflowY=b;this.scrollEnabled=a;this.applyScrollCallback(a)}};b.applyResizeCallback=function(a,b){this.resizeCallback&&this.context&&this.resizeCallback.call(this.context,a,b)};b.applyScrollCallback=function(a){this.scrollCallback&&this.context&&this.scrollCallback.call(this.context,a)};b.resizeTextarea=function(){if(!this.resizeTextareaTimeout){var a=this;this.resizeTextareaTimeout=setTimeout(function(){a.resizeTextareaTimeout=null;a.delayedResizeTextarea()},0)}};b.delayedResizeTextarea=function(){var a,b,c=!window.addEventListener;this.defaultValues||this.setDefaultValues();if(c){a=this.getSelection();b=this.textarea.scrollHeight}this.textarea.style.height="auto";c||(b=this.textarea.scrollHeight);var d;if(b!==this.textareaHeight){if(b>this.textareaMaxHeight){d=this.textareaMaxHeight;this.setScroll(!0)}else if(b<this.textareaMinHeight){d=this.textareaMinHeight;this.setScroll(!1)}else{d=b;this.setScroll(!1)}var e=d-this.textareaHeight;e&&this.applyResizeCallback(d,e);this.textareaHeight=d}this.textarea.style.height=this.textareaHeight+"px";a&&this.setSelection(a.start,a.end)};b.getValue=function(){return this.textarea.value};b.setValue=function(a){if(this.textarea.value!==a){this.textarea.value=a;this.resizeTextarea()}else this.lpFocus()};b.lpFocus=function(){if(this.textarea&&!this.textarea.disabled){var a=this.getComputedStyle(this.textarea,"height",10);a&&this.textarea.focus()}};b.handleKeyUp=function(b){b=b||event;var c=b.keyCode||b.which;switch(c){case 13:break;case 33:break;case 34:break;case 35:break;case 36:break;case 37:break;case 38:break;case 39:break;case 40:break;default:this.resizeTextarea()}a.call(this)};b.focusChanged=function(a){a=a||event;var b=a&&a.type||"";this.appContext.events.trigger({appName:"*",eventName:this.EventName.uiState.FOCUS_CHANGE_EVENT,data:{type:b}})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a,b=!1,c=null;lpTag.unifiedWindow.CoBrowseInvitationViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"CoBrowseInvitationViewController",template:"<div class='lp_cobrowse_invitation_widget'><div class='lp_image'><img src='{{imagesRepository}}/{{icon}}' alt=''></div><p role='alert' class='lp_cb_invitation_text'>{{invitationText}}</p><p class='lp_cb_invitation_text_sub'>{{connectingPermissionText}}</p><div class='lp_cb_offer'><button data-lp-cust-id='button' class='lp_cb_button lp_cb_button_accept' aria-label='{{acceptBtnLabel}}'>{{acceptBtn}}</button> <button data-lp-cust-id='button' class='lp_cb_button lp_cb_button_reject' aria-label='{{rejectBtnLabel}}'>{{rejectBtn}}</button></div></div>",coBrowseEvents:lpTag.unifiedWindow.events.coBrowseEvents,focusElement:void 0,LPViewMap:{inviteText:".lp_cb_invitation_text",acceptButton:".lp_cb_button_accept",rejectButton:".lp_cb_button_reject",subText:".lp_cb_invitation_text_sub",invitation_container:".lp_cobrowse_invitation_widget",callScreenContainer:".lp_cobrowse_callscreen_container"},LPClassesMap:{invitation_container:"lp_cobrowse_invitation_widget",hidden:"lp_hidden"},preInitView:function(d){this.appContext=d.appContext;a=d.appContext.coBrowseManager;c=d.mode;var e="";switch(d.mode){case"VIDEO_CALL":b=!0;e="cobrowse_video_call.png";break;case"VOICE_CALL":b=!0;e="cobrowse_voice_call.png";break;default:e="cobrowse_icon.png";b=!1}"ERROR"!==d.mode&&(this.templateFile="undefined"!=typeof d.templateFile?d.templateFile:this.templateFile);var f=a.customizeTranslation("cobrowseInvitationHeading",d.mode),g=a.customizeTranslation("cobrowseInvitation",d.mode),h=a.customizeTranslation("cobrowseAcceptBtn",d.mode),i=a.customizeTranslation("cobrowseRejectBtn",d.mode),j=a.customizeTranslation("cobrowseConnecting",d.mode),k=a.customizeTranslation("cobrowseConnectingPermission",d.mode);this.textInjection={invitationText:this.sanitizeText(g).text,connectingText:this.sanitizeText(j).text,connectingPermissionText:this.sanitizeText(k).text,acceptBtn:this.sanitizeText(h).text,rejectBtn:this.sanitizeText(i).text,acceptBtnLabel:this.sanitizeText(h).text+" "+this.sanitizeText(f).text,rejectBtnLabel:this.sanitizeText(i).text+" "+this.sanitizeText(f).text,imagesRepository:d.appContext.conf.unifiedConf.imagesRepository,errorHeadline:this.appContext.translator.translate("error"),errorText:d.errorText,icon:e}},events:function(){this.bindViewEvent({selector:this.LPViewMap.acceptButton,callback:this.onAccept,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.rejectButton,callback:this.onReject,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.invitation_container,callback:this.onKeyDown,DOMEvent:"keydown",context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.RENDER_CALL_SCREEN,context:this,func:this.onRenderCallScreen})},initialize:function(a){this.serviceId=a.serviceId;this.appContext=a.appContext;this.focusElement=this.getFirstElement(this.LPViewMap.acceptButton)},onAccept:function(){this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.ACCEPTED,this.serviceId,c);if(b){var d=a.customizeTranslation("cobrowseConnecting",c);this.getFirstElement(this.LPViewMap.inviteText).textContent=this.sanitizeText(d).text;this.getFirstElement(this.LPViewMap.subText).style.display="block"}else{var e=a.customizeTranslation("cobrowseSessionStarting");this.getFirstElement(this.LPViewMap.inviteText).textContent=this.sanitizeText(e).text}this.getFirstElement(this.LPViewMap.acceptButton).style.display="none";this.getFirstElement(this.LPViewMap.rejectButton).style.display="none"},onReject:function(){this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.DECLINE,this.serviceId,c);this.inputMainWindow=document.querySelector(".lpview_form_textarea");var b=a.customizeTranslation("cobrowseInvitationRejected",c);this.getFirstElement(this.LPViewMap.inviteText).textContent=this.sanitizeText(b).text;this.getFirstElement(this.LPViewMap.subText).style.display="none";this.getFirstElement(this.LPViewMap.acceptButton).style.display="none";this.getFirstElement(this.LPViewMap.rejectButton).style.display="none";this.inputMainWindow&&this.inputMainWindow.focus()},onRenderCallScreen:function(){var a=document.createElement("div");a.className="lp_cobrowse_callscreen_container";this.getFirstElement(this.LPViewMap.invitation_container).innerHTML="";this.getFirstElement(this.LPViewMap.invitation_container).style.padding="0px";this.getFirstElement(this.LPViewMap.invitation_container).appendChild(a)},onInitialize:function(){var a=this;setTimeout(function(){"undefined"!=typeof a.focusElement&&a.focusElement.focus()},100)},onKeyDown:function(a){var b=this.appContext&&this.appContext.coBrowseManager&&this.appContext.coBrowseManager.isInActiveCall();27!==a.keyCode||b||this.onReject();if(27===a.keyCode&&b){a.preventDefault();this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:"endCobrowse",global:!0})}}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.INVITED,context:this,func:d});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.CANCELED,context:this,func:f});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.DECLINE,context:this,func:c});lpTag.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.ACCEPTED,context:this,func:g});lpTag.events.unbind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.STARTED,context:this,func:h});this.appContext.events.unbind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,
func:l});lpTag.events.unbind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.RESUME,context:this,func:j});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:this.chatEvents.STATE,context:this,func:m});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.MAXIMIZE,context:this,func:i});lpTag.events.unbind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.ERROR,context:this,func:k})}function b(){this.appContext&&this.appContext.coBrowseManager&&this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.DECLINE,this.serviceId)}function c(){this.invitationActive=!1;this.delayRemoveDeclinedViewTimeoutReference=window.setTimeout(p.bind(this),s)}function d(a){this.currentMode=a.mode;if(this.isEmbedded){this.invitationActive=!0;this.serviceId=a.serviceId;this.startTimeOfCurrentSession=Date.now();this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.OFFERED,this.serviceId,a.mode,a.agentId);n.call(this,a);q.call(this,"coBrowseInvitationView",null);this.offerExpiredTimeoutReference=setTimeout(e.bind(this),this.appContext.coBrowseManager.COBROWSE_OFFER_TIMEOUT)}}function e(){this.invitationActive=!1;p.call(this);this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.TIMEOUT,this.serviceId,this.currentMode)}function f(a){if(this.startTimeOfCurrentSession&&a.endTs&&this.startTimeOfCurrentSession<a.endTs){this.appContext.coBrowseManager.setActiveCall(!1);this.invitationActive=!1;p.call(this);this.startTimeOfCurrentSession=null}}function g(){this.sliderAPI.setMinimizeButtonTitle(this.cobrowseMinimizeBtnTitle)}function h(){o.call(this);this.invitationActive=!1;this.startTimeOfCurrentSession=Date.now();if(this.appContext.coBrowseManager.isCall(this.currentMode)){this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.RENDER_CALL_SCREEN);this.appContext.coBrowseManager.setActiveCall(!0)}else{this.delayRemoveAcceptedViewTimeoutReference=window.setTimeout(p.bind(this),s);this.appContext.deviceDetector.isDesktop()||this.appContext.uiStateManager.setWindowState(!1)}}function i(){if(this.appContext.coBrowseManager.isInActiveCall()){this.sliderAPI.showSlider();this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.SLIDER_OPENED)}}function j(a){this.invitationActive=!1;this.currentMode=a.mode;this.startTimeOfCurrentSession=Date.now();var b=new lpTag.unifiedWindow.CoBrowseInvitationViewController({models:this.models,appContext:this.appContext,serviceId:"",mode:a.mode,wrapWithDiv:!1,template:"<div class='lp_cobrowse_invitation_widget'><div class='lp_image'><img src='{{imagesRepository}}/cobrowse_icon.png' alt=''></div><p role='alert' class='lp_cb_invitation_text'>{{connectingText}}</p><p class='lp_cb_invitation_text_sub'>{{connectingPermissionText}}</p></div>"}),c=this.appContext.coBrowseManager.customizeTranslation("cobrowseInvitationHeading",a.mode),d=this.appContext.coBrowseManager.customizeTranslation("cobrowseInvitationMinimizeTitle",a.mode);this.sliderAPI.addView(b.view,c,"connectingView",lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite,null,d);q.call(this,"connectingView");var e=this;setTimeout(function(){e.appContext.coBrowseManager.publishCoBrowseEvent(e.coBrowseEvents.RENDER_CALL_SCREEN);e.appContext.coBrowseManager.publishCoBrowseEvent(e.coBrowseEvents.SLIDER_OPENED)},120);this.appContext.coBrowseManager.isCall(this.currentMode)&&this.appContext.coBrowseManager.setActiveCall(!0)}function k(a){var b=new lpTag.unifiedWindow.CoBrowseInvitationViewController({models:this.models,appContext:this.appContext,serviceId:"",mode:"ERROR",wrapWithDiv:!1,template:"<div class='lp_cobrowse_error_widget'><p class='lp_cb_error_headline'>{{errorHeadline}}</p><div class='lp_image'><img src='{{imagesRepository}}/connect-error-dark.png' alt=''></div><p role='alert' class='lp_cb_error_text'>{{errorText}}</p></div>",errorText:a.msg});this.sliderAPI.addView(b.view,this.appContext.translator.translate("error"),"cobrowseErrorView",lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite);q.call(this,"cobrowseErrorView",t)}function l(a){a.type===lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite&&(this.invitationActive?this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.DECLINE,this.serviceId,this.currentMode):this.appContext.coBrowseManager.isInActiveCall()&&this.appContext.events.trigger({appName:"tooltipButton",eventName:"show",data:{text:this.appContext.coBrowseManager.customizeTranslation("cobrowseActiveCallTooltip",this.currentMode),maximizeSliderBtnTitle:this.appContext.coBrowseManager.customizeTranslation("cobrowseActiveCallTooltipMaximizeTitle",this.currentMode),type:"call"},global:!0}))}function m(a){if(a===this.chatState.WAITING){this.invitationActive=!1;p.call(this)}}function n(a){var b=new lpTag.unifiedWindow.CoBrowseInvitationViewController({models:this.models,appContext:this.appContext,serviceId:a.serviceId,mode:a.mode,wrapWithDiv:!1}),c=this.appContext.coBrowseManager.customizeTranslation("cobrowseInvitationHeading",a.mode),d=this.appContext.translator.translate("cobrowseInvitationMinimizeTitle");this.cobrowseMinimizeBtnTitle=this.appContext.coBrowseManager.customizeTranslation("cobrowseInvitationMinimizeTitle",a.mode);this.sliderAPI.addView(b.view,this.sanitizeText(c).text,"coBrowseInvitationView",lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite,null,d)}function o(){clearTimeout(this.offerExpiredTimeoutReference);clearTimeout(this.delayRemoveAcceptedViewTimeoutReference);clearTimeout(this.delayRemoveDeclinedViewTimeoutReference);clearTimeout(this.sliderViewCloseTimeoutRef)}function p(){o.call(this);this.sliderAPI.hideSlider();this.currentSliderViewId&&this.sliderAPI.removeView(this.currentSliderViewId);this.currentSliderViewId=null}function q(a,b){o.call(this);this.currentSliderViewId&&this.currentSliderViewId!==a&&this.sliderAPI.removeView(this.currentSliderViewId);this.sliderAPI.setSelectedView(a);this.sliderAPI.showSlider();b&&(this.sliderViewCloseTimeoutRef=setTimeout(p.bind(this),b));this.currentSliderViewId=a}var r,s=3e3,t=8e3;lpTag.unifiedWindow.CoBrowseInvitationManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"CoBrowseInvitationManagerViewController",coBrowseEvents:lpTag.unifiedWindow.events.coBrowseEvents,chatEvents:lpTag.unifiedWindow.events.chat,chatState:lpTag.unifiedWindow.State,rendered:!1,currentMode:"",startTimeOfCurrentSession:null,initialize:function(a){this.sliderAPI=a.sliderAPI;this.isEmbedded=!this.appContext.conf.unifiedConf.poppedOut&&!this.appContext.conf.unifiedConf.external;this.bindEvents();this.invitationActive=!1;this.isEmbedded&&this.bindModel({path:this.uiPath.STATE,callback:this.stateChanged,context:this});this.checkResume();this.isDisposed=!1},checkResume:function(){var a=window.lpTag.events.hasFired(lpTag.unifiedWindow.apps.COBROWSE,this.coBrowseEvents.RESUME);a&&a[0]&&a[0].data?j.call(this,a[0].data):lpTag.events.bind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.RESUME,context:this,func:j})},bindEvents:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.INVITED,context:this,func:d});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.CANCELED,context:this,func:f});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.DECLINE,context:this,func:c});lpTag.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.ACCEPTED,context:this,func:g});lpTag.events.bind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.STARTED,context:this,func:h});this.appContext.events.bind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:l});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:this.chatEvents.STATE,context:this,func:m});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.MAXIMIZE,context:this,func:i});lpTag.events.bind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.ERROR,context:this,func:k})},render:function(){this.hide();this.rendered=!0}});r=lpTag.unifiedWindow.CoBrowseInvitationManagerViewController.prototype;r.dispose=function(){if(!this.isDisposed){p.call(this);a.call(this);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this);this.isDisposed=!0}};r.stateChanged=function(a){var c=a.newValue;c===lpTag.unifiedWindow.State.ENDED||c===lpTag.unifiedWindow.State.NOT_FOUND?b.call(this):(c===lpTag.unifiedWindow.State.APP_ENDED||c===lpTag.unifiedWindow.State.NOT_FOUND)&&p.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=a&&a.newValue;if(b&&this.pendingLoading)for(var c=0;c<this.pendingLoading.length;c++)if(this.pendingLoading[c]){var d=b[this.pendingLoading[c].uniqueId];d&&d.info&&e.call(this,this.pendingLoading.splice(c,1)[0].data)}}function b(a){if(!c.call(this,a&&a.info&&a.info.uniqueId)){a.info.secureFormName=this.sanitizeText(a.info.secureFormName).text;var b=new lpTag.unifiedWindow.SecureFormViewController({models:this.models,appContext:this.appContext,secureForm:a,wrapWithDiv:!1,textInjection:{formName:a.info.secureFormName,imagesRepository:this.appContext.conf.unifiedConf.imagesRepository}});this.secureForms.push({uniqueId:a.info.uniqueId,view:b});this.sliderAPI.addView(b.view,a.info.secureFormName,a.info.uniqueId,lpTag.unifiedWindow.consts.slider.viewType.PCIFormView,null,this.translate("tooltip_minimize_slider")+" "+a.info.secureFormName)}}function c(a){for(var b=0;b<this.secureForms.length;b++)if(this.secureForms[b].uniqueId===a)return this.secureForms[b]}function d(a){var b=this.chatPath.SECURE_FORMS;return this.getModelParam({name:b.name,path:b.path+"."+a})}function e(a){var c=a&&a.uniqueId,e=a&&a.isFromConnector;if("undefined"!=typeof c){var f=d.call(this,c);if(f&&f.info){b.call(this,f);this.sliderAPI.setSelectedView(c);this.sliderAPI.showSlider();this.sliderAPI.focusOnMinimize();e&&this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:lpTag.unifiedWindow.consts.SecureForm.HIDE_CONVO,data:{}})}else this.pendingLoading&&Array.isArray(this.pendingLoading)&&this.pendingLoading.push({uniqueId:c,data:a})}}var f,g=lpTag.unifiedWindow.apps.SECURE_FORM;lpTag.unifiedWindow.SecureFormsManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SecureFormsManagerViewController",rendered:!1,initialize:function(a){this.sliderAPI=a.sliderAPI;this.secureForms=[];this.pendingLoading=[]},events:function(){this.appContext.events.bind({appName:g,eventName:lpTag.unifiedWindow.consts.SecureForm.LINK_CLICKED,context:this,func:e});this.bindModel({path:this.chatPath.SECURE_FORMS,callback:a,context:this})},render:function(){this.hide();this.rendered=!0}});f=lpTag.unifiedWindow.SecureFormsManagerViewController.prototype;f.dispose=function(){if(this.secureForms)for(var a=0;a<this.secureForms.length;a++)if(this.secureForms[a].dispose){this.secureForms[a].dispose();this.sliderAPI.removeView(this.secureForms[a].uniqueId)}lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(a&&a.newValue===lpTag.unifiedWindow.State.WAITING&&(this.secureFormData.formState===n.SEND||this.secureFormData.formState===n.RECEIVED||this.secureFormData.formState===n.VIEWED)){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:n.ABORTED,data:{uniqueId:this.secureFormData.info.uniqueId}});this.logger.info("_onChatStateChanged - form abondonment triggered/reported back",this.ControllerName)}}function b(a){var b=this.getFirstElement(this.LPViewMap.messageContainer);b.style.visibility="visible";var c="";switch(a){case n.SUBMIT:c=this.translate("secureFormSubmittedMessage");break;case n.ABORTED:case n.ERROR:c=this.secureFormData.isTimeOut?this.translate("secureFormTimeOutErrorMessage"):this.translate("secureFormErrorMessage");break;case n.VIEWED_ON_ANOTHER_TAB:c=this.appContext.conf.engConf.async?this.translate("secureFormErrorMessage"):this.translate("secureFormOpenedInAnotherTabMessage")}var d=this.getFirstElement(this.LPViewMap.message);if(d&&""!==c){d.innerHTML=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(c).cleanText;this.getFirstElement(this.LPViewMap.messageContainer).focus()}}function c(){if(this.view){var a=this.createView({template:"<table class='lp_centralizer'><tbody><td><div class='lp_rotator-container'><div class='lp_rotator-container-bg'></div><div class='lp_rotator' role='alert'><img src='{{imagesRepository}}/{{imageUrl}}' alt='{{loading}}'></div></div></td></tbody></table>",target:this.waitArea,wrapWithDiv:!1,textInjection:{imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,imageUrl:"loader_on_warmGray5_75.gif",loading:this.translate("loading")+" "+this.secureFormData.info.secureFormName}});this.view.appendChild(a);this.hide(this.getFirstElement(this.LPViewMap.iFrame))}}function d(){if(this.view){var a=this.getFirstElement(this.LPViewMap.loader);if(a){this.view.removeChild(a);this.show(this.getFirstElement(this.LPViewMap.iFrame))}}}function e(){this.timeoutRef=setTimeout(function(){if(this.secureFormData.formState===n.SEND||this.secureFormData.formState===n.RECEIVED){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:n.ERROR,data:{uniqueId:this.secureFormData.info.uniqueId,message:{errorReason:"Secure form load failed (Waited for "+m/1e3+" seconds)"},isTimeOut:!0}});this.logger.error("_addTimeout - secure form load failed after waiting "+m/1e3+" seconds",this.ControllerName)}}.bind(this),m)}function f(){this.timeoutRef&&clearTimeout(this.timeoutRef)}function g(){return"https://"+lpTag.csds.getDomain("tokenizer")}function h(a){var b=this.getFirstElement(this.LPViewMap.iFrame);if(a.source===b.contentWindow){var c=k(a.data);this.translator.extendDictionary({secureFormName:this.secureFormData.info.secureFormName},{locale:this.appContext.conf.engConf.lang});this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:c.state,data:{uniqueId:this.secureFormData.info.uniqueId,message:c,text:this.translate("secureForm_line_"+c.state)}});this.logger.info("_receiveMessage - recieved message from iframe: "+JSON.stringify(a||{}),this.ControllerName)}}function i(a,b,c){this.receiveMessageCallback=j(a,b,c);this.bindViewEvent({view:window,DOMEvent:"message",callback:this.receiveMessageCallback})}function j(a,b,c){return function(d){if("string"==typeof a&&d.origin!==a||"[object Function]"===Object.prototype.toString.call(a))return!1;lpTag.lpUtils.runCallback(b,c,d);return void 0}}function k(a){try{var b=JSON.parse(a);b.state=b.state||n.SUBMIT;return b}catch(c){return{state:a}}}var l,m,n=lpTag.unifiedWindow.secureFormStates,o=6e4,p=3e4,q=1e4,r="about:blank",s=lpTag.unifiedWindow.settingsIDs;lpTag.unifiedWindow.SecureFormViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SecureFormViewController",template:"<div class='secure_form_container'><iframe class='lp_secure_form_iframe' src='about:blank' title='{{formName}}'></iframe><div class='secure_form_message' role='alert' tabindex='-1'><div class='lp_image'><img src='{{imagesRepository}}/secure_form_icon.png' alt=''></div><div class='lp_lpview_title lp_title'>{{secureFormMessage}}</div></div></div>",CLASS_STATE_PREFIX:"_secure_form_state",LPViewMap:{iFrame:"iframe",loader:".lp_centralizer",message:".lp_title",messageContainer:".secure_form_message"},LPClassesMap:{secure_form_container:"secure_form_container"},timeoutRef:null,currentFormState:null,fetchingForm:!1,formLoaded:!1,events:function(){this.bindModel({path:this.uiPath.STATE,callback:a,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:"SF_ERROR",func:this.retrySFLoad,context:this})},initialize:function(a){this.secureFormData=a.secureForm;this.appContext=a.appContext;this.bindModel({path:this.getModelPath(a.secureForm),callback:this.handleStateChanged});if(this.appContext.conf.unifiedConf.connectorsSfConfig){var b=this.getFirstElement(this.LPViewMap.messageContainer);b.style.visibility="hidden"}if(this.appContext.conf.unifiedConf.secureFormTimeout){m=parseInt(this.appContext.conf.unifiedConf.secureFormTimeout,10)||q;q>m&&(m=q);m>o&&(m=o)}this.appContext.featureStateManager.getSettingsValue(s.OTK_RETRIES)>2&&(m=m||p);m=m||o}});l=lpTag.unifiedWindow.SecureFormViewController.prototype;l.loadIFrame=function(){var a=this.getFirstElement(this.LPViewMap.iFrame);c.call(this);e.call(this);if(!this.formLoaded&&!this.fetchingForm&&a.src===r){this.fetchingForm=!0;this.logger.info("loadIFrame - about to fetch form URL",this.ControllerName);this.appContext.SecureFormManager.getFormUrl(this.secureFormData.info.uniqueId,function(b){this.fetchingForm=!1;this.formLoaded=!0;if(b){a.src=b;i.call(this,g(),h,this);this.logger.info("loadIFrame - set the iframe with URL "+b,this.ControllerName)}else{this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:n.ERROR,data:{uniqueId:this.secureFormData.info.uniqueId,message:{errorReason:"There is a problem with the form url"}}});this.logger.error("loadIFrame - there was a problem fetching the form URL",this.ControllerName)}}.bind(this))}};l.retrySFLoad=function(){var a=this.getFirstElement(this.LPViewMap.iFrame);this.formLoaded=!1;a.src=r;f.call(this);this.loadIFrame()};l.unloadIFrame=function(){var a=this.getFirstElement(this.LPViewMap.iFrame);a.src=r;this.unbindViewEvent({view:window,DOMEvent:"message",callback:this.receiveMessageCallback});this.receiveMessageCallback=null};l.handleStateChanged=function(){var a;this.secureFormData=this.getModelParam(this.getModelPath(this.secureFormData));a=this.secureFormData.formState;if(a&&this.currentFormState!==a){this.currentFormState=a;this.view.className="";this.addClass(this.view,a+this.CLASS_STATE_PREFIX);this.addClass(this.view,this.LPClassesMap.secure_form_container);switch(this.currentFormState){case n.SEND:case n.RECEIVED:this.loadIFrame();break;case n.VIEWED:d.call(this);f.call(this);break;default:d.call(this);f.call(this);b.call(this,this.secureFormData.formState);this.unloadIFrame()}}};l.getModelPath=function(a){var b=this.chatPath.SECURE_FORMS;return{name:b.name,path:b.path+"."+a.info.uniqueId}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){var a=this.sliderAPI.models.uiModel.get(this.uiPath.WIDGET_SLIDER_VISIBLE);a?this._showWidget(this._getWidgetToShow(this._getInitiatedWidgets())):this.util.runCallback(this.sliderAPI.hideSlider,this.sliderAPI)}var b;lpTag.unifiedWindow.WidgetManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"WidgetManagerViewController",windowSDKEvents:null,widgetSDKEventNames:null,wsdkModel:null,widgetModelPath:null,util:null,currentWidgetVC:null,sliderAPI:null,widgetsVC:[],widgetLifeCyleBindingMap:{},widgetNotifications:{},isParentWindow:null,disableWidgetAutoShow:!1,windowIsPaused:!1,isWidgetVisible:!1,isSliderVisible:!1,lastShownWidgetId:null,OPEN_SLIDER_DELAY:400,MAX_WIDGETS:5,initialize:function(a){var b;this.log=lpTag.unifiedWindow.log;this.sliderAPI=a.sliderAPI;this.windowSDKEvents=a.windowSDKEvents;this.wsdkModel=a.wsdkModel;this.widgetSDKEventNames=lpTag.unifiedWindow.events.widgetSDK;this.widgetModelPath=lpTag.unifiedWindow.widgetModelPath;this.widgetSDKAPI=lpTag.LPWidgetSDK.API;this.util=lpTag.taglets.lpUtil;this.appContext=a.appContext;this.widgetLifeCyleBindingMap={};this.widgetNotifications={};this.widgetsVC=[];this.isParentWindow=!this.appContext.conf.unifiedConf.poppedOut;b=this._validateWidgetsConfig(Array.isArray(this.appContext.conf.widgetSDK)&&this.appContext.conf.widgetSDK[0]&&this.appContext.conf.widgetSDK[0].widgets);b=b.slice(0,this.MAX_WIDGETS);if(Array.isArray(b)&&b.length>0){this._createLifecycleBindingEntries();this._createWidgetViewControllers(b);this._restoreNotificationsCount();this._bindEvents();this._onEngagementInfoEvent();this.appContext.deviceDetector.isDesktop()&&(this.disableWidgetAutoShow=this.appContext.WidgetManager.getLastSliderState()===!1)}},events:function(){this.sliderAPI.models.uiModel.bind(this.uiPath.WIDGET_SLIDER_VISIBLE,a,this)},_onEngagementInfoEvent:function(){this._triggerEventToAllWidgets(this.widgetSDKAPI.events.ENGAGEMENT_INFO,this.util.getPropertyFromObject(this.appContext,"conf.engConf"))},_createLifecycleBindingEntries:function(){var a;for(var b in this.widgetSDKAPI.states){a=this.widgetSDKAPI.states[b];Array.isArray(this.widgetLifeCyleBindingMap[a])||(this.widgetLifeCyleBindingMap[a]=[])}},_restoreNotificationsCount:function(){this.widgetNotifications=this.appContext.WidgetManager.getWidgetsNotifications();this._publishNotifications()},_createWidgetViewControllers:function(a){var b,c=this.appContext.WidgetManager.getWidgetsStatus();a.forEach(function(a){if(a&&c[a.id]!==!1){b=new lpTag.unifiedWindow.WidgetViewController({widgetsConfig:a,sliderAPI:this.sliderAPI,windowSDKEvents:this.windowSDKEvents,wsdkModel:this.wsdkModel,appContext:this.appContext});this.widgetsVC.push(b);this._addWidgetStateHandling(b);if(c[a.id]===!0){this._removeWidgetStateHandling(a.id);b.init()}}}.bind(this))},_addWidgetStateHandling:function(a){Array.isArray(this.widgetLifeCyleBindingMap[a.getWidgetStartState()])&&this.widgetLifeCyleBindingMap[a.getWidgetStartState()].push(a)},_removeWidgetStateHandling:function(a){var b,c;if("string"==typeof a)for(var d in this.widgetLifeCyleBindingMap){c=this.widgetLifeCyleBindingMap[d];b=c.map(function(a){return a.getId()}).indexOf(a);b>=0&&c.splice(b,1)}},_bindEvents:function(){this.bindedEvents=this.bindedEvents||[];this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.INIT,context:this,func:this._onSDKButtonClicked}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.WIDGET_AREA_STATE,context:this,func:this._onSliderStateChanged}));this.wsdkModel.bind(this.widgetModelPath.WINDOW_UI,this._onWindowStateChanged,this);this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.CONVERSATION_STATE,context:this,func:this._onChatStateChanged}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.PARTICIPANTS,context:this,func:this._onParticipantsEvent}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.CONVERSATION_INFO,context:this,func:this._onConversationInfoEvent}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.MESSAGES,context:this,func:this._onLineEvent}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.WIDGET_NOTIFICATION,context:this,func:this._onWidgetNotification}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.DISPOSED_WIDGET_ID,context:this,func:this._disposeWidgetVC}));this.bindedEvents.push(this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UISTATE,eventName:lpTag.unifiedWindow.events.uiState.EMBEDDED_CHANGED,context:this,func:this._handleEmbeddedStateChanged}))},_onSDKButtonClicked:function(){var a=this.sliderAPI.models.uiModel.get(this.uiPath.WIDGET_SLIDER_VISIBLE);this.appContext.WidgetManager.onWidgetStateChanged(!a);this.disableWidgetAutoShow=!1},_handleEmbeddedStateChanged:function(){this.isWidgetVisible=this.appContext.WidgetManager.getLastSliderState()},_onSliderStateChanged:function(a){this.log.info("_onSliderStateChanged: "+a.isOpened+" "+a.type,this.ControllerName);var b=this.currentWidgetVC&&this.currentWidgetVC.getId(),c=this.lastShownWidgetId&&this.lastShownWidgetId!==b,d=a.type===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView;this.isSliderVisible=a.isOpened;this.isWidgetVisible=this.isSliderVisible&&d;if(this.isWidgetVisible)if(c)this._handleSwappedWidgets(this.lastShownWidgetId,b);else{this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!0},b);this.lastShownWidgetId=b}else{this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!1},b);this.lastShownWidgetId=null;this.currentWidgetVC=null}},_handleSwappedWidgets:function(a,b){this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!0},b);this.lastShownWidgetId=b;a&&a!==b&&this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!1},a)},_onWindowStateChanged:function(a){this.isMaximized=a&&a.newValue&&a.newValue.isMaximized;this._triggerEventToAllWidgets(this.widgetSDKAPI.events.UI_WINDOW,{isMaximized:this.isMaximized});this.isMaximized&&(this.isWidgetVisible?this._clearWidgetNotification(this.currentWidgetVC.getId()):this.pendingWidgetToShow&&this._showPendingWidget())},_showPendingWidget:function(){setTimeout(function(){this._showWidget(this.pendingWidgetToShow);this.pendingWidgetToShow=null}.bind(this),this.OPEN_SLIDER_DELAY)},_onChatStateChanged:function(a){var b=this.widgetLifeCyleBindingMap[a];if(lpTag.unifiedWindow.State.PAUSED===a)this.windowIsPaused=!0;else if(lpTag.unifiedWindow.State.RESUME_PAUSED===a){this.windowIsPaused=!1;this._onReturnFromPopout()}else this._handleWidgetsStates(b)},_onReturnFromPopout:function(){var a,b=this.appContext.WidgetManager.getLastShownWidgetId(),c=this.appContext.WidgetManager.getWidgetsStatus();this._restoreNotificationsCount();if(c)for(var d in c){a=this._getWidgetDataById(d).widget;if(c[d]===!1)this._disposeWidgetVC(d);else if(c[d]===!0&&a){a.init();this._removeWidgetStateHandling(d)}}if(b){a=this._getWidgetDataById(b).widget;a&&setTimeout(function(){this._showWidget(a)}.bind(this),this.OPEN_SLIDER_DELAY)}else this.appContext.WidgetManager.getLastSliderState()===!1&&this.util.runCallback(this.sliderAPI.hideSlider,this.sliderAPI)},_handleWidgetsStates:function(a){var b,c=[];if(Array.isArray(a)){a.forEach(function(a){if(a&&!a.isDisposed()){a.init();this.appContext.deviceDetector.isDesktop()&&a.showAfterInitiation()&&c.push(a)}}.bind(this));b=this._getWidgetToShow(c);this.disableWidgetAutoShow||!b||this.isSliderVisible||this.appContext.WidgetManager.onWidgetStateChanged(!0)}},_onParticipantsEvent:function(a){a&&this._triggerEventToAllWidgets(this.widgetSDKAPI.events.PARTICIPANTS,a)},_onConversationInfoEvent:function(a){a&&this._triggerEventToAllWidgets(this.widgetSDKAPI.events.CONVERSATION_INFO,a)},_onLineEvent:function(a){a&&this._triggerEventToAllWidgets(this.widgetSDKAPI.events.MESSAGES,a)},_onWidgetNotification:function(a){var b=a.widgetId;this.isMaximized?this.isWidgetVisible&&b===this.currentWidgetVC.getId()||this._handleWidgetNotification(b):this._handleWidgetNotification(b)},_triggerEventToAllWidgets:function(a,b,c){var d,e,f,g=this.util.getUID();c=c||[];for(var h=0;h<this.widgetsVC.length;h++){e=this.widgetsVC[h];d=e.getId();f=!1;for(var i=0;i<c.length;i++)if(c[i]===d){f=!0;break}f||this._triggerEventToWidget(a,b,d,g)}},_triggerEventToWidget:function(a,b,c,d){var e;if(!this.windowIsPaused){e=this._getWidgetDataById(c).widget;d=d||this.util.getUID();e&&e.trigger&&e.trigger(a,{id:d,type:a,data:b})}},_showWidget:function(a){var b;if(a){b=this.appContext.WidgetManager.isWindowMaximized();this.sliderAPI.isSliderOpen=!0;if(b){this.currentWidgetVC=a;this.currentWidgetVC.showWidget();this._clearWidgetNotification(this.currentWidgetVC.getId());this._removeWidgetStateHandling(this.currentWidgetVC.getId())}else this.pendingWidgetToShow=a}},_getWidgetToShow:function(a){var b=Array.isArray(a)&&a.length>0&&a||[],c=b[0];b.forEach(function(a){a.getPriority()>c.getPriority()&&(c=a)}.bind(this));return c},_getWidgetDataById:function(a){var b={widget:null,index:-1};if(a)for(var c=0;c<this.widgetsVC.length;c++)if(this.widgetsVC[c].getId()===a){b.widget=this.widgetsVC[c];b.index=c;break}return b},_getInitiatedWidgets:function(){return this.widgetsVC.filter(function(a){return a.isInitiated()===!0||a.isError()})||[]},_validateWidgetsConfig:function(a){var b,c,d,e,f,g=[];if(Array.isArray(a))for(var h=0;h<a.length;h++){d=!1;e=!1;c=!1;b=a[h];d="object"==typeof b&&"string"==typeof b.url&&b.url.length>0&&"string"==typeof b.name&&b.name.length>0;if(d){if("string"==typeof b.startState){f=Object.keys(this.widgetSDKAPI.states);for(var i=0;i<f.length;i++)this.widgetSDKAPI.states[f[i]]===b.startState&&(e=!0)}e||(b.startState=this.isAsync?this.widgetSDKAPI.states.IN_QUEUE:this.widgetSDKAPI.states.ACCEPTED);"boolean"!=typeof b.showOnInit&&(b.showOnInit=!1);b.id=encodeURIComponent(b.name.trim().replace(" ","_"));b.url=decodeURIComponent(b.url.trim());b.priority=a.length-h;for(var j=0;j<g.length;j++)if(g[j].id===b.id){c=!0;break}c||g.push(b)}}return g},_disposeWidgetVC:function(a){var b=this._getWidgetDataById(a),c=b.widget,d=b.index;if(c){c.dispose();this.widgetsVC.splice(d,1);this._removeWidgetStateHandling(a);this.currentWidgetVC=this.currentWidgetVC&&this.currentWidgetVC.getId()===a?null:this.currentWidgetVC;this.appContext.WidgetManager.handleWidgetDisposal(a)}},_handleWidgetNotification:function(a){if(!this.windowIsPaused){this.widgetNotifications[a]=this.widgetNotifications[a]||0;this.widgetNotifications[a]+=1;this.appContext.WidgetManager.setWIdgetsNotifications(this.widgetNotifications);this._publishNotifications()}},_clearWidgetNotification:function(a){if(!this.windowIsPaused){this.widgetNotifications[a]=0;this.appContext.WidgetManager.setWIdgetsNotifications(this.widgetNotifications);this._publishNotifications()}},_publishNotifications:function(){var a=0;if(this.widgetNotifications){for(var b in this.widgetNotifications)a+=this.widgetNotifications[b];this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.NOTIFICATION,data:a})}},_unbindEvents:function(){this.bindedEvents.forEach(function(a){this.windowSDKEvents.unbind(a)}.bind(this));this.wsdkModel.unbind(this.widgetModelPath.WINDOW_UI,this._onWindowStateChanged,this)}});b=lpTag.unifiedWindow.WidgetManagerViewController.prototype;b.dispose=function(){this._unbindEvents();this.widgetsVC.forEach(function(a){a&&this._disposeWidgetVC(a.getId())}.bind(this));this.widgetsVC=[];this.widgetLifeCyleBindingMap={};this.sliderAPI.dispose()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){if(c[a]){this.initialEvents=this.initialEvents||{};this.initialEvents[a]=this.initialEvents[a]||[];this.initialEvents[a].push({eventName:a,data:b})}}var b,c;lpTag.unifiedWindow.WidgetViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"WidgetViewController",sliderAPI:null,widgetsConfig:null,imageRepository:null,windowSDKEvents:null,initialEvents:null,util:null,showOnInit:!1,priority:-1,courier:null,state:null,WAIT_FOR_SLIDER_AVAILABILITY_TIME:400,MAX_OPEN_SLIDER_TRIES:5,STATE_TYPE:{inititating:"initiating",initiated:"initiated",errorOnInitiation:"errorOnInitiation",disposed:"disposed"},MAX_LOADING_TIME:3e3,initialize:function(a){this.sliderAPI=a.sliderAPI;this.widgetsConfig=a.widgetsConfig;this.windowSDKEvents=a.windowSDKEvents;this.appContext=a.appContext;this.util=lpTag.taglets.lpUtil;this.widgetSDKAPI=lpTag.LPWidgetSDK.API;c={};c[this.widgetSDKAPI.events.PARTICIPANTS]=!0;c[this.widgetSDKAPI.events.CONVERSATION_INFO]=!0;c[this.widgetSDKAPI.events.MESSAGES]=!0;c[this.widgetSDKAPI.events.ENGAGEMENT_INFO]=!0;
},_initWidget:function(){var a=this.widgetsConfig;this.state=this.STATE_TYPE.inititating;this.showOnInit=a.showOnInit;this.priority=a.priority;if(a&&a.url&&"string"==typeof a.name){this._createWidgetCourier();this.state=this.STATE_TYPE.initiated;this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.INITIATED_WIDGET_ID,data:this.getId()})}},_createWidgetCourier:function(){var a,b=this._getParametesForWidgetCreation()||this.widgetsConfig.url,c={context:this,reload:this.reloadWidget},d={width:"100%",height:"100%"};d["border-color"]="transparent";try{a=new lpTag.Chronos.PostMessageCourier({target:{url:b,callback:this._onCourierInitiatedCallback,context:this,useObjects:this.appContext.deviceDetector.isIE()?!1:!0,style:d,container:this.getFirstElement(this.view)},removeDispose:!0});this.sliderAPI.addView(this.getFirstElement(this.view),"",this.getId(),lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView,c)}catch(e){this.logger.error("Error on courier initiation for: "+this.getId(),this.ControllerName);this._handleError()}this.courierErrorTimeout=setTimeout(function(){this.state!==this.STATE_TYPE.initiated&&this._handleError()}.bind(this),this.MAX_LOADING_TIME);this.courier=a},_getParametesForWidgetCreation:function(){var a=[];this.getId()&&a.push({key:lpTag.unifiedWindow.consts.widgetSDK.WIDGET_NAME,value:this.getId()});this.appContext.conf.unifiedConf.accountId&&a.push({key:lpTag.unifiedWindow.consts.widgetSDK.ACCOUNT_ID,value:this.appContext.conf.unifiedConf.accountId});return this.util.addQueryParams(this.widgetsConfig.url,a)},_onCourierInitiatedCallback:function(a,b){if(a)this._handleError();else{this.iframe=this._setIframeAccessibilityAttrs(b);this._runPendingEventsData();this.setWidgetCommandEvents()}},_runPendingEventsData:function(){for(var a in this.initialEvents)if(this.initialEvents.hasOwnProperty(a))for(var b=0;b<this.initialEvents[a].length;b++)this.trigger(this.initialEvents[a][b].eventName,this.initialEvents[a][b].data)},_handleError:function(){if(this.STATE_TYPE.errorOnInitiation!==this.state||this.STATE_TYPE.disposed!==this.state){this.logger.error("_handleError: Failed to init widget communication",this.ControllerName);this.state=this.STATE_TYPE.errorOnInitiation}},_setIframeAccessibilityAttrs:function(a){if(a.constructor===HTMLIFrameElement){a.setAttribute("tabindex","0");a.setAttribute("role","region");a.setAttribute("aria-label","widget area");a.setAttribute("title","widget area");a.setAttribute("aria-hidden","false");return a}},setWidgetCommandEvents:function(){if(this.courier){this.courier.comply({appName:this.widgetSDKAPI.appName,cmdName:this.widgetSDKAPI.commands.NOTIFICATION,func:this._onWidgetNotification,context:this});this.courier.comply({appName:this.widgetSDKAPI.appName,cmdName:this.widgetSDKAPI.commands.DISPOSE,func:this._onDisposeCommand,context:this})}},_onWidgetNotification:function(a){this.logger.info("_onNotification: on notification",this.ControllerName);a=a||{};a.widgetId=a.id||this.getId();this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.WIDGET_NOTIFICATION,data:a})},_onDisposeCommand:function(a){a===this.getId()&&this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.DISPOSED_WIDGET_ID,data:a})},_addToSlider:function(){this.sliderAPI.setSelectedView(this.getId());this.sliderAPI.showSlider()}});b=lpTag.unifiedWindow.WidgetViewController.prototype;b.getId=function(){return this.widgetsConfig&&this.widgetsConfig.id};b.showAfterInitiation=function(){return this.showOnInit};b.getPriority=function(){return this.priority};b.getWidgetStartState=function(){return this.widgetsConfig.startState};b.getEvents=function(){return this.widgetsConfig.events};b.trigger=function(b,c){this.courier?this.courier.trigger({appName:this.widgetSDKAPI.appName,eventName:b,data:c}):a.call(this,b,c)};b.reloadWidget=function(){if(this.state!==this.STATE_TYPE.inititating){if(this.courier){this.courier.dispose();this.courier=null}this.iframe=null;this._initWidget()}};b.init=function(){null===this.state&&this._initWidget()};b.showWidget=function(){var a,b=0;if(this.sliderAPI.isInProgress())a=setInterval(function(){b++;if(this.sliderAPI.isInProgress())this.MAX_OPEN_SLIDER_TRIES===b&&clearInterval(a);else{this.init();this._addToSlider();clearInterval(a)}}.bind(this),this.WAIT_FOR_SLIDER_AVAILABILITY_TIME);else{this.init();this._addToSlider()}};b.isInitiated=function(){return this.state===this.STATE_TYPE.initiated};b.isDisposed=function(){return this.state===this.STATE_TYPE.disposed};b.isError=function(){return this.state===this.STATE_TYPE.errorOnInitiation};b.dispose=function(){if(this.state!==this.STATE_TYPE.disposed){this.state=this.STATE_TYPE.disposed;this.sliderAPI.getSelectedViewId()===this.getId()&&this.util.runCallback(this.sliderAPI.hideSlider,this.sliderAPI);this.sliderAPI.removeView(this.getId());if(this.courierErrorTimeout){clearTimeout(this.courierErrorTimeout);this.courierErrorTimeout=null}this.courier.dispose()}}}();!function(){function a(){var a=document.getElementsByClassName("lpc_banner-image-area__image"),d=document.getElementsByClassName("lp_location_center");if(a&&a.length>0&&d&&d.length>0){var e=c(a[0],d[0]);b(e);d[0].addEventListener("scroll",function(){var e=c(a[0],d[0]);b(e)})}}function b(a){var b=document.getElementsByClassName("lpc_maximized-header__text-wrapper");b&&b.length>0&&(a?b[0].style.display="none":b[0].style.display="inline-block")}function c(a,b){var c=a.offsetTop,d=c+a.clientHeight,e=b.scrollTop,f=e+b.clientHeight;return c>=e&&f>=d||e>c&&d>e||f>c&&d>f}lpTag.unifiedWindow.LogoViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"LogoViewController",initialize:function(a){this.appContext=a.appContext;this.windowConf=this.appContext.conf.windowConf;this.unifiedConf=this.appContext.conf.unifiedConf},render:function(){var b=this.appContext.conf.conversationOwnerBrandInfo,c=this.windowConf.brandLogoEnabled&&b&&b.logoImg?b.logoImg:this.windowConf.logoUrl;this.windowConf.logoImage&&c&&this.createView({template:this.unifiedConf.hasDeflectionHeader?"<div class='lp_logo_area_wrapper' title='{{altText}}' data-lp-cust-id='logoAltText'><div class='lp_logo_image_wrapper lpc_banner-image-area__image-wrapper lpc_banner-image-area__image-wrapper_maximized {{deviceClass}}' data-lp-cust-id='logo'><img src='{{url}}' alt='{{altText}}' class='lp_image lpc_banner-image-area__image lpc_banner-image-area__image_maximized {{deviceClass}}' data-lp-cust-id='logoImage'></div><div class='lp_logo_divider'></div><a class='lp_logo_link lpc_banner-image-area__link lpc_banner-image-area__link_maximized {{deviceClass}} {{disableLinkClass}}' href='{{targetUrl}}' target='_blank' rel='noopener noreferrer' title='{{altText}}' data-lp-cust-id='logoTarget' {{tabindex}}><div class='lp_deflection-area'><div class='lp_deflection-icon'></div><div class='lp_deflection-message'>Find us on Maven Messenger</div></div></a></div>":"<div class='lp_logo_area_wrapper' title='{{altText}}' data-lp-cust-id='logoAltText'><a class='lp_logo_link lpc_banner-image-area__link lpc_banner-image-area__link_maximized {{deviceClass}} {{disableLinkClass}}' href='{{targetUrl}}' target='_blank' rel='noopener noreferrer' title='{{altText}}' data-lp-cust-id='logoTarget' {{tabindex}}><div class='lp_logo_image_wrapper lpc_banner-image-area__image-wrapper lpc_banner-image-area__image-wrapper_maximized {{deviceClass}}' data-lp-cust-id='logo'><img src='{{url}}' alt='{{altText}}' class='lp_image lpc_banner-image-area__image lpc_banner-image-area__image_maximized {{deviceClass}}' data-lp-cust-id='logoImage'></div></a></div>",wrapWithDiv:!1,textInjection:{url:c,targetUrl:this.windowConf.logoRedirectUrl||"javascript:void(0);",disableLinkClass:this.windowConf.logoRedirectUrl?"":"disableLinkClass",tabIndex:this.windowConf.logoRedirectUrl?"":"tabindex='0'",altText:this.windowConf.logoAltText||this.translate("defaultAltLogoText")},callback:function(b){if(!this.windowConf.logoRedirectUrl){var c=b.getElementsByClassName("lp_logo_link")[0];c.removeAttribute("href");c.outerHTML=c.outerHTML.replace("<a","<span").replace("a>","span>")}this.unifiedConf.hasDeflectionHeader&&a()}})}})}();!function(){function a(){this.isRendered=!0;this.wrapper=this.getFirstElement(this.LPViewMap.wrapper);this.button=this.getFirstElement(this.LPViewMap.button);if(this.button){var a=this;this.button.onclick=function(){f.call(a)}}var b=this.appContext.conversationManager.getConversationList();e.call(this,b)}function b(a){this.isRendered&&e.call(this,a)}function c(a){var b=!1,c=a&&a.newValue;if(c&&c.length>0)for(var d=0;d<c.length&&!b;){if(c[d]&&c[d].history){b=!0;break}d++}if(b){this.enableHistoryButton();this.appContext.conversationManager.areAllConversationsLoaded()&&this.hideHistoryButton()}}function d(){this.hideHistoryButton()}function e(a){Array.isArray(a)&&a.length>2&&this.showHistoryButton()}function f(){this.disableHistoryButton();this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.CONVERSATIONS_VIEWED,data:{retry:!1}})}var g;lpTag.unifiedWindow.HistoryButtonViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"HistoryButtonViewController",LPViewMap:{wrapper:"^history_button_wrapper",button:"^history_button"},isRendered:!1,wrapper:void 0,button:void 0,initialize:function(a){this.appContext=a.appContext},events:function(){this.bindModel({path:this.chatPath.LINES,callback:c});this.appContext.events.bind({appName:"rotator",eventName:this.VCEvents.HISTORY_TRY_NEXT,context:this,func:f});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.chat.CONVERSATION_HISTORY,context:this,func:b});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.END_OF_HISTORY,context:this,func:d})},render:function(){this.createView({template:"<div class='lp_history_button_wrapper lpHide' data-lp-point='history_button_wrapper'><button class='lp_history_button' aria-label='{{buttonAriaLabelText}}' data-lp-point='history_button'>{{buttonDisplayText}}</button></div>",wrapWithDiv:!1,textInjection:{buttonDisplayText:this.translate("transcriptHistoryButtonDisplayText"),buttonAriaLabelText:this.translate("transcriptHistoryButtonAriaLabelText")},callback:a.bind(this)})},dispose:function(){this.unbindModel({path:this.chatPath.LINES,callback:c});this.appContext.events.unbind({appName:"rotator",eventName:this.VCEvents.HISTORY_TRY_NEXT,context:this,func:f});this.appContext.events.unbind({appName:"*",eventName:lpTag.unifiedWindow.events.chat.CONVERSATION_HISTORY,context:this,func:b});this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.END_OF_HISTORY,context:this,func:d})}});g=lpTag.unifiedWindow.HistoryButtonViewController.prototype;g.showHistoryButton=function(){this.removeClass(this.wrapper,"lpHide")};g.hideHistoryButton=function(){this.addClass(this.wrapper,"lpHide")};g.enableHistoryButton=function(){this.setEnabled(!0,this.button)};g.disableHistoryButton=function(){this.setEnabled(!1,this.button)}}();!function(){function a(){var a=this.getFirstElement(this.LPViewMap.link);a.onclick=d.bind(this);this.failedToLoadHistory&&e.call(this)}function b(a){var b=!1,c=a&&a.newValue;if(c&&c.length>0)for(var d=0;d<c.length&&!b;){c[d]&&c[d].history&&(b=!0);d++}b&&this.hideRotator()}function c(a){this.hideRotatorView=a&&a.shouldHide||!1}function d(){this.appContext.events.trigger({appName:"rotator",eventName:this.VCEvents.HISTORY_TRY_NEXT})}function e(a){var b=a&&a.changedScroll||!1,d=a&&a.preventRotator||!1;if(!b&&!d)if(this.hideRotatorView){this.hideRotator();c.call(this,{shouldHide:!1})}else{var e=this.getFirstElement(this.LPViewMap.wrapper);this.removeClass(e,"lpHide");g.call(this);f.call(this)}}function f(){for(var a,b=[{message:this.translate("transcriptRotatorFirstMessage"),hideImage:!1,hideLink:!0},{message:this.translate("transcriptRotatorSecondMessage"),hideImage:!0,hideLink:!1}],c=0;c<b.length;c++){a=setTimeout(h.bind(this,b[c]),this.updateRotatorTimeouts[c]);this.updateRotatorTimeoutIDs.push(a)}}function g(){for(var a=0;a<this.updateRotatorTimeoutIDs.length;a++)clearTimeout(this.updateRotatorTimeoutIDs[a]);this.updateRotatorTimeoutIDs=[];h.call(this,{message:this.translate("transcriptRotatorDefaultMessage"),hideImage:!1,hideLink:!0})}function h(a){var b=this.getFirstElement(this.LPViewMap.wrapper),c=this.getFirstElement(this.LPViewMap.text,b),d=this.getFirstElement(this.LPViewMap.link,b),e=this.getFirstElement(this.LPViewMap.image,b);c&&(c.innerText=a&&a.message);e&&this.toggle(a&&!a.hideImage,{view:e,useClasses:!0});d&&this.toggle(a&&!a.hideLink,{view:d,useClasses:!0})}var i;lpTag.unifiedWindow.RotatorViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"RotatorViewController",updateRotatorTimeouts:[],LPViewMap:{wrapper:".lp_transcript_rotator_wrapper",text:"^lp_transcript_rotator_text",link:"^lp_transcript_rotator_link",image:".lp_transcript_rotator_image"},initialize:function(a){this.appContext=a.appContext;this.updateRotatorTimeoutIDs=[];this.failedToLoadHistory=this.appContext.conf.unifiedConf.failedToLoadHistory;this.hideRotatorView=!1;var b=this.appContext.conf.unifiedConf.transcriptRotatorFirstMessageTimeout||2e3,c=this.appContext.conf.unifiedConf.transcriptRotatorSecondMessageTimeout||4e3;this.updateRotatorTimeouts=[b,c]},events:function(){this.bindModel({path:this.chatPath.LINES,callback:b});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.CONVERSATIONS_VIEWED,context:this,func:e});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.END_OF_HISTORY,context:this,func:c})},render:function(){this.createView({template:"<div class='lp_transcript_rotator_wrapper lpHide'><div class='lp_transcript_rotator_image'><img src='{{imagesRepository}}/{{imageUrl}}' alt='' class='lp_image'></div><div class='lp_transcript_rotator_text'><span class='text' data-lp-point='lp_transcript_rotator_text'>{{text}}</span>&nbsp;<a href='#' data-lp-point='lp_transcript_rotator_link'>{{linkText}}</a></div></div>",wrapWithDiv:!1,textInjection:{imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,imageUrl:"loader_anim_bgwhite_16.gif",text:this.translate("transcriptRotatorDefaultMessage"),linkText:this.translate("transcriptRotatorLinkText")},callback:a.bind(this)})}});i=lpTag.unifiedWindow.RotatorViewController.prototype;i.hideRotator=function(){var a=this.getFirstElement(this.LPViewMap.wrapper);if(a){g.call(this);this.addClass(a,"lpHide")}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};var STORAGE={KEY:"-richContentWidgetKey",DOMAIN:"leCdnDomain"};!function(){function a(){var a=window.lpTag.taglets.lpSecureStorage.v;return"https://"+lpTag.csds.getDomain(STORAGE.DOMAIN)+"/le_secure_storage/"+(a?a:"")}var b=lpTag.unifiedWindow.apps.RICH_CONTENT;lpTag.unifiedWindow.RichContentWidgetManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"RichContentWidgetViewController",initialize:function(a){this.appContext=a.appContext||{};this.sliderAPI=a.sliderAPI;this.sliders={};this.slidersPersistedData={};this.accountId=this.appContext.conf&&this.appContext.conf.unifiedConf&&this.appContext.conf.unifiedConf.accountId||lpTag.site;this._loadState()},events:function(){this.appContext.events.bind({appName:b,eventName:lpTag.unifiedWindow.consts.RichContent.LINK_CLICKED,context:this,func:this._onLinkClicked});this.appContext.events.bind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:this._onSliderClosed})},dispose:function(){this._disposeSliders();this._unbindEvents();lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)},_unbindEvents:function(){this.appContext.events.unbind({appName:b,eventName:lpTag.unifiedWindow.consts.RichContent.LINK_CLICKED,context:this,func:this._onLinkClicked});this.appContext.events.unbind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:this._onSliderClosed})},_onLinkClicked:function(a){if(a.url){this.sliders[a.url]?this.sliders[a.url].reload():this._initWidgetInstance(a);this.sliders[a.url].addToSlider();this._saveState(this.sliders[a.url].getId(),{url:a.url,actionData:a.actionData})}else this.logger.error("Cannot open RichContentWidget: url is missing",this.ControllerName)},_initWidgetInstance:function(a,b){this.sliders[a.url]=new lpTag.unifiedWindow.RichContentWidgetViewController({sliderAPI:this.sliderAPI,url:a.url,sliderId:b,actionData:a.actionData,appContext:this.appContext})},_onSliderClosed:function(a){a.type===lpTag.unifiedWindow.consts.slider.viewType.RichContentLinkAction&&this._disposeSliders()},_disposeSliders:function(){for(var a in this.sliders)this.sliders[a]&&this.sliders[a].dispose();this.sliders={};this._saveState()},_getStorageKey:function(){return STORAGE.KEY+"_"+(this.appContext.conf&&this.appContext.conf.engConf&&this.appContext.conf.engConf.ssid)},_saveState:function(c,d){if(c){this.slidersPersistedData[c]=d;this.slidersPersistedData.activeId=c}else this.slidersPersistedData={};lpTag.taglets.lpSecureStorage.setValue({key:this._getStorageKey(),site:this.accountId,app:b,value:this.slidersPersistedData,success:this._onSaveSuccess.bind(this),error:this._onSaveError.bind(this),appName:b,domain:a(),firstParty:!0})},_onSaveSuccess:function(){this.logger.info("successfully saved RC content",this.ControllerName)},_onSaveError:function(a){this.logger.error("fail to saved RC content "+a,this.ControllerName)},_loadState:function(){lpTag.taglets.lpSecureStorage.getValue({key:this._getStorageKey(),site:this.accountId,app:b,success:this._onLoadSuccess.bind(this),error:this._onLoadError.bind(this),appName:b,domain:a(),firstParty:!0})},_onLoadSuccess:function(a){this.logger.info("successfully loaded RC content",this.ControllerName);if(a){this.slidersPersistedData=a;for(var b in a)if(b&&"activeId"!==b){this._initWidgetInstance(a[b],b);a.activeId===b&&this.sliders[a[b].url].addToSlider()}}},_onLoadError:function(a){this.logger.error("fail to load RC content "+a,this.ControllerName)}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){lpTag.unifiedWindow.RichContentWidgetViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"RichContentWidgetViewController",sliderAPI:null,initialize:function(a){this.url=a.url;this.sliderAPI=a.sliderAPI;this.actionData=a.actionData||{};this.sliderId=a.sliderId||"richContent_"+Date.now();this.appContext=a.appContext;this.log=lpTag.unifiedWindow.log;this._createIFrame()},dispose:function(){this.sliderAPI.removeView(this.sliderId);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)},addToSlider:function(){this.sliderAPI.setSelectedView(this.sliderId);this.sliderAPI.showSlider();this.sliderAPI.focusOnMinimize()},reload:function(){if(this.iframe)this.iframe.src=this.iframe.src;else if(this.courier){this.courier.dispose();this._createIFrame()}},getId:function(){return this.sliderId},_createIFrame:function(){var a=this.appContext&&this.appContext.conf&&this.appContext.conf.unifiedConf;a.widgetSDK?this._createChronosCourier():this._createPlainIFrame();this.sliderAPI.addView(this.getFirstElement(this.view),this.actionData.name||"",this.sliderId,lpTag.unifiedWindow.consts.slider.viewType.RichContentLinkAction)},_createChronosCourier:function(){this.courier=new lpTag.Chronos.PostMessageCourier({target:{url:this.url,callback:this._onCourierInitiatedCallback,context:this,useObjects:!this.appContext.deviceDetector.isIE(),style:{width:"100%",height:"100%",borderColor:"transparent"},container:this.getFirstElement(this.view)},removeDispose:!0})},_createPlainIFrame:function(){this.iframe=document.createElement("IFRAME");this.iframe.style.width="100%";this.iframe.style.height="100%";this.iframe.style.borderColor="transparent";this.iframe.setAttribute("src",this.url);this._setIframeAccessibilityAttrs(this.iframe);this.view.appendChild(this.iframe)},_setIframeAccessibilityAttrs:function(a){if(a.constructor===HTMLIFrameElement){a.setAttribute("tabindex","0");a.setAttribute("role","region");a.setAttribute("aria-label","widget area");a.setAttribute("title","widget area");return a}},_onCourierInitiatedCallback:function(a,b){if(a)this.log.error("_handleError: Failed to init widget communication",this.ControllerName);else{this._setIframeAccessibilityAttrs(b);this._setWidgetCommandEvents()}},_setWidgetCommandEvents:function(){this.courier&&this.courier.comply({appName:lpTag.LPWidgetSDK.API.appName,cmdName:lpTag.LPWidgetSDK.API.commands.DISPOSE,func:this._onDisposeCommand,context:this})},_onDisposeCommand:function(){this.appContext.events.trigger({appName:"RichContentWidget",eventName:"CloseRichContentWidget"})}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};var STORAGE={KEY:"-mavenPayWidgetKey",DOMAIN:"leCdnDomain"};!function(){function a(){var a=window.lpTag.taglets.lpSecureStorage.v;return"https://"+lpTag.csds.getDomain(STORAGE.DOMAIN)+"/le_secure_storage/"+(a?a:"")}var b=lpTag.unifiedWindow.apps.MAVEN_PAY;lpTag.unifiedWindow.MavenPayWidgetManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"MavenPayWidgetViewController",initialize:function(a){this.appContext=a.appContext||{};this.sliderAPI=a.sliderAPI;this.sliders={};this.slidersPersistedData={};this.accountId=this.appContext.conf&&this.appContext.conf.unifiedConf&&this.appContext.conf.unifiedConf.accountId||lpTag.site;this._loadState()},events:function(){this.appContext.events.bind({appName:b,eventName:lpTag.unifiedWindow.consts.MavenPay.LINK_CLICKED,context:this,func:this._onLinkClicked});this.appContext.events.bind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:this._onSliderClosed})},dispose:function(){this._disposeSliders();this._unbindEvents();lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)},_unbindEvents:function(){this.appContext.events.unbind({appName:b,eventName:lpTag.unifiedWindow.consts.MavenPay.LINK_CLICKED,context:this,func:this._onLinkClicked});this.appContext.events.unbind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:this._onSliderClosed})},_onLinkClicked:function(a){if(a.url){this.sliders[a.url]?this.sliders[a.url].reload():this._initWidgetInstance(a);this.sliders[a.url].addToSlider();a.actionData=a.actionData||{};a.actionData.name=this.translate("paymentRequest_SlideoutTitle");this._saveState(this.sliders[a.url].getId(),{url:a.url,actionData:a.actionData})}else this.logger.error("Cannot open MavenPayWidget: url is missing",this.ControllerName)},_initWidgetInstance:function(a,b){this.sliders[a.url]=new lpTag.unifiedWindow.MavenPayWidgetViewController({sliderAPI:this.sliderAPI,url:a.url,sliderId:b,actionData:a.actionData,appContext:this.appContext})},_onSliderClosed:function(a){a.type===lpTag.unifiedWindow.consts.slider.viewType.MavenPayLinkView&&this._disposeSliders()},_disposeSliders:function(){for(var a in this.sliders)this.sliders[a]&&this.sliders[a].dispose();this.sliders={};this._saveState()},_getStorageKey:function(){return STORAGE.KEY+"_"+(this.appContext.conf&&this.appContext.conf.engConf&&this.appContext.conf.engConf.ssid)},_saveState:function(c,d){if(c){this.slidersPersistedData[c]=d;this.slidersPersistedData.activeId=c}else this.slidersPersistedData={};lpTag.taglets.lpSecureStorage.setValue({key:this._getStorageKey(),site:this.accountId,app:b,value:this.slidersPersistedData,success:this._onSaveSuccess.bind(this),error:this._onSaveError.bind(this),appName:b,domain:a(),firstParty:!0})},_onSaveSuccess:function(){this.logger.info("successfully saved Maven Pay content",this.ControllerName)},_onSaveError:function(a){this.logger.error("failed to save Maven Pay content "+a,this.ControllerName)},_loadState:function(){lpTag.taglets.lpSecureStorage.getValue({key:this._getStorageKey(),site:this.accountId,app:b,success:this._onLoadSuccess.bind(this),error:this._onLoadError.bind(this),appName:b,domain:a(),firstParty:!0})},_onLoadSuccess:function(a){this.logger.info("successfully loaded Maven Pay content",this.ControllerName);if(a){this.slidersPersistedData=a;for(var b in a)if(b&&"activeId"!==b){this._initWidgetInstance(a[b],b);a.activeId===b&&this.sliders[a[b].url].addToSlider()}}},_onLoadError:function(a){this.logger.error("failed to load Maven Pay content "+a,this.ControllerName)}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){lpTag.unifiedWindow.MavenPayWidgetViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"MavenPayWidgetViewController",sliderAPI:null,initialize:function(a){this.url=a.url;this.sliderAPI=a.sliderAPI;this.actionData=a.actionData||{};this.sliderId=a.sliderId||"mavenPay_"+Date.now();this.appContext=a.appContext;this._createIFrame()},dispose:function(){this.sliderAPI.removeView(this.sliderId);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)},addToSlider:function(){this.sliderAPI.setSelectedView(this.sliderId);this.sliderAPI.showSlider();this.sliderAPI.focusOnMinimize()},reload:function(){this.iframe&&(this.iframe.src=this.iframe.src)},getId:function(){return this.sliderId},_createIFrame:function(){this.iframe=document.createElement("IFRAME");this.iframe.style.width="100%";this.iframe.style.height="100%";this.iframe.style.borderColor="transparent";this.iframe.setAttribute("src",this.url);this.iframe.setAttribute("tabindex","0");this.iframe.setAttribute("role","region");this.iframe.setAttribute("aria-label","widget area");this.iframe.setAttribute("title","widget area");this.view.appendChild(this.iframe);this.sliderAPI.addView(this.getFirstElement(this.view),this.actionData.name||"",this.sliderId,lpTag.unifiedWindow.consts.slider.viewType.MavenPayLinkView)}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(a){var b=a.text;return b&&"string"==typeof b&&b.length>0?{type:"text",tag:"product question",text:b,style:{"background-color":"#4E43CC",color:"#FFFFFF"}}:void 0}}function b(a){return a&&"string"==typeof a&&a.length>2?{type:"image",url:a}:void 0}function c(a){return a&&"string"==typeof a&&a.length>0?{type:"text",tag:"title",text:a}:void 0}function d(a){return a&&"string"==typeof a&&a.length>0?{type:"text",tag:"price",text:a}:void 0}function e(a){var b=a.match(/([\d,]+(.\d{1,2})?)/);return b.length>0?b[0]:""}function f(a,b){return{actions:[{type:"custom",data:[{key:"id",value:""+(a.id||"")},{key:"title",value:""+(a.text||"")},{key:"caption",value:""+(b.text||"")},{key:"image",value:""+(a.imageURL||"")},{key:"webViewLink",value:""+(a.link||"")},{key:"currency",value:""+(a.currency||"USD")},{key:"minPrice",value:""+(e(a.price)||"")},{key:"compareAtPrice",value:""+(e(a.price)||"")},{key:"onSale",value:""+(a.onSale||"false")},{key:"variantText",value:""+(a.variant||"")}]}]}}var g;lpTag.unifiedWindow.ProductDetailsAreaViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ProductDetailsAreaViewController",applicationType:"ProductDetailsAreaViewController",templateName:"<div class='lp_product_details_area' data-lp-point='product_details_area'><img class='lp_product_details_image' src='{{productImage}}' onerror='this.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAgCAYAAABpRpp6AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4QUYCiwdGyEQJgAAA/BJREFUWMPNmL+LXFUUxz8zbCESdQUrC9lGxSpj/AO819qESSdJxCGNjcHNriCisBOCTTRhgpIihU4kbkRQHo7Yybm7EruQQbQJiMMKi4XimAjaafN98nJz78ybyU7wNI99c++73/M93/PjboM9NrPQAtrA2HvX2+vvL+0BwGUBdHo+BPwBrLAAW7pLFtvAfmALKIC+nh3v3XgRgBtzsjgGgsCFEpxZKAC8d20WZEtTWHRAJ2Kx570bJtaXDq3MGK0O8GGNpeeBbiNi0VWYJMXihAiMJIViBrA9EeJSJFTWrQjHsFHxsqdD+wI4nOHgmaQgB/uKRtt7N6q55/eG0P8EeO9dmCMB2+XhdRJNBwflQXuW5DQLwyWF5NKcYEumOjXBtkqZee86c+TcuEy6eUtQVw2iqJlcPWDVe9dP/N4FVlXHt7TuDlk2gWElyWa1HrBsFvpTwK5qbScDtldJ9ofLRJdcbwcsdvYrvDOZksUBbYHKmZMMikwFeLWsFN67sqUXYvwOhlEI5ir2CpsDugp7ylaBl1KMqVJsJXKgD7RygMNdyKIKupcCrUiclyxiGwHPJiLckVyTgIscYLOwkmEmBTpMiFQXcGbBZZz5T7OSVzvlYLNy2HIG2CfAd2bhdI16XLbylENjAehmnAnA0Cz8U+l+o+zwo24VqjOsWTgKvKMPrgP3Ay/GNVuODqe1ZtXh68DTs3TSyv7QrPx9myykqTPAWeAacAT4FBiYhc1Ic32gPwVsRyyenAdsaloLkWbeAH7R+9I2gYEY3zELa8C+ciaoMeS05+mo2XnYLIz04ZHmi0PAbmbvM8DbwCO5ECsKBbAcDzlm4ThwGDhRZ/hJSaJa3jaBixPAIpmMgTMZsC1gB7gZJ5DA9oBbSui1ugzHgAvgBYX4ypS968Df3rvXE2CPA9vAt/FQXwH7svLjNWDdLHxZp9umGH4SuCDvmSCH54GDCbCnBegU8CZwDtg2C60I7I1KpI4qF3biOj3xiuS9G5uFH4C/Jux5ANjQNDWK9HoZeDwCNNBzW8/qb6XdUsQOAl+YhUveuxN173QmBsOEjnXde/dBpNfLwK8CFEdnoHe7CbDxumvAu2bhe+BYnB/NxKbPgAMTpq4DwLGow20DV8VSTkphCtjSdlXzr0pKa1Ov+WqPcUl7FPgYOFTWUrNwCjgpnQ4WcKt/Qon5o+QyzF3zv5IsqoA3gI+8d0F6fR94LqPJvbIbYnsd+BnY18ws/FqASzsC3Ae8pbnhG+ApvV8U2GpCXgR+A67kGP5coSjb8Zq62Vij34PAY0rQe2E39c+WbmNCG3wPeAX4Ezjnvdvg/25mwU25q91z+xfs9+kVfxd53AAAAABJRU5ErkJggg==''><div class='lp_product_details_info'><div class='lp_product_details_title'>{{productTitle}}</div><div class='lp_product_details_price'>{{productPrice}}</div></div><button class='lp_product_details_close product_details_close lp_close_button' data-lp-point='close_button'><svg width='9' height='9' viewBox='0 0 9 9' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M0.561035 7.66064C0.33252 7.89551 0.319824 8.29541 0.561035 8.53027C0.795898 8.77148 1.20215 8.76514 1.43066 8.53662L4.42041 5.54688L7.41016 8.53662C7.64502 8.76514 8.04492 8.77148 8.27979 8.53027C8.521 8.29541 8.51465 7.89551 8.28613 7.66064L5.29639 4.6709L8.28613 1.6875C8.51465 1.45264 8.521 1.05273 8.27979 0.811523C8.04492 0.570312 7.64502 0.57666 7.41016 0.811523L4.42041 3.80127L1.43066 0.811523C1.20215 0.583008 0.795898 0.570312 0.561035 0.811523C0.319824 1.04639 0.33252 1.45264 0.561035 1.6875L3.55078 4.6709L0.561035 7.66064Z' fill='#9095A6'/></svg></button></div>",LPViewMap:{productDetailsArea:"^product_details_area",productDetailsClose:"^product_details_close"},initialize:function(a){this.appContext=a.appContext;this.targetView=a.targetView;this.context=a.context||this;this.product=a.product;this.beforeView=a.beforeView;this.setPaddingCallback=a.setPaddingCallback;this.setProductDetailsCallback=a.setCallback;this.productDetailsArea={};this.windowMinimized=!1;window.lpTag.productDetailsContext=this.appContext;this.closeButton=this.getFirstElement(this.LPViewMap.productDetailsClose,this.view);this.createProductDetailsView()},events:function(){if(lpTag||lpTag.events){lpTag.events.bind({appName:"*",eventName:this.VCEvents.ADD_PRODUCT_DETAILS,context:this,func:this.addProductDetails});lpTag.events.bind({appName:"*",eventName:this.EventName.uiState.MINIMIZED,context:this,func:this.setWindowMinimized});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.close});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:this.setWindowMaximized});this.bindCloseEvents();var a=lpTag.events.hasFired("*",this.VCEvents.ADD_PRODUCT_DETAILS);a.length>0&&this.addProductDetails(a[a.length-1].data)}else console.error("lpTag.events not found")},render:function(){}});g=lpTag.unifiedWindow.ProductDetailsAreaViewController.prototype;g.createProductDetailsView=function(){if(this.product&&this.product.text&&!this.product.productImage){if(this.productDetailsArea&&this.productDetailsArea instanceof HTMLElement){this.unbindCloseEvents();this.removeView(this.productDetailsArea)}this.view.style.display="block";var a={cssClass:this.productDetailsAreaClass,productImage:this.product.imageURL,productPrice:this.product.price,productTitle:this.product.text};this.productDetailsArea=this.createView({template:this.templateName,textInjection:a,wrapWithDiv:!1,target:this.targetView,beforeView:this.beforeView});this.setProductDetailsCallback.call(this.context);this.bindCloseEvents();lpTag.events.trigger("*",this.VCEvents.ADD_PRODUCT_DETAILS,{})}};g.close=function(){this.product={};this.unbindCloseEvents();this.removeView(this.productDetailsArea);
this.view.style.display="none";this.setProductDetailsCallback.call(this.context)};g.getProduct=function(){return this.product};g.isActive=function(){return this.product&&this.product.text&&this.productDetailsArea};g.addProductDetails=function(a){if(a&&a.text){this.product={text:a.text,price:a.price||"",imageURL:a.imageURL||"",link:a.link||""};this.windowMinimized||this.createProductDetailsView()}};g.setWindowMinimized=function(){this.windowMinimized=!0};g.setWindowMaximized=function(){this.windowMinimized=!1;this.product&&this.product.text&&this.product.imageURL&&this.createProductDetailsView()};g.generateStructuredContent=function(e){var g=a(e),h=b(this.product.imageURL),i=c(this.product.text),j=d(this.product.price),k=[],l="";h&&k.push(h);g&&(g.click=f(this.product,e));i&&k.push(i);j&&k.push(j);var m={json:{type:"vertical",elements:[],tag:"Product",alt:l}};m.json.elements.push(g);m.json.elements.push({type:"horizontal",elements:k});return m};g.dispose=function(){this.appContext.events.unbind({appName:"*",eventName:"addProductDetails",context:this,func:this.addProductDetails});this.unbindCloseEvents()};g.bindCloseEvents=function(){if(this.productDetailsArea&&this.productDetailsArea instanceof HTMLElement){this.bindViewEvent({selector:"^close_button",callback:this.close,DOMEvent:"click",inView:this.productDetailsArea});this.bindViewEvent({selector:"^close_button",callback:this.close,DOMEvent:this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet()&&"touchend",inView:this.productDetailsArea})}};g.unbindCloseEvents=function(){this.unbindViewEvent({selector:"^close_button",callback:this.close,DOMEvent:"click",inView:this.productDetailsArea});this.unbindViewEvent({selector:"^close_button",callback:this.close,DOMEvent:this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet()&&"touchend",inView:this.productDetailsArea})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,data:{origin:a,dialogOpenedFrom:this.dialogOpenedFrom}});this.appContext.events.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.MAXIMIZE_VISIBLE})}var b;lpTag.unifiedWindow.DialogViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"DialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container lpc_confirmation-dialog {{deviceClass}}' data-lp-cust-id='dialogArea'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner'><div class='lp_center_div_inner_content' role='dialog' aria-labelledby='dialog_title'><div class='lp_lpview_title lp_title lpc_confirmation-dialog__title {{deviceClass}}' id='dialog_title' role='heading' aria-level='3'>{{title}}</div><div class='lp_lpview_title lp_subtitle lp_hidden' id='dialog_subtitle' data-lp-point='subtitle_text'>{{subtitle}}</div><div class='lp_buttons_area'><button type='button' class='lp_cancel_button lpc_confirmation-dialog__cancel-button {{deviceClass}}' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button tabindex='0' type='button' class='lp_confirm_button lpc_confirmation-dialog__confirm-button {{deviceClass}}' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></div></div></div></div>",focusElement:void 0,errorId:void 0,LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",innerContainer:"^center_div_inner",error:"^dialog_input_error"},LPClassesMap:{error:"lp_error"},initialize:function(a){a.successCallback&&(this.successCallback=a.successCallback);a.cancelCallback&&(this.cancelCallback=a.cancelCallback);this.appContext=a.appContext;this.dialogOpenedFrom=a.dialogOpenedFrom;var b=this.appContext.deviceDetector.isDesktop()?"1":"0.92";this.animate(this.view,{duration:300,opacity:b})},onInitialize:function(){this.focusOnElement()},events:function(){this.bindViewEvent({selector:this.LPViewMap.confirmButton,DOMEvent:"click",callback:this.confirmClicked});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"click",callback:this.cancelClicked});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"keydown",callback:this.cancelDialog});this.bindViewEvent({view:this.view,DOMEvent:"keydown",callback:this.checkIfCancel});(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.bindViewEvent({view:this.view,DOMEvent:"touchstart",callback:this.viewTapped});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:this.focusOnElement})}});b=lpTag.unifiedWindow.DialogViewController.prototype;b.viewTapped=function(){"INPUT"===document.activeElement.tagName&&this.hasInputFocused&&document.activeElement.blur()};b.successCallback=function(){};b.cancelCallback=function(){};b.confirmClicked=function(){if(this.validate()){this.successCallback();this.closeDialog(this.appConsts.dialog.actions.CONFIRM)}};b.cancelClicked=function(){this.closeDialog(this.appConsts.dialog.actions.CANCEL,this.cancelCallback)};b.cancelDialog=function(a){var b=a.keyCode;13===b?this.cancelClicked():32===b&&this.cancelClicked()};b.checkIfCancel=function(a){var b=a.keyCode;27===b&&this.cancelClicked()};b.focusOnElement=function(){this.focusElement&&this.focusElement.focus()};b.validate=function(){return!0};b.showError=function(a,b){var c=this;this.errorView||this.createView({template:"<img class='lp_email_error_img' data-lp-point='email_error_img' src='{{url}}' alt='' aria-hidden='true'><div id='{{id}}' class='lp_email_error_text' class='lp_text' data-lp-point='email_error_text' aria-live='polite'>{{text}}</div>",wrapWithDiv:!0,target:this.LPViewMap.error,textInjection:{text:a,url:this.appContext.conf.unifiedConf.imagesRepository+"/error-15x15.png",id:this.errorId},callback:function(a){c.errorView=a;c.errorView.setAttribute("role","alert");c.errorView.setAttribute("class","lp_dialog_alert")}});this.setErrorAttrs(b);this.shakeX(this.getFirstElement(this.LPViewMap.innerContainer))};b.hideError=function(){this.removeView(this.errorView);this.errorView=null;this.removeErrorAttrs()};b.setErrorAttrs=function(){this.addClass(this.LPViewMap.innerContainer,this.LPClassesMap.error);this.setErrorAccessibilityAttrs()};b.removeErrorAttrs=function(){this.removeClass(this.LPViewMap.innerContainer,this.LPClassesMap.error);this.removeErrorAccessibilityAttrs()};b.setErrorAccessibilityAttrs=function(){var a=this.focusElement;a.setAttribute("aria-describedby",this.errorId);a.setAttribute("aria-invalid","true");a.focus()};b.removeErrorAccessibilityAttrs=function(){var a=this.focusElement;a.removeAttribute("aria-describedby");a.removeAttribute("aria-invalid")};b.closeDialog=function(b,c){a.call(this,b);this.view.removeAttribute("role");var d=this;this.animate(this.view,{duration:500,opacity:"0"},function(){c&&"function"==typeof c&&c.call(d);d.dispose()})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=new RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return b.test(a)}var b;lpTag.unifiedWindow.EmailTranscriptDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"EmailTranscriptDialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container lpc_confirmation-dialog {{deviceClass}}' data-lp-cust-id='dialogArea'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner' data-lp-point='center_div_inner'><div class='lp_center_div_inner_content'><div id='lp_transcript_title' class='lp_lpview_title lp_title lp_email_transcript lpc_confirmation-dialog__title {{deviceClass}}'>{{title}}</div><input class='lp_dialog_input' data-lp-point='dialog_input' type='email' aria-labelledby='lp_transcript_title'><div class='lp_dialog_input_error' data-lp-point='dialog_input_error'></div><div class='lp_buttons_area'><button class='lp_cancel_button lp_email_transcript lpc_confirmation-dialog__cancel-button {{deviceClass}}' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_confirm_button lp_email_transcript lpc_confirmation-dialog__confirm-button {{deviceClass}}' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></div></div></div></div>",TOOLTIP_TIMEOUT:3e3,emailAddress:void 0,errorId:"lp_transcript_error",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",input:"^dialog_input",error:"^dialog_input_error",innerContainer:"^center_div_inner"},LPClassesMap:{error:"lp_error"},preInitView:function(){this.textInjection={title:this.translate("dialog_email_transcript"),confirm:this.translate("submit"),cancel:this.translate("cancel")}},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.input)}});b=lpTag.unifiedWindow.EmailTranscriptDialogViewController.prototype;b.cancelCallback=function(){this.hideError()};b.validate=function(){var b=this.focusElement.value;if(a(b)){this.emailAddress=b;this.appContext.events.trigger({appName:"tooltip",eventName:"show",data:{text:this.translate("tooltip_EmailTranscriptSentConfirmation"),tooltipTimeout:this.TOOLTIP_TIMEOUT}});this.hideError();return!0}this.showError(this.translate("inputEmailError"));return!1};b.successCallback=function(){this.appContext.chatStateManager.emailTranscript(this.emailAddress,"Your chat transcript");this.view.focus()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=this.getFirstElement(this.LPViewMap.confirmButton),c=a.newValue;c===lpTag.unifiedWindow.State.CONNECTION_ISSUE?b.setAttribute("disabled","disabled"):b.removeAttribute("disabled")}function b(a){var b=10,c=10;a.setAttribute("tabindex","0");a.blur();var d=0,e=window.setInterval(function(){a.focus();d++;d>=c&&window.clearInterval(e)},b)}var c;lpTag.unifiedWindow.EndChatDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"EndChatDialogViewController",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",mainWindow:"^maximized",buttonsArea:".lp_buttons_area"},preInitView:function(){this.textInjection={title:this.translate("end_chat_alert"),confirm:this.translate("yes"),cancel:this.translate("no")}},events:function(){this.bindModel({path:this.uiPath.STATE,callback:a,context:this});this.bindViewEvent({selector:this.LPViewMap.buttonsArea,callback:this._maintainFocus,DOMEvent:"keydown",context:this});this.appContext.deviceDetector.isIOS()&&this.bindViewEvent({selector:this.LPViewMap.confirmButton,callback:this._handleIOSFocus,DOMEvent:"blur",context:this})},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.cancelButton)},_handleIOSFocus:function(a){var c=this.getFirstElement(".lp_buttons_area"),d=c.querySelectorAll("button"),e=d[0],f=d[d.length-1];if(a.target===f){a.preventDefault();e.focus();b(e)}},_maintainFocus:function(a){var b="which"in a?a.which:a.keyCode,c=this.getFirstElement(".lp_buttons_area"),d=c.querySelectorAll("button"),e=d[0],f=d[d.length-1];if(9===b&&a.shiftKey||9===b)if(a.target===f){e.focus();a.preventDefault()}else if(a.target===e){f.focus();a.preventDefault()}}});c=lpTag.unifiedWindow.EndChatDialogViewController.prototype;c.successCallback=function(){this.appContext.uiStateManager.setActionsVisibility(!1);this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.application.END_CHAT})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};var proto;lpTag.unifiedWindow.ForgetMeDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"ForgetMeDialogViewController",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",subtitleElement:"^subtitle_text"},ConversationOwnerAccountId:lpTag.site,preInitView:function(a){var b=this.models.uiModel.get(lpTag.unifiedWindow.uiModelPath.STATE.path),c=[lpTag.unifiedWindow.State.ENDED,lpTag.unifiedWindow.State.PENDING,lpTag.unifiedWindow.State.APP_ENDED,lpTag.unifiedWindow.State.WAITING],d=this.translate("forget_me_dialog_subtitle_on_active_chat_close_window");-1!==c.indexOf(b)&&(d=this.translate("forget_me_dialog_subtitle_close_window"));this.textInjection={title:this.translate("forget_me_dialog_close_window"),confirm:this.translate("yes"),cancel:this.translate("no"),subtitle:d};a.appContext.conf.engConf.subscription&&(this.ConversationOwnerAccountId=a.appContext.conf.engConf.subscription.conversationowneraccountid)},render:function(){lpTag.taglets.lpUtil.removeClass(this.subtitleElement,"lp_hidden")},events:function(){this.bindModel({path:this.uiPath.STATE,callback:_stateChanged,context:this})},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.cancelButton);this.subtitleElement=this.getFirstElement(this.LPViewMap.subtitleElement)}});proto=lpTag.unifiedWindow.ForgetMeDialogViewController.prototype;proto.successCallback=function(){function a(){var a=this;a.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.application.END_CHAT});a.appContext.events.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.chat.CLOSE_WINDOW_FORGET_ME})}this.appContext.uiStateManager.setActionsVisibility(!1);this.appContext.events.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.chat.FORGET_ME,global:!0,data:{conversationOwnerAccountId:this.ConversationOwnerAccountId,endChatAfterClearing:a.bind(this)}});this.appContext.clearingHistory=!0};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){for(var a,b=[],c=1;2>=c;c++){a=this.getFirstElement(this.LPViewMap["input"+c]);b.push(a)}return b}function b(){for(var a=[],b=0;b<this.inputs.length;b++)this.inputs[b].value||a.push(this.inputs[b]);return a}function c(){for(var a=0;a<this.inputs.length;a++)this.removeClass(this.inputs[a],this.LPClassesMap.error)}var d;lpTag.unifiedWindow.IdnvDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"IdnvDialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container lpc_confirmation-dialog {{deviceClass}}' data-lp-cust-id='dialogArea' role='dialog'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner' data-lp-point='center_div_inner'><fieldset class='lp_center_div_inner_content'><legend class='lp_lpview_title lp_title lpc_confirmation-dialog__title {{deviceClass}}' id='idnv_dialog_title'>{{title}}</legend><div class='lp_idnv_container'><div class='lp_idnv_wrapper'><label for='idnv_input_1'>{{idnvChar1}}</label><input id='idnv_input_1' class='lp_dialog_input lp_idnv_input' data-lp-point='dialog_input_1' aria-describedby='idnv_dialog_title' type='password' maxlength='1' aria-required='true'></div><div class='lp_idnv_wrapper'><label for='idnv_input_2'>{{idnvChar2}}</label><input id='idnv_input_2' class='lp_dialog_input lp_idnv_input' data-lp-point='dialog_input_2' aria-describedby='idnv_dialog_title' type='password' maxlength='1' aria-required='true'></div><div class='lp_dialog_input_error' data-lp-point='dialog_input_error' role='alert' aria-atomic='true'></div></div><div class='lp_buttons_area'><button class='lp_cancel_button lpc_confirmation-dialog__cancel-button {{deviceClass}}' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button tabindex='0' class='lp_confirm_button lpc_confirmation-dialog__confirm-button {{deviceClass}}' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></fieldset></div></div></div>",errorId:"lp_idnv_error",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",input1:"^dialog_input_1",input2:"^dialog_input_2",error:"^dialog_input_error",innerContainer:"^center_div_inner"},preInitView:function(a){var b;this.idnvData=a.idnvData;b=this.idnvData.fields;this.textInjection={title:this.injectTextDefaults(this.translate("idnvDialogTitle",!0),{idnvChar1:b.firstChar,idnvChar2:b.secondChar,idnvType:b.typeField}),confirm:this.translate("submit"),cancel:this.translate("cancel"),idnvChar1:b.firstChar,idnvChar2:b.secondChar}},initialize:function(){this.inputs=a.call(this);this.focusElement=this.inputs[0]},events:function(){this.appContext.events.bind({appName:"*",eventName:this.EventName.chatState.ENDED,context:this,func:this.closeDialog});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_STATE_CHANGED,context:this,func:this.closeDialog})}});d=lpTag.unifiedWindow.IdnvDialogViewController.prototype;d.cancelCallback=function(){this.hideError();this.appContext.idnvManager.sendIdnvCancelLine(this.idnvData.encodedFields)};d.successCallback=function(){var a={firstChar:this.inputs[0].value,secondChar:this.inputs[1].value,idnvData:this.idnvData};this.appContext.idnvManager.sendIdnvSubmitLine(a)};d.validate=function(){var a=b.call(this);if(0===a.length){this.hideError();return!0}this.hideError();this.showError(this.translate("idnvInputError"),a);return!1};d.setErrorAttrs=function(a){c.call(this);for(var b=0;b<a.length;b++)this.addClass(a[b],this.LPClassesMap.error);this.addClass(this.LPViewMap.error,this.LPClassesMap.error);this.focusElement=a[0];this.setErrorAccessibilityAttrs()};d.removeErrorAttrs=function(){c.call(this);this.removeClass(this.LPViewMap.error,this.LPClassesMap.error);this.removeErrorAccessibilityAttrs()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a;lpTag.unifiedWindow.ReauthenticationDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"ReauthenticationDialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container lpc_confirmation-dialog {{deviceClass}}' data-lp-cust-id='dialogArea' role='alertdialog' aria-labelledby='dialog_title'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner'><div class='lp_center_div_inner_content'><div class='lp_icons_area'><div class='icon'><img src='{{imagesRepository}}/embedded-error.png' alt='' aria-hidden='true'></div></div><div class='lp_lpview_title lp_title lp_title_large_padding lpc_confirmation-dialog__title {{deviceClass}}' id='dialog_title'>{{title}}</div><div class='lp_buttons_area'><button class='lp_confirm_button lp_single_button lpc_confirmation-dialog__confirm-button {{deviceClass}}' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></div></div></div></div>",LPViewMap:{confirmButton:"^confirm_button"},preInitView:function(a){this.data=a;var b=this.translate("authExpired"),c=this.translate("redirect");if(a.appContext.conf.engConf.allowUnauthMsg){b=this.translate("unauthExpired");c=this.translate("reload")}this.textInjection={title:b,confirm:c,imagesRepository:a.appContext.conf.unifiedConf.imagesRepository};isNaN(a.callbackTimeout)||(this.timeout=setTimeout(function(){lpTag.lpUtils.runCallback(a.callback,a.context)},a.callbackTimeout))},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.confirmButton);this.data.header_key&&this.appContext.wrapperWindow.setTitle(this.translate(this.data.header_key))}});a=lpTag.unifiedWindow.ReauthenticationDialogViewController.prototype;a.successCallback=function(){this.timeout&&clearTimeout(this.timeout);lpTag.lpUtils.runCallback(this.data.callback,this.data.context)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){if(a.getAttribute("aria-labelledby")){a.removeAttribute("aria-labelledby");a.setAttribute("aria-label",b);return!0}return!1}function b(a,b){if(a.getAttribute("aria-label")){a.removeAttribute("aria-label");a.setAttribute("aria-labelledby",b);return!0}return!1}function c(a){for(var b=this.getElements(this.tagName),c=0;c<b.length;c++)b[c].setAttribute("aria-describedby",a)}function d(){for(var a=this.getElements(this.tagName),b=0;b<a.length;b++)a[b].removeAttribute("aria-describedby")}var e;lpTag.unifiedWindow.BaseSurveyQuestion=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"BaseSurveyQuestion",applicationType:"BaseSurveyQuestion",errorTemplateFileName:"<div class='{{wrapperClass}}wrapper' role='alert'><img class='lp_error_img' src='{{url}}' alt='{{error}}'><div id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' aria-live='polite'>{{text}}</div></div>",wrapperTemplateFileName:"<div class='lp_question'><div id='{{id}}' class='lp_question_label lpc_survey-area__question-label {{deviceClass}}'>{{label}}</div><div class='lp_lpview_content lp_content lpc_survey-area__question-content {{deviceClass}}'></div></div>",wrapperTemplateFileNameCsat:"<div class='lp_question'><div id='{{id}}' class='lp_question_label lpc_survey-area__question-label {{deviceClass}}' data-lp-point='csat-question-label' data-lp-cust-id='csat-question-label' role='heading' aria-level='3' tabindex='0'>{{label}}</div><div class='lp_lpview_content lp_content'></div></div>",customizationClassName:"lpc_survey-area__question-wrapper",prefixMap:{label:"lbl_",error:"err_"},LPViewMap:{errorWrapper:".surveyError_wrapper",errorText:"^errorText"},LPClassMap:{label:"lp_question_label",content:"lp_lpview_content",error:"lp_error",surveyError:"lp_surveyError_"},initialize:function(a){this.hasError=!1;if(a.question){this.question=a.question;this.errorIconURL=a.imagesRepository+"/error-15x15.png";this.appContext=a.appContext;this.deviceClass=lpTag.unifiedWindow.customization.deviceClass;this.container=this.createDivWrapper(a.question);this.defaultSelect=a.defaultSelect;this.containerId=this.container.getAttribute("id");this.answerArea=lpTag.lpUtils.getElementsByClass(this.container,this.LPClassMap.content,[])[0];this.errorId=this.prefixMap.error+this.question.id;this.surveyArea=a.surveyArea}}});e=lpTag.unifiedWindow.BaseSurveyQuestion.prototype;e.getQuestionType=function(a){if(!this.appContext.deviceDetector.isDesktop()){if("email"===a)return"email";if("numeric"===a)return"number"}return"text"};e.bindFocusAndBlurEvents=function(a){this.appContext.deviceDetector.isDesktop()||this.bindViewEvent({view:a,DOMEvent:"blur",appName:"input",eventData:{focusOnField:!0},callback:this.fireBlurEvent})};e.bindTextFieldEvents=function(a){this.bindViewEvent({view:a,DOMEvent:"keyup",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"input",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"paste",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"cut",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"dragend",callback:this.delaySubmitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"drop",callback:this.delaySubmitInputAnswer});if(this.appContext.deviceDetector.isDesktop()){this.bindViewEvent({view:a,DOMEvent:"keypress",callback:this.stopBubblingUp});this.bindViewEvent({view:a,DOMEvent:"blur",callback:this.fireBlurEvent})}this.bindFocusAndBlurEvents(a)};e.submitInputAnswer=function(a){"number"===a.target.type&&a.target.validity&&a.target.validity.badInput?a.target.value="":a.sourceElement.id&&this.submitAnswer(this.question.id,this.extractAnswerByValue(a.sourceElement.value))};e.delaySubmitInputAnswer=function(a){var b=this;setTimeout(function(){b.submitInputAnswer(a)},0)};e.setError=function(a){if(this.hasError)a!==this.errorText&&(this.getFirstElement(this.LPViewMap.errorText,this.errorView).innerHTML=a);else{this.hasError=!0;this.addClass(this.container,this.LPClassMap.error);this.errorView=this.createView({template:this.errorTemplateFileName,wrapWithDiv:!1,doNotAddChild:!0,textInjection:{wrapperClass:this.LPClassMap.surveyError,text:a,url:this.errorIconURL,id:this.errorId}});this.appContext.deviceDetector.isMobile()&&this.errorView.setAttribute("role","alert");this.container.appendChild(this.errorView);c.call(this,this.errorId)}this.errorText=a};e.cleanError=function(){this.removeClass(this.container,this.LPClassMap.error);this.errorView&&this.container.removeChild(this.errorView);this.errorView=null;this.errorText="";this.errorText="";this.hasError=!1;d.call(this,this.errorId)};e.setFocus=function(){this.focusOnElement(this.tagName)};e.dispose=function(){lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};e.createDivWrapper=function(a){var b=a.type==lpTag.unifiedWindow.SurveyType.CSAT?this.wrapperTemplateFileNameCsat:this.wrapperTemplateFileName,c=this.createView({template:b,wrapWithDiv:!1,textInjection:{label:a.label,id:this.prefixMap.label+a.id}}),d=lpTag.lpUtils.getElementsByClass(c,this.LPClassMap.label,[])[0],e=lpTag.lpUtils.getElementsByClass(c,this.LPClassMap.content,[])[0];if(a.mandatory){var f=document.createElement("SPAN");f.innerHTML="*";f.className="lp_mandatory";d.appendChild(f)}c.appendChild(e);return c};e.stopBubblingUp=function(a){var b="which"in a?a.which:a.keyCode;if(13===b){this.stopPropagation(a);"TEXTAREA"!==document.activeElement.tagName&&this.preventDefault(a)}};e.fireBlurEvent=function(){this.appContext.events.trigger({appName:"survey",eventName:"blur",data:{question:this.question}})};e.extractAnswerByValue=function(a){return this.question.entry&&this.question.entry[a]?this.question.entry[a].value:a};e.submitAnswer=function(a,b){var c=b.constructor===Array;b=c?b:[b];this.appContext.events.trigger({appName:"survey",eventName:"submitAnswer",data:{questionId:a,answer:b,isAnswerArray:c}})};e.addToLabel=function(a,b){return this.addToLabelOverride?this.addToLabelOverride.call(this,a,b):this.addToLabelBase.call(this,a,b)};e.revertLabel=function(a){return this.revertLabelOverride?this.revertLabelOverride.call(this,a):this.revertLabelBase.call(this,a)};e.addToLabelBase=function(b,c){var d=lpTag.lpUtils.getElementsByClass(this.container,this.LPClassMap.label,[]);if(d&&d.length>0)for(var e=b+". "+d[0].textContent,f=this.getElements(this.tagName),g=0;g<f.length;g++)a(f[g],e)||a(f[g].parentElement,e)};e.revertLabelBase=function(a){var c=lpTag.lpUtils.getElementsByClass(this.container,this.LPClassMap.label,[]);if(c&&c.length>0)for(var d=c[0].getAttribute("id"),e=this.getElements(this.tagName),f=0;f<e.length;f++)b(e[f],d)||b(e[f].parentElement,d)};e.isValid=function(){return!0}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){var a;lpTag.unifiedWindow.Survey.CheckBoxQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"CheckBoxQuestion",className:"lp_question_wrapper",checkboxWrapperClass:"lp_checkbox_wrapper",templateFileName:"<div class='lp_checkbox_button'><input id='{{inputId}}' type='checkbox' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></div>",wrapperTemplateFileName:"<div role='radiogroup' class='lp_question' aria-labelledby='{{id}}'><span id='{{id}}' class='lp_question_label'>{{label}}</span><div class='lp_lpview_content lp_content'></div></div>",prefix:"inp_",tagName:"input",initialize:function(){this.answers=[]},render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a,b,c=document.createElement("div");c.className=this.checkboxWrapperClass;for(var d=0;d<this.question.entry.length;++d){a=this.question.entry[d];b=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{inputId:d+"_"+this.question.id,value:d,name:this.prefix+this.question.id,type:this.getQuestionType(this.question.validationType),label:a.displayValue||a.value,isMandatory:this.question.mandatory.toString()}});if(a.checked===!0||"true"==a.checked){b.setAttribute("checked","checked");this.answers.push(a.value)}c.appendChild(b);this.answerArea.appendChild(c);this.bindViewEvent({view:b,DOMEvent:"click",callback:this.submitCheckboxAnswer})}}});a=lpTag.unifiedWindow.Survey.CheckBoxQuestion.prototype;a.submitCheckboxAnswer=function(a){if(a.sourceElement&&"undefined"!=typeof a.sourceElement.checked){var b=this.extractAnswerByValue(a.sourceElement.value);if(a.sourceElement.checked)this.answers.push(b);else{var c=this.answers.indexOf(b);-1!==c&&this.answers.splice(c,1)}this.submitAnswer(this.question.id,this.answers)}};a.addToLabelOverride=function(a,b){this.oldTitle=this.container.getAttribute("title");for(var c=this.getElements("label"),d=this.getElements(this.tagName),e=0;e<d.length&&e<c.length;e++)d[e].setAttribute("aria-label",a+". "+this.oldTitle+" "+c[e].textContent)};a.revertLabelOverride=function(a){for(var b=this.getElements(this.tagName),c=0;c<b.length;c++)b[c].removeAttribute("aria-label");this.oldTitle=null}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){var a;lpTag.unifiedWindow.Survey.DropDownQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"DropDownQuestion",className:"lp_question_wrapper",templateFileName:"<select id='{{id}}' class='lp_select_field' role='listbox' aria-labelledby='{{ariaLabel}}' aria-required='{{isMandatory}}'></select>",prefix:"sel_",tagName:"select",render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a,b,c=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,isMandatory:this.question.mandatory.toString()}}),d=[{value:this.defaultSelect||"pick one..."}];d=d.concat(this.question.entry);for(var e=0;e<d.length;++e){a=d[e];b=document.createElement("OPTION");b.setAttribute("value",e-1);b.innerHTML=lpTag.HtmlSanitizerUtils.sanitizeHtml(a.value).cleanText;(a.checked===!0||"true"==a.checked)&&b.setAttribute("selected","selected");c.appendChild(b)}this.answerArea.appendChild(c);this.bindDropdownEvents(c)}});a=lpTag.unifiedWindow.Survey.DropDownQuestion.prototype;a.bindDropdownEvents=function(a){this.bindViewEvent({view:a,DOMEvent:"change",callback:this.submitInputAnswer});this.bindFocusAndBlurEvents(a)}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){lpTag.unifiedWindow.Survey.TextAreaQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"TextAreaQuestion",className:"lp_question_wrapper",templateFileName:"<textarea id='{{id}}' class='lp_textarea_field' aria-labelledby='{{ariaLabel}}' type='{{type}}' aria-required='{{isMandatory}}'></textarea>",prefix:"txt_",tagName:"textarea",render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,type:this.getQuestionType(this.question.validationType),isMandatory:this.question.mandatory.toString()}});a.placeholder=this.translate("defaultTextArea");this.question.lastKnownValue&&(a.value=this.question.lastKnownValue);this.answerArea.appendChild(a);this.bindTextFieldEvents(a)}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){lpTag.unifiedWindow.Survey.TextFieldQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"TextFieldQuestion",className:"lp_question_wrapper",templateFileName:"<input id='{{id}}' class='lp_input-field' aria-labelledby='{{ariaLabel}}' type='{{type}}' placeholder='{{defaultTextArea}}' aria-required='{{isMandatory}}'>",prefix:"txt_",tagName:"input",render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,
type:this.getQuestionType(this.question.validationType),isMandatory:this.question.mandatory.toString()}});this.question.lastKnownValue&&(a.value=this.question.lastKnownValue);this.appContext.deviceDetector.isIOS()&&"number"===a.attributes.type.value&&a.setAttribute("pattern","[0-9]*");this.question.validationType&&"email"==this.question.validationType&&(a.placeholder=this.translate("emailTextArea"));this.answerArea.appendChild(a);this.bindTextFieldEvents(a)}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};var QUESTION_ERROR_TYPE="phoneNumber";!function(){var a=lpTag.unifiedWindow.settingsIDs;lpTag.unifiedWindow.Survey.PhoneFieldQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"PhoneFieldQuestion",className:"lp_question_wrapper",templateFileName:"<input id='{{id}}' class='lp_input-field lp_phone-field' aria-labelledby='{{ariaLabel}}' type='{{type}}' placeholder='{{defaultTextArea}}' aria-required='{{isMandatory}}'>",prefix:"txt_",tagName:"input",lpTelInput:null,render:function(){var b=this;this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var c=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,type:this.getQuestionType(this.question.validationType),isMandatory:this.question.mandatory.toString()}});this.question.lastKnownValue&&(c.value=this.question.lastKnownValue);this.answerArea.appendChild(c);this.bindTextFieldEvents(c);if(lpTag.lpTelInput){var d=this.appContext&&this.appContext.featureStateManager.getSettingsValue(a.CONTACT_INFO),e=d&&d.addressInfo&&d.addressInfo.countryCode,f={preferredCountries:["us","ca","gb","au"],autoPlaceholder:"aggressive",nationalMode:!0,formatOnDisplay:!0,dropdownContainer:this.surveyArea};e&&this.intlTelInputHasCountry(e)&&(f.initialCountry=e.toLowerCase());this.lpTelInput=lpTag.lpTelInput.lpTelInput(c,f);var g=function(){var a=b.lpTelInput.iti.countryList;if(a){var d=c.getBoundingClientRect(),e=b.surveyArea.getBoundingClientRect();a.style.width=d.width+"px";a.parentElement.style.left=d.left-e.left+"px";e.bottom-d.bottom>200?a.parentElement.style.top=d.top-e.top+d.height+"px":a.parentElement.style.top=d.top-e.top+"px"}};c.addEventListener("open:countrydropdown",g);c.addEventListener("countrychange",this.submitInputAnswer.bind(this));this.keydownHandler=function(a){(a.target===b.lpTelInput.iti.selectedFlag||a.target.parentElement===b.lpTelInput.iti.countryList)&&b.lpTelInput.iti._handleKeydownOnDropdown(a)};this.surveyArea.addEventListener("keydown",this.keydownHandler)}},submitInputAnswer:function(a){this.lpTelInput?this.submitAnswer(this.question.id,this.lpTelInput.iti.getNumber()):lpTag.unifiedWindow.BaseSurveyQuestion.prototype.submitInputAnswer.call(this.event)},isValid:function(){if(this.lpTelInput&&!this.lpTelInput.iti.isValidNumber()){this.question.error=QUESTION_ERROR_TYPE;return!1}delete this.question.error;return!0},dispose:function(){this.surveyArea.removeEventListener("keydown",this.keydownHandler);lpTag.unifiedWindow.BaseSurveyQuestion.prototype.dispose.call(this)},intlTelInputHasCountry:function(a){var b=window.lpIntlTelInputGlobals&&window.lpIntlTelInputGlobals.getCountryData()||[];if(b.length)for(var c=0;c<b.length;c++)if(b[c].iso2===a.toLowerCase())return!0;return!1}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){lpTag.unifiedWindow.Survey.RadioButtonQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"RadioButtonQuestion",className:"lp_question_wrapper",radioWrapperClass:"lp_radiobutton_wrapper",templateFileName:"<span class='lp_radio_button'><input id='{{inputId}}' role='radio' type='radio' value='{{value}}' aria-labelledby='label-{{inputId}}' name='{{name}}'><label for='{{inputId}}' id='label-{{inputId}}'>{{label}}</label></span>",wrapperTemplateFileName:"<div role='radiogroup' class='lp_question' aria-labelledby='{{id}}'><span id='{{id}}' class='lp_question_label'>{{label}}</span><div class='lp_lpview_content lp_content'></div></div>",prefix:"inp_",tagName:"input",render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a,b,c=document.createElement("div");c.className=this.radioWrapperClass;for(var d=0;d<this.question.entry.length;++d){a=this.question.entry[d];b=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{inputId:d+"_"+this.question.id,value:d,name:this.prefix+this.question.id,type:this.getQuestionType(this.question.validationType),label:a.displayValue||a.value,isMandatory:this.question.mandatory.toString(),ariaLabel:this.prefixMap.label+this.question.id}});(a.checked===!0||"true"==a.checked)&&b.setAttribute("checked","checked");c.appendChild(b);this.answerArea.appendChild(c);this.bindViewEvent({view:b,DOMEvent:"click",callback:this.submitInputAnswer})}}});var a=lpTag.unifiedWindow.Survey.RadioButtonQuestion.prototype;a.addToLabelOverride=function(a,b){this.oldTitle=this.container.getAttribute("title");if(b)this.container.setAttribute("title",a+". "+this.oldTitle);else for(var c=this.getElements("label"),d=this.getElements(this.tagName),e=0;e<d.length;e++)d[e].setAttribute("aria-label",a+". "+this.oldTitle+" "+c[e].textContent)};a.revertLabelOverride=function(a){if(a)this.container.setAttribute("title",this.oldTitle);else for(var b=this.getElements(this.tagName),c=0;c<b.length;c++)b[c].removeAttribute("aria-label");this.oldTitle=null}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){var a=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.Survey.CSATQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"CSATQuestion",className:"lp_question_wrapper",templateFileName:"<div id='{{id}}' class='lp_csat_rater lpc_survey-area__question-content {{deviceClass}}'><form><fieldset class='lp_csat_rater_stars' data-lp-point='stars-area' data-lp-cust-id='stars-area'><a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='5' aria-pressed='false' aria-label='{{labelStar5}} 5 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='4' aria-pressed='false' aria-label='{{labelStar4}} 4 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='3' aria-pressed='false' aria-label='{{labelStar3}} 3 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='2' aria-pressed='false' aria-label='{{labelStar2}} 2 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='1' aria-pressed='false' aria-label='{{labelStar1}} 1 {{of}} {{numberOfStars}}'></a></fieldset></form><div class='lp_csat_rater_current_rating lpc_survey-area__current-rating {{deviceClass}}' data-lp-point='current_rating'>{{rating}}</div><div id='disclaimer-id' class='lp_survey_disclaimer lpc_survey-area__disclaimer {{deviceClass}}'>{{csatDisclaimer}}</div></div>",prefix:"csat_",csatLevelPrefix:"csatLevel_",tagName:"div",defaultCSATLevel:0,numberOfStars:5,cssClasses:{defaultStarClass:"lp_csat_rater_star",chosenStarClass:"lp_csat_rater_star chosen"},previousChosenRating:void 0,LPViewMap:{star:"^star",current:"^current_rating",questionLabel:"^csat-question-label",starsArea:"^stars-area"},submitCSATAnswer:function(a){if(a.sourceElement.getAttribute("data-lp-rating")){this.submitAnswer(this.question.id,a.sourceElement.getAttribute("data-lp-rating"));this.toggleChosen(a.sourceElement);a.sourceElement.setAttribute("aria-pressed",!0)}},handleStarsNavigation:function(a){var b=document.getElementsByClassName("lp_question_label")[0],c=document.getElementsByClassName("lp_cancel_button")[0],d=document.getElementsByClassName("lp_csat_rater_current_rating")[0],e=d.innerHTML.trim(),f=document.querySelectorAll(".lp_csat_rater_stars a"),g=[].slice.call(f),h=g.indexOf(document.activeElement);if(9==a.keyCode&&h>-1){if(a.shiftKey){if(h===g.length-1){a.preventDefault();b.focus();return}a.preventDefault();f[h+1].focus();return}if(0===h){if(""!==e){a.preventDefault();d.setAttribute("tabindex","0");d.focus();return}a.preventDefault();c.focus();return}a.preventDefault();f[h-1].focus()}else;},setFocusToFirstStar:function(a){var b=document.querySelector(".lp_csat_rater_stars a:first-child");if(9==a.keyCode&&b){a.preventDefault();b.focus()}},toggleChosen:function(b){a.isDomNode(b)||(b=this.getElementsByClass(this.view,this.cssClasses.defaultStarClass,[])[this.numberOfStars-b]);var c=b.getAttribute("data-lp-rating");if(this.cachedPrevious){this.cachedPrevious.className=this.cssClasses.defaultStarClass;this.cachedPrevious.setAttribute("aria-pressed",!1)}b.className=this.cssClasses.chosenStarClass;this.getElements(this.LPViewMap.current,this.view)[0].innerHTML=this.translate(this.csatLevelPrefix+c);this.cachedPrevious=b},render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,defaultCSATLevel:this.defaultCSATLevel,rating:this.translate(this.csatLevelPrefix+this.defaultCSATLevel),csatDisclaimer:this.translate("csatDisclaimer"),label:this.translate("csatRatingQuestion"),of:this.translate("outOf"),numberOfStars:this.numberOfStars,labelStar1:this.translate("csatLevel_1"),labelStar2:this.translate("csatLevel_2"),labelStar3:this.translate("csatLevel_3"),labelStar4:this.translate("csatLevel_4"),labelStar5:this.translate("csatLevel_5")}});this.bindViewEvent({selector:this.LPViewMap.star,DOMEvent:"click",callback:this.submitCSATAnswer});this.bindViewEvent({selector:this.LPViewMap.questionLabel,callback:this.setFocusToFirstStar,DOMEvent:"keydown",context:this});this.bindViewEvent({selector:this.LPViewMap.starsArea,callback:this.handleStarsNavigation,DOMEvent:"keydown",context:this})}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow.Application=function(a,b){function c(a,b){if("object"==typeof a&&"object"==typeof b){Ca=a.uiState&&a.uiState.engConf.ssoKey;Da=a.uiState&&a.uiState.engConf.redirect_uri;Na=a.uiState&&a.uiState.engConf.async;Oa=a.uiState&&a.uiState.engConf.externalTargets&&!!a.uiState.engConf.externalTargets[lpTag.unifiedWindow.consts.externalTargets.SMS];Qa=a.unified&&a.unified.disableOfflineMessaging;G();j(a);H();i(b);t();d(a);u(a);if(Na&&!Oa)if(x(a)){N(!0);w(e,function(){v(e,y)})}else{N(!1);Ka&&Ka.conf&&Ka.conf.unifiedConf&&(Ka.conf.unifiedConf.isConvoSteppedUp=!1);if($a){e();L();v(f,y)}else v(e,y)}else e()}else Ua.error("init: Could not init - did not required configuration",Ra)}function d(a){var b=a.uiState.engConf.allowUnauthMsg,c=a.unified.isMessaging,d=lpTag.events.hasFired("LP_OFFERS","OFFER_CLICK")||[],e=d.length>lpTag.engagementClickEventsSeen;Ka.isNewConversation=e;lpTag.engagementClickEventsSeen=d.length;$a=!Qa&&b&&c&&e}function e(a){m();n();r();z(a);A()}function f(a){Ua.info("_onAuthenticationSuccess: "+JSON.stringify(a),Ra);Y&&a&&a.authenticationData&&Y.authenticate(a.authenticationData)}function g(){o();if(_){_.dispose();_=null}ia&&ia.clear();if(ba){ba.dispose();ba=null}if(X){X.dispose();X=null}if(Y){Y.dispose();Y=null}if(Z){Z.dispose();Z=null}if($){$.dispose();$=null}if(ca){ca.dispose();ca=null}if(da){da.dispose();da=null}if(ea){ea.dispose();ea=null}Ea&&Ea.dispose();if(Fa){Fa.disposeChatViews();Fa.dispose()}Ga&&Ga.dispose();if(V){V.dispose();V=null}if(ka){ka.dispose();ka=null}if(pa){pa.dispose();pa=null}if(qa){qa.dispose();qa=null}if(ha){ha.dispose();ha=null}if(ta){ta.dispose();ta=null}Q.dispose()}function h(){return Wa}function i(a){aa=a.sessionManager;Ka.appConfigurationManager=R=a.appConfigurationManager;Ka.pkceManager=S=a.pkceManager;S.setAppContext(Ka);Ka.browserStateManager=O=a.browserStateManager;Ka.deviceDetector=P=a.deviceDetector;Ka.wrapperWindow=Q=a.wrapperWindow;Ka.events=T=a.events}function j(a){var b=a.uiState&&a.uiState.engConf&&a.uiState.engConf.connector;if(a.unified&&a.unified.connectors&&a.unified.connectors.length&&b&&!M(b)){var c=window.lpTag.identities&&lpTag.identities.safeIdentities||[],d=a.unified.connectors,e=c.filter(function(a){var b=a.acr,c=parseInt(b,10);return 1!==b.length||0!==c});e.length&&d.forEach(function(a){e.forEach(function(b){a.configuration.issuer===b.iss&&(Pa=a)})});Pa&&(a.uiState.engConf.connector=Pa)}Ka.conf.windowConf=va=a.window;Ka.conf.accountSettings=wa=a.accountSettings;Ka.conf.unifiedConf=xa=a.unified;xa&&(xa.authToken=xa.authToken||(xa.unified&&xa.unified.connectorsSfConfig?"connectors":void 0));Ka.conf.unifiedConf.authToken=Ka.conf.unifiedConf.authToken||(a.unified.connectorsSfConfig?"connectors":void 0);Ka.conf.uiState=ya=a.uiState;Ka.conf.engConf=ya.engConf;Ka.conf.authConf=B(ya.engConf);Ka.conf.widgetSDK=a.unified?a.unified.widgetSDK:void 0;Ka.conf.widgetSDK&&Ka.conf.widgetSDK.length>0&&"object"==typeof Ka.conf.widgetSDK[0]&&(Na||!Na&&a.unified.widgetSDK[0].widgets&&a.unified.widgetSDK[0].widgets[0]&&a.unified.widgetSDK[0].widgets[0].chat)&&(Ka.conf.widgetSDK[0].widgets=k())}function k(){var b,c,d=[];a.unified.widgetSDK[0].widgets.forEach(function(a){b=a.chat&&!Na&&l(a.chat);c=a.messaging&&Na&&l(a.messaging);(b||c)&&d.push(a)});return d}function l(a){var b=Ta.getPropertyFromObject(Ka,"conf.engConf.allowUnauthMsg");return a.enable&&(Ka.conf.authConf&&a.authenticated||(!Ka.conf.authConf||b)&&a.unauthenticated)}function m(){Sa.UIModelPath();Sa.ChatModelPath();Ka.conf.widgetSDK&&Sa.WidgetModelPath()}function n(){if(T&&T.bind&&T.once){T.bind({appName:"ChatStateManager",eventName:"ended",func:p});T.bind({appName:"*",eventName:"getChatState",func:q});T.once({appName:"API",eventName:"initialized",func:L})}}function o(){if(T&&T.unbind){T.unbind({appName:"ChatStateManager",eventName:"ended",func:p});T.unbind({appName:"API",eventName:"initialized",func:L});T.unbind({appName:"*",eventName:"getChatState",func:q})}}function p(){Wa=!0}function q(a){var b=Aa.get("chat"),c=b&&b.state;a&&"function"==typeof a.gotChatStateCallback&&a.gotChatStateCallback({state:c,engConf:ya.engConf})}function r(){za=new window.liveperson.uiframework.latest.LPModel;Ka.conf.widgetSDK&&(Ba=new window.liveperson.uiframework.latest.LPModel);E(ya);Aa=new lpTag.uiframework.LPPersistentModel({accountId:xa.accountId,storageKey:xa.sessionId,secureStorageLocation:xa.secureStorageLocation,modelName:"UIState"},ya);La={uiModel:Aa,chatModel:za};Ka.conf.engConf&&Aa.bind(lpTag.unifiedWindow.uiModelPath.STATE,s)}function s(a){if(Ka.conf.engConf){var b=a&&a.newValue;switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.POST_CHAT:aa.dispose()}}}function t(){Ka.authenticationManager=na=new Sa.AuthenticationManager({appContext:Ka})}function u(a){Ka.stepUpManager=oa=new Sa.StepUpManager({appContext:Ka,configs:a})}function v(b,c){Ua.info("_authenticate for messaging",Ra);var d=a.uiState&&a.uiState.engConf&&a.uiState.engConf.connector,e=function(e){if(e)d&&d.configuration&&d.configuration.pkceEnabled?Ka.pkceManager.getPKCEFromSecureStorage(function(c){if(!c&&a.unified.external){c={};c.code_verifier=localStorage.getItem("cv");localStorage.removeItem("cv")}if(c&&c.code_verifier){Ua.debug("Successfully retrieved PKCE value from secure storage");e.code_verifier=c.code_verifier}Ka.pkceManager.removePKCEFromSecureStorage();Ta.runCallback(b,null,{authenticationData:e})},function(){Ua.error("_authenticate: PKCE not available in secure storage",Ra);Ta.runCallback(b,null,{authenticationData:e})}):Ta.runCallback(b,null,{authenticationData:e});else{Ua.error("There is no authentication data",Ra);Ta.runCallback(c)}};na.authenticate(e,c)}function w(a,b){var c=lpTag.unifiedWindow.consts.authConnectorTypes.STEP_UP,d=function(d){d?Ta.runCallback(a,null,{authenticationData:{ssoKey:d,type:c}}):Ta.runCallback(b)};oa.stepUpAuthentication(d,b)}function x(a){var b=a.engConf&&a.engConf.isPopOut,c=a.unified.external,d=a.unified.isStepUpEnabled,e=!b&&!c&&d&&oa.shouldStepUp(),f=e?"Stepping up conversation":"Not stepping up";Ua.info(f);return e}function y(){Ua.info("_onAuthenticationError",Ra);ya.engConf.allowUnauthMsg?T.trigger({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.ERROR,data:{errorType:lpTag.unifiedWindow.consts.errorTypes.FAILED_START_CONVERSATION_ERROR,keepError:!0}}):T.trigger({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.ERROR,data:{errorType:lpTag.unifiedWindow.consts.errorTypes.AUTH_ERROR,keepError:!0}})}function z(a){a=a||{};Ka.translator=la=new Sa.Translator(ya.engConf.lang);xa.external||(Ka.heartBeatManager=_=new Sa.HeartBeatManager({accountId:xa.accountId,storageKey:xa.sessionId,secureStorageLocation:xa.secureStorageLocation,poppedOut:xa.poppedOut},{browserStateManager:O,events:T}));Ka.coBrowseManager=ha=new Sa.CoBrowseManager({events:T,lpModel:za,appContext:Ka});Ka.idnvManager=ga=new Sa.IdnvManager({lppModel:Aa,appContext:Ka});Ka.uiStateManager=ia=new Sa.UIStateManager({lppModel:Aa,lpModel:za,events:T,browserStateManager:O,appContext:Ka,NativeSDK:Ka.conf.unifiedConf.NativeSDK});Ka.featureStateManager=ra=new Sa.FeatureStateManager(va,{appContext:Ka});Ka.timeStampManager=ta=new Sa.TimeStampManager({appContext:Ka,chatModel:za});Ka.hyperlinksHelper=sa=new Sa.helpers.HyperLinksHelper;Ka.accessibilityManager=ua=new Sa.accessibilityManager(Ka.conf);P.isDesktop()||(Ka.viewPortManager=W=new Sa.ViewPortManager(P));if(Na)if(Oa){V=new Sa.SMSDelegate(I(),T);Ka.conversationManager=fa=new Sa.SMSDeflectionManager(va,La,ya,{appContext:Ka,apiDelegate:V,events:T})}else{V=new Sa.MessagingDelegate(I(),T);oa.configure({apiDelegate:V,lppModel:Aa});Ka.lineStatesManager=Z=new Sa.LineStatesManager({lppModel:Aa,lpModel:za,apiDelegate:V,events:T,browserStateManager:O});Ka.conversationManager=Y=new Sa.ConversationManager(va,La,ya,{appContext:Ka,apiDelegate:V,events:T,authenticationData:a.authenticationData,stepUpManager:oa,canEnableOfflineFlow:$a});Ka.ttrManager=$=new Sa.TtrManager({lppModel:Aa,lpModel:za,events:T,features:Va,conversationManager:Y});Ka.fileSharingManager=pa=new Sa.FileSharingManager({apiManager:Y,appContext:Ka,utils:Ta,log:Ua,imageParsingHelper:new lpTag.unifiedWindow.helpers.ImageParsingHelper({appContext:Ka})});va.browserNotifications&&(Ka.browserNotificationsManager=qa=new Sa.BrowserNotificationsManager(va.browserNotifications,{events:T,chatModel:za,uiModel:Aa,appContext:Ka,browserStateManager:O,secureStorageLocation:xa.secureStorageLocation}))}else{V=new Sa.ChatDelegate(I(),T);Ka.chatStateManager=X=new Sa.ChatStateManager(va,La,ya,{appContext:Ka,apiDelegate:V,events:T});xa.external&&xa.NativeSDK&&(ka=Sa.webViewPlugin({events:T,log:Ua,IOS:xa.IOS}))}if(Ka.conf.widgetSDK){U=new lpTag.Events;Ka.WidgetManager=ja=new Sa.WidgetManager({events:T,lpModel:za,lppModel:Aa,wsdkModel:Ba,appContext:Ka,windowSDKEvents:U})}Ka.transcriptManager=ba=new Sa.TranscriptManager({events:T,lpModel:za,lppModel:Aa,apiDelegate:V,coBrowseManager:ha,idnvManager:ga,browserStateManager:O,lineStatesManager:Z,appContext:Ka,canEnableOfflineFlow:$a});Ka.SecureFormManager=ca=new Sa.SecureFormManager({events:T,lpModel:za,lppModel:Aa,browserStateManager:O,apiManager:Na?Y:X,appContext:Ka});Ka.richContentManager=da=new Sa.RichContentManager({lpModel:za,lppModel:Aa,apiManager:Na?Y:X,appContext:Ka});Na&&(Ka.quickRepliesManager=ea=new Sa.QuickRepliesManager({apiManager:Y,appContext:Ka}))}function A(){var a={agentImage:!0,logoImage:!0};Ka.themer=ma=new lpTag.unifiedWindow.Themer(F(va),xa,a);Sa.soundManager(La,P,xa,qa)}function B(a){var b=lpTag.unifiedWindow.consts.authConnectorTypes,c=a.connector&&a.connector.type,d=Ta.getURLParams(window.location.search),e=c===b.OAUTH_CODE||c===b.OAUTH_IMPLICIT||!a.async&&c===b.S2S;return e?{connector:a.connector,ssoKey:C(d),redirect_uri:D()}:a.authConnId?{connector:{id:a.authConnId},ssoKey:C(d),redirect_uri:D()}:null}function C(a){return Ca||a&&a.ssoKey||xa.authToken}function D(a){var b=xa.useOAuth2Standard||Ka.conf.engConf.connector&&Ka.conf.engConf.connector.configuration&&Ka.conf.engConf.connector.configuration.rfcCompliance;return Da||a&&a.redirect_uri||(!b||!xa.external)&&lpTag.unifiedWindow.consts.defaultRedirectUri||lpTag.lpUtils.getCurrentUrlWithoutParams()}function E(a){a.engConf&&a.engConf.ssoKey&&delete a.engConf.ssoKey}function F(a){return Ta.isEmpty(a.customStyle)?lpTag.unifiedWindow.defaultStyle:a.customStyle}function G(){Ka={conf:{},keys:{}}}function H(){Ka.keys.appKey=Ja=xa.debug?_a.chat.qa:_a.chat.production}function I(){var a={isStepUpEnabled:xa.isStepUpEnabled,connectorsSfConfig:xa.connectorsSfConfig,accountId:xa.accountId,availabilityPolicy:ya.engConf.availabilityPolicy,appKey:Ja,domain:xa.domain,asyncMessagingDomain:xa.asyncMessagingDomain,idpDomain:xa.idpDomain,messagingHistoryDomain:xa.messagingHistoryDomain,secureStorageLocation:xa.secureStorageLocation,sessionId:xa.sessionId,useSecureStorage:!ya.engConf.isPopOut,failureTolerance:19,reconnectTimeout:K(xa.chatReconnectTimeout),ssoKey:C(Ka.conf.authConf),redirect_uri:D(Ka.conf.authConf),survey:ya.engConf.survey,customVariables:ya.engConf.customVariables,svid:ya.engConf.svid,ssid:ya.engConf.ssid,scid:ya.engConf.scid,eid:ya.engConf.eid,ename:ya.engConf.ename,cid:ya.engConf.cid,connectorId:J(ya.engConf),lang:ya.engConf.lang,runWithRules:ya.engConf.runWithRules,visitorId:ya.engConf.visitorId,interactionTimeout:aa.getSessionTimeout(),skill:ya.engConf.skill,skillId:ya.engConf.skillId,agent:ya.engConf.agent,maxWaitTime:ya.engConf.maxWaitTime,visitorProfile:ya.engConf.visitorProfile,surveyName:ya.engConf.surveyName,visitorIp:ya.engConf.visitorIp,serviceQueue:ya.engConf.serviceQueue,queuePriority:ya.engConf.queuePriority,subscription:ya.engConf.subscription,preSurveyId:va.surveyPreChatId,preChatLines:ya.engConf.preChatLines,surveyOfflineId:ya.engConf.isOffline&&ya.engConf.surveyOfflineId||va.surveyOfflineId,exitSurveyId:va.surveyPostChatId,smsPreFormId:va.smsPreFormId,offsiteEngContext:ya.engConf.isOffline&&ya.engConf.offsiteEngContext,isExternalWindow:ya.engConf.isPopOut||xa.external,isFetchEnabled:xa.isFetchEnabled};xa.chatPollInterval&&Number(xa.chatPollInterval)>=1e3&&(a.chatPollInterval=xa.chatPollInterval);xa.chatExitSurveyInterval&&Number(xa.chatExitSurveyInterval)>=1e3&&(a.chatExitSurveyInterval=xa.chatExitSurveyInterval);"undefined"!=typeof xa.throttlingSupportEnabled&&(a.throttlingSupportEnabled=xa.throttlingSupportEnabled);xa.throttlingTimeoutValue&&(a.throttlingTimeoutValue=xa.throttlingTimeoutValue);xa.amsClientConfig&&"object"==typeof xa.amsClientConfig&&(a.amsClientConfig=xa.amsClientConfig);Ka.featureStateManager&&Ka.featureStateManager.isUMSConnectionTimeoutEnabled()?xa.connectionTimeoutValue&&!isNaN(Number(xa.connectionTimeoutValue))&&(a.connectionTimeoutValue=Number(xa.connectionTimeoutValue)):a.connectionTimeoutValue=-1;return a}function J(b){var c=b.stepUpConnector||b.connector;return a.unified&&a.unified.connectors&&a.unified.connectors.length&&Pa?Pa.id:a.unified&&a.unified.external&&lpTag.features.getFeature("Common.Multiple_Consumer_IDP")?c.id:b&&b.allowUnauthMsg&&c.id}function K(a){var b=P.getDeviceFamilyName().toLowerCase();return a&&"number"==typeof a[b]?1e3*a[b]:null}function L(){if(!Za){Ma&&clearTimeout(Ma);if(Ka){Ea=new lpTag.unifiedWindow.WrapperWindowExtender({models:La,appContext:Ka,wrapWithDiv:!1});Ia=new lpTag.unifiedWindow.SliderViewController({models:La,appContext:Ka,target:Ka.wrapperWindow.getMaximizedElement(),textInjection:Ka.conf.unifiedConf});Fa=new lpTag.unifiedWindow.MaximizedViewController({models:La,appContext:Ka,textInjection:Ka.conf.unifiedConf,target:document.querySelector('[data-lp-point="maximized"] [data-lp-point="main"]'),slider:Ia});Ga=new lpTag.unifiedWindow.MinimizedViewController({models:La,appContext:Ka,textInjection:Ka.conf.unifiedConf,view:document.querySelector('[data-lp-point="minimized"] [data-lp-point="main"]')});Ka.conf.widgetSDK&&(Ha=new lpTag.unifiedWindow.WidgetManagerViewController({appContext:Ka,sliderAPI:Ia,windowSDKEvents:U,wsdkModel:Ba}));Za=!0}else if(Xa>=Ya){Ua.info("_createViewControllers: retrying numberOfRetries="+Ya,Ra);Ya++;Ma=setTimeout(L,0)}else Ua.error("_createViewControllers: number of retries exceeded.",Ra)}}function M(a){var b=a&&a.configuration,c="lpTag.taglets.unAuthMessaging.lpUnauthFunction",d="lpTag.taglets.unAuthMessaging";return b?b.jsContext===d&&b.jsMethodName===c:!0}function N(a){lpTag.taglets.lpUnifiedWindow.stepUpChecked={isStepUp:a};lpTag.events.trigger({eventName:"STEPUP_CHECKED",appName:"*",data:{isStepUp:a}})}var O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra="Application",Sa=lpTag.unifiedWindow,Ta=lpTag.taglets.lpUtil,Ua=Sa.log,Va=lpTag&&lpTag.features,Wa=!1,Xa=10,Ya=0,Za=!1,$a=!1,_a={chat:{dev:"e54d98e4810e4c93a8a7738bb3e9a321",qa:"50aae09500274faa9aea8ccf6c78ce28",production:"721c180b09eb463d9f3191c41762bb68"},collaboration:{dev:"a213e4a5450848cbbf12f63747d38376",qa:"c533acb2dd7e439995325014f84b3484",production:"42c22b57e5144838a72d891fbbf160ea"}};c(a,b);return{methods:{isDisposed:h,end:g}}};lpTag.unifiedWindow.Application.v="10.32.2.0-release_5650";