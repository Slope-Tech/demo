(function(m){var f=window.AmazonUIPageJS||window.P,r=f._namespace||f.attributeErrors,a=r?r("AmazonDayCheckoutAssets",""):f;a.guardFatal?a.guardFatal(m)(a,window):a.execute(function(){m(a,window)})})(function(m,f,r){m.when("A").register("amazonday-cache",function(a){return function(a){var e={};e.duration=a||15E4;return{put:function(a,b){a&&(delete e[a],e[a]={value:b,timestamp:Date.now()})},get:function(a){var b;a&&e[a]?Date.now()-e[a].timestamp>e.duration?(delete e[a],b=!1):b=!0:b=!1;a=b?e[a].value:
void 0;return a},remove:function(a){delete e[a]}}}});"use strict";m.when("A","page-detector","page-detector-current-page","page-conductor","amazonday-cache","amazonDayLogger","amazonDayLoggerConfig","amazonday-feature").register("amazonday-service",function(a,h,e,u,b,n,g,x){function c(a){var c={MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,SUNDAY:7};a=a.slice(0);return a=a.sort(function(a,oa){return c[a]-c[oa]})}var E=a.$,l=b();return{selectDay:function(a,b,B,f,m,O,P,qa,ha,aa,y){var J,
U,ra,sa,ia,F,V,ja,q;"object"===typeof a&&(q=a,a=q.day,b=q.addressId,B=q.lineItemId,ha=q.orderLineItemIds,aa=q.originalLineItemId,y=q.originalLineItemIds,qa=q.shippingOfferingId,P=q.queryParameters,f=q.isTrial,O=q.cacheable,m=q.returnType,J=q.isShipOptionDefaulted,U=q.shouldSavePreference,ra=q.savePreferenceCheckboxEnabled,sa=q.isAmazonDayChewbaccaDayPickerSetterCXEnabled,ia=q.purchaseId,F=q.eligibleDeliveryGroupId,V=q.eligibleDeliveryOptionId,ja=q.isDeliveryOptionSelected,q=q.originalLineItemIdsWithSameAddressId);
U===r&&(U=1);a=Array.isArray(a)?c(a).toString():a;O===r&&(O=f);P=P||"";var W,ba=h.isTablet()||E(".checkout-sosp-tablet").length,Q=g.AMAZONDAY.DEVICE_TYPES,C=h.isMobile()?Q.MOBILE:ba?Q.TABLET:Q.DESKTOP,z=g.AMAZONDAY.COUNTER_METRICS;sa&&ia&&q&&V&&F?(n.logMetric(z.AD_PROFILE_SETTER_CALL.concat("-",C),1),W="/checkout/p/p-"+ia+"/eligibleshipoption/amazon-day-profile",m={daysSelected:a,lineItemIds:q,eligibleGroupDeliveryOptionId:V,eligibleDeliveryGroupId:F,isShipOptionDefaulted:!!J,amazonDayShipOptionSelected:!!ja,
shouldSavePreference:!!U}):(n.logMetric(z.SETTER_FALLBACK.concat("-",C),1),null==aa&&null==B&&n.logMetric(z.ORIGINAL_LINE_ITEM_ID_NULL_FROM_WEBAPP.concat("-",C),1),W="/gp/buy/amazonday/spc/handlers/update-amazonday-options.html"+P,m={daysSelected:a,addressId:b,lineItemId:B,isTrial:f?1:0,returnJson:"json"===m?1:0,returnFullHTML:"html"===m?1:0,shippingOfferingId:qa,orderLineItemIds:ha,originalLineItemId:aa,originalLineItemIds:y,isShipOptionDefaulted:J?1:0,shouldSavePreference:U?1:0,savePreferenceCheckboxEnabled:x.isFeatureEnabled("SavePreferenceCheckbox")||
ra?1:0});P=u.setAjaxTransitionHeader({"x-amz-checkout-page":e.getCurrentPage(),"x-amz-checkout-transition":"ajax","x-amz-checkout-page-type":h.isSpc()?"CheckoutConfirmOrder":h.isSosp()?"CheckoutShipOption":r});var ca=b+"_"+a+"_"+(B!==r?B:aa);if(O&&(a=l.get(ca))&&"function"===typeof a.always)return a;var da=g.AMAZONDAY.LATENCY_METRICS;a=g.AMAZONDAY.LATENCY_SCOPES;var d=f?a.SET_TRIAL_PREFERENCE_AJAX:a.SET_SAVE_PREFERENCE_AJAX;n.logLatencyMetric(d,da.BODY_BEGIN,C);a=E.ajax({type:"POST",url:W,data:m,
dataType:"text",headers:P,contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8;"});O&&l.put(ca,a);a.always(function(){n.logLatencyMetric(d,da.BODY_END,C);n.logLatencyMetric(d,da.LOAD_FINISH,C)}).fail(function(){W.startsWith("/gp/buy/amazonday/spc/handlers/")?n.logMetric(z.SET_SAVE_PREFERENCE_AJAX_FAILURE_GURUPA_FLOW.concat("-",C),1):n.logMetric(z.SET_SAVE_PREFERENCE_AJAX_FAILURE.concat("-",C),1);l.remove(ca)});return a},fetchDefaultingInfoHTML:function(){var a=l.get("fetchDefaultingInfoHTML");
if(a&&"function"===typeof a.always)return a;a=E.get("/gp/buy/amazonday/shared/display/defaulting-info-bottom-sheet.html");l.put("fetchDefaultingInfoHTML",a);a.fail(function(){l.remove("fetchDefaultingInfoHTML")});return a}}});"use strict";m.when("A","page-detector","button-blocker","amazonday-feature").execute(function(a,h,e,u){function b(){if((h.isMobile()||h.isTablet()||g(".checkout-sosp-tablet").length?g("div.one-shipment:visible"):g("div.order-display")).find("div.amazonday-continue-button-blocker-indicator").length){var a=
g(".amazonday-continue-button-blocker-text").html();e.show(self,a,a);n||g(".continue-button-blocker").css("display","inline-block")}else e.hide(self)}var n=f.P&&f.P.AUI_BUILD_DATE,g=a.$;h.isTablet()||g(".checkout-sosp-tablet").length?e={hide:function(a){a=g("#bottom-continue-pane").find(".a-button");a.removeClass("a-button-disabled");a.find("input").prop("disabled",!1);g(".amazonday-blocker-text").remove()},show:function(a,c,b){a=g("#bottom-continue-pane").find(".a-button");a.addClass("a-button-disabled");
a.find("input").prop("disabled",!0);g("\x3cp class\x3d'amazonday-blocker-text a-row a-text-beside-button'\x3e"+b+"\x3c/p\x3e").insertAfter(a)}}:h.isMobile()&&(e={hide:function(a){g("div.one-shipment:visible").find(".sosp-continue-button").removeClass("aok-hidden");g(".sosp-continue-button-fake").remove();g(".amazonday-blocker-text").remove()},show:function(a,b,e){g("div.one-shipment:visible").find(".sosp-continue-button").each(function(a,b){a=g(b);b=a.clone(!1).addClass("sosp-continue-button-fake a-button-disabled").removeClass("sosp-continue-button continue-button").insertAfter(a);
a.addClass("aok-hidden");g("\x3cp class\x3d'amazonday-blocker-text a-row a-text-beside-button'\x3e"+e+"\x3c/p\x3e").insertAfter(b)})}});b();g(f).one("popstate",b);a.on("active-shipment-changed",function(){b();g(f).one("popstate",b)});a.on("checkout:reload:spc",b);a.on("checkout:reload:shipoptionselect",b)});"use strict";m.when("A","page-spinner-controller","page-conductor","datePickerCalendarInstanceManager","a-carousel-framework","amazonday-date-picker-service").register("amazonday-date-picker-controller",
function(a,h,e,u,b,n){function g(a){a=a.id;var b=a.replace("date-picker-calendar-",""),c=l("#amazonday-date-picker-calendar-container-"+b);0===c.find("#"+a).length&&u.showCalendarInline(b,c)}function x(b){var c=b.calendarId.endsWith("-inline-block")?b.calendarId:b.calendarId+"-inline-block",c=c.replace(/^date-picker-calendar-/,"");(c=a.state(c+"-amazonday-persistence-info"))&&0!==b.selectedDays.length&&(c.data.postData.deliveryPersistenceInformation={amazonDayPersistenceInfo:{id:b.selectedDays[0],
preferences:b.preferences||[]}},h.show(),n.saveAmazonDayPreferenceUsingDatePickerCalendar(c).done(function(a,b,c){e.ajaxUpdatePage(a,b,c,{pushNewFrame:"false"})}).always(function(){h.hide()}))}function c(b){var c=b.getAttr("name");f(b);a.on("a:carousel:"+c+":change:pageNumber",function(a){f(a.carousel)})}function f(a){var b=a.getAttr("pageNumber"),c=a.getAttr("totalPages"),g=a.dom.$container.find(".a-carousel-goto-prevpage");a=a.dom.$container.find(".a-carousel-goto-nextpage");g.toggleClass("aok-hidden",
1===b);a.toggleClass("aok-hidden",b===c)}var l=a.$;a.on("amazonday:datepickercalendar:confirmslotevent",function(a){x(a)});a.on("amazonday:datepickercalendar:clickslotevent",function(b){var c=(b.calendarId.endsWith("-inline-block")?b.calendarId:b.calendarId+"-inline-block")+"-amazonday-persistence-info";(c=a.state(c))&&0!==b.selectedDays.length&&(c=c.data.promiseLabels[b.selectedDays[0]],l(".amazonday-datepicker-selected-date-info").removeClass("aok-hidden"),l(".amazonday-datepicker-selected-date-promise").html(c),
b.selectedDays.length?l(".amazonday-daypicker-save-and-continue").removeClass("a-button-disabled"):l(".amazonday-daypicker-save-and-continue").addClass("a-button-disabled"))});return{showAmazonDayInlineDatePickers:function(){var a=l("div[id^\x3ddate-picker-calendar-amazon-day-date-picker-]");a.size()&&a.each(function(a,e){e.id.endsWith("-inline-block")&&(b.onInit(e.id,c),g(e))})},showAmazonDayInlineDatePicker:g,getADDatePickerCalendarCurrentSelection:function(a){a=a.replace(/^date-picker-calendar-/,
"");return u.getSelectedDayIds(a).sort()},handleDatePickerConfirmSlotEvent:x,getDatePickerPreferences:function(a,b){if(!a&&!b)return["OPT_OUT_AMAZON_DAY_PREFERENCES"];var c=[];a&&c.push("DEFAULT_TO_AMAZON_DAY");b&&c.push("OFFER_PREFERRED_DAY_PROMISE");return c}}});m.when("amazonday-date-picker-controller","ready").execute(function(a){a.showAmazonDayInlineDatePickers()});"use strict";m.when("A","page-detector","page-detector-current-page","page-conductor","amazonDayLogger","amazonDayLoggerConfig").register("amazonday-date-picker-service",
function(a,h,e,u,b,n){var g=a.$;return{saveAmazonDayPreferenceUsingDatePickerCalendar:function(a){var c=h.isTablet()||g(".checkout-sosp-tablet").length,f=n.AMAZONDAY.DEVICE_TYPES,l=h.isMobile()?f.MOBILE:c?f.TABLET:f.DESKTOP,m=n.AMAZONDAY.COUNTER_METRICS,c=a.data.setActionUrl;a=a.data.postData;f=u.setAjaxTransitionHeader({"x-amz-checkout-page":e.getCurrentPage(),"x-amz-checkout-transition":"ajax","x-amz-checkout-page-type":h.isSpc()?"CheckoutConfirmOrder":h.isSosp()?"CheckoutShipOption":r});b.logMetric(m.AD_DATE_PICKER_PROFILE_SETTER_CALL.concat("-",
l),1);var pa=n.AMAZONDAY.LATENCY_METRICS,B=n.AMAZONDAY.LATENCY_SCOPES.SET_AMAZONDAY_PREFERENCE_DATE_PICKER;b.logLatencyMetric(B,pa.BODY_BEGIN,l);a=g.ajax({type:"POST",url:c,data:a,dataType:"text",headers:f,contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8;"});a.always(function(){b.logLatencyMetric(B,pa.BODY_END,l);b.logLatencyMetric(B,pa.LOAD_FINISH,l)}).fail(function(){b.logMetric(m.AD_DATE_PICKER_PROFILE_SETTER_CALL_FAILURE.concat("-",l),1)});return a}}});"use strict";m.when("A",
"page-spinner-controller","page-conductor","amazonday-service","page-detector","amazonDayLogger","amazonDayLoggerConfig").register("amazonday-day-inline-day-picker-controller",function(a,h,e,u,b,n,g){var f=a.$,c=b.isTablet()||f(".checkout-sosp-tablet").length,m=g.AMAZONDAY.LATENCY_METRICS,l=g.AMAZONDAY.LATENCY_SCOPES;g=g.AMAZONDAY.DEVICE_TYPES;var r=b.isMobile()?g.MOBILE:c?g.TABLET:g.DESKTOP;a.declarative("amazonday-inline-day-picker-day-button","click",function(a){n.logLatencyMetric(l.SET_SAVE_PREFERENCE,
m.BODY_BEGIN,r);h.show();u.selectDay(a.data.selection,a.data.addressId,a.data.lineItemId,!1,"html",!1,"?inlineDayPicker\x3d1").done(function(a,b,c){h.hide();e.ajaxUpdatePage(a,b,c,{pushNewFrame:"false"})}).fail(function(a,b,c){h.hide();e.ajaxRedirect(a,b,c)}).always(function(){n.logLatencyMetric(l.SET_SAVE_PREFERENCE,m.BODY_END,r);n.logLatencyMetric(l.SET_SAVE_PREFERENCE,m.LOAD_FINISH,r)})});a.declarative("amazonday-daypicker-mobile-inline-button-changeover","click",function(){f("#ab-closed-days-disclaimer-mobile-inline").toggle()})});
"use strict";m.when("A","page-spinner-controller","loading-spinner-controller","page-conductor","page-transition-controller","page-detector","a-popover-base","amazonday-service","amazonDayLogger","amazonDayLoggerConfig","amazonday-feature","amazonday-string","amazonday-day-picker-loader").register("amazonday-modal-day-picker-controller",function(a,h,e,u,b,n,g,x,c,E,l,oa,pa){function B(a){c.logLatencyMetric(t.POPOVER_LOAD,p.BODY_END,k);l.isFeatureEnabled("NonADCustomer")?c.logMetric(D.NON_AD_CUSTOMER.concat("-",
k),1):c.logMetric(D.AD_CUSTOMER.concat("-",k),1);d(a.popover.$trigger[0]).parents(".a-accordion-row").find("input").prop("disabled",!0);v=a.popover;a=v.$trigger.data("a-modal").data;K=a.lineItemId;R=a.addressId;fa=a.shippingOfferingId;L=a.orderLineItemIds;M=a.originalLineItemId;N=a.originalLineItemIds;G=w=Ea(a);X=a.savePreferenceCheckboxEnabled!==r&&1===a.savePreferenceCheckboxEnabled;ta=a.shouldSavePreference!==r&&1===a.shouldSavePreference;S=a.isAmazonDayChewbaccaDayPickerSetterCXEnabled!==r&&!0===
a.isAmazonDayChewbaccaDayPickerSetterCXEnabled;ua=a.purchaseId;va=a.eligibleDeliveryGroupId;wa=a.eligibleDeliveryOptionId;xa=a.isDeliveryOptionSelected;T=(l.isFeatureEnabled("SavePreferenceEnabled")||ta)&&0!==G.length;Y=1===a.isShipOptionDefaulted;ka=T;ya=a.originalLineItemIdsWithSameAddressId;za=a.isDefaultingEnabled;d(".amazonday-modal-day-picker-checkbox").find("input").prop("checked",Y);(l.isFeatureEnabled("SavePreferenceCheckbox")||X)&&d(".amazonday-modal-day-picker-save-preference-checkbox").find("input").prop("checked",
ka);S?(l.isFeatureEnabled("TwoAmazonDays")&&c.logMetric(D.SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW.concat("-",k),1),J(G)):l.isFeatureEnabled("TwoAmazonDays")?(c.logMetric(D.SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW.concat("-",k),1),A=O(G),y(a),ha(G)):(y(a),d('[data-action\x3d"amazonday-modal-daypicker-day-button"]').each(function(a,ea){a=JSON.parse(d(ea).attr("data-amazonday-modal-daypicker-day-button"));x.selectDay({day:a.day.literal,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,
originalLineItemIds:N,isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefCache")})}));c.logLatencyMetric(t.POPOVER_LOAD,p.LOAD_FINISH,k)}function Da(){k==ga.DESKTOP&&d(".day-picker-trigger").each(function(a){d(this).keypress(function(a){13==a.keyCode&&a.currentTarget.click()})})}function Ea(a){return F(a)?a.selection.reduce(function(a,ea){2>a.length&&a.push(ea.selection);return a},[]):[]}function O(a){var b=[],c;for(c=0;2>c;c++)b.push(I);return a&&a.length?b=b.map(function(b,c){return c<a.length?
a[c]:b}):b}function P(a){var b=[];a.find(".amazonday-modal-day-picker-days").each(function(a,ea){d(ea).hasClass("a-button-selected")&&b.push(d(ea).find("button").data("day"))});return b}function qa(a,b){if(!a||!a.length||!b)return a;var c;if(-1===a.indexOf(b))for(c=0;c<a.length;c++){if(a[c]===I)return a[c]=b,a}else for(c=0;c<a.length;c++)if(a[c]===b)return a[c]=I,a}function ha(a){var b=[];if(a&&a.length)if(1===a.length)d('[data-action\x3d"amazonday-modal-daypicker-day-button-multi-selection"]').each(function(c,
Fa){c=JSON.parse(d(Fa).attr("data-amazonday-modal-daypicker-day-button-multi-selection"));a[0]!==c.day.literal&&b.push([a[0],c.day.literal])});else if(2===a.length)b=a;else return;else d('[data-action\x3d"amazonday-modal-daypicker-day-button-multi-selection"]').each(function(a,c){a=JSON.parse(d(c).attr("data-amazonday-modal-daypicker-day-button-multi-selection"));b.push(a.day.literal)});b.forEach(function(a){x.selectDay({day:a,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,
isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefCache")})})}function aa(a,b){if(a&&b&&a.length===b.length){var c=a.filter(function(a){return-1!==b.indexOf(a)}).filter(function(a,b,c){return c.indexOf(a)===b});return a.length===c.length&&b.length===c.length}return!1}function y(a){"string"===typeof a&&(a=JSON.parse(a.trim()));if(l.isFeatureEnabled("TwoAmazonDays")){U(a);sa(a);var b=a;F(b)&&b.promise?d(".amazonday-daypicker-promise-value").html(b.promise):d(".amazonday-daypicker-promise-value").html("")}else q(a),
b=a,F(b)&&b.promise?(d(".amazonday-daypicker-promise").show(),d(".amazonday-daypicker-promise-value").html(b.promise)):(d(".amazonday-daypicker-promise").hide(),d(".amazonday-daypicker-promise-value").html(""));W();b=a;F(b)?ja(b.selection.length)?d(".amazonday-daypicker-save-and-continue").addClass("a-button-disabled"):d(".amazonday-daypicker-save-and-continue").removeClass("a-button-disabled"):d(".amazonday-daypicker-save-and-continue").addClass("a-button-disabled");a&&a.adjustmentMessage?(d(".amazonday-daypicker-adjustment-message").show(),
d(".amazonday-daypicker-adjustment-message-value").html(a.adjustmentMessage)):(d(".amazonday-daypicker-adjustment-message").hide(),d(".amazonday-daypicker-adjustment-message-value").html(""))}function J(a){l.isFeatureEnabled("TwoAmazonDays")?ra(a):V(a)?(d(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked","false"),d(".amazonday-daypicker-selected-day").show(),d(".amazonday-modal-day-picker-days."+a).addClass("a-button-selected").attr("aria-checked","true")):(d(".amazonday-daypicker-selected-day").hide(),
d(".amazonday-daypicker-selected-day-value").html(""),d(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked","false"));if(V(a)){var b=Array.isArray(a);!l.isFeatureEnabled("TwoAmazonDays")&&b&&2<=a.length?d(".amazonday-daypicker-save-and-continue").addClass("a-button-disabled"):d(".amazonday-daypicker-save-and-continue").removeClass("a-button-disabled")}else d(".amazonday-daypicker-save-and-continue").addClass("a-button-disabled");W()}function U(a){d(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked",
"false");d(".amazonday-modal-day-picker-days").each(function(a,b){d(b).find("button").data("selectable")&&d(b).removeClass("a-button-disabled").attr("aria-checked","false")});F(a)&&(a.selection.forEach(function(a){d(".amazonday-modal-day-picker-days."+a.selection).addClass("a-button-selected").attr("aria-checked","true")}),d(".amazonday-modal-day-picker-days").each(function(b,c){d(c).hasClass("a-button-selected")||2<=a.selection.length&&d(c).addClass("a-button-disabled")}))}function ra(a){d(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked",
"false");d(".amazonday-modal-day-picker-days").each(function(a,b){d(b).find("button").data("selectable")&&d(b).removeClass("a-button-disabled").attr("aria-checked","false")});V(a)&&(a.forEach(function(a){d(".amazonday-modal-day-picker-days."+a).addClass("a-button-selected").attr("aria-checked","true")}),d(".amazonday-modal-day-picker-days").each(function(b,c){d(c).hasClass("a-button-selected")||2<=a.length&&d(c).addClass("a-button-disabled")}))}function sa(a){Array.isArray(A)&&2===A.length&&A[0]===
I&&(A[0]=A[1],A[1]=I);var b=ia(A,a);d(".amazonday-daypicker-remove-link").get().forEach(function(a,c){b[c%2]===I?d(a).addClass("aok-hidden"):d(a).removeClass("aok-hidden")});d(".amazonday-daypicker-selected-days-value-0").html(b[0]);d(".amazonday-daypicker-selected-days-value-1").html(b[1])}function ia(a,b){if(!a||!a.length||!F(b))return[I,I];var c=b.selection,d=[],e=c.reduce(function(a,b){a.push(b.selection);return a},[]);if(a.filter(function(a){return-1!==e.indexOf(a)}).length!==c.length)for(b=
0;b<a.length;b++)d[b]=b<c.length?c[b].plural:I;else for(b=0;b<a.length;b++)d[b]=-1!==e.indexOf(a[b])?c[e.indexOf(a[b])].plural:I;return d}function F(a){return a&&a.selection&&a.selection.length}function V(a){var b=Array.isArray(a)?a.length:!0;return a&&b}function ja(a){return!l.isFeatureEnabled("TwoAmazonDays")&&2<=a}function q(a){if(F(a)){d(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked","false");d(".amazonday-daypicker-selected-day").show();var b=d.map(a.selection,
function(a){return a.caption}).join(oa.getString("ad-day-picker-multiple-preference-comma"));d(".amazonday-daypicker-selected-day-value").html(b);a.selection.forEach(function(a){d(".amazonday-modal-day-picker-days."+a.selection).addClass("a-button-selected").attr("aria-checked","true")})}else d(".amazonday-daypicker-selected-day").hide(),d(".amazonday-daypicker-selected-day-value").html(""),d(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked","false")}function W(){za?
d(".amazonday-modal-day-picker-checkbox").show():d(".amazonday-modal-day-picker-checkbox").hide()}function ba(){return S!==r&&S?!0:!1}function Q(){if(k==ga.MOBILE){var a=d(".amazonday-daypicker-save-and-continue")[0];C(a)||(a=a.getBoundingClientRect().top+10,d("#amazonday-daypicker-scroller").scrollTop(a))}}function C(a){if(a)return a=a.getBoundingClientRect(),0<=a.top&&0<=a.left&&a.bottom<=(f.innerHeight||document.documentElement.clientHeight)&&a.right<=(f.innerWidth||document.documentElement.clientWidth)}
function z(a){return"ref_\x3dchk_"+((n.isSpc()?"spc":n.isSosp()?"sosp":"unknown")+"_")+a}function ca(){v&&da&&la&&v.$container.remove()}var da=f.P&&f.P.AUI_BUILD_DATE,d=a.$,G,w,R,K,fa,L,M,N,Y,ka,A,X,ta,S,za,ua,va,wa,xa,ya,v,H,Aa,Z,ma,T,la;b=n.isTablet()||d(".checkout-sosp-tablet").length;var p=E.AMAZONDAY.LATENCY_METRICS,t=E.AMAZONDAY.LATENCY_SCOPES,ga=E.AMAZONDAY.DEVICE_TYPES,k=n.isMobile()?ga.MOBILE:b?ga.TABLET:ga.DESKTOP,Ba=E.AMAZONDAY.AMAZONDAY_SHIP_OPTION_DEFAULTING_METRICS.SET_AMAZONDAY_DEFAULT_SHIP_OPTION,
Ca=E.AMAZONDAY.AMAZONDAY_SHIP_OPTION_DEFAULTING_METRICS.UNSET_AMAZONDAY_DEFAULT_SHIP_OPTION,na=E.AMAZONDAY.AMAZONDAY_SHIP_OPTION_DEFAULTING_METRICS.AMAZONDAY_SHIP_OPTION_DEFAULTING_DETAIL_LINK_ON_DAY_PICKER,D=E.AMAZONDAY.COUNTER_METRICS,I=oa.getString("ad-day-picker-multiple-preference-unset-value","---");Da();a.on("checkout:reload:spc",Da);m.when("a-sheet").execute(function(b){function e(a){c.logLatencyMetric(t.BOTTOM_SHEET_LOAD,p.BODY_END,k);l.isFeatureEnabled("NonADCustomer")?c.logMetric(D.NON_AD_CUSTOMER.concat("-",
k),1):c.logMetric(D.AD_CUSTOMER.concat("-",k),1);if(la=a.data.data.renderModalInAjax)H=a.sheet;Z=a.$target.parents(".selectable-box").find('input[type\x3d"radio"]');Z.prop("disabled",!0);K=a.data.data.lineItemId;R=a.data.data.addressId;fa=a.data.data.shippingOfferingId;L=a.data.data.orderLineItemIds;M=a.data.data.originalLineItemId;N=a.data.data.originalLineItemIds;G=w=Ea(a.data.data);X=a.data.data.savePreferenceCheckboxEnabled!==r&&1===a.data.data.savePreferenceCheckboxEnabled;ta=a.data.data.shouldSavePreference!==
r&&1===a.data.data.shouldSavePreference;S=a.data.data.isAmazonDayChewbaccaDayPickerSetterCXEnabled!==r&&!0===a.data.data.isAmazonDayChewbaccaDayPickerSetterCXEnabled;ua=a.data.data.purchaseId;va=a.data.data.eligibleDeliveryGroupId;wa=a.data.data.eligibleDeliveryOptionId;xa=a.data.data.isDeliveryOptionSelected;ya=a.data.data.originalLineItemIdsWithSameAddressId;T=(l.isFeatureEnabled("SavePreferenceEnabled")||ta)&&0!==G.length;Y=1===a.data.data.isShipOptionDefaulted;ka=T;za=a.data.data.isDefaultingEnabled;
d(".amazonday-modal-day-picker-checkbox").find("input").prop("checked",Y);(l.isFeatureEnabled("SavePreferenceCheckbox")||X)&&d(".amazonday-modal-day-picker-save-preference-checkbox").find("input").prop("checked",ka);S?(l.isFeatureEnabled("TwoAmazonDays")&&c.logMetric(D.SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW.concat("-",k),1),J(w)):l.isFeatureEnabled("TwoAmazonDays")?(c.logMetric(D.SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW.concat("-",k),1),A=O(G),y(a.data.data),ha(G)):(y(a.data.data),d('[data-action\x3d"amazonday-modal-daypicker-day-button"]').each(function(a,
b){a=JSON.parse(d(b).attr("data-amazonday-modal-daypicker-day-button"));x.selectDay({day:a.day.literal,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefCache")})}));H||la||(H=b.create({name:"amazonday-modal-day-picker",duration:.3,preloadDomId:"a-popover-amazonday-modal-day-picker",height:400,closeType:"icon",sheetType:"web"}));x.fetchDefaultingInfoHTML();H.show();c.logLatencyMetric(t.BOTTOM_SHEET_LOAD,
p.LOAD_FINISH,k)}function g(){H&&(la||H.$container.remove(),H=r)}a.declarative("amazonday-click-show-bottom-sheet-day-picker","click",function(a){Z=a.$target.parents(".selectable-box").find('input[type\x3d"radio"]');Z.prop("disabled",!0);var b=a.$currentTarget.find('[data-action\x3d"amazonday-show-bottom-sheet-day-picker"]');b.is(a.$target)||b.has(a.$target).length||b.click()});a.declarative("amazonday-show-bottom-sheet-day-picker","click",e);a.on("a:sheet:beforeShow:amazonday-modal-day-picker",function(a){c.logLatencyMetric(t.BOTTOM_SHEET_LOAD,
p.TIME_CLICK,k)});a.on("a:sheet:ajaxContentLoaded:amazonday-modal-day-picker",e);a.declarative("amazonday-clicked-for-defaulting-info-bottom-sheet","click",function(e){function g(){a.one("a:sheet:afterHide:amazonday-modal-day-picker",function(){Aa.show();a.one("a:sheet:afterHide:amazonday-defaulting-info-bottom-sheet",function(){H.show()})});H.hide()}c.logLatencyMetric(na,p.BODY_BEGIN,k);Aa?(g(),c.logLatencyMetric(na,p.BODY_END,k),c.logLatencyMetric(na,p.LOAD_FINISH,k)):(h.show(),x.fetchDefaultingInfoHTML().always(function(){h.hide();
c.logLatencyMetric(na,p.BODY_END,k);c.logLatencyMetric(na,p.LOAD_FINISH,k)}).done(function(a){a={name:"amazonday-defaulting-info-bottom-sheet",duration:.3,inlineContent:d.trim(a),height:400,closeType:"icon",sheetType:"web"};Aa=b.create(a);g()}))});a.on("a:sheet:afterHide:amazonday-modal-day-picker",function(a){Z&&Z.prop("disabled",!1);Z=r});a.on("a:sheet:afterShow:amazonday-modal-day-picker",function(){if(k==ga.MOBILE){var a=d("#amazonday-daypicker-days-list .a-list-item");0<a.length&&C(a[0])&&C(a[a.length-
1])||d("#amazonday-daypicker-days-scroller").scrollLeft(27)}});a.on("checkout:reload:spc",g);a.on("checkout:reload:shipoptionselect",g)});a.on("a:popover:show:amazonday-modal-day-picker",B);a.on("a:popover:ajaxContentLoaded:amazonday-modal-day-picker",B);a.on("a:popover:beforeShow:amazonday-modal-day-picker",function(b){function d(){g.apply(e,arguments);a.trigger("a:popover:ajaxContentLoaded:amazonday-modal-day-picker",b)}c.logLatencyMetric(t.POPOVER_LOAD,p.TIME_CLICK,k);var e=b.popover,g=e.show;
da||g.isAmazonDayCustomized||(d.isAmazonDayCustomized=!0,e.show=d)});a.on("a:popover:hide:amazonday-modal-day-picker",function(a){d(a.popover.$trigger[0]).parents(".a-accordion-row").not(".amazon-day-ship-option-upsell").find("input").prop("disabled",!1);M=N=fa=L=G=w=A=K=r;y();la=a.popover.data.renderModalInAjax});a.on("checkout:reload:spc",ca);a.on("checkout:reload:shipoptionselect",ca);a.declarative("amazonday-modal-daypicker-day-button","click",function(a){ba()||c.logLatencyMetric(t.SET_TRIAL_PREFERENCE,
p.TIME_CLICK,k);c.logMetric(D.DAY_BUTTON_CLICK);w=a.data.day.literal?[a.data.day.literal]:[];c.logMetric(D.DAY_BUTTON_CLICK+"-"+w.join(","));v?e.showSpinner(v.$popover,!1,v):h.show();ba()?(J(a.data.day.literal),v?e.hideSpinner(v.$popover):h.hide(),Q()):x.selectDay({day:a.data.day.literal,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefSelect")}).always(function(){c.logLatencyMetric(t.SET_TRIAL_PREFERENCE,
p.BODY_END,k);v?e.hideSpinner(v.$popover):h.hide()}).done(function(a){y(a);Q();c.logLatencyMetric(t.SET_TRIAL_PREFERENCE,p.LOAD_FINISH,k)}).fail(function(){y()})});a.declarative("amazonday-modal-daypicker-day-button-multi-selection","click",function(a){if(a.$currentTarget.find(".amazonday-modal-day-picker-days").hasClass("a-button-disabled"))return!1;ba()||c.logLatencyMetric(t.SET_MULTI_PREFERENCES,p.TIME_CLICK,k);a.$currentTarget.find(".amazonday-modal-day-picker-days").toggleClass("a-button-selected");
w=P(a.$target.parents("#amazonday-daypicker-days-list"));A=qa(A,a.data.day.literal);w.length?(v?e.showSpinner(v.$popover,!1,v):h.show(),S?(J(w),v?e.hideSpinner(v.$popover):h.hide(),Q()):x.selectDay({day:w,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefSelect")}).always(function(){c.logLatencyMetric(t.SET_MULTI_PREFERENCES,p.BODY_END,k);v?e.hideSpinner(v.$popover):h.hide()}).done(function(a){y(a);Q();
c.logLatencyMetric(t.SET_MULTI_PREFERENCES,p.LOAD_FINISH,k)}).fail(function(){y()})):ba()?J():y()});a.declarative("amazonday-daypicker-remove-day","click",function(a){c.logLatencyMetric(t.REMOVE_PREFERENCE,p.BODY_BEGIN,k);d(".amazonday-modal-day-picker-days."+A[a.data.index]).each(function(){d(this).click();return!1});c.logLatencyMetric(t.REMOVE_PREFERENCE,p.BODY_END,k);c.logLatencyMetric(t.REMOVE_PREFERENCE,p.LOAD_FINISH,k)});a.declarative("amazonday-modal-daypicker-save","click",function(a){if(!a.$currentTarget.find(".amazonday-daypicker-save-and-continue").hasClass("a-button-disabled")&&
w&&w.length){c.logLatencyMetric(t.SET_SAVE_PREFERENCE,p.TIME_CLICK,k);v&&g.hide(v.id);H&&H.hide();ma=d(".amazonday-modal-day-picker-checkbox").find("input").last().prop("checked");if(l.isFeatureEnabled("SavePreferenceCheckbox")||X)T=d(".amazonday-modal-day-picker-save-preference-checkbox").find("input").last().prop("checked");if(!aa(w,G)||Y!==ma||(l.isFeatureEnabled("SavePreferenceCheckbox")||X)&&ka!==T)ja(w.length)&&(w=w.splice(1)),!0===Y&&!1===ma&&(c.logLatencyMetric(Ca,p.BODY_BEGIN,k),c.logLatencyMetric(Ca,
p.BODY_END,k),c.logLatencyMetric(Ca,p.LOAD_FINISH,k)),!1===Y&&!0===ma&&(c.logLatencyMetric(Ba,p.BODY_BEGIN,k),c.logLatencyMetric(Ba,p.BODY_END,k),c.logLatencyMetric(Ba,p.LOAD_FINISH,k)),h.show(),x.selectDay({day:w,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,shippingOfferingId:fa,queryParameters:"?"+z("adPrefSave"),isTrial:!1,cacheable:!1,returnType:"html",isShipOptionDefaulted:ma,shouldSavePreference:T,savePreferenceCheckboxEnabled:X,isAmazonDayChewbaccaDayPickerSetterCXEnabled:S,
purchaseId:ua,eligibleDeliveryGroupId:va,eligibleDeliveryOptionId:wa,isDeliveryOptionSelected:xa,originalLineItemIdsWithSameAddressId:ya}).done(function(a,b,e){c.logLatencyMetric(t.SET_SAVE_PREFERENCE,p.BODY_END,k);h.hide();u.ajaxUpdatePage(a,b,e,{pushNewFrame:"false",mixedContentFallback:"reload"});l.notifyFeatureChanges();l.isFeatureEnabled("SavePreferenceEnabled")!==T?c.logMetric(D.SAVE_PREFERENCE_ENABLED_FEATURE_INCONSISTENCY.concat("-",k),1):c.logMetric(D.SAVE_PREFERENCE_ENABLED_FEATURE_INCONSISTENCY.concat("-",
k),0);d(".checkout.spc.tablet").find(".a-expander-header").click();l.isFeatureEnabled("SelectADSOAfterSetPreference")&&d("[data-shippingofferingid\x3d'"+fa+"']").click()}).fail(function(a,b,c){h.hide();u.ajaxRedirect(a,b,c)}).always(function(){c.logLatencyMetric(t.SET_SAVE_PREFERENCE,p.LOAD_FINISH,k)})}});a.declarative("amazonday-click-shipoption-multiple-ad-recommendation-message","click",function(a){c.logLatencyMetric(t.SET_RECOMMENDED_PREFERENCE,p.TIME_CLICK,k);var b=a.data.data.recommendedPreference.reduce(function(a,
b){a.push(b.selection);return a},[]);b.push(a.data.data.preference[0].selection);h.show();x.selectDay({day:b,addressId:a.data.data.addressId,lineItemId:a.data.data.lineItemId,orderLineItemIds:a.data.data.orderLineItemIds,shippingOfferingId:a.data.data.shippingOfferingId,queryParameters:"?"+z("adPrefSave"),isTrial:!1,cacheable:!1,returnType:"html",isShipOptionDefaulted:a.data.data.isShipOptionDefaulted}).done(function(a,b,e){c.logLatencyMetric(t.SET_RECOMMENDED_PREFERENCE,p.BODY_END,k);h.hide();u.ajaxUpdatePage(a,
b,e,{pushNewFrame:"false"});d(".checkout.spc.tablet").find(".a-expander-header").click();l.isFeatureEnabled("SelectADSOAfterSetPreference")&&d("[data-shippingofferingid\x3d'"+fa+"']").click()}).fail(function(a,b,c){h.hide();u.ajaxRedirect(a,b,c)}).always(function(){c.logLatencyMetric(t.SET_RECOMMENDED_PREFERENCE,p.LOAD_FINISH,k)})})});"use strict";m.when("A").register("amazonday-day-picker-loader",function(a){var h=a.$,e,u,b,n;a.declarative("a-sheet","click",function(a){e=a.$target.parents(".selectable-box").find('input[type\x3d"radio"]');
a.data.preloadDomId&&!1===a.data.preloadDomId.startsWith("scope-of-work")&&e.prop("disabled",!0);a&&a.data&&"amazonday-modal-day-picker"===a.data.name&&(u=a.data,b=a)});a.on("a:sheet:beforeShow:amazonday-modal-day-picker",function(e){var f=e.sheet.getContentContainer();b.sheet=e.sheet;f.html()&&'\x3cspan class\x3d"a-spinner a-spinner-medium amazonday-bottomsheet-spinner"\x3e\x3c/span\x3e\n'!==f.html()?u&&u.data&&u.data.renderModalInAjax&&a.trigger("a:sheet:ajaxContentLoaded:amazonday-modal-day-picker",
b):(f.html('\x3cspan class\x3d"a-spinner a-spinner-medium amazonday-bottomsheet-spinner"\x3e\x3c/span\x3e\n'),h.get(u.url).done(function(c){f.html(c);n=e;a.trigger("a:sheet:ajaxContentLoaded:amazonday-modal-day-picker",b)}))});return{getData:function(){return n}}});"use strict";m.when("A","amazonDayLogger","amazonDayLoggerConfig","page-detector").register("amazonday-modal-sustainability",function(a,h,e,f){function b(a){h.logMetric(g.SUSTAINABILITY_MORE_DETAILS_CLICK.concat("-",m),1)}var n=a.$,n=f.isTablet()||
n(".checkout-sosp-tablet").length,g=e.AMAZONDAY.COUNTER_METRICS;e=e.AMAZONDAY.DEVICE_TYPES;var m=f.isMobile()?e.MOBILE:n?e.TABLET:e.DESKTOP;a.on("a:sheet:beforeShow:sustainability-messaging",b);a.on("a:popover:beforeShow:sustainability-messaging",b)});"use strict";m.register("amazonDayLoggerConfig",function(){return{AMAZONDAY:{DEVICE_TYPES:{MOBILE:"mobile",DESKTOP:"desktop",TABLET:"tablet"},LATENCY_SCOPES:{POPOVER_LOAD:"amazonDay-popoverLoad",BOTTOM_SHEET_LOAD:"amazonDay-bottomSheetLoad",SET_SAVE_PREFERENCE:"amazonDay-save",
SET_TRIAL_PREFERENCE:"amazonDay-trial",SET_MULTI_PREFERENCES:"amazonDay-set-multi-preferences",SET_RECOMMENDED_PREFERENCE:"amazonDay-set-recommended-preference",REMOVE_PREFERENCE:"amazonDay-remove-preference",SET_SAVE_PREFERENCE_AJAX:"amazonDay-save-ajax",SET_TRIAL_PREFERENCE_AJAX:"amazonDay-trial-ajax",SET_AMAZONDAY_PREFERENCE_DATE_PICKER:"amazonDay-datePicker-set-preference",SET_TRIAL_SCOPE:"amazonDay-selectDay",SET_SAVE_SCOPE:"amazonDay-savePref",AJAX_PAGE_UPDATE_SCOPE:"amazonDay-savePref-ajaxPageUpdate",
AJAX_CALL_SCOPE:"amazonDay-savePref-ajaxCall"},LATENCY_METRICS:{TIME_CLICK:"tc",BODY_BEGIN:"bb",BODY_END:"be",CRITICAL_FEATURE:"cf",LOAD_FINISH:"ld"},AMAZONDAY_SHIP_OPTION_DEFAULTING_METRICS:{SET_AMAZONDAY_DEFAULT_SHIP_OPTION:"setAmazonDayDefaultShipOptionByDayPicker",UNSET_AMAZONDAY_DEFAULT_SHIP_OPTION:"unsetAmazonDayDefaultShipOptionByDayPicker",AMAZONDAY_SHIP_OPTION_DEFAULTING_DETAIL_LINK_ON_DAY_PICKER:"amazonDayShipOptionDefaultingDetailLinkOnDayPicker"},COUNTER_METRICS:{DAY_BUTTON_CLICK:"dayButtonClick",
SAVE_AND_CONTINUE_CLICK:"saveAndContinueClick",SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW:"showMultipleAmazonDayDayPickerView",NON_AD_CUSTOMER:"amazonDay-nonADCustomer",AD_CUSTOMER:"amazonDay-ADCustomer",SET_SAVE_PREFERENCE_AJAX_FAILURE:"amazonDay-save-ajax-failure",SET_SAVE_PREFERENCE_AJAX_FAILURE_GURUPA_FLOW:"amazonDay-save-ajax-failure-Gurupa-Flow",AD_PROFILE_SETTER_CALL:"amazonDay-profile-setter",AD_DATE_PICKER_PROFILE_SETTER_CALL:"amazonDay-datePicker-profile-setter",AD_DATE_PICKER_PROFILE_SETTER_CALL_FAILURE:"amazonDay-datePicker-profile-setter-failure",
AD_DATE_PICKER_RENDERED_ON_BOTTOM_SHEET:"amazonDay-datePicker-rendered-on-bottom-sheet",AD_DATE_PICKER_RENDERED_ON_POP_OVER:"amazonDay-datePicker-rendered-on-pop-over",SETTER_FALLBACK:"setter-fallback",SAVE_PREFERENCE_ENABLED_FEATURE_INCONSISTENCY:"save-preference-enabled-feature-inconsistency",ORIGINAL_LINE_ITEM_ID_NULL_FROM_WEBAPP:"original-line-item-id-null-from-webapp",SUSTAINABILITY_MORE_DETAILS_CLICK:"amazonDay-sustainability-learn-more"}}}});"use strict";m.when("amazonDayLoggerConfig").register("amazonDayLogger",
function(a){var h,e;return{logMetric:function(a,b){var e;"undefined"!==typeof f.ue&&"undefined"!==typeof a&&"undefined"!==typeof f.ue.count&&(e=f.ue.count(a)||0,f.ue.count(a,e+(b||1)))},logException:function(a,b){"undefined"!==typeof f.ueLogError&&f.ueLogError(a,b)},logLatencyMetric:function(e,b,h){"function"===typeof f.uet&&(e=e+"-"+h,a.AMAZONDAY.LATENCY_METRICS.LOAD_FINISH===b?f.uex(b,e,{wb:1}):f.uet(b,e,{wb:1}))},getScopeNameWithCount:function(a){f.ue&&h!==f.ue.id&&(h=f.ue.id,e={});var b=e[a]||
"";e[a]=(e[a]||0)+1;return a+b}}});"use strict";m.when("A").register("amazonday-feature",function(a){function h(){var b={},e=document.getElementById("amazonday-feature-indicator-container");e&&(e=e.getAttribute("enabled-features"))&&a.each(e.split(" "),function(a){b[a]=!0});return b}function e(){var b=h(),e=a.diff(b,f);a.each(e,function(e,f){a.trigger("amazonday:feature:"+f,b[f])});f=b}var f={},f=h();a.on("checkout:reload:spc",e);a.on("checkout:reload:shipoptionselect",e);return{isFeatureEnabled:function(a){return!!f[a]},
notifyFeatureChanges:e}});"use strict";m.when("A").register("amazonday-string",function(a){var f=a.$;return{getString:function(a,m){return(a=f("#amazonday-string-container").data(a))?a:m}}})});