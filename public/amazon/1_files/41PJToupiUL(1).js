(function(r){var l=window.AmazonUIPageJS||window.P,t=l._namespace||l.attributeErrors,a=t?t("AmazonDayCheckoutAssets",""):l;a.guardFatal?a.guardFatal(r)(a,window):a.execute(function(){r(a,window)})})(function(r,l,t){r.when("A").register("amazonday-cache",function(a){return function(a){var f={};f.duration=a||15E4;return{put:function(a,e){a&&(delete f[a],f[a]={value:e,timestamp:Date.now()})},get:function(a){var e;a&&f[a]?Date.now()-f[a].timestamp>f.duration?(delete f[a],e=!1):e=!0:e=!1;a=e?f[a].value:
void 0;return a},remove:function(a){delete f[a]}}}});"use strict";r.when("A","page-detector","page-detector-current-page","page-conductor","amazonday-cache","amazonDayLogger","amazonDayLoggerConfig","amazonday-feature").register("amazonday-service",function(a,h,f,w,e,p,g,D){function d(a){var d={MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,SUNDAY:7};a=a.slice(0);return a=a.sort(function(a,g){return d[a]-d[g]})}var l=a.$,n=e();return{selectDay:function(a,e,r,U,I,O,P,pa,ia,ca,y){var J,
W,qa,ra,ja,E,X,ka,q;"object"===typeof a&&(q=a,a=q.day,e=q.addressId,r=q.lineItemId,ia=q.orderLineItemIds,ca=q.originalLineItemId,y=q.originalLineItemIds,pa=q.shippingOfferingId,P=q.queryParameters,U=q.isTrial,O=q.cacheable,I=q.returnType,J=q.isShipOptionDefaulted,W=q.shouldSavePreference,qa=q.savePreferenceCheckboxEnabled,ra=q.isAmazonDayChewbaccaDayPickerSetterCXEnabled,ja=q.purchaseId,E=q.eligibleDeliveryGroupId,X=q.eligibleDeliveryOptionId,ka=q.isDeliveryOptionSelected,q=q.originalLineItemIdsWithSameAddressId);
W===t&&(W=1);a=Array.isArray(a)?d(a).toString():a;O===t&&(O=U);P=P||"";var Y,da=h.isTablet()||l(".checkout-sosp-tablet").length,Q=g.AMAZONDAY.DEVICE_TYPES,B=h.isMobile()?Q.MOBILE:da?Q.TABLET:Q.DESKTOP,z=g.AMAZONDAY.COUNTER_METRICS;ra&&ja&&q&&X&&E?(p.logMetric(z.AD_PROFILE_SETTER_CALL.concat("-",B),1),Y="/checkout/p/p-"+ja+"/eligibleshipoption/amazon-day-profile",I={daysSelected:a,lineItemIds:q,eligibleGroupDeliveryOptionId:X,eligibleDeliveryGroupId:E,isShipOptionDefaulted:!!J,amazonDayShipOptionSelected:!!ka,
shouldSavePreference:!!W}):(p.logMetric(z.SETTER_FALLBACK.concat("-",B),1),null==ca&&null==r&&p.logMetric(z.ORIGINAL_LINE_ITEM_ID_NULL_FROM_WEBAPP.concat("-",B),1),Y="/gp/buy/amazonday/spc/handlers/update-amazonday-options.html"+P,I={daysSelected:a,addressId:e,lineItemId:r,isTrial:U?1:0,returnJson:"json"===I?1:0,returnFullHTML:"html"===I?1:0,shippingOfferingId:pa,orderLineItemIds:ia,originalLineItemId:ca,originalLineItemIds:y,isShipOptionDefaulted:J?1:0,shouldSavePreference:W?1:0,savePreferenceCheckboxEnabled:D.isFeatureEnabled("SavePreferenceCheckbox")||
qa?1:0});P=w.setAjaxTransitionHeader({"x-amz-checkout-page":f.getCurrentPage(),"x-amz-checkout-transition":"ajax","x-amz-checkout-page-type":h.isSpc()?"CheckoutConfirmOrder":h.isSosp()?"CheckoutShipOption":t});var ea=e+"_"+a+"_"+(r!==t?r:ca);if(O&&(a=n.get(ea))&&"function"===typeof a.always)return a;var fa=g.AMAZONDAY.LATENCY_METRICS;a=g.AMAZONDAY.LATENCY_SCOPES;var b=U?a.SET_TRIAL_PREFERENCE_AJAX:a.SET_SAVE_PREFERENCE_AJAX;p.logLatencyMetric(b,fa.BODY_BEGIN,B);a=l.ajax({type:"POST",url:Y,data:I,
dataType:"text",headers:P,contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8;"});O&&n.put(ea,a);a.always(function(){p.logLatencyMetric(b,fa.BODY_END,B);p.logLatencyMetric(b,fa.LOAD_FINISH,B)}).fail(function(){Y.startsWith("/gp/buy/amazonday/spc/handlers/")?p.logMetric(z.SET_SAVE_PREFERENCE_AJAX_FAILURE_GURUPA_FLOW.concat("-",B),1):p.logMetric(z.SET_SAVE_PREFERENCE_AJAX_FAILURE.concat("-",B),1);n.remove(ea)});return a},fetchDefaultingInfoHTML:function(){var a=n.get("fetchDefaultingInfoHTML");
if(a&&"function"===typeof a.always)return a;a=l.get("/gp/buy/amazonday/shared/display/defaulting-info-bottom-sheet.html");n.put("fetchDefaultingInfoHTML",a);a.fail(function(){n.remove("fetchDefaultingInfoHTML")});return a}}});"use strict";r.when("A","page-detector","button-blocker","amazonday-feature").execute(function(a,h,f,w){function e(){if((h.isMobile()||h.isTablet()||g(".checkout-sosp-tablet").length?g("div.one-shipment:visible"):g("div.order-display")).find("div.amazonday-continue-button-blocker-indicator").length){var a=
g(".amazonday-continue-button-blocker-text").html();f.show(self,a,a);p||g(".continue-button-blocker").css("display","inline-block")}else f.hide(self)}var p=l.P&&l.P.AUI_BUILD_DATE,g=a.$;h.isTablet()||g(".checkout-sosp-tablet").length?f={hide:function(a){a=g("#bottom-continue-pane").find(".a-button");a.removeClass("a-button-disabled");a.find("input").prop("disabled",!1);g(".amazonday-blocker-text").remove()},show:function(a,d,e){a=g("#bottom-continue-pane").find(".a-button");a.addClass("a-button-disabled");
a.find("input").prop("disabled",!0);g("\x3cp class\x3d'amazonday-blocker-text a-row a-text-beside-button'\x3e"+e+"\x3c/p\x3e").insertAfter(a)}}:h.isMobile()&&(f={hide:function(a){g("div.one-shipment:visible").find(".sosp-continue-button").removeClass("aok-hidden");g(".sosp-continue-button-fake").remove();g(".amazonday-blocker-text").remove()},show:function(a,d,e){g("div.one-shipment:visible").find(".sosp-continue-button").each(function(a,d){a=g(d);d=a.clone(!1).addClass("sosp-continue-button-fake a-button-disabled").removeClass("sosp-continue-button continue-button").insertAfter(a);
a.addClass("aok-hidden");g("\x3cp class\x3d'amazonday-blocker-text a-row a-text-beside-button'\x3e"+e+"\x3c/p\x3e").insertAfter(d)})}});e();g(l).one("popstate",e);a.on("active-shipment-changed",function(){e();g(l).one("popstate",e)});a.on("checkout:reload:spc",e);a.on("checkout:reload:shipoptionselect",e)});"use strict";r.when("A","page-spinner-controller","page-conductor","amazonday-service","page-detector","amazonDayLogger","amazonDayLoggerConfig").register("amazonday-day-inline-day-picker-controller",
function(a,h,f,w,e,p,g){var l=a.$,d=e.isTablet()||l(".checkout-sosp-tablet").length,r=g.AMAZONDAY.LATENCY_METRICS,n=g.AMAZONDAY.LATENCY_SCOPES;g=g.AMAZONDAY.DEVICE_TYPES;var t=e.isMobile()?g.MOBILE:d?g.TABLET:g.DESKTOP;a.declarative("amazonday-inline-day-picker-day-button","click",function(a){p.logLatencyMetric(n.SET_SAVE_PREFERENCE,r.BODY_BEGIN,t);h.show();w.selectDay(a.data.selection,a.data.addressId,a.data.lineItemId,!1,"html",!1,"?inlineDayPicker\x3d1").done(function(a,d,e){h.hide();f.ajaxUpdatePage(a,
d,e,{pushNewFrame:"false"})}).fail(function(a,d,e){h.hide();f.ajaxRedirect(a,d,e)}).always(function(){p.logLatencyMetric(n.SET_SAVE_PREFERENCE,r.BODY_END,t);p.logLatencyMetric(n.SET_SAVE_PREFERENCE,r.LOAD_FINISH,t)})});a.declarative("amazonday-daypicker-mobile-inline-button-changeover","click",function(){l("#ab-closed-days-disclaimer-mobile-inline").toggle()})});"use strict";r.when("A","page-spinner-controller","loading-spinner-controller","page-conductor","page-transition-controller","page-detector",
"a-popover-base","amazonday-service","amazonDayLogger","amazonDayLoggerConfig","amazonday-feature","amazonday-string","amazonday-day-picker-loader").register("amazonday-modal-day-picker-controller",function(a,h,f,w,e,p,g,D,d,V,n,Da,Fa){function Ea(c){d.logLatencyMetric(u.POPOVER_LOAD,m.BODY_END,k);n.isFeatureEnabled("NonADCustomer")?d.logMetric(C.NON_AD_CUSTOMER.concat("-",k),1):d.logMetric(C.AD_CUSTOMER.concat("-",k),1);b(c.popover.$trigger[0]).parents(".a-accordion-row").find("input").prop("disabled",
!0);v=c.popover;c=v.$trigger.data("a-modal").data;K=c.lineItemId;R=c.addressId;ga=c.shippingOfferingId;L=c.orderLineItemIds;M=c.originalLineItemId;N=c.originalLineItemIds;F=x=I(c);Z=c.savePreferenceCheckboxEnabled!==t&&1===c.savePreferenceCheckboxEnabled;sa=c.shouldSavePreference!==t&&1===c.shouldSavePreference;S=c.isAmazonDayChewbaccaDayPickerSetterCXEnabled!==t&&!0===c.isAmazonDayChewbaccaDayPickerSetterCXEnabled;ua=c.purchaseId;va=c.eligibleDeliveryGroupId;wa=c.eligibleDeliveryOptionId;xa=c.isDeliveryOptionSelected;
T=(n.isFeatureEnabled("SavePreferenceEnabled")||sa)&&0!==F.length;aa=1===c.isShipOptionDefaulted;la=T;ya=c.originalLineItemIdsWithSameAddressId;za=c.isDefaultingEnabled;b(".amazonday-modal-day-picker-checkbox").find("input").prop("checked",aa);(n.isFeatureEnabled("SavePreferenceCheckbox")||Z)&&b(".amazonday-modal-day-picker-save-preference-checkbox").find("input").prop("checked",la);S?(n.isFeatureEnabled("TwoAmazonDays")&&d.logMetric(C.SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW.concat("-",k),1),J(F)):
n.isFeatureEnabled("TwoAmazonDays")?(d.logMetric(C.SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW.concat("-",k),1),A=O(F),y(c),ia(F)):(y(c),b('[data-action\x3d"amazonday-modal-daypicker-day-button"]').each(function(c,a){c=JSON.parse(b(a).attr("data-amazonday-modal-daypicker-day-button"));D.selectDay({day:c.day.literal,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefCache")})}));d.logLatencyMetric(u.POPOVER_LOAD,
m.LOAD_FINISH,k)}function U(){k==ha.DESKTOP&&b(".day-picker-trigger").each(function(c){b(this).keypress(function(c){13==c.keyCode&&c.currentTarget.click()})})}function I(c){return E(c)?c.selection.reduce(function(c,a){2>c.length&&c.push(a.selection);return c},[]):[]}function O(c){var a=[],b;for(b=0;2>b;b++)a.push(H);return c&&c.length?a=a.map(function(a,b){return b<c.length?c[b]:a}):a}function P(c){var a=[];c.find(".amazonday-modal-day-picker-days").each(function(c,ta){b(ta).hasClass("a-button-selected")&&
a.push(b(ta).find("button").data("day"))});return a}function pa(c,a){if(!c||!c.length||!a)return c;var b;if(-1===c.indexOf(a))for(b=0;b<c.length;b++){if(c[b]===H)return c[b]=a,c}else for(b=0;b<c.length;b++)if(c[b]===a)return c[b]=H,c}function ia(c){var a=[];if(c&&c.length)if(1===c.length)b('[data-action\x3d"amazonday-modal-daypicker-day-button-multi-selection"]').each(function(d,ta){d=JSON.parse(b(ta).attr("data-amazonday-modal-daypicker-day-button-multi-selection"));c[0]!==d.day.literal&&a.push([c[0],
d.day.literal])});else if(2===c.length)a=c;else return;else b('[data-action\x3d"amazonday-modal-daypicker-day-button-multi-selection"]').each(function(c,d){c=JSON.parse(b(d).attr("data-amazonday-modal-daypicker-day-button-multi-selection"));a.push(c.day.literal)});a.forEach(function(c){D.selectDay({day:c,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefCache")})})}function ca(c,a){if(c&&a&&c.length===a.length){var b=
c.filter(function(c){return-1!==a.indexOf(c)}).filter(function(c,a,b){return b.indexOf(c)===a});return c.length===b.length&&a.length===b.length}return!1}function y(c){"string"===typeof c&&(c=JSON.parse(c.trim()));if(n.isFeatureEnabled("TwoAmazonDays")){W(c);ra(c);var a=c;E(a)&&a.promise?b(".amazonday-daypicker-promise-value").html(a.promise):b(".amazonday-daypicker-promise-value").html("")}else q(c),a=c,E(a)&&a.promise?(b(".amazonday-daypicker-promise").show(),b(".amazonday-daypicker-promise-value").html(a.promise)):
(b(".amazonday-daypicker-promise").hide(),b(".amazonday-daypicker-promise-value").html(""));Y();a=c;E(a)?ka(a.selection.length)?b(".amazonday-daypicker-save-and-continue").addClass("a-button-disabled"):b(".amazonday-daypicker-save-and-continue").removeClass("a-button-disabled"):b(".amazonday-daypicker-save-and-continue").addClass("a-button-disabled");c&&c.adjustmentMessage?(b(".amazonday-daypicker-adjustment-message").show(),b(".amazonday-daypicker-adjustment-message-value").html(c.adjustmentMessage)):
(b(".amazonday-daypicker-adjustment-message").hide(),b(".amazonday-daypicker-adjustment-message-value").html(""))}function J(a){n.isFeatureEnabled("TwoAmazonDays")?qa(a):X(a)?(b(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked","false"),b(".amazonday-daypicker-selected-day").show(),b(".amazonday-modal-day-picker-days."+a).addClass("a-button-selected").attr("aria-checked","true")):(b(".amazonday-daypicker-selected-day").hide(),b(".amazonday-daypicker-selected-day-value").html(""),
b(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked","false"));if(X(a)){var d=Array.isArray(a);!n.isFeatureEnabled("TwoAmazonDays")&&d&&2<=a.length?b(".amazonday-daypicker-save-and-continue").addClass("a-button-disabled"):b(".amazonday-daypicker-save-and-continue").removeClass("a-button-disabled")}else b(".amazonday-daypicker-save-and-continue").addClass("a-button-disabled");Y()}function W(a){b(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked",
"false");b(".amazonday-modal-day-picker-days").each(function(a,c){b(c).find("button").data("selectable")&&b(c).removeClass("a-button-disabled").attr("aria-checked","false")});E(a)&&(a.selection.forEach(function(a){b(".amazonday-modal-day-picker-days."+a.selection).addClass("a-button-selected").attr("aria-checked","true")}),b(".amazonday-modal-day-picker-days").each(function(d,e){b(e).hasClass("a-button-selected")||2<=a.selection.length&&b(e).addClass("a-button-disabled")}))}function qa(a){b(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked",
"false");b(".amazonday-modal-day-picker-days").each(function(a,c){b(c).find("button").data("selectable")&&b(c).removeClass("a-button-disabled").attr("aria-checked","false")});X(a)&&(a.forEach(function(a){b(".amazonday-modal-day-picker-days."+a).addClass("a-button-selected").attr("aria-checked","true")}),b(".amazonday-modal-day-picker-days").each(function(d,e){b(e).hasClass("a-button-selected")||2<=a.length&&b(e).addClass("a-button-disabled")}))}function ra(a){Array.isArray(A)&&2===A.length&&A[0]===
H&&(A[0]=A[1],A[1]=H);var d=ja(A,a);b(".amazonday-daypicker-remove-link").get().forEach(function(a,c){d[c%2]===H?b(a).addClass("aok-hidden"):b(a).removeClass("aok-hidden")});b(".amazonday-daypicker-selected-days-value-0").html(d[0]);b(".amazonday-daypicker-selected-days-value-1").html(d[1])}function ja(a,b){if(!a||!a.length||!E(b))return[H,H];var d=b.selection,e=[],g=d.reduce(function(a,c){a.push(c.selection);return a},[]);if(a.filter(function(a){return-1!==g.indexOf(a)}).length!==d.length)for(b=
0;b<a.length;b++)e[b]=b<d.length?d[b].plural:H;else for(b=0;b<a.length;b++)e[b]=-1!==g.indexOf(a[b])?d[g.indexOf(a[b])].plural:H;return e}function E(a){return a&&a.selection&&a.selection.length}function X(a){var b=Array.isArray(a)?a.length:!0;return a&&b}function ka(a){return!n.isFeatureEnabled("TwoAmazonDays")&&2<=a}function q(a){if(E(a)){b(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked","false");b(".amazonday-daypicker-selected-day").show();var d=b.map(a.selection,
function(a){return a.caption}).join(Da.getString("ad-day-picker-multiple-preference-comma"));b(".amazonday-daypicker-selected-day-value").html(d);a.selection.forEach(function(a){b(".amazonday-modal-day-picker-days."+a.selection).addClass("a-button-selected").attr("aria-checked","true")})}else b(".amazonday-daypicker-selected-day").hide(),b(".amazonday-daypicker-selected-day-value").html(""),b(".amazonday-modal-day-picker-days").removeClass("a-button-selected").attr("aria-checked","false")}function Y(){za?
b(".amazonday-modal-day-picker-checkbox").show():b(".amazonday-modal-day-picker-checkbox").hide()}function da(){return S!==t&&S?!0:!1}function Q(){if(k==ha.MOBILE){var a=b(".amazonday-daypicker-save-and-continue")[0];B(a)||(a=a.getBoundingClientRect().top+10,b("#amazonday-daypicker-scroller").scrollTop(a))}}function B(a){if(a)return a=a.getBoundingClientRect(),0<=a.top&&0<=a.left&&a.bottom<=(l.innerHeight||document.documentElement.clientHeight)&&a.right<=(l.innerWidth||document.documentElement.clientWidth)}
function z(a){return"ref_\x3dchk_"+((p.isSpc()?"spc":p.isSosp()?"sosp":"unknown")+"_")+a}function ea(){v&&fa&&ma&&v.$container.remove()}var fa=l.P&&l.P.AUI_BUILD_DATE,b=a.$,F,x,R,K,ga,L,M,N,aa,la,A,Z,sa,S,za,ua,va,wa,xa,ya,v,G,Aa,ba,na,T,ma;e=p.isTablet()||b(".checkout-sosp-tablet").length;var m=V.AMAZONDAY.LATENCY_METRICS,u=V.AMAZONDAY.LATENCY_SCOPES,ha=V.AMAZONDAY.DEVICE_TYPES,k=p.isMobile()?ha.MOBILE:e?ha.TABLET:ha.DESKTOP,Ba=V.AMAZONDAY.AMAZONDAY_SHIP_OPTION_DEFAULTING_METRICS.SET_AMAZONDAY_DEFAULT_SHIP_OPTION,
Ca=V.AMAZONDAY.AMAZONDAY_SHIP_OPTION_DEFAULTING_METRICS.UNSET_AMAZONDAY_DEFAULT_SHIP_OPTION,oa=V.AMAZONDAY.AMAZONDAY_SHIP_OPTION_DEFAULTING_METRICS.AMAZONDAY_SHIP_OPTION_DEFAULTING_DETAIL_LINK_ON_DAY_PICKER,C=V.AMAZONDAY.COUNTER_METRICS,H=Da.getString("ad-day-picker-multiple-preference-unset-value","---");U();a.on("checkout:reload:spc",U);r.when("a-sheet").execute(function(c){function e(a){d.logLatencyMetric(u.BOTTOM_SHEET_LOAD,m.BODY_END,k);n.isFeatureEnabled("NonADCustomer")?d.logMetric(C.NON_AD_CUSTOMER.concat("-",
k),1):d.logMetric(C.AD_CUSTOMER.concat("-",k),1);if(ma=a.data.data.renderModalInAjax)G=a.sheet;ba=a.$target.parents(".selectable-box").find('input[type\x3d"radio"]');ba.prop("disabled",!0);K=a.data.data.lineItemId;R=a.data.data.addressId;ga=a.data.data.shippingOfferingId;L=a.data.data.orderLineItemIds;M=a.data.data.originalLineItemId;N=a.data.data.originalLineItemIds;F=x=I(a.data.data);Z=a.data.data.savePreferenceCheckboxEnabled!==t&&1===a.data.data.savePreferenceCheckboxEnabled;sa=a.data.data.shouldSavePreference!==
t&&1===a.data.data.shouldSavePreference;S=a.data.data.isAmazonDayChewbaccaDayPickerSetterCXEnabled!==t&&!0===a.data.data.isAmazonDayChewbaccaDayPickerSetterCXEnabled;ua=a.data.data.purchaseId;va=a.data.data.eligibleDeliveryGroupId;wa=a.data.data.eligibleDeliveryOptionId;xa=a.data.data.isDeliveryOptionSelected;ya=a.data.data.originalLineItemIdsWithSameAddressId;T=(n.isFeatureEnabled("SavePreferenceEnabled")||sa)&&0!==F.length;aa=1===a.data.data.isShipOptionDefaulted;la=T;za=a.data.data.isDefaultingEnabled;
b(".amazonday-modal-day-picker-checkbox").find("input").prop("checked",aa);(n.isFeatureEnabled("SavePreferenceCheckbox")||Z)&&b(".amazonday-modal-day-picker-save-preference-checkbox").find("input").prop("checked",la);S?(n.isFeatureEnabled("TwoAmazonDays")&&d.logMetric(C.SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW.concat("-",k),1),J(x)):n.isFeatureEnabled("TwoAmazonDays")?(d.logMetric(C.SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW.concat("-",k),1),A=O(F),y(a.data.data),ia(F)):(y(a.data.data),b('[data-action\x3d"amazonday-modal-daypicker-day-button"]').each(function(a,
c){a=JSON.parse(b(c).attr("data-amazonday-modal-daypicker-day-button"));D.selectDay({day:a.day.literal,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefCache")})}));G||ma||(G=c.create({name:"amazonday-modal-day-picker",duration:.3,preloadDomId:"a-popover-amazonday-modal-day-picker",height:400,closeType:"icon",sheetType:"web"}));D.fetchDefaultingInfoHTML();G.show();d.logLatencyMetric(u.BOTTOM_SHEET_LOAD,
m.LOAD_FINISH,k)}function g(){G&&(ma||G.$container.remove(),G=t)}a.declarative("amazonday-click-show-bottom-sheet-day-picker","click",function(a){ba=a.$target.parents(".selectable-box").find('input[type\x3d"radio"]');ba.prop("disabled",!0);var c=a.$currentTarget.find('[data-action\x3d"amazonday-show-bottom-sheet-day-picker"]');c.is(a.$target)||c.has(a.$target).length||c.click()});a.declarative("amazonday-show-bottom-sheet-day-picker","click",e);a.on("a:sheet:beforeShow:amazonday-modal-day-picker",
function(a){d.logLatencyMetric(u.BOTTOM_SHEET_LOAD,m.TIME_CLICK,k)});a.on("a:sheet:ajaxContentLoaded:amazonday-modal-day-picker",e);a.declarative("amazonday-clicked-for-defaulting-info-bottom-sheet","click",function(e){function g(){a.one("a:sheet:afterHide:amazonday-modal-day-picker",function(){Aa.show();a.one("a:sheet:afterHide:amazonday-defaulting-info-bottom-sheet",function(){G.show()})});G.hide()}d.logLatencyMetric(oa,m.BODY_BEGIN,k);Aa?(g(),d.logLatencyMetric(oa,m.BODY_END,k),d.logLatencyMetric(oa,
m.LOAD_FINISH,k)):(h.show(),D.fetchDefaultingInfoHTML().always(function(){h.hide();d.logLatencyMetric(oa,m.BODY_END,k);d.logLatencyMetric(oa,m.LOAD_FINISH,k)}).done(function(a){a={name:"amazonday-defaulting-info-bottom-sheet",duration:.3,inlineContent:b.trim(a),height:400,closeType:"icon",sheetType:"web"};Aa=c.create(a);g()}))});a.on("a:sheet:afterHide:amazonday-modal-day-picker",function(a){ba&&ba.prop("disabled",!1);ba=t});a.on("a:sheet:afterShow:amazonday-modal-day-picker",function(){if(k==ha.MOBILE){var a=
b("#amazonday-daypicker-days-list .a-list-item");0<a.length&&B(a[0])&&B(a[a.length-1])||b("#amazonday-daypicker-days-scroller").scrollLeft(27)}});a.on("checkout:reload:spc",g);a.on("checkout:reload:shipoptionselect",g)});a.on("a:popover:show:amazonday-modal-day-picker",Ea);a.on("a:popover:ajaxContentLoaded:amazonday-modal-day-picker",Ea);a.on("a:popover:beforeShow:amazonday-modal-day-picker",function(c){function b(){g.apply(e,arguments);a.trigger("a:popover:ajaxContentLoaded:amazonday-modal-day-picker",
c)}d.logLatencyMetric(u.POPOVER_LOAD,m.TIME_CLICK,k);var e=c.popover,g=e.show;fa||g.isAmazonDayCustomized||(b.isAmazonDayCustomized=!0,e.show=b)});a.on("a:popover:hide:amazonday-modal-day-picker",function(a){b(a.popover.$trigger[0]).parents(".a-accordion-row").not(".amazon-day-ship-option-upsell").find("input").prop("disabled",!1);M=N=ga=L=F=x=A=K=t;y();ma=a.popover.data.renderModalInAjax});a.on("checkout:reload:spc",ea);a.on("checkout:reload:shipoptionselect",ea);a.declarative("amazonday-modal-daypicker-day-button",
"click",function(a){da()||d.logLatencyMetric(u.SET_TRIAL_PREFERENCE,m.TIME_CLICK,k);d.logMetric(C.DAY_BUTTON_CLICK);x=a.data.day.literal?[a.data.day.literal]:[];d.logMetric(C.DAY_BUTTON_CLICK+"-"+x.join(","));v?f.showSpinner(v.$popover,!1,v):h.show();da()?(J(a.data.day.literal),v?f.hideSpinner(v.$popover):h.hide(),Q()):D.selectDay({day:a.data.day.literal,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefSelect")}).always(function(){d.logLatencyMetric(u.SET_TRIAL_PREFERENCE,
m.BODY_END,k);v?f.hideSpinner(v.$popover):h.hide()}).done(function(a){y(a);Q();d.logLatencyMetric(u.SET_TRIAL_PREFERENCE,m.LOAD_FINISH,k)}).fail(function(){y()})});a.declarative("amazonday-modal-daypicker-day-button-multi-selection","click",function(a){if(a.$currentTarget.find(".amazonday-modal-day-picker-days").hasClass("a-button-disabled"))return!1;da()||d.logLatencyMetric(u.SET_MULTI_PREFERENCES,m.TIME_CLICK,k);a.$currentTarget.find(".amazonday-modal-day-picker-days").toggleClass("a-button-selected");
x=P(a.$target.parents("#amazonday-daypicker-days-list"));A=pa(A,a.data.day.literal);x.length?(v?f.showSpinner(v.$popover,!1,v):h.show(),S?(J(x),v?f.hideSpinner(v.$popover):h.hide(),Q()):D.selectDay({day:x,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,isTrial:!0,returnType:"json",queryParameters:"?"+z("adPrefSelect")}).always(function(){d.logLatencyMetric(u.SET_MULTI_PREFERENCES,m.BODY_END,k);v?f.hideSpinner(v.$popover):h.hide()}).done(function(a){y(a);Q();
d.logLatencyMetric(u.SET_MULTI_PREFERENCES,m.LOAD_FINISH,k)}).fail(function(){y()})):da()?J():y()});a.declarative("amazonday-daypicker-remove-day","click",function(a){d.logLatencyMetric(u.REMOVE_PREFERENCE,m.BODY_BEGIN,k);b(".amazonday-modal-day-picker-days."+A[a.data.index]).each(function(){b(this).click();return!1});d.logLatencyMetric(u.REMOVE_PREFERENCE,m.BODY_END,k);d.logLatencyMetric(u.REMOVE_PREFERENCE,m.LOAD_FINISH,k)});a.declarative("amazonday-modal-daypicker-save","click",function(a){if(!a.$currentTarget.find(".amazonday-daypicker-save-and-continue").hasClass("a-button-disabled")&&
x&&x.length){d.logLatencyMetric(u.SET_SAVE_PREFERENCE,m.TIME_CLICK,k);v&&g.hide(v.id);G&&G.hide();na=b(".amazonday-modal-day-picker-checkbox").find("input").last().prop("checked");if(n.isFeatureEnabled("SavePreferenceCheckbox")||Z)T=b(".amazonday-modal-day-picker-save-preference-checkbox").find("input").last().prop("checked");if(!ca(x,F)||aa!==na||(n.isFeatureEnabled("SavePreferenceCheckbox")||Z)&&la!==T)ka(x.length)&&(x=x.splice(1)),!0===aa&&!1===na&&(d.logLatencyMetric(Ca,m.BODY_BEGIN,k),d.logLatencyMetric(Ca,
m.BODY_END,k),d.logLatencyMetric(Ca,m.LOAD_FINISH,k)),!1===aa&&!0===na&&(d.logLatencyMetric(Ba,m.BODY_BEGIN,k),d.logLatencyMetric(Ba,m.BODY_END,k),d.logLatencyMetric(Ba,m.LOAD_FINISH,k)),h.show(),D.selectDay({day:x,addressId:R,lineItemId:K,orderLineItemIds:L,originalLineItemId:M,originalLineItemIds:N,shippingOfferingId:ga,queryParameters:"?"+z("adPrefSave"),isTrial:!1,cacheable:!1,returnType:"html",isShipOptionDefaulted:na,shouldSavePreference:T,savePreferenceCheckboxEnabled:Z,isAmazonDayChewbaccaDayPickerSetterCXEnabled:S,
purchaseId:ua,eligibleDeliveryGroupId:va,eligibleDeliveryOptionId:wa,isDeliveryOptionSelected:xa,originalLineItemIdsWithSameAddressId:ya}).done(function(a,c,e){d.logLatencyMetric(u.SET_SAVE_PREFERENCE,m.BODY_END,k);h.hide();w.ajaxUpdatePage(a,c,e,{pushNewFrame:"false",mixedContentFallback:"reload"});n.notifyFeatureChanges();n.isFeatureEnabled("SavePreferenceEnabled")!==T?d.logMetric(C.SAVE_PREFERENCE_ENABLED_FEATURE_INCONSISTENCY.concat("-",k),1):d.logMetric(C.SAVE_PREFERENCE_ENABLED_FEATURE_INCONSISTENCY.concat("-",
k),0);b(".checkout.spc.tablet").find(".a-expander-header").click();n.isFeatureEnabled("SelectADSOAfterSetPreference")&&b("[data-shippingofferingid\x3d'"+ga+"']").click()}).fail(function(a,b,c){h.hide();w.ajaxRedirect(a,b,c)}).always(function(){d.logLatencyMetric(u.SET_SAVE_PREFERENCE,m.LOAD_FINISH,k)})}});a.declarative("amazonday-click-shipoption-multiple-ad-recommendation-message","click",function(a){d.logLatencyMetric(u.SET_RECOMMENDED_PREFERENCE,m.TIME_CLICK,k);var e=a.data.data.recommendedPreference.reduce(function(a,
b){a.push(b.selection);return a},[]);e.push(a.data.data.preference[0].selection);h.show();D.selectDay({day:e,addressId:a.data.data.addressId,lineItemId:a.data.data.lineItemId,orderLineItemIds:a.data.data.orderLineItemIds,shippingOfferingId:a.data.data.shippingOfferingId,queryParameters:"?"+z("adPrefSave"),isTrial:!1,cacheable:!1,returnType:"html",isShipOptionDefaulted:a.data.data.isShipOptionDefaulted}).done(function(a,c,e){d.logLatencyMetric(u.SET_RECOMMENDED_PREFERENCE,m.BODY_END,k);h.hide();w.ajaxUpdatePage(a,
c,e,{pushNewFrame:"false"});b(".checkout.spc.tablet").find(".a-expander-header").click();n.isFeatureEnabled("SelectADSOAfterSetPreference")&&b("[data-shippingofferingid\x3d'"+ga+"']").click()}).fail(function(a,b,c){h.hide();w.ajaxRedirect(a,b,c)}).always(function(){d.logLatencyMetric(u.SET_RECOMMENDED_PREFERENCE,m.LOAD_FINISH,k)})})});"use strict";r.when("A").register("amazonday-day-picker-loader",function(a){var h=a.$,f,w,e,p;a.declarative("a-sheet","click",function(a){f=a.$target.parents(".selectable-box").find('input[type\x3d"radio"]');
a.data.preloadDomId&&!1===a.data.preloadDomId.startsWith("scope-of-work")&&f.prop("disabled",!0);a&&a.data&&"amazonday-modal-day-picker"===a.data.name&&(w=a.data,e=a)});a.on("a:sheet:beforeShow:amazonday-modal-day-picker",function(g){var f=g.sheet.getContentContainer();e.sheet=g.sheet;f.html()&&'\x3cspan class\x3d"a-spinner a-spinner-medium amazonday-bottomsheet-spinner"\x3e\x3c/span\x3e\n'!==f.html()?w&&w.data&&w.data.renderModalInAjax&&a.trigger("a:sheet:ajaxContentLoaded:amazonday-modal-day-picker",
e):(f.html('\x3cspan class\x3d"a-spinner a-spinner-medium amazonday-bottomsheet-spinner"\x3e\x3c/span\x3e\n'),h.get(w.url).done(function(d){f.html(d);p=g;a.trigger("a:sheet:ajaxContentLoaded:amazonday-modal-day-picker",e)}))});return{getData:function(){return p}}});"use strict";r.when("A","amazonDayLogger","amazonDayLoggerConfig","page-detector").register("amazonday-modal-sustainability",function(a,h,f,w){function e(a){h.logMetric(g.SUSTAINABILITY_MORE_DETAILS_CLICK.concat("-",l),1)}var p=a.$,p=w.isTablet()||
p(".checkout-sosp-tablet").length,g=f.AMAZONDAY.COUNTER_METRICS;f=f.AMAZONDAY.DEVICE_TYPES;var l=w.isMobile()?f.MOBILE:p?f.TABLET:f.DESKTOP;a.on("a:sheet:beforeShow:sustainability-messaging",e);a.on("a:popover:beforeShow:sustainability-messaging",e)});"use strict";r.register("amazonDayLoggerConfig",function(){return{AMAZONDAY:{DEVICE_TYPES:{MOBILE:"mobile",DESKTOP:"desktop",TABLET:"tablet"},LATENCY_SCOPES:{POPOVER_LOAD:"amazonDay-popoverLoad",BOTTOM_SHEET_LOAD:"amazonDay-bottomSheetLoad",SET_SAVE_PREFERENCE:"amazonDay-save",
SET_TRIAL_PREFERENCE:"amazonDay-trial",SET_MULTI_PREFERENCES:"amazonDay-set-multi-preferences",SET_RECOMMENDED_PREFERENCE:"amazonDay-set-recommended-preference",REMOVE_PREFERENCE:"amazonDay-remove-preference",SET_SAVE_PREFERENCE_AJAX:"amazonDay-save-ajax",SET_TRIAL_PREFERENCE_AJAX:"amazonDay-trial-ajax",SET_TRIAL_SCOPE:"amazonDay-selectDay",SET_SAVE_SCOPE:"amazonDay-savePref",AJAX_PAGE_UPDATE_SCOPE:"amazonDay-savePref-ajaxPageUpdate",AJAX_CALL_SCOPE:"amazonDay-savePref-ajaxCall"},LATENCY_METRICS:{TIME_CLICK:"tc",
BODY_BEGIN:"bb",BODY_END:"be",CRITICAL_FEATURE:"cf",LOAD_FINISH:"ld"},AMAZONDAY_SHIP_OPTION_DEFAULTING_METRICS:{SET_AMAZONDAY_DEFAULT_SHIP_OPTION:"setAmazonDayDefaultShipOptionByDayPicker",UNSET_AMAZONDAY_DEFAULT_SHIP_OPTION:"unsetAmazonDayDefaultShipOptionByDayPicker",AMAZONDAY_SHIP_OPTION_DEFAULTING_DETAIL_LINK_ON_DAY_PICKER:"amazonDayShipOptionDefaultingDetailLinkOnDayPicker"},COUNTER_METRICS:{DAY_BUTTON_CLICK:"dayButtonClick",SAVE_AND_CONTINUE_CLICK:"saveAndContinueClick",SHOW_MULTIPLE_AMAZONDAY_DAY_PICKER_VIEW:"showMultipleAmazonDayDayPickerView",
NON_AD_CUSTOMER:"amazonDay-nonADCustomer",AD_CUSTOMER:"amazonDay-ADCustomer",SET_SAVE_PREFERENCE_AJAX_FAILURE:"amazonDay-save-ajax-failure",SET_SAVE_PREFERENCE_AJAX_FAILURE_GURUPA_FLOW:"amazonDay-save-ajax-failure-Gurupa-Flow",AD_PROFILE_SETTER_CALL:"amazonDay-profile-setter",SETTER_FALLBACK:"setter-fallback",SAVE_PREFERENCE_ENABLED_FEATURE_INCONSISTENCY:"save-preference-enabled-feature-inconsistency",ORIGINAL_LINE_ITEM_ID_NULL_FROM_WEBAPP:"original-line-item-id-null-from-webapp",SUSTAINABILITY_MORE_DETAILS_CLICK:"amazonDay-sustainability-learn-more"}}}});
"use strict";r.when("amazonDayLoggerConfig").register("amazonDayLogger",function(a){var h,f;return{logMetric:function(a,e){var f;"undefined"!==typeof l.ue&&"undefined"!==typeof a&&"undefined"!==typeof l.ue.count&&(f=l.ue.count(a)||0,l.ue.count(a,f+(e||1)))},logException:function(a,e){"undefined"!==typeof l.ueLogError&&l.ueLogError(a,e)},logLatencyMetric:function(f,e,h){"function"===typeof l.uet&&(f=f+"-"+h,a.AMAZONDAY.LATENCY_METRICS.LOAD_FINISH===e?l.uex(e,f,{wb:1}):l.uet(e,f,{wb:1}))},getScopeNameWithCount:function(a){l.ue&&
h!==l.ue.id&&(h=l.ue.id,f={});var e=f[a]||"";f[a]=(f[a]||0)+1;return a+e}}});"use strict";r.when("A").register("amazonday-feature",function(a){function h(){var e={},f=document.getElementById("amazonday-feature-indicator-container");f&&(f=f.getAttribute("enabled-features"))&&a.each(f.split(" "),function(a){e[a]=!0});return e}function f(){var e=h(),f=a.diff(e,l);a.each(f,function(f,h){a.trigger("amazonday:feature:"+h,e[h])});l=e}var l={},l=h();a.on("checkout:reload:spc",f);a.on("checkout:reload:shipoptionselect",
f);return{isFeatureEnabled:function(a){return!!l[a]},notifyFeatureChanges:f}});"use strict";r.when("A").register("amazonday-string",function(a){var h=a.$;return{getString:function(a,l){return(a=h("#amazonday-string-container").data(a))?a:l}}})});