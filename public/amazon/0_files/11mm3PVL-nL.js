(function(l){var f=window.AmazonUIPageJS||window.P,m=f._namespace||f.attributeErrors,c=m?m("CheckoutCartPrefetchAsset",""):f;c.guardFatal?c.guardFatal(l)(c,window):c.execute(function(){l(c,window)})})(function(l,f,m){l.when("A","CartServerSetting","CartCheckoutPrefetch-DeviceAgnosticFunctions").register("CartCheckoutPrefetchDesktop",function(c,m,k){function n(){return"/gp/buy/prefetch/store-html.html"}function h(){var a=(new Date).getTime(),d="/gp/cart/checkout-prefetch.html?cartInitiateId\x3d"+a,
b=k.getBuyBoxParameters(t),g;for(g in b)b.hasOwnProperty(g)&&(d+="\x26"+g+"\x3d"+encodeURIComponent(b[g]));k.streamJSONPrefetchRequest(d,"PreInitiate:",k.executionIdSuccessHandler);k.insertValueInBuyBox("cartInitiateId",a)}function p(e){function d(){5>a&&(k.fireAndForgetPrefetchRequest(e,"StoreHtml:"),a++,q=setTimeout(d,6E4))}r(f).ready(function(){q=setTimeout(d,6E4)})}var r=c.$,t=["partialCheckoutCart"],q,a=0;l.when("total-purchase-cost-prefetch-listeners").register("setupCartCheckoutPrefetch",function(){var a=
!1,d=!1;c.on("sc:checkout-prefetch:start",function(){a=!0});c.on("sc:checkout-prefetch:complete",function(){a=!1;d&&r("#sc-buy-box form").submit()});r(document).delegate("#sc-buy-box form","submit",function(b){return a?(d=!0,b.preventDefault(),!1):!0});h();p(n());c.declarative("sc-buy-box-gift-checkbox-update","click",function(a){!1===a.$target[0].checked&&h()});c.on("sc:checkout-prefetch",function(){clearTimeout(q);h();p(n())});c.on("affordability:clipCoupon:success",function(){m.features.enableCheckoutPrefetchForCouponClipping&&
h()})})});"use strict";l.when("A","CartServerSetting").register("CartCheckoutPrefetch-DeviceAgnosticFunctions",function(c,l){function k(a){c.trigger("sc:checkout-prefetch:start",{prefetchPromise:a})}function n(a){c.trigger("sc:checkout-prefetch:complete",a)}function h(a,e){"undefined"!==typeof f.ue&&"undefined"!==typeof f.ue.count&&f.ue.count(a,e||1)}function p(){var a=document.getElementById("sc-buy-box");if(a&&(a=a.getElementsByTagName("form"),0!==a.length))return a[0]}function r(a,e){var d=p();
if(d){for(var b=d.getElementsByTagName("input"),g=0;g<b.length;g++)b[g].name===a&&d.removeChild(b[g]);b=document.createElement("input");b.setAttribute("type","hidden");b.setAttribute("value",e);b.setAttribute("name",a);d.appendChild(b)}}function t(a,e,d){a=fetch(a,{headers:{"x-amzn-tiertwo":"yes"}}).then(function(a){var b=a.body.pipeThrough(new TextDecoderStream).getReader(),c="";return b.read().then(function u(a){if(a.done){if(""===c.trim())return h(e+"prefetch_ajax_streaming_nodata",1),null;throw Error("Could not read JSON data from prefetch endpoint");
}c+=a.value;try{var g=JSON.parse(c)}catch(v){return b.read().then(u)}d&&d(g);h(e+"prefetch_ajax_streaming_success",1);return g})}).catch(function(a){var b={message:"streamJSONUsingFetch failed"};f.ueLogError&&(b=b||{},b.logLevel=b.logLevel||"ERROR",b.attribution=b.attribution||"CheckoutCartPrefetchAsset: Website \x3e Amazon Checkout Pipeline \x3e Others",b.message=b.message||"",f.ueLogError(a,b));h(e+"prefetch_ajax_streaming_error",1);return null}).then(function(a){n(a);return a});k(a);return a}function q(a,
e,d){a=c.$.ajax(a.toString(),{headers:{"x-amzn-tiertwo":"yes"},success:function(a,c,f){d&&d(a);h(e+"prefetch_ajax_jquery_success",1);n(a);return a},error:function(){h(e+"prefetch_ajax_jquery_error",1);n();return null}});k(a)}return{streamJSONPrefetchRequest:function(a,c,d){if(f.fetch&&f.TextDecoderStream)return t(a,c,d);q(a,c,d)},fireAndForgetPrefetchRequest:function(a,c){q(a,c,m)},executionIdSuccessHandler:function(a){a&&a.executionHandle&&a.executionHandle.executionId&&r("preInitiateExecutionId",
a.executionHandle.executionId)},getBuyBoxForm:p,insertValueInBuyBox:r,getBuyBoxParameters:function(a){if(!p())return[];for(var e=c.$("#sc-buy-box input").serializeArray(),d={},b=0;b<e.length;b++)-1!==a.indexOf(e[b].name)&&(d[e[b].name]=e[b].value);return d}}})});