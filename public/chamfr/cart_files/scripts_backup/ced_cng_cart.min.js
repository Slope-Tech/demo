jQuery(document).ready(function(a){function e(e){jQuery.ajax({url:global_var.ajaxurl,data:{action:"get_oreder_products",order_id:e,ajax_nonce:global_var.ajax_nonce},type:"post",success:function(t){try{var d=(t=jQuery.parseJSON(t)).prodcuts,o=c(d,"order",e);a(document.body).prepend(o)}catch(a){console.log(a)}}})}a(".ced_my_account_reorder, .ced_my_account_place_same_order").each(function(){a(this).attr("data-order_id",a(this).attr("href").split("http://")[1]),a(this).attr("href","javascript:void(0);")}),a(".ced_my_account_reorder").on("click",function(){a(this).css("opacity","0.5"),function(a){jQuery.ajax({url:global_var.ajaxurl,data:{action:"get_order_cart",nonce_check:global_var.ajax_nonce,order_id:a},type:"post",success:function(a){window.location=global_var.cart_url}})}(a(this).data("order_id"))}),a(document).on("click",".ced_my_account_place_same_order",function(){var c=a(this),t=c.data("order_id");c.css("opacity","0.5"),e(t)}),a(document).on("click",".ced_cng_placeorder",function(){var c=a(this),t=c.data("id");c.css("opacity","0.5"),e(t)});var c=function(a,e,c){""==e&&(e="order");var t="",d=Object.keys(a).length,o="";if((jQuery.isEmptyObject(a)||d<3)&&(t="ced_cng_no_content"),o='<div id="ced_cng_prodcts_exclude" class="ced_cng_popup-wrapper">',o+='<div class="ced_cng_popup-overlay">',o+='<div class="ced_cng_popup-container '+t+'">',o+='<div class="ced_cng_popup-heading">',o+="order"!=e||"basket"==e?"<h1><strong>"+global_var.exc_basket_item_head+"</strong></h1>":"<h1><strong>"+global_var.exclude_products_head+"</strong></h1>",o+='<a class="ced_cng_close ced_cng_close_wrapper">&times;</a>',o+="</div>",jQuery.isEmptyObject(a))o+='<img src="'+global_var.plugi_dir_url+'assets/images/not-found.png">';else{for(var n in o+='<div class="ced_cng_popup-content">',o+='<div class="ced_cng_tbl_header">',o+='<div class="ced_cng_product_info">',o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.exclude+"</span>",o+="</div>",o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.image+"</span>",o+="</div>",o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.product_name+"</span>",o+="</div>",o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.stock+"</span>",o+="</div>",o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.quantity+"</span>",o+="</div>",o+="</div>",o+="</div>",o+='<div class="ced_cng_popup-content ced_cng_tbl_body">',a)if(a.hasOwnProperty(n)){var i=a[n].title;variation_id=a[n].variation_id,availablity=a[n].availability,image=a[n].image,qty=a[n].qty,stock="out_of_stock"==a[n].stock?"Out of stock":"In stock",stockClass="out_of_stock"==a[n].stock?"ced_cng_txt_red":"ced_cng_txt_green",excluded="out_of_stock"==a[n].stock?"checked readonly":"",exclude_dsc="out_of_stock"==a[n].stock?global_var.out_of_stock_desc:global_var.exclude_desc,permalink=a[n].permalink,item_id=(a[n].item_id,a[n].item_id),"not_exist"!=availablity&&("available"==availablity?(o+='<div class="ced_cng_product_info ced_cng_product-'+item_id+'">',o+='<div class="ced_cng_popup-column">',o+='<input class="ced_cng_exclude_item" type="checkbox" value="'+item_id+'" '+excluded+' title="'+exclude_dsc+'" data-variation_id ="'+variation_id+'" >',o+="</div>",o+='<div class="ced_cng_popup-column"><img src="'+image+'">',o+="</div>",o+='<div class="ced_cng_popup-column">',o+='<a href="'+permalink+'" target="_blank">'+i+"</a>","variable"==a[n].type&&(o+=a[n].attributes),o+="</div>",o+='<div class="ced_cng_popup-column"><span class="'+stockClass+'">'+stock+"</span></div>",o+='<div class="ced_cng_popup-column">',o+='<input step="1" min="1" max="" value="'+qty+'" data-id="'+item_id+"_"+variation_id+'" onkeydown="return false" class="ced_cng_qty" size="4" pattern="[0-9]*" inputmode="numeric" type="number" data-variation_id ="'+variation_id+'">',o+="</div>",o+="</div>"):(excluded="checked disabled",o+='<div class="ced_cng_product_info ced_cng_product-'+item_id+'">',o+='<div class="ced_cng_popup-column">',o+='<input class="ced_cng_exclude_item" type="checkbox" value="'+item_id+'" '+excluded+' title="'+exclude_dsc+'">',o+="</div>",o+='<div class="ced_cng_popup-column"><a href="'+permalink+'" class="ced_cng_strikethrough" target="_blank">'+i+"</a></div>",o+='<div class="ced_cng_popup-column"><span class="'+stockClass+'">'+stock+"</span></div>",o+='<div class="ced_cng_popup-column">',o+='<input step="1" min="1" max="" value="'+qty+'" data-id="'+item_id+'" onkeydown="return false" class="ced_cng_qty" size="4" pattern="[0-9]*" inputmode="numeric" type="number">',o+="</div>",o+="</div>"),d++)}d<=0&&(o+='<div class="ced_cng_product_info ced_cng_product-'+item_id+'">',o+='<div class="ced_cng_popup-no-product">',o+=global_var.product_not_exist,o+="</div>",o+="</div>"),o+="</div>",o+="</div>",o+='<div class="ced_cng_popup-buttons">',d>0&&(o+=""!=c&&"undefined"!=c&&"order"==e?'<a id="ced_cng_popup-submit-btn" class="ced_cng_popup-btn" data-order_id="'+c+'"><span>'+global_var.submit+"</span></a>":'<a id="ced_cng_popup_atc" class="ced_cng_popup-btn"><span>'+global_var.atc+"</span></a>"),o+="</div>"}return o+="</div>",o+="</div>",o+="</div>"};function t(e,c,t,d){""==c&&(c="add_to_cart"),""==t&&(c="order");var o=[],n={};if(e.is('[disabled="disabled"]'))return!1;a(document).find(".ced_cng_exclude_item").each(function(){a(this).is(":checked")&&o.push(a(this).val()+"_"+a(this).data("variation_id"))}),a(document).find(".ced_cng_qty").each(function(){n[a(this).data("id")]=a(this).val()}),e.css("opacity","0.5"),e.attr("disabled","disabled"),"order"==t?"add_to_cart"!=c&&function(e,c,t){a.ajax({url:global_var.ajaxurl,data:{action:"get_same_order_cart",ajax_nonce:global_var.ajax_nonce,order_id:e,excluded_products:c,quantities:t},type:"post",success:function(a){try{(a=jQuery.parseJSON(a)).success?window.location=global_var.checkouturl:console.log(a)}catch(a){console.log(a)}}})}(d,o,n):"add_to_cart"==c&&function(e,c){a.ajax({url:global_var.ajaxurl,data:{action:"ced_ocor_add_basket_items_to_cart",ajax_nonce:global_var.ajax_nonce,excluded_items:e,quantities:c},type:"post",success:function(a){try{a.success?window.location=global_var.cart_url:console.log(a.data)}catch(a){console.log(a)}}})}(o,n)}a(document).on("click","#ced_cng_popup-submit-btn",function(){var e=a(this),c=e.data("order_id");t(e,"checkout","order",c)}),a(document).on("click",".ced_cng_close_wrapper",function(){a(this).parents("#ced_cng_prodcts_exclude").remove(),a(document).find(".ced_ocor_floating_basket_wrapper").hasClass("disabled")&&a(document).find(".ced_ocor_floating_basket_wrapper").removeClass("disabled")}),a(".variation_id").length>0&&a(document).on("change",".variation_id",function(){var e=a(this);""!=e.val()&&void 0!==e.val()?a(document).find('a[ data-variation_id="'+e.val()+'"]').length>0?(a(document).find(".ced_ocor_rfb").addClass("ced_cng_hide"),a(document).find('a[ data-variation_id="'+e.val()+'"]').removeClass("ced_cng_hide")):(a(document).find(".ced_ocor_rfb").addClass("ced_cng_hide"),a(document).find(".ced_ocor_atb").removeClass("ced_cng_hide")):(a(document).find(".ced_ocor_rfb").addClass("ced_cng_hide"),a(document).find(".ced_ocor_atb").addClass("ced_cng_hide"))}),a(document).on("click",".ced_ocor_atb",function(e){var c=a(this),t=c.data("id"),d=c.data("user_id"),o=c.data("type"),n=a('input[name="quantity"]').length>0&&"undefined"!=a('input[name="quantity"]').val()&&a('input[name="quantity"]').val()>0?a('input[name="quantity"]').val():1,i=c.data("variation_id");if(""==t||void 0===t||""==d||void 0===d)return!1;if("variable"==o){if(c.hasClass("ced_cng_hide"))return!1;if(void 0===(i=a(".variation_id").val())||""==i)return!1}c.addClass("loading"),a.ajax({url:global_var.ajaxurl,type:"POST",data:{action:"ced_ocor_add_to_basket",item_id:t,user_id:d,type:o,qty:n,variation_id:i,ajax_nonce:global_var.ajax_nonce},success:function(e){try{if(c.removeClass("loading"),e.success){a(document).find(".ced_ocor_floating_basket_wrapper").addClass("rubberBand animated"),setTimeout(function(){a(document).find(".ced_ocor_floating_basket_wrapper").removeClass("rubberBand animated")},1e3);var n=a(document).find(".ced_ocor_basket_item_count").data("total");if(n=parseInt(n),n+=1,a(document).find(".ced_ocor_basket_item_count").data("total",n).html(n),"variable"!=o){var i='<a rel="nofollow" class="ced_ocor_rfb button" id="ced_ocor_rfb_btn_'+t+'" href="javascript:void(0);" data-id="'+t+'" data-user_id="'+d+'" title="'+global_var.rfbBtnText+'">'+global_var.rfbBtnText+"</a>";c.parent("p.ced_ocor_basket").html(i)}else window.location=""}else window.location=""}catch(a){console.log(a)}}})}),a(document).on("click",".ced_ocor_rfb",function(e){var c=a(this),t=c.data("id"),d=c.data("user_id"),o="undefined"!=c.data("type")?c.data("type"):"",n="";return""!=t&&void 0!==t&&""!=d&&void 0!==d&&(("variable"!=o||void 0!==(n=a(".variation_id").val())&&""!=n)&&(c.addClass("loading"),void a.ajax({url:global_var.ajaxurl,type:"POST",data:{action:"ced_ocor_remove_from_basket",item_id:t,user_id:d,type:o,variation_id:n,ajax_nonce:global_var.ajax_nonce},success:function(e){try{if(c.removeClass("loading"),e.success){a(document).find(".ced_ocor_floating_basket_wrapper").addClass("rubberBand animated"),setTimeout(function(){a(document).find(".ced_ocor_floating_basket_wrapper").removeClass("rubberBand animated")},1e3);var n=a(document).find(".ced_ocor_basket_item_count").data("total");if(n=parseInt(n),n-=1,"variable"!=o){var i='<a rel="nofollow" class="ced_ocor_atb button" id="ced_ocor_atb_btn_'+t+'" href="javascript:void(0);" data-id="'+t+'" data-user_id="'+d+'" title="'+global_var.atbBtnText+'">'+global_var.atbBtnText+"</a>";a(document).find(".ced_ocor_basket_item_count").data("total",n).html(n),c.parent("p.ced_ocor_basket").html(i)}else window.location=""}else{var _='<span class="ced_ocor_atb_error">'+e.data+"</span>";c.parent("p.ced_ocor_basket").append(_)}}catch(a){console.log(a)}}})))}),a(".ced_ocor_floating_basket_wrapper").draggable({containment:"window"}),a(document).on("click",".ced_ocor_floating_basket_wrapper",function(){var e=a(this);e.find("ced_ocor_basket_item_count").data("total");if(e.hasClass("disabled"))return!1;e.addClass("disabled"),a.ajax({url:global_var.ajaxurl,data:{action:"ced_ocor_get_basket_items",ajax_nonce:global_var.ajax_nonce},type:"post",success:function(e){try{if(e.success){var t=e.data;popup=c(t,"basket"),a(document.body).prepend(popup)}else window.location=""}catch(a){console.log(a)}}})}),a(document).on("click","#ced_cng_popup_atc",function(){var e=a(this);if(e.hasClass("disabled"))return!1;e.addClass("disabled"),t(e,"add_to_cart","basket")})});