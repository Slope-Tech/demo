"use strict";(self.heliuxModules=self.heliuxModules||[]).push([[2391],{50432:(t,e,i)=>{i.d(e,{q:()=>d});var r=i(54705),a=i(63319),n=i(36606);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){(0,r.A)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}class u extends a.J{constructor(t={}){super(o(o({},t),{},{storeName:"marketplace"}))}get name(){return"MarketplaceFetchApi"}async getProductVariants(t){let e;this.logger.log("Getting variants list for: ",t);try{e=await this.get(`/products/variants/${t}`)||[]}catch(t){return this.logger.log(t),[]}return e}async getDistributorsWithProductInStock(t,e){let i;this.logger.log("Getting distributors list for: ",e);try{i=await this.get(`/products/distributor/spu/${t}/sku/${e}`)||[]}catch(t){return this.logger.log(t),[]}return i}async getDeliveryOptions(t){this.logger.log("Getting delivery options for: ",t);const e=t.map((t=>`storeCodeList=${t}`)).join("&");return this.get(`/delivery/getOptionList?${e}`)}async getDistributorsAndDeliveryOptions(t,e){let i,r=await this.getDistributorsWithProductInStock(t,e);try{i=await this.getDeliveryOptions(r.map((({store:t})=>t.code)))||[]}catch(t){this.logger.log(t),i=[]}return r=r.map((t=>o(o({},t),{},{delivery:(i.find((e=>e.storeCode===t.store.code))||{}).deliveryOptionDTOList}))),r}_compareItems(t,e){return t.itemId===e.product.id&&t.storeCode===e.storeCode&&Number(t.price)===Number(e.product.customerPrice)}async getCartItem(t){return(await this.getCart()).items.find((e=>this._compareItems(t,e)))}async quantityInCartFor(t){const e=await this.getCartItem(t);return e?e.quantity:0}}const d=()=>(0,n.R)({MarketplaceFetchApi:u})},1106:(t,e,i)=>{i.d(e,{u:()=>c});var r=i(54705),a=i(58480),n=i(30082),s=i(37252);const o={selectors:{maxOrderQuantityWarningLabel:".addtocart__maxOrderQuantityWarningLabel",maxOrderQuantityLabel:".addtocart__maxOrderQuantityLabel",maxQuantityWarningLabel:".addtocart__maxQuantityWarningLabel",maxQuantityLabel:".addtocart__maxQuantityLabel",counterWrapper:".addtocart__counterWrapper",plusButton:".addtocart__plus",minusButton:".addtocart__minus",quantityInput:".addtocart__quantity",addToCartButton:".calltoaction__link",addToCartButtonIcon:".calltoaction__link .calltoaction__icon",addToCartButtonText:".calltoaction__text",errorHint:".addtocart__errorHint"},classes:{hidden:"isHidden",addToCartButtonText:"calltoaction__text"},publishes:{cartOpenAnalyticsEvent:"ecommerce:cart:cartOpen",cartAddAnalyticsEvent:"ecommerce:cart:cartAdd",raqnCartHasUpdated:"raqn:cart:hasUpdated"},maxOrderQtyPlaceholder:"{max}"};function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){(0,r.A)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}class c extends a.ComponentBase{init(){this.config=d(d({},o),this.config),this.logger=new s.V("AddToCartBase"),this.api=this.getApi(),this.cart=this.getLocalCart(),this.getElements(),this.listeners(),this.checkPriceStatus((()=>{this.initQuantity(),this.checkIfCartIsOpen(),this.prepareMaxOrderQtyLabel()}))}set quantity(t){this.quantityInput.value=t}get quantity(){return parseInt(this.quantityInput.value,10)}get maxOrderQtyDefined(){const{maxOrderQty:t}=this.config;return t||0===t}get maxQuantityDefined(){const{saleableQty:t}=this.config;return t||0===t||this.maxOrderQtyDefined}get minimumQuantity(){const{minimumQuantity:t}=this.config;return t||this.multipleOrderQuantity}get multipleOrderQuantity(){const{multipleOrderQuantity:t}=this.config;return t||1}checkPriceStatus(t){t()}getApi(){throw new Error("Abstract")}getLocalCart(){throw new Error("Abstract")}prepareMaxOrderQtyLabel(){const{maxOrderQty:t,maxOrderQtyPlaceholder:e}=this.config;[this.maxOrderQuantityWarningLabel,this.maxOrderQuantityLabel].forEach((i=>{i&&this.maxOrderQtyDefined&&(i.textContent=(i.textContent||"").replace(e,t))}))}initQuantity(){this.quantityInput&&(this.productMaxQuantityReached=!1,this.itemQuantityInCart=0,this.quantity=this.minimumQuantity,this.maxQuantityDefined&&this.getItemQuantityInCart(),this.publishQuantity())}resetQuantity(){this.quantity=1,this.maxQuantityDefined&&this.getItemQuantityInCart()}async getItemQuantityInCart(){let t;t=this.api.isUserLoggedIn()?this.api.quantityInCartFor(this.itemParams):this.cart.quantityInCartFor(this.itemParams),t.then((t=>{this.itemQuantityInCart=t,this.checkQuantity()}))}async checkIfCartIsOpen(){let t=0;t=this.api.isUserLoggedIn()?await this.api.getCartQuantity():await this.cart.quantity(),this.productAlreadyInCart=!!t}listeners(){this.plusButton&&this.minusButton&&(this.plusButton.addEventListener("click",this.increment.bind(this)),this.minusButton.addEventListener("click",this.decrement.bind(this))),this.quantityInput&&this.quantityInput.addEventListener("change",this.checkQuantity.bind(this)),this.addToCartButton&&this.addToCartButton.addEventListener("click",this.addToCart.bind(this))}disableButtons({plus:t,minus:e,addToCart:i}={plus:!0,minus:!0,addToCart:!0}){this.addToCartButton&&(this.addToCartButton.disabled=i),this.minusButton&&(this.minusButton.disabled=e),this.plusButton&&(this.plusButton.disabled=t),this.quantityInput&&t&&e&&(this.quantityInput.disabled=!0)}async checkQuantity(){let t=this.quantity,e=!1,i=!1,r=!1;if(this.quantity<this.minimumQuantity&&(t=this.minimumQuantity,e=!0),this.maxQuantityDefined){const{saleableQty:a,maxOrderQty:n}=this.config,s=t=>Number(t||0===t?t:1/0),o=[s(n),s(a)],u=Math.min(...o)-this.itemQuantityInCart;this.quantity>u&&(t=Math.max(1,u)),r=!!(u<1),i=!!(this.quantity+this.multipleOrderQuantity>u),e=!!(t<=this.minimumQuantity)}this.quantity=t,this.productMaxQuantityReached=r,this.disableButtons({plus:i,minus:e,addToCart:r}),this.toggleQuantityLabels({addToCartDisabled:r,plusDisabled:i})}toggleQuantityLabels({addToCartDisabled:t,plusDisabled:e}){const{classes:i}=this.config;var r,a,n,s,o,u,d,c,l,h,p,y,m,b,g,O;!t&&e?this.maxOrderQtyDefined?null===(r=this.maxOrderQuantityWarningLabel)||void 0===r||null===(a=r.classList)||void 0===a||a.remove(i.hidden):null===(n=this.maxQuantityWarningLabel)||void 0===n||null===(s=n.classList)||void 0===s||s.remove(i.hidden):(null===(o=this.maxOrderQuantityWarningLabel)||void 0===o||null===(u=o.classList)||void 0===u||u.add(i.hidden),null===(d=this.maxQuantityWarningLabel)||void 0===d||null===(c=d.classList)||void 0===c||c.add(i.hidden)),t?this.maxOrderQtyDefined?null===(l=this.maxOrderQuantityLabel)||void 0===l||null===(h=l.classList)||void 0===h||h.remove(i.hidden):null===(p=this.maxQuantityLabel)||void 0===p||null===(y=p.classList)||void 0===y||y.remove(i.hidden):(null===(m=this.maxQuantityLabel)||void 0===m||null===(b=m.classList)||void 0===b||b.add(i.hidden),null===(g=this.maxOrderQuantityLabel)||void 0===g||null===(O=g.classList)||void 0===O||O.add(i.hidden)),this.publishQuantity()}publishQuantity(){(0,a.publish)("addtocart::quantitychanged",{params:this.itemParams,quantity:this.quantity})}increment(){this.quantity+=this.multipleOrderQuantity,this.checkQuantity()}decrement(){this.quantity-=this.multipleOrderQuantity,this.checkQuantity()}get itemParams(){throw new Error("Abstract")}get apiCallParams(){throw new Error("Abstract")}addToCart(t){if(!t.isTrusted)return;if(t.stopImmediatePropagation(),!this.quantity)return;let e;this.addToCartButton.disabled=!0,e=this.api.isUserLoggedIn()?this.api.addToCart(this.apiCallParams):this.cart.add(this.itemParams),e.then((()=>{this.publishTrackingEvents(),this.resetQuantity(),this.updateCartIconValues(),this.productAlreadyInCart=!0,this.addToCartButton.dispatchEvent(new Event("click")),(0,a.publish)("addtocart::itemadded")})).catch((t=>{this.errorNotification(t)})).finally((()=>{this.productMaxQuantityReached||(this.addToCartButton.disabled=!1)}))}errorNotification(t){this.logger.error("Error while adding to cart",t),(0,n.rG)({title:"cart.add_to_cart_error-title",description:"cart.add_to_cart_error-description",forceRender:!0})}get trackingData(){return this.itemParams}publishTrackingEvents(){const{trackingEnabled:t}=this.config;if(t){const{publishes:t}=this.config;this.productAlreadyInCart||(0,a.publish)(t.cartOpenAnalyticsEvent,this.trackingData),(0,a.publish)(t.cartAddAnalyticsEvent,this.trackingData)}}async updateCartIconValues(){const{publishes:t}=this.config;(0,a.publish)(t.raqnCartHasUpdated,{},{usePostMessage:!0})}}},44598:(t,e,i)=>{i.d(e,{r:()=>c});var r=i(54705),a=i(58480),n=i(37252),s=i(16095);const o={selectors:{skeleton:".sellerbox__skeleton",template:".sellerbox__template"},tplSourcesAndTargets:[{renderTplSource:t=>t.querySelector(".sellerbox__template"),renderTplTarget:t=>t.querySelector(".sellerbox__distributors"),noDataHideContainer:t=>t.parentElement,hideNoDataHideContainer:!0,renderTplPosition:"beforeend"}],showNoDataMsg:!1,selectedEndpointName:"sellerBoxDistributors",skipInitialRender:!1,dataSourceEndpoints:[{name:"sellerBoxDistributors",mapDataConfig:{placeholdersNameSpace:"distributor",mapDataMethodName:"mapDistributorData"}}],dataRequestSubscriptions:{renderDataRequestedBySellerBox:"renderData::requested::by::SellerBox"},publishes:{productView:"ecommerce:sellerBox:prodView"},subscribes:{adobeAnalyticsTrackingEventsReady:"AdobeAnalytics:events:ready"}};function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){(0,r.A)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}class c extends s.y{init(){this.logger=new n.V("SellerBoxRender"),this.config=d(d({},o),this.config),this.getElements(),this.api=this.getAPI(),this.sellerNumberIndex=0,this.template&&super.init()}getAPI(){throw new Error("Abstract")}mapDistributorData(){throw new Error("Abstract")}setApiDataItemMappers(){return{mapDistributorData:this.mapDistributorData.bind(this)}}publishTracking(t=[]){const{trackingEnabled:e}=this.config;if(e){const[e]=t,{publishes:i,baseProductName:r,brand:n,productCategory:s,size:o,subscribes:u,productId:d,sku:c}=this.config,l={distributor:e,productId:d,baseProductName:r,brand:n,size:o,productCategory:s,sku:c},h=()=>{(0,a.publish)(i.productView,l),(0,a.unsubscribe)(u.adobeAnalyticsTrackingEventsReady,h)};(0,a.subscribe)(u.adobeAnalyticsTrackingEventsReady,(()=>h())),(0,a.publish)(i.productView,l)}}extendConfig(){return d(d(d({},super.extendConfig()),o),{},{componentCustomError:!!this.config.fallbackExperienceFragment})}removeSkeleton(){this.skeleton&&this.skeleton.remove()}}}}]);