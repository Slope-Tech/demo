"use strict";(self.heliuxModules=self.heliuxModules||[]).push([[237],{74549:(t,i,e)=>{var s=e(54705),o=e(58480),n=e(37376),c=e(76883),a=e(93124);function r(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,s)}return e}function l(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?r(Object(e),!0).forEach((function(i){(0,s.A)(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}class h extends o.ComponentBase{init(){this.config=l(l({},a.v),this.config),this.messages={},this.getElements(),(0,o.subscribe)(this.config.subscriptions.message,(t=>{this.addNotification(t)})),(0,o.subscribe)(this.config.subscriptions.close,(t=>this.removeNotification(t))),document.addEventListener(this.config.subscriptions.message,(t=>{this.addNotification(t.detail)})),this.initCloseBtn(),(0,o.publish)(this.config.publishes.notificationsLoaded)}initCloseBtn(){this.el.addEventListener("click",(0,n.F)([this.config.elements.close],(({currentDelegatedTarget:t})=>{const i=t.closest(this.config.elements.message);this.closeNotification(i)})))}async addNotification(t){const i=this.getID(t.id),e=t.forceRender,s=await this.translateMessage(t,e);if(!s)return void(this.messages[i]=null);this.showNotificationBase();const o=this.createNotificationElem(l(l({},t),s),i);this.content.append(o),this.messages[i]={msgElem:o};const n=this.isAutoHide(t);this.autoHideNotification(o,n)}async translateMessage({title:t,description:i},e){const s=await c.d.item(t),o=await c.d.item(i);return!e&&s.missing&&o.missing?null:{title:await c.d.label(t),description:await c.d.label(i)}}removeNotification(t){const i=this.getID(t),e=this.messages[i];e&&(this.closeNotification(e.msgElem),delete this.messages[i])}getID(t){return`notification_message_${t||Object.keys(this.messages).length}`}isAutoHide(t){const{autoHide:i}=t;return{isAutoHide:"boolean"==typeof i?i:this.config.autoHide,autoHideTime:t.autoHideTime||this.config.timers.hide}}createNotificationElem(t,i){const e=document.createElement("div");e.setAttribute("role","alert"),e.id=i,e.classList.add(this.config.classes.message,this.config.modifiers[t.type]||this.config.modifiers.info,...t.classes||[]),e.innerHTML=`${this.tplElement.innerHTML}`;const s=this.template(t);return e.append(s),e}template(t){const i=document.createElement("div");return i.classList.add(this.config.classes.notifications),Object.keys(this.config.messageProps).forEach((e=>{const s=document.createElement(this.config.messageProps[e]);s.classList.add(this.config.classes[e]),s.textContent=t[e],i.append(s)})),i}autoHideNotification(t,{isAutoHide:i,autoHideTime:e}){i&&setTimeout((()=>{this.closeNotification(t)}),e||this.config.timers.hide)}closeNotification(t){if(!t)return;const{content:i}=this;t.classList.add(this.config.modifiers.hide),setTimeout((()=>{i.children.length<=1&&this.hideNotificationsBase(),i.contains(t)&&i.removeChild(t)}),this.config.timers.animationDelay)}showNotificationBase(){const{show:t}=this.config.modifiers;this.el.classList.add(t)}hideNotificationsBase(){const{show:t}=this.config.modifiers;this.el.classList.remove(t)}}(0,o.register)({Notifications:h},1)}},t=>{t.O(0,[750,7694],(()=>(74549,t(t.s=74549)))),t.O()}]);