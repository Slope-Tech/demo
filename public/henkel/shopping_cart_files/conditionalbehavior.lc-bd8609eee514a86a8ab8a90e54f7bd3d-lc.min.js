"use strict";(self.heliuxModules=self.heliuxModules||[]).push([[9099],{16008:(t,e,i)=>{var s=i(54705),n=i(58480);var o=i(47533),r=i(37252);const a={conditions:[],extension:".content.html",params:["wcmmode=disabled"],classes:{hide:"visibility--isHidden-important",disable:"section--disabled",content:"section__content",paywall:"paywall"},attributes:{tabindex:"-1","aria-hidden":"true"},templates:{modal:(t,e)=>`\n    <style type="text/css">\n        #modal${e} {\n          --modal-grid-area-start: 5;\n          --modal-grid-area-size: 4;\n        }\n    </style>\n    <div class="modal__base"\n      id="modal${e}"\n      data-components="Modal">\n      <div class="modal__overlay"></div>\n      <div class="modal__container"\n        role="dialog"\n        aria-labelledby="modal dialog"\n        aria-modal="true">\n          <div class="modal__content">\n          ${t}\n          </div>\n      </div>\n    </div>`},behaviors:{show:"show",hide:"hide",showContentsNoXF:"showContentsNoXF",popup:"popup"}};var h=i(84297);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){(0,s.A)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}class l extends n.ComponentBase{init(){this.config=d(d({},a),this.config),this.props=this.config.conditions,this.logger=new r.V("UserConditionalBehavior"),this.isUpdated=!1,this.isInjected=!1,this.getElements(),this.initialState=this.getInitialState(),this.popupListener=this.popupListener.bind(this),(0,o.Kd)((t=>{this.checkConditions(t)}))}getElements(){this.wrapper=this.el.parentElement,this.section=this.el.parentNode.querySelector(`.${this.config.classes.content}`),this.body=document.querySelector("body")}getInitialState(){const t={},e=this.config.hideSectionFirst;return Object.keys(this.config.attributes).forEach((e=>{this.wrapper.hasAttribute(e)&&(t[e]=this.wrapper.getAttribute(e))})),{isHidden:e,attributes:t}}revertAttributes(){this.removeAttributes(this.config.attributes),this.setAttributes(this.initialState.attributes)}revertToInitialState(){if(this.behavior===this.config.behaviors.popup)return this.isInjected=!1,void this.removeListeners();this.revertAttributes(),this.initialState.isHidden?this.hide():this.showAll()}checkConditions(t){const e=((t,e)=>{const i=(0,n.flattenProperties)(e),s={};return t.forEach((({propName:t})=>{s[t]=i[t]})),s})(this.props,t),i=((t,e={})=>t.filter((({propName:t,value:i})=>((t,e)=>{if(void 0===e)return"null"===t;const i=null===e?"null":e.toString(),s=0===t.indexOf("!");return!s&&i===t||!(!s||i===t.split("!").join(""))})(i,e[t]))))(this.props,e),s=i.length,o=!this.isUpdated&&s>0,r=this.isUpdated&&0===s;if(this.logger.log(this.el.uuid,"checkConditions",{shouldUpdate:o,shouldRevert:r}),o)return this.handleCondition(i[s-1]),void(this.isUpdated=!0);r&&(this.revertToInitialState(),this.isUpdated=!1)}handleCondition(t){const{behavior:e,fragmentVariationPath:i}=t,{behaviors:s}=this.config,n=this.isInjected?"":i;switch(this.path=n,this.logger.log(this.el.uuid,"handleCondition",{condition:t,path:n,behavior:e}),this.behavior=e,e){case s.show:this.show(n);break;case s.hide:this.hide();break;case s.showContentsNoXF:this.show();break;case s.popup:this.popup(n)}}createRequest(t,e){if(t&&""!==t){const{extension:i,params:s}=this.config,n=`${t}${i}${s.length>0?`?${s.join("&")}`:""}`;fetch(n).then((t=>{if(!t.ok)throw new Error(`Problem with receiving data from${t.url}`);return t.text()})).then((t=>e(t))).catch((t=>console.warn(t)))}}showContentsNoXF(t){this.show(t)}showContent(){this.section&&(this.section.classList.remove(this.config.classes.hide),this.wrapper.classList.remove(this.config.classes.hide))}show(t){this.revertAttributes(),t?this.injectXF(t):this.showContent()}hide(){this.wrapper.classList.add(this.config.classes.hide),this.setAttributes(this.config.attributes)}setAttributes(t){Object.keys(t).forEach((e=>{this.wrapper.setAttribute(e,t[e])}))}removeAttributes(t){Object.keys(t).forEach((t=>{this.wrapper.removeAttribute(t)}))}showWrapper(){this.wrapper.classList.remove(this.config.classes.hide),Object.keys(this.config.attributes).forEach((t=>{this.wrapper.removeAttribute(t)}))}showAll(){this.showContent(),this.showWrapper()}injectXF(t){const{hide:e,paywall:i}=this.config.classes;return this.section&&t?(this.isInjected=!0,this.section.children&&[...this.section.children].forEach((t=>t.classList.add(e))),this.createRequest(t,(t=>{const e=document.createRange().createContextualFragment(t);this.section.classList.add(i),this.section.appendChild(e)}))):null}popup(t){t&&(this.isInjected=!0,this.addListeners(),(0,n.subscribe)(h.I.subscribes.close,(t=>{t.uuid===`modal${this.el.uuid}`&&(this.opened=!1)})))}popupListener(t){this.preventCheck(t,this.path)}addListeners(){this.section.classList.add(this.config.classes.disable),this.section.addEventListener("keydown",this.popupListener),this.section.addEventListener("click",this.popupListener)}removeListeners(){this.section.classList.remove(this.config.classes.disable),this.section.removeEventListener("keydown",this.popupListener),this.section.removeEventListener("click",this.popupListener)}preventCheck(t,e){t.preventDefault(),t.stopImmediatePropagation(),!0!==this.opened&&(this.opened=!0,this.createRequest(e,(t=>{const e=document.createRange().createContextualFragment(this.config.templates.modal(t,this.el.uuid));this.popupFragment=this.body.appendChild(e)})))}}(0,n.register)({UserConditionalBehavior:l},0)}},t=>{t.O(0,[750],(()=>(16008,t(t.s=16008)))),t.O()}]);